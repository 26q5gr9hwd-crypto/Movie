import{_ as $e,r as m,c as H,b as d,d as a,e as t,s as le,t as y,K as me,g as p,L as Te,n as L,q as Ge,u as mt,i as _t,O as mn,z as ft,l as De,o as Qe,P as Et,x as Oe,E as fn,f as ce,Q as ot,m as ee,R as ae,y as X,U as O,S as Ln,D as ht,V as Pe,W as gn,X as Ct,Y as ct,Z as In,$ as ln,a0 as Rn,k as Tn,v as vt,a1 as Pn,a2 as Re,w as sn,a3 as lt,a4 as Sn,a5 as An,a6 as xn,a7 as jn,a8 as an,a9 as Un,aa as Nn,a as Bn,ab as rn,ac as Hn,ad as Dn,ae as $n}from"./index-D1ZcEdEA.js";import{_ as On,a as un,b as dn,M as cn}from"./MovieList-OZ6evIGx.js";import{S as kn}from"./SpinnerLoading-tCmfPPLG.js";import{N as bt}from"./ToastMessage-BZnPoAVK.js";import{u as Vn,S as Fn,a as qn}from"./trailer-x_Al5Cdn.js";import{u as yn,f as Kn,a as zn}from"./dateUtils-mc-mxoJ7.js";const tt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVR4nO2ZQUoDMRSGR7eewHoFsVS0HkUUXNXqASqK2EURBPFIVRe6c+UN1CvUXWvbT4KvMAwzNnnJdCrmg1BKad7/v7y0b5IkiUQiCwGoAx3gQjEugZ0qxTeAIX6MKjMBnBOGS62AVWAPOHVYdlMu9YArYOhphLeBT+ALmOKGEd2QubaAK+B2zngFxt4GgDXgGZjgR8ch5oEkCi8DkvlnRcYLV0Apfqw10M7JvPkV6AN3FmVwK+WyZRnvMEe8ef/ibECyb2o+zRuwnpQAxeLNivQ0BvYyE46qEJ/8fK4ycJKp/X4V4n0MdDNfukkqEO9jwP1LDgD7BeKPgmgp04CL+KUz4Cp+qQxoxC+NAdsNm4c0hWkukkUa8BGfegiadbFDq3/2UAZ8xc+QVvzMtqcKYkBaZ5/MN5xEl2DgLGDZ1KswsC09FPJqXTZoNm5oA6kyMGI2FxqfkluJ0uMTDfhBXAHiHvCCWEL8/RLqlv1MPCf+TSZ+13WC7KnEfWlqcwAeU7GNjnbiQsG5UC1ZAEAt1UMhOpquk6zknMy9l20C2AA+MnEHRo9msuOCs9EH4Fp5TVQ0rqVs0plH4re02Qh1Oq1lCjypsp+5H3gKcD/gykTirqnFZ/ZDy+OGxpapzD+QePrM/2KkKfcGPcv7AdvRkz23G1x4JPIP+AY3r/ywUk/2JAAAAABJRU5ErkJggg==",Wn="/reyohoho/assets/icon-shikimori-DGvXK9Jc.svg",nt=s=>{const e=document.createElement("div");e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgba(0, 0, 0, 0.8)",e.style.color="white",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e.style.fontSize="2rem",e.style.zIndex="99000",e.textContent=s,document.body.appendChild(e),setTimeout(()=>{document.body.removeChild(e)},2e3)},Gn={key:0},Yn={key:1},Xn={class:"players-list"},Zn=["onClick"],Qn={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Jn={key:0},eo={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},to={key:1},no={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},oo=["onClick"],lo={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},so={__name:"PlayerModal",props:{players:{type:Array,required:!0},selectedPlayer:{type:Object,default:null}},emits:["close","select"],setup(s,{emit:e}){const r=s,n=e,C=m(null),_=H(()=>r.players.filter(h=>!E(h)&&!M(h))),c=H(()=>r.players.some(h=>E(h))),v=H(()=>r.players.some(h=>M(h))),E=h=>h.key.toUpperCase().includes("HDREZKA"),M=h=>h.key.toUpperCase().includes("KODIK"),o=h=>h.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"").replace(/KODIK>/,"").trim(),u=h=>{n("select",h),n("close")},b=h=>r.selectedPlayer&&r.selectedPlayer.key===h.key,w=h=>r.selectedPlayer?h==="hdrezka"&&E(r.selectedPlayer)||h==="kodik"&&M(r.selectedPlayer):!1,U=h=>{C.value=h},P=()=>{C.value=null},S=h=>{let R=r.players.filter(x=>h==="hdrezka"&&E(x)||h==="kodik"&&M(x));return h==="kodik"?R.sort((x,W)=>o(x.translate).localeCompare(o(W.translate))):R},I=h=>S(h).some(R=>R.warning);return(h,R)=>(a(),d("div",{class:"modal",onClick:R[4]||(R[4]=Ge(x=>h.$emit("close"),["self"]))},[t("div",{class:"modal-content",onClick:R[3]||(R[3]=Ge(()=>{},["stop"]))},[t("button",{class:"close",onClick:R[0]||(R[0]=x=>h.$emit("close"))},"√ó"),C.value?(a(),d("h2",Yn,[t("button",{class:"back-btn",onClick:P},"‚Üê –ù–∞–∑–∞–¥"),le(" "+y(C.value==="hdrezka"?"ReYohoho - HDrezka":"Kodik"),1)])):(a(),d("h2",Gn,"–í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–µ–µ—Ä")),t("ul",Xn,[C.value?(a(!0),d(me,{key:1},Te(S(C.value),x=>(a(),d("li",{key:x.key},[t("button",{class:L(["player-item",{active:b(x)}]),onClick:W=>u(x)},[le(y(o(x.translate))+" ",1),x.warning?(a(),d("span",lo,"warning")):p("",!0)],10,oo)]))),128)):(a(),d(me,{key:0},[(a(!0),d(me,null,Te(_.value,x=>(a(),d("li",{key:x.key},[t("button",{class:L(["player-item",{active:b(x)}]),onClick:W=>u(x)},[le(y(o(x.translate))+" ",1),x.warning?(a(),d("span",Qn,"warning")):p("",!0)],10,Zn)]))),128)),c.value?(a(),d("li",Jn,[t("button",{class:L(["group-item",{active:w("hdrezka")}]),onClick:R[1]||(R[1]=x=>U("hdrezka"))},[R[5]||(R[5]=t("span",{class:"material-icons group-icon"},"folder",-1)),R[6]||(R[6]=le(" ReYohoho - HDrezka ")),I("hdrezka")?(a(),d("span",eo,"warning")):p("",!0)],2)])):p("",!0),v.value?(a(),d("li",to,[t("button",{class:L(["group-item",{active:w("kodik")}]),onClick:R[2]||(R[2]=x=>U("kodik"))},[R[7]||(R[7]=t("span",{class:"material-icons group-icon"},"folder",-1)),R[8]||(R[8]=le(" Kodik ")),I("kodik")?(a(),d("span",no,"warning")):p("",!0)],2)])):p("",!0)],64))])])]))}},io=$e(so,[["__scopeId","data-v-8b8d2b67"]]),ao={class:"players-list"},ro=["src"],uo={key:1,class:"controls"},co={class:"main-controls"},vo={class:"material-icons"},mo={class:"list-button-item"},fo={class:"material-icons"},go={class:"list-button-item"},ko={class:"material-icons"},yo={class:"list-button-item"},po={class:"list-button-item"},ho={class:"material-icons"},bo={class:"list-button-item"},wo={class:"material-icons"},Co={class:"tooltip-container","data-tooltip-container":"dimming"},_o={class:"material-icons"},Eo={class:"tooltip-container","data-tooltip-container":"blur"},Mo={class:"tooltip-container","data-tooltip-container":"compressor"},Lo={class:"tooltip-container","data-tooltip-container":"mirror"},Io={class:"tooltip-container","data-tooltip-container":"theater"},Ro={class:"material-symbols-outlined"},To={class:"custom-tooltip","data-tooltip":"theater"},Po={class:"tooltip-container","data-tooltip-container":"pip"},So={class:"tooltip-container","data-tooltip-container":"aspect_ratio"},Ao={class:"current-ratio"},xo=["onClick"],jo={key:0,class:"tooltip-container","data-tooltip-container":"app_link"},Uo={class:"custom-tooltip","data-tooltip":"app_link"},No={key:1,class:"tooltip-container","data-tooltip-container":"copy_link"},Bo={class:"custom-tooltip","data-tooltip":"copy_link"},Ho={key:0,class:"desktop-list-buttons"},Do={class:"tooltip-container"},$o={class:"material-icons"},Oo={class:"custom-tooltip"},Vo={class:"tooltip-container"},Fo={class:"material-icons"},qo={class:"custom-tooltip"},Ko={class:"tooltip-container"},zo={class:"custom-tooltip"},Wo={class:"tooltip-container"},Go={class:"material-icons"},Yo={class:"custom-tooltip"},Xo={class:"tooltip-container"},Zo={class:"material-icons"},Qo={class:"custom-tooltip"},Jo={__name:"PlayerComponent",props:{kpId:String,movieInfo:{type:Object,default:()=>({})}},emits:["update:selectedPlayer","update:movieInfo"],setup(s,{emit:e}){const r=mt(),n=Vn(),C=_t(),_=mn(),c=ft(),v=m(_.params.kp_id),E=s,M=e,o=m([]),u=m(null),b=m(!0),w=m(!1),U=m(!1),P=m(null),S=m(null),I=m(!1),h=m(""),R=m(null),x=m(window.innerHeight*.9),W=H(()=>"".concat(x.value,"px")),q=H(()=>r.isMobile),D=H(()=>!!window.electronAPI),T=m(null),_e=m(!1);let he=null;const ye=m(null),je=m(null),B=m(null),ne=m(null),G=m(!1),z=m(!1),se=m(null),pe=m(null),re=m(null),ge=m(null),Me=m(null),ke=m(null),Se=f=>{const l=document.querySelector('[data-tooltip-container="'.concat(f,'"]')),j=document.querySelector('[data-tooltip="'.concat(f,'"]'));if(!l||!j)return;const Y=l.getBoundingClientRect(),oe=j.getBoundingClientRect(),ve=window.innerHeight;Y.bottom+oe.height>ve?(j.style.top="auto",j.style.bottom="100%",j.style.marginTop="0",j.style.marginBottom="12px",j.style.transform="translateX(-50%)"):(j.style.top="100%",j.style.bottom="auto",j.style.marginTop="12px",j.style.marginBottom="0",j.style.transform="translateX(-50%)")},ie=f=>{T.value=f,_e.value=!1,clearTimeout(he),Pe(()=>{Se(f)})},Le=()=>{_e.value||(he=setTimeout(()=>{T.value=null},300))},fe=()=>{_e.value=!0,clearTimeout(he)},xe=()=>{_e.value=!1,T.value=null},Ee=H({get:()=>n.aspectRatio,set:f=>n.updateAspectRatio(f)}),Ae=H({get:()=>n.isCentered,set:f=>n.updateCentering(f)}),Ye=H(()=>{var f,l,j,Y,oe,ve,qe,Ke,ze,We;return((l=(f=E.movieInfo)==null?void 0:f.lists)==null?void 0:l.isFavorite)||((Y=(j=E.movieInfo)==null?void 0:j.lists)==null?void 0:Y.isWatching)||((ve=(oe=E.movieInfo)==null?void 0:oe.lists)==null?void 0:ve.isLater)||((Ke=(qe=E.movieInfo)==null?void 0:qe.lists)==null?void 0:Ke.isCompleted)||((We=(ze=E.movieInfo)==null?void 0:ze.lists)==null?void 0:We.isAbandoned)}),Fe=H(()=>n.preferredPlayer),Xe=m(0),Ie=f=>f.toUpperCase(),Ue=()=>{if(w.value||!S.value)return;const[f,l]=Ee.value.split(":").map(Number);x.value=window.innerHeight*.9,Xe.value=Math.min(S.value.clientWidth*(l/f),x.value)},be=H(()=>{if(w.value)return{};const[f,l]=Ee.value.split(":").map(Number),j=x.value*(f/l);return{width:"100%",maxWidth:"".concat(j,"px"),maxHeight:W.value,margin:"0 auto",overflow:"hidden"}}),Ne=H(()=>{const[f,l]=Ee.value.split(":").map(Number);return{position:"relative",width:"100%",paddingTop:"".concat(l/f*100,"%")}}),k=()=>{S.value&&setTimeout(()=>{Pe(()=>{S.value.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})},500)},Z=async()=>{try{h.value="",R.value=null;const f=await Ln(E.kpId);if(o.value=Object.entries(f).map(([l,j])=>({key:l.toUpperCase(),...j})),o.value.length>0){if(Fe.value){const l=Ie(Fe.value),j=o.value.find(Y=>Ie(Y.key)===l);u.value=j||o.value[0]}else u.value=o.value[0];M("update:selectedPlayer",u.value)}}catch(f){const{message:l,code:j}=ht(f);h.value=l,R.value=j,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–ª–µ–µ—Ä–æ–≤:",f)}},Be=()=>{I.value=!0},Je=()=>{I.value=!1},g=()=>{try{return se.value||(se.value=new(window.AudioContext||window.webkitAudioContext)),pe.value||(pe.value=se.value.createDynamicsCompressor(),pe.value.threshold.value=-50,pe.value.knee.value=40,pe.value.ratio.value=12,pe.value.attack.value=0,pe.value.release.value=.25,ge.value=se.value.createGain(),Me.value=se.value.createGain(),ge.value.gain.value=0,Me.value.gain.value=1,pe.value.connect(ge.value),ge.value.connect(se.value.destination),Me.value.connect(se.value.destination)),!0}catch(f){return console.log("Error initializing audio context:",f),!1}},i=async f=>{try{if(!se.value||ke.value===f)return!0;const l=P.value,j=(l==null?void 0:l.src)||"";if(j.includes("videoframe")||j.includes("kinoserial.net")||j.includes("allarknow"))return console.log("Player detected as unsupported for compressor:",j),ke.value=f,re.value=null,z.value=!1,D.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –ø–ª–µ–µ—Ä–æ–º"),!1;if(re.value)try{re.value.disconnect()}catch(oe){}const Y=async(oe=0)=>{oe>0&&await new Promise(ve=>setTimeout(ve,oe));try{return re.value=se.value.createMediaElementSource(f),ke.value=f,re.value.connect(pe.value),re.value.connect(Me.value),console.log("Video audio setup completed (attempt with ".concat(oe,"ms delay)")),!0}catch(ve){if(ve.name==="InvalidStateError"&&ve.message.includes("already connected"))return console.log("MediaElementSource already connected (".concat(oe,"ms delay attempt)")),!1;throw ve}};return await Y(0)||await Y(100)||await Y(300)||await Y(800)?!0:(console.log("Video element has internal audio processing, compressor not available for this player"),ke.value=f,re.value=null,z.value=!1,D.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –ø–ª–µ–µ—Ä–æ–º"),!1)}catch(l){return console.log("Error setting up video audio:",l),!1}},K=async f=>{if(P.value)try{const l=P.value,j=l.contentDocument||l.contentWindow.document;if(!j)return;const Y=j.querySelectorAll("video");if(Y.length===0)return;const oe=Y[0];if(!g())return;if(!await i(oe)||!re.value){console.log("Compressor not available for this player");return}f&&!z.value?(ge.value.gain.setValueAtTime(1,se.value.currentTime),Me.value.gain.setValueAtTime(0,se.value.currentTime),z.value=!0,D.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –≤–∫–ª—é—á—ë–Ω"),console.log("Compressor enabled")):!f&&z.value&&(ge.value.gain.setValueAtTime(0,se.value.currentTime),Me.value.gain.setValueAtTime(1,se.value.currentTime),z.value=!1,D.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –æ—Ç–∫–ª—é—á—ë–Ω"),console.log("Compressor disabled"))}catch(l){console.log("Compressor error:",l),D.value&&window.electronAPI.showToast("–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä–∞")}},te=()=>{D.value?window.electronAPI.sendHotKey("F2"):(nt("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},A=()=>{D.value?(we.value=!we.value,K(we.value)):(nt("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},$=()=>{D.value?(Ce.value=!Ce.value,Ve(Ce.value)):(nt("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},V=()=>{w.value=!w.value,w.value?(window.addEventListener("mousemove",ue),document.addEventListener("keydown",et),document.body.classList.add("no-scroll")):(window.removeEventListener("mousemove",ue),document.removeEventListener("keydown",et),document.body.classList.remove("no-scroll")),U.value=w.value,Pe(()=>k())},J=m(null),ue=()=>{J.value=setTimeout(()=>{clearTimeout(J.value),U.value=!1},4e3),U.value=!0},Q=H(()=>r.dimmingEnabled),de=()=>{w.value||r.toggleDimming()},we=H({get:()=>n.compressorEnabled,set:f=>n.updateCompressor(f)}),Ce=H({get:()=>n.mirrorEnabled,set:f=>n.updateMirror(f)}),Ve=f=>{if(P.value)try{const l=P.value,j=l.contentDocument||l.contentWindow.document;if(!j)return;const Y=j.querySelectorAll("video");if(Y.length>0&&(Y.forEach(oe=>{f?oe.style.transform="scaleX(-1)":oe.style.transform="scaleX(1)"}),G.value=f,D.value)){const oe=f?"–ó–µ—Ä–∫–∞–ª–æ –≤–∫–ª—é—á–µ–Ω–æ":"–ó–µ—Ä–∫–∞–ª–æ –æ—Ç–∫–ª—é—á–µ–Ω–æ";window.electronAPI.showToast(oe)}}catch(l){}},Ze=()=>{ne.value&&clearInterval(ne.value),ne.value=setInterval(()=>{if(P.value)try{const f=P.value,l=f.contentDocument||f.contentWindow.document;if(!l)return;const j=l.querySelectorAll("video");if(j.length>0){const Y=j[0],ve=Y.style.transform==="scaleX(-1)";Ce.value&&!ve?(Y.style.transform="scaleX(-1)",G.value=!0):!Ce.value&&ve&&(Y.style.transform="scaleX(1)",G.value=!1),ke.value!==Y?(console.log("Video element changed, reinitializing compressor"),ke.value=null,z.value=!1,we.value&&setTimeout(()=>{K(!0)},500)):we.value!==z.value&&re.value&&(console.log("Compressor state mismatch, reapplying"),K(we.value))}}catch(f){}},1e3)},gt=()=>{b.value=!1,Ze()},et=f=>{(f.key==="Escape"&&w.value||f.altKey&&f.keyCode===84)&&V()},st=f=>{Ee.value=f,setTimeout(()=>{Ae.value&&k()},310)},kt=()=>{const f="reyohoho://#".concat(v.value);try{window.location.href=f}catch(l){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Å—ã–ª–∫–∏:",l)}},yt=()=>{const f=window.location.href;navigator.clipboard.writeText(f).then(()=>{}),ye.value.showNotification("–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∏–ª—å–º —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞")};function F(f){return f.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"HDRezka - ").replace(/KODIK>/,"Kodik - ").trim()}const pn=H(()=>{var f,l;return D.value?!1:!((l=(f=u.value)==null?void 0:f.key)!=null&&l.toUpperCase().includes("TORRENTS"))}),hn=()=>{try{re.value&&(re.value.disconnect(),re.value=null),se.value&&(se.value.close(),se.value=null),pe.value=null,ge.value=null,Me.value=null,ke.value=null,z.value=!1}catch(f){console.log("Error cleaning up audio context:",f)}},bn=f=>{var l;if(((l=u.value)==null?void 0:l.key)===f.key){Je();return}u.value=f,b.value=!0,G.value=!1,z.value=!1,ke.value=null,ne.value&&(clearInterval(ne.value),ne.value=null),n.updatePreferredPlayer(Ie(f.key)),M("update:selectedPlayer",f)};De(u,f=>{if(f)if(b.value=!0,G.value=!1,z.value=!1,ke.value=null,ne.value&&(clearInterval(ne.value),ne.value=null),n.updatePreferredPlayer(Ie(f.key)),M("update:selectedPlayer",f),f.key.toUpperCase().includes("TORRENTS")){const l=document.querySelector(".rocketme_fon");l&&(l.style.display="none");const j=document.querySelector(".pm_preloader");j&&(j.style.display="none")}else{const l=document.querySelector(".rocketme_fon");l&&(l.style.display="");const j=document.querySelector(".pm_preloader");j&&(j.style.display="")}}),De(()=>_.params.kp_id,async f=>{f&&f!==v.value&&(v.value=f,G.value=!1,z.value=!1,ke.value=null,ne.value&&(clearInterval(ne.value),ne.value=null),Ae.value&&k())},{immediate:!0});const pt=["16:9","12:5","4:3"],wn=()=>{const l=(pt.indexOf(Ee.value)+1)%pt.length;st(pt[l])},Cn=f=>{var j,Y,oe,ve,qe,Ke,ze,We,it,at,rt,ut,dt;return(dt={[O.FAVORITE]:((Y=(j=E.movieInfo)==null?void 0:j.lists)==null?void 0:Y.isFavorite)||!1,[O.HISTORY]:((ve=(oe=E.movieInfo)==null?void 0:oe.lists)==null?void 0:ve.isHistory)||!1,[O.LATER]:((Ke=(qe=E.movieInfo)==null?void 0:qe.lists)==null?void 0:Ke.isLater)||!1,[O.COMPLETED]:((We=(ze=E.movieInfo)==null?void 0:ze.lists)==null?void 0:We.isCompleted)||!1,[O.ABANDONED]:((at=(it=E.movieInfo)==null?void 0:it.lists)==null?void 0:at.isAbandoned)||!1,[O.WATCHING]:((ut=(rt=E.movieInfo)==null?void 0:rt.lists)==null?void 0:ut.isWatching)||!1}[f])!=null?dt:!1},He=async f=>{if(!C.token){ye.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:_n});return}try{const l={[O.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[O.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[O.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[O.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[O.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[O.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};Cn(f)?(await gn(v.value,f),ye.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(l[f]))):(await Ct(v.value,f),ye.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(l[f])))}catch(l){const{message:j,code:Y}=ht(l);ye.value.showNotification("".concat(j," ").concat(Y))}M("update:movieInfo")},_n=()=>{c.push("/login")},wt=H(()=>n.showFavoriteTooltip),En=()=>{c.push("/settings"),xe()},Mn=async()=>{if(!D.value){nt("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank");return}if(P.value)try{const f=P.value,l=f.contentDocument||f.contentWindow.document;if(!l)return;const j=l.querySelector("video");if(!j)return;document.pictureInPictureElement?await document.exitPictureInPicture():document.pictureInPictureEnabled?await j.requestPictureInPicture():nt('–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–∂–∏–º "–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ"')}catch(f){console.error("Error toggling PiP:",f),nt('–ù–µ —É–¥–∞–ª–æ—Å—å –≤–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º "–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ"')}};return Qe(()=>{b.value=!0,Z(),q.value&&(Ee.value="4:3"),Ue(),window.addEventListener("resize",Ue),window.addEventListener("resize",Se),Ae.value&&k()}),Et(()=>{window.removeEventListener("resize",Ue),window.removeEventListener("resize",Se),window.removeEventListener("mousemove",ue),document.removeEventListener("keydown",et),document.body.classList.remove("no-scroll"),ne.value&&clearInterval(ne.value),hn()}),(f,l)=>{var j,Y,oe,ve,qe,Ke,ze,We,it,at,rt,ut,dt,Tt,Pt,St,At,xt,jt,Ut,Nt,Bt,Ht,Dt,$t,Ot,Vt,Ft,qt,Kt,zt,Wt,Gt,Yt,Xt,Zt,Qt,Jt,en,tn,nn,on;return h.value?(a(),Oe(fn,{key:0,message:h.value,code:R.value},null,8,["message","code"])):(a(),d(me,{key:1},[t("div",ao,[l[41]||(l[41]=t("span",null,"–ü–ª–µ–µ—Ä:",-1)),t("button",{class:"player-btn",onClick:Be},y(u.value?F(u.value.translate).toUpperCase():"–ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–µ–µ—Ä–æ–≤..."),1)]),I.value?(a(),Oe(io,{key:0,players:o.value,"selected-player":u.value,onClose:Je,onSelect:bn},null,8,["players","selected-player"])):p("",!0),t("div",{ref_key:"containerRef",ref:S,class:L(["player-container",{"theater-mode":w.value}]),style:ot(w.value?{}:be.value)},[t("div",{class:L(["iframe-wrapper",{pm_video:pn.value}]),style:ot(w.value?{}:Ne.value)},[ee(t("iframe",{ref_key:"playerIframe",ref:P,src:(j=u.value)==null?void 0:j.iframe,frameborder:"0",allowfullscreen:"",webkitallowfullscreen:"",class:L(["responsive-iframe",{"theater-mode-unlock":U.value,"theater-mode-lock":w.value,dimmed:Q.value}]),onLoad:gt},null,42,ro),[[ae,!b.value&&((Y=u.value)==null?void 0:Y.iframe)]]),b.value?(a(),Oe(kn,{key:0})):p("",!0)],6),w.value?(a(),d("button",{key:0,class:L(["close-theater-btn",{visible:U.value}]),onClick:V}," ‚úñ ",2)):p("",!0)],6),w.value?p("",!0):(a(),d("div",uo,[t("div",co,[q.value?p("",!0):(a(),d("div",{key:0,ref_key:"tooltipContainer",ref:je,class:"tooltip-container list-buttons-container","data-tooltip-container":"favorite"},[wt.value?(a(),d("button",{key:0,class:L(["favorite-btn",{active:(ve=(oe=s.movieInfo)==null?void 0:oe.lists)==null?void 0:ve.isFavorite}]),onMouseenter:l[0]||(l[0]=N=>ie("favorite")),onMouseleave:Le,onClick:l[1]||(l[1]=N=>He(X(O).FAVORITE))},[t("span",vo,y((Ke=(qe=s.movieInfo)==null?void 0:qe.lists)!=null&&Ke.isFavorite?"favorite":"favorite_border"),1),t("span",{class:L(["material-icons dropdown-arrow",{highlighted:Ye.value}])},"expand_more",2)],34)):p("",!0),ee(t("div",{ref_key:"tooltip",ref:B,class:"custom-tooltip advanced-tooltip list-buttons-dropdown","data-tooltip":"favorite",onMouseenter:fe,onMouseleave:xe},[t("div",mo,[t("button",{class:L(["favorite-btn",{active:(We=(ze=s.movieInfo)==null?void 0:ze.lists)==null?void 0:We.isFavorite}]),onClick:l[2]||(l[2]=N=>He(X(O).FAVORITE))},[t("span",fo,y((at=(it=s.movieInfo)==null?void 0:it.lists)!=null&&at.isFavorite?"favorite":"favorite_border"),1),l[42]||(l[42]=t("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))],2)]),t("div",go,[t("button",{class:L(["watching-btn",{active:(ut=(rt=s.movieInfo)==null?void 0:rt.lists)==null?void 0:ut.isWatching}]),onClick:l[3]||(l[3]=N=>He(X(O).WATCHING))},[t("span",ko,y((Tt=(dt=s.movieInfo)==null?void 0:dt.lists)!=null&&Tt.isWatching?"visibility":"visibility_off"),1),l[43]||(l[43]=t("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))],2)]),t("div",yo,[t("button",{class:L(["later-btn",{active:(St=(Pt=s.movieInfo)==null?void 0:Pt.lists)==null?void 0:St.isLater}]),onClick:l[4]||(l[4]=N=>He(X(O).LATER))},l[44]||(l[44]=[t("span",{class:"material-icons"},"watch_later",-1),t("span",{class:"button-label"},"–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ",-1)]),2)]),t("div",po,[t("button",{class:L(["completed-btn",{active:(xt=(At=s.movieInfo)==null?void 0:At.lists)==null?void 0:xt.isCompleted}]),onClick:l[5]||(l[5]=N=>He(X(O).COMPLETED))},[t("span",ho,y((Ut=(jt=s.movieInfo)==null?void 0:jt.lists)!=null&&Ut.isCompleted?"check_circle":"check_circle_outline"),1),l[45]||(l[45]=t("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))],2)]),t("div",bo,[t("button",{class:L(["abandoned-btn",{active:(Bt=(Nt=s.movieInfo)==null?void 0:Nt.lists)==null?void 0:Bt.isAbandoned}]),onClick:l[6]||(l[6]=N=>He(X(O).ABANDONED))},[t("span",wo,y(((Dt=(Ht=s.movieInfo)==null?void 0:Ht.lists)!=null&&Dt.isAbandoned,"not_interested")),1),l[46]||(l[46]=t("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))],2)]),t("div",{class:"tooltip-hint"},[l[48]||(l[48]=t("span",{class:"material-icons"},"settings",-1)),t("span",null,[l[47]||(l[47]=le("–°—Ç–∏–ª—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ ")),t("a",{class:"settings-link",onClick:En},"–Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö")])])],544),[[ae,T.value==="favorite"&&wt.value]])],512)),q.value?p("",!0):(a(),d(me,{key:1},[t("div",Co,[t("button",{class:L(["dimming-btn",{active:Q.value}]),onMouseenter:l[7]||(l[7]=N=>ie("dimming")),onMouseleave:l[8]||(l[8]=N=>T.value=null),onClick:de},[t("span",_o,y(Q.value?"light_mode":"dark_mode"),1)],34),ee(t("div",{class:"custom-tooltip","data-tooltip":"dimming"},y(Q.value?"–û—Ç–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ":"–í–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ"),513),[[ae,T.value==="dimming"]])]),t("div",Eo,[t("button",{class:L(["blur-btn",{"electron-only":!D.value}]),onMouseenter:l[9]||(l[9]=N=>ie("blur")),onMouseleave:l[10]||(l[10]=N=>T.value=null),onClick:te},l[49]||(l[49]=[t("span",{class:"material-icons"},"blur_on",-1)]),34),ee(t("div",{class:"custom-tooltip","data-tooltip":"blur"},y(D.value?"–ë–ª—é—Ä":"–ë–ª—é—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[ae,T.value==="blur"]])]),t("div",Mo,[t("button",{class:L(["material-symbols-outlined",{active:we.value,"electron-only":!D.value}]),onMouseenter:l[11]||(l[11]=N=>ie("compressor")),onMouseleave:l[12]||(l[12]=N=>T.value=null),onClick:A},l[50]||(l[50]=[t("span",{class:"material-icons"},"graphic_eq",-1)]),34),ee(t("div",{class:"custom-tooltip","data-tooltip":"compressor"},y(D.value?"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä":"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[ae,T.value==="compressor"]])]),t("div",Lo,[t("button",{class:L(["mirror-btn",{active:Ce.value,"electron-only":!D.value}]),onMouseenter:l[13]||(l[13]=N=>ie("mirror")),onMouseleave:l[14]||(l[14]=N=>T.value=null),onClick:$},l[51]||(l[51]=[t("span",{class:"material-icons"},"flip",-1)]),34),ee(t("div",{class:"custom-tooltip","data-tooltip":"mirror"},y(D.value?"–ó–µ—Ä–∫–∞–ª–æ":"–ó–µ—Ä–∫–∞–ª–æ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[ae,T.value==="mirror"]])]),t("div",Io,[t("button",{class:"theater-mode-btn",onMouseenter:l[15]||(l[15]=N=>ie("theater")),onMouseleave:l[16]||(l[16]=N=>T.value=null),onClick:V},[t("span",Ro,y(w.value?"fullscreen_exit":"aspect_ratio"),1)],32),ee(t("div",To,[le(y(w.value?"–í—ã–π—Ç–∏ –∏–∑ —Ç–µ–∞—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞":"–¢–µ–∞—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º")+" ",1),l[52]||(l[52]=t("span",{class:"shortcut-hint"},"Alt+T",-1))],512),[[ae,T.value==="theater"]])]),t("div",Po,[t("button",{class:L(["pip-btn",{"electron-only":!D.value}]),onMouseenter:l[17]||(l[17]=N=>ie("pip")),onMouseleave:l[18]||(l[18]=N=>T.value=null),onClick:Mn},l[53]||(l[53]=[t("span",{class:"material-icons"},"picture_in_picture_alt",-1)]),34),ee(t("div",{class:"custom-tooltip","data-tooltip":"pip"},y(D.value?"–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ":"–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[ae,T.value==="pip"]])]),t("div",So,[t("button",{class:"aspect-ratio-dropdown-btn",onMouseenter:l[19]||(l[19]=N=>ie("aspect_ratio")),onMouseleave:Le,onClick:wn},[t("span",Ao,y(Ee.value),1)],32),ee(t("div",{class:"custom-tooltip advanced-tooltip aspect-ratio-dropdown","data-tooltip":"aspect_ratio",onMouseenter:fe,onMouseleave:xe},[(a(),d(me,null,Te(pt,N=>t("div",{key:N,class:L(["aspect-ratio-option",{active:Ee.value===N}]),onClick:Da=>st(N)},y(N),11,xo)),64))],544),[[ae,T.value==="aspect_ratio"]])]),t("div",{class:"tooltip-container","data-tooltip-container":"centering",onMouseenter:l[21]||(l[21]=N=>ie("centering")),onMouseleave:Le},[t("button",{class:"center-btn",onClick:k},l[54]||(l[54]=[t("span",{class:"material-icons"},"center_focus_strong",-1)])),ee(t("div",{class:"custom-tooltip advanced-tooltip","data-tooltip":"centering",onMouseenter:fe,onMouseleave:xe},[l[55]||(l[55]=le(" –û—Ç—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–ª–µ–µ—Ä ")),ce(Fn,{modelValue:Ae.value,"onUpdate:modelValue":l[20]||(l[20]=N=>Ae.value=N),title:"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞"},null,8,["modelValue"]),l[56]||(l[56]=t("span",{class:"tooltip-title"},"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞",-1))],544),[[ae,T.value==="centering"]])],32),D.value?p("",!0):(a(),d("div",jo,[t("button",{class:"app-link-btn",onMouseenter:l[22]||(l[22]=N=>ie("app_link")),onMouseleave:l[23]||(l[23]=N=>T.value=null),onClick:kt},l[57]||(l[57]=[t("span",{class:"material-icons"},"open_in_new",-1)]),32),ee(t("div",Uo," –û—Ç–∫—Ä—ã—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ",512),[[ae,T.value==="app_link"]])])),D.value?(a(),d("div",No,[t("button",{class:"copy-link-btn",onMouseenter:l[24]||(l[24]=N=>ie("copy_link")),onMouseleave:l[25]||(l[25]=N=>T.value=null),onClick:yt},l[58]||(l[58]=[t("span",{class:"material-icons"},"content_copy",-1)]),32),ee(t("div",Bo," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É ",512),[[ae,T.value==="copy_link"]])])):p("",!0)],64))]),!q.value&&!wt.value?(a(),d("div",Ho,[t("div",Do,[t("button",{class:L(["favorite-btn",{active:(Ot=($t=s.movieInfo)==null?void 0:$t.lists)==null?void 0:Ot.isFavorite}]),onMouseenter:l[26]||(l[26]=N=>ie("favorite")),onMouseleave:l[27]||(l[27]=N=>T.value=null),onClick:l[28]||(l[28]=N=>He(X(O).FAVORITE))},[t("span",$o,y((Ft=(Vt=s.movieInfo)==null?void 0:Vt.lists)!=null&&Ft.isFavorite?"favorite":"favorite_border"),1)],34),ee(t("div",Oo,y("–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"),512),[[ae,T.value==="favorite"]])]),t("div",Vo,[t("button",{class:L(["watching-btn",{active:(Kt=(qt=s.movieInfo)==null?void 0:qt.lists)==null?void 0:Kt.isWatching}]),onMouseenter:l[29]||(l[29]=N=>ie("watching")),onMouseleave:l[30]||(l[30]=N=>T.value=null),onClick:l[31]||(l[31]=N=>He(X(O).WATCHING))},[t("span",Fo,y((Wt=(zt=s.movieInfo)==null?void 0:zt.lists)!=null&&Wt.isWatching?"visibility":"visibility_off"),1)],34),ee(t("div",qo,y("–°–º–æ—Ç—Ä—é"),512),[[ae,T.value==="watching"]])]),t("div",Ko,[t("button",{class:L(["later-btn",{active:(Yt=(Gt=s.movieInfo)==null?void 0:Gt.lists)==null?void 0:Yt.isLater}]),onMouseenter:l[32]||(l[32]=N=>ie("later")),onMouseleave:l[33]||(l[33]=N=>T.value=null),onClick:l[34]||(l[34]=N=>He(X(O).LATER))},l[59]||(l[59]=[t("span",{class:"material-icons"},"watch_later",-1)]),34),ee(t("div",zo,y("–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"),512),[[ae,T.value==="later"]])]),t("div",Wo,[t("button",{class:L(["completed-btn",{active:(Zt=(Xt=s.movieInfo)==null?void 0:Xt.lists)==null?void 0:Zt.isCompleted}]),onMouseenter:l[35]||(l[35]=N=>ie("completed")),onMouseleave:l[36]||(l[36]=N=>T.value=null),onClick:l[37]||(l[37]=N=>He(X(O).COMPLETED))},[t("span",Go,y((Jt=(Qt=s.movieInfo)==null?void 0:Qt.lists)!=null&&Jt.isCompleted?"check_circle":"check_circle_outline"),1)],34),ee(t("div",Yo,y("–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"),512),[[ae,T.value==="completed"]])]),t("div",Xo,[t("button",{class:L(["abandoned-btn",{active:(tn=(en=s.movieInfo)==null?void 0:en.lists)==null?void 0:tn.isAbandoned}]),onMouseenter:l[38]||(l[38]=N=>ie("abandoned")),onMouseleave:l[39]||(l[39]=N=>T.value=null),onClick:l[40]||(l[40]=N=>He(X(O).ABANDONED))},[t("span",Zo,y(((on=(nn=s.movieInfo)==null?void 0:nn.lists)!=null&&on.isAbandoned,"not_interested")),1)],34),ee(t("div",Qo,y("–ë—Ä–æ—à–µ–Ω–æ"),512),[[ae,T.value==="abandoned"]])])])):p("",!0)])),ce(bt,{ref_key:"notificationRef",ref:ye},null,512)],64))}}},vn=$e(Jo,[["__scopeId","data-v-0787d568"]]),el={key:0,class:"carousel-container"},tl={class:"carousel-wrapper"},nl=["onClick"],ol=["src","alt"],ll={class:"video-name"},sl={key:0,class:"video-player"},il=["src"],al={__name:"TrailerCarousel",props:{videos:{type:Array,required:!0},activeVideoIndex:{type:Number,default:null}},emits:["select"],setup(s,{emit:e}){const r=mt(),n=H(()=>r.isMobile),C=s,_=e,c=m(C.activeVideoIndex),v=m(null),E=m(!1),M=m(!1),o=()=>{if(!v.value)return;const{scrollLeft:S,scrollWidth:I,clientWidth:h}=v.value;E.value=S>0,M.value=S<I-h-1},u=S=>{if(!v.value)return;const I=v.value.querySelector(".carousel-item");if(!I)return;const h=I.clientWidth+16;v.value.scrollBy({left:h*S,behavior:"smooth"})},b=S=>{c.value=S,_("select",C.videos[S])},w=()=>o(),U=m([]),P=async S=>{try{return(await fetch("https://img.youtube.com/vi/".concat(S,"/0.jpg"))).ok}catch(I){return!1}};return Qe(async()=>{const S=C.videos.map(async h=>await P(h.videoId)?h:null),I=await Promise.all(S);U.value=I.filter(Boolean),o(),window.addEventListener("resize",w)}),De(()=>C.videos,async S=>{const I=S.map(async R=>await P(R.videoId)?R:null),h=await Promise.all(I);U.value=h.filter(Boolean)}),De(()=>C.activeVideoIndex,S=>{c.value=S}),Et(()=>{window.removeEventListener("resize",w)}),(S,I)=>U.value.length?(a(),d("div",el,[I[4]||(I[4]=t("h2",null,"–¢—Ä–µ–π–ª–µ—Ä—ã (YouTube)",-1)),t("div",tl,[ee(t("button",{class:"scroll-button left",onClick:I[0]||(I[0]=h=>u(-1))},I[2]||(I[2]=[t("span",{class:"material-symbols-outlined"},"arrow_back_ios",-1)]),512),[[ae,!n.value&&E.value]]),t("div",{ref_key:"carousel",ref:v,class:"carousel",onScroll:o},[(a(!0),d(me,null,Te(U.value,(h,R)=>(a(),d("div",{key:R,class:"carousel-item",onClick:x=>b(R)},[t("img",{src:"https://img.youtube.com/vi/".concat(h.videoId,"/0.jpg"),alt:h.name},null,8,ol),t("div",ll,y(h.name),1)],8,nl))),128))],544),ee(t("button",{class:"scroll-button right",onClick:I[1]||(I[1]=h=>u(1))},I[3]||(I[3]=[t("span",{class:"material-symbols-outlined"},"arrow_forward_ios",-1)]),512),[[ae,!n.value&&M.value]])]),c.value!==null?(a(),d("div",sl,[t("iframe",{src:s.videos[c.value].iframeUrl,frameborder:"0",allowfullscreen:""},null,8,il)])):p("",!0)])):p("",!0)}},rl=$e(al,[["__scopeId","data-v-4a5806b3"]]),ul={class:"rating-container"},dl={class:"rating-display"},cl={class:"rating-numbers"},vl=["onClick","onMouseenter"],ml={key:0,class:"tooltip-footer"},fl={class:"rating-numbers mobile-rating-numbers"},gl=["onClick"],kl={key:0,class:"mobile-modal-footer"},yl={__name:"MovieRating",props:{kpId:{type:String,required:!0},showDash:{type:Boolean,default:!1}},setup(s){const e=mt(),r=ft(),n=s,C=m(null),_=m(null),c=m(null),v=m(null),E=m(0),M=m(!1),o=m(!1);let u=null;const b=x=>x?x.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",w=()=>{u=setTimeout(()=>{M.value=!1,e.isMobile||(o.value=!1)},100)},U=()=>{u&&(clearTimeout(u),u=null),M.value=!0},P=()=>{e.isMobile&&(o.value=!o.value)},S=()=>{r.push("/login")},I=async()=>{try{const x=await In(n.kpId);_.value=x.user_rating,c.value=x.average_rating,v.value=b(x.vote_count)}catch(x){console.error("Error loading rating:",x)}},h=async x=>{var W;try{x===_.value?(await ln(n.kpId,null),_.value=null,C.value.showNotification("–û—Ü–µ–Ω–∫–∞ —É–¥–∞–ª–µ–Ω–∞")):(await ln(n.kpId,x),_.value=x,C.value.showNotification("–û—Ü–µ–Ω–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞")),e.isMobile&&(o.value=!1),I()}catch(q){console.error("Error setting rating:",q),((W=q.response)==null?void 0:W.status)===401?C.value.showNotification('–î–ª—è –æ—Ü–µ–Ω–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:S}):C.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ü–µ–Ω–∫–∏"),e.isMobile&&(o.value=!1)}},R=()=>{o.value=!1};return Qe(()=>{I()}),(x,W)=>(a(),d("div",ul,[t("div",dl,[t("a",{href:"#",class:L(["rating-link",{"has-rating":_.value}]),onMouseenter:W[0]||(W[0]=q=>M.value=!0),onMouseleave:w,onClick:Ge(P,["prevent"])},[W[3]||(W[3]=t("img",{src:On,alt:"ReYohoho",class:"rating-logo"},null,-1)),t("span",{class:L(["average-rating",X(ct)(c.value)])},y(c.value?c.value.toFixed(1).replace(/\.0$/,""):"‚Äî"),3)],34),ee(t("div",{class:"rating-tooltip",onMouseenter:U,onMouseleave:w},[t("div",cl,[(a(),d(me,null,Te(10,q=>t("button",{key:q,class:L(["number-btn",{active:q===_.value,hover:q===E.value,"average-highlight":c.value&&q<=Math.round(c.value)}]),onClick:D=>h(q),onMouseenter:D=>E.value=q,onMouseleave:W[1]||(W[1]=D=>E.value=0)},y(q),43,vl)),64))]),v.value?(a(),d("div",ml,"–û—Ü–µ–Ω–æ–∫: "+y(v.value),1)):p("",!0)],544),[[ae,(M.value||o.value)&&!X(e).isMobile]])]),ce(bt,{ref_key:"notificationRef",ref:C},null,512),X(e).isMobile&&o.value?(a(),d("div",{key:0,class:"mobile-modal-overlay",onClick:R},[t("div",{class:"mobile-modal",onClick:W[2]||(W[2]=Ge(()=>{},["stop"]))},[t("div",{class:"mobile-modal-header"},[W[4]||(W[4]=t("h3",null,"–û—Ü–µ–Ω–∏—Ç—å —Ñ–∏–ª—å–º",-1)),t("button",{class:"close-button",onClick:R},"√ó")]),t("div",fl,[(a(),d(me,null,Te(10,q=>t("button",{key:q,class:L(["number-btn",{active:q===_.value,"average-highlight":c.value&&q<=Math.round(c.value)}]),onClick:D=>h(q)},y(q),11,gl)),64))]),v.value?(a(),d("div",kl,"–û—Ü–µ–Ω–æ–∫: "+y(v.value),1)):p("",!0)])])):p("",!0)]))}},pl=$e(yl,[["__scopeId","data-v-2df64bd5"]]),hl={name:"EmojiPicker",props:{isVisible:{type:Boolean,default:!1}},emits:["emoji-selected","mouse-enter","mouse-leave","close"],data(){return{activeCategory:"smileys",categories:[{name:"smileys",icon:"üòÄ",emojis:["üòÄ","üòÉ","üòÑ","üòÅ","üòÜ","üòÖ","üòÇ","ü§£","üòä","üòá","üôÇ","üôÉ","üòâ","üòå","üòç","ü•∞","üòò","üòó","üòô","üòö","üòã","üòõ","üòù","üòú","ü§™","ü§®","üßê","ü§ì","üòé","ü§©","ü•≥"]},{name:"emotions",icon:"üò¢",emojis:["üò•","üò¢","üò≠","üò§","üò†","üò°","ü§¨","ü§Ø","üò≥","ü•µ","ü•∂","üò±","üò®","üò∞","üò•","üòì","ü§ó","ü§î","ü§≠","ü§´","ü§•","üò∂","üòê","üòë","üò¨","üôÑ","üòØ","üò¶","üòß","üòÆ","üò≤"]},{name:"gestures",icon:"üëç",emojis:["üëç","üëé","üëå","ü§å","ü§è","‚úåÔ∏è","ü§û","ü§ü","ü§ò","ü§ô","üëà","üëâ","üëÜ","üñï","üëá","‚òùÔ∏è","üëè","üôå","üëê","ü§≤","ü§ù","üôè","‚úçÔ∏è","üí™","ü¶æ","ü¶ø","ü¶µ","ü¶∂","üëÇ","ü¶ª","üëÉ"]},{name:"hearts",icon:"‚ù§Ô∏è",emojis:["‚ù§Ô∏è","üß°","üíõ","üíö","üíô","üíú","ü§é","üñ§","ü§ç","üíî","‚ù£Ô∏è","üíï","üíû","üíì","üíó","üíñ","üíò","üíù","üíü","‚ô•Ô∏è","üíØ","üí¢","üí•","üí´","üí¶","üí®","üï≥Ô∏è","üí£","üí¨","üëÅÔ∏è‚Äçüó®Ô∏è","üó®Ô∏è"]},{name:"objects",icon:"üéâ",emojis:["üéâ","üéä","üéà","üéÅ","üéÄ","üéÇ","üç∞","üßÅ","üç≠","üç¨","üç´","üç©","üç™","üçï","üçî","üçü","üå≠","ü•™","üåÆ","üåØ","ü•ô","ü•ö","üç≥","ü•ò","üç≤","ü•ó","üçø","üßà","üßÄ","ü•®","ü•Ø"]}]}},computed:{currentEmojis(){const s=this.categories.find(e=>e.name===this.activeCategory);return s?s.emojis:[]}},methods:{selectEmoji(s){this.$emit("emoji-selected",s)}}},bl={class:"emoji-categories"},wl=["onClick"],Cl={class:"emoji-grid"},_l=["onClick"];function El(s,e,r,n,C,_){return r.isVisible?(a(),d("div",{key:0,class:"emoji-picker",onMouseenter:e[1]||(e[1]=c=>s.$emit("mouse-enter")),onMouseleave:e[2]||(e[2]=c=>s.$emit("mouse-leave"))},[t("button",{class:"close-btn mobile-only",onClick:e[0]||(e[0]=c=>s.$emit("close"))},e[3]||(e[3]=[t("i",{class:"fas fa-times"},null,-1)])),t("div",bl,[(a(!0),d(me,null,Te(C.categories,c=>(a(),d("button",{key:c.name,onClick:v=>C.activeCategory=c.name,class:L([{active:C.activeCategory===c.name},"category-btn"]),type:"button"},y(c.icon),11,wl))),128))]),t("div",Cl,[(a(!0),d(me,null,Te(_.currentEmojis,c=>(a(),d("button",{key:c,onClick:v=>_.selectEmoji(c),class:"emoji-btn",type:"button"},y(c),9,_l))),128))])],32)):p("",!0)}const Mt=$e(hl,[["render",El],["__scopeId","data-v-209132f3"]]),Ml=async s=>{const e=await Rn();return await s(e)},Ll=async s=>{const{data:e}=await Ml(r=>r.get("/search_emotes/".concat(s)));return e.emotes||[]},Il={name:"ImagePicker",props:{isVisible:{type:Boolean,required:!0},currentUser:{type:Object,default:null}},emits:["image-selected","mouse-enter","mouse-leave","close","login-required"],setup(s,{emit:e}){const r=m(""),n=m([]),C=m(null),_=m(!1),v=Tn(async u=>{if(!s.currentUser){console.warn("–ü–æ–ø—ã—Ç–∫–∞ –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏");return}if(!u.trim()){n.value=[],_.value=!1;return}_.value=!0;try{n.value=await Ll(u)}catch(b){console.error("Error searching images:",b),n.value=[]}finally{_.value=!1}},300),E=()=>{if(!s.currentUser){e("login-required");return}r.value.trim()&&(_.value=!0),v(r.value)},M=u=>{if(!s.currentUser){e("login-required");return}e("image-selected",u),e("close")},o=()=>{setTimeout(()=>{s.isVisible&&e("mouse-leave")},100)};return De(()=>s.isVisible,u=>{u&&(r.value="",n.value=[],_.value=!1)}),{searchQuery:r,images:n,searchInput:C,isLoading:_,handleSearch:E,selectImage:M,handleInputBlur:o}}},Rl={key:0,class:"auth-required"},Tl={class:"auth-message"},Pl={key:1},Sl={class:"image-picker-header"},Al={class:"image-content"},xl={key:0,class:"loading-spinner"},jl={key:1,class:"image-grid"},Ul=["onClick"],Nl=["src","alt"],Bl={key:2,class:"no-images"},Hl={key:3,class:"no-search"};function Dl(s,e,r,n,C,_){return r.isVisible?(a(),d("div",{key:0,class:"image-picker",onMouseenter:e[7]||(e[7]=c=>s.$emit("mouse-enter")),onMouseleave:e[8]||(e[8]=c=>s.$emit("mouse-leave")),onClick:e[9]||(e[9]=Ge(()=>{},["stop"]))},[t("button",{class:"close-btn mobile-only",onClick:e[0]||(e[0]=c=>s.$emit("close"))},e[10]||(e[10]=[t("i",{class:"fas fa-times"},null,-1)])),r.currentUser?(a(),d("div",Pl,[t("div",Sl,[ee(t("input",{ref:"searchInput",type:"text","onUpdate:modelValue":e[2]||(e[2]=c=>n.searchQuery=c),placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–º–∞–π–ª–∞ 7tv",class:"image-search-input",onInput:e[3]||(e[3]=(...c)=>n.handleSearch&&n.handleSearch(...c)),onClick:e[4]||(e[4]=Ge(()=>{},["stop"])),onFocus:e[5]||(e[5]=c=>s.$emit("mouse-enter")),onBlur:e[6]||(e[6]=(...c)=>n.handleInputBlur&&n.handleInputBlur(...c))},null,544),[[vt,n.searchQuery]])]),t("div",Al,[n.isLoading?(a(),d("div",xl,e[14]||(e[14]=[t("div",{class:"spinner"},null,-1),t("p",null,"–ü–æ–∏—Å–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...",-1)]))):n.images.length>0?(a(),d("div",jl,[(a(!0),d(me,null,Te(n.images,(c,v)=>(a(),d("div",{key:v,class:"image-item",onClick:E=>n.selectImage(c)},[t("img",{src:c,alt:"Image "+(v+1)},null,8,Nl)],8,Ul))),128))])):n.searchQuery.trim()?(a(),d("div",Bl,e[15]||(e[15]=[t("p",null,"–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤",-1)]))):(a(),d("div",Hl,e[16]||(e[16]=[t("p",null,"–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞",-1)])))])])):(a(),d("div",Rl,[t("div",Tl,[e[11]||(e[11]=t("i",{class:"fas fa-lock"},null,-1)),e[12]||(e[12]=t("h3",null,"–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è",-1)),e[13]||(e[13]=t("p",null,"–î–ª—è –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç",-1)),t("button",{class:"login-button",onClick:e[1]||(e[1]=c=>s.$emit("login-required"))},"–í–æ–π—Ç–∏")])]))],32)):p("",!0)}const Lt=$e(Il,[["render",Dl],["__scopeId","data-v-f33eb3f6"]]),$l={name:"LinkModal",props:{isVisible:{type:Boolean,default:!1},selectedText:{type:String,default:""}},emits:["close","submit"],setup(s,{emit:e}){const r=m(""),n=m(""),C=m(null),_=m(null),c=H(()=>/^https?:\/\/.+/.test(r.value.trim())&&n.value.trim()),v=()=>{e("close"),M()},E=()=>{c.value&&(e("submit",{url:r.value.trim(),title:n.value.trim()}),v())},M=()=>{r.value="",n.value=""},o=u=>{var b;u.key==="Enter"?(u.preventDefault(),c.value?E():u.target===C.value&&r.value.trim()&&((b=_.value)==null||b.focus())):u.key==="Escape"&&v()};return De(()=>s.isVisible,u=>{u&&(s.selectedText.trim()&&(n.value=s.selectedText.trim()),Pe(()=>{var b;(b=C.value)==null||b.focus()}))}),{linkUrl:r,linkTitle:n,urlInput:C,titleInput:_,isValidLink:c,closeModal:v,submitLink:E,handleKeydown:o}}},Ol={class:"link-modal-header"},Vl={class:"link-modal-content"},Fl={class:"form-group"},ql={class:"form-group"},Kl={class:"link-modal-footer"},zl=["disabled"];function Wl(s,e,r,n,C,_){return r.isVisible?(a(),d("div",{key:0,class:"link-modal-overlay",onClick:e[8]||(e[8]=(...c)=>n.closeModal&&n.closeModal(...c))},[t("div",{class:"link-modal",onClick:e[7]||(e[7]=Ge(()=>{},["stop"]))},[t("div",Ol,[e[10]||(e[10]=t("h3",null,"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É",-1)),t("button",{class:"close-button",onClick:e[0]||(e[0]=(...c)=>n.closeModal&&n.closeModal(...c))},e[9]||(e[9]=[t("i",{class:"fas fa-times"},null,-1)]))]),t("div",Vl,[t("div",Fl,[e[11]||(e[11]=t("label",{for:"link-url"},"URL —Å—Å—ã–ª–∫–∏:",-1)),ee(t("input",{id:"link-url",ref:"urlInput","onUpdate:modelValue":e[1]||(e[1]=c=>n.linkUrl=c),type:"url",placeholder:"https://example.com",class:"link-input",onKeydown:e[2]||(e[2]=(...c)=>n.handleKeydown&&n.handleKeydown(...c))},null,544),[[vt,n.linkUrl]])]),t("div",ql,[e[12]||(e[12]=t("label",{for:"link-title"},"–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏:",-1)),ee(t("input",{id:"link-title",ref:"titleInput","onUpdate:modelValue":e[3]||(e[3]=c=>n.linkTitle=c),type:"text",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è",class:"link-input",onKeydown:e[4]||(e[4]=(...c)=>n.handleKeydown&&n.handleKeydown(...c))},null,544),[[vt,n.linkTitle]])])]),t("div",Kl,[t("button",{class:"cancel-button",onClick:e[5]||(e[5]=(...c)=>n.closeModal&&n.closeModal(...c))},"–û—Ç–º–µ–Ω–∞"),t("button",{class:"submit-button",disabled:!n.isValidLink,onClick:e[6]||(e[6]=(...c)=>n.submitLink&&n.submitLink(...c))},"–î–æ–±–∞–≤–∏—Ç—å",8,zl)])])])):p("",!0)}const It=$e($l,[["render",Wl],["__scopeId","data-v-a794d83f"]]);function Gl(){const s=m(!1),e=m(!1),r=m(!1),n=()=>{e.value=!0},C=()=>{e.value=!1,setTimeout(()=>{!e.value&&!r.value&&(s.value=!1)},300)},_=()=>{r.value=!0,s.value=!0},c=()=>{r.value=!1,setTimeout(()=>{!e.value&&!r.value&&(s.value=!1)},300)},v=()=>{s.value=!1};return{showEmojiPicker:s,isEmojiHovered:e,isButtonHovered:r,handleEmojiMouseEnter:n,handleEmojiMouseLeave:C,handleButtonMouseEnter:_,handleButtonMouseLeave:c,closeEmojiPicker:v,insertEmoji:(o,u,b,w)=>{const U=u.value;if(U){const P=U.selectionStart,S=U.selectionEnd,I=b.value.substring(0,P),h=b.value.substring(S),R=I+o+h;w(R),Pe(()=>{U.focus(),U.setSelectionRange(P+o.length,P+o.length),U.style.height&&(U.style.height="auto",U.style.height="".concat(Math.min(U.scrollHeight,200),"px"))})}else w(b.value+o)},handleGlobalClick:o=>{!o.target.closest(".emoji-picker")&&!o.target.closest(".emoji-button-inline")&&v()}}}function Yl(){const s=m(!1),e=m(!1),r=m(!1),n=()=>{e.value=!0},C=()=>{e.value=!1,setTimeout(()=>{!e.value&&!r.value&&(s.value=!1)},300)},_=()=>{r.value=!0,s.value=!0},c=()=>{r.value=!1,setTimeout(()=>{!e.value&&!r.value&&(s.value=!1)},300)},v=()=>{s.value=!1};return{showImagePicker:s,isImageHovered:e,isButtonHovered:r,handleImageMouseEnter:n,handleImageMouseLeave:C,handleImageButtonMouseEnter:_,handleButtonMouseLeave:c,closeImagePicker:v,insertImage:(o,u,b,w)=>{const U=u.value;if(U){const P=U.selectionStart,S=U.selectionEnd,I="[img]".concat(o,"[/img]"),h=b.value.slice(0,P)+I+b.value.slice(S);w(h),Pe(()=>{U.focus(),U.setSelectionRange(P+I.length,P+I.length),U.style.height&&(U.style.height="auto",U.style.height="".concat(Math.min(U.scrollHeight,200),"px"))})}else{const P="[img]".concat(o,"[/img]");w(b.value+P)}},handleGlobalClick:o=>{!o.target.closest(".image-picker")&&!o.target.closest(".emoji-button-inline")&&v()}}}function Xl(){const s=m(!1),e=m("");return{showLinkModal:s,selectedTextForLink:e,insertLink:(c,v)=>{const E=c.value;if(E){const M=E.selectionStart,o=E.selectionEnd,u=v.value.slice(M,o);e.value=u.trim()||""}s.value=!0},insertLinkFromModal:(c,v,E,M)=>{const o=v.value;if(o){const u=o.selectionStart,b=o.selectionEnd,w="[link=".concat(c.url,"]").concat(c.title,"[/link]"),U=E.value.slice(0,u)+w+E.value.slice(b);M(U),Pe(()=>{o.focus(),o.setSelectionRange(u+w.length,u+w.length),o.style.height&&(o.style.height="auto",o.style.height="".concat(Math.min(o.scrollHeight,200),"px"))})}},closeLinkModal:()=>{s.value=!1},insertSpoiler:(c,v,E)=>{const M=c.value;if(M){const o=M.selectionStart,u=M.selectionEnd,b=v.value.slice(o,u);let w;b.trim()?w="[spoiler]".concat(b,"[/spoiler]"):w="[spoiler][/spoiler]";const U=v.value.slice(0,o)+w+v.value.slice(u);E(U),Pe(()=>{if(M.focus(),b.trim())M.setSelectionRange(o+w.length,o+w.length);else{const P=o+9;M.setSelectionRange(P,P)}M.style.height&&(M.style.height="auto",M.style.height="".concat(Math.min(M.scrollHeight,200),"px"))})}}}}function Zl(){return{autoResize:r=>{const n=r==null?void 0:r.target;n&&(n.style.height="auto",n.style.height="".concat(Math.min(n.scrollHeight,200),"px"))},autoResizeElement:r=>{r&&(r.style.height="auto",r.style.height="".concat(Math.min(r.scrollHeight,200),"px"))}}}function Rt(){const s=Gl(),e=Yl(),r=Xl(),{autoResize:n,autoResizeElement:C}=Zl(),_=()=>{s.isButtonHovered.value=!0,e.isButtonHovered.value=!0,s.showEmojiPicker.value=!0,e.showImagePicker.value=!1},c=()=>{s.isButtonHovered.value=!0,e.isButtonHovered.value=!0,e.showImagePicker.value=!0,s.showEmojiPicker.value=!1},v=()=>{s.isButtonHovered.value=!1,e.isButtonHovered.value=!1,setTimeout(()=>{!s.isEmojiHovered.value&&!e.isImageHovered.value&&!s.isButtonHovered.value&&!e.isButtonHovered.value&&(s.showEmojiPicker.value=!1,e.showImagePicker.value=!1)},300)},E=()=>{s.showEmojiPicker.value=!1,e.showImagePicker.value=!1},M=P=>{!P.target.closest(".emoji-picker")&&!P.target.closest(".image-picker")&&!P.target.closest(".emoji-button-inline")&&E()},o=(P,S,I,h)=>{s.insertEmoji(P,S,I,h)},u=(P,S,I,h)=>{e.insertImage(P,S,I,h)},b=(P,S,I)=>{r.insertLink(P,S,I)},w=(P,S,I,h)=>{r.insertLinkFromModal(P,S,I,h)},U=(P,S,I)=>{r.insertSpoiler(P,S,I)};return Qe(()=>{document.addEventListener("click",M)}),Et(()=>{document.removeEventListener("click",M)}),{showEmojiPicker:s.showEmojiPicker,handleEmojiMouseEnter:s.handleEmojiMouseEnter,handleEmojiMouseLeave:s.handleEmojiMouseLeave,closeEmojiPicker:s.closeEmojiPicker,showImagePicker:e.showImagePicker,handleImageMouseEnter:e.handleImageMouseEnter,handleImageMouseLeave:e.handleImageMouseLeave,closeImagePicker:e.closeImagePicker,showLinkModal:r.showLinkModal,selectedTextForLink:r.selectedTextForLink,closeLinkModal:r.closeLinkModal,handleButtonMouseEnter:_,handleImageButtonMouseEnter:c,handleButtonMouseLeave:v,closeAllPickers:E,insertEmojiUniversal:o,insertImageUniversal:u,insertLinkUniversal:b,insertLinkFromModalUniversal:w,insertSpoilerUniversal:U,autoResize:n,autoResizeElement:C}}const Ql=s=>s===1?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π":s>=2&&s<=4?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è":"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤",Jl=s=>{if(!s)return"?";const e=s.split(" ");return e.length===1?s.slice(0,2).toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()},es={name:"CommentItem",components:{EmojiPicker:Mt,ImagePicker:Lt,LinkModal:It},props:{comment:{type:Object,required:!0,default:()=>({username:"–ê–Ω–æ–Ω–∏–º",user_avatar:null,content:"",created_at:new Date().toISOString(),rating:0,replies:[]})},currentUser:{type:Object,required:!0,default:()=>({})},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate"],setup(s,{emit:e}){var be,Ne;const r=ft(),n=H(()=>{var k;return s.editingCommentId===((k=s.comment)==null?void 0:k.id)}),C=m(((be=s.comment)==null?void 0:be.content)||""),_=m(((Ne=s.comment)==null?void 0:Ne.user_rating)||0),c=m(null),v=m(null),{showEmojiPicker:E,showImagePicker:M,showLinkModal:o,selectedTextForLink:u,handleEmojiMouseEnter:b,handleEmojiMouseLeave:w,handleImageMouseEnter:U,handleImageMouseLeave:P,handleButtonMouseEnter:S,handleImageButtonMouseEnter:I,handleButtonMouseLeave:h,closeEmojiPicker:R,closeImagePicker:x,closeLinkModal:W,insertEmojiUniversal:q,insertImageUniversal:D,insertLinkUniversal:T,insertLinkFromModalUniversal:_e,insertSpoilerUniversal:he,autoResize:ye}=Rt(),{formatContentWithTruncation:je}=yn();Qe(async()=>{var k;if((k=s.comment)!=null&&k.user_avatar){const Z=await Pn();c.value="".concat(Z).concat(s.comment.user_avatar)}});const B=H(()=>{var k;return s.currentUser&&((k=s.comment)==null?void 0:k.user_id)===s.currentUser.id}),ne=H(()=>{var k;return s.currentUser&&((k=s.comment)==null?void 0:k.user_id)===s.currentUser.id||s.currentUser&&s.currentUser.is_admin===1}),G=H(()=>{var k,Z,Be;return((k=s.comment)==null?void 0:k.updated_at)&&((Z=s.comment)==null?void 0:Z.updated_at)!==((Be=s.comment)==null?void 0:Be.created_at)}),z=H(()=>{var k,Z;return(k=s.comment)!=null&&k.is_deleted?!1:(((Z=s.comment)==null?void 0:Z.rating)||0)<=-3}),se=H(()=>z.value),pe=m(!1),re=H(()=>{var k,Z;return(k=s.comment)!=null&&k.is_deleted?null:(((Z=s.comment)==null?void 0:Z.rating)||0)<=-3?"lowRating":null}),ge=()=>{var k,Z;e("start-edit",(k=s.comment)==null?void 0:k.id),C.value=((Z=s.comment)==null?void 0:Z.content)||"",Pe(()=>{v.value&&(v.value.focus(),ye({target:v.value}))})},Me=()=>{var k;e("cancel-edit"),C.value=((k=s.comment)==null?void 0:k.content)||""},ke=()=>{var k;C.value.trim()&&e("edit",(k=s.comment)==null?void 0:k.id,C.value.trim())},Se=()=>{var k;confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π?")&&e("delete",(k=s.comment)==null?void 0:k.id)},ie=k=>{var Z,Be;_.value===k?(_.value=0,e("rate",(Z=s.comment)==null?void 0:Z.id,k)):(_.value=k,e("rate",(Be=s.comment)==null?void 0:Be.id,k))},Le=k=>{k.key==="Enter"&&!k.shiftKey&&(k.preventDefault(),ke())},fe=H(()=>{var k;return je((k=s.comment)==null?void 0:k.content)}),xe=()=>{console.log("Avatar load error, falling back to initials"),c.value=null,Pe(()=>{const k=document.querySelector(".avatar-placeholder");k&&(k.style.display="flex")})},Ee=()=>{r.push("/login")},Ae=k=>{q(k,v,C,Z=>{C.value=Z})},Ye=k=>{D(k,v,C,Z=>{C.value=Z})},Fe=()=>{he(v,C,k=>{C.value=k})},Xe=()=>{T(v,C,k=>{C.value=k})},Ie=k=>{_e(k,v,C,Z=>{C.value=Z})},Ue=k=>{ye(k)};return De(C,()=>{n.value&&v.value&&Pe(()=>{Ue({target:v.value})})}),{isEditing:n,editContent:C,userRating:_,isCommentOwner:B,canDeleteComment:ne,isCommentEdited:G,formatDate:zn,formatRelativeTime:Kn,startEdit:ge,cancelEdit:Me,saveEdit:ke,confirmDelete:Se,rateComment:ie,avatarUrl:c,getInitials:Jl,handleEditKeydown:Le,isCommentHidden:se,showHiddenComment:pe,hiddenCommentReason:re,formattedContent:fe,autoResizeEdit:Ue,editTextarea:v,showEmojiPicker:E,showImagePicker:M,insertEmojiEdit:Ae,insertImageEdit:Ye,insertSpoilerEdit:Fe,insertLinkEdit:Xe,handleEmojiMouseEnter:b,handleEmojiMouseLeave:w,handleImageMouseEnter:U,handleImageMouseLeave:P,closeEmojiPicker:R,closeImagePicker:x,handleButtonMouseEnter:S,handleButtonMouseLeave:h,handleImageButtonMouseEnter:I,handleAvatarError:xe,openLogin:Ee,showLinkModal:o,selectedTextForLink:u,insertLinkFromModal:Ie,closeLinkModal:W}}},ts=["data-comment-id"],ns={class:"comment-header"},os={class:"user-info"},ls={class:"user-avatar"},ss=["src","alt"],is={class:"user-details"},as={class:"username"},rs={key:0,class:"user-rating"},us=["title"],ds=["title"],cs={class:"comment-content"},vs={key:0,class:"hidden-comment-warning"},ms={key:1},fs={key:0,class:"deleted-comment"},gs={key:1},ks={key:0,class:"edit-form"},ys={class:"edit-textarea-container"},ps={class:"edit-footer"},hs={class:"edit-actions"},bs=["disabled"],ws={class:"character-counter-container"},Cs={key:1,class:"comment-text-container"},_s=["innerHTML"],Es={class:"comment-footer"},Ms={class:"comment-actions"},Ls={class:"rating-buttons"},Is={class:"action-buttons"};function Rs(s,e,r,n,C,_){var o,u,b,w,U,P,S,I,h,R,x,W,q,D,T,_e,he,ye,je;const c=Re("router-link"),v=Re("EmojiPicker"),E=Re("ImagePicker"),M=Re("LinkModal");return a(),d("div",{class:"comment-item","data-comment-id":(o=r.comment)==null?void 0:o.id},[t("div",ns,[t("div",os,[ce(c,{to:{path:"/lists/".concat((u=r.comment)==null?void 0:u.user_id)},target:"_blank",rel:"noopener noreferrer",class:"user-avatar-link"},{default:sn(()=>{var B,ne;return[t("div",ls,[n.avatarUrl?(a(),d("img",{key:0,src:n.avatarUrl,alt:((B=r.comment)==null?void 0:B.username)||"–ê–Ω–æ–Ω–∏–º",onError:e[0]||(e[0]=(...G)=>n.handleAvatarError&&n.handleAvatarError(...G)),onerror:"this.onerror=null; this.style.display='none'; this.nextElementSibling.style.display='flex';"},null,40,ss)):(a(),d("div",{key:1,class:"avatar-placeholder",style:ot({display:n.avatarUrl?"none":"flex"})},y(n.getInitials(((ne=r.comment)==null?void 0:ne.username)||"–ê–Ω–æ–Ω–∏–º")),5))])]}),_:1},8,["to"]),t("div",is,[ce(c,{to:{path:"/lists/".concat((b=r.comment)==null?void 0:b.user_id)},target:"_blank",rel:"noopener noreferrer",class:"username-link"},{default:sn(()=>{var B;return[t("span",as,y(((B=r.comment)==null?void 0:B.username)||"–ê–Ω–æ–Ω–∏–º"),1)]}),_:1},8,["to"]),(w=r.comment)!=null&&w.user_movie_rating?(a(),d("span",rs,[e[18]||(e[18]=t("i",{class:"fas fa-star"},null,-1)),le(" "+y(r.comment.user_movie_rating),1)])):p("",!0),t("span",{class:"date",title:n.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((U=r.comment)==null?void 0:U.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(n.formatDate((P=r.comment)==null?void 0:P.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((S=r.comment)==null?void 0:S.created_at))},[le(y(n.formatRelativeTime((I=r.comment)==null?void 0:I.created_at))+" ",1),n.isCommentEdited?(a(),d("i",{key:0,class:"fas fa-pencil-alt edit-icon",title:n.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((h=r.comment)==null?void 0:h.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(n.formatDate((R=r.comment)==null?void 0:R.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((x=r.comment)==null?void 0:x.created_at))},null,8,ds)):p("",!0)],8,us)])])]),t("div",cs,[!((W=r.comment)!=null&&W.is_deleted)&&n.isCommentHidden&&!n.showHiddenComment?(a(),d("div",vs,[n.hiddenCommentReason==="lowRating"?(a(),d("p",{key:0,class:"warning-text",onClick:e[1]||(e[1]=B=>n.showHiddenComment=!0)},e[19]||(e[19]=[t("i",{class:"fas fa-eye-slash"},null,-1),le(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–∫—Ä—ã—Ç –∏–∑-–∑–∞ –Ω–∏–∑–∫–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å. ")]))):p("",!0)])):(a(),d("div",ms,[(q=r.comment)!=null&&q.is_deleted?(a(),d("div",fs,e[20]||(e[20]=[t("p",{class:"deleted-message"},[t("i",{class:"fas fa-trash"}),le(" –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —É–¥–∞–ª—ë–Ω ")],-1)]))):(a(),d("div",gs,[n.isEditing?(a(),d("div",ks,[t("div",ys,[ee(t("textarea",{ref:"editTextarea","onUpdate:modelValue":e[2]||(e[2]=B=>n.editContent=B),class:"edit-textarea",rows:"3",maxlength:"1500",onKeydown:e[3]||(e[3]=(...B)=>n.handleEditKeydown&&n.handleEditKeydown(...B)),onInput:e[4]||(e[4]=(...B)=>n.autoResizeEdit&&n.autoResizeEdit(...B))},null,544),[[vt,n.editContent]])]),t("div",ps,[t("div",hs,[t("button",{onClick:e[5]||(e[5]=(...B)=>n.cancelEdit&&n.cancelEdit(...B)),class:"cancel-button"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:e[6]||(e[6]=(...B)=>n.saveEdit&&n.saveEdit(...B)),class:"save-button",disabled:!n.editContent.trim()||n.editContent.length>1500}," –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ",8,bs)]),t("div",ws,[t("div",{class:L(["character-counter-inline",{"near-limit":n.editContent.length>1400,"at-limit":n.editContent.length>=1500}])},y(n.editContent.length)+"/1500 ",3),t("button",{type:"button",class:L(["emoji-button-inline",{active:n.showEmojiPicker}]),onMouseenter:e[7]||(e[7]=(...B)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...B)),onMouseleave:e[8]||(e[8]=(...B)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...B))}," üòä ",34),t("button",{type:"button",class:L(["emoji-button-inline",{active:n.showImagePicker}]),onMouseenter:e[9]||(e[9]=(...B)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...B)),onMouseleave:e[10]||(e[10]=(...B)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...B))},e[21]||(e[21]=[lt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-f1c85dfc><g id="logo" data-v-f1c85dfc><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-f1c85dfc></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-f1c85dfc></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-f1c85dfc></path></g></svg>',1)]),34),t("button",{type:"button",class:"emoji-button-inline spoiler-button",onClick:e[11]||(e[11]=(...B)=>n.insertSpoilerEdit&&n.insertSpoilerEdit(...B)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},e[22]||(e[22]=[t("i",{class:"fas fa-eye-slash"},null,-1)])),t("button",{type:"button",class:"emoji-button-inline link-button",onClick:e[12]||(e[12]=(...B)=>n.insertLinkEdit&&n.insertLinkEdit(...B)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},e[23]||(e[23]=[t("i",{class:"fas fa-link"},null,-1)])),ce(v,{"is-visible":n.showEmojiPicker,onEmojiSelected:n.insertEmojiEdit,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),ce(E,{"is-visible":n.showImagePicker,"current-user":r.currentUser,onImageSelected:n.insertImageEdit,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:n.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),ce(M,{"is-visible":n.showLinkModal,"selected-text":n.selectedTextForLink,onClose:n.closeLinkModal,onSubmit:n.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):(a(),d("div",Cs,[t("p",{class:"comment-text",innerHTML:n.formattedContent},null,8,_s)]))]))]))]),t("div",Es,[t("div",Ms,[t("div",Ls,[!n.isCommentOwner&&!((D=r.comment)!=null&&D.is_deleted)?(a(),d("button",{key:0,onClick:e[13]||(e[13]=B=>n.rateComment(1)),class:L(["rating-button",{"rated-up":n.userRating===1}])},e[24]||(e[24]=[t("i",{class:"fas fa-thumbs-up"},null,-1)]),2)):p("",!0),t("span",{class:L(["rating-count",{"rating-positive":n.userRating===1,"rating-negative":n.userRating===-1}])},y(((T=r.comment)==null?void 0:T.rating)||0),3),!n.isCommentOwner&&!((_e=r.comment)!=null&&_e.is_deleted)?(a(),d("button",{key:1,onClick:e[14]||(e[14]=B=>n.rateComment(-1)),class:L(["rating-button",{"rated-down":n.userRating===-1}])},e[25]||(e[25]=[t("i",{class:"fas fa-thumbs-down"},null,-1)]),2)):p("",!0)]),t("div",Is,[!r.currentUser||r.currentUser.allow_comments===1?(a(),d("button",{key:0,onClick:e[15]||(e[15]=B=>s.$emit("reply",r.comment)),class:"action-button reply-button"},e[26]||(e[26]=[t("i",{class:"fas fa-reply"},null,-1)]))):p("",!0),n.isCommentOwner&&!((he=r.comment)!=null&&he.is_deleted)&&!n.isEditing&&((ye=r.currentUser)==null?void 0:ye.allow_comments)===1?(a(),d("button",{key:1,onClick:e[16]||(e[16]=(...B)=>n.startEdit&&n.startEdit(...B)),class:"action-button edit-button"},e[27]||(e[27]=[t("i",{class:"fas fa-edit"},null,-1)]))):p("",!0),n.canDeleteComment&&!((je=r.comment)!=null&&je.is_deleted)?(a(),d("button",{key:2,onClick:e[17]||(e[17]=(...B)=>n.confirmDelete&&n.confirmDelete(...B)),class:"action-button delete-button"},e[28]||(e[28]=[t("i",{class:"fas fa-trash"},null,-1)]))):p("",!0)])])])],8,ts)}const Ts=$e(es,[["render",Rs],["__scopeId","data-v-f1c85dfc"]]),Ps={name:"CommentThread",components:{CommentItem:Ts,EmojiPicker:Mt,ImagePicker:Lt,LinkModal:It},props:{comment:{type:Object,required:!0},currentUser:{type:Object,required:!0},replyTo:{type:Object,default:null},replyContent:{type:String,default:""},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate","submit-reply","cancel-reply","update-reply-content","reply-keydown"],setup(s,{emit:e}){const r=m(null),n=m(!0),{showEmojiPicker:C,showImagePicker:_,showLinkModal:c,selectedTextForLink:v,handleEmojiMouseEnter:E,handleEmojiMouseLeave:M,handleImageMouseEnter:o,handleImageMouseLeave:u,handleButtonMouseEnter:b,handleImageButtonMouseEnter:w,handleButtonMouseLeave:U,closeEmojiPicker:P,closeImagePicker:S,closeLinkModal:I,insertEmojiUniversal:h,insertImageUniversal:R,insertLinkUniversal:x,insertLinkFromModalUniversal:W,insertSpoilerUniversal:q}=Rt(),D=G=>{e("update-reply-content",G.target.value);const z=G.target;z&&(z.style.height="auto",z.style.height="".concat(Math.min(z.scrollHeight,200),"px"))},T={get value(){return s.replyContent},set value(G){e("update-reply-content",G)}};return{replyTextarea:r,showEmojiPicker:C,showImagePicker:_,isCollapsed:n,insertEmoji:G=>{h(G,r,T,z=>{e("update-reply-content",z)})},insertImage:G=>{R(G,r,T,z=>{e("update-reply-content",z)})},insertSpoiler:()=>{q(r,T,G=>{e("update-reply-content",G)})},handleEmojiMouseEnter:E,handleEmojiMouseLeave:M,handleImageMouseEnter:o,handleImageMouseLeave:u,handleButtonMouseEnter:b,handleButtonMouseLeave:U,closeEmojiPicker:P,closeImagePicker:S,handleImageButtonMouseEnter:w,handleReplyInput:D,toggleCollapsed:()=>{n.value=!n.value},showLinkModal:c,selectedTextForLink:v,insertLink:()=>{x(r,T,G=>{e("update-reply-content",G)})},closeLinkModal:I,insertLinkFromModal:G=>{W(G,r,T,z=>{e("update-reply-content",z)})}}},computed:{canReply(){return this.currentUser?this.currentUser.allow_comments===1:!0},getReplyPlaceholder(){return this.currentUser?this.currentUser.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç..."},formattedContent(){const{formatContent:s}=yn();return s(this.comment.content)}}},Ss={class:"comment-thread"},As={key:0,class:"reply-form"},xs={class:"textarea-container"},js=["value","placeholder","disabled"],Us={class:"reply-footer"},Ns={class:"reply-actions"},Bs=["disabled"],Hs={class:"character-counter-container"},Ds=["disabled"],$s={key:1,class:"replies-container"},Os=["title"],Vs={class:"replies-count"},Fs=["title"],qs={key:0,class:"replies-content"};function Ks(s,e,r,n,C,_){const c=Re("CommentItem"),v=Re("EmojiPicker"),E=Re("ImagePicker"),M=Re("LinkModal"),o=Re("CommentThread",!0);return a(),d("div",Ss,[ce(c,{comment:r.comment,"current-user":r.currentUser,"editing-comment-id":r.editingCommentId,onReply:e[0]||(e[0]=u=>s.$emit("reply",u)),onStartEdit:e[1]||(e[1]=u=>s.$emit("start-edit",u)),onCancelEdit:e[2]||(e[2]=u=>s.$emit("cancel-edit")),onEdit:e[3]||(e[3]=(u,b)=>s.$emit("edit",u,b)),onDelete:e[4]||(e[4]=u=>s.$emit("delete",u)),onRate:e[5]||(e[5]=(u,b)=>s.$emit("rate",u,b))},null,8,["comment","current-user","editing-comment-id"]),r.replyTo&&r.replyTo.id===r.comment.id?(a(),d("div",As,[t("div",xs,[t("textarea",{ref:"replyTextarea",class:"comment-textarea",value:r.replyContent,placeholder:_.getReplyPlaceholder,disabled:r.currentUser&&r.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:e[6]||(e[6]=(...u)=>n.handleReplyInput&&n.handleReplyInput(...u)),onKeydown:e[7]||(e[7]=u=>s.$emit("reply-keydown",u))},null,40,js)]),t("div",Us,[t("div",Ns,[t("button",{class:"cancel-reply",onClick:e[8]||(e[8]=u=>s.$emit("cancel-reply"))},"–û—Ç–º–µ–Ω–∞"),t("button",{class:"submit-button",disabled:!r.replyContent.trim()||r.replyContent.length>1500||r.currentUser&&r.currentUser.allow_comments!==1,onClick:e[9]||(e[9]=u=>s.$emit("submit-reply"))}," –û—Ç–≤–µ—Ç–∏—Ç—å ",8,Bs)]),t("div",Hs,[t("div",{class:L(["character-counter-inline",{"near-limit":r.replyContent.length>1400,"at-limit":r.replyContent.length>=1500}])},y(r.replyContent.length)+"/1500 ",3),t("button",{type:"button",class:L(["emoji-button-inline",{active:n.showEmojiPicker}]),onMouseenter:e[10]||(e[10]=(...u)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...u)),onMouseleave:e[11]||(e[11]=(...u)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...u))}," üòä ",34),t("button",{type:"button",class:L(["emoji-button-inline",{active:n.showImagePicker}]),onMouseenter:e[12]||(e[12]=(...u)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...u)),onMouseleave:e[13]||(e[13]=(...u)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...u))},e[29]||(e[29]=[lt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-6c0fc347><g id="logo" data-v-6c0fc347><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-6c0fc347></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-6c0fc347></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-6c0fc347></path></g></svg>',1)]),34),t("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:r.currentUser&&r.currentUser.allow_comments!==1,onClick:e[14]||(e[14]=(...u)=>n.insertSpoiler&&n.insertSpoiler(...u)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},e[30]||(e[30]=[t("i",{class:"fas fa-eye-slash"},null,-1)]),8,Ds),t("button",{type:"button",class:"emoji-button-inline link-button",onClick:e[15]||(e[15]=(...u)=>n.insertLink&&n.insertLink(...u)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},e[31]||(e[31]=[t("i",{class:"fas fa-link"},null,-1)])),ce(v,{"is-visible":n.showEmojiPicker,onEmojiSelected:n.insertEmoji,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),ce(E,{"is-visible":n.showImagePicker,"current-user":r.currentUser,onImageSelected:n.insertImage,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:e[16]||(e[16]=()=>s.$router.push("/login"))},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose"]),ce(M,{"is-visible":n.showLinkModal,"selected-text":n.selectedTextForLink,onClose:n.closeLinkModal,onSubmit:n.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):p("",!0),r.comment.replies&&r.comment.replies.length>0?(a(),d("div",$s,[t("button",{class:"collapse-toggle",title:n.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:e[17]||(e[17]=(...u)=>n.toggleCollapsed&&n.toggleCollapsed(...u))},[t("span",{class:L(["collapse-icon",{expanded:!n.isCollapsed}])},e[32]||(e[32]=[t("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},[t("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1)]),2),t("span",Vs,y(r.comment.replies.length)+" "+y(r.comment.replies.length===1?"–æ—Ç–≤–µ—Ç":"–æ—Ç–≤–µ—Ç–æ–≤"),1)],8,Os),t("div",{class:"vertical-line-clickable",title:n.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:e[18]||(e[18]=(...u)=>n.toggleCollapsed&&n.toggleCollapsed(...u))},[t("div",{class:L(["vertical-line-visual",{collapsed:n.isCollapsed}])},null,2)],8,Fs),n.isCollapsed?p("",!0):(a(),d("div",qs,[(a(!0),d(me,null,Te(r.comment.replies,u=>(a(),Oe(o,{key:u.id,comment:u,"current-user":r.currentUser,"reply-to":r.replyTo,"reply-content":r.replyContent,"editing-comment-id":r.editingCommentId,onReply:e[19]||(e[19]=b=>s.$emit("reply",b)),onStartEdit:e[20]||(e[20]=b=>s.$emit("start-edit",b)),onCancelEdit:e[21]||(e[21]=b=>s.$emit("cancel-edit")),onEdit:e[22]||(e[22]=(b,w)=>s.$emit("edit",b,w)),onDelete:e[23]||(e[23]=b=>s.$emit("delete",b)),onRate:e[24]||(e[24]=(b,w)=>s.$emit("rate",b,w)),onSubmitReply:e[25]||(e[25]=b=>s.$emit("submit-reply")),onCancelReply:e[26]||(e[26]=b=>s.$emit("cancel-reply")),onUpdateReplyContent:e[27]||(e[27]=b=>s.$emit("update-reply-content",b)),onReplyKeydown:e[28]||(e[28]=b=>s.$emit("reply-keydown",b))},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id"]))),128))]))])):p("",!0)])}const zs=$e(Ps,[["render",Ks],["__scopeId","data-v-6c0fc347"]]),Ws={name:"Comments",components:{CommentThread:zs,Notification:bt,EmojiPicker:Mt,ImagePicker:Lt,LinkModal:It},props:{movieId:{type:[String,Number],required:!0}},setup(s){const e=_t(),r=ft(),n=mt(),C=m([]),_=m(""),c=m(null),v=m(""),E=m(null),M=m(e.user),o=m(null),u=m(null),b=m(n.isAutoShowComments),w=m(!1),U=m(3),P=m(3),{showEmojiPicker:S,showImagePicker:I,showLinkModal:h,selectedTextForLink:R,handleEmojiMouseEnter:x,handleEmojiMouseLeave:W,handleImageMouseEnter:q,handleImageMouseLeave:D,handleButtonMouseEnter:T,handleImageButtonMouseEnter:_e,handleButtonMouseLeave:he,closeEmojiPicker:ye,closeImagePicker:je,closeLinkModal:B,insertEmojiUniversal:ne,insertImageUniversal:G,insertLinkUniversal:z,insertLinkFromModalUniversal:se,insertSpoilerUniversal:pe,autoResize:re}=Rt(),ge=H(()=>{const A=($=null)=>C.value.filter(V=>V.parent_id===$).sort((V,J)=>V.id-J.id).map(V=>({...V,replies:A(V.id)})).filter(V=>!V.is_deleted||V.replies&&V.replies.length>0);return A()}),Me=H(()=>{const A=$=>$.reduce((V,J)=>V+1+A(J.replies||[]),0);return A(ge.value)}),ke=H(()=>ge.value.slice(0,P.value)),Se=H(()=>ge.value.length>P.value),ie=H(()=>ge.value.length-P.value),Le=()=>{P.value+=U.value},fe=async()=>{try{const A=await Sn(s.movieId);C.value=A}catch(A){console.error("Failed to load comments:",A),o.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.")}},xe=async()=>{if(w.value)return;if(!e.token){o.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:be});return}if(M.value&&M.value.allow_comments!==1){o.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!_.value.replace(/\[spoiler\]\s*\[\/spoiler\]/g,"").replace(/\[img\]\s*\[\/img\]/g,"").replace(/\[link=[^\]]+\]\s*\[\/link\]/g,"").trim()){o.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º");return}if(_.value.length>1500){o.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await an(s.movieId,_.value.trim()),_.value="",await fe(),b.value=!0,Pe(()=>{u.value&&(u.value.focus(),u.value.style.height="auto"),setTimeout(()=>{const $=document.querySelectorAll(".comment-item[data-comment-id]");if($.length>0){const V=Array.from($).map(J=>parseInt(J.getAttribute("data-comment-id"))).filter(J=>!isNaN(J));if(V.length>0){const J=Math.max(...V),ue=document.querySelector('[data-comment-id="'.concat(J,'"]'));ue&&ue.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}},300)})}catch($){console.error("Failed to create comment:",$),o.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},Ee=A=>{if(!e.token){o.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:be});return}E.value=null,c.value=A,v.value="",Pe(()=>{const $=document.querySelector(".reply-form");$&&$.scrollIntoView({behavior:"smooth",block:"center"})})},Ae=async()=>{if(!e.token){o.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:be});return}if(M.value&&M.value.allow_comments!==1){o.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!(!v.value.trim()||!c.value)){if(v.value.length>1500){o.value.showNotification("–û—Ç–≤–µ—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await an(s.movieId,v.value.trim(),c.value.id);const A=c.value.id;await fe(),v.value="",c.value=null,Pe(()=>{setTimeout(()=>{const $=document.querySelector('[data-comment-id="'.concat(A,'"]'));if($){const V=$.querySelector(".replies-content");if(V){const J=V.querySelectorAll(".comment-item[data-comment-id]");if(J.length>0){const ue=Array.from(J).map(Q=>parseInt(Q.getAttribute("data-comment-id"))).filter(Q=>!isNaN(Q));if(ue.length>0){const Q=Math.max(...ue),de=document.querySelector('[data-comment-id="'.concat(Q,'"]'));de&&de.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}}}},300)})}catch(A){console.error("Error submitting reply:",A),o.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}}},Ye=async(A,$)=>{if(!e.token){o.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:be});return}if(M.value&&M.value.allow_comments!==1){o.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if($.length>1500){o.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await jn(A,$.trim()),await fe(),E.value=null}catch(V){console.error("Failed to update comment:",V),o.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},Fe=async A=>{if(!e.token){o.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:be});return}try{await xn(A),await fe()}catch($){console.error("Failed to delete comment:",$),o.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},Xe=async(A,$)=>{if(!e.token){o.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:be});return}try{await An(A,$),await fe()}catch(V){console.error("Failed to rate comment:",V),o.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ü–µ–Ω–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},Ie=A=>{w.value||S.value||A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),xe())},Ue=A=>{A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),Ae())},be=()=>{r.push("/login")},Ne=A=>{w.value=!0,ne(A,u,_,$=>{_.value=$}),setTimeout(()=>{w.value=!1},100)},k=A=>{G(A,u,_,$=>{_.value=$})},Z=()=>{pe(u,_,A=>{_.value=A})},Be=()=>{z(u,_,A=>{_.value=A})},Je=A=>{se(A,u,_,$=>{_.value=$})},g=H(()=>M.value?M.value.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."),i=H(()=>M.value?M.value.allow_comments===1:!0),K=A=>{c.value=null,v.value="",E.value=A},te=()=>{E.value=null};return Qe(()=>{fe()}),{comments:C,groupedComments:ge,displayedComments:ke,hasMoreComments:Se,remainingCommentsCount:ie,showMoreComments:Le,newComment:_,replyTo:c,replyContent:v,editingCommentId:E,currentUser:M,notificationRef:o,commentTextarea:u,showComments:b,submitComment:xe,handleReply:Ee,submitReply:Ae,handleEdit:Ye,handleDelete:Fe,handleRate:Xe,handleCommentKeydown:Ie,handleReplyKeydown:Ue,autoResize:re,totalCommentsCount:Me,getCommentWordForm:Ql,showEmojiPicker:S,showImagePicker:I,showLinkModal:h,selectedTextForLink:R,insertEmoji:Ne,insertImage:k,handleEmojiMouseEnter:x,handleEmojiMouseLeave:W,handleImageMouseEnter:q,handleImageMouseLeave:D,closeEmojiPicker:ye,closeImagePicker:je,handleButtonMouseLeave:he,handleButtonMouseEnter:T,handleImageButtonMouseEnter:_e,getCommentPlaceholder:g,canComment:i,handleStartEdit:K,handleCancelEdit:te,insertSpoiler:Z,insertLink:Be,insertLinkFromModal:Je,closeLinkModal:B}}},Gs={class:"comments-section"},Ys={class:"spoiler-content"},Xs={key:1,class:"comments-container"},Zs={class:"comments-header"},Qs={class:"textarea-container"},Js=["placeholder","disabled"],ei={class:"comment-footer"},ti={class:"comment-actions"},ni=["disabled"],oi={class:"character-counter-container"},li=["disabled"],si=["disabled"],ii=["disabled"],ai={class:"comments-list"},ri={key:0,class:"show-more-comments"};function ui(s,e,r,n,C,_){const c=Re("EmojiPicker"),v=Re("ImagePicker"),E=Re("LinkModal"),M=Re("CommentThread"),o=Re("Notification");return a(),d("div",Gs,[n.showComments?(a(),d("div",Xs,[t("div",Zs,[t("button",{class:"hide-comments-btn",onClick:e[1]||(e[1]=u=>n.showComments=!1)},e[18]||(e[18]=[t("i",{class:"fas fa-eye-slash"},null,-1),le(" –°–∫—Ä—ã—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ")]))]),t("form",{class:"comment-form",onSubmit:e[11]||(e[11]=Ge((...u)=>n.submitComment&&n.submitComment(...u),["prevent"]))},[t("div",Qs,[ee(t("textarea",{ref:"commentTextarea","onUpdate:modelValue":e[2]||(e[2]=u=>n.newComment=u),class:"comment-textarea",placeholder:n.getCommentPlaceholder,disabled:n.currentUser&&n.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:e[3]||(e[3]=(...u)=>n.autoResize&&n.autoResize(...u)),onKeydown:e[4]||(e[4]=(...u)=>n.handleCommentKeydown&&n.handleCommentKeydown(...u))},null,40,Js),[[vt,n.newComment]])]),t("div",ei,[t("div",ti,[t("button",{class:"submit-button",type:"submit",disabled:!n.newComment.trim()||n.newComment.length>1500||n.currentUser&&n.currentUser.allow_comments!==1}," –û—Ç–ø—Ä–∞–≤–∏—Ç—å ",8,ni)]),t("div",oi,[t("div",{class:L(["character-counter-inline",{"near-limit":n.newComment.length>1400,"at-limit":n.newComment.length>=1500}])},y(n.newComment.length)+"/1500 ",3),t("button",{type:"button",class:L(["emoji-button-inline",{active:n.showEmojiPicker}]),disabled:n.currentUser&&n.currentUser.allow_comments!==1,onMouseenter:e[5]||(e[5]=(...u)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...u)),onMouseleave:e[6]||(e[6]=(...u)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...u))}," üòä ",42,li),t("button",{type:"button",class:L(["emoji-button-inline",{active:n.showImagePicker}]),disabled:n.currentUser&&n.currentUser.allow_comments!==1,onMouseenter:e[7]||(e[7]=(...u)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...u)),onMouseleave:e[8]||(e[8]=(...u)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...u))},e[19]||(e[19]=[lt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-79080d6f><g id="logo" data-v-79080d6f><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-79080d6f></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-79080d6f></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-79080d6f></path></g></svg>',1)]),42,si),t("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:n.currentUser&&n.currentUser.allow_comments!==1,onClick:e[9]||(e[9]=(...u)=>n.insertSpoiler&&n.insertSpoiler(...u)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},e[20]||(e[20]=[t("i",{class:"fas fa-eye-slash"},null,-1)]),8,ii),t("button",{type:"button",class:"emoji-button-inline link-button",onClick:e[10]||(e[10]=(...u)=>n.insertLink&&n.insertLink(...u)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},e[21]||(e[21]=[t("i",{class:"fas fa-link"},null,-1)])),ce(c,{"is-visible":n.showEmojiPicker&&n.canComment,onEmojiSelected:n.insertEmoji,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),ce(v,{"is-visible":n.showImagePicker&&n.canComment,"current-user":n.currentUser,onImageSelected:n.insertImage,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:s.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),ce(E,{"is-visible":n.showLinkModal,"selected-text":n.selectedTextForLink,onClose:n.closeLinkModal,onSubmit:n.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])],32),t("div",ai,[(a(!0),d(me,null,Te(n.displayedComments,u=>(a(),Oe(M,{key:u.id,comment:u,"current-user":n.currentUser,"reply-to":n.replyTo,"reply-content":n.replyContent,"editing-comment-id":n.editingCommentId,"is-first-comment":!1,onReply:n.handleReply,onStartEdit:n.handleStartEdit,onCancelEdit:n.handleCancelEdit,onEdit:n.handleEdit,onDelete:n.handleDelete,onRate:n.handleRate,onSubmitReply:n.submitReply,onCancelReply:e[12]||(e[12]=b=>n.replyTo=null),onUpdateReplyContent:e[13]||(e[13]=b=>n.replyContent=b),onReplyKeydown:n.handleReplyKeydown},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id","onReply","onStartEdit","onCancelEdit","onEdit","onDelete","onRate","onSubmitReply","onReplyKeydown"]))),128)),n.hasMoreComments?(a(),d("div",ri,[t("button",{class:"show-more-btn",onClick:e[14]||(e[14]=(...u)=>n.showMoreComments&&n.showMoreComments(...u))}," –ü–æ–∫–∞–∑–∞—Ç—å –µ—â–µ "+y(n.remainingCommentsCount)+" "+y(n.getCommentWordForm(n.remainingCommentsCount)),1)])):p("",!0)])])):(a(),d("div",{key:0,class:"spoiler-warning",onClick:e[0]||(e[0]=u=>n.showComments=!0)},[t("div",Ys,[e[15]||(e[15]=t("i",{class:"fas fa-eye-slash"},null,-1)),e[16]||(e[16]=t("h3",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–∫—Ä—ã—Ç—ã",-1)),e[17]||(e[17]=t("p",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä—ã. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å.",-1)),t("div",{class:L(["comments-count",{"no-comments":n.totalCommentsCount===0}])},[n.totalCommentsCount===0?(a(),d(me,{key:0},[le(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç ")],64)):(a(),d(me,{key:1},[le(y(n.totalCommentsCount)+" "+y(n.getCommentWordForm(n.totalCommentsCount)),1)],64))],2)])])),ce(o,{ref:"notificationRef"},null,512)])}const di=$e(Ws,[["render",ui],["__scopeId","data-v-79080d6f"]]),ci={class:"movie-info"},vi={class:"content"},mi={key:0,class:"content-card"},fi={class:"movie-skeleton"},gi={class:"movie-skeleton__player"},ki={key:2,class:"content-card"},yi={key:3,class:"content-card"},pi={class:"content-header"},hi=["src"],bi={class:"content-title"},wi={key:0,class:"ratings-links"},Ci={key:1},_i=["href","title"],Ei={key:2},Mi=["href","title"],Li={key:3},Ii=["href","title"],Ri={key:4},Ti=["href","title"],Pi={key:5},Si=["href"],Ai={key:6,class:"rating-links-group"},xi=["href"],ji=["title"],Ui={key:0,class:"fa-regular fa-face-grin-wink"},Ni={key:1,class:"fas fa-spinner fa-spin"},Bi=["title"],Hi={key:1,class:"mobile-list-dropdown"},Di={class:"mobile-list-content"},$i=["content"],Oi=["content"],Vi={class:"additional-info"},Fi={class:"info-content"},qi={key:0,class:"movie-poster-container desktop-only"},Ki=["href"],zi=["src"],Wi={class:"details-container"},Gi={class:"info-list"},Yi={key:0},Xi={key:1},Zi={key:2},Qi={key:3},Ji={key:4},ea={key:5},ta={key:6},na={key:7},oa={key:8},la={key:9,class:"rating-boxes"},sa={key:0,class:"rating-box mpaa"},ia={key:1,class:"rating-box age"},aa={class:"content-info"},ra={key:0,class:"content-description-text"},ua={key:3,class:"comments-section"},da={key:4,class:"staff-section"},ca={class:"staff-categories"},va={key:0,class:"staff-category"},ma={class:"staff-list"},fa=["href","title"],ga=["src","alt"],ka={class:"staff-name"},ya={key:0,class:"staff-role"},pa=["href","title"],ha={key:1,class:"staff-category"},ba={class:"staff-names-container"},wa={class:"staff-names-list"},Ca=["href"],_a=["href","title"],Ea={key:2,class:"staff-category"},Ma={class:"staff-names-container"},La={class:"staff-names-list"},Ia=["href"],Ra=["href","title"],Ta={key:5,class:"yt-video-container"},Pa={key:6,class:"related-movies"},Sa=["title"],Aa={key:7,class:"related-movies"},xa=["title"],ja={class:"nudity-info-content"},Ua={class:"nudity-info-content"},Na={key:0,class:"acknowledgment-table"},Ba={key:0,class:"nudity-info-actions"},Ha={__name:"MovieInfo",setup(s){const e=m(!0),r=mt(),n=_t(),C=Un(),_=mn(),c=ft(),v=m(_.params.kp_id),E=m(""),M=m(null),o=m(null),u=Nn(),b=qn(),w=m(null),U=b.areTrailersActive,P=m(null),S=m(!1),I=m(!1),h=m(10),R=m(null),x=m(!1),W=m({}),q=m(null),D=m(!1),T=m(void 0),_e=m({}),he=m(null),ye=H(()=>{var g;return(g=o.value)!=null&&g.nudity_timings?o.value.nudity_timings!=="NO HORNY":!1}),je=H(()=>{var g;return(g=o.value)!=null&&g.nudity_timings?o.value.nudity_timings==="NO HORNY":!1}),B=H(()=>{var g,i,K,te,A,$,V,J,ue,Q;return((i=(g=o.value)==null?void 0:g.lists)==null?void 0:i.isFavorite)||((te=(K=o.value)==null?void 0:K.lists)==null?void 0:te.isWatching)||(($=(A=o.value)==null?void 0:A.lists)==null?void 0:$.isLater)||((J=(V=o.value)==null?void 0:V.lists)==null?void 0:J.isCompleted)||((Q=(ue=o.value)==null?void 0:ue.lists)==null?void 0:Q.isAbandoned)}),ne=H(()=>r.isCommentsEnabled),G=()=>{if(o.value){const g=o.value.name_ru||o.value.name_en||o.value.name_original||"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å–º–µ";document.title=g}},z=g=>g?g.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",se=g=>(g||[]).map(i=>({kp_id:i.film_id,poster:i.poster_url_preview||i.poster_url,title:i.name_ru||i.name_en||i.name_original})),pe=g=>{if(typeof g!="number")return;const i=Math.floor(g/60),K=g%60;return"".concat(i," —á. ").concat(K," –º–∏–Ω.")},re=m(!1),ge=m({top:"0px",left:"0px"}),Me=g=>{re.value=!0,ge.value={top:"".concat(g.pageY+10,"px"),left:"".concat(g.pageX-70,"px")}},ke=async()=>{try{const g=[o.value.name_ru||o.value.name_en||o.value.name_original,...o.value.year?[o.value.year]:[],...o.value.film_length?[pe(o.value.film_length)]:[]];await navigator.clipboard.writeText(g.join(", ")),w.value.showNotification("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ")}catch(g){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",g)}},Se=async(g=!0)=>{var i,K,te,A,$,V,J,ue;try{let Q;if(v.value.startsWith("shiki")?Q=await Hn(v.value):Q=await Dn(v.value,n.token),Array.isArray(Q)&&Q.length===0)throw new Error("–î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–∏—Å–∫.");o.value=Q,v.value.startsWith("shiki")?o.value={...o.value,title:o.value.name_ru||o.value.name_en,name_original:o.value.name_en,short_description:o.value.slogan}:o.value={...o.value,title:o.value.name_ru||o.value.name_en||o.value.name_original,kinopoisk_id:v.value},u.setHeaderContent({text:o.value.title,imageUrl:o.value.logo_url}),G();const de={kp_id:v.value,title:((i=o.value)==null?void 0:i.name_ru)||((K=o.value)==null?void 0:K.name_en)||((te=o.value)==null?void 0:te.name_original),poster:((A=o.value)==null?void 0:A.poster_url)||(($=o.value)==null?void 0:$.cover_url)||((V=o.value)==null?void 0:V.screenshots[0]),year:(J=o.value)==null?void 0:J.year,type:(ue=o.value)==null?void 0:ue.type};if(v.value.startsWith("shiki"))if(o.value.screenshots&&o.value.screenshots.length>0){const Ce=Math.floor(Math.random()*o.value.screenshots.length),Ve=o.value.screenshots[Ce];C.updateMoviePoster(Ve)}else de.poster&&C.updateMoviePoster(de.poster);else de.poster&&C.updateMoviePoster(de.poster);if(H(()=>r.isHistoryAllowed).value&&de.kp_id&&de.title&&g)if(n.token)try{await Ct(de.kp_id,O.HISTORY)}catch(Ce){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é:",Ce)}else r.addToHistory({...de})}catch(Q){const{message:de,code:we}=ht(Q);E.value=de,M.value=we,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–ª—å–º–∞—Ö:",Q)}},ie=H(()=>{var g,i;return console.log("–¢—Ä–µ–π–ª–µ—Ä—ã:",(g=o.value)==null?void 0:g.videos),(i=o.value)==null?void 0:i.videos}),Le=H(()=>{var g;return se((g=o.value)==null?void 0:g.sequels_and_prequels)}),fe=H(()=>{var g;return se((g=o.value)==null?void 0:g.similars)}),xe=()=>{var te;const g=((te=document.querySelector(".related-movies"))==null?void 0:te.clientWidth)||0,K=Math.floor(g/160)||10;h.value=Math.max(1,K)},Ee=()=>{xe()},Ae=g=>{if(g.altKey&&g.keyCode===84&&document.querySelector(".player-container")){const K=document.querySelector(".theater-mode-btn");K&&K.click()}},Ye=async g=>{if(R.value){R.value=null;return}T.value=void 0,q.value=g.currentTarget;const i=q.value.getBoundingClientRect();W.value={position:"absolute",top:"".concat(i.bottom+window.scrollY+10,"px"),left:"".concat(i.right+window.scrollX,"px"),transform:"translateX(-100%)"},x.value=!0;try{const K=await $n(o.value.imdb_id);R.value=K.nudity_info}catch(K){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö:",K),w.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö")}finally{x.value=!1}},Fe=g=>{var K,te;if(R.value=null,T.value!==void 0){T.value=void 0;return}he.value=g.currentTarget;const i=he.value.getBoundingClientRect();_e.value={position:"absolute",top:"".concat(i.bottom+window.scrollY+10,"px"),left:"".concat(i.right+window.scrollX,"px"),transform:"translateX(-100%)"},T.value=((K=o.value)==null?void 0:K.nudity_timings)===null?"":((te=o.value)==null?void 0:te.nudity_timings)||""},Xe=g=>{var K,te,A,$,V,J,ue,Q,de,we,Ce,Ve,Ze;return(Ze={[O.FAVORITE]:((te=(K=o.value)==null?void 0:K.lists)==null?void 0:te.isFavorite)||!1,[O.HISTORY]:(($=(A=o.value)==null?void 0:A.lists)==null?void 0:$.isHistory)||!1,[O.LATER]:((J=(V=o.value)==null?void 0:V.lists)==null?void 0:J.isLater)||!1,[O.COMPLETED]:((Q=(ue=o.value)==null?void 0:ue.lists)==null?void 0:Q.isCompleted)||!1,[O.ABANDONED]:((we=(de=o.value)==null?void 0:de.lists)==null?void 0:we.isAbandoned)||!1,[O.WATCHING]:((Ve=(Ce=o.value)==null?void 0:Ce.lists)==null?void 0:Ve.isWatching)||!1}[g])!=null?Ze:!1},Ie=async g=>{if(!n.token){w.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:()=>c.push("/login")});return}try{const i={[O.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[O.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[O.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[O.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[O.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[O.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};Xe(g)?(await gn(v.value,g),w.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(i[g]))):(await Ct(v.value,g),w.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(i[g]))),await Se(!1),D.value=!1}catch(i){const{message:K,code:te}=ht(i);w.value.showNotification("".concat(K," ").concat(te))}},Ue=g=>{const i=document.querySelector(".mobile-list-dropdown");i&&!i.contains(g.target)&&(D.value=!1)},be=g=>{const i=document.querySelector(".nudity-info-popup");i&&!i.contains(g.target)&&q.value&&!q.value.contains(g.target)&&(R.value=null)},Ne=g=>{const i=document.querySelector(".nudity-info-popup");i&&!i.contains(g.target)&&he.value&&!he.value.contains(g.target)&&(T.value=void 0)};Qe(async()=>{await Se(),e.value=!1,document.addEventListener("keydown",Ae),window.addEventListener("resize",Ee),setTimeout(xe,100),document.addEventListener("click",Ue),document.addEventListener("click",be,!0),document.addEventListener("click",Ne,!0)}),Bn(async()=>{u.clearHeaderContent(),document.removeEventListener("keydown",Ae),window.removeEventListener("resize",Ee),document.removeEventListener("click",Ue),document.removeEventListener("click",be,!0),document.removeEventListener("click",Ne,!0)}),De(()=>_.params.kp_id,async g=>{g&&g!==v.value&&(u.clearHeaderContent(),v.value=g,P.value=null,await Se(),e.value=!1)},{immediate:!0}),De(o,()=>{G()},{deep:!0}),De(R,g=>{g?document.addEventListener("click",be,!0):document.removeEventListener("click",be,!0)},{deep:!0}),De(T,g=>{g?document.addEventListener("click",Ne,!0):document.removeEventListener("click",Ne,!0)},{deep:!0});const k=g=>{var i,K;return((K=(i=o.value)==null?void 0:i.staff)==null?void 0:K.filter(te=>te.profession_key===g))||[]},Z=async()=>{try{await navigator.clipboard.writeText(R.value),w.value.showNotification("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω")}catch(g){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",g),w.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞")}finally{R.value=null}},Be=async()=>{if(T.value)try{await navigator.clipboard.writeText(T.value),w.value.showNotification("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω")}catch(g){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",g),w.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞")}finally{T.value=void 0}},Je=()=>{const g=encodeURIComponent(R.value);window.open("https://translate.google.com/?sl=en&tl=ru&text=".concat(g),"_blank"),R.value=null};return(g,i)=>{var K,te,A,$,V,J,ue,Q,de,we,Ce,Ve,Ze,gt,et,st,kt,yt;return a(),d(me,null,[t("div",ci,[t("div",vi,[(e.value||!o.value)&&!E.value?(a(),d("div",mi,[t("div",fi,[i[12]||(i[12]=lt('<div class="movie-skeleton__header" data-v-6d0d70e6><div class="movie-skeleton__title" data-v-6d0d70e6></div></div><div class="movie-skeleton__ratings" data-v-6d0d70e6><div class="movie-skeleton__rating-item" data-v-6d0d70e6></div><div class="movie-skeleton__rating-item" data-v-6d0d70e6></div><div class="movie-skeleton__rating-item" data-v-6d0d70e6></div></div>',2)),t("div",gi,[ce(kn)]),i[13]||(i[13]=lt('<div class="movie-skeleton__additional-info" data-v-6d0d70e6><div class="movie-skeleton__section-title" data-v-6d0d70e6></div><div class="movie-skeleton__info-list" data-v-6d0d70e6><div class="movie-skeleton__info-item" data-v-6d0d70e6></div><div class="movie-skeleton__info-item" data-v-6d0d70e6></div><div class="movie-skeleton__info-item" data-v-6d0d70e6></div><div class="movie-skeleton__info-item" data-v-6d0d70e6></div><div class="movie-skeleton__info-item" data-v-6d0d70e6></div></div></div><div class="movie-skeleton__description" data-v-6d0d70e6><div class="movie-skeleton__description-line" data-v-6d0d70e6></div><div class="movie-skeleton__description-line" data-v-6d0d70e6></div><div class="movie-skeleton__description-line" data-v-6d0d70e6></div><div class="movie-skeleton__description-line" data-v-6d0d70e6></div></div>',2))])])):p("",!0),E.value?(a(),Oe(fn,{key:1,message:E.value,code:M.value},null,8,["message","code"])):p("",!0),E.value?(a(),d("div",ki,[(a(),Oe(vn,{key:v.value,"kp-id":v.value,"movie-info":o.value,"onUpdate:movieInfo":Se},null,8,["kp-id","movie-info"]))])):p("",!0),o.value&&!e.value?(a(),d("div",yi,[t("div",pi,[o.value.logo_url?(a(),d("div",{key:0,class:"content-logo",onMousemove:Me,onMouseleave:i[0]||(i[0]=F=>re.value=!1),onClick:ke},[t("img",{src:o.value.logo_url,alt:"–õ–æ–≥–æ—Ç–∏–ø —Ñ–∏–ª—å–º–∞",class:"content-logo"},null,8,hi)],32)):(a(),d("div",{key:1,onMousemove:Me,onMouseleave:i[1]||(i[1]=F=>re.value=!1),onClick:ke},[t("h1",bi,y(o.value.title),1)],32)),ee(t("div",{class:"title-copy-tooltip",style:ot(ge.value)}," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ",4),[[ae,re.value]])]),o.value.kinopoisk_id||o.value.title||o.value.imdb_id||o.value.rating_imdb||o.value.shikimori_id?(a(),d("div",wi,[o.value.kinopoisk_id?(a(),Oe(pl,{key:o.value.kinopoisk_id,"kp-id":o.value.kinopoisk_id,"show-dash":!0},null,8,["kp-id"])):p("",!0),o.value.kinopoisk_id?(a(),d("div",Ci,[t("a",{href:"https://www.kinopoisk.ru/film/".concat(o.value.kinopoisk_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:o.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(z(o.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[i[14]||(i[14]=t("img",{src:un,alt:"–ö–ü",class:"rating-logo"},null,-1)),t("span",{class:L(["rating-value",X(ct)(o.value.rating_kinopoisk)])},y(o.value.rating_kinopoisk?o.value.rating_kinopoisk:"‚Äî"),3),i[15]||(i[15]=t("img",{src:tt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,_i)])):p("",!0),!o.value.kinopoisk_id&&o.value.title?(a(),d("div",Ei,[t("a",{href:"https://www.kinopoisk.ru/index.php?kp_query=".concat(encodeURIComponent(o.value.title+(o.value.year?" "+o.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:o.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(z(o.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[i[16]||(i[16]=t("img",{src:un,alt:"–ö–ü",class:"rating-logo"},null,-1)),t("span",{class:L(["rating-value",X(ct)(o.value.rating_kinopoisk)])},y(o.value.rating_kinopoisk?o.value.rating_kinopoisk:"‚Äî"),3),i[17]||(i[17]=t("img",{src:tt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Mi)])):p("",!0),o.value.imdb_id?(a(),d("div",Li,[t("a",{href:"https://www.imdb.com/title/".concat(o.value.imdb_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:o.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(z(o.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[i[18]||(i[18]=t("img",{src:dn,alt:"IMDb",class:"rating-logo"},null,-1)),t("span",{class:L(["rating-value",X(ct)(o.value.rating_imdb)])},y(o.value.rating_imdb?o.value.rating_imdb:"‚Äî"),3),i[19]||(i[19]=t("img",{src:tt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Ii)])):p("",!0),!o.value.imdb_id&&o.value.title?(a(),d("div",Ri,[t("a",{href:"https://www.imdb.com/find/?q=".concat(encodeURIComponent(o.value.title+(o.value.year?" "+o.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:o.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(z(o.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[i[20]||(i[20]=t("img",{src:dn,alt:"IMDb",class:"rating-logo"},null,-1)),t("span",{class:L(["rating-value",X(ct)(o.value.rating_imdb)])},y(o.value.rating_imdb?o.value.rating_imdb:"‚Äî"),3),i[21]||(i[21]=t("img",{src:tt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Ti)])):p("",!0),o.value.shikimori_id?(a(),d("div",Pi,[t("a",{href:"https://shikimori.one/animes/".concat(o.value.shikimori_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},i[22]||(i[22]=[t("img",{src:Wn,alt:"Shiki",class:"rating-logo"},null,-1),t("img",{src:tt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,Si)])):p("",!0),o.value.imdb_id?(a(),d("div",Ai,[t("a",{href:"https://www.imdb.com/title/".concat(o.value.imdb_id,"/parentalguide"),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},i[23]||(i[23]=[t("span",{class:"desktop-text"},"Parents Guide",-1),t("span",{class:"mobile-text"},"PG",-1),t("img",{src:tt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,xi),t("button",{class:"nudity-info-btn",onClick:i[2]||(i[2]=F=>Ye(F)),title:R.value?"–°–∫—Ä—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é":"–ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ü–µ–Ω–∞—Ö(Sex & Nudity)"},[x.value?(a(),d("i",Ni)):(a(),d("i",Ui))],8,ji)])):p("",!0),t("button",{class:"nudity-info-btn",onClick:i[3]||(i[3]=F=>Fe(F)),title:T.value!==void 0?"–°–∫—Ä—ã—Ç—å —Ç–∞–π–º–∏–Ω–≥–∏":"–ü–æ–∫–∞–∑–∞—Ç—å —Ç–∞–π–º–∏–Ω–≥–∏ —Å—Ü–µ–Ω"},[t("i",{class:L(["fa-regular fa-clock",{"text-red":ye.value,"text-green":je.value}])},null,2)],8,Bi)])):p("",!0),(a(),Oe(vn,{key:v.value,"kp-id":v.value,"movie-info":o.value,"onUpdate:movieInfo":Se},null,8,["kp-id","movie-info"])),X(r).isMobile?(a(),d("div",Hi,[t("button",{class:L(["mobile-list-toggle",{}]),onClick:i[4]||(i[4]=F=>D.value=!D.value)},[t("span",{class:L(["material-icons",{active:B.value}])},y(B.value?"bookmark_added":"bookmark_border"),3),i[24]||(i[24]=t("span",{class:"button-label"},"–î–æ–±–∞–≤–∏—Ç—å –≤ —Å–ø–∏—Å–æ–∫",-1)),t("span",{class:L(["material-icons dropdown-arrow",{expanded:D.value}])},"expand_more",2)]),ee(t("div",Di,[t("button",{class:L(["mobile-list-btn",{}]),onClick:i[5]||(i[5]=F=>Ie(X(O).FAVORITE))},[t("span",{class:L(["material-icons",{active:(te=(K=o.value)==null?void 0:K.lists)==null?void 0:te.isFavorite}])},y(($=(A=o.value)==null?void 0:A.lists)!=null&&$.isFavorite?"favorite":"favorite_border"),3),i[25]||(i[25]=t("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))]),t("button",{class:L(["mobile-list-btn",{}]),onClick:i[6]||(i[6]=F=>Ie(X(O).WATCHING))},[t("span",{class:L(["material-icons",{active:(J=(V=o.value)==null?void 0:V.lists)==null?void 0:J.isWatching}])},y((Q=(ue=o.value)==null?void 0:ue.lists)!=null&&Q.isWatching?"visibility":"visibility_off"),3),i[26]||(i[26]=t("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))]),t("button",{class:L(["mobile-list-btn",{}]),onClick:i[7]||(i[7]=F=>Ie(X(O).LATER))},[t("span",{class:L(["material-icons",{active:(we=(de=o.value)==null?void 0:de.lists)==null?void 0:we.isLater}])},"watch_later",2),i[27]||(i[27]=t("span",{class:"button-label"},"–ü–æ–∑–∂–µ",-1))]),t("button",{class:L(["mobile-list-btn",{}]),onClick:i[8]||(i[8]=F=>Ie(X(O).COMPLETED))},[t("span",{class:L(["material-icons",{active:(Ve=(Ce=o.value)==null?void 0:Ce.lists)==null?void 0:Ve.isCompleted}])},y((gt=(Ze=o.value)==null?void 0:Ze.lists)!=null&&gt.isCompleted?"check_circle":"check_circle_outline"),3),i[28]||(i[28]=t("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))]),t("button",{class:L(["mobile-list-btn",{}]),onClick:i[9]||(i[9]=F=>Ie(X(O).ABANDONED))},[t("span",{class:L(["material-icons",{active:(st=(et=o.value)==null?void 0:et.lists)==null?void 0:st.isAbandoned}])},"not_interested",2),i[29]||(i[29]=t("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))])],512),[[ae,D.value]])])):p("",!0),t("meta",{name:"title-and-year",content:o.value.type==="FILM"&&o.value.year?"".concat(o.value.title," (").concat(o.value.year,")"):o.value.title},null,8,$i),o.value.name_original?(a(),d("meta",{key:2,name:"original-title",content:o.value.name_original},null,8,Oi)):p("",!0),t("div",Vi,[i[40]||(i[40]=t("h2",{class:"additional-info-title"},"–ü–æ–¥—Ä–æ–±–Ω–µ–µ",-1)),t("div",Fi,[o.value.poster_url?(a(),d("div",qi,[t("a",{href:o.value.poster_url,target:"_blank",rel:"noopener noreferrer"},[t("img",{src:o.value.poster_url,alt:"–ü–æ—Å—Ç–µ—Ä —Ñ–∏–ª—å–º–∞",class:"movie-poster"},null,8,zi)],8,Ki)])):p("",!0),t("div",Wi,[t("ul",Gi,[o.value.type&&X(rn)[o.value.type]?(a(),d("li",Yi,[i[30]||(i[30]=t("strong",null,"–¢–∏–ø:",-1)),le(" "+y(X(rn)[o.value.type]),1)])):p("",!0),o.value.year?(a(),d("li",Xi,[i[31]||(i[31]=t("strong",null,"–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞:",-1)),le(" "+y(o.value.year),1)])):p("",!0),o.value.title?(a(),d("li",Zi,[i[32]||(i[32]=t("strong",null,"–ù–∞–∑–≤–∞–Ω–∏–µ:",-1)),le(" "+y(o.value.title),1)])):p("",!0),o.value.name_original?(a(),d("li",Qi,[i[33]||(i[33]=t("strong",null,"–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:",-1)),le(" "+y(o.value.name_original),1)])):p("",!0),o.value.slogan?(a(),d("li",Ji,[i[34]||(i[34]=t("strong",null,"–°–ª–æ–≥–∞–Ω:",-1)),le(" "+y(o.value.slogan),1)])):p("",!0),o.value.production_companies?(a(),d("li",ea,[i[35]||(i[35]=t("strong",null,"–ü—Ä–æ–¥–∞–∫—à–Ω:",-1)),le(" "+y(o.value.production_companies),1)])):p("",!0),(kt=o.value.countries)!=null&&kt.length?(a(),d("li",ta,[i[36]||(i[36]=t("strong",null,"–°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞:",-1)),le(" "+y(o.value.countries.map(F=>F.country).join(", ")),1)])):p("",!0),(yt=o.value.genres)!=null&&yt.length?(a(),d("li",na,[i[37]||(i[37]=t("strong",null,"–ñ–∞–Ω—Ä—ã:",-1)),le(" "+y(o.value.genres.map(F=>F.genre).join(", ")),1)])):p("",!0),o.value.film_length?(a(),d("li",oa,[i[38]||(i[38]=t("strong",null,"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:",-1)),le(" "+y(pe(o.value.film_length)),1)])):p("",!0),o.value.rating_mpaa||o.value.rating_age_limits?(a(),d("li",la,[o.value.rating_mpaa?(a(),d("div",sa,[i[39]||(i[39]=t("strong",null,"MPAA",-1)),t("span",null,y(o.value.rating_mpaa.toUpperCase()),1)])):p("",!0),o.value.rating_age_limits?(a(),d("div",ia,[t("strong",null,y(o.value.rating_age_limits.replace("age",""))+"+",1)])):p("",!0)])):p("",!0)]),t("div",aa,[o.value.description?(a(),d("p",ra,y(o.value.description),1)):p("",!0)])])])]),ne.value?(a(),d("div",ua,[(a(),Oe(di,{"movie-id":v.value,key:v.value},null,8,["movie-id"]))])):p("",!0),o.value.staff?(a(),d("div",da,[t("div",ca,[k("ACTOR").length?(a(),d("div",va,[i[41]||(i[41]=t("h3",{class:"additional-info-title"},"–ê–∫—Ç—ë—Ä—ã",-1)),t("div",ma,[(a(!0),d(me,null,Te(k("ACTOR").slice(0,12),F=>(a(),d("div",{key:F.staff_id,class:"staff-item"},[t("a",{href:"https://www.kinopoisk.ru/name/".concat(F.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-link",title:F.description||""},[t("img",{src:F.poster_url,alt:F.name_ru,class:"staff-photo"},null,8,ga),t("span",ka,y(F.name_ru||F.name_en),1),F.description?(a(),d("span",ya,y(F.description),1)):p("",!0)],8,fa)]))),128)),t("a",{class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(v.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(k("ACTOR").length," –∞–∫—Ç–µ—Ä–æ–≤")}," +"+y(k("ACTOR").length-12),9,pa)])])):p("",!0),k("DIRECTOR").length?(a(),d("div",ha,[i[42]||(i[42]=t("h3",{class:"additional-info-title"},"–†–µ–∂–∏—Å—Å—ë—Ä—ã",-1)),t("div",ba,[t("div",wa,[(a(!0),d(me,null,Te(k("DIRECTOR").slice(0,5),F=>(a(),d("a",{key:F.staff_id,href:"https://www.kinopoisk.ru/name/".concat(F.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},y(F.name_ru||F.name_en),9,Ca))),128)),k("DIRECTOR").length>5?(a(),d("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(v.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(k("DIRECTOR").length," —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–≤")}," +"+y(k("DIRECTOR").length-5),9,_a)):p("",!0)])])])):p("",!0),k("PRODUCER").length?(a(),d("div",Ea,[i[43]||(i[43]=t("h3",{class:"additional-info-title"},"–ü—Ä–æ–¥—é—Å–µ—Ä—ã",-1)),t("div",Ma,[t("div",La,[(a(!0),d(me,null,Te(k("PRODUCER").slice(0,5),F=>(a(),d("a",{key:F.staff_id,href:"https://www.kinopoisk.ru/name/".concat(F.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},y(F.name_ru||F.name_en),9,Ia))),128)),k("PRODUCER").length>5?(a(),d("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(v.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(k("PRODUCER").length," –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤")}," +"+y(k("PRODUCER").length-5),9,Ra)):p("",!0)])])])):p("",!0)])])):p("",!0),ie.value.length&&X(U)?(a(),d("div",Ta,[ce(rl,{videos:ie.value,"active-video-index":P.value,onSelect:g.playTrailer},null,8,["videos","active-video-index","onSelect"])])):p("",!0),Le.value.length?(a(),d("div",Pa,[i[44]||(i[44]=t("h2",null,"–°–∏–∫–≤–µ–ª—ã –∏ –ø—Ä–∏–∫–≤–µ–ª—ã",-1)),ce(X(cn),{"movies-list":S.value?Le.value:Le.value.slice(0,h.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),Le.value.length>h.value?(a(),d("a",{key:0,class:"expand-circle-button",onClick:i[10]||(i[10]=F=>S.value=!S.value),title:"".concat(S.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(Le.value.length,")")},y(S.value?"‚àí":"+".concat(Le.value.length-h.value)),9,Sa)):p("",!0)])):p("",!0),fe.value.length?(a(),d("div",Aa,[i[45]||(i[45]=t("h2",null,"–ü–æ—Ö–æ–∂–∏–µ",-1)),ce(X(cn),{"movies-list":I.value?fe.value:fe.value.slice(0,h.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),fe.value.length>h.value?(a(),d("a",{key:0,class:"expand-circle-button",onClick:i[11]||(i[11]=F=>I.value=!I.value),title:"".concat(I.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(fe.value.length,")")},y(I.value?"‚àí":"+".concat(fe.value.length-h.value)),9,xa)):p("",!0)])):p("",!0)])):p("",!0)])]),ce(bt,{ref_key:"notificationRef",ref:w},null,512),R.value?(a(),d("div",{key:0,style:ot(W.value),class:"nudity-info-popup"},[t("div",ja,y(R.value),1),t("div",{class:"nudity-info-actions"},[t("button",{class:"nudity-info-button",onClick:Z},i[46]||(i[46]=[t("i",{class:"fas fa-copy"},null,-1),t("span",null,"Copy",-1)])),t("button",{class:"nudity-info-button",onClick:Je},i[47]||(i[47]=[t("i",{class:"fas fa-language"},null,-1),t("span",null,"Translate",-1)]))])],4)):p("",!0),T.value!==void 0?(a(),d("div",{key:1,style:ot(_e.value),class:"nudity-info-popup"},[t("div",Ua,[T.value?(a(),d("div",Na,i[48]||(i[48]=[lt('<div class="acknowledgment-header" data-v-6d0d70e6><i class="fa-solid fa-heart" data-v-6d0d70e6></i><span data-v-6d0d70e6>–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏</span></div><div class="acknowledgment-content" data-v-6d0d70e6><a href="https://www.twitch.tv/tanyabelkova" target="_blank" rel="noopener noreferrer" class="twitch-link" data-v-6d0d70e6><i class="fa-brands fa-twitch" data-v-6d0d70e6></i><span data-v-6d0d70e6>TanyaBelkova</span></a><div class="acknowledgment-text" data-v-6d0d70e6>–ó–∞ –≤–µ–¥–µ–Ω–∏–µ —Ç–∞–±–ª–∏—á–∫–∏ —Ç–∞–π–º–∏–Ω–≥–æ–≤</div></div>',2)]))):p("",!0),t("div",{class:L(["timings-content",{"no-border":!T.value}])},y(T.value||"–ó–∞–ø–∏—Å–µ–π –æ —Ç–∞–π–º–∏–Ω–≥–∞—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω–æ"),3)]),T.value?(a(),d("div",Ba,[t("button",{class:"nudity-info-button",onClick:Be},i[49]||(i[49]=[t("i",{class:"fas fa-copy"},null,-1),t("span",null,"Copy",-1)]))])):p("",!0)],4)):p("",!0)],64)}}},za=$e(Ha,[["__scopeId","data-v-6d0d70e6"]]);export{za as default};
