{"version":3,"file":"MovieInfo-legacy-CRErtTQ1.js","sources":["../../src/assets/icon-external-link.png","../../src/helpers/ui.js","../../src/components/PlayerModal.vue","../../src/components/PlayerComponent.vue","../../src/components/TrailerCarousel.vue","../../src/components/MovieRating.vue","../../src/components/MovieInfo.vue","../../src/assets/icon-shikimori.svg"],"sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVR4nO2ZQUoDMRSGR7eewHoFsVS0HkUUXNXqASqK2EURBPFIVRe6c+UN1CvUXWvbT4KvMAwzNnnJdCrmg1BKad7/v7y0b5IkiUQiCwGoAx3gQjEugZ0qxTeAIX6MKjMBnBOGS62AVWAPOHVYdlMu9YArYOhphLeBT+ALmOKGEd2QubaAK+B2zngFxt4GgDXgGZjgR8ch5oEkCi8DkvlnRcYLV0Apfqw10M7JvPkV6AN3FmVwK+WyZRnvMEe8ef/ibECyb2o+zRuwnpQAxeLNivQ0BvYyE46qEJ/8fK4ycJKp/X4V4n0MdDNfukkqEO9jwP1LDgD7BeKPgmgp04CL+KUz4Cp+qQxoxC+NAdsNm4c0hWkukkUa8BGfegiadbFDq3/2UAZ8xc+QVvzMtqcKYkBaZ5/MN5xEl2DgLGDZ1KswsC09FPJqXTZoNm5oA6kyMGI2FxqfkluJ0uMTDfhBXAHiHvCCWEL8/RLqlv1MPCf+TSZ+13WC7KnEfWlqcwAeU7GNjnbiQsG5UC1ZAEAt1UMhOpquk6zknMy9l20C2AA+MnEHRo9msuOCs9EH4Fp5TVQ0rqVs0plH4re02Qh1Oq1lCjypsp+5H3gKcD/gykTirqnFZ/ZDy+OGxpapzD+QePrM/2KkKfcGPcv7AdvRkz23G1x4JPIP+AY3r/ywUk/2JAAAAABJRU5ErkJggg==\"","export const showMessageToast = (message) => {\n  const messageElement = document.createElement('div')\n  messageElement.style.position = 'fixed'\n  messageElement.style.top = '0'\n  messageElement.style.left = '0'\n  messageElement.style.width = '100%'\n  messageElement.style.height = '100%'\n  messageElement.style.backgroundColor = 'rgba(0, 0, 0, 0.8)'\n  messageElement.style.color = 'white'\n  messageElement.style.display = 'flex'\n  messageElement.style.justifyContent = 'center'\n  messageElement.style.alignItems = 'center'\n  messageElement.style.fontSize = '2rem'\n  messageElement.style.zIndex = '99000'\n  messageElement.textContent = message\n  document.body.appendChild(messageElement)\n\n  setTimeout(() => {\n    document.body.removeChild(messageElement)\n  }, 2000)\n}\n","<template>\n  <div class=\"modal\" @click.self=\"$emit('close')\">\n    <div class=\"modal-content\">\n      <button class=\"close\" @click=\"$emit('close')\">&times;</button>\n\n      <h2 v-if=\"!activeGroup\">Выберите плеер</h2>\n      <h2 v-else>\n        <button class=\"back-btn\" @click=\"collapseGroup\">← Назад</button>\n        {{ activeGroup === 'hdrezka' ? 'ReYohoho - HDrezka' : 'Kodik' }}\n      </h2>\n\n      <ul class=\"players-list\">\n        <template v-if=\"!activeGroup\">\n          <li v-for=\"player in mainPlayers\" :key=\"player.key\">\n            <button\n              :class=\"['player-item', { active: isSelected(player) }]\"\n              @click=\"selectPlayer(player)\"\n            >\n              {{ cleanName(player.translate) }}\n              <span v-if=\"player.warning\" class=\"warning-icon material-icons\" title=\"Внимание!\"\n                >warning</span\n              >\n            </button>\n          </li>\n          <li v-if=\"hasHdrezkaGroup\">\n            <button\n              :class=\"['group-item', { active: isGroupSelected('hdrezka') }]\"\n              @click=\"expandGroup('hdrezka')\"\n            >\n              <span class=\"material-icons group-icon\">folder</span>\n              ReYohoho - HDrezka\n              <span\n                v-if=\"groupHasWarning('hdrezka')\"\n                class=\"warning-icon material-icons\"\n                title=\"Внимание!\"\n                >warning</span\n              >\n            </button>\n          </li>\n          <li v-if=\"hasKodikGroup\">\n            <button\n              :class=\"['group-item', { active: isGroupSelected('kodik') }]\"\n              @click=\"expandGroup('kodik')\"\n            >\n              <span class=\"material-icons group-icon\">folder</span>\n              Kodik\n              <span\n                v-if=\"groupHasWarning('kodik')\"\n                class=\"warning-icon material-icons\"\n                title=\"Внимание!\"\n                >warning</span\n              >\n            </button>\n          </li>\n        </template>\n        <template v-else>\n          <li v-for=\"player in groupPlayers(activeGroup)\" :key=\"player.key\">\n            <button\n              :class=\"['player-item', { active: isSelected(player) }]\"\n              @click=\"selectPlayer(player)\"\n            >\n              {{ cleanName(player.translate) }}\n              <span v-if=\"player.warning\" class=\"warning-icon material-icons\" title=\"Внимание!\"\n                >warning</span\n              >\n            </button>\n          </li>\n        </template>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\n\nconst props = defineProps({\n  players: {\n    type: Array,\n    required: true\n  },\n  selectedPlayer: {\n    type: Object,\n    default: null\n  }\n})\nconst emit = defineEmits(['close', 'select'])\n\nconst activeGroup = ref(null)\n\nconst mainPlayers = computed(() =>\n  props.players.filter((player) => !isHdrezka(player) && !isKodik(player))\n)\nconst hasHdrezkaGroup = computed(() => props.players.some((player) => isHdrezka(player)))\nconst hasKodikGroup = computed(() => props.players.some((player) => isKodik(player)))\n\nconst isHdrezka = (player) => player.key.toUpperCase().includes('HDREZKA')\nconst isKodik = (player) => player.key.toUpperCase().includes('KODIK')\n\nconst cleanName = (name) =>\n  name\n    .replace(/^REYOHOHO_PLAYER>HDREZKA>/, '')\n    .replace(/KODIK>/, '')\n    .trim()\n\nconst selectPlayer = (player) => {\n  emit('select', player)\n  emit('close')\n}\n\nconst isSelected = (player) => props.selectedPlayer && props.selectedPlayer.key === player.key\n\nconst isGroupSelected = (group) => {\n  if (!props.selectedPlayer) return false\n  return (\n    (group === 'hdrezka' && isHdrezka(props.selectedPlayer)) ||\n    (group === 'kodik' && isKodik(props.selectedPlayer))\n  )\n}\n\nconst expandGroup = (group) => {\n  activeGroup.value = group\n}\nconst collapseGroup = () => {\n  activeGroup.value = null\n}\nconst groupPlayers = (group) => {\n  let players = props.players.filter(\n    (player) => (group === 'hdrezka' && isHdrezka(player)) || (group === 'kodik' && isKodik(player))\n  )\n\n  if (group === 'kodik') {\n    return players.sort((a, b) => cleanName(a.translate).localeCompare(cleanName(b.translate)))\n  }\n\n  return players\n}\nconst groupHasWarning = (group) => groupPlayers(group).some((player) => player.warning)\n</script>\n\n<style scoped>\n.modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.85);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 5;\n}\n\n.modal-content {\n  background: #2d2d2d;\n  padding: 20px;\n  border-radius: 8px;\n  width: 90%;\n  max-width: 500px;\n  max-height: 80vh;\n  overflow-y: auto;\n  color: #fff;\n  position: relative;\n  box-shadow: 0 0 20px rgba(0, 0, 0, 0.7);\n}\n\n.close {\n  position: absolute;\n  top: 12px;\n  right: 12px;\n  border: none;\n  background: transparent;\n  color: #fff;\n  font-size: 1.8rem;\n  cursor: pointer;\n}\n\nh2 {\n  margin-top: 0;\n  font-size: 1.4rem;\n  display: flex;\n  align-items: center;\n}\n\n.back-btn {\n  background: transparent;\n  border: none;\n  color: #aaa;\n  font-size: 1rem;\n  margin-right: 8px;\n  cursor: pointer;\n}\n\n.players-list {\n  list-style: none;\n  padding: 0;\n  margin: 15px 0;\n}\n\n.players-list li {\n  margin: 8px 0;\n}\n\n.player-item,\n.group-item {\n  width: 100%;\n  text-align: left;\n  padding: 10px;\n  background-color: #444;\n  border: none;\n  border-radius: 4px;\n  color: #fff;\n  font-size: 1rem;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  transition: background 0.2s;\n}\n\n.player-item:hover,\n.group-item:hover {\n  background-color: #555;\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);\n}\n\n.player-item.active,\n.group-item.active {\n  background-color: #4caf50;\n  box-shadow: 0 0 5px rgba(76, 175, 80, 0.7);\n}\n\n.warning-icon {\n  font-size: 1.2rem;\n  color: #ffcc00;\n  margin-left: 8px;\n}\n\n.group-icon {\n  font-size: 1.2rem;\n  color: #aaa;\n  margin-right: 8px;\n}\n\n@media (max-width: 768px) {\n  .modal-content {\n    padding: 15px;\n    max-width: 90%;\n  }\n}\n\n@media (max-width: 480px) {\n  .modal-content {\n    max-width: 95%;\n  }\n}\n</style>\n","<template>\n  <ErrorMessage v-if=\"errorMessage\" :message=\"errorMessage\" :code=\"errorCode\" />\n\n  <template v-else>\n    <!-- Кнопка для открытия модалки выбора плеера -->\n    <div class=\"players-list\">\n      <span>Плеер:</span>\n      <button class=\"player-btn\" @click=\"openPlayerModal\">\n        {{\n          selectedPlayerInternal\n            ? cleanName(selectedPlayerInternal.translate).toUpperCase()\n            : 'Загрузка плееров...'\n        }}\n      </button>\n    </div>\n\n    <!-- Модальное окно выбора плеера -->\n    <PlayerModal\n      v-if=\"showPlayerModal\"\n      :players=\"playersInternal\"\n      :selected-player=\"selectedPlayerInternal\"\n      @close=\"closePlayerModal\"\n      @select=\"handlePlayerSelect\"\n    />\n\n    <!-- Единый контейнер плеера -->\n    <div\n      ref=\"containerRef\"\n      :class=\"['player-container', { 'theater-mode': theaterMode }]\"\n      :style=\"!theaterMode ? containerStyle : {}\"\n    >\n      <div class=\"iframe-wrapper\" :style=\"!theaterMode ? iframeWrapperStyle : {}\">\n        <!-- <div class=\"fullscreen\" @mousemove=\"showCloseButton\"></div> -->\n\n        <iframe\n          v-show=\"!iframeLoading && selectedPlayerInternal?.iframe\"\n          ref=\"playerIframe\"\n          :src=\"selectedPlayerInternal?.iframe\"\n          frameborder=\"0\"\n          allowfullscreen\n          webkitallowfullscreen\n          class=\"responsive-iframe\"\n          :class=\"{\n            'theater-mode-unlock': closeButtonVisible,\n            'theater-mode-lock': theaterMode,\n            dimmed: dimmingEnabled\n          }\"\n          @load=\"onIframeLoad\"\n        ></iframe>\n        <SpinnerLoading v-if=\"iframeLoading\" />\n      </div>\n\n      <!-- Кнопка закрытия в театральном режиме -->\n      <button\n        v-if=\"theaterMode\"\n        class=\"close-theater-btn\"\n        :class=\"{ visible: closeButtonVisible }\"\n        @click=\"toggleTheaterMode\"\n      >\n        ✖\n      </button>\n    </div>\n\n    <!-- Кнопки управления -->\n    <div v-if=\"!theaterMode\" class=\"controls\">\n      <div class=\"main-controls\">\n        <div\n          v-if=\"!isMobile\"\n          ref=\"tooltipContainer\"\n          class=\"tooltip-container list-buttons-container\"\n        >\n          <button\n            v-if=\"showFavoriteTooltip\"\n            class=\"favorite-btn\"\n            :class=\"{ active: movieInfo?.lists?.isFavorite }\"\n            @mouseenter=\"showTooltip('favorite')\"\n            @mouseleave=\"tryHideTooltip\"\n            @click=\"toggleList(USER_LIST_TYPES_ENUM.FAVORITE)\"\n          >\n            <span class=\"material-icons\">{{\n              movieInfo?.lists?.isFavorite ? 'favorite' : 'favorite_border'\n            }}</span>\n            <span class=\"material-icons dropdown-arrow\" :class=\"{ highlighted: isInAnyList }\"\n              >expand_more</span\n            >\n          </button>\n          <div\n            v-show=\"activeTooltip === 'favorite' && showFavoriteTooltip\"\n            ref=\"tooltip\"\n            class=\"custom-tooltip advanced-tooltip list-buttons-dropdown\"\n            @mouseenter=\"keepTooltipVisible\"\n            @mouseleave=\"hideTooltip\"\n          >\n            <div class=\"list-button-item\">\n              <button\n                class=\"favorite-btn\"\n                :class=\"{ active: movieInfo?.lists?.isFavorite }\"\n                @click=\"toggleList(USER_LIST_TYPES_ENUM.FAVORITE)\"\n              >\n                <span class=\"material-icons\">{{\n                  movieInfo?.lists?.isFavorite ? 'favorite' : 'favorite_border'\n                }}</span>\n                <span class=\"button-label\">В избранное</span>\n              </button>\n            </div>\n            <div class=\"list-button-item\">\n              <button\n                class=\"watching-btn\"\n                :class=\"{ active: movieInfo?.lists?.isWatching }\"\n                @click=\"toggleList(USER_LIST_TYPES_ENUM.WATCHING)\"\n              >\n                <span class=\"material-icons\">{{\n                  movieInfo?.lists?.isWatching ? 'visibility_off' : 'visibility'\n                }}</span>\n                <span class=\"button-label\">Смотрю</span>\n              </button>\n            </div>\n            <div class=\"list-button-item\">\n              <button\n                class=\"later-btn\"\n                :class=\"{ active: movieInfo?.lists?.isLater }\"\n                @click=\"toggleList(USER_LIST_TYPES_ENUM.LATER)\"\n              >\n                <span class=\"material-icons\">watch_later</span>\n                <span class=\"button-label\">Смотреть позже</span>\n              </button>\n            </div>\n            <div class=\"list-button-item\">\n              <button\n                class=\"completed-btn\"\n                :class=\"{ active: movieInfo?.lists?.isCompleted }\"\n                @click=\"toggleList(USER_LIST_TYPES_ENUM.COMPLETED)\"\n              >\n                <span class=\"material-icons\">{{\n                  movieInfo?.lists?.isCompleted ? 'check_circle' : 'check_circle_outline'\n                }}</span>\n                <span class=\"button-label\">Просмотрено</span>\n              </button>\n            </div>\n            <div class=\"list-button-item\">\n              <button\n                class=\"abandoned-btn\"\n                :class=\"{ active: movieInfo?.lists?.isAbandoned }\"\n                @click=\"toggleList(USER_LIST_TYPES_ENUM.ABANDONED)\"\n              >\n                <span class=\"material-icons\">{{\n                  movieInfo?.lists?.isAbandoned ? 'not_interested' : 'not_interested'\n                }}</span>\n                <span class=\"button-label\">Брошено</span>\n              </button>\n            </div>\n            <div class=\"tooltip-hint\">\n              <span class=\"material-icons\">settings</span>\n              <span\n                >Стиль отображения можно изменить в\n                <a class=\"settings-link\" @click=\"openSettings\">настройках</a></span\n              >\n            </div>\n          </div>\n        </div>\n\n        <template v-if=\"!isMobile\">\n          <div class=\"tooltip-container\">\n            <button\n              class=\"dimming-btn\"\n              :class=\"{ active: dimmingEnabled }\"\n              @mouseenter=\"showTooltip('dimming')\"\n              @mouseleave=\"activeTooltip = null\"\n              @click=\"toggleDimming\"\n            >\n              <span class=\"material-icons\">{{ dimmingEnabled ? 'light_mode' : 'dark_mode' }}</span>\n            </button>\n            <div v-show=\"activeTooltip === 'dimming'\" class=\"custom-tooltip\">\n              {{ dimmingEnabled ? 'Отключить затемнение' : 'Включить затемнение' }}\n            </div>\n          </div>\n\n          <div class=\"tooltip-container\">\n            <button\n              class=\"blur-btn\"\n              :class=\"{ 'electron-only': !isElectron }\"\n              @mouseenter=\"showTooltip('blur')\"\n              @mouseleave=\"activeTooltip = null\"\n              @click=\"toggleBlur\"\n            >\n              <span class=\"material-icons\">blur_on</span>\n            </button>\n            <div v-show=\"activeTooltip === 'blur'\" class=\"custom-tooltip\">\n              {{ isElectron ? 'Блюр' : 'Блюр, функция доступна в приложении' }}\n            </div>\n          </div>\n\n          <div class=\"tooltip-container\">\n            <button\n              class=\"material-symbols-outlined\"\n              :class=\"{ 'electron-only': !isElectron }\"\n              @mouseenter=\"showTooltip('compressor')\"\n              @mouseleave=\"activeTooltip = null\"\n              @click=\"toggleCompressor\"\n            >\n              <span class=\"material-icons\">graphic_eq</span>\n            </button>\n            <div v-show=\"activeTooltip === 'compressor'\" class=\"custom-tooltip\">\n              {{ isElectron ? 'Компрессор' : 'Компрессор, функция доступна в приложении' }}\n            </div>\n          </div>\n\n          <div class=\"tooltip-container\">\n            <button\n              class=\"mirror-btn\"\n              :class=\"{ 'electron-only': !isElectron }\"\n              @mouseenter=\"showTooltip('mirror')\"\n              @mouseleave=\"activeTooltip = null\"\n              @click=\"toggleMirror\"\n            >\n              <span class=\"material-icons\">flip</span>\n            </button>\n            <div v-show=\"activeTooltip === 'mirror'\" class=\"custom-tooltip\">\n              {{ isElectron ? 'Зеркало' : 'Зеркало, функция доступна в приложении' }}\n            </div>\n          </div>\n\n          <div class=\"tooltip-container\">\n            <button\n              class=\"theater-mode-btn\"\n              @mouseenter=\"showTooltip('theater')\"\n              @mouseleave=\"activeTooltip = null\"\n              @click=\"toggleTheaterMode\"\n            >\n              <span class=\"material-symbols-outlined\">{{\n                theaterMode ? 'fullscreen_exit' : 'aspect_ratio'\n              }}</span>\n            </button>\n            <div v-show=\"activeTooltip === 'theater'\" class=\"custom-tooltip\">\n              {{ theaterMode ? 'Выйти из театрального режима' : 'Театральный режим' }}\n              <span class=\"shortcut-hint\">Alt+T</span>\n            </div>\n          </div>\n\n          <div class=\"tooltip-container\">\n            <button\n              class=\"aspect-ratio-dropdown-btn\"\n              @mouseenter=\"showTooltip('aspect_ratio')\"\n              @mouseleave=\"tryHideTooltip\"\n              @click=\"cycleAspectRatio\"\n            >\n              <span class=\"current-ratio\">{{ aspectRatio }}</span>\n            </button>\n            <div\n              v-show=\"activeTooltip === 'aspect_ratio'\"\n              class=\"custom-tooltip advanced-tooltip aspect-ratio-dropdown\"\n              @mouseenter=\"keepTooltipVisible\"\n              @mouseleave=\"hideTooltip\"\n            >\n              <div\n                v-for=\"ratio in aspectRatios\"\n                :key=\"ratio\"\n                class=\"aspect-ratio-option\"\n                :class=\"{ active: aspectRatio === ratio }\"\n                @click=\"setAspectRatio(ratio)\"\n              >\n                {{ ratio }}\n              </div>\n            </div>\n          </div>\n\n          <!-- Кнопка центрирования с SliderRound в подсказке -->\n          <div\n            class=\"tooltip-container\"\n            @mouseenter=\"showTooltip('centering')\"\n            @mouseleave=\"tryHideTooltip\"\n          >\n            <button class=\"center-btn\" @click=\"centerPlayer\">\n              <span class=\"material-icons\">center_focus_strong</span>\n            </button>\n            <div\n              v-show=\"activeTooltip === 'centering'\"\n              class=\"custom-tooltip advanced-tooltip\"\n              @mouseenter=\"keepTooltipVisible\"\n              @mouseleave=\"hideTooltip\"\n            >\n              Отцентрировать плеер\n              <SliderRound v-model=\"isCentered\" title=\"Автоцентрирование плеера\" />\n              <span class=\"tooltip-title\">Автоцентрирование плеера</span>\n            </div>\n          </div>\n\n          <!-- Кнопка для открытия в приложении -->\n          <div v-if=\"!isElectron\" class=\"tooltip-container\">\n            <button\n              class=\"app-link-btn\"\n              @mouseenter=\"showTooltip('app_link')\"\n              @mouseleave=\"activeTooltip = null\"\n              @click=\"openAppLink\"\n            >\n              <span class=\"material-icons\">open_in_new</span>\n            </button>\n            <div v-show=\"activeTooltip === 'app_link'\" class=\"custom-tooltip\">\n              Открыть в приложении\n            </div>\n          </div>\n\n          <!-- Кнопка для копирования ссылки на фильм (только в Electron) -->\n          <div v-if=\"isElectron\" class=\"tooltip-container\">\n            <button\n              class=\"copy-link-btn\"\n              @mouseenter=\"showTooltip('copy_link')\"\n              @mouseleave=\"activeTooltip = null\"\n              @click=\"copyMovieLink\"\n            >\n              <span class=\"material-icons\">content_copy</span>\n            </button>\n            <div v-show=\"activeTooltip === 'copy_link'\" class=\"custom-tooltip\">\n              Скопировать ссылку\n            </div>\n          </div>\n        </template>\n      </div>\n\n      <div v-if=\"!isMobile && !showFavoriteTooltip\" class=\"desktop-list-buttons\">\n        <div class=\"tooltip-container\">\n          <button\n            class=\"favorite-btn\"\n            :class=\"{ active: movieInfo?.lists?.isFavorite }\"\n            @mouseenter=\"showTooltip('favorite')\"\n            @mouseleave=\"activeTooltip = null\"\n            @click=\"toggleList(USER_LIST_TYPES_ENUM.FAVORITE)\"\n          >\n            <span class=\"material-icons\">{{\n              movieInfo?.lists?.isFavorite ? 'favorite' : 'favorite_border'\n            }}</span>\n          </button>\n          <div v-show=\"activeTooltip === 'favorite'\" class=\"custom-tooltip\">\n            {{ 'В избранное' }}\n          </div>\n        </div>\n\n        <div class=\"tooltip-container\">\n          <button\n            class=\"watching-btn\"\n            :class=\"{ active: movieInfo?.lists?.isWatching }\"\n            @mouseenter=\"showTooltip('watching')\"\n            @mouseleave=\"activeTooltip = null\"\n            @click=\"toggleList(USER_LIST_TYPES_ENUM.WATCHING)\"\n          >\n            <span class=\"material-icons\">{{\n              movieInfo?.lists?.isWatching ? 'visibility_off' : 'visibility'\n            }}</span>\n          </button>\n          <div v-show=\"activeTooltip === 'watching'\" class=\"custom-tooltip\">\n            {{ 'Смотрю' }}\n          </div>\n        </div>\n\n        <div class=\"tooltip-container\">\n          <button\n            class=\"later-btn\"\n            :class=\"{ active: movieInfo?.lists?.isLater }\"\n            @mouseenter=\"showTooltip('later')\"\n            @mouseleave=\"activeTooltip = null\"\n            @click=\"toggleList(USER_LIST_TYPES_ENUM.LATER)\"\n          >\n            <span class=\"material-icons\">watch_later</span>\n          </button>\n          <div v-show=\"activeTooltip === 'later'\" class=\"custom-tooltip\">\n            {{ 'Смотреть позже' }}\n          </div>\n        </div>\n\n        <div class=\"tooltip-container\">\n          <button\n            class=\"completed-btn\"\n            :class=\"{ active: movieInfo?.lists?.isCompleted }\"\n            @mouseenter=\"showTooltip('completed')\"\n            @mouseleave=\"activeTooltip = null\"\n            @click=\"toggleList(USER_LIST_TYPES_ENUM.COMPLETED)\"\n          >\n            <span class=\"material-icons\">{{\n              movieInfo?.lists?.isCompleted ? 'check_circle' : 'check_circle_outline'\n            }}</span>\n          </button>\n          <div v-show=\"activeTooltip === 'completed'\" class=\"custom-tooltip\">\n            {{ 'Просмотрено' }}\n          </div>\n        </div>\n\n        <div class=\"tooltip-container\">\n          <button\n            class=\"abandoned-btn\"\n            :class=\"{ active: movieInfo?.lists?.isAbandoned }\"\n            @mouseenter=\"showTooltip('abandoned')\"\n            @mouseleave=\"activeTooltip = null\"\n            @click=\"toggleList(USER_LIST_TYPES_ENUM.ABANDONED)\"\n          >\n            <span class=\"material-icons\">{{\n              movieInfo?.lists?.isAbandoned ? 'not_interested' : 'not_interested'\n            }}</span>\n          </button>\n          <div v-show=\"activeTooltip === 'abandoned'\" class=\"custom-tooltip\">\n            {{ 'Брошено' }}\n          </div>\n        </div>\n      </div>\n\n      <div v-else-if=\"isMobile\" class=\"mobile-list-buttons\">\n        <div class=\"tooltip-container\">\n          <button\n            class=\"favorite-btn\"\n            :class=\"{ active: movieInfo?.lists?.isFavorite }\"\n            @mouseenter=\"showTooltip('favorite')\"\n            @mouseleave=\"activeTooltip = null\"\n            @click=\"toggleList(USER_LIST_TYPES_ENUM.FAVORITE)\"\n          >\n            <span class=\"material-icons\">{{\n              movieInfo?.lists?.isFavorite ? 'favorite' : 'favorite_border'\n            }}</span>\n          </button>\n          <div v-show=\"activeTooltip === 'favorite'\" class=\"custom-tooltip\">\n            {{ 'В избранное' }}\n          </div>\n        </div>\n\n        <div class=\"tooltip-container\">\n          <button\n            class=\"watching-btn\"\n            :class=\"{ active: movieInfo?.lists?.isWatching }\"\n            @mouseenter=\"showTooltip('watching')\"\n            @mouseleave=\"activeTooltip = null\"\n            @click=\"toggleList(USER_LIST_TYPES_ENUM.WATCHING)\"\n          >\n            <span class=\"material-icons\">{{\n              movieInfo?.lists?.isWatching ? 'visibility_off' : 'visibility'\n            }}</span>\n          </button>\n          <div v-show=\"activeTooltip === 'watching'\" class=\"custom-tooltip\">\n            {{ 'Смотрю' }}\n          </div>\n        </div>\n\n        <div class=\"tooltip-container\">\n          <button\n            class=\"later-btn\"\n            :class=\"{ active: movieInfo?.lists?.isLater }\"\n            @mouseenter=\"showTooltip('later')\"\n            @mouseleave=\"activeTooltip = null\"\n            @click=\"toggleList(USER_LIST_TYPES_ENUM.LATER)\"\n          >\n            <span class=\"material-icons\">watch_later</span>\n          </button>\n          <div v-show=\"activeTooltip === 'later'\" class=\"custom-tooltip\">\n            {{ 'Смотреть позже' }}\n          </div>\n        </div>\n\n        <div class=\"tooltip-container\">\n          <button\n            class=\"completed-btn\"\n            :class=\"{ active: movieInfo?.lists?.isCompleted }\"\n            @mouseenter=\"showTooltip('completed')\"\n            @mouseleave=\"activeTooltip = null\"\n            @click=\"toggleList(USER_LIST_TYPES_ENUM.COMPLETED)\"\n          >\n            <span class=\"material-icons\">{{\n              movieInfo?.lists?.isCompleted ? 'check_circle' : 'check_circle_outline'\n            }}</span>\n          </button>\n          <div v-show=\"activeTooltip === 'completed'\" class=\"custom-tooltip\">\n            {{ 'Просмотрено' }}\n          </div>\n        </div>\n\n        <div class=\"tooltip-container\">\n          <button\n            class=\"abandoned-btn\"\n            :class=\"{ active: movieInfo?.lists?.isAbandoned }\"\n            @mouseenter=\"showTooltip('abandoned')\"\n            @mouseleave=\"activeTooltip = null\"\n            @click=\"toggleList(USER_LIST_TYPES_ENUM.ABANDONED)\"\n          >\n            <span class=\"material-icons\">{{\n              movieInfo?.lists?.isAbandoned ? 'not_interested' : 'not_interested'\n            }}</span>\n          </button>\n          <div v-show=\"activeTooltip === 'abandoned'\" class=\"custom-tooltip\">\n            {{ 'Брошено' }}\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <Notification ref=\"notificationRef\" />\n  </template>\n</template>\n\n<script setup>\nimport { getPlayers } from '@/api/movies'\nimport { handleApiError } from '@/constants'\nimport { addToList, delFromList } from '@/api/user'\nimport ErrorMessage from '@/components/ErrorMessage.vue'\nimport SpinnerLoading from '@/components/SpinnerLoading.vue'\nimport Notification from '@/components/notification/ToastMessage.vue'\nimport SliderRound from '@/components/slider/SliderRound.vue'\nimport { showMessageToast } from '@/helpers/ui'\nimport { useMainStore } from '@/store/main'\nimport { usePlayerStore } from '@/store/player'\nimport { useAuthStore } from '@/store/auth'\nimport { USER_LIST_TYPES_ENUM } from '@/constants'\nimport { computed, nextTick, onBeforeUnmount, onMounted, ref, watch } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport PlayerModal from '@/components/PlayerModal.vue'\n\nconst mainStore = useMainStore()\nconst playerStore = usePlayerStore()\nconst authStore = useAuthStore()\nconst route = useRoute()\nconst router = useRouter()\nconst kp_id = ref(route.params.kp_id)\n\nconst props = defineProps({\n  kpId: String,\n  movieInfo: {\n    type: Object,\n    default: () => ({})\n  }\n})\nconst emit = defineEmits(['update:selectedPlayer', 'update:movieInfo'])\n\nconst playersInternal = ref([])\nconst selectedPlayerInternal = ref(null)\nconst iframeLoading = ref(true)\nconst theaterMode = ref(false)\nconst closeButtonVisible = ref(false)\nconst playerIframe = ref(null)\nconst containerRef = ref(null)\nconst showPlayerModal = ref(false)\n\n// Переменные для ошибок\nconst errorMessage = ref('')\nconst errorCode = ref(null)\n\nconst maxPlayerHeightValue = ref(window.innerHeight * 0.9)\nconst maxPlayerHeight = computed(() => `${maxPlayerHeightValue.value}px`)\nconst isMobile = computed(() => mainStore.isMobile)\nconst isElectron = computed(() => !!window.electronAPI)\n\nconst activeTooltip = ref(null)\nconst tooltipHovered = ref(false)\nlet hideTimeout = null\n\nconst notificationRef = ref(null)\n\nconst tooltipContainer = ref(null)\nconst tooltip = ref(null)\n\nconst updateTooltipPosition = () => {\n  if (!tooltipContainer.value || !tooltip.value) return\n\n  const containerRect = tooltipContainer.value.getBoundingClientRect()\n  const tooltipRect = tooltip.value.getBoundingClientRect()\n  const viewportHeight = window.innerHeight\n\n  if (containerRect.bottom + tooltipRect.height > viewportHeight) {\n    tooltip.value.style.top = 'auto'\n    tooltip.value.style.bottom = '100%'\n    tooltip.value.style.marginTop = '0'\n    tooltip.value.style.marginBottom = '12px'\n    tooltip.value.style.transform = 'translateX(-50%)'\n  } else {\n    tooltip.value.style.top = '100%'\n    tooltip.value.style.bottom = 'auto'\n    tooltip.value.style.marginTop = '12px'\n    tooltip.value.style.marginBottom = '0'\n    tooltip.value.style.transform = 'translateX(-50%)'\n  }\n}\n\nconst showTooltip = (tooltipName) => {\n  activeTooltip.value = tooltipName\n  tooltipHovered.value = false\n  clearTimeout(hideTimeout)\n  nextTick(() => {\n    updateTooltipPosition()\n  })\n}\n\nconst tryHideTooltip = () => {\n  if (!tooltipHovered.value) {\n    hideTimeout = setTimeout(() => {\n      activeTooltip.value = null\n    }, 300)\n  }\n}\n\nconst keepTooltipVisible = () => {\n  tooltipHovered.value = true\n  clearTimeout(hideTimeout)\n}\n\nconst hideTooltip = () => {\n  tooltipHovered.value = false\n  activeTooltip.value = null\n}\n\nconst aspectRatio = computed({\n  get: () => playerStore.aspectRatio,\n  set: (value) => playerStore.updateAspectRatio(value)\n})\n\nconst isCentered = computed({\n  get: () => playerStore.isCentered,\n  set: (value) => playerStore.updateCentering(value)\n})\n\nconst isInAnyList = computed(() => {\n  return (\n    props.movieInfo?.lists?.isFavorite ||\n    props.movieInfo?.lists?.isWatching ||\n    props.movieInfo?.lists?.isLater ||\n    props.movieInfo?.lists?.isCompleted ||\n    props.movieInfo?.lists?.isAbandoned\n  )\n})\n\nconst preferredPlayer = computed(() => playerStore.preferredPlayer)\nconst naturalHeight = ref(0)\n\nconst normalizeKey = (key) => key.toUpperCase()\n\nconst updateScaleFactor = () => {\n  if (theaterMode.value || !containerRef.value) return\n  const [w, h] = aspectRatio.value.split(':').map(Number)\n  maxPlayerHeightValue.value = window.innerHeight * 0.9\n  naturalHeight.value = Math.min(\n    containerRef.value.clientWidth * (h / w),\n    maxPlayerHeightValue.value\n  )\n}\n\nconst containerStyle = computed(() => {\n  if (theaterMode.value) return {}\n  const [w, h] = aspectRatio.value.split(':').map(Number)\n  const maxWidth = maxPlayerHeightValue.value * (w / h)\n  return {\n    width: '100%',\n    maxWidth: `${maxWidth}px`,\n    maxHeight: maxPlayerHeight.value,\n    margin: '0 auto',\n    overflow: 'hidden'\n  }\n})\n\nconst iframeWrapperStyle = computed(() => {\n  const [w, h] = aspectRatio.value.split(':').map(Number)\n  return {\n    position: 'relative',\n    width: '100%',\n    paddingTop: `${(h / w) * 100}%`\n  }\n})\n\nconst centerPlayer = () => {\n  if (containerRef.value) {\n    setTimeout(() => {\n      nextTick(() => {\n        containerRef.value.scrollIntoView({\n          behavior: 'smooth',\n          block: 'center',\n          inline: 'center'\n        })\n      })\n    }, 500)\n  }\n}\n\nconst fetchPlayers = async () => {\n  try {\n    errorMessage.value = ''\n    errorCode.value = null\n    const players = await getPlayers(props.kpId)\n    playersInternal.value = Object.entries(players).map(([key, value]) => ({\n      key: key.toUpperCase(),\n      ...value\n    }))\n    if (playersInternal.value.length > 0) {\n      if (preferredPlayer.value) {\n        const normalizedPreferred = normalizeKey(preferredPlayer.value)\n        const preferred = playersInternal.value.find(\n          (player) => normalizeKey(player.key) === normalizedPreferred\n        )\n        selectedPlayerInternal.value = preferred || playersInternal.value[0]\n      } else {\n        selectedPlayerInternal.value = playersInternal.value[0]\n      }\n      emit('update:selectedPlayer', selectedPlayerInternal.value)\n    }\n  } catch (error) {\n    const { message, code } = handleApiError(error)\n    errorMessage.value = message\n    errorCode.value = code\n    console.error('Ошибка при загрузке плееров:', error)\n  }\n}\n\nconst openPlayerModal = () => {\n  showPlayerModal.value = true\n}\n\nconst closePlayerModal = () => {\n  showPlayerModal.value = false\n}\n\nconst handlePlayerSelect = (player) => {\n  if (selectedPlayerInternal.value?.key === player.key) {\n    closePlayerModal()\n    return\n  }\n\n  selectedPlayerInternal.value = player\n  iframeLoading.value = true\n  playerStore.updatePreferredPlayer(normalizeKey(player.key))\n  emit('update:selectedPlayer', player)\n}\n\nconst toggleBlur = () => {\n  if (isElectron.value) {\n    window.electronAPI.sendHotKey('F2')\n  } else {\n    showMessageToast('Доступно только в приложении ReYohoho Desktop')\n    window.open('https://t.me/ReYohoho/126', '_blank')\n  }\n}\n\nconst toggleCompressor = () => {\n  if (isElectron.value) {\n    window.electronAPI.sendHotKey('F3')\n  } else {\n    showMessageToast('Доступно только в приложении ReYohoho Desktop')\n    window.open('https://t.me/ReYohoho/126', '_blank')\n  }\n}\n\nconst toggleMirror = () => {\n  if (isElectron.value) {\n    window.electronAPI.sendHotKey('F4')\n  } else {\n    showMessageToast('Доступно только в приложении ReYohoho Desktop')\n    window.open('https://t.me/ReYohoho/126', '_blank')\n  }\n}\n\nconst toggleTheaterMode = () => {\n  theaterMode.value = !theaterMode.value\n  if (theaterMode.value) {\n    window.addEventListener('mousemove', showCloseButton)\n    document.addEventListener('keydown', onKeyDown)\n    document.body.classList.add('no-scroll')\n  } else {\n    window.removeEventListener('mousemove', showCloseButton)\n    document.removeEventListener('keydown', onKeyDown)\n    document.body.classList.remove('no-scroll')\n  }\n  closeButtonVisible.value = theaterMode.value\n  nextTick(() => centerPlayer())\n}\n\nconst theaterModeCloseButtonTimeout = ref(null)\nconst showCloseButton = () => {\n  theaterModeCloseButtonTimeout.value = setTimeout(() => {\n    clearTimeout(theaterModeCloseButtonTimeout.value)\n    closeButtonVisible.value = false\n  }, 4000)\n  closeButtonVisible.value = true\n}\n\nconst dimmingEnabled = computed(() => mainStore.dimmingEnabled)\nconst toggleDimming = () => {\n  if (!theaterMode.value) {\n    mainStore.toggleDimming()\n  }\n}\n\nconst onKeyDown = (event) => {\n  if (event.key === 'Escape' && theaterMode.value) {\n    toggleTheaterMode()\n  } else if (event.altKey && event.keyCode === 84) {\n    toggleTheaterMode()\n  }\n}\n\nconst setAspectRatio = (ratio) => {\n  aspectRatio.value = ratio\n  setTimeout(() => {\n    if (isCentered.value) centerPlayer()\n  }, 310)\n}\n\nconst openAppLink = () => {\n  const appUrl = `reyohoho://#${kp_id.value}`\n  try {\n    window.location.href = appUrl\n  } catch (e) {\n    console.error('Ошибка при открытии ссылки:', e)\n  }\n}\n\nconst copyMovieLink = () => {\n  const movieLink = window.location.href\n  navigator.clipboard.writeText(movieLink).then(() => {})\n  notificationRef.value.showNotification('Ссылка на фильм скопирована')\n}\n\nconst onIframeLoad = () => {\n  iframeLoading.value = false\n}\n\nfunction cleanName(name) {\n  const cleanedName = name\n    .replace(/^REYOHOHO_PLAYER>HDREZKA>/, 'HDRezka - ')\n    .replace(/KODIK>/, 'Kodik - ')\n    .trim()\n  return cleanedName\n}\n\nwatch(selectedPlayerInternal, (newVal) => {\n  if (newVal) {\n    iframeLoading.value = true\n    playerStore.updatePreferredPlayer(normalizeKey(newVal.key))\n    emit('update:selectedPlayer', newVal)\n  }\n})\n\nwatch(\n  () => route.params.kp_id,\n  async (newKpId) => {\n    if (newKpId && newKpId !== kp_id.value) {\n      kp_id.value = newKpId\n      if (isCentered.value) centerPlayer()\n    }\n  },\n  { immediate: true }\n)\n\nconst aspectRatios = ['16:9', '12:5', '4:3']\n\nconst cycleAspectRatio = () => {\n  const currentIndex = aspectRatios.indexOf(aspectRatio.value)\n  const nextIndex = (currentIndex + 1) % aspectRatios.length\n  setAspectRatio(aspectRatios[nextIndex])\n}\n\nconst getListStatus = (listType) => {\n  const statusMap = {\n    [USER_LIST_TYPES_ENUM.FAVORITE]: props.movieInfo?.lists?.isFavorite || false,\n    [USER_LIST_TYPES_ENUM.HISTORY]: props.movieInfo?.lists?.isHistory || false,\n    [USER_LIST_TYPES_ENUM.LATER]: props.movieInfo?.lists?.isLater || false,\n    [USER_LIST_TYPES_ENUM.COMPLETED]: props.movieInfo?.lists?.isCompleted || false,\n    [USER_LIST_TYPES_ENUM.ABANDONED]: props.movieInfo?.lists?.isAbandoned || false,\n    [USER_LIST_TYPES_ENUM.WATCHING]: props.movieInfo?.lists?.isWatching || false\n  }\n\n  return statusMap[listType] ?? false\n}\n\nconst toggleList = async (type) => {\n  if (!authStore.token) {\n    notificationRef.value.showNotification(\n      'Необходимо <a class=\"auth-link\">авторизоваться</a>',\n      5000,\n      { onClick: openLogin }\n    )\n    return\n  }\n  let hasError = false\n  try {\n    const listNames = {\n      [USER_LIST_TYPES_ENUM.FAVORITE]: 'избранное',\n      [USER_LIST_TYPES_ENUM.HISTORY]: 'историю',\n      [USER_LIST_TYPES_ENUM.LATER]: 'список \"Смотреть позже\"',\n      [USER_LIST_TYPES_ENUM.COMPLETED]: 'список \"Просмотрено\"',\n      [USER_LIST_TYPES_ENUM.ABANDONED]: 'список \"Брошено\"',\n      [USER_LIST_TYPES_ENUM.WATCHING]: 'список \"Смотрю\"'\n    }\n\n    if (getListStatus(type)) {\n      await delFromList(kp_id.value, type)\n      notificationRef.value.showNotification(`Удалено из ${listNames[type]}`)\n    } else {\n      await addToList(kp_id.value, type)\n      notificationRef.value.showNotification(`Добавлено в ${listNames[type]}`)\n    }\n  } catch (error) {\n    const { message, code } = handleApiError(error)\n    notificationRef.value.showNotification(`${message} ${code}`)\n  }\n  if (!hasError) {\n    emit('update:movieInfo')\n  }\n}\n\nconst openLogin = () => {\n  router.push('/login')\n}\n\nconst showFavoriteTooltip = computed(() => playerStore.showFavoriteTooltip)\n\nconst openSettings = () => {\n  router.push('/settings')\n  hideTooltip()\n}\n\nonMounted(() => {\n  iframeLoading.value = true\n  fetchPlayers()\n  if (isMobile.value) aspectRatio.value = '4:3'\n  updateScaleFactor()\n  window.addEventListener('resize', updateScaleFactor)\n  window.addEventListener('resize', updateTooltipPosition)\n  if (isCentered.value) centerPlayer()\n})\n\nonBeforeUnmount(() => {\n  window.removeEventListener('resize', updateScaleFactor)\n  window.removeEventListener('resize', updateTooltipPosition)\n  window.removeEventListener('mousemove', showCloseButton)\n  document.removeEventListener('keydown', onKeyDown)\n  document.body.classList.remove('no-scroll')\n})\n</script>\n\n<style scoped>\n.players-list {\n  width: 100%;\n  max-width: 800px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n  margin: auto;\n  margin-bottom: 10px;\n}\n\n/* Стили для кнопки выбора плеера */\n.player-btn {\n  display: flex;\n  align-items: center;\n  justify-content: left;\n  background: #3a3a3a;\n  color: #fff;\n  border: 2px solid #505050;\n  border-radius: 5px;\n  padding: 10px;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  width: 100%;\n  max-width: 800px;\n  text-align: left;\n  font-size: 16px;\n}\n\n.player-btn:hover {\n  background: #505050;\n  border-color: #17850b;\n}\n\n.player-btn:active {\n  background: #17850b;\n  border-color: #17850b;\n}\n\n.player-btn:focus {\n  outline: none;\n  box-shadow: 0 0 5px #17850b;\n}\n\n.player-container {\n  width: 100%;\n  transition:\n    max-width 0.3s ease-in-out,\n    max-height 0.3s ease-in-out;\n  overflow: hidden;\n  padding-bottom: 10px;\n}\n\n.iframe-wrapper {\n  transition:\n    padding-top 0.3s ease-in-out,\n    transform 0.3s ease-in-out;\n  width: 100%;\n}\n\n.responsive-iframe {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  border: none;\n  z-index: 4;\n}\n\n.responsive-iframe.dimmed {\n  z-index: 7;\n}\n\n/* Стили для театрального режима */\n.player-container.theater-mode {\n  position: fixed;\n  top: 0 !important;\n  left: 0 !important;\n  width: 100vw !important;\n  height: 100vh !important;\n  background: #000;\n  margin: 0;\n  border-radius: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 7;\n}\n\n.player-container.theater-mode .iframe-wrapper {\n  width: 100% !important;\n  height: 100% !important;\n  padding-top: 0 !important;\n  flex-grow: 1;\n}\n\n.close-theater-btn {\n  position: fixed;\n  top: 20px;\n  right: 80px;\n  background: rgba(255, 0, 0, 0.7);\n  color: white;\n  border: none;\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  cursor: pointer;\n  transition:\n    background 0.3s,\n    opacity 0.3s;\n  opacity: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 24px;\n  z-index: 8;\n}\n\n.close-theater-btn.visible {\n  opacity: 1;\n}\n\n/* Делаем кнопку видимой при наведении на зону */\n.close-theater-btn:hover,\n.close-theater-btn::before:hover {\n  background: rgba(255, 0, 0, 1);\n  opacity: 1;\n}\n\nhtml.no-scroll {\n  overflow: hidden;\n}\n\n/* Блока управления */\n.controls {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n  margin: 0 auto;\n  border-radius: 10px;\n  backdrop-filter: blur(10px);\n  position: relative;\n  z-index: 4;\n}\n\n.main-controls {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  gap: 10px;\n}\n\n.controls button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #444;\n  color: #fff;\n  border: none;\n  padding: 12px;\n  font-size: 18px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition:\n    background-color 0.3s ease,\n    transform 0.2s ease,\n    box-shadow 0.3s ease;\n  z-index: 4;\n  width: 50px;\n  height: 50px;\n}\n\n.controls button:hover {\n  background-color: #555;\n  transform: translateY(-3px);\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);\n}\n\n.controls button:active {\n  transform: translateY(0);\n  box-shadow: none;\n}\n\n.controls button.active {\n  background-color: #4caf50;\n  box-shadow: 0 0 10px rgba(76, 175, 80, 0.7);\n}\n\n.material-icons {\n  font-size: 24px;\n}\n\n.tooltip-container {\n  position: relative;\n  display: inline-block;\n}\n\n.custom-tooltip {\n  position: absolute;\n  left: 50%;\n  background-color: rgba(30, 30, 30, 0.95);\n  color: #fff;\n  padding: 8px 16px;\n  border-radius: 12px;\n  font-size: 14px;\n  white-space: nowrap;\n  pointer-events: none;\n  text-align: center;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25);\n  backdrop-filter: blur(12px);\n  border: 1px solid rgba(255, 255, 255, 0.08);\n  opacity: 0;\n  visibility: hidden;\n  transform: translateX(-50%) translateY(8px);\n  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n  z-index: 1000;\n  top: calc(100% + 12px);\n}\n\n.custom-tooltip[style*='bottom: 100%'] {\n  bottom: calc(100% + 12px);\n  top: auto;\n}\n\n.custom-tooltip::before {\n  content: '';\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%) rotate(45deg);\n  width: 10px;\n  height: 10px;\n  background-color: rgba(30, 30, 30, 0.95);\n  border: 1px solid rgba(255, 255, 255, 0.08);\n  z-index: -1;\n}\n\n.custom-tooltip[style*='bottom: 100%']::before {\n  bottom: -5px;\n  top: auto;\n}\n\n.custom-tooltip[style*='top: 100%']::before {\n  top: -5px;\n  bottom: auto;\n}\n\n.tooltip-container:hover .custom-tooltip {\n  opacity: 1;\n  visibility: visible;\n  transform: translateX(-50%) translateY(0);\n}\n\n.advanced-tooltip {\n  white-space: normal;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 16px;\n  top: calc(100% + 12px);\n  pointer-events: all;\n  text-align: center;\n  min-width: 240px;\n  background-color: rgba(30, 30, 30, 0.98);\n  border-radius: 16px;\n  box-shadow: 0 8px 40px rgba(0, 0, 0, 0.35);\n  transform: translateX(-50%) translateY(8px);\n}\n\n.advanced-tooltip::before {\n  top: -6px;\n  width: 12px;\n  height: 12px;\n}\n\n.tooltip-title {\n  font-size: 15px;\n  font-weight: 500;\n  color: rgba(255, 255, 255, 0.95);\n  margin-top: 4px;\n}\n\n.aspect-ratio-dropdown {\n  min-width: fit-content;\n  width: max-content;\n  padding: 16px;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  background-color: rgba(30, 30, 30, 0.98);\n  border-radius: 16px;\n}\n\n.aspect-ratio-option {\n  padding: 12px 20px;\n  border-radius: 10px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  text-align: center;\n  font-size: 14px;\n  color: rgba(255, 255, 255, 0.9);\n  white-space: nowrap;\n  width: 100%;\n}\n\n.aspect-ratio-option:hover {\n  background-color: rgba(255, 255, 255, 0.12);\n  transform: translateY(-1px);\n}\n\n.aspect-ratio-option.active {\n  background-color: rgba(76, 175, 80, 0.9);\n  color: white;\n  font-weight: 500;\n  box-shadow: 0 2px 12px rgba(76, 175, 80, 0.3);\n}\n\n.fullscreen {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  z-index: 10;\n}\n\n.theater-mode-lock {\n  pointer-events: none;\n}\n\n.theater-mode-unlock {\n  pointer-events: all;\n}\n\n.aspect-ratio-dropdown-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0 12px;\n  min-width: 60px;\n}\n\n.current-ratio {\n  font-size: 14px;\n  font-weight: 500;\n}\n\n.list-buttons-container {\n  position: relative;\n}\n\n.list-buttons-dropdown {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  padding: 16px;\n  min-width: 240px;\n  background-color: rgba(30, 30, 30, 0.98);\n  border-radius: 16px;\n  box-shadow: 0 8px 40px rgba(0, 0, 0, 0.35);\n}\n\n.list-button-item {\n  width: 100%;\n}\n\n.list-button-item button {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px 20px;\n  background-color: rgba(255, 255, 255, 0.08);\n  border: none;\n  border-radius: 10px;\n  color: rgba(255, 255, 255, 0.9);\n  cursor: pointer;\n  transition: all 0.2s ease;\n  min-height: 48px;\n}\n\n.list-button-item button:hover {\n  background-color: rgba(255, 255, 255, 0.15);\n  transform: translateX(4px);\n}\n\n.list-button-item button.active {\n  background-color: rgba(76, 175, 80, 0.9);\n  color: white;\n  box-shadow: 0 2px 12px rgba(76, 175, 80, 0.3);\n}\n\n.button-label {\n  font-size: 15px;\n  font-weight: 500;\n  flex: 1;\n}\n\n.list-button-item .material-icons {\n  font-size: 20px;\n  width: 24px;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.mobile-list-buttons {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  gap: 10px;\n  margin: 0 auto;\n  border-radius: 10px;\n  backdrop-filter: blur(10px);\n}\n\n@media (max-width: 768px) {\n  .mobile-list-buttons {\n    margin-top: 10px;\n  }\n}\n\n.shortcut-hint {\n  display: block;\n  font-size: 13px;\n  color: rgba(255, 255, 255, 0.5);\n  margin-top: 6px;\n  font-weight: 400;\n}\n\n.electron-only {\n  background-color: #333 !important;\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.electron-only:hover {\n  transform: none !important;\n  box-shadow: none !important;\n}\n\n.custom-tooltip:has(+ .electron-only) {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n.favorite-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #444;\n  color: #fff;\n  border: none;\n  padding: 12px;\n  font-size: 18px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition:\n    background-color 0.3s ease,\n    transform 0.2s ease,\n    box-shadow 0.3s ease;\n  z-index: 4;\n  width: 50px;\n  height: 50px;\n  position: relative;\n}\n\n.dropdown-arrow {\n  position: absolute;\n  right: 2px;\n  bottom: 2px;\n  font-size: 16px;\n  opacity: 0.7;\n  pointer-events: none;\n  transition: all 0.3s ease;\n}\n\n.dropdown-arrow.highlighted {\n  opacity: 1;\n  color: #4caf50;\n  text-shadow: 0 0 8px rgba(76, 175, 80, 0.5);\n}\n\n.desktop-list-buttons {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  gap: 5px;\n  margin: 0 auto;\n  border-radius: 10px;\n  backdrop-filter: blur(10px);\n}\n\n.desktop-list-buttons .tooltip-container {\n  margin: 0;\n}\n\n.desktop-list-buttons button {\n  margin: 0;\n}\n\n.tooltip-hint {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 12px;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 8px;\n  margin-top: 8px;\n  font-size: 13px;\n  color: rgba(255, 255, 255, 0.7);\n}\n\n.tooltip-hint .material-icons {\n  font-size: 16px;\n  color: rgba(255, 255, 255, 0.5);\n}\n\n.settings-link {\n  color: #4caf50;\n  cursor: pointer;\n  text-decoration: underline;\n  transition: color 0.2s ease;\n}\n\n.settings-link:hover {\n  color: #66bb6a;\n}\n\n.auth-link {\n  color: #4caf50;\n  cursor: pointer;\n  text-decoration: underline;\n  transition: color 0.2s ease;\n}\n\n.auth-link:hover {\n  color: #66bb6a;\n}\n</style>\n","<template>\n  <div v-if=\"availableVideos.length\" class=\"carousel-container\">\n    <h2>Трейлеры (YouTube)</h2>\n    <div class=\"carousel-wrapper\">\n      <!-- Кнопка для прокрутки влево -->\n      <button\n        v-show=\"!isMobile && canScrollLeft\"\n        class=\"scroll-button left\"\n        @click=\"scrollCarousel(-1)\"\n      >\n        <span class=\"material-symbols-outlined\">arrow_back_ios</span>\n      </button>\n\n      <!-- Карусель с кастомным скроллом -->\n      <div ref=\"carousel\" class=\"carousel\" @scroll=\"updateScroll\">\n        <div\n          v-for=\"(video, index) in availableVideos\"\n          :key=\"index\"\n          class=\"carousel-item\"\n          @click=\"selectVideo(index)\"\n        >\n          <img :src=\"`https://img.youtube.com/vi/${video.videoId}/0.jpg`\" :alt=\"video.name\" />\n          <div class=\"video-name\">{{ video.name }}</div>\n        </div>\n      </div>\n\n      <!-- Кнопка для прокрутки вправо -->\n      <button\n        v-show=\"!isMobile && canScrollRight\"\n        class=\"scroll-button right\"\n        @click=\"scrollCarousel(1)\"\n      >\n        <span class=\"material-symbols-outlined\">arrow_forward_ios</span>\n      </button>\n    </div>\n    <!-- Встроенный плеер -->\n    <div v-if=\"activeVideoIndex !== null\" class=\"video-player\">\n      <iframe :src=\"videos[activeVideoIndex].iframeUrl\" frameborder=\"0\" allowfullscreen></iframe>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, onBeforeUnmount, watch } from 'vue'\nimport { useMainStore } from '@/store/main'\n\nconst mainStore = useMainStore()\n\nconst isMobile = computed(() => mainStore.isMobile)\n\nconst props = defineProps({\n  videos: {\n    type: Array,\n    required: true\n  },\n  activeVideoIndex: {\n    type: Number,\n    default: null\n  }\n})\n\nconst emit = defineEmits(['select'])\nconst activeVideoIndex = ref(props.activeVideoIndex)\nconst carousel = ref(null)\nconst canScrollLeft = ref(false)\nconst canScrollRight = ref(false)\n\n// Обновление состояния кнопок прокрутки\nconst updateScroll = () => {\n  if (!carousel.value) return\n  const { scrollLeft, scrollWidth, clientWidth } = carousel.value\n  canScrollLeft.value = scrollLeft > 0\n  canScrollRight.value = scrollLeft < scrollWidth - clientWidth - 1\n}\n\n// Прокрутка карусели на ширину одного элемента (с учетом gap)\nconst scrollCarousel = (direction) => {\n  if (!carousel.value) return\n  const firstItem = carousel.value.querySelector('.carousel-item')\n  if (!firstItem) return\n  const itemWidth = firstItem.clientWidth + 16 // gap\n  carousel.value.scrollBy({\n    left: itemWidth * direction,\n    behavior: 'smooth'\n  })\n}\n\n// Выбор видео для отображения во встроенном плеере\nconst selectVideo = (index) => {\n  activeVideoIndex.value = index\n  emit('select', props.videos[index])\n}\n\nconst handleResize = () => updateScroll()\n\nconst availableVideos = ref([])\n\nconst checkVideoAvailability = async (videoId) => {\n  try {\n    const response = await fetch(`https://img.youtube.com/vi/${videoId}/0.jpg`)\n    return response.ok\n  } catch {\n    return false\n  }\n}\n\nonMounted(async () => {\n  const availabilityChecks = props.videos.map(async (video) => {\n    const isAvailable = await checkVideoAvailability(video.videoId)\n    return isAvailable ? video : null\n  })\n\n  const results = await Promise.all(availabilityChecks)\n  availableVideos.value = results.filter(Boolean)\n  updateScroll()\n  window.addEventListener('resize', handleResize)\n})\n\nwatch(\n  () => props.videos,\n  async (newVideos) => {\n    const availabilityChecks = newVideos.map(async (video) => {\n      const isAvailable = await checkVideoAvailability(video.videoId)\n      return isAvailable ? video : null\n    })\n\n    const results = await Promise.all(availabilityChecks)\n    availableVideos.value = results.filter(Boolean)\n  }\n)\n\nwatch(\n  () => props.activeVideoIndex,\n  (newIndex) => {\n    activeVideoIndex.value = newIndex\n  }\n)\n\nonBeforeUnmount(() => {\n  window.removeEventListener('resize', handleResize)\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.carousel-container {\n  margin: 2rem 0;\n  padding: 0;\n}\n\n.carousel-wrapper {\n  position: relative;\n  overflow: hidden;\n}\n\n/* Карусель с кастомным скроллом */\n.carousel {\n  display: flex;\n  gap: 16px;\n  overflow-x: auto;\n  scroll-snap-type: x mandatory;\n  -webkit-overflow-scrolling: touch;\n  padding: 8px 0;\n  user-select: none;\n\n  &::-webkit-scrollbar {\n    width: 5px; /* Ширина вертикального скроллбара */\n    height: 5px; /* Высота горизонтального скроллбара */\n  }\n\n  &::-webkit-scrollbar-track {\n    background: transparent; /* Цвет фона */\n    border-radius: 10px; /* Закругление углов */\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #494949; /* Цвет ползунка */\n    border-radius: 10px; /* Закругление углов */\n    border: 0; /* Отступ вокруг ползунка */\n  }\n\n  &::-webkit-scrollbar-thumb:hover {\n    background: #555; /* Цвет ползунка при наведении */\n  }\n}\n\n/* Кнопки прокрутки скрыты по умолчанию, появляются при наведении */\n.scroll-button {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  width: 50px;\n  border: none;\n  background: rgba(0, 0, 0, 0.5);\n  color: white;\n  cursor: pointer;\n  z-index: 10;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: opacity 0.3s;\n  opacity: 0;\n  pointer-events: none;\n}\n\n.carousel-wrapper:hover .scroll-button {\n  opacity: 1;\n  pointer-events: auto;\n}\n\n.scroll-button:hover {\n  background: rgba(0, 0, 0, 0.7);\n}\n\n.scroll-button.left {\n  left: 0;\n}\n\n.scroll-button.right {\n  right: 0;\n}\n\n/* Стили карточки трейлера */\n.carousel-item {\n  flex: 0 0 auto;\n  scroll-snap-align: start;\n  width: 260px;\n  background: #161616;\n  border-radius: 12px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n  transition: transform 0.2s;\n  cursor: pointer;\n  overflow: hidden;\n}\n\n.carousel-item:hover {\n  transform: scale(1.03);\n}\n\n.carousel-item img {\n  width: 100%;\n  height: auto;\n  aspect-ratio: 16 / 9;\n  object-fit: cover;\n  border-top-left-radius: 12px;\n  border-top-right-radius: 12px;\n}\n\n.video-name {\n  padding: 12px;\n  background: #202020;\n  color: #fff;\n  font-size: 14px;\n  text-align: center;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  border-bottom-left-radius: 12px;\n  border-bottom-right-radius: 12px;\n}\n\n/* Увеличенный плеер */\n.video-player {\n  margin-top: 20px;\n  max-width: 1200px;\n  width: 100%;\n  aspect-ratio: 16 / 9;\n  margin: 20px auto 0;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n.video-player iframe {\n  width: 100%;\n  height: 100%;\n  border: none;\n}\n</style>\n","<template>\n  <div class=\"rating-container\">\n    <div class=\"rating-display\">\n      <a\n        href=\"#\"\n        class=\"rating-link\"\n        @mouseenter=\"isHovered = true\"\n        @mouseleave=\"handleMouseLeave\"\n        @click.prevent=\"toggleTooltip\"\n      >\n        <img src=\"/icons/icon-192x192.png\" alt=\"ReYohoho\" class=\"rating-logo\" />\n        <span class=\"average-rating\">{{ averageRating ? averageRating.toFixed(1) : '—' }}</span>\n      </a>\n      <div\n        v-show=\"isHovered || isTooltipVisible\"\n        class=\"rating-tooltip\"\n        :class=\"{ 'mobile-tooltip': mainStore.isMobile }\"\n        @mouseenter=\"handleMouseEnter\"\n        @mouseleave=\"handleMouseLeave\"\n      >\n        <div class=\"rating-numbers\">\n          <button\n            v-for=\"num in 10\"\n            :key=\"num\"\n            class=\"number-btn\"\n            :class=\"{\n              active: num === userRating,\n              hover: num === hoverRating\n            }\"\n            @click=\"setRating(num)\"\n            @mouseenter=\"hoverRating = num\"\n            @mouseleave=\"hoverRating = 0\"\n          >\n            {{ num }}\n          </button>\n        </div>\n      </div>\n    </div>\n    <Notification ref=\"notificationRef\" />\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport { getRating, setRating as setRatingApi } from '@/api/movies'\nimport Notification from '@/components/notification/ToastMessage.vue'\nimport { useRouter } from 'vue-router'\nimport { useMainStore } from '@/store/main'\n\nconst mainStore = useMainStore()\nconst router = useRouter()\nconst props = defineProps({\n  kpId: {\n    type: String,\n    required: true\n  },\n  showDash: {\n    type: Boolean,\n    default: false\n  }\n})\n\nconst notificationRef = ref(null)\nconst userRating = ref(null)\nconst averageRating = ref(null)\nconst hoverRating = ref(0)\nconst isHovered = ref(false)\nconst isTooltipVisible = ref(false)\nlet hideTimeout = null\n\nconst handleMouseLeave = () => {\n  hideTimeout = setTimeout(() => {\n    isHovered.value = false\n    if (!mainStore.isMobile) {\n      isTooltipVisible.value = false\n    }\n  }, 100)\n}\n\nconst handleMouseEnter = () => {\n  if (hideTimeout) {\n    clearTimeout(hideTimeout)\n    hideTimeout = null\n  }\n  isHovered.value = true\n}\n\nconst toggleTooltip = () => {\n  if (mainStore.isMobile) {\n    isTooltipVisible.value = !isTooltipVisible.value\n  }\n}\n\nconst openLogin = () => {\n  router.push('/login')\n}\n\nconst loadRating = async () => {\n  try {\n    const data = await getRating(props.kpId)\n    userRating.value = data.user_rating\n    averageRating.value = data.average_rating\n  } catch (error) {\n    console.error('Error loading rating:', error)\n  }\n}\n\nconst setRating = async (rating) => {\n  try {\n    if (rating === userRating.value) {\n      await setRatingApi(props.kpId, null)\n      userRating.value = null\n      notificationRef.value.showNotification('Оценка удалена')\n    } else {\n      await setRatingApi(props.kpId, rating)\n      userRating.value = rating\n      notificationRef.value.showNotification('Оценка сохранена')\n    }\n\n    if (mainStore.isMobile) {\n      isTooltipVisible.value = false\n    }\n    loadRating()\n  } catch (error) {\n    console.error('Error setting rating:', error)\n    if (error.response?.status === 401) {\n      notificationRef.value.showNotification(\n        'Для оценки необходимо <a class=\"auth-link\">авторизоваться</a>',\n        5000,\n        { onClick: openLogin }\n      )\n    } else {\n      notificationRef.value.showNotification('Ошибка при сохранении оценки')\n    }\n    if (mainStore.isMobile) {\n      isTooltipVisible.value = false\n    }\n  }\n}\n\nonMounted(() => {\n  loadRating()\n})\n</script>\n\n<style scoped>\n.rating-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n  position: relative;\n  min-height: 40px;\n}\n\n.rating-display {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n}\n\n.rating-link {\n  display: inline-flex;\n  align-items: center;\n  color: rgb(224, 224, 224);\n  text-decoration: none;\n  font-weight: 700;\n  font-family: Roboto, sans-serif;\n  font-size: 16px;\n  padding: 8px;\n  background: rgba(0, 0, 0, 0.05);\n  border-radius: 4px;\n  cursor: pointer;\n}\n\n.rating-logo {\n  width: 20px;\n  height: 20px;\n  margin-right: 5px;\n  opacity: 0.8;\n}\n\n.rating-tooltip {\n  position: absolute;\n  top: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n  margin-top: 8px;\n  z-index: 1000;\n  background: #1a1a1a;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n  padding: 8px;\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n\n.rating-display:hover .rating-tooltip {\n  opacity: 1;\n}\n\n.rating-numbers {\n  display: flex;\n  gap: 4px;\n}\n\n.number-btn {\n  background: none;\n  border: none;\n  padding: 4px 6px;\n  cursor: pointer;\n  color: rgb(224, 224, 224);\n  transition: all 0.2s;\n  border-radius: 2px;\n  font-size: 14px;\n  font-weight: 700;\n  font-family: Roboto, sans-serif;\n}\n\n.number-btn:hover {\n  color: #fff;\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.number-btn.active {\n  color: #fff;\n  background: rgba(255, 255, 255, 0.2);\n}\n\n.number-btn.hover {\n  color: #fff;\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.number-btn.average-highlight {\n  color: rgb(224, 224, 224);\n}\n\n.number-btn.active.average-highlight {\n  color: #fff;\n}\n\n.average-rating {\n  font-weight: 700;\n  color: rgb(224, 224, 224);\n  font-size: 16px;\n  font-family: Roboto, sans-serif;\n}\n\n.number-btn:nth-child(1):hover {\n  color: #ff4444;\n}\n.number-btn:nth-child(2):hover {\n  color: #ff6b6b;\n}\n.number-btn:nth-child(3):hover {\n  color: #ff8e8e;\n}\n.number-btn:nth-child(4):hover {\n  color: #ffb347;\n}\n.number-btn:nth-child(5):hover {\n  color: #ffcc33;\n}\n.number-btn:nth-child(6):hover {\n  color: #ffd700;\n}\n.number-btn:nth-child(7):hover {\n  color: #9acd32;\n}\n.number-btn:nth-child(8):hover {\n  color: #7cfc00;\n}\n.number-btn:nth-child(9):hover {\n  color: #32cd32;\n}\n.number-btn:nth-child(10):hover {\n  color: #00ff00;\n}\n\n.number-btn.active:nth-child(1) {\n  background: #ff4444;\n}\n.number-btn.active:nth-child(2) {\n  background: #ff6b6b;\n}\n.number-btn.active:nth-child(3) {\n  background: #ff8e8e;\n}\n.number-btn.active:nth-child(4) {\n  background: #ffb347;\n}\n.number-btn.active:nth-child(5) {\n  background: #ffcc33;\n}\n.number-btn.active:nth-child(6) {\n  background: #ffd700;\n}\n.number-btn.active:nth-child(7) {\n  background: #9acd32;\n}\n.number-btn.active:nth-child(8) {\n  background: #7cfc00;\n}\n.number-btn.active:nth-child(9) {\n  background: #32cd32;\n}\n.number-btn.active:nth-child(10) {\n  background: #00ff00;\n}\n\n.mobile-tooltip {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  margin-top: 0;\n}\n</style>\n","<template>\n  <div class=\"movie-info\">\n    <div class=\"content\">\n      <div v-if=\"(infoLoading || !movieInfo) && !errorMessage\" class=\"content-card\">\n        <div class=\"movie-skeleton\">\n          <div class=\"movie-skeleton__header\">\n            <div class=\"movie-skeleton__title\"></div>\n          </div>\n\n          <div class=\"movie-skeleton__ratings\">\n            <div class=\"movie-skeleton__rating-item\"></div>\n            <div class=\"movie-skeleton__rating-item\"></div>\n            <div class=\"movie-skeleton__rating-item\"></div>\n          </div>\n\n          <div class=\"movie-skeleton__player\">\n            <SpinnerLoading />\n          </div>\n\n          <div class=\"movie-skeleton__additional-info\">\n            <div class=\"movie-skeleton__section-title\"></div>\n            <div class=\"movie-skeleton__info-list\">\n              <div class=\"movie-skeleton__info-item\"></div>\n              <div class=\"movie-skeleton__info-item\"></div>\n              <div class=\"movie-skeleton__info-item\"></div>\n              <div class=\"movie-skeleton__info-item\"></div>\n              <div class=\"movie-skeleton__info-item\"></div>\n            </div>\n          </div>\n\n          <div class=\"movie-skeleton__description\">\n            <div class=\"movie-skeleton__description-line\"></div>\n            <div class=\"movie-skeleton__description-line\"></div>\n            <div class=\"movie-skeleton__description-line\"></div>\n            <div class=\"movie-skeleton__description-line\"></div>\n          </div>\n        </div>\n      </div>\n\n      <ErrorMessage v-if=\"errorMessage\" :message=\"errorMessage\" :code=\"errorCode\" />\n\n      <div v-if=\"errorMessage\" class=\"content-card\">\n        <PlayerComponent\n          :key=\"kp_id\"\n          :kp-id=\"kp_id\"\n          :movie-info=\"movieInfo\"\n          @update:movie-info=\"fetchMovieInfo\"\n        />\n      </div>\n\n      <div v-if=\"movieInfo && !infoLoading\" class=\"content-card\">\n        <div class=\"content-header\">\n          <div\n            v-if=\"movieInfo.logo_url\"\n            class=\"content-logo\"\n            @mousemove=\"moveTooltip\"\n            @mouseleave=\"titleCopyTooltip = false\"\n            @click=\"copyMovieMeta\"\n          >\n            <img v-lazy=\"movieInfo.logo_url\" alt=\"Логотип фильма\" class=\"content-logo\" v-once />\n          </div>\n          <div\n            v-else\n            @mousemove=\"moveTooltip\"\n            @mouseleave=\"titleCopyTooltip = false\"\n            @click=\"copyMovieMeta\"\n          >\n            <h1 class=\"content-title\">{{ movieInfo.title }}</h1>\n          </div>\n\n          <div v-show=\"titleCopyTooltip\" class=\"title-copy-tooltip\" :style=\"tooltipStyle\">\n            Скопировать\n          </div>\n        </div>\n\n        <div\n          v-if=\"\n            movieInfo.kinopoisk_id ||\n            movieInfo.title ||\n            movieInfo.imdb_id ||\n            movieInfo.rating_imdb ||\n            movieInfo.shikimori_id\n          \"\n          class=\"ratings-links\"\n        >\n          <MovieRating\n            v-if=\"movieInfo.kinopoisk_id\"\n            :kp-id=\"movieInfo.kinopoisk_id\"\n            :show-dash=\"true\"\n          />\n\n          <!-- Кинопоиск -->\n          <div v-if=\"movieInfo.kinopoisk_id\">\n            <a\n              :href=\"`https://www.kinopoisk.ru/film/${movieInfo.kinopoisk_id}`\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              class=\"rating-link\"\n            >\n              <img src=\"/src/assets/icon-kp-logo.svg\" alt=\"КП\" class=\"rating-logo\" />\n              <span>{{ movieInfo.rating_kinopoisk ? movieInfo.rating_kinopoisk : '—' }}</span>\n              <img\n                src=\"/src/assets/icon-external-link.png\"\n                alt=\"Внешняя ссылка\"\n                class=\"external-link-icon\"\n              />\n            </a>\n          </div>\n\n          <!-- Поиск на Кинопоиске, если нет ID -->\n          <div v-if=\"!movieInfo.kinopoisk_id && movieInfo.title\">\n            <a\n              :href=\"`https://www.kinopoisk.ru/index.php?kp_query=${encodeURIComponent(movieInfo.title + (movieInfo.year ? ' ' + movieInfo.year : ''))}`\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              class=\"rating-link\"\n            >\n              <img src=\"/src/assets/icon-kp-logo.svg\" alt=\"КП\" class=\"rating-logo\" />\n              <span>{{ movieInfo.rating_kinopoisk ? movieInfo.rating_kinopoisk : '—' }}</span>\n              <img\n                src=\"/src/assets/icon-external-link.png\"\n                alt=\"Внешняя ссылка\"\n                class=\"external-link-icon\"\n              />\n            </a>\n          </div>\n\n          <!-- IMDb -->\n          <div v-if=\"movieInfo.imdb_id\">\n            <a\n              :href=\"`https://www.imdb.com/title/${movieInfo.imdb_id}`\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              class=\"rating-link\"\n            >\n              <img src=\"/src/assets/icon-imdb-logo.svg\" alt=\"IMDb\" class=\"rating-logo\" />\n              <span>{{ movieInfo.rating_imdb ? movieInfo.rating_imdb : '—' }}</span>\n              <img\n                src=\"/src/assets/icon-external-link.png\"\n                alt=\"Внешняя ссылка\"\n                class=\"external-link-icon\"\n              />\n            </a>\n          </div>\n\n          <!-- Поиск на IMDb, если нет ID -->\n          <div v-if=\"!movieInfo.imdb_id && movieInfo.title\">\n            <a\n              :href=\"`https://www.imdb.com/find/?q=${encodeURIComponent(movieInfo.title + (movieInfo.year ? ' ' + movieInfo.year : ''))}`\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              class=\"rating-link\"\n            >\n              <img src=\"/src/assets/icon-imdb-logo.svg\" alt=\"IMDb\" class=\"rating-logo\" />\n              <span>{{ movieInfo.rating_imdb ? movieInfo.rating_imdb : '—' }}</span>\n              <img\n                src=\"/src/assets/icon-external-link.png\"\n                alt=\"Внешняя ссылка\"\n                class=\"external-link-icon\"\n              />\n            </a>\n          </div>\n\n          <!-- Shikimori -->\n          <div v-if=\"movieInfo.shikimori_id\">\n            <a\n              :href=\"`https://shikimori.one/animes/${movieInfo.shikimori_id}`\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              class=\"rating-link\"\n            >\n              <img src=\"/src/assets/icon-shikimori.svg\" alt=\"Shiki\" class=\"rating-logo\" />\n              <img\n                src=\"/src/assets/icon-external-link.png\"\n                alt=\"Внешняя ссылка\"\n                class=\"external-link-icon\"\n              />\n            </a>\n          </div>\n\n          <!-- Parents Guide (только если есть IMDb id) -->\n          <div v-if=\"movieInfo.imdb_id\">\n            <a\n              :href=\"`https://www.imdb.com/title/${movieInfo.imdb_id}/parentalguide`\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              class=\"rating-link\"\n            >\n              <span>Parents Guide</span>\n              <img\n                src=\"/src/assets/icon-external-link.png\"\n                alt=\"Внешняя ссылка\"\n                class=\"external-link-icon\"\n              />\n            </a>\n          </div>\n        </div>\n\n        <!-- Интеграция компонента плеера -->\n        <PlayerComponent\n          :key=\"kp_id\"\n          :kp-id=\"kp_id\"\n          :movie-info=\"movieInfo\"\n          @update:movie-info=\"fetchMovieInfo\"\n        />\n\n        <meta\n          name=\"title-and-year\"\n          :content=\"\n            movieInfo.type === 'FILM' && movieInfo.year\n              ? `${movieInfo.title} (${movieInfo.year})`\n              : movieInfo.title\n          \"\n        />\n\n        <meta\n          v-if=\"movieInfo.name_original\"\n          name=\"original-title\"\n          :content=\"movieInfo.name_original\"\n        />\n        <div class=\"additional-info\">\n          <h2 class=\"additional-info-title\">Подробнее</h2>\n          <div class=\"info-content\">\n            <div class=\"details-container\">\n              <ul class=\"info-list\">\n                <li v-if=\"movieInfo.type && TYPES_ENUM[movieInfo.type]\">\n                  <strong>Тип:</strong> {{ TYPES_ENUM[movieInfo.type] }}\n                </li>\n                <li v-if=\"movieInfo.year\"><strong>Год выпуска:</strong> {{ movieInfo.year }}</li>\n                <li v-if=\"movieInfo.title\"><strong>Название:</strong> {{ movieInfo.title }}</li>\n                <li v-if=\"movieInfo.name_original\">\n                  <strong>Оригинальное название:</strong> {{ movieInfo.name_original }}\n                </li>\n                <li v-if=\"movieInfo.slogan\"><strong>Слоган:</strong> {{ movieInfo.slogan }}</li>\n                <li v-if=\"movieInfo.production_companies\">\n                  <strong>Продакшн:</strong> {{ movieInfo.production_companies }}\n                </li>\n                <li v-if=\"movieInfo.countries?.length\">\n                  <strong>Страна производства:</strong>\n                  {{ movieInfo.countries.map((item) => item.country).join(', ') }}\n                </li>\n                <li v-if=\"movieInfo.genres?.length\">\n                  <strong>Жанры:</strong>\n                  {{ movieInfo.genres.map((item) => item.genre).join(', ') }}\n                </li>\n                <li v-if=\"movieInfo.film_length\">\n                  <strong>Продолжительность:</strong> {{ formatTime(movieInfo.film_length) }}\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"content-info\">\n          <p v-if=\"movieInfo.description\" class=\"content-description-text\">\n            {{ movieInfo.description }}\n          </p>\n        </div>\n\n        <div v-if=\"movieInfo.staff\" class=\"staff-section\">\n          <div class=\"staff-categories\">\n            <div v-if=\"getStaffByProfession('ACTOR').length\" class=\"staff-category\">\n              <h3 class=\"additional-info-title\">Актёры</h3>\n              <div class=\"staff-list\">\n                <div\n                  v-for=\"person in getStaffByProfession('ACTOR').slice(0, 12)\"\n                  :key=\"person.staff_id\"\n                  class=\"staff-item\"\n                >\n                  <a\n                    :href=\"`https://www.kinopoisk.ru/name/${person.staff_id}/`\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    class=\"staff-link\"\n                    :title=\"person.description || ''\"\n                  >\n                    <img :src=\"person.poster_url\" :alt=\"person.name_ru\" class=\"staff-photo\" />\n                    <span class=\"staff-name\">{{ person.name_ru || person.name_en }}</span>\n                    <span v-if=\"person.description\" class=\"staff-role\">{{\n                      person.description\n                    }}</span>\n                  </a>\n                </div>\n                <a\n                  class=\"expand-actors-circle-button\"\n                  :href=\"`https://www.kinopoisk.ru/film/${kp_id}/cast/`\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  :title=\"`Показать всех ${getStaffByProfession('ACTOR').length} актеров`\"\n                >\n                  +{{ getStaffByProfession('ACTOR').length - 12 }}\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div v-if=\"videos.length && areTrailersActive\" class=\"yt-video-container\">\n          <TrailerCarousel\n            :videos=\"videos\"\n            :active-video-index=\"activeTrailerIndex\"\n            @select=\"playTrailer\"\n          />\n        </div>\n\n        <!-- Секция с сиквелами и приквелами -->\n        <div v-if=\"sequelsAndPrequels.length\" class=\"related-movies\">\n          <h2>Сиквелы и приквелы</h2>\n          <MovieList\n            :movies-list=\"\n              showAllSequels ? sequelsAndPrequels : sequelsAndPrequels.slice(0, itemsPerRow)\n            \"\n            :loading=\"false\"\n            :is-history=\"false\"\n          />\n          <a\n            v-if=\"sequelsAndPrequels.length > itemsPerRow\"\n            class=\"expand-circle-button\"\n            @click=\"showAllSequels = !showAllSequels\"\n            :title=\"`${showAllSequels ? 'Скрыть' : 'Показать все'} (${sequelsAndPrequels.length})`\"\n          >\n            {{ showAllSequels ? '−' : `+${sequelsAndPrequels.length - itemsPerRow}` }}\n          </a>\n        </div>\n\n        <!-- Секция с похожими фильмами -->\n        <div v-if=\"similars.length\" class=\"related-movies\">\n          <h2>Похожие</h2>\n          <MovieList\n            :movies-list=\"showAllSimilars ? similars : similars.slice(0, itemsPerRow)\"\n            :loading=\"false\"\n            :is-history=\"false\"\n          />\n          <a\n            v-if=\"similars.length > itemsPerRow\"\n            class=\"expand-circle-button\"\n            @click=\"showAllSimilars = !showAllSimilars\"\n            :title=\"`${showAllSimilars ? 'Скрыть' : 'Показать все'} (${similars.length})`\"\n          >\n            {{ showAllSimilars ? '−' : `+${similars.length - itemsPerRow}` }}\n          </a>\n        </div>\n      </div>\n    </div>\n  </div>\n  <Notification ref=\"notificationRef\" />\n</template>\n\n<script setup>\nimport { getKpInfo, getShikiInfo } from '@/api/movies'\nimport { handleApiError } from '@/constants'\nimport { addToList } from '@/api/user'\nimport { MovieList } from '@/components/MovieList/'\nimport PlayerComponent from '@/components/PlayerComponent.vue'\nimport ErrorMessage from '@/components/ErrorMessage.vue'\nimport SpinnerLoading from '@/components/SpinnerLoading.vue'\nimport { TYPES_ENUM, USER_LIST_TYPES_ENUM } from '@/constants'\nimport { useBackgroundStore } from '@/store/background'\nimport { useMainStore } from '@/store/main'\nimport { useAuthStore } from '@/store/auth'\nimport { useNavbarStore } from '@/store/navbar'\nimport { computed, onMounted, onUnmounted, ref, watch } from 'vue'\nimport { useRoute } from 'vue-router'\nimport Notification from '@/components/notification/ToastMessage.vue'\nimport TrailerCarousel from '@/components/TrailerCarousel.vue'\nimport { useTrailerStore } from '@/store/trailer'\nimport MovieRating from '@/components/MovieRating.vue'\n\nconst infoLoading = ref(true)\nconst mainStore = useMainStore()\nconst authStore = useAuthStore()\nconst backgroundStore = useBackgroundStore()\nconst route = useRoute()\nconst kp_id = ref(route.params.kp_id)\nconst errorMessage = ref('')\nconst errorCode = ref(null)\nconst movieInfo = ref(null)\nconst navbarStore = useNavbarStore()\nconst trailerStore = useTrailerStore()\n\nconst areTrailersActive = trailerStore.areTrailersActive\nconst activeTrailerIndex = ref(null)\nconst showAllSequels = ref(false)\nconst showAllSimilars = ref(false)\n\nconst itemsPerRow = ref(6)\n\nconst setDocumentTitle = () => {\n  if (movieInfo.value) {\n    const title =\n      movieInfo.value.name_ru ||\n      movieInfo.value.name_en ||\n      movieInfo.value.name_original ||\n      'Информация о фильме'\n    document.title = title\n  }\n}\n\nconst transformMoviesData = (movies) => {\n  return (movies || []).map((movie) => ({\n    kp_id: movie.film_id,\n    poster: movie.poster_url_preview || movie.poster_url,\n    title: movie.name_ru || movie.name_en || movie.name_original\n  }))\n}\n\nconst formatTime = (minutes) => {\n  if (typeof minutes !== 'number') {\n    return\n  }\n  const hours = Math.floor(minutes / 60)\n  const mins = minutes % 60\n  return `${hours} ч. ${mins} мин.`\n}\n\nconst titleCopyTooltip = ref(false)\nconst tooltipStyle = ref({ top: '0px', left: '0px' })\nconst moveTooltip = (event) => {\n  titleCopyTooltip.value = true\n  tooltipStyle.value = {\n    top: `${event.pageY + 10}px`,\n    left: `${event.pageX - 70}px`\n  }\n}\n\nconst notificationRef = ref(null)\nconst copyMovieMeta = async () => {\n  try {\n    const movieMeta = [\n      movieInfo.value.name_ru || movieInfo.value.name_en || movieInfo.value.name_original,\n      ...(movieInfo.value.year ? [movieInfo.value.year] : []),\n      ...(movieInfo.value.film_length ? [formatTime(movieInfo.value.film_length)] : [])\n    ]\n    await navigator.clipboard.writeText(movieMeta.join(', '))\n    notificationRef.value.showNotification('Скопировано')\n  } catch (err) {\n    console.error('Ошибка копирования:', err)\n  }\n}\n\nconst fetchMovieInfo = async (updateHistory = true) => {\n  try {\n    let response\n    if (kp_id.value.startsWith('shiki')) {\n      response = await getShikiInfo(kp_id.value)\n    } else {\n      response = await getKpInfo(kp_id.value, authStore.token)\n    }\n\n    if (Array.isArray(response) && response.length === 0) {\n      throw new Error('Данные не найдены. Пожалуйста, повторите поиск.')\n    }\n\n    movieInfo.value = response\n\n    if (kp_id.value.startsWith('shiki')) {\n      movieInfo.value = {\n        ...movieInfo.value,\n        title: movieInfo.value.name_ru || movieInfo.value.name_en,\n        name_original: movieInfo.value.name_en,\n        short_description: movieInfo.value.slogan\n      }\n    } else {\n      movieInfo.value = {\n        ...movieInfo.value,\n        title: movieInfo.value.name_ru || movieInfo.value.name_en || movieInfo.value.name_original,\n        kinopoisk_id: kp_id.value\n      }\n    }\n\n    navbarStore.setHeaderContent({\n      text: movieInfo.value.title,\n      imageUrl: movieInfo.value.logo_url\n    })\n\n    setDocumentTitle()\n\n    const movieToSave = {\n      kp_id: kp_id.value,\n      title: movieInfo.value?.name_ru || movieInfo.value?.name_en || movieInfo.value?.name_original,\n      poster:\n        movieInfo.value?.poster_url ||\n        movieInfo.value?.cover_url ||\n        movieInfo.value?.screenshots[0],\n      year: movieInfo.value?.year,\n      type: movieInfo.value?.type\n    }\n\n    // Устанавливаем фон фильма через новый метод\n    if (kp_id.value.startsWith('shiki')) {\n      if (movieInfo.value.screenshots && movieInfo.value.screenshots.length > 0) {\n        const randomIndex = Math.floor(Math.random() * movieInfo.value.screenshots.length)\n        const randomScreenshot = movieInfo.value.screenshots[randomIndex]\n        backgroundStore.updateMoviePoster(randomScreenshot)\n      } else if (movieToSave.poster) {\n        backgroundStore.updateMoviePoster(movieToSave.poster)\n      }\n    } else {\n      if (movieToSave.poster) {\n        backgroundStore.updateMoviePoster(movieToSave.poster)\n      }\n    }\n\n    const isHistoryAllowed = computed(() => mainStore.isHistoryAllowed)\n\n    if (isHistoryAllowed.value && movieToSave.kp_id && movieToSave.title && updateHistory) {\n      if (authStore.token) {\n        try {\n          await addToList(movieToSave.kp_id, USER_LIST_TYPES_ENUM.HISTORY)\n        } catch (error) {\n          console.error('Ошибка при добавлении в историю:', error)\n        }\n      } else {\n        mainStore.addToHistory({ ...movieToSave })\n      }\n    }\n  } catch (error) {\n    const { message, code } = handleApiError(error)\n    errorMessage.value = message\n    errorCode.value = code\n    console.error('Ошибка при загрузке информации о фильмах:', error)\n  }\n}\n\nconst videos = computed(() => {\n  console.log('Трейлеры:', movieInfo.value?.videos)\n  return movieInfo.value?.videos\n})\n\nconst sequelsAndPrequels = computed(() =>\n  transformMoviesData(movieInfo.value?.sequels_and_prequels)\n)\n\nconst similars = computed(() => transformMoviesData(movieInfo.value?.similars))\n\nconst updateItemsPerRow = () => {\n  const containerWidth = document.querySelector('.related-movies')?.clientWidth || 0\n  const itemWidth = 240 + 20\n  const newItemsPerRow = Math.floor(containerWidth / itemWidth) || 6\n  itemsPerRow.value = Math.max(1, newItemsPerRow)\n}\n\nconst onResize = () => {\n  updateItemsPerRow()\n}\n\nconst onKeyDown = (event) => {\n  if (event.altKey && event.keyCode === 84) {\n    const playerComponent = document.querySelector('.player-container')\n    if (playerComponent) {\n      const theaterModeBtn = document.querySelector('.theater-mode-btn')\n      if (theaterModeBtn) {\n        theaterModeBtn.click()\n      }\n    }\n  }\n}\n\nonMounted(async () => {\n  await fetchMovieInfo()\n  infoLoading.value = false\n  document.addEventListener('keydown', onKeyDown)\n  window.addEventListener('resize', onResize)\n  setTimeout(updateItemsPerRow, 100)\n})\n\nonUnmounted(async () => {\n  navbarStore.clearHeaderContent()\n  document.removeEventListener('keydown', onKeyDown)\n  window.removeEventListener('resize', onResize)\n})\n\nwatch(\n  () => route.params.kp_id,\n  async (newKpId) => {\n    if (newKpId && newKpId !== kp_id.value) {\n      navbarStore.clearHeaderContent()\n      kp_id.value = newKpId\n      activeTrailerIndex.value = null\n      await fetchMovieInfo()\n      infoLoading.value = false\n    }\n  },\n  { immediate: true }\n)\n\nwatch(\n  movieInfo,\n  () => {\n    setDocumentTitle()\n  },\n  { deep: true }\n)\n\nconst getStaffByProfession = (profession) => {\n  return movieInfo.value?.staff?.filter((person) => person.profession_key === profession) || []\n}\n</script>\n\n<style scoped>\n.content {\n  min-height: 100vh;\n}\n/* Стили для информации о фильме */\n.content-card {\n  overflow: hidden;\n  padding: 20px;\n  color: #e0e0e0;\n}\n\n.content-header {\n  height: 80px;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n  cursor: pointer;\n}\n\n.content-logo {\n  max-height: 80px;\n  height: 80px;\n  width: auto;\n  object-fit: contain;\n  max-width: 100%;\n}\n\n.content-title {\n  font-size: 55px;\n  margin: 0;\n  line-height: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  text-align: center;\n}\n\n.content-subtitle {\n  font-size: 20px;\n  color: #bbb;\n}\n\n.ratings-links {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 20px;\n  margin: 15px 0;\n}\n\n.rating-link {\n  display: inline-flex;\n  align-items: center;\n  color: inherit;\n  text-decoration: none;\n  font-weight: bold;\n}\n\n.rating-logo {\n  width: 20px;\n  height: 20px;\n  margin-right: 5px;\n}\n\n.external-link-icon {\n  width: 20px;\n  height: auto;\n  margin-left: 5px;\n}\n\n.additional-info {\n  border-radius: 8px;\n  margin-bottom: 20px;\n  font-size: 16px;\n}\n\n.additional-info-title {\n  margin: 15px 0 15px;\n  text-align: left;\n  color: #fff;\n}\n\n.info-content {\n  display: flex;\n  gap: 20px;\n}\n\n.details-container {\n  flex: 3;\n}\n\n.info-list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.info-list li {\n  margin-bottom: 8px;\n}\n\n.content-info {\n  font-size: 16px;\n  line-height: 1.6;\n  color: #ccc;\n}\n\n.content-description-text,\n.content-short-description {\n  margin: 0 0 10px;\n}\n\n.error-message {\n  color: #ff4444;\n  text-align: center;\n  padding: 20px;\n  font-size: 1.2rem;\n  border: 1px solid #ff4444;\n  border-radius: 5px;\n  margin: 20px auto;\n  max-width: 500px;\n  background: rgba(255, 68, 68, 0.1);\n}\n\n/* Стили для секций с похожими фильмами */\n.related-movies {\n  margin-top: 30px;\n  position: relative;\n}\n\n.related-movies h2 {\n  color: #fff;\n  margin-bottom: 15px;\n}\n\n/* Подсказка */\n.title-copy-tooltip {\n  position: absolute;\n  background-color: #333;\n  color: #fff;\n  padding: 5px 10px;\n  border-radius: 5px;\n  font-size: 14px;\n  white-space: nowrap;\n  pointer-events: none;\n}\n\n@media (max-width: 600px) {\n  .content-card {\n    padding: 0 2px;\n  }\n\n  .content-header,\n  .content-logo,\n  .content-title {\n    display: none;\n  }\n\n  .content-subtitle {\n    font-size: 16px;\n  }\n\n  .ratings-links {\n    margin: 5px 0;\n  }\n\n  .additional-info-title {\n    font-size: 20px;\n  }\n\n  .info-content {\n    flex-direction: column;\n  }\n}\n\n.controls {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  gap: 10px;\n  margin-top: 40px;\n  border-radius: 10px;\n}\n\n.controls button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #444;\n  color: #fff;\n  border: none;\n  padding: 12px;\n  font-size: 18px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition:\n    background-color 0.3s ease,\n    transform 0.2s ease,\n    box-shadow 0.3s ease;\n  z-index: 4;\n  width: 50px;\n  height: 50px;\n}\n\n.controls button:hover {\n  background-color: #555;\n  transform: translateY(-3px);\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);\n}\n\n.controls button:active {\n  transform: translateY(0);\n  box-shadow: none;\n}\n\n.controls button.active {\n  background-color: #4caf50;\n  box-shadow: 0 0 10px rgba(76, 175, 80, 0.7);\n}\n\n.material-icons {\n  font-size: 24px;\n}\n\n.tooltip-container {\n  position: relative;\n  display: inline-block;\n}\n\n.custom-tooltip {\n  position: absolute;\n  top: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n  background-color: #333;\n  color: #fff;\n  padding: 5px;\n  border-radius: 4px;\n  font-size: 16px;\n  white-space: nowrap;\n  margin-top: 8px;\n  pointer-events: none;\n  text-align: center;\n}\n\n.advanced-tooltip {\n  white-space: normal;\n  padding: 15px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n  top: calc(100% + 5px);\n  pointer-events: all;\n  text-align: center;\n}\n\n.tooltip-title {\n  font-size: 16px;\n  text-align: center;\n}\n\n.movie-skeleton {\n  padding: 0 20px 20px;\n  color: #e0e0e0;\n}\n\n.movie-skeleton__header {\n  height: 80px;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 20px;\n}\n\n.movie-skeleton__logo {\n  width: 200px;\n  height: 80px;\n  background: linear-gradient(\n    90deg,\n    rgba(30, 30, 30, 0.9) 0%,\n    rgba(50, 50, 50, 0.9) 50%,\n    rgba(30, 30, 30, 0.9) 100%\n  );\n  background-size: 200% 100%;\n  animation: shimmer 2s infinite linear;\n  border-radius: 8px;\n}\n\n.movie-skeleton__title {\n  width: 30%;\n  height: 40px;\n  background: linear-gradient(\n    90deg,\n    rgba(40, 40, 40, 0.8) 0%,\n    rgba(60, 60, 60, 0.8) 50%,\n    rgba(40, 40, 40, 0.8) 100%\n  );\n  background-size: 200% 100%;\n  animation: shimmer 2s infinite linear;\n  border-radius: 12px;\n  margin: 0 auto;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n  position: relative;\n  overflow: hidden;\n}\n\n.movie-skeleton__title::after {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(\n    90deg,\n    transparent 0%,\n    rgba(255, 255, 255, 0.05) 50%,\n    transparent 100%\n  );\n  animation: shine 1.5s infinite;\n}\n\n@keyframes shine {\n  0% {\n    transform: translateX(-100%);\n  }\n  100% {\n    transform: translateX(100%);\n  }\n}\n\n.movie-skeleton__ratings {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 20px;\n  margin: 15px 0;\n}\n\n.movie-skeleton__rating-item {\n  width: 120px;\n  height: 30px;\n  background: linear-gradient(\n    90deg,\n    rgba(30, 30, 30, 0.9) 0%,\n    rgba(50, 50, 50, 0.9) 50%,\n    rgba(30, 30, 30, 0.9) 100%\n  );\n  background-size: 200% 100%;\n  animation: shimmer 2s infinite linear;\n  border-radius: 8px;\n}\n\n.movie-skeleton__player {\n  width: 60%;\n  height: 500px;\n  background-size: 200% 100%;\n  animation: shimmer 2s infinite linear;\n  border-radius: 12px;\n  margin: 20px auto;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n  position: relative;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.movie-skeleton__player::before {\n  content: '';\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 60px;\n  height: 60px;\n  border: 4px solid rgba(255, 255, 255, 0.1);\n  border-top: 4px solid rgba(255, 255, 255, 0.5);\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  0% {\n    transform: translate(-50%, -50%) rotate(0deg);\n  }\n  100% {\n    transform: translate(-50%, -50%) rotate(360deg);\n  }\n}\n\n.movie-skeleton__additional-info {\n  margin: 20px 0;\n}\n\n.movie-skeleton__section-title {\n  width: 150px;\n  height: 24px;\n  background: linear-gradient(\n    90deg,\n    rgba(30, 30, 30, 0.9) 0%,\n    rgba(50, 50, 50, 0.9) 50%,\n    rgba(30, 30, 30, 0.9) 100%\n  );\n  background-size: 200% 100%;\n  animation: shimmer 2s infinite linear;\n  border-radius: 8px;\n  margin-bottom: 15px;\n}\n\n.movie-skeleton__info-list {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.movie-skeleton__info-item {\n  width: 100%;\n  height: 20px;\n  background: linear-gradient(\n    90deg,\n    rgba(30, 30, 30, 0.9) 0%,\n    rgba(50, 50, 50, 0.9) 50%,\n    rgba(30, 30, 30, 0.9) 100%\n  );\n  background-size: 200% 100%;\n  animation: shimmer 2s infinite linear;\n  border-radius: 8px;\n}\n\n.movie-skeleton__description {\n  margin: 20px 0;\n}\n\n.movie-skeleton__description-line {\n  width: 100%;\n  height: 16px;\n  background: linear-gradient(\n    90deg,\n    rgba(30, 30, 30, 0.9) 0%,\n    rgba(50, 50, 50, 0.9) 50%,\n    rgba(30, 30, 30, 0.9) 100%\n  );\n  background-size: 200% 100%;\n  animation: shimmer 2s infinite linear;\n  border-radius: 8px;\n  margin-bottom: 10px;\n}\n\n.movie-skeleton__description-line:nth-child(2) {\n  width: 90%;\n}\n\n.movie-skeleton__description-line:nth-child(3) {\n  width: 95%;\n}\n\n.movie-skeleton__description-line:nth-child(4) {\n  width: 85%;\n}\n\n@keyframes shimmer {\n  0% {\n    background-position: -200% 0;\n  }\n  100% {\n    background-position: 200% 0;\n  }\n}\n\n@media (max-width: 600px) {\n  .movie-skeleton {\n    padding: 10px;\n  }\n\n  .movie-skeleton__header {\n    height: 60px;\n  }\n\n  .movie-skeleton__logo {\n    width: 150px;\n    height: 60px;\n  }\n\n  .movie-skeleton__title {\n    width: 70%;\n    height: 30px;\n  }\n\n  .movie-skeleton__player {\n    height: 250px;\n  }\n\n  .movie-skeleton__rating-item {\n    width: 80px;\n    height: 25px;\n  }\n\n  .movie-skeleton__control-btn {\n    width: 40px;\n    height: 40px;\n  }\n}\n\n.staff-section {\n  border-radius: 8px;\n}\n\n.staff-categories {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.staff-category h3 {\n  color: #fff;\n  margin-bottom: 10px;\n  font-size: 18px;\n}\n\n.staff-list {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\n  gap: 15px;\n  align-items: start;\n  margin-bottom: 10px;\n}\n\n.staff-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  height: 100%;\n}\n\n.staff-link {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-decoration: none;\n  color: inherit;\n  transition: transform 0.2s;\n  height: 100%;\n}\n\n.staff-link:hover {\n  transform: translateY(-3px);\n}\n\n.staff-photo {\n  width: 80px;\n  height: 80px;\n  border-radius: 50%;\n  object-fit: cover;\n  margin-bottom: 8px;\n  border: 2px solid rgba(255, 255, 255, 0.1);\n  flex-shrink: 0;\n}\n\n.staff-name {\n  font-size: 14px;\n  color: #fff;\n  margin-bottom: 4px;\n  min-height: 2.8em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  padding: 0 4px;\n}\n\n.staff-role {\n  font-size: 12px;\n  color: #aaa;\n  min-height: 1.8em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  padding: 0 4px;\n}\n\n@media (max-width: 600px) {\n  .staff-list {\n    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));\n  }\n\n  .staff-photo {\n    width: 60px;\n    height: 60px;\n  }\n\n  .staff-name {\n    font-size: 12px;\n    min-height: 2.4em;\n  }\n\n  .staff-role {\n    font-size: 10px;\n    min-height: 1.6em;\n  }\n}\n\n.show-all-link {\n  display: inline-block;\n  color: #aaa;\n  text-decoration: none;\n  margin-top: 10px;\n  cursor: pointer;\n  transition: color 0.2s;\n}\n\n.show-all-link:hover {\n  color: #fff;\n  text-decoration: underline;\n}\n.expand-actors-circle-button {\n  width: 80px;\n  height: 80px;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.1);\n  border: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  margin: 0 auto;\n  transition: all 0.2s ease;\n  color: #fff;\n  font-size: 24px;\n  text-decoration: none;\n}\n\n.expand-circle-button {\n  position: absolute;\n  top: 0;\n  right: 15px;\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.1);\n  border: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  color: #fff;\n  font-size: 20px;\n  text-decoration: none;\n}\n\n.expand-circle-button:hover {\n  background: rgba(255, 255, 255, 0.2);\n  transform: scale(1.05);\n}\n\n@media (max-width: 600px) {\n  .expand-circle-button {\n    width: 35px;\n    height: 35px;\n    font-size: 16px;\n  }\n}\n\n.show-more-btn {\n  display: block;\n  margin: 15px auto;\n  padding: 8px 16px;\n  background: #3a3a3a;\n  color: #fff;\n  border: 1px solid #505050;\n  border-radius: 4px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.show-more-btn:hover {\n  background: #505050;\n  border-color: #17850b;\n}\n\n.show-more-btn:active {\n  background: #17850b;\n  border-color: #17850b;\n}\n</style>\n","export default \"__VITE_ASSET__BcVPhcOV__\""],"names":["_imports_1","showMessageToast","message","messageElement","document","createElement","style","position","top","left","width","height","backgroundColor","color","display","justifyContent","alignItems","fontSize","zIndex","textContent","body","appendChild","setTimeout","removeChild","props","__props","emit","__emit","activeGroup","ref","mainPlayers","computed","players","filter","player","isHdrezka","isKodik","hasHdrezkaGroup","some","hasKodikGroup","key","toUpperCase","includes","cleanName","name","replace","trim","selectPlayer","isSelected","selectedPlayer","isGroupSelected","group","expandGroup","value","collapseGroup","groupPlayers","sort","a","b","translate","localeCompare","groupHasWarning","warning","mainStore","useMainStore","playerStore","usePlayerStore","authStore","useAuthStore","route","useRoute","router","useRouter","kp_id","params","playersInternal","selectedPlayerInternal","iframeLoading","theaterMode","closeButtonVisible","playerIframe","containerRef","showPlayerModal","errorMessage","errorCode","maxPlayerHeightValue","window","innerHeight","maxPlayerHeight","isMobile","isElectron","electronAPI","activeTooltip","tooltipHovered","hideTimeout","notificationRef","tooltipContainer","tooltip","updateTooltipPosition","containerRect","getBoundingClientRect","tooltipRect","viewportHeight","bottom","marginTop","marginBottom","transform","showTooltip","tooltipName","clearTimeout","nextTick","tryHideTooltip","keepTooltipVisible","hideTooltip","aspectRatio","get","set","updateAspectRatio","isCentered","updateCentering","isInAnyList","_props$movieInfo","_props$movieInfo2","_props$movieInfo3","_props$movieInfo4","_props$movieInfo5","movieInfo","lists","isFavorite","isWatching","isLater","isCompleted","isAbandoned","preferredPlayer","naturalHeight","normalizeKey","updateScaleFactor","_aspectRatio$value$sp2","_slicedToArray","split","map","Number","w","h","Math","min","clientWidth","containerStyle","_aspectRatio$value$sp4","maxWidth","maxHeight","margin","overflow","iframeWrapperStyle","_aspectRatio$value$sp6","paddingTop","centerPlayer","scrollIntoView","behavior","block","inline","fetchPlayers","_ref3","_asyncToGenerator","_regeneratorRuntime","mark","_callee","normalizedPreferred","preferred","_handleApiError","code","wrap","_context","prev","next","getPlayers","kpId","sent","Object","entries","_ref4","_ref5","_objectSpread","length","find","t0","handleApiError","console","error","stop","apply","this","arguments","openPlayerModal","closePlayerModal","handlePlayerSelect","_selectedPlayerIntern","updatePreferredPlayer","toggleBlur","sendHotKey","open","toggleCompressor","toggleMirror","toggleTheaterMode","addEventListener","showCloseButton","onKeyDown","classList","add","removeEventListener","remove","theaterModeCloseButtonTimeout","dimmingEnabled","toggleDimming","event","altKey","keyCode","setAspectRatio","ratio","openAppLink","appUrl","location","href","e","copyMovieLink","movieLink","navigator","clipboard","writeText","then","showNotification","onIframeLoad","watch","newVal","_ref6","_callee2","newKpId","_callee2$","_context2","_x","immediate","aspectRatios","cycleAspectRatio","nextIndex","indexOf","toggleList","_ref7","_callee3","type","listNames","_handleApiError2","_context3","token","onClick","openLogin","abrupt","getListStatus","USER_LIST_TYPES_ENUM","FAVORITE","HISTORY","LATER","COMPLETED","ABANDONED","WATCHING","listType","_props$movieInfo6","_props$movieInfo7","_props$movieInfo8","_props$movieInfo9","_props$movieInfo10","_props$movieInfo11","_statusMap$listType","isHistory","delFromList","addToList","_x2","push","showFavoriteTooltip","openSettings","onMounted","onBeforeUnmount","activeVideoIndex","carousel","canScrollLeft","canScrollRight","updateScroll","_carousel$value","scrollLeft","scrollWidth","scrollCarousel","direction","firstItem","querySelector","itemWidth","scrollBy","handleResize","availableVideos","checkVideoAvailability","_ref9","_callee4","videoId","response","_callee4$","_context4","fetch","ok","_x3","_callee6","availabilityChecks","results","_callee6$","_context6","videos","_ref11","_callee5","video","isAvailable","_context5","_x4","Promise","all","Boolean","_ref12","_callee8","newVideos","_context8","_ref13","_callee7","_callee7$","_context7","_x6","_x5","newIndex","index","userRating","averageRating","hoverRating","isHovered","isTooltipVisible","handleMouseLeave","handleMouseEnter","toggleTooltip","loadRating","_ref14","_callee9","data","_callee9$","_context9","getRating","user_rating","average_rating","setRating","_ref15","_callee10","rating","_error$response","_context10","setRatingApi","status","_x7","infoLoading","backgroundStore","useBackgroundStore","navbarStore","useNavbarStore","areTrailersActive","useTrailerStore","activeTrailerIndex","showAllSequels","showAllSimilars","itemsPerRow","setDocumentTitle","title","name_ru","name_en","name_original","transformMoviesData","movies","movie","film_id","poster","poster_url_preview","poster_url","formatTime","minutes","floor","titleCopyTooltip","tooltipStyle","moveTooltip","pageY","pageX","copyMovieMeta","_ref16","_callee11","movieMeta","_context11","year","film_length","join","fetchMovieInfo","_ref17","_callee12","updateHistory","_movieInfo$value","_movieInfo$value2","_movieInfo$value3","_movieInfo$value4","_movieInfo$value5","_movieInfo$value6","_movieInfo$value7","_movieInfo$value8","movieToSave","randomIndex","randomScreenshot","_handleApiError3","_args12","_context12","undefined","startsWith","getShikiInfo","getKpInfo","Array","isArray","Error","isHistoryAllowed","short_description","slogan","kinopoisk_id","setHeaderContent","text","imageUrl","logo_url","cover_url","screenshots","random","updateMoviePoster","addToHistory","t1","_movieInfo$value9","_movieInfo$value10","log","sequelsAndPrequels","_movieInfo$value11","sequels_and_prequels","similars","_movieInfo$value12","updateItemsPerRow","_document$querySelect","containerWidth","newItemsPerRow","max","onResize","theaterModeBtn","click","_callee13","_callee13$","_context13","onUnmounted","_callee14","_context14","clearHeaderContent","_ref20","_callee15","_callee15$","_context15","_x8","deep","getStaffByProfession","profession","_movieInfo$value13","staff","person","profession_key"],"mappings":"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"}