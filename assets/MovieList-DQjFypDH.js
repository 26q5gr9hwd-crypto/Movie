import{_ as L,b as o,d as s,e as u,f as H,g,t as y,K as Z,L as X,aq as V,an as W,m as T,x as D,q as J,n as U,s as R,y as M,a9 as I,a7 as O,c as b,ar as q,o as z,a0 as e0,w as K,as as t0,r as k,Q as N,ae as A,P as s0,S as G,u as i0,i as a0,z as o0,N as l0,l as n0,a as r0,V as c0,U as d0,D as u0}from"./index-BbAPNE1Y.js";const v0={},m0={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 50 59",class:"bin"};function h0(e,f){return s(),o("svg",m0,f[0]||(f[0]=[u("path",{fill:"#B5BAC1",d:"M0 7.5C0 5.01472 2.01472 3 4.5 3H45.5C47.9853 3 50 5.01472 50 7.5V7.5C50 8.32843 49.3284 9 48.5 9H1.5C0.671571 9 0 8.32843 0 7.5V7.5Z"},null,-1),u("path",{fill:"#B5BAC1",d:"M17 3C17 1.34315 18.3431 0 20 0H29.3125C30.9694 0 32.3125 1.34315 32.3125 3V3H17V3Z"},null,-1),u("path",{fill:"#B5BAC1",d:"M2.18565 18.0974C2.08466 15.821 3.903 13.9202 6.18172 13.9202H43.8189C46.0976 13.9202 47.916 15.821 47.815 18.0975L46.1699 55.1775C46.0751 57.3155 44.314 59.0002 42.1739 59.0002H7.8268C5.68661 59.0002 3.92559 57.3155 3.83073 55.1775L2.18565 18.0974ZM18.0003 49.5402C16.6196 49.5402 15.5003 48.4209 15.5003 47.0402V24.9602C15.5003 23.5795 16.6196 22.4602 18.0003 22.4602C19.381 22.4602 20.5003 23.5795 20.5003 24.9602V47.0402C20.5003 48.4209 19.381 49.5402 18.0003 49.5402ZM29.5003 47.0402C29.5003 48.4209 30.6196 49.5402 32.0003 49.5402C33.381 49.5402 34.5003 48.4209 34.5003 47.0402V24.9602C34.5003 23.5795 33.381 22.4602 32.0003 22.4602C30.6196 22.4602 29.5003 23.5795 29.5003 24.9602V47.0402Z","clip-rule":"evenodd","fill-rule":"evenodd"},null,-1),u("path",{fill:"#B5BAC1",d:"M2 13H48L47.6742 21.28H2.32031L2 13Z"},null,-1)]))}const Q=L(v0,[["render",h0]]),f0={class:"deleteButton"},g0={__name:"DeleteButton",setup(e){return(f,l)=>(s(),o("button",f0,[H(Q),l[0]||(l[0]=u("span",{class:"tooltip"},"Delete",-1))]))}},w0=L(g0,[["__scopeId","data-v-cd7aaf9f"]]),C0="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='800px'%20height='800px'%20viewBox='-1%200%2020%2020'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cg%20id='Page-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id='Dribbble-Light-Preview'%20transform='translate(-381.000000,%20-8039.000000)'%20fill='%23fff'%3e%3cg%20id='icons'%20transform='translate(56.000000,%20160.000000)'%3e%3cpath%20d='M336.622775,7895.01452%20C333.022714,7895.3213%20329.929083,7892.89808%20329.177444,7889.58357%20C328.445822,7886.35728%20330.675718,7883.02874%20333.977526,7883.00969%20C336.468644,7882.99565%20338.540405,7884.8043%20338.941747,7887.1814%20C339.245004,7888.98202%20338.148072,7890.82275%20336.33453,7891.01324%20C334.529995,7891.20273%20333.0067,7889.7911%20333.0067,7888.02256%20C333.0067,7887.46914%20333.455081,7887.01999%20334.007551,7887.01999%20C334.560021,7887.01999%20335.008402,7887.46914%20335.008402,7888.02256%20C335.008402,7888.57598%20335.456783,7889.02513%20336.009253,7889.02513%20C336.561723,7889.02513%20337.010104,7888.57598%20337.010104,7888.02256%20C337.010104,7886.25402%20335.486809,7884.84239%20333.682275,7885.03188%20C331.868733,7885.22337%20330.7718,7887.0631%20331.075058,7888.86372%20C331.476399,7891.24183%20333.548161,7893.04947%20336.039279,7893.03543%20C339.341086,7893.01638%20341.570982,7889.68784%20340.83936,7886.46155%20C339.941597,7882.49938%20335.695987,7879.81147%20331.240198,7881.5369%20C328.964263,7882.41716%20327.340883,7884.52758%20327.062646,7886.95582%20C326.472144,7892.11507%20330.230339,7896.53241%20335.138513,7897.00463%20C335.637937,7897.05275%20336.009253,7897.49088%20336.009253,7897.99417%20C336.009253,7898.5917%20335.488811,7899.05489%20334.894305,7898.99474%20C329.388624,7898.44031%20325.07996,7893.82346%20325.000893,7888.18097%20C324.940842,7883.91401%20327.915371,7880.06111%20332.086918,7879.1989%20C337.477502,7878.08404%20342.265573,7881.79657%20342.935142,7886.81546%20C343.469596,7890.82075%20340.642192,7894.67164%20336.622775,7895.01452'%20id='-spiral-[%2330]'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",y0={class:"spinner-wrapper"},k0={__name:"SpinnerLoading",props:{loading:{type:Boolean,default:!1}},setup(e){return(f,l)=>(s(),o("div",y0,l[0]||(l[0]=[u("img",{src:C0,alt:"Loading...",class:"spinner"},null,-1)])))}},p0=L(k0,[["__scopeId","data-v-dd0f1b6e"]]),b0={class:"movie-details"},L0={class:"movie-header"},x0={key:0,class:"original-title"},S0={key:1,class:"meta"},B0={class:"year"},M0={key:2,class:"genres"},D0={key:0,class:"genre-count"},H0={__name:"CardMovieDetails",props:{movie:Object,isHistory:Boolean},setup(e){const f=l=>l&&l.replace(/\(\d{4}\)$/,"").trim();return(l,c)=>{var a,n,v,d;return s(),o("div",b0,[u("div",L0,[u("h3",null,y(f(e.movie.title)),1)]),(a=e.movie.raw_data)!=null&&a.name_en||(n=e.movie.raw_data)!=null&&n.Name_original?(s(),o("div",x0,y(e.movie.raw_data.name_en||e.movie.raw_data.Name_original),1)):g("",!0),e.movie.year?(s(),o("div",S0,[u("span",B0,y(e.movie.year),1)])):g("",!0),(d=(v=e.movie.raw_data)==null?void 0:v.genres)!=null&&d.length?(s(),o("div",M0,[(s(!0),o(Z,null,X(e.movie.raw_data.genres.slice(0,2),t=>(s(),o("span",{key:t.genre,class:"genre-tag"},y(t.genre),1))),128)),e.movie.raw_data.genres.length>2?(s(),o("span",D0," +"+y(e.movie.raw_data.genres.length-2),1)):g("",!0)])):g("",!0)])}}},$0=L(H0,[["__scopeId","data-v-60f08abc"]]),T0="/reyohoho/icons/icon-192x192.png",U0="data:image/svg+xml,%3csvg%20width='300'%20height='300'%20viewBox='0%200%20300%20300'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M297.414%20169.416L160.054%20160.146L285.858%20210.844C291.584%20197.897%20295.539%20183.984%20297.414%20169.416Z'%20fill='url(%23paint0_linear_1_70)'/%3e%3cpath%20d='M269.205%20239.454C241.988%20276.198%20198.425%20300%20149.327%20300C66.8558%20300%200%20232.843%200%20150C0%2067.1573%2066.8558%200%20149.327%200C198.516%200%20242.151%2023.8911%20269.357%2060.7518L144.608%20127.827L224.886%2045H180.387L125.733%20121.203V45H89.596V255H125.733V178.92L180.387%20255H224.886L146.693%20174.777L269.205%20239.454Z'%20fill='url(%23paint1_linear_1_70)'/%3e%3cpath%20d='M285.858%2089.1559L160.932%20139.494L297.413%20130.581C295.539%20116.014%20291.584%20102.102%20285.858%2089.1559Z'%20fill='url(%23paint2_linear_1_70)'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_1_70'%20x1='148.707'%20y1='150'%20x2='298.701'%20y2='298.701'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23FF5500'/%3e%3cstop%20offset='1'%20stop-color='%23BBFF00'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_1_70'%20x1='148.707'%20y1='150'%20x2='298.701'%20y2='298.701'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23FF5500'/%3e%3cstop%20offset='1'%20stop-color='%23BBFF00'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint2_linear_1_70'%20x1='148.707'%20y1='150'%20x2='298.701'%20y2='298.701'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23FF5500'/%3e%3cstop%20offset='1'%20stop-color='%23BBFF00'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",V0="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20preserveAspectRatio='xMidYMid%20meet'%20viewBox='0%200%20575%20289.83'%20width='575'%20height='289.83'%3e%3cdefs%3e%3cpath%20d='M575%2024.91C573.44%2012.15%20563.97%201.98%20551.91%200C499.05%200%2076.18%200%2023.32%200C10.11%202.17%200%2014.16%200%2028.61C0%2051.84%200%20237.64%200%20260.86C0%20276.86%2012.37%20289.83%2027.64%20289.83C79.63%20289.83%20495.6%20289.83%20547.59%20289.83C561.65%20289.83%20573.26%20278.82%20575%20264.57C575%20216.64%20575%2048.87%20575%2024.91Z'%20id='d1pwhf9wy2'%3e%3c/path%3e%3cpath%20d='M69.35%2058.24L114.98%2058.24L114.98%20233.89L69.35%20233.89L69.35%2058.24Z'%20id='g5jjnq26yS'%3e%3c/path%3e%3cpath%20d='M201.2%20139.15C197.28%20112.38%20195.1%2097.5%20194.67%2094.53C192.76%2080.2%20190.94%2067.73%20189.2%2057.09C185.25%2057.09%20165.54%2057.09%20130.04%2057.09L130.04%20232.74L170.01%20232.74L170.15%20116.76L186.97%20232.74L215.44%20232.74L231.39%20114.18L231.54%20232.74L271.38%20232.74L271.38%2057.09L211.77%2057.09L201.2%20139.15Z'%20id='i3Prh1JpXt'%3e%3c/path%3e%3cpath%20d='M346.71%2093.63C347.21%2095.87%20347.47%20100.95%20347.47%20108.89C347.47%20115.7%20347.47%20170.18%20347.47%20176.99C347.47%20188.68%20346.71%20195.84%20345.2%20198.48C343.68%20201.12%20339.64%20202.43%20333.09%20202.43C333.09%20190.9%20333.09%2098.66%20333.09%2087.13C338.06%2087.13%20341.45%2087.66%20343.25%2088.7C345.05%2089.75%20346.21%2091.39%20346.71%2093.63ZM367.32%20230.95C372.75%20229.76%20377.31%20227.66%20381.01%20224.67C384.7%20221.67%20387.29%20217.52%20388.77%20212.21C390.26%20206.91%20391.14%20196.38%20391.14%20180.63C391.14%20174.47%20391.14%20125.12%20391.14%20118.95C391.14%20102.33%20390.49%2091.19%20389.48%2085.53C388.46%2079.86%20385.93%2074.71%20381.88%2070.09C377.82%2065.47%20371.9%2062.15%20364.12%2060.13C356.33%2058.11%20343.63%2057.09%20321.54%2057.09C319.27%2057.09%20307.93%2057.09%20287.5%2057.09L287.5%20232.74L342.78%20232.74C355.52%20232.34%20363.7%20231.75%20367.32%20230.95Z'%20id='a4ov9rRGQm'%3e%3c/path%3e%3cpath%20d='M464.76%20204.7C463.92%20206.93%20460.24%20208.06%20457.46%20208.06C454.74%20208.06%20452.93%20206.98%20452.01%20204.81C451.09%20202.65%20450.64%20197.72%20450.64%20190C450.64%20185.36%20450.64%20148.22%20450.64%20143.58C450.64%20135.58%20451.04%20130.59%20451.85%20128.6C452.65%20126.63%20454.41%20125.63%20457.13%20125.63C459.91%20125.63%20463.64%20126.76%20464.6%20129.03C465.55%20131.3%20466.03%20136.15%20466.03%20143.58C466.03%20146.58%20466.03%20161.58%20466.03%20188.59C465.74%20197.84%20465.32%20203.21%20464.76%20204.7ZM406.68%20231.21L447.76%20231.21C449.47%20224.5%20450.41%20220.77%20450.6%20220.02C454.32%20224.52%20458.41%20227.9%20462.9%20230.14C467.37%20232.39%20474.06%20233.51%20479.24%20233.51C486.45%20233.51%20492.67%20231.62%20497.92%20227.83C503.16%20224.05%20506.5%20219.57%20507.92%20214.42C509.34%20209.26%20510.05%20201.42%20510.05%20190.88C510.05%20185.95%20510.05%20146.53%20510.05%20141.6C510.05%20131%20509.81%20124.08%20509.34%20120.83C508.87%20117.58%20507.47%20114.27%20505.14%20110.88C502.81%20107.49%20499.42%20104.86%20494.98%20102.98C490.54%20101.1%20485.3%20100.16%20479.26%20100.16C474.01%20100.16%20467.29%20101.21%20462.81%20103.28C458.34%20105.35%20454.28%20108.49%20450.64%20112.7C450.64%20108.89%20450.64%2089.85%20450.64%2055.56L406.68%2055.56L406.68%20231.21Z'%20id='fk968BpsX'%3e%3c/path%3e%3c/defs%3e%3cg%3e%3cg%3e%3cg%3e%3cuse%20xlink:href='%23d1pwhf9wy2'%20opacity='1'%20fill='%23f6c700'%20fill-opacity='1'%3e%3c/use%3e%3cg%3e%3cuse%20xlink:href='%23d1pwhf9wy2'%20opacity='1'%20fill-opacity='0'%20stroke='%23000000'%20stroke-width='1'%20stroke-opacity='0'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3cg%3e%3cuse%20xlink:href='%23g5jjnq26yS'%20opacity='1'%20fill='%23000000'%20fill-opacity='1'%3e%3c/use%3e%3cg%3e%3cuse%20xlink:href='%23g5jjnq26yS'%20opacity='1'%20fill-opacity='0'%20stroke='%23000000'%20stroke-width='1'%20stroke-opacity='0'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3cg%3e%3cuse%20xlink:href='%23i3Prh1JpXt'%20opacity='1'%20fill='%23000000'%20fill-opacity='1'%3e%3c/use%3e%3cg%3e%3cuse%20xlink:href='%23i3Prh1JpXt'%20opacity='1'%20fill-opacity='0'%20stroke='%23000000'%20stroke-width='1'%20stroke-opacity='0'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3cg%3e%3cuse%20xlink:href='%23a4ov9rRGQm'%20opacity='1'%20fill='%23000000'%20fill-opacity='1'%3e%3c/use%3e%3cg%3e%3cuse%20xlink:href='%23a4ov9rRGQm'%20opacity='1'%20fill-opacity='0'%20stroke='%23000000'%20stroke-width='1'%20stroke-opacity='0'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3cg%3e%3cuse%20xlink:href='%23fk968BpsX'%20opacity='1'%20fill='%23000000'%20fill-opacity='1'%3e%3c/use%3e%3cg%3e%3cuse%20xlink:href='%23fk968BpsX'%20opacity='1'%20fill-opacity='0'%20stroke='%23000000'%20stroke-width='1'%20stroke-opacity='0'%3e%3c/use%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",F0={class:"movie-poster-container"},E0={key:0},R0={class:"movie-poster"},I0={key:1,class:"ratings-overlay"},Z0={key:1,class:"rating-kp"},X0={key:2,class:"rating-imdb"},N0={key:2,class:"poster-type"},P0={key:3,class:"poster-type"},Y0={__name:"CardsMovieMainContent",props:V({movie:Object,isMobile:Boolean,isHistory:Boolean,isUserList:Boolean,showDelete:Boolean,showStar:Boolean},{isMobile:!1,isHistory:!1,isUserList:!1,showDelete:!0,showStar:!1}),emits:["remove:from-history"],setup(e,{emit:f}){const l=f;return(c,a)=>{var v;const n=W("lazy");return s(),o("div",F0,[e.movie.poster||e.movie.cover?(s(),o("div",E0,[T(u("img",R0,null,512),[[n,e.movie.poster||e.movie.cover]]),!e.isMobile&&(e.isHistory||e.isUserList)&&e.showDelete?(s(),D(w0,{key:0,class:"delete-button","data-test-id":"delete-button",onClick:a[0]||(a[0]=J(d=>l("remove:from-history",e.movie.kp_id),["stop","prevent"]))})):g("",!0),e.movie.rating_kp||e.movie.rating_imdb||e.movie.average_rating?(s(),o("div",I0,[e.movie.rating||e.movie.average_rating?(s(),o("span",{key:0,class:U(["rating-our",{"with-star":e.showStar}])},[a[1]||(a[1]=u("img",{src:T0,alt:"ReYohoho",class:"rating-logo"},null,-1)),R(" "+y("".concat((e.movie.rating||e.movie.average_rating).toFixed(1).replace(/\.0$/,""))),1)],2)):g("",!0),e.movie.rating_kp?(s(),o("span",Z0,[a[2]||(a[2]=u("img",{src:U0,alt:"ÐšÐŸ",class:"rating-logo"},null,-1)),R(" "+y(e.movie.rating_kp),1)])):g("",!0),e.movie.rating_imdb?(s(),o("span",X0,[a[3]||(a[3]=u("img",{src:V0,alt:"IMDb",class:"rating-logo"},null,-1)),R(" "+y(e.movie.rating_imdb),1)])):g("",!0)])):g("",!0),e.movie.type&&M(I)[e.movie.type]?(s(),o("div",N0,y((v=M(I)[e.movie.type])!=null?v:""),1)):g("",!0),e.movie.type&&!M(I)[e.movie.type]?(s(),o("div",P0,y(e.movie.type.replace("ðŸŽ¬","")),1)):g("",!0)])):g("",!0)])}}},_0=L(Y0,[["__scopeId","data-v-1d2898b5"]]),A0={__name:"CardMovie",props:V({movie:Object,isHistory:Boolean,isMobile:Boolean,isCardBorder:Boolean,isUserList:Boolean,index:Number,activeMovieIndex:[Number,null],showDelete:Boolean,showStar:Boolean},{isHistory:!1,isCardBorder:!1,isMobile:!1,isUserList:!1,activeMovieIndex:null,index:0,showDelete:!0,showStar:!1}),emits:["remove:from-history","save:element"],setup(e,{emit:f}){const l=O(),c=b(()=>l.isCardHoverDisabled),a=f,n=q("element");return z(()=>{n.value&&n.value.$el&&a("save:element",n.value.$el)}),(v,d)=>{const t=e0("RouterLink");return s(),D(t,{ref_key:"element",ref:n,class:U(["movie-card",{active:e.activeMovieIndex===e.index,"has-border":e.isCardBorder,"hover-disabled":c.value,"card-border":e.isCardBorder}]),to:{name:"movie-info",params:{kp_id:e.movie.kp_id}},"data-test-id":"movie-card-".concat(e.movie.kp_id),tabindex:"0"},{default:K(()=>[H(_0,{movie:e.movie,"is-history":e.isHistory,"is-mobile":e.isMobile,"is-user-list":e.isUserList,"show-delete":e.showDelete,"show-star":e.showStar,"onRemove:fromHistory":d[0]||(d[0]=x=>a("remove:from-history",x))},null,8,["movie","is-history","is-mobile","is-user-list","show-delete","show-star"]),H($0,{movie:e.movie,"is-history":e.isHistory},null,8,["movie","is-history"])]),_:1},8,["class","to","data-test-id"])}}},j=L(A0,[["__scopeId","data-v-ca1f7d13"]]),G0={class:"icon-container"},j0={__name:"CardMovieSwipeWrapper",props:V({thresholdPercent:Number,disabled:Boolean,backgroundSwipeColor:String,showDelete:Boolean},{thresholdPercent:55,disabled:!1,backgroundSwipeColor:"#e53935",showDelete:!0}),emits:["slide"],setup(e,{emit:f}){t0(r=>({"2f4a621e":e.backgroundSwipeColor}));const l=f,c=q("swipeElement"),a=k(0),n=k(0),v=k(0),d=k(0),t=k(!1),x=k(0),w=k(!1),C=b(()=>n.value-a.value),F=b(()=>d.value-v.value),E=b(()=>t.value?C.value:0),B=b(()=>x.value*e.thresholdPercent/100);function $(r){var h,p;e.disabled||!e.showDelete||(x.value=(p=(h=c.value)==null?void 0:h.offsetWidth)!=null?p:0,a.value=r.touches[0].clientX,v.value=r.touches[0].clientY,n.value=a.value,d.value=v.value,t.value=!1,w.value=!1)}function i(r){if(e.disabled||w.value||!e.showDelete)return;n.value=r.touches[0].clientX,d.value=r.touches[0].clientY;const h=Math.abs(C.value),p=Math.abs(F.value);!t.value&&!w.value&&(p>h?(w.value=!0,t.value=!1):h>p&&h>10&&(t.value=!0)),t.value&&r.preventDefault()}function S(){if(e.disabled||!t.value||!e.showDelete){m();return}if(C.value<-B.value){t.value=!1,G(()=>{c.value.style.transform="translateX(-100%)",c.value.style.opacity="0"}),setTimeout(()=>{l("slide"),m()},300);return}if(C.value>B.value){t.value=!1,G(()=>{c.value.style.transform="translateX(100%)",c.value.style.opacity="0"}),setTimeout(()=>{l("slide"),m()},300);return}m()}function m(){a.value=0,n.value=0,v.value=0,d.value=0,t.value=!1,w.value=!1,c.value&&(c.value.style.transform="",c.value.style.opacity="")}return(r,h)=>(s(),o("div",{class:"swipe-container",onTouchstart:$,onTouchmove:i,onTouchend:S},[T(u("div",{class:U(["swipe-background",{"swipe-left":C.value>0,"swipe-right":C.value<0}])},[T(u("div",G0,[A(r.$slots,"swipe-icon",{},()=>[H(Q)])],512),[[N,a.value]])],2),[[N,!e.disabled&&!w.value]]),u("div",{ref_key:"swipeElement",ref:c,"data-test-id":"swipe-ref-element",class:U(["swipe-wrapper",{swiping:t.value}]),style:s0({transform:"translateX(".concat(E.value,"px)"),transition:t.value?"none":"transform 0.3s ease, opacity 0.3s ease"})},[A(r.$slots,"default",{},void 0)],6)],32))}},O0=L(j0,[["__scopeId","data-v-f95aa388"]]),q0={class:"grid"},z0={__name:"MovieList",props:V({moviesList:Array,isHistory:Boolean,loading:Boolean,showDelete:Boolean,showStar:Boolean},{isHistory:!1,loading:!0,showDelete:!0,showStar:!1}),emits:["item-deleted"],setup(e,{emit:f}){const l=i0(),c=a0(),a=O(),n=o0(),v=l0(),d=k([]),t=k(null),x=b(()=>a.isCardBorder),w=b(()=>l.isMobile),C=b(()=>{var i;return v.name==="lists"&&(!v.params.user_id||String(v.params.user_id)===String((i=c.user)==null?void 0:i.id))}),F=i=>n.resolve({name:"movie-info",params:{kp_id:i.kp_id}}).href,E=f,B=async i=>{if(c.token)try{await c0(i,d0.HISTORY),E("item-deleted",i)}catch(S){const{code:m}=u0(S);console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ð¸:",S),m===401&&(c.logout(),await n.push("/login"),n.go(0))}else l.removeFromHistory(i)},$=i=>{var h,p,P,Y;if(!((h=e.moviesList)!=null&&h.length)||!((P=(p=i.target)==null?void 0:p.classList)!=null&&P.contains("movie-card")))return;const S=document.querySelector(".grid"),r=window.getComputedStyle(S).gridTemplateColumns.split(" ").length;switch(i.key){case"ArrowRight":t.value=(t.value+1)%e.moviesList.length;break;case"ArrowLeft":t.value=(t.value-1+e.moviesList.length)%e.moviesList.length;break;case"ArrowUp":if(i.preventDefault(),t.value<=0){const _=document.querySelector(".search-input");_&&_.focus()}else t.value=Math.max(t.value-r,0);break;case"ArrowDown":i.preventDefault(),t.value=Math.min(t.value+r,e.moviesList.length-1);break;case"Home":t.value=0;break;case"End":t.value=e.moviesList.length-1;break;case"Enter":i.ctrlKey||i.metaKey?(i.preventDefault(),window.open(F(e.moviesList[t.value]),"_blank")):n.push({name:"movie-info",params:{kp_id:(Y=e.moviesList[t.value])==null?void 0:Y.kp_id}});break}};return n0(t,i=>{d.value[i]&&(d.value[i].scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),d.value[i].focus())}),z(()=>{document.addEventListener("keydown",$)}),r0(()=>{document.removeEventListener("keydown",$)}),(i,S)=>(s(),o("div",null,[T(u("div",q0,[(e.isHistory||C.value)&&w.value?(s(!0),o(Z,{key:0},X(e.moviesList,(m,r)=>(s(),D(M(O0),{key:m.kp_id,"data-test-id":"movie-card-swipe-wrapper-".concat(m.kp_id),"show-delete":e.showDelete,onSlide:h=>B(m.kp_id)},{default:K(()=>[H(M(j),{movie:m,"is-history":e.isHistory,"is-mobile":w.value,"is-user-list":C.value,index:r,"is-card-border":x.value,"active-movie-index":t.value,"show-delete":e.showDelete,"show-star":e.showStar,"onRemove:fromHistory":B,"onSave:element":h=>d.value[r]=h},null,8,["movie","is-history","is-mobile","is-user-list","index","is-card-border","active-movie-index","show-delete","show-star","onSave:element"])]),_:2},1032,["data-test-id","show-delete","onSlide"]))),128)):(s(!0),o(Z,{key:1},X(e.moviesList,(m,r)=>(s(),D(M(j),{key:m.kp_id,movie:m,"is-history":e.isHistory,"is-mobile":w.value,"is-user-list":C.value,index:r,"is-card-border":x.value,"active-movie-index":t.value,"show-delete":e.showDelete,"show-star":e.showStar,"onRemove:fromHistory":B,"onSave:element":h=>d.value[r]=h},null,8,["movie","is-history","is-mobile","is-user-list","index","is-card-border","active-movie-index","show-delete","show-star","onSave:element"]))),128))],512),[[N,!e.loading]]),e.loading?(s(),D(p0,{key:0})):g("",!0)]))}},Q0=L(z0,[["__scopeId","data-v-d22c4ed3"]]);export{w0 as D,Q0 as M,p0 as S,T0 as _,U0 as a,V0 as b};
