{"version":3,"file":"MovieSearch-legacy-DUC9iHDt.js","sources":["../../src/components/FooterDonaters.vue","../../src/components/MovieSearch.vue"],"sourcesContent":["<template>\n  <footer>\n    <div class=\"donaters-wrapper\">\n      <transition name=\"fade\" mode=\"out-in\">\n        <span v-if=\"currentDonater\" :key=\"currentIndex\" class=\"donater\">\n          {{ currentDonater }}\n        </span>\n      </transition>\n    </div>\n  </footer>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, onUnmounted } from 'vue'\nimport { getDons } from '@/api/movies'\n\nconst donaters = ref([])\nconst currentIndex = ref(-1)\nconst CACHE_KEY_DONATERS = 'donatersCache'\nlet intervalId = null\n\nconst currentDonater = computed(() => {\n  if (currentIndex.value === -1 || !donaters.value.length) return ''\n  return donaters.value[currentIndex.value]\n})\n\nconst fetchDonaters = async () => {\n  const today = new Date().toISOString().split('T')[0]\n  const cached = localStorage.getItem(CACHE_KEY_DONATERS)\n\n  if (cached) {\n    try {\n      const { date, data } = JSON.parse(cached)\n      if (date === today) {\n        donaters.value = data\n        return\n      }\n    } catch (e) {\n      console.error('Ошибка кэша донатеров:', e)\n    }\n  }\n\n  try {\n    const dons = await getDons()\n    donaters.value = dons\n      .split('\\n')\n      .map((line) => line.trim())\n      .filter((line) => line)\n    localStorage.setItem(\n      CACHE_KEY_DONATERS,\n      JSON.stringify({\n        date: today,\n        data: donaters.value\n      })\n    )\n  } catch (error) {\n    console.error('Ошибка загрузки донатеров:', error)\n  }\n}\n\nfunction updateCurrentDonater() {\n  if (!donaters.value.length) return\n  const newIndex = Math.floor(Math.random() * donaters.value.length)\n  currentIndex.value = newIndex\n}\n\nfunction startShowingDonaters() {\n  if (donaters.value.length === 0) return\n  updateCurrentDonater()\n  intervalId = setInterval(updateCurrentDonater, 4000)\n}\n\nonMounted(async () => {\n  await fetchDonaters()\n  startShowingDonaters()\n})\n\nonUnmounted(() => {\n  if (intervalId) clearInterval(intervalId)\n})\n</script>\n\n<style scoped>\n.donaters-wrapper {\n  width: 100%;\n  height: 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding-bottom: 10px;\n}\n\n.donater {\n  font-family: Neucha, sans-serif;\n  font-weight: bold;\n  color: rgba(255, 255, 255, 0.945);\n}\n\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 1s ease;\n}\n\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n</style>\n","<template>\n  <div class=\"wrapper\">\n    <div class=\"mainpage\">\n      <!-- Кнопки выбора типа поиска -->\n      <div class=\"search-type-buttons\">\n        <button :class=\"{ active: searchType === 'title' }\" @click=\"setSearchType('title')\">\n          Название\n        </button>\n        <button :class=\"{ active: searchType === 'kinopoisk' }\" @click=\"setSearchType('kinopoisk')\">\n          ID Кинопоиск\n        </button>\n        <button :class=\"{ active: searchType === 'shikimori' }\" @click=\"setSearchType('shikimori')\">\n          ID Shikimori\n        </button>\n        <button :class=\"{ active: searchType === 'imdb' }\" @click=\"setSearchType('imdb')\">\n          ID IMDB\n        </button>\n      </div>\n\n      <!-- Поиск -->\n      <div class=\"search-container\">\n        <div class=\"input-wrapper\">\n          <input\n            ref=\"searchInput\"\n            v-model=\"searchTerm\"\n            :placeholder=\"getPlaceholder()\"\n            class=\"search-input\"\n            :class=\"{ 'wrong-layout': showLayoutWarning }\"\n            :inputmode=\"searchType === 'title' ? 'text' : 'numeric'\"\n            @keydown.enter=\"search\"\n            @keydown.tab.prevent=\"handleTabKey\"\n            @keydown.down.prevent=\"focusFirstMovieCard\"\n            @input=\"handleInput\"\n          />\n          <div class=\"icons\">\n            <button v-if=\"searchTerm\" class=\"reset-button\" @click=\"resetSearch\">\n              <i class=\"fas fa-times\"></i>\n            </button>\n            <button class=\"search-button\" @click=\"search\">\n              <i class=\"fas fa-search\"></i>\n            </button>\n          </div>\n          <div v-if=\"showLayoutWarning\" class=\"layout-warning\" :class=\"{ show: showLayoutWarning }\">\n            <i class=\"fas fa-keyboard\"></i>\n            Возможно, вы используете неправильную раскладку. Нажмите Tab для переключения на\n            {{ suggestedLayout }} раскладку\n          </div>\n        </div>\n      </div>\n\n      <!-- Контейнер для истории и результатов -->\n      <div class=\"content-container\">\n        <!-- История просмотра -->\n        <div v-if=\"!searchTerm\">\n          <h2>\n            История просмотра\n            <span v-if=\"history.length > 0\">\n              <DeleteButton @click=\"showModal = true\" />\n              <BaseModal\n                :is-open=\"showModal\"\n                message=\"Вы уверены, что хотите очистить историю?\"\n                @confirm=\"clearAllHistory\"\n                @close=\"showModal = false\"\n              />\n            </span>\n          </h2>\n          <div v-if=\"loading\" class=\"loading-container\">\n            <SpinnerLoading />\n          </div>\n          <div v-else-if=\"history.length === 0\" class=\"empty-history\">\n            <span class=\"material-icons\">movie</span>\n            <p>Здесь пока пусто</p>\n          </div>\n          <MovieList\n            v-else\n            :movies-list=\"history\"\n            :is-history=\"true\"\n            :loading=\"false\"\n            @item-deleted=\"handleItemDeleted\"\n          />\n        </div>\n        <ErrorMessage\n          v-if=\"!searchTerm && errorMessage\"\n          :message=\"errorMessage\"\n          :code=\"errorCode\"\n        />\n\n        <!-- Результаты поиска -->\n        <div v-if=\"searchPerformed\">\n          <h2>Результаты поиска</h2>\n          <MovieList :movies-list=\"movies\" :is-history=\"false\" :loading=\"loading\" />\n          <div v-if=\"movies.length === 0 && !loading && !errorMessage\" class=\"no-results\">\n            Ничего не найдено\n          </div>\n          <ErrorMessage v-if=\"errorMessage\" :message=\"errorMessage\" :code=\"errorCode\" />\n        </div>\n\n        <!-- Подсказка, когда ничего не введено в поиске -->\n        <div\n          v-if=\"searchTerm && !searchPerformed && !loading && !errorMessage\"\n          class=\"search-prompt\"\n        >\n          Нажмите кнопку \"Поиск\" или Enter для поиска\n        </div>\n      </div>\n    </div>\n    <FooterDonaters />\n  </div>\n</template>\n\n<script setup>\nimport { apiSearch, getKpIDfromIMDB, getKpIDfromSHIKI } from '@/api/movies'\nimport { handleApiError } from '@/constants'\nimport { getMyLists, delAllFromList } from '@/api/user'\nimport BaseModal from '@/components/BaseModal.vue'\nimport DeleteButton from '@/components/buttons/DeleteButton.vue'\nimport ErrorMessage from '@/components/ErrorMessage.vue'\nimport FooterDonaters from '@/components/FooterDonaters.vue'\nimport { MovieList } from '@/components/MovieList/'\nimport { useMainStore } from '@/store/main'\nimport { useAuthStore } from '@/store/auth'\nimport { USER_LIST_TYPES_ENUM } from '@/constants'\nimport { hasConsecutiveConsonants, suggestLayout, convertLayout } from '@/utils/keyboardLayout'\nimport debounce from 'lodash/debounce'\nimport { watchEffect, onMounted, ref, watch } from 'vue'\nimport { useRouter } from 'vue-router'\nimport SpinnerLoading from '@/components/SpinnerLoading.vue'\n\nconst mainStore = useMainStore()\nconst authStore = useAuthStore()\nconst router = useRouter()\n\nconst searchType = ref('title')\nconst searchTerm = ref('')\nconst movies = ref([])\nconst loading = ref(false)\nconst searchPerformed = ref(false)\nconst showModal = ref(false)\nconst errorMessage = ref('')\nconst errorCode = ref(null)\n\nconst history = ref([])\n\nconst showLayoutWarning = ref(false)\nconst suggestedLayout = ref('')\n\nconst searchInput = ref(null)\n\nwatchEffect(async () => {\n  if (authStore.token) {\n    loading.value = true\n    try {\n      history.value = await getMyLists(USER_LIST_TYPES_ENUM.HISTORY)\n    } catch (error) {\n      const { message, code } = handleApiError(error)\n      errorMessage.value = message\n      errorCode.value = code\n      console.error('Ошибка загрузки истории:', error)\n      if (code === 401) {\n        authStore.logout()\n        await router.push('/login')\n        router.go(0)\n      }\n    } finally {\n      loading.value = false\n    }\n  } else {\n    history.value = mainStore.history\n  }\n})\n\nfunction handleItemDeleted(deletedItemId) {\n  history.value = history.value.filter((item) => item.kp_id !== deletedItemId)\n}\n\n// Установка типа поиска\nconst setSearchType = (type) => {\n  searchType.value = type\n  resetSearch()\n  showLayoutWarning.value = false\n}\n\nconst handleInput = (event) => {\n  if (searchType.value === 'title') {\n    searchTerm.value = event.target.value\n    showLayoutWarning.value = hasConsecutiveConsonants(searchTerm.value)\n    if (showLayoutWarning.value) {\n      suggestedLayout.value = suggestLayout(searchTerm.value)\n    }\n  } else {\n    searchTerm.value = event.target.value.replace(/\\D+/g, '')\n  }\n}\n\nconst handleTabKey = () => {\n  if (showLayoutWarning.value) {\n    searchTerm.value = convertLayout(searchTerm.value)\n    showLayoutWarning.value = false\n  }\n}\n\n// Получение placeholder для input\nconst getPlaceholder = () => {\n  return (\n    {\n      title: 'Введите название фильма',\n      kinopoisk: 'Пример: 301 (Матрица)',\n      shikimori: 'Пример: 28171 (Повар-боец Сома)',\n      imdb: 'Пример: 0198781 (Корпорация монстров)'\n    }[searchType.value] || 'Введите название фильма'\n  )\n}\n\n// Очистка поиска\nconst resetSearch = () => {\n  searchTerm.value = ''\n  movies.value = []\n  searchPerformed.value = false\n}\n\nconst search = () => {\n  debouncedPerformSearch.cancel()\n  if (searchTerm.value) {\n    performSearch()\n  } else {\n    alert('Введите запрос для поиска')\n  }\n}\n\nconst performSearch = async () => {\n  loading.value = true\n  searchPerformed.value = true\n  movies.value = []\n\n  try {\n    if (searchType.value === 'kinopoisk') {\n      if (!/^\\d+$/.test(searchTerm.value)) {\n        searchTerm.value = searchTerm.value.replace(/\\D/g, '')\n      }\n      router.push({ name: 'movie-info', params: { kp_id: searchTerm.value } })\n      return\n    }\n\n    if (searchType.value === 'imdb') {\n      if (!/^\\d+$/.test(searchTerm.value)) {\n        searchTerm.value = searchTerm.value.replace(/\\D/g, '')\n      }\n      const response = await getKpIDfromIMDB(searchTerm.value)\n      if (response.id_kp) {\n        router.push({ name: 'movie-info', params: { kp_id: `${response.id_kp}` } })\n      } else {\n        throw new Error('Не найдено')\n      }\n      return\n    }\n\n    if (searchType.value === 'shikimori') {\n      if (!/^\\d+$/.test(searchTerm.value)) {\n        searchTerm.value = searchTerm.value.replace(/\\D/g, '')\n      }\n      const response = await getKpIDfromSHIKI(searchTerm.value)\n      if (response.id_kp) {\n        router.push({ name: 'movie-info', params: { kp_id: `${response.id_kp}` } })\n      } else {\n        throw new Error('Не найдено')\n      }\n      return\n    }\n    if (searchType.value === 'title') {\n      const response = await apiSearch(searchTerm.value)\n      movies.value = response.map((movie) => ({\n        ...movie,\n        kp_id: movie.id.toString(),\n        rating_kp: movie.raw_data?.rating !== 'null' ? movie.raw_data?.rating : null,\n        type: movie.raw_data?.type\n      }))\n    }\n  } catch (error) {\n    const { message, code } = handleApiError(error)\n    errorMessage.value = message\n    errorCode.value = code\n    console.error('Ошибка при поиске:', error)\n  } finally {\n    loading.value = false\n  }\n}\n\nconst clearAllHistory = async () => {\n  loading.value = true\n  if (authStore.token) {\n    try {\n      await delAllFromList(USER_LIST_TYPES_ENUM.HISTORY)\n      history.value = []\n      loading.value = false\n      showModal.value = false\n    } catch (error) {\n      const { message, code } = handleApiError(error)\n      errorMessage.value = message\n      errorCode.value = code\n      console.error('Ошибка загрузки истории:', error)\n      if (code === 401) {\n        authStore.logout()\n        await router.push('/login')\n        router.go(0)\n      }\n      loading.value = false\n      showModal.value = false\n    }\n  } else {\n    mainStore.clearAllHistory()\n    loading.value = false\n    showModal.value = false\n  }\n}\n\nconst debouncedPerformSearch = debounce(() => {\n  if (searchTerm.value.length >= 2) {\n    performSearch()\n  } else if (searchTerm.value.length < 2) {\n    movies.value = []\n    searchPerformed.value = false\n  }\n}, 700)\n\nonMounted(() => {\n  const hash = window.location.hash\n  if (hash.startsWith('#search=')) {\n    const searchQuery = decodeURIComponent(hash.replace('#search=', ''))\n    searchTerm.value = searchQuery\n    performSearch()\n  } else if (hash.startsWith('#imdb=')) {\n    const imdbId = decodeURIComponent(hash.replace('#imdb=', ''))\n    setSearchType('imdb')\n    searchTerm.value = imdbId\n    performSearch()\n  } else if (hash.startsWith('#shiki')) {\n    const shikiId = decodeURIComponent(hash.replace('#shiki', ''))\n    setSearchType('shikimori')\n    searchTerm.value = shikiId\n    performSearch()\n  }\n  searchInput.value?.focus()\n})\n\n// Автопоиск с задержкой (только для поиска по названию)\nwatch(searchTerm, () => {\n  if (searchType.value !== 'title') {\n    return\n  }\n  debouncedPerformSearch()\n})\n\nconst focusFirstMovieCard = () => {\n  if (movies.value.length > 0) {\n    const firstMovieCard = document.querySelector('.movie-card')\n    if (firstMovieCard) {\n      firstMovieCard.focus()\n    }\n  }\n}\n</script>\n\n<style scoped>\n.wrapper {\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n}\n\n.mainpage {\n  flex: 1;\n  padding-top: 20px;\n  padding-bottom: 40px;\n}\n\n/* Общие стили */\n.search-type-buttons {\n  display: flex;\n  justify-content: center;\n  gap: 20px;\n  padding-top: 10px;\n  margin-bottom: 5px;\n  flex-wrap: wrap;\n}\n\n.search-type-buttons button {\n  padding: 5px 10px;\n  font-size: 16px;\n  border: none;\n  background: none;\n  color: #fff;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  position: relative;\n}\n\n.search-type-buttons button::after {\n  content: '';\n  position: absolute;\n  left: 0;\n  bottom: -2px;\n  width: 100%;\n  height: 2px;\n  background-color: transparent;\n  transition: background-color 0.3s ease;\n}\n\n.search-type-buttons button.active::after {\n  background-color: #ffffff;\n}\n\n.search-type-buttons button:hover {\n  color: #ffffff;\n}\n\n.search-container {\n  display: flex;\n  justify-content: center;\n  padding: 20px;\n}\n\n.input-wrapper {\n  position: relative;\n  width: 100%;\n  max-width: 800px;\n}\n\n.search-input {\n  box-sizing: border-box;\n  width: 100%;\n  padding: 10px;\n  font-size: 16px;\n  border: 1px solid #ccc;\n  border-radius: 10px;\n  background: rgba(30, 30, 30, 0.8);\n  color: #fff;\n  transition: border-color 0.3s ease;\n}\n\n.search-input.wrong-layout {\n  border-color: #ff8c00;\n  box-shadow: 0 0 5px rgba(255, 140, 0, 0.2);\n}\n\n.icons {\n  position: absolute;\n  right: 10px;\n  top: 50%;\n  transform: translateY(-50%);\n  display: flex;\n  gap: 8px;\n  align-items: center;\n}\n\n.reset-button,\n.search-button {\n  background: none;\n  border: none;\n  color: #fff;\n  cursor: pointer;\n  padding: 2px;\n  opacity: 0.7;\n  transition: opacity 0.2s ease;\n}\n\n.reset-button:hover,\n.search-button:hover {\n  opacity: 1;\n}\n\n.reset-button i,\n.search-button i {\n  font-size: 18px;\n  display: block;\n  width: 20px;\n  height: 20px;\n}\n\nh2 {\n  display: flex;\n  font-size: 20px;\n  margin-bottom: 20px;\n  justify-content: center;\n  align-items: center;\n  gap: 10px;\n}\n\n/* Сообщение \"Ничего не найдено\" */\n.no-results {\n  width: 100%;\n  text-align: center;\n  color: #fff;\n  font-size: 18px;\n  margin-top: 20px;\n}\n\n/* Подсказка для поиска */\n.search-prompt {\n  text-align: center;\n  color: #fff;\n  font-size: 18px;\n  margin-top: 20px;\n}\n\n.layout-warning {\n  position: absolute;\n  bottom: -40px;\n  left: 0;\n  right: 0;\n  text-align: center;\n  color: #ff8c00;\n  font-size: 14px;\n  background: rgba(255, 140, 0, 0.15);\n  padding: 8px 12px;\n  border-radius: 5px;\n  pointer-events: none;\n  border: 1px solid rgba(255, 140, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  opacity: 0;\n  transform: translateY(-10px);\n  transition: all 0.3s ease;\n  z-index: 1;\n  backdrop-filter: blur(5px);\n}\n\n.layout-warning.show {\n  opacity: 1;\n  transform: translateY(0);\n}\n\n.layout-warning i {\n  font-size: 16px;\n  color: #ff8c00;\n}\n\n.layout-warning {\n  color: #ff8c00;\n}\n\n.loading-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 200px;\n  width: 100%;\n}\n\n.empty-history {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-height: 200px;\n  color: #888;\n  gap: 15px;\n}\n\n.empty-history .material-icons {\n  font-size: 64px;\n  color: #888;\n  opacity: 0.7;\n}\n\n.empty-history p {\n  font-size: 18px;\n  margin: 0;\n  color: #888;\n}\n\n@media (max-width: 600px) {\n  .mainpage {\n    padding-top: 0;\n    height: calc(100vh - 30px - 63px);\n  }\n\n  .search-container,\n  .search-type-buttons {\n    padding: 0;\n  }\n}\n</style>\n"],"names":["CACHE_KEY_DONATERS","donaters","ref","currentIndex","intervalId","currentDonater","computed","value","length","fetchDonaters","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","today","cached","_JSON$parse","date","data","dons","wrap","_callee$","_context","prev","next","Date","toISOString","split","localStorage","getItem","JSON","parse","abrupt","t0","console","error","getDons","sent","map","line","trim","filter","setItem","stringify","t1","stop","apply","this","arguments","updateCurrentDonater","newIndex","Math","floor","random","onMounted","_callee2","_callee2$","_context2","startShowingDonaters","setInterval","onUnmounted","clearInterval","mainStore","useMainStore","authStore","useAuthStore","router","useRouter","searchType","searchTerm","movies","loading","searchPerformed","showModal","errorMessage","errorCode","history","showLayoutWarning","suggestedLayout","searchInput","handleItemDeleted","deletedItemId","item","kp_id","watchEffect","_callee3","_handleApiError","message","code","_context3","token","getMyLists","USER_LIST_TYPES_ENUM","HISTORY","handleApiError","logout","push","go","finish","setSearchType","type","resetSearch","handleInput","event","target","hasConsecutiveConsonants","suggestLayout","replace","handleTabKey","convertLayout","search","debouncedPerformSearch","cancel","performSearch","alert","_ref4","_callee4","response","_response","_response2","_handleApiError2","_callee4$","_context4","test","name","params","getKpIDfromIMDB","id_kp","Error","getKpIDfromSHIKI","apiSearch","movie","_movie$raw_data","_movie$raw_data2","_movie$raw_data3","_objectSpread","id","toString","rating_kp","raw_data","rating","clearAllHistory","_ref5","_callee5","_handleApiError3","_callee5$","_context5","delAllFromList","debounce","_searchInput$value","hash","window","location","startsWith","searchQuery","decodeURIComponent","imdbId","shikiId","focus","watch","focusFirstMovieCard","firstMovieCard","document","querySelector","title","kinopoisk","shikimori","imdb"],"mappings":"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"}