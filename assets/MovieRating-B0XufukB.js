import{_ as Pt,r as p,c as ne,b as R,d as T,e as n,m as Oe,t as S,O as Ne,g as j,P as lt,n as N,l as ft,u as jt,q as No,N as Lo,B as Jt,x as Ye,o as Qt,S as Do,k as Mt,E as _o,f as Ft,Z as Kt,p as te,V as oe,A as he,U as K,am as Ho,an as qo,G as Yt,X as Bt,af as Wo,ad as zo,a7 as Vo,ao as Uo,ap as Xt}from"./index-V_MoznE6.js";import{S as Go}from"./SpinnerLoading-DYYgjreC.js";import{N as eo}from"./ToastMessage-CzPKhLMU.js";import{u as Ko,S as Yo}from"./player-BP399MPc.js";import{p as Zt,b as Xe}from"./dateUtils-BWepax9P.js";import{_ as Xo}from"./icon-imdb-logo-5qtstUwS.js";const ws="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVR4nO2ZQUoDMRSGR7eewHoFsVS0HkUUXNXqASqK2EURBPFIVRe6c+UN1CvUXWvbT4KvMAwzNnnJdCrmg1BKad7/v7y0b5IkiUQiCwGoAx3gQjEugZ0qxTeAIX6MKjMBnBOGS62AVWAPOHVYdlMu9YArYOhphLeBT+ALmOKGEd2QubaAK+B2zngFxt4GgDXgGZjgR8ch5oEkCi8DkvlnRcYLV0Apfqw10M7JvPkV6AN3FmVwK+WyZRnvMEe8ef/ibECyb2o+zRuwnpQAxeLNivQ0BvYyE46qEJ/8fK4ycJKp/X4V4n0MdDNfukkqEO9jwP1LDgD7BeKPgmgp04CL+KUz4Cp+qQxoxC+NAdsNm4c0hWkukkUa8BGfegiadbFDq3/2UAZ8xc+QVvzMtqcKYkBaZ5/MN5xEl2DgLGDZ1KswsC09FPJqXTZoNm5oA6kyMGI2FxqfkluJ0uMTDfhBXAHiHvCCWEL8/RLqlv1MPCf+TSZ+13WC7KnEfWlqcwAeU7GNjnbiQsG5UC1ZAEAt1UMhOpquk6zknMy9l20C2AA+MnEHRo9msuOCs9EH4Fp5TVQ0rqVs0plH4re02Qh1Oq1lCjypsp+5H3gKcD/gykTirqnFZ/ZDy+OGxpapzD+QePrM/2KkKfcGPcv7AdvRkz23G1x4JPIP+AY3r/ywUk/2JAAAAABJRU5ErkJggg==",ks="/reyohoho/assets/icon-shikimori-DGvXK9Jc.svg",Ze=L=>{const s=document.createElement("div");s.style.position="fixed",s.style.top="0",s.style.left="0",s.style.width="100%",s.style.height="100%",s.style.backgroundColor="rgba(0, 0, 0, 0.8)",s.style.color="white",s.style.display="flex",s.style.justifyContent="center",s.style.alignItems="center",s.style.fontSize="2rem",s.style.zIndex="99000",s.textContent=L,document.body.appendChild(s),setTimeout(()=>{document.body.removeChild(s)},2e3)},Zo={key:0},jo={key:1},Jo={class:"players-list"},Qo=["onClick"],en={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},tn={key:0},on={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},nn={key:1},sn={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},ln=["onClick"],an={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},rn={__name:"PlayerModal",props:{players:{type:Array,required:!0},selectedPlayer:{type:Object,default:null}},emits:["close","select"],setup(L,{emit:s}){const a=L,r=s,m=p(null),w=ne(()=>a.players.filter(k=>!f(k)&&!D(k))),H=ne(()=>a.players.some(k=>f(k))),A=ne(()=>a.players.some(k=>D(k))),f=k=>k.key.toUpperCase().includes("HDREZKA"),D=k=>k.key.toUpperCase().includes("KODIK"),G=k=>k.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"").replace(/KODIK>/,"").trim(),B=k=>{r("select",k),r("close")},se=k=>a.selectedPlayer&&a.selectedPlayer.key===k.key,W=k=>a.selectedPlayer?k==="hdrezka"&&f(a.selectedPlayer)||k==="kodik"&&D(a.selectedPlayer):!1,$=k=>{m.value=k},h=()=>{m.value=null},Se=k=>{let O=a.players.filter(b=>k==="hdrezka"&&f(b)||k==="kodik"&&D(b));return k==="kodik"?O.sort((b,J)=>G(b.translate).localeCompare(G(J.translate))):O},$e=k=>Se(k).some(O=>O.warning);return(k,O)=>(T(),R("div",{class:"modal",onClick:O[4]||(O[4]=ft(b=>k.$emit("close"),["self"]))},[n("div",{class:"modal-content",onClick:O[3]||(O[3]=ft(()=>{},["stop"]))},[n("button",{class:"close",onClick:O[0]||(O[0]=b=>k.$emit("close"))},"√ó"),m.value?(T(),R("h2",jo,[n("button",{class:"back-btn",onClick:h},"‚Üê –ù–∞–∑–∞–¥"),Oe(" "+S(m.value==="hdrezka"?"ReYohoho - HDrezka":"Kodik"),1)])):(T(),R("h2",Zo,"–í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–µ–µ—Ä")),n("ul",Jo,[m.value?(T(!0),R(Ne,{key:1},lt(Se(m.value),b=>(T(),R("li",{key:b.key},[n("button",{class:N(["player-item",{active:se(b)}]),onClick:J=>B(b)},[Oe(S(G(b.translate))+" ",1),b.warning?(T(),R("span",an,"warning")):j("",!0)],10,ln)]))),128)):(T(),R(Ne,{key:0},[(T(!0),R(Ne,null,lt(w.value,b=>(T(),R("li",{key:b.key},[n("button",{class:N(["player-item",{active:se(b)}]),onClick:J=>B(b)},[Oe(S(G(b.translate))+" ",1),b.warning?(T(),R("span",en,"warning")):j("",!0)],10,Qo)]))),128)),H.value?(T(),R("li",tn,[n("button",{class:N(["group-item",{active:W("hdrezka")}]),onClick:O[1]||(O[1]=b=>$("hdrezka"))},[O[5]||(O[5]=n("span",{class:"material-icons group-icon"},"folder",-1)),O[6]||(O[6]=Oe(" ReYohoho - HDrezka ")),$e("hdrezka")?(T(),R("span",on,"warning")):j("",!0)],2)])):j("",!0),A.value?(T(),R("li",nn,[n("button",{class:N(["group-item",{active:W("kodik")}]),onClick:O[2]||(O[2]=b=>$("kodik"))},[O[7]||(O[7]=n("span",{class:"material-icons group-icon"},"folder",-1)),O[8]||(O[8]=Oe(" Kodik ")),$e("kodik")?(T(),R("span",sn,"warning")):j("",!0)],2)])):j("",!0)],64))])])]))}},cn=Pt(rn,[["__scopeId","data-v-8b8d2b67"]]);class un{constructor(){this.ws=null,this.isConnected=!1,this.isAuthenticated=!1,this.messageId=0,this.sources=new Map,this.filtersFound=new Map,this.pendingRequests=new Map,this.callbacks={onConnect:null,onDisconnect:null,onSourcesUpdated:null,onFiltersFound:null,onError:null},this.BLUR_FILTER_NAME="reyohoho"}generateMessageId(){return++this.messageId}setCallbacks(s){this.callbacks=s}async connect(s="localhost",a=4455,r=""){return new Promise((m,w)=>{const H="ws://".concat(s,":").concat(a);console.log("Connecting to OBS WebSocket at ".concat(H)),this.ws=new WebSocket(H),this.ws.onopen=async()=>{var A,f;console.log("WebSocket connection opened");try{const D=await this.authenticate(r);console.log("Authentication response:",D),D.success?(console.log("Successfully authenticated to OBS"),(f=(A=this.callbacks).onConnect)==null||f.call(A),this.loadSourcesAndSearchFilters(),m()):(console.error("Authentication failed"),w(new Error("Authentication failed")))}catch(D){console.error("Error during authentication:",D),w(D)}},this.ws.onmessage=A=>{this.handleMessage(JSON.parse(A.data))},this.ws.onclose=()=>{var A,f;console.log("WebSocket connection closed"),(f=(A=this.callbacks).onDisconnect)==null||f.call(A)},this.ws.onerror=A=>{var f,D;console.error("WebSocket error:",A),(D=(f=this.callbacks).onError)==null||D.call(f,A.message||"Connection error"),w(A)}})}disconnect(){if(this.ws&&(this.ws.close(),this.ws=null),this.pendingRequests){for(const[,{reject:s}]of this.pendingRequests.entries())s(new Error("Connection closed"));this.pendingRequests.clear()}this.sources.clear(),this.filtersFound.clear()}sendRequest(s,a={}){return new Promise((r,m)=>{if(!this.isConnected||!this.ws){console.warn("No connection to OBS"),m(new Error("No connection to OBS"));return}const w=this.generateMessageId().toString(),H={op:6,d:{requestType:s,requestId:w,requestData:a}};console.log("Sending OBS request: ".concat(s),a),this.pendingRequests.set(w,{resolve:r,reject:m}),this.ws.send(JSON.stringify(H)),setTimeout(()=>{this.pendingRequests&&this.pendingRequests.has(w)&&(this.pendingRequests.delete(w),m(new Error("Request ".concat(s," timed out"))))},1e4)})}handleMessage(s){switch(s.op){case 0:this.handleHello(s.d);break;case 2:this.handleIdentified();break;case 7:this.handleRequestResponse(s.d);break;case 5:this.handleEvent(s.d);break;default:console.log("Unknown OBS message: op=".concat(s.op))}}authenticate(s=""){return new Promise(a=>{this.password=s,this.authResolve=a})}async handleHello(s){console.log("Received OBS hello"),this.isConnected=!0;const a={op:1,d:{rpcVersion:1}};if(s.authentication&&this.password)try{const r=new TextEncoder,m=await crypto.subtle.digest("SHA-256",r.encode(this.password+s.authentication.salt)),w=Array.from(new Uint8Array(m)),H=btoa(String.fromCharCode(...w)),A=await crypto.subtle.digest("SHA-256",r.encode(H+s.authentication.challenge)),f=Array.from(new Uint8Array(A)),D=btoa(String.fromCharCode(...f));a.d.authentication=D}catch(r){console.error("Authentication error:",r)}this.ws.send(JSON.stringify(a))}handleIdentified(){console.log("OBS authentication successful"),this.isAuthenticated=!0,this.authResolve&&(this.authResolve({success:!0}),this.authResolve=null)}handleRequestResponse(s){const{requestId:a,requestType:r,requestStatus:m,responseData:w}=s;if(console.log("Received response for ".concat(r,":"),{success:m.result,code:m.code,comment:m.comment}),!this.pendingRequests){console.warn("No pending requests map");return}const H=this.pendingRequests.get(a);if(!H){console.warn("No pending request found for ID: ".concat(a));return}this.pendingRequests.delete(a),m.result?(console.log("Request ".concat(r," successful"),w),H.resolve(w)):(console.error("Request ".concat(r," failed:"),m.comment),H.reject(new Error("".concat(r," failed: ").concat(m.comment))))}handleFilterListResponse(s){const a=s.sourceName,m=(s.filters||[]).find(w=>w.filterName.toLowerCase()===this.BLUR_FILTER_NAME.toLowerCase());m&&(this.foundFilters.set(a,{sourceName:a,filterName:m.filterName,enabled:m.filterEnabled}),console.log("Found reyohoho filter in source: ".concat(a))),this.checkSearchComplete()}checkSearchComplete(){setTimeout(()=>{var s,a;console.log("Search complete. Found ".concat(this.foundFilters.size," reyohoho filters")),(a=(s=this.callbacks).onFiltersFound)==null||a.call(s,Array.from(this.foundFilters.values()))},500)}handleEvent(s){console.log("OBS event: ".concat(s.eventType))}async testConnection(){try{console.log("Testing OBS connection...");const s=await this.sendRequest("GetVersion");return console.log("OBS connection test successful:",s),{success:!0,version:s}}catch(s){return console.error("OBS connection test failed:",s),{success:!1,error:s.message}}}async loadSourcesAndSearchFilters(){var s,a,r,m,w,H,A,f,D,G;try{console.log("Loading sources and searching for filters...");try{const $=await this.sendRequest("GetVersion");console.log("OBS version info:",$)}catch($){console.warn("Could not get OBS version:",$)}console.log("Requesting scene list...");const B=await this.sendRequest("GetSceneList");if(console.log("Raw scenes response:",B),!B||!B.scenes){console.error("Invalid scenes response structure:",B),(a=(s=this.callbacks).onError)==null||a.call(s,"Invalid response from OBS - no scenes data");return}console.log("Found scenes:",B.scenes.length),console.log("Requesting input list...");const se=await this.sendRequest("GetInputList");if(console.log("Raw inputs response:",se),!se||!se.inputs){console.error("Invalid inputs response structure:",se),(m=(r=this.callbacks).onError)==null||m.call(r,"Invalid response from OBS - no inputs data");return}console.log("Found inputs:",se.inputs.length),this.sources.clear(),this.filtersFound.clear();for(const $ of B.scenes)if(console.log("Checking scene: ".concat($.sceneName," with ").concat($.sceneItems?$.sceneItems.length:0," items")),$.sceneItems&&Array.isArray($.sceneItems))for(const h of $.sceneItems)h.sourceName&&(this.sources.set(h.sourceName,{sceneName:$.sceneName,sourceId:h.sceneItemId,sourceName:h.sourceName}),await this.searchFiltersInSource(h.sourceName,$.sceneName));for(const $ of se.inputs)console.log("Checking input: ".concat($.inputName)),this.sources.has($.inputName)||this.sources.set($.inputName,{sceneName:"Direct Input",sourceId:null,sourceName:$.inputName}),await this.searchFiltersInSource($.inputName,"Direct Input");const W=Array.from(this.filtersFound.values());console.log("Total filters found:",W.length),W.forEach($=>{console.log("- ".concat($.sourceName,": ").concat($.filterName," (").concat($.enabled?"enabled":"disabled",")"))}),(H=(w=this.callbacks).onFiltersFound)==null||H.call(w,W),(f=(A=this.callbacks).onSourcesUpdated)==null||f.call(A,Array.from(this.sources.values()))}catch(B){console.error("Error loading sources:",B),console.error("Error stack:",B.stack),(G=(D=this.callbacks).onError)==null||G.call(D,"Error loading sources: ".concat(B.message))}}async searchFiltersInSource(s,a){try{console.log("Searching filters in source: ".concat(s));const r=await this.sendRequest("GetSourceFilterList",{sourceName:s});console.log("Source ".concat(s," has ").concat(r.filters.length," filters"));for(const m of r.filters){console.log("  Filter: ".concat(m.filterName," (").concat(m.filterEnabled?"enabled":"disabled",")"));const w="".concat(s,"::").concat(m.filterName);this.filtersFound.set(w,{id:w,sourceName:s,sceneName:a,filterName:m.filterName,enabled:m.filterEnabled})}}catch(r){console.warn("Could not get filters for source ".concat(s,":"),r)}}async enableBlur(s){var r,m;if(!s){console.warn("No filter selected for blur");return}const a=this.filtersFound.get(s);if(!a){console.warn("Selected filter not found:",s);return}try{await this.sendRequest("SetSourceFilterEnabled",{sourceName:a.sourceName,filterName:a.filterName,filterEnabled:!0}),a.enabled=!0,console.log("Enabled blur filter: ".concat(a.sourceName,"::").concat(a.filterName))}catch(w){(m=(r=this.callbacks).onError)==null||m.call(r,"Error enabling filter: ".concat(w.message))}}async disableBlur(s){var r,m;if(!s){console.warn("No filter selected for blur");return}const a=this.filtersFound.get(s);if(!a){console.warn("Selected filter not found:",s);return}try{await this.sendRequest("SetSourceFilterEnabled",{sourceName:a.sourceName,filterName:a.filterName,filterEnabled:!1}),a.enabled=!1,console.log("Disabled blur filter: ".concat(a.sourceName,"::").concat(a.filterName))}catch(w){(m=(r=this.callbacks).onError)==null||m.call(r,"Error disabling filter: ".concat(w.message))}}async testBlur(s,a=2e3){if(!s){console.warn("No filter selected for test");return}await this.enableBlur(s),setTimeout(()=>{this.disableBlur(s)},a)}getFilterById(s){return this.filtersFound.get(s)}getAllFilters(){return Array.from(this.filtersFound.values())}}const dn={class:"players-list"},vn=["src"],pn={key:1,class:"controls"},mn={class:"main-controls"},fn={class:"material-icons"},gn={class:"list-button-item"},yn={class:"material-icons"},hn={class:"list-button-item"},bn={class:"material-icons"},wn={class:"list-button-item"},kn={class:"list-button-item"},xn={class:"material-icons"},Sn={class:"list-button-item"},Cn={class:"material-icons"},En={class:"tooltip-container","data-tooltip-container":"dimming"},In={class:"material-icons"},Tn={class:"tooltip-container","data-tooltip-container":"blur"},An={class:"tooltip-container","data-tooltip-container":"compressor"},$n={class:"tooltip-container","data-tooltip-container":"mirror"},Mn={class:"tooltip-container","data-tooltip-container":"theater"},Bn={class:"material-symbols-outlined"},Fn={class:"custom-tooltip","data-tooltip":"theater"},Pn={class:"tooltip-container","data-tooltip-container":"pip"},Rn={class:"tooltip-container","data-tooltip-container":"aspect_ratio"},On={class:"current-ratio"},Nn=["onClick"],Ln={key:0,class:"tooltip-container","data-tooltip-container":"app_link"},Dn={class:"custom-tooltip","data-tooltip":"app_link"},_n={key:1,class:"tooltip-container","data-tooltip-container":"copy_link"},Hn={class:"custom-tooltip","data-tooltip":"copy_link"},qn={key:2,class:"tooltip-container","data-tooltip-container":"overlay"},Wn={class:"material-icons"},zn={key:0,class:"desktop-list-buttons"},Vn={class:"tooltip-container"},Un={class:"material-icons"},Gn={class:"custom-tooltip"},Kn={class:"tooltip-container"},Yn={class:"material-icons"},Xn={class:"custom-tooltip"},Zn={class:"tooltip-container"},jn={class:"custom-tooltip"},Jn={class:"tooltip-container"},Qn={class:"material-icons"},es={class:"custom-tooltip"},ts={class:"tooltip-container"},os={class:"material-icons"},ns={class:"custom-tooltip"},ss={__name:"PlayerComponent",props:{kpId:String,movieInfo:{type:Object,default:()=>({})}},emits:["update:selectedPlayer","update:movieInfo"],setup(L,{emit:s}){const a=jt(),r=Ko(),m=No(),w=Lo(),H=Jt(),A=p(w.params.kp_id),f=L,D=s,G=p([]),B=p(null),se=p(!0),W=p(!1),$=p(!1),h=p(null),Se=p(null),$e=p(!1),k=p(""),O=p(null),b=p(window.innerHeight*.9),J=ne(()=>"".concat(b.value,"px")),Y=ne(()=>a.isMobile),g=ne(()=>!!window.electronAPI),C=p(null),at=p(!1);let gt=null;const We=p(null),to=p(null),oo=p(null),pe=p(null),ze=p(!1),we=p(!1),me=p(null),yt=p(null),rt=p(0),ce=p(null),Ce=p(null),ke=p(null),Le=p(null),De=p(null),Ee=p(null),q=ne({get:()=>r.videoOverlayEnabled2,set:t=>r.updateVideoOverlay(t)}),X=ne({get:()=>r.overlaySettings,set:t=>r.updateOverlaySettings(t)}),Rt=p(0),Ot=p(0),je=p([]),v=p(null),Ve=p(null),Ie=p(!1),Z=p(null),Te=p(!1),Nt=p([]),Ue=p([]),de=ne({get:()=>r.obsSettings,set:t=>r.updateObsSettings(t)}),ht=t=>{const e=document.querySelector('[data-tooltip-container="'.concat(t,'"]')),o=document.querySelector('[data-tooltip="'.concat(t,'"]'));if(!e||!o)return;const i=e.getBoundingClientRect(),l=o.getBoundingClientRect(),x=window.innerHeight;i.bottom+l.height>x?(o.style.top="auto",o.style.bottom="100%",o.style.marginTop="0",o.style.marginBottom="12px",o.style.transform="translateX(-50%)"):(o.style.top="100%",o.style.bottom="auto",o.style.marginTop="12px",o.style.marginBottom="0",o.style.transform="translateX(-50%)")},le=t=>{C.value=t,at.value=!1,clearTimeout(gt),Bt(()=>{ht(t)})},bt=()=>{at.value||(gt=setTimeout(()=>{C.value=null},300))},wt=()=>{at.value=!0,clearTimeout(gt)},ct=()=>{at.value=!1,C.value=null},Me=ne({get:()=>r.aspectRatio,set:t=>r.updateAspectRatio(t)}),Je=ne({get:()=>r.isCentered,set:t=>r.updateCentering(t)}),no=ne(()=>{var t,e,o,i,l,x,F,M,c,y;return((e=(t=f.movieInfo)==null?void 0:t.lists)==null?void 0:e.isFavorite)||((i=(o=f.movieInfo)==null?void 0:o.lists)==null?void 0:i.isWatching)||((x=(l=f.movieInfo)==null?void 0:l.lists)==null?void 0:x.isLater)||((M=(F=f.movieInfo)==null?void 0:F.lists)==null?void 0:M.isCompleted)||((y=(c=f.movieInfo)==null?void 0:c.lists)==null?void 0:y.isAbandoned)}),Lt=ne(()=>r.preferredPlayer),so=p(0),ut=t=>t.toUpperCase(),kt=()=>{if(W.value||!Se.value)return;const[t,e]=Me.value.split(":").map(Number);b.value=window.innerHeight*.9,so.value=Math.min(Se.value.clientWidth*(e/t),b.value)},io=ne(()=>{if(W.value)return{};const[t,e]=Me.value.split(":").map(Number),o=b.value*(t/e);return{width:"100%",maxWidth:"".concat(o,"px"),maxHeight:J.value,margin:"0 auto",overflow:"hidden"}}),lo=ne(()=>{const[t,e]=Me.value.split(":").map(Number);return{position:"relative",width:"100%",paddingTop:"".concat(e/t*100,"%")}}),Qe=()=>{Se.value&&setTimeout(()=>{Bt(()=>{Se.value.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})},500)},ao=async()=>{try{k.value="",O.value=null;let t;if(f.kpId.startsWith("shiki")){const e=f.kpId.replace("shiki","");t=await Ho(e)}else t=await qo(f.kpId);if(G.value=Object.entries(t).map(([e,o])=>({key:e.toUpperCase(),...o})),G.value.length>0){if(Lt.value){const e=ut(Lt.value),o=G.value.find(i=>ut(i.key)===e);B.value=o||G.value[0]}else B.value=G.value[0];D("update:selectedPlayer",B.value)}}catch(t){const{message:e,code:o}=Yt(t);k.value=e,O.value=o,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–ª–µ–µ—Ä–æ–≤:",t)}},ro=()=>{$e.value=!0},Dt=()=>{$e.value=!1},co=()=>{try{return ce.value||(ce.value=new(window.AudioContext||window.webkitAudioContext)),Ce.value||(Ce.value=ce.value.createDynamicsCompressor(),Ce.value.threshold.value=-50,Ce.value.knee.value=40,Ce.value.ratio.value=12,Ce.value.attack.value=0,Ce.value.release.value=.25,Le.value=ce.value.createGain(),De.value=ce.value.createGain(),Le.value.gain.value=0,De.value.gain.value=1,Ce.value.connect(Le.value),Le.value.connect(ce.value.destination),De.value.connect(ce.value.destination)),!0}catch(t){return console.log("Error initializing audio context:",t),!1}},uo=async t=>{try{if(!ce.value||Ee.value===t)return!0;const e=h.value,o=(e==null?void 0:e.src)||"";if(o.includes("videoframe")||o.includes("kinoserial.net")||o.includes("allarknow"))return console.log("Player detected as unsupported for compressor:",o),Ee.value=t,ke.value=null,we.value=!1,g.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –ø–ª–µ–µ—Ä–æ–º"),!1;if(ke.value)try{ke.value.disconnect()}catch(l){}const i=async(l=0)=>{l>0&&await new Promise(x=>setTimeout(x,l));try{return ke.value=ce.value.createMediaElementSource(t),Ee.value=t,ke.value.connect(Ce.value),ke.value.connect(De.value),console.log("Video audio setup completed (attempt with ".concat(l,"ms delay)")),!0}catch(x){if(x.name==="InvalidStateError"&&x.message.includes("already connected"))return console.log("MediaElementSource already connected (".concat(l,"ms delay attempt)")),!1;throw x}};return await i(0)||await i(100)||await i(300)||await i(800)?!0:(console.log("Video element has internal audio processing, compressor not available for this player"),Ee.value=t,ke.value=null,we.value=!1,g.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –ø–ª–µ–µ—Ä–æ–º"),!1)}catch(e){return console.log("Error setting up video audio:",e),!1}},xt=async t=>{if(h.value)try{const e=h.value,o=e.contentDocument||e.contentWindow.document;if(!o)return;const i=o.querySelectorAll("video");if(i.length===0)return;const l=i[0];if(!co())return;if(!await uo(l)||!ke.value){console.log("Compressor not available for this player");return}t&&!we.value?(Le.value.gain.setValueAtTime(1,ce.value.currentTime),De.value.gain.setValueAtTime(0,ce.value.currentTime),we.value=!0,g.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –≤–∫–ª—é—á—ë–Ω"),console.log("Compressor enabled")):!t&&we.value&&(Le.value.gain.setValueAtTime(0,ce.value.currentTime),De.value.gain.setValueAtTime(1,ce.value.currentTime),we.value=!1,g.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –æ—Ç–∫–ª—é—á—ë–Ω"),console.log("Compressor disabled"))}catch(e){console.log("Compressor error:",e),g.value&&window.electronAPI.showToast("–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä–∞")}},vo=()=>{if(h.value)try{const t=h.value,e=t.contentDocument||t.contentWindow.document;if(!e)return;const o=e.querySelectorAll("video");if(o.length>0){const i=o[0];i.style.filter.includes("blur")||(i.style.filter="blur(50px)")}else t.style.filter.includes("blur")||(t.style.filter="blur(50px)")}catch(t){console.log("Error enabling blur:",t)}},po=()=>{if(h.value)try{const t=h.value,e=t.contentDocument||t.contentWindow.document;if(!e)return;const o=e.querySelectorAll("video");if(o.length>0){const i=o[0];i.style.filter.includes("blur")&&(i.style.filter="")}else t.style.filter.includes("blur")&&(t.style.filter="")}catch(t){console.log("Error disabling blur:",t)}},mo=()=>{if(g.value)try{const t=h.value,e=t.contentDocument||t.contentWindow.document;if(!e)return;const o=e.querySelectorAll("video");if(o.length>0){const i=o[0];i.style.filter.includes("blur")?i.style.filter="":i.style.filter="blur(50px)"}else t.style.filter.includes("blur")?t.style.filter="":t.style.filter="blur(50px)"}catch(t){console.log("Error toggling blur:",t)}else Ze("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank")},_t=()=>{g.value?(_e.value=!_e.value,xt(_e.value)):(Ze("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},Ht=()=>{g.value?(Ge.value=!Ge.value,go(Ge.value)):(Ze("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},dt=()=>{W.value=!W.value,W.value?(window.addEventListener("mousemove",St),document.addEventListener("keydown",Ct),document.body.classList.add("no-scroll")):(window.removeEventListener("mousemove",St),document.removeEventListener("keydown",Ct),document.body.classList.remove("no-scroll")),$.value=W.value,Bt(()=>Qe())},qt=p(null),St=()=>{qt.value=setTimeout(()=>{clearTimeout(qt.value),$.value=!1},4e3),$.value=!0},vt=ne(()=>a.dimmingEnabled),fo=()=>{W.value||a.toggleDimming()},_e=ne({get:()=>r.compressorEnabled,set:t=>r.updateCompressor(t)}),Ge=ne({get:()=>r.mirrorEnabled,set:t=>r.updateMirror(t)}),go=t=>{if(h.value)try{const e=h.value,o=e.contentDocument||e.contentWindow.document;if(!o)return;const i=o.querySelectorAll("video");if(i.length>0&&(i.forEach(l=>{t?l.style.transform="scaleX(-1)":l.style.transform="scaleX(1)"}),ze.value=t,g.value)){const l=t?"–ó–µ—Ä–∫–∞–ª–æ –≤–∫–ª—é—á–µ–Ω–æ":"–ó–µ—Ä–∫–∞–ª–æ –æ—Ç–∫–ª—é—á–µ–Ω–æ";window.electronAPI.showToast(l)}}catch(e){}},yo=()=>{pe.value&&clearInterval(pe.value),pe.value=setInterval(()=>{if(h.value)try{const t=h.value,e=t.contentDocument||t.contentWindow.document;if(!e)return;const o=e.querySelectorAll("video");if(o.length>0){const i=o[0],x=i.style.transform==="scaleX(-1)";Ge.value&&!x?(i.style.transform="scaleX(-1)",ze.value=!0):!Ge.value&&x&&(i.style.transform="scaleX(1)",ze.value=!1),Ee.value!==i?(Ee.value=null,we.value=!1,_e.value&&setTimeout(()=>{xt(!0)},500)):_e.value!==we.value&&ke.value&&(console.log("Compressor state mismatch, reapplying"),xt(_e.value))}}catch(t){}},1e3)},ho=(t=!1)=>{if(!g.value)return;me.value&&clearInterval(me.value);let e=!1,o=[];function i(){var l;if(o=[],window.selectedNudityTimings&&Array.isArray(window.selectedNudityTimings)&&((l=f.movieInfo)!=null&&l.nudity_timings)){for(const x of f.movieInfo.nudity_timings)if(window.selectedNudityTimings.includes(x.id)){const F=Zt(x.timing_text);F&&F.length>0&&o.push(...F)}}}i(),me.value=setInterval(()=>{var l,x,F;if(h.value){i();try{const M=h.value,c=M.contentDocument||M.contentWindow.document;if(!c)return;const y=c.querySelectorAll("video");if(y.length>0){const E=y[0];if(Rt.value=E.currentTime||0,Ot.value=E.duration||0,g.value&&q.value&&!v.value&&!Ie.value&&Date.now()-(window.iframeLoadTime||0)>=3e3)try{Ke(c,E)}catch(Q){console.log("Error creating overlay:",Q),Ie.value=!1}if(g.value&&!q.value&&v.value&&setTimeout(()=>{!q.value&&v.value&&Be()},100),g.value&&((l=f.movieInfo)!=null&&l.nudity_timings)){const V=E.currentTime,Q=[],fe=[];if(window.overlayNudityTimings&&Array.isArray(window.overlayNudityTimings)&&window.overlayNudityTimings.length>0){for(const I of f.movieInfo.nudity_timings)if(window.overlayNudityTimings.includes(I.id)){const _=Zt(I.timing_text);if(_&&_.length>0){const ue=[];for(const[ae,ie]of _){let U="normal";V>=ae&&V<=ie?(U="active",fe.push(I.id)):ae>V&&ae-V<=5&&(U="upcoming"),ue.push({text:"[".concat(Xe(ae),"-").concat(Xe(ie),"]"),status:U})}Q.push({id:I.id,intervals:ue})}}}je.value=Q}if(g.value&&v.value&&q.value&&Gt(),!E.paused){const V=E.currentTime,Q=E.duration,fe=Q>0?V/Q*100:0;if(t&&(console.log("Video position: ".concat(V.toFixed(2),"s / ").concat(Q.toFixed(2),"s (").concat(fe.toFixed(1),"%)")),o.length>0)){const _=o.map(([ue,ae])=>"".concat(Xe(ue)," - ").concat(Xe(ae))).join(", ");console.log("Active blur intervals: [".concat(_,"]"))}let I=!1;for(const[_,ue]of o)if(V>=_&&V<=ue){I=!0;break}de.value.enabled&&Te.value&&de.value.selectedFilterId?I&&!e?((x=Z.value)==null||x.enableBlur(de.value.selectedFilterId),e=!0,console.log("OBS Blur applied at",V.toFixed(2),"seconds")):!I&&e&&((F=Z.value)==null||F.disableBlur(de.value.selectedFilterId),e=!1,console.log("OBS Blur removed at",V.toFixed(2),"seconds")):I&&!e&&g.value?(vo(),e=!0,console.log("Blur applied at",V.toFixed(2),"seconds")):!I&&e&&!de.value.enabled&&(po(),e=!1,console.log("Blur removed at",V.toFixed(2),"seconds"))}}}catch(M){console.log("Error monitoring video position:",M)}}},100)},bo=()=>{se.value=!1,window.iframeLoadTime=Date.now(),yo(),ho(),g.value&&q.value&&!v.value&&setTimeout(()=>{try{const t=h.value,e=t.contentDocument||t.contentWindow.document;if(e){const o=e.querySelector("video");o&&Ke(e,o)}}catch(t){console.log("Error creating overlay on iframe load:",t),Ie.value=!1}},3e3)},Ct=t=>{(t.key==="Escape"&&W.value||t.altKey&&t.keyCode===84)&&dt()},Wt=t=>{Me.value=t,setTimeout(()=>{Je.value&&Qe()},310)},wo=()=>{const t="reyohoho://#".concat(A.value);try{window.location.href=t}catch(e){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Å—ã–ª–∫–∏:",e)}},ko=()=>{const t=window.location.href;navigator.clipboard.writeText(t).then(()=>{}),We.value.showNotification("–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∏–ª—å–º —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞")};function zt(t){return t.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"HDRezka - ").replace(/KODIK>/,"Kodik - ").trim()}const xo=()=>{try{ke.value&&(ke.value.disconnect(),ke.value=null),ce.value&&(ce.value.close(),ce.value=null),Ce.value=null,Le.value=null,De.value=null,Ee.value=null,we.value=!1}catch(t){console.log("Error cleaning up audio context:",t)}},So=t=>{var e;if(((e=B.value)==null?void 0:e.key)===t.key){Dt();return}B.value=t,se.value=!0,ze.value=!1,we.value=!1,Ee.value=null,v.value&&Be(),pe.value&&(clearInterval(pe.value),pe.value=null),me.value&&(clearInterval(me.value),me.value=null),t.key.toLowerCase().includes("torrents")||r.updatePreferredPlayer(ut(t.key)),D("update:selectedPlayer",t)};Ye(B,t=>{t&&(se.value=!0,ze.value=!1,we.value=!1,Ee.value=null,v.value&&Be(),pe.value&&(clearInterval(pe.value),pe.value=null),me.value&&(clearInterval(me.value),me.value=null),t.key.toLowerCase().includes("torrents")||r.updatePreferredPlayer(ut(t.key)),D("update:selectedPlayer",t))}),Ye(()=>w.params.kp_id,async t=>{t&&t!==A.value&&(A.value=t,ze.value=!1,we.value=!1,Ee.value=null,v.value&&Be(),pe.value&&(clearInterval(pe.value),pe.value=null),me.value&&(clearInterval(me.value),me.value=null),rt.value=0,Je.value&&Qe())},{immediate:!0}),Ye(q,t=>{if(g.value)if(t&&!v.value){const e=()=>{if(h.value)try{const o=h.value,i=o.contentDocument||o.contentWindow.document;if(i){const l=i.querySelector("video");if(l){const x=Date.now()-(window.iframeLoadTime||0);x>=3e3?Ke(i,l):setTimeout(e,3e3-x)}}}catch(o){console.log("Error creating overlay via watcher:",o),Ie.value=!1}};e()}else!t&&v.value&&Be()}),Ye(je,(t,e)=>{if(!g.value)return;const o=e&&e.length>0,i=t&&t.length>0;!o&&i&&(q.value||(q.value=!0,window.electronAPI&&window.electronAPI.showToast("–û–≤–µ—Ä–ª–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á—ë–Ω - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ç–∞–π–º–∏–Ω–≥–∏")))},{deep:!0}),Ye(()=>de.value.enabled,t=>{t&&!Te.value?It():!t&&Te.value&&Ut()}),Ye(X,(t,e)=>{!g.value||!q.value||(e&&t.showBackground!==e.showBackground?v.value&&(Be(),setTimeout(()=>{if(h.value&&q.value)try{const o=h.value,i=o.contentDocument||o.contentWindow.document;if(i){const l=i.querySelector("video");l&&Ke(i,l)}}catch(o){console.log("Error recreating overlay:",o)}},100)):v.value&&Gt())},{deep:!0});const pt=["16:9","12:5","4:3"],Co=()=>{const e=(pt.indexOf(Me.value)+1)%pt.length;Wt(pt[e])},Eo=t=>{var o,i,l,x,F,M,c,y,E,V,Q,fe,I;return(I={[K.FAVORITE]:((i=(o=f.movieInfo)==null?void 0:o.lists)==null?void 0:i.isFavorite)||!1,[K.HISTORY]:((x=(l=f.movieInfo)==null?void 0:l.lists)==null?void 0:x.isHistory)||!1,[K.LATER]:((M=(F=f.movieInfo)==null?void 0:F.lists)==null?void 0:M.isLater)||!1,[K.COMPLETED]:((y=(c=f.movieInfo)==null?void 0:c.lists)==null?void 0:y.isCompleted)||!1,[K.ABANDONED]:((V=(E=f.movieInfo)==null?void 0:E.lists)==null?void 0:V.isAbandoned)||!1,[K.WATCHING]:((fe=(Q=f.movieInfo)==null?void 0:Q.lists)==null?void 0:fe.isWatching)||!1}[t])!=null?I:!1},xe=async t=>{if(!m.token){We.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Io});return}try{const e={[K.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[K.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[K.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[K.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[K.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[K.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};Eo(t)?(await Wo(A.value,t),We.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(e[t]))):(await zo(A.value,t),We.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(e[t])))}catch(e){const{message:o,code:i}=Yt(e);We.value.showNotification("".concat(o," ").concat(i))}D("update:movieInfo")},Io=()=>{H.push("/login")},Et=ne(()=>r.showFavoriteTooltip),To=()=>{H.push("/settings"),ct()},Ao=async()=>{if(!g.value){Ze("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank");return}if(h.value)try{const t=h.value,e=t.contentDocument||t.contentWindow.document;if(!e)return;const o=e.querySelector("video");if(!o)return;document.pictureInPictureElement?await document.exitPictureInPicture():document.pictureInPictureEnabled?await o.requestPictureInPicture():Ze('–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–∂–∏–º "–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ"')}catch(t){console.error("Error toggling PiP:",t),Ze('–ù–µ —É–¥–∞–ª–æ—Å—å –≤–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º "–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ"')}},$o=()=>{if(q.value=!q.value,!q.value)Be();else{const t=()=>{if(!v.value&&h.value)try{const e=h.value,o=e.contentDocument||e.contentWindow.document;if(o){const i=o.querySelector("video");if(i){const l=Date.now()-(window.iframeLoadTime||0);l>=3e3?Ke(o,i):setTimeout(t,3e3-l)}}}catch(e){console.log("Error creating overlay:",e),Ie.value=!1}};t()}},Vt=()=>{Z.value&&Z.value.disconnect(),Z.value=new un,Z.value.setCallbacks({onConnect:()=>{Te.value=!0,r.setObsConnected(!0),g.value&&window.electronAPI&&window.electronAPI.showToast("–ü–æ–¥–∫–ª—é—á–µ–Ω –∫ OBS WebSocket")},onDisconnect:()=>{Te.value=!1,r.setObsConnected(!1),Nt.value=[],Ue.value=[]},onSourcesUpdated:t=>{Nt.value=t,window.obsSources=t},onFiltersFound:t=>{Ue.value=t,window.obsFiltersFound=t,r.updateObsSettings({filtersFound:t})},onError:t=>{console.error("OBS WebSocket error:",t),g.value&&window.electronAPI&&window.electronAPI.showToast("–û—à–∏–±–∫–∞ OBS: ".concat(t))}})},It=async()=>{Z.value||Vt(),await Z.value.connect(de.value.host,de.value.port,de.value.password)},Ut=()=>{Z.value&&Z.value.disconnect()},Mo=t=>{Z.value&&Te.value&&t?Z.value.testBlur(t):g.value&&window.electronAPI&&window.electronAPI.showToast("–§–∏–ª—å—Ç—Ä –Ω–µ –≤—ã–±—Ä–∞–Ω –∏–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ OBS")},Bo=()=>{Z.value&&Te.value&&Z.value.loadSourcesAndSearchFilters()},Fo=()=>Ue.value,Po=()=>{try{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen();const t=h.value;if(t){const e=t.contentDocument||t.contentWindow.document;if(e){e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen();const o=e.querySelector("video");o&&(o.webkitExitFullscreen?o.webkitExitFullscreen():o.exitFullscreen&&o.exitFullscreen())}}}catch(t){console.log("Error exiting fullscreen:",t)}},Ro=()=>{if(!g.value)return;const t=h.value,e=t.contentDocument||t.contentWindow.document;if(!e||e.getElementById("overlay-settings-modal"))return;const o=X.value,i=e.createElement("div");i.id="overlay-settings-modal",i.style.cssText="\n    position: fixed !important;\n    top: 0 !important;\n    left: 0 !important;\n    width: 100% !important;\n    height: 100% !important;\n    background: rgba(0, 0, 0, 0.8) !important;\n    display: flex !important;\n    align-items: center !important;\n    justify-content: center !important;\n    z-index: 9999 !important;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n  ";const l=e.createElement("div");l.style.cssText="\n    background: rgba(30, 30, 30, 0.95) !important;\n    backdrop-filter: blur(20px) !important;\n    border-radius: 16px !important;\n    padding: 32px !important;\n    max-width: 400px !important;\n    width: 90% !important;\n    border: 1px solid rgba(255, 255, 255, 0.1) !important;\n    box-shadow: 0 8px 40px rgba(0, 0, 0, 0.5) !important;\n  ",l.innerHTML='\n    <h3 style="color: #ff6b35; margin: 0 0 24px 0; font-size: 20px; font-weight: 600; text-align: center;">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–≤–µ—Ä–ª–µ—è</h3>\n    \n    <div style="display: flex; flex-direction: column; gap: 16px;">\n      <label style="display: flex; align-items: center; gap: 12px; color: white; cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(255, 255, 255, 0.05);">\n        <input type="checkbox" id="showTitle" '.concat(o.showTitle?"checked":"",' style="width: 18px; height: 18px; accent-color: #ff6b35;">\n        <span style="font-size: 16px;">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞</span>\n      </label>\n      \n      <label style="display: flex; align-items: center; gap: 12px; color: white; cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(255, 255, 255, 0.05);">\n        <input type="checkbox" id="showDuration" ').concat(o.showDuration2?"checked":"",' style="width: 18px; height: 18px; accent-color: #ff6b35;">\n        <span style="font-size: 16px;">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</span>\n      </label>\n      \n      <label style="display: flex; align-items: center; gap: 12px; color: white; cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(255, 255, 255, 0.05);">\n        <input type="checkbox" id="showBackground" ').concat(o.showBackground?"checked":"",' style="width: 18px; height: 18px; accent-color: #ff6b35;">\n        <span style="font-size: 16px;">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–Ω—ã–π —Ñ–æ–Ω</span>\n      </label>\n      \n      <label style="display: flex; align-items: center; gap: 12px; color: white; cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(255, 255, 255, 0.05);">\n        <input type="checkbox" id="showTimingsOnMouseMove" ').concat(o.showTimingsOnMouseMove?"checked":"",' style="width: 18px; height: 18px; accent-color: #ff6b35;">\n        <span style="font-size: 16px;">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–∞–π–º–∏–Ω–≥–∏ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –º—ã—à–∫–∏</span>\n      </label>\n      \n      <label style="display: flex; align-items: center; gap: 12px; color: white; cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(255, 255, 255, 0.05);">\n        <input type="checkbox" id="highlightTimings" ').concat(o.highlightTimings?"checked":"",' style="width: 18px; height: 18px; accent-color: #ff6b35;">\n        <span style="font-size: 16px;">–ü–æ–¥—Å–≤–µ—á–∏–≤–∞—Ç—å –±–ª–∏–∑–∫–∏–µ –∏ —Ç–µ–∫—É—â–∏–µ —Ç–∞–π–º–∏–Ω–≥–∏</span>\n      </label>\n\n    </div>\n    \n    <div style="display: flex; gap: 12px; margin-top: 24px; justify-content: center;">\n      <button id="saveSettings" style="background: #ff6b35; color: white; border: none; border-radius: 8px; padding: 10px 20px; cursor: pointer; font-size: 16px; font-weight: 500; transition: all 0.3s ease;">\n        –°–æ—Ö—Ä–∞–Ω–∏—Ç—å\n      </button>\n      <button id="cancelSettings" style="background: rgba(255, 255, 255, 0.1); color: rgba(255, 255, 255, 0.8); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; padding: 10px 16px; cursor: pointer; font-size: 14px; transition: all 0.3s ease;">\n        –û—Ç–º–µ–Ω–∞\n      </button>\n    </div>\n  '),["click","mousedown","mouseup","mousemove","wheel","contextmenu"].forEach(c=>{l.addEventListener(c,y=>{y.stopPropagation(),y.stopImmediatePropagation()})}),i.appendChild(l),i.addEventListener("click",c=>{c.preventDefault(),c.stopPropagation(),c.stopImmediatePropagation(),c.target===i&&i.remove()}),["mousedown","mouseup","mousemove","wheel","contextmenu"].forEach(c=>{i.addEventListener(c,y=>{y.preventDefault(),y.stopPropagation(),y.stopImmediatePropagation()})}),l.querySelector("#saveSettings").addEventListener("click",c=>{var E;c.preventDefault(),c.stopPropagation(),c.stopImmediatePropagation();const y={showTitle:l.querySelector("#showTitle").checked,showDuration2:l.querySelector("#showDuration").checked,showBackground:l.querySelector("#showBackground").checked,showTimingsOnMouseMove:l.querySelector("#showTimingsOnMouseMove").checked,highlightTimings:l.querySelector("#highlightTimings").checked};X.value=y,(E=window.electronAPI)==null||E.showToast("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–≤–µ—Ä–ª–µ—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã"),i.remove()}),l.querySelector("#cancelSettings").addEventListener("click",c=>{c.preventDefault(),c.stopPropagation(),c.stopImmediatePropagation(),i.remove()}),l.querySelectorAll("button").forEach(c=>{c.addEventListener("mouseenter",y=>{y.preventDefault(),y.stopPropagation(),y.stopImmediatePropagation(),c.id==="saveSettings"?(c.style.background="#e55a2b",c.style.transform="translateY(-1px)"):c.style.background="rgba(255, 255, 255, 0.15)"}),c.addEventListener("mouseleave",y=>{y.preventDefault(),y.stopPropagation(),y.stopImmediatePropagation(),c.id==="saveSettings"?(c.style.background="#ff6b35",c.style.transform="translateY(0)"):c.style.background="rgba(255, 255, 255, 0.1)"}),["mousedown","mouseup","mousemove","wheel","contextmenu"].forEach(y=>{c.addEventListener(y,E=>{E.preventDefault(),E.stopPropagation(),E.stopImmediatePropagation()})})});const F=l.querySelectorAll('input[type="checkbox"]'),M=l.querySelectorAll("label");F.forEach(c=>{["click","mousedown","mouseup","mousemove","wheel","contextmenu"].forEach(y=>{c.addEventListener(y,E=>{y!=="click"?(E.preventDefault(),E.stopPropagation(),E.stopImmediatePropagation()):E.stopPropagation()})})}),M.forEach(c=>{["mousedown","mouseup","mousemove","wheel","contextmenu"].forEach(y=>{c.addEventListener(y,E=>{E.preventDefault(),E.stopPropagation(),E.stopImmediatePropagation()})})}),e.body.appendChild(i)},Ke=(t,e)=>{if(!q.value||v.value||Ie.value)return;Ie.value=!0;const o=t.createElement("div");o.id="reyohoho-video-overlay";let i=()=>{o.style.cssText="\n      position: absolute !important;\n      top: 0 !important;\n      left: 0 !important;\n      width: 100% !important;\n      height: 100% !important;\n      pointer-events: none !important;\n      z-index: 999999999 !important;\n      display: flex !important;\n      flex-direction: column !important;\n      justify-content: space-between !important;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n      visibility: visible !important;\n      opacity: 1 !important;\n    "};const l=t.createElement("div");l.style.cssText="\n    color: white !important;\n    padding: 20px !important;\n    text-align: left !important;\n    pointer-events: none !important;\n  ";const x=t.createElement("div"),F=X.value.showBackground?"rgba(0, 0, 0, 0.7)":"transparent",M=X.value.showBackground?"blur(10px)":"none",c=X.value.showBackground?"fit-content":"auto";x.style.cssText="\n    font-size: 20px !important;\n    font-weight: 600 !important;\n    margin-bottom: 8px !important;\n    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8) !important;\n    line-height: 1.2 !important;\n    padding: 8px 12px !important;\n    border-radius: 6px !important;\n    display: inline-block !important;\n    color: rgba(255, 255, 255, 0.6) !important;\n    background: ".concat(F," !important;\n    backdrop-filter: ").concat(M," !important;\n    width: ").concat(c," !important;\n  ");const y=t.createElement("div"),E=X.value.showBackground?"rgba(0, 0, 0, 0.7)":"transparent",V=X.value.showBackground?"blur(10px)":"none",Q=X.value.showBackground?"6px":"0",fe=X.value.showBackground?"inline-flex":"flex",I=X.value.showBackground?"fit-content":"auto";y.style.cssText="\n    font-size: 18px !important;\n    font-weight: 500 !important;\n    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8) !important;\n    display: ".concat(fe," !important;\n    align-items: center !important;\n    gap: 8px !important;\n    flex-wrap: wrap !important;\n    color: rgba(255, 255, 255, 0.6) !important;\n    margin-left: 12px !important;\n    background: ").concat(E," !important;\n    backdrop-filter: ").concat(V," !important;\n    border-radius: ").concat(Q," !important;\n    width: ").concat(I," !important;\n  ");const _=t.createElement("div"),ue=X.value.showBackground?"rgba(0, 0, 0, 0.7)":"transparent",ae=X.value.showBackground?"blur(10px)":"none";_.style.cssText="\n    position: absolute !important;\n    top: 20px !important;\n    right: 110px !important;\n    background: ".concat(ue," !important;\n    backdrop-filter: ").concat(ae," !important;\n    border-radius: 12px !important;\n    padding: 16px !important;\n    width: fit-content !important;\n    max-width: 800px !important;\n    pointer-events: none !important;\n    display: none !important;\n    transition: opacity 0.3s ease, visibility 0.3s ease !important;\n    opacity: 0 !important;\n    visibility: hidden !important;\n  ");const ie=t.createElement("div");ie.style.cssText="\n    font-size: 14px !important;\n    color: rgba(255, 255, 255, 0.6) !important;\n    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8) !important;\n    line-height: 1.4 !important;\n    word-wrap: break-word !important;\n  ";const U=t.createElement("div");U.style.cssText="\n    position: absolute !important;\n    top: 20px !important;\n    right: 20px !important;\n    display: flex !important;\n    gap: 8px !important;\n    pointer-events: all !important;\n  ";const re=t.createElement("button");re.style.cssText="\n    background: rgba(0, 0, 0, 0.8) !important;\n    backdrop-filter: blur(10px) !important;\n    color: white !important;\n    border: 1px solid rgba(255, 255, 255, 0.2) !important;\n    border-radius: 50% !important;\n    width: 40px !important;\n    height: 40px !important;\n    display: flex !important;\n    align-items: center !important;\n    justify-content: center !important;\n    cursor: pointer !important;\n    transition: all 0.3s ease !important;\n    font-size: 18px !important;\n  ",re.innerHTML="‚öôÔ∏è",re.title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–≤–µ—Ä–ª–µ—è";const be=t.createElement("button");be.style.cssText="\n    background: rgba(0, 0, 0, 0.8) !important;\n    backdrop-filter: blur(10px) !important;\n    color: white !important;\n    border: 1px solid rgba(255, 255, 255, 0.2) !important;\n    border-radius: 50% !important;\n    width: 40px !important;\n    height: 40px !important;\n    display: flex !important;\n    align-items: center !important;\n    justify-content: center !important;\n    cursor: pointer !important;\n    transition: all 0.3s ease !important;\n    font-size: 18px !important;\n  ",be.innerHTML="üëÅÔ∏è",be.title="–û—Ç–∫–ª—é—á–∏—Ç—å –æ–≤–µ—Ä–ª–µ–π",be.addEventListener("click",d=>{d.preventDefault(),d.stopPropagation(),d.stopImmediatePropagation(),q.value=!1}),re.addEventListener("click",d=>{d.preventDefault(),d.stopPropagation(),d.stopImmediatePropagation(),Po(),setTimeout(()=>{Ro()},100)}),[re,be].forEach(d=>{d.addEventListener("mouseenter",z=>{z.preventDefault(),z.stopPropagation(),z.stopImmediatePropagation(),d.style.background="#ff6b35",d.style.borderColor="#ff6b35",d.style.transform="scale(1.1)"}),d.addEventListener("mouseleave",z=>{z.preventDefault(),z.stopPropagation(),z.stopImmediatePropagation(),d.style.background="rgba(0, 0, 0, 0.8)",d.style.borderColor="rgba(255, 255, 255, 0.2)",d.style.transform="scale(1)"}),["mousedown","mouseup","mousemove","wheel","contextmenu"].forEach(z=>{d.addEventListener(z,P=>{P.preventDefault(),P.stopPropagation(),P.stopImmediatePropagation()})})}),["click","mousedown","mouseup","mousemove","wheel","contextmenu"].forEach(d=>{U.addEventListener(d,z=>{z.preventDefault(),z.stopPropagation(),z.stopImmediatePropagation()})}),U.appendChild(re),U.appendChild(be),_.appendChild(ie),l.appendChild(x),l.appendChild(y),o.appendChild(l),o.appendChild(_),o.appendChild(U),U.style.transition="opacity 0.3s ease, visibility 0.3s ease",U.style.opacity="0",U.style.visibility="hidden",l.style.transition="opacity 0.3s ease";let He=null,et=null;const tt=()=>{U.style.opacity="1",U.style.visibility="visible",l.style.opacity="0",X.value.showTimingsOnMouseMove&&je.value.length>0&&(_.style.opacity="1",_.style.visibility="visible",clearTimeout(et),et=setTimeout(()=>{_.style.opacity="0",_.style.visibility="hidden"},3e3)),clearTimeout(Ve.value),clearTimeout(He),Ve.value=setTimeout(()=>{U.style.opacity="0",U.style.visibility="hidden"},3e3),He=setTimeout(()=>{l.style.opacity="1"},2e3)};t.addEventListener("mousemove",tt),o.addEventListener("mouseenter",()=>{U.style.opacity="1",U.style.visibility="visible",l.style.opacity="0",clearTimeout(He)}),o.addEventListener("mouseleave",()=>{clearTimeout(Ve.value),clearTimeout(He),U.style.opacity="0",U.style.visibility="hidden",l.style.opacity="1"}),o._mouseHandler=tt;const Fe=(d=>{if(document.fullscreenElement===d||document.webkitFullscreenElement===d||d.webkitDisplayingFullscreen||d.offsetWidth===window.screen.width&&d.offsetHeight===window.screen.height)return t.body||t.documentElement;let P=d.parentNode,ge=0;const Ae=5;for(;P&&ge<Ae;){const ve=t.defaultView.getComputedStyle(P),ee=P.getBoundingClientRect();if(ee.width>0&&ee.height>0&&(ve.position==="relative"||ve.position==="absolute"||ve.position==="fixed"||P.tagName==="BODY"))return P;P=P.parentNode,ge++}return d.parentNode})(e);o._targetContainer=Fe,o._videoElement=e,i=()=>{const d=o._videoElement,z=o._targetContainer;if(document.fullscreenElement===d||document.webkitFullscreenElement===d||d.webkitDisplayingFullscreen||d.offsetWidth===window.screen.width&&d.offsetHeight===window.screen.height)o.style.cssText="\n        position: fixed !important;\n        top: 0 !important;\n        left: 0 !important;\n        width: 100vw !important;\n        height: 100vh !important;\n        pointer-events: none !important;\n        z-index: 999999999 !important;\n        display: flex !important;\n        flex-direction: column !important;\n        justify-content: space-between !important;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n        visibility: visible !important;\n        opacity: 1 !important;\n        box-sizing: border-box !important;\n      ";else{const ge=t.defaultView.getComputedStyle(d),Ae=z.getBoundingClientRect(),ve=d.offsetWidth||d.clientWidth||parseFloat(ge.width)||0,ee=d.offsetHeight||d.clientHeight||parseFloat(ge.height)||0,Re=d.getBoundingClientRect(),ye=Re.top-Ae.top+z.scrollTop,qe=Re.left-Ae.left+z.scrollLeft;o.style.cssText="\n        position: absolute !important;\n        top: ".concat(ye,"px !important;\n        left: ").concat(qe,"px !important;\n        width: ").concat(ve,"px !important;\n        height: ").concat(ee,"px !important;\n        pointer-events: none !important;\n        z-index: 999999999 !important;\n        display: flex !important;\n        flex-direction: column !important;\n        justify-content: space-between !important;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n        visibility: visible !important;\n        opacity: 1 !important;\n        box-sizing: border-box !important;\n      ")}},e.style.position="relative",(Fe.style.position===""||Fe.style.position==="static")&&(Fe.style.position="relative"),Fe.appendChild(o),i(),v.value=o,Ie.value=!1;const ot=setInterval(()=>{if(!v.value||!q.value){clearInterval(ot);return}if(!t.body.contains(o))try{const P=t.querySelectorAll("video");if(P.length>0){const ge=P[0];o._videoElement=ge;const ve=(ee=>{if(document.fullscreenElement===ee||document.webkitFullscreenElement===ee||ee.webkitDisplayingFullscreen||ee.offsetWidth===window.screen.width&&ee.offsetHeight===window.screen.height)return t.body||t.documentElement;let ye=ee.parentNode,qe=0;const mt=5;for(;ye&&qe<mt;){const u=t.defaultView.getComputedStyle(ye),$t=ye.getBoundingClientRect();if($t.width>0&&$t.height>0&&(u.position==="relative"||u.position==="absolute"||u.position==="fixed"||ye.tagName==="BODY"))return ye;ye=ye.parentNode,qe++}return ee.parentNode})(ge);o._targetContainer=ve,ve.appendChild(o),i(),o._mouseHandler&&(t.removeEventListener("mousemove",o._mouseHandler),t.addEventListener("mousemove",o._mouseHandler))}}catch(P){console.log("Error re-adding overlay to DOM:",P)}const d=t.defaultView.getComputedStyle(o);if((d.visibility==="hidden"||d.display==="none"||d.opacity==="0")&&i(),(parseInt(d.zIndex)||0)<999999999&&i(),o._videoElement&&o._targetContainer){const P=o._videoElement,ge=t.defaultView.getComputedStyle(P),Ae=document.fullscreenElement===P||document.webkitFullscreenElement===P||P.webkitDisplayingFullscreen||P.offsetWidth===window.screen.width&&P.offsetHeight===window.screen.height;let ve,ee;Ae?(ve=window.innerWidth,ee=window.innerHeight):(ve=P.offsetWidth||P.clientWidth||parseFloat(ge.width)||0,ee=P.offsetHeight||P.clientHeight||parseFloat(ge.height)||0);const Re=parseInt(d.width)||0,ye=parseInt(d.height)||0;(Math.abs(Re-ve)>5||Math.abs(ye-ee)>5)&&i()}},1e3),nt=new window.MutationObserver(d=>{d.forEach(z=>{z.type==="attributes"&&z.target===o&&z.attributeName==="style"&&setTimeout(()=>{v.value&&q.value&&i()},100)})});nt.observe(o,{attributes:!0,attributeFilter:["style","class"]});const st=()=>{v.value&&q.value&&i()},Pe=()=>{v.value&&q.value&&setTimeout(()=>{i()},100)};t.defaultView.addEventListener("resize",st),t.addEventListener("fullscreenchange",Pe),t.addEventListener("webkitfullscreenchange",Pe),e.addEventListener("webkitbeginfullscreen",Pe),e.addEventListener("webkitendfullscreen",Pe),o._monitorInterval=ot,o._mutationObserver=nt,o._resizeHandler=st,o._fullscreenHandler=Pe,o._iframeDoc=t;const it=setInterval(()=>{if(!v.value||!q.value){clearInterval(it);return}i()},500);setTimeout(()=>{clearInterval(it)},1e4)},Gt=()=>{var y,E,V,Q,fe;if(!v.value||!q.value)return;const t=h.value;if(!t)return;const e=t.contentDocument||t.contentWindow.document;if(!e)return;const o=v.value,i=o.children[0],l=o.children[1],x=e.defaultView.getComputedStyle(o);(x.display==="none"||x.visibility==="hidden")&&(o.style.display="flex !important",o.style.visibility="visible !important");const F=i.children[0];if(X.value.showTitle){F.style.display="block";const I=((y=f.movieInfo)==null?void 0:y.title)||((E=f.movieInfo)==null?void 0:E.name_ru)||((V=f.movieInfo)==null?void 0:V.name_en)||((Q=f.movieInfo)==null?void 0:Q.name_original)||"–ó–∞–≥—Ä—É–∑–∫–∞...",_=(fe=f.movieInfo)!=null&&fe.year?" (".concat(f.movieInfo.year,")"):"";F.textContent=I+_,X.value.showBackground?(F.style.background="rgba(0, 0, 0, 0.7) !important",F.style.backdropFilter="blur(10px) !important",F.style.width="fit-content !important",F.style.display="inline-block !important"):(F.style.background="transparent !important",F.style.backdropFilter="none !important",F.style.width="auto !important",F.style.display="inline-block !important")}else F.style.display="none";const M=i.children[1];let c="";if(X.value.showDuration2){const I=Xe(Rt.value),_=Xe(Ot.value);c="\n      <span style=\"font-family: 'Courier New', monospace; color: rgba(255, 255, 255, 0.6);\">".concat(I,'</span>\n      <span style="opacity: 0.6;">/</span>\n      <span style="font-family: \'Courier New\', monospace; color: rgba(255, 255, 255, 0.6);">').concat(_,"</span>\n    ")}if(de.value.enabled&&de.value.showObsInOverlay){let I="–û—Ç–∫–ª—é—á–µ–Ω";const _="#999999";if(Te.value)if(de.value.selectedFilterId){const ae=Ue.value.find(ie=>ie.id===de.value.selectedFilterId);ae?I="".concat(ae.filterName," (").concat(ae.sceneName,")"):I="–§–∏–ª—å—Ç—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω"}else Ue.value.length>0?I="–§–∏–ª—å—Ç—Ä –Ω–µ –≤—ã–±—Ä–∞–Ω":I="–§–∏–ª—å—Ç—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã";const ue='\n      <span style="color: '.concat(_,';">\n        OBS: ').concat(I,"\n      </span>\n    ");c=c?"".concat(c," ").concat(ue):ue}if(c?(M.style.display="flex",M.innerHTML=c,X.value.showBackground?(M.style.background="rgba(0, 0, 0, 0.7) !important",M.style.backdropFilter="blur(10px) !important",M.style.borderRadius="6px !important",M.style.padding="8px 12px !important",M.style.width="fit-content !important",M.style.display="inline-flex !important"):(M.style.background="transparent !important",M.style.backdropFilter="none !important",M.style.borderRadius="0 !important",M.style.padding="0 !important",M.style.width="auto !important",M.style.display="flex !important")):M.style.display="none",je.value.length>0){const I=l.children[0];I.innerHTML="";const _=e.createElement("span");_.textContent="–¢–∞–π–º–∏–Ω–≥–∏: ",_.style.color="rgba(255, 255, 255, 0.6)",I.appendChild(_),je.value.forEach((ue,ae)=>{if(ae>0){const ie=e.createElement("span");ie.textContent=", ",ie.style.color="rgba(255, 255, 255, 0.6)",I.appendChild(ie)}ue.intervals.forEach((ie,U)=>{if(U>0){const be=e.createElement("span");be.textContent=", ",be.style.color="rgba(255, 255, 255, 0.6)",I.appendChild(be)}const re=e.createElement("span");re.textContent=ie.text,ie.status==="active"&&X.value.highlightTimings?(re.style.color="#ff4444",re.style.fontWeight="bold"):ie.status==="upcoming"&&X.value.highlightTimings?(re.style.color="#ff6b35",re.style.fontWeight="500"):re.style.color="rgba(255, 255, 255, 0.6)",I.appendChild(re)})}),l.style.display="block",X.value.showTimingsOnMouseMove||(l.style.opacity="1",l.style.visibility="visible"),X.value.showBackground?(l.style.background="rgba(0, 0, 0, 0.7) !important",l.style.backdropFilter="blur(10px) !important",l.style.width="fit-content !important",l.style.minWidth="auto !important"):(l.style.background="transparent !important",l.style.backdropFilter="none !important",l.style.width="fit-content !important",l.style.minWidth="auto !important")}else l.style.display="none"},Be=()=>{if(v.value){try{v.value._monitorInterval&&clearInterval(v.value._monitorInterval),v.value._mutationObserver&&v.value._mutationObserver.disconnect(),v.value._resizeHandler&&v.value._iframeDoc&&v.value._iframeDoc.defaultView.removeEventListener("resize",v.value._resizeHandler),v.value._fullscreenHandler&&v.value._iframeDoc&&(v.value._iframeDoc.removeEventListener("fullscreenchange",v.value._fullscreenHandler),v.value._iframeDoc.removeEventListener("webkitfullscreenchange",v.value._fullscreenHandler),v.value._videoElement&&(v.value._videoElement.removeEventListener("webkitbeginfullscreen",v.value._fullscreenHandler),v.value._videoElement.removeEventListener("webkitendfullscreen",v.value._fullscreenHandler))),v.value._mouseHandler&&v.value._iframeDoc&&v.value._iframeDoc.removeEventListener("mousemove",v.value._mouseHandler),v.value.remove()}catch(t){console.log("Error removing overlay:",t)}v.value=null}Ie.value=!1,Ve.value&&(clearTimeout(Ve.value),Ve.value=null)};Qt(()=>{if(se.value=!0,ao(),Y.value&&(Me.value="4:3"),kt(),window.addEventListener("resize",kt),window.addEventListener("resize",ht),Je.value&&Qe(),window.toggleCompressor=_t,window.toggleMirror=Ht,Vt(),window.connectToOBS=It,window.testOBSBlur=Mo,window.refreshOBSFilters=Bo,window.getOBSFiltersInfo=Fo,window.testOBSConnection=Oo,window.debugOBS=()=>{var t;console.log("=== OBS Debug Info ==="),console.log("OBS Settings:",de.value),console.log("OBS Connected:",Te.value),console.log("OBS Filters Found:",Ue.value),console.log("OBS WebSocket instance:",Z.value),Z.value&&(console.log("WebSocket state:",(t=Z.value.ws)==null?void 0:t.readyState),console.log("Is Connected:",Z.value.isConnected),console.log("Is Authenticated:",Z.value.isAuthenticated))},de.value.enabled&&It(),g.value&&(yt.value=setInterval(()=>{const t=window.overlayNudityTimings?window.overlayNudityTimings.length:0;t>rt.value?(rt.value=t,q.value||(q.value=!0,window.electronAPI&&window.electronAPI.showToast("–û–≤–µ—Ä–ª–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á—ë–Ω - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ç–∞–π–º–∏–Ω–≥–∏"))):rt.value=t},1e3)),g.value&&q.value){const t=()=>{if(h.value&&!v.value)try{const e=h.value,o=e.contentDocument||e.contentWindow.document;if(o){const i=o.querySelector("video");if(i){const l=Date.now()-(window.iframeLoadTime||0);l>=3e3?Ke(o,i):setTimeout(t,3e3-l)}}}catch(e){console.log("Error initializing overlay on mount:",e),Ie.value=!1}};setTimeout(t,1e3)}}),Do(()=>{window.removeEventListener("resize",kt),window.removeEventListener("resize",ht),window.removeEventListener("mousemove",St),document.removeEventListener("keydown",Ct),document.body.classList.remove("no-scroll"),pe.value&&clearInterval(pe.value),me.value&&clearInterval(me.value),yt.value&&clearInterval(yt.value),Be(),xo(),Ut(),delete window.toggleCompressor,delete window.toggleMirror,delete window.connectToOBS,delete window.testOBSBlur,delete window.refreshOBSFilters,delete window.getOBSFiltersInfo,delete window.testOBSConnection,delete window.debugOBS,delete window.obsSources,delete window.obsFiltersFound});const Oo=async()=>Z.value&&Te.value?await Z.value.testConnection():{success:!1,error:"Not connected"};return(t,e)=>{var o,i,l,x,F,M,c,y,E,V,Q,fe,I,_,ue,ae,ie,U,re,be,He,et,tt,Tt,Fe,At,ot,nt,st,Pe,it,d,z,P,ge,Ae,ve,ee,Re,ye,qe,mt;return k.value?(T(),Mt(_o,{key:0,message:k.value,code:O.value},null,8,["message","code"])):(T(),R(Ne,{key:1},[n("div",dn,[e[43]||(e[43]=n("span",null,"–ü–ª–µ–µ—Ä:",-1)),n("button",{class:"player-btn",onClick:ro},S(B.value?zt(B.value.translate).toUpperCase():"–ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–µ–µ—Ä–æ–≤..."),1)]),$e.value?(T(),Mt(cn,{key:0,players:G.value,"selected-player":B.value,onClose:Dt,onSelect:So},null,8,["players","selected-player"])):j("",!0),n("div",{ref_key:"containerRef",ref:Se,class:N(["player-container",{"theater-mode":W.value}]),style:Kt(W.value?{}:io.value)},[n("div",{class:"iframe-wrapper",style:Kt(W.value?{}:lo.value)},[te(n("iframe",{ref_key:"playerIframe",ref:h,src:(o=B.value)==null?void 0:o.iframe,frameborder:"0",allowfullscreen:"",webkitallowfullscreen:"",class:N(["responsive-iframe",{"theater-mode-unlock":$.value,"theater-mode-lock":W.value,dimmed:vt.value}]),onLoad:bo},null,42,vn),[[oe,!se.value&&((i=B.value)==null?void 0:i.iframe)]]),se.value?(T(),Mt(Go,{key:0,text:"–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–ª–µ–µ—Ä: ".concat(B.value?zt(B.value.translate):"–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ –ø–ª–µ–µ—Ä–æ–≤","\n–ï—Å–ª–∏ –ø–ª–µ–µ—Ä –Ω–µ –≥—Ä—É–∑–∏—Ç—Å—è, —Ç–æ —Å–º–µ–Ω–∏—Ç–µ –ø–ª–µ–µ—Ä –≤—ã—à–µ –∏–ª–∏ –≤–∫–ª—é—á–∏—Ç–µ VPN"),style:{"white-space":"pre-line"}},null,8,["text"])):j("",!0)],4),W.value?(T(),R("button",{key:0,class:N(["close-theater-btn",{visible:$.value}]),onClick:dt}," ‚úñ ",2)):j("",!0)],6),W.value?j("",!0):(T(),R("div",pn,[n("div",mn,[!Y.value&&A.value?(T(),R("div",{key:0,ref_key:"tooltipContainer",ref:to,class:"tooltip-container list-buttons-container","data-tooltip-container":"favorite"},[Et.value?(T(),R("button",{key:0,class:N(["favorite-btn",{active:(x=(l=L.movieInfo)==null?void 0:l.lists)==null?void 0:x.isFavorite}]),onMouseenter:e[0]||(e[0]=u=>le("favorite")),onMouseleave:bt,onClick:e[1]||(e[1]=u=>xe(he(K).FAVORITE))},[n("span",fn,S((M=(F=L.movieInfo)==null?void 0:F.lists)!=null&&M.isFavorite?"favorite":"favorite_border"),1),n("span",{class:N(["material-icons dropdown-arrow",{highlighted:no.value}])},"expand_more",2)],34)):j("",!0),te(n("div",{ref_key:"tooltip",ref:oo,class:"custom-tooltip advanced-tooltip list-buttons-dropdown","data-tooltip":"favorite",onMouseenter:wt,onMouseleave:ct},[n("div",gn,[n("button",{class:N(["favorite-btn",{active:(y=(c=L.movieInfo)==null?void 0:c.lists)==null?void 0:y.isFavorite}]),onClick:e[2]||(e[2]=u=>xe(he(K).FAVORITE))},[n("span",yn,S((V=(E=L.movieInfo)==null?void 0:E.lists)!=null&&V.isFavorite?"favorite":"favorite_border"),1),e[44]||(e[44]=n("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))],2)]),n("div",hn,[n("button",{class:N(["watching-btn",{active:(fe=(Q=L.movieInfo)==null?void 0:Q.lists)==null?void 0:fe.isWatching}]),onClick:e[3]||(e[3]=u=>xe(he(K).WATCHING))},[n("span",bn,S((_=(I=L.movieInfo)==null?void 0:I.lists)!=null&&_.isWatching?"visibility":"visibility_off"),1),e[45]||(e[45]=n("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))],2)]),n("div",wn,[n("button",{class:N(["later-btn",{active:(ae=(ue=L.movieInfo)==null?void 0:ue.lists)==null?void 0:ae.isLater}]),onClick:e[4]||(e[4]=u=>xe(he(K).LATER))},e[46]||(e[46]=[n("span",{class:"material-icons"},"watch_later",-1),n("span",{class:"button-label"},"–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ",-1)]),2)]),n("div",kn,[n("button",{class:N(["completed-btn",{active:(U=(ie=L.movieInfo)==null?void 0:ie.lists)==null?void 0:U.isCompleted}]),onClick:e[5]||(e[5]=u=>xe(he(K).COMPLETED))},[n("span",xn,S((be=(re=L.movieInfo)==null?void 0:re.lists)!=null&&be.isCompleted?"check_circle":"check_circle_outline"),1),e[47]||(e[47]=n("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))],2)]),n("div",Sn,[n("button",{class:N(["abandoned-btn",{active:(et=(He=L.movieInfo)==null?void 0:He.lists)==null?void 0:et.isAbandoned}]),onClick:e[6]||(e[6]=u=>xe(he(K).ABANDONED))},[n("span",Cn,S(((Tt=(tt=L.movieInfo)==null?void 0:tt.lists)!=null&&Tt.isAbandoned,"not_interested")),1),e[48]||(e[48]=n("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))],2)]),n("div",{class:"tooltip-hint"},[e[50]||(e[50]=n("span",{class:"material-icons"},"settings",-1)),n("span",null,[e[49]||(e[49]=Oe("–°—Ç–∏–ª—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ ")),n("a",{class:"settings-link",onClick:To},"–Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö")])])],544),[[oe,C.value==="favorite"&&Et.value]])],512)):j("",!0),Y.value?j("",!0):(T(),R(Ne,{key:1},[n("div",En,[n("button",{class:N(["dimming-btn",{active:vt.value}]),onMouseenter:e[7]||(e[7]=u=>le("dimming")),onMouseleave:e[8]||(e[8]=u=>C.value=null),onClick:fo},[n("span",In,S(vt.value?"light_mode":"dark_mode"),1)],34),te(n("div",{class:"custom-tooltip","data-tooltip":"dimming"},S(vt.value?"–û—Ç–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ":"–í–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ"),513),[[oe,C.value==="dimming"]])]),n("div",Tn,[n("button",{class:N(["blur-btn",{"electron-only":!g.value}]),onMouseenter:e[9]||(e[9]=u=>le("blur")),onMouseleave:e[10]||(e[10]=u=>C.value=null),onClick:mo},e[51]||(e[51]=[n("span",{class:"material-icons"},"blur_on",-1)]),34),te(n("div",{class:"custom-tooltip","data-tooltip":"blur"},S(g.value?"–ë–ª—é—Ä":"–ë–ª—é—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[oe,C.value==="blur"]])]),n("div",An,[n("button",{class:N(["material-symbols-outlined",{active:_e.value,"electron-only":!g.value}]),onMouseenter:e[11]||(e[11]=u=>le("compressor")),onMouseleave:e[12]||(e[12]=u=>C.value=null),onClick:_t},e[52]||(e[52]=[n("span",{class:"material-icons"},"graphic_eq",-1)]),34),te(n("div",{class:"custom-tooltip","data-tooltip":"compressor"},S(g.value?"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä":"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[oe,C.value==="compressor"]])]),n("div",$n,[n("button",{class:N(["mirror-btn",{active:Ge.value,"electron-only":!g.value}]),onMouseenter:e[13]||(e[13]=u=>le("mirror")),onMouseleave:e[14]||(e[14]=u=>C.value=null),onClick:Ht},e[53]||(e[53]=[n("span",{class:"material-icons"},"flip",-1)]),34),te(n("div",{class:"custom-tooltip","data-tooltip":"mirror"},S(g.value?"–ó–µ—Ä–∫–∞–ª–æ":"–ó–µ—Ä–∫–∞–ª–æ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[oe,C.value==="mirror"]])]),n("div",Mn,[n("button",{class:"theater-mode-btn",onMouseenter:e[15]||(e[15]=u=>le("theater")),onMouseleave:e[16]||(e[16]=u=>C.value=null),onClick:dt},[n("span",Bn,S(W.value?"fullscreen_exit":"aspect_ratio"),1)],32),te(n("div",Fn,[Oe(S(W.value?"–í—ã–π—Ç–∏ –∏–∑ —Ç–µ–∞—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞":"–¢–µ–∞—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º")+" ",1),e[54]||(e[54]=n("span",{class:"shortcut-hint"},"Alt+T",-1))],512),[[oe,C.value==="theater"]])]),n("div",Pn,[n("button",{class:N(["pip-btn",{"electron-only":!g.value}]),onMouseenter:e[17]||(e[17]=u=>le("pip")),onMouseleave:e[18]||(e[18]=u=>C.value=null),onClick:Ao},e[55]||(e[55]=[n("span",{class:"material-icons"},"picture_in_picture_alt",-1)]),34),te(n("div",{class:"custom-tooltip","data-tooltip":"pip"},S(g.value?"–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ":"–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[oe,C.value==="pip"]])]),n("div",Rn,[n("button",{class:"aspect-ratio-dropdown-btn",onMouseenter:e[19]||(e[19]=u=>le("aspect_ratio")),onMouseleave:bt,onClick:Co},[n("span",On,S(Me.value),1)],32),te(n("div",{class:"custom-tooltip advanced-tooltip aspect-ratio-dropdown","data-tooltip":"aspect_ratio",onMouseenter:wt,onMouseleave:ct},[(T(),R(Ne,null,lt(pt,u=>n("div",{key:u,class:N(["aspect-ratio-option",{active:Me.value===u}]),onClick:$t=>Wt(u)},S(u),11,Nn)),64))],544),[[oe,C.value==="aspect_ratio"]])]),n("div",{class:"tooltip-container","data-tooltip-container":"centering",onMouseenter:e[21]||(e[21]=u=>le("centering")),onMouseleave:bt},[n("button",{class:"center-btn",onClick:Qe},e[56]||(e[56]=[n("span",{class:"material-icons"},"center_focus_strong",-1)])),te(n("div",{class:"custom-tooltip advanced-tooltip","data-tooltip":"centering",onMouseenter:wt,onMouseleave:ct},[e[57]||(e[57]=Oe(" –û—Ç—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–ª–µ–µ—Ä ")),Ft(Yo,{modelValue:Je.value,"onUpdate:modelValue":e[20]||(e[20]=u=>Je.value=u),title:"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞"},null,8,["modelValue"]),e[58]||(e[58]=n("span",{class:"tooltip-title"},"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞",-1))],544),[[oe,C.value==="centering"]])],32),!g.value&&A.value?(T(),R("div",Ln,[n("button",{class:"app-link-btn",onMouseenter:e[22]||(e[22]=u=>le("app_link")),onMouseleave:e[23]||(e[23]=u=>C.value=null),onClick:wo},e[59]||(e[59]=[n("span",{class:"material-icons"},"open_in_new",-1)]),32),te(n("div",Dn," –û—Ç–∫—Ä—ã—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ",512),[[oe,C.value==="app_link"]])])):j("",!0),g.value?(T(),R("div",_n,[n("button",{class:"copy-link-btn",onMouseenter:e[24]||(e[24]=u=>le("copy_link")),onMouseleave:e[25]||(e[25]=u=>C.value=null),onClick:ko},e[60]||(e[60]=[n("span",{class:"material-icons"},"content_copy",-1)]),32),te(n("div",Hn," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É ",512),[[oe,C.value==="copy_link"]])])):j("",!0),g.value?(T(),R("div",qn,[n("button",{class:N(["overlay-btn",{active:q.value}]),onMouseenter:e[26]||(e[26]=u=>le("overlay")),onMouseleave:e[27]||(e[27]=u=>C.value=null),onClick:$o},[n("span",Wn,S(q.value?"layers":"layers_clear"),1)],34),te(n("div",{class:"custom-tooltip","data-tooltip":"overlay"},S(q.value?"–°–∫—Ä—ã—Ç—å –æ–≤–µ—Ä–ª–µ–π –≤–∏–¥–µ–æ":"–ü–æ–∫–∞–∑–∞—Ç—å –æ–≤–µ—Ä–ª–µ–π –≤–∏–¥–µ–æ"),513),[[oe,C.value==="overlay"]])])):j("",!0)],64))]),!Y.value&&!Et.value&&A.value?(T(),R("div",zn,[n("div",Vn,[n("button",{class:N(["favorite-btn",{active:(At=(Fe=L.movieInfo)==null?void 0:Fe.lists)==null?void 0:At.isFavorite}]),onMouseenter:e[28]||(e[28]=u=>le("favorite")),onMouseleave:e[29]||(e[29]=u=>C.value=null),onClick:e[30]||(e[30]=u=>xe(he(K).FAVORITE))},[n("span",Un,S((nt=(ot=L.movieInfo)==null?void 0:ot.lists)!=null&&nt.isFavorite?"favorite":"favorite_border"),1)],34),te(n("div",Gn,S("–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"),512),[[oe,C.value==="favorite"]])]),n("div",Kn,[n("button",{class:N(["watching-btn",{active:(Pe=(st=L.movieInfo)==null?void 0:st.lists)==null?void 0:Pe.isWatching}]),onMouseenter:e[31]||(e[31]=u=>le("watching")),onMouseleave:e[32]||(e[32]=u=>C.value=null),onClick:e[33]||(e[33]=u=>xe(he(K).WATCHING))},[n("span",Yn,S((d=(it=L.movieInfo)==null?void 0:it.lists)!=null&&d.isWatching?"visibility":"visibility_off"),1)],34),te(n("div",Xn,S("–°–º–æ—Ç—Ä—é"),512),[[oe,C.value==="watching"]])]),n("div",Zn,[n("button",{class:N(["later-btn",{active:(P=(z=L.movieInfo)==null?void 0:z.lists)==null?void 0:P.isLater}]),onMouseenter:e[34]||(e[34]=u=>le("later")),onMouseleave:e[35]||(e[35]=u=>C.value=null),onClick:e[36]||(e[36]=u=>xe(he(K).LATER))},e[61]||(e[61]=[n("span",{class:"material-icons"},"watch_later",-1)]),34),te(n("div",jn,S("–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"),512),[[oe,C.value==="later"]])]),n("div",Jn,[n("button",{class:N(["completed-btn",{active:(Ae=(ge=L.movieInfo)==null?void 0:ge.lists)==null?void 0:Ae.isCompleted}]),onMouseenter:e[37]||(e[37]=u=>le("completed")),onMouseleave:e[38]||(e[38]=u=>C.value=null),onClick:e[39]||(e[39]=u=>xe(he(K).COMPLETED))},[n("span",Qn,S((ee=(ve=L.movieInfo)==null?void 0:ve.lists)!=null&&ee.isCompleted?"check_circle":"check_circle_outline"),1)],34),te(n("div",es,S("–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"),512),[[oe,C.value==="completed"]])]),n("div",ts,[n("button",{class:N(["abandoned-btn",{active:(ye=(Re=L.movieInfo)==null?void 0:Re.lists)==null?void 0:ye.isAbandoned}]),onMouseenter:e[40]||(e[40]=u=>le("abandoned")),onMouseleave:e[41]||(e[41]=u=>C.value=null),onClick:e[42]||(e[42]=u=>xe(he(K).ABANDONED))},[n("span",os,S(((mt=(qe=L.movieInfo)==null?void 0:qe.lists)!=null&&mt.isAbandoned,"not_interested")),1)],34),te(n("div",ns,S("–ë—Ä–æ—à–µ–Ω–æ"),512),[[oe,C.value==="abandoned"]])])])):j("",!0)])),Ft(eo,{ref_key:"notificationRef",ref:We},null,512)],64))}}},xs=Pt(ss,[["__scopeId","data-v-267c828f"]]),is={class:"rating-container"},ls={class:"rating-display"},as={class:"rating-numbers"},rs=["onClick","onMouseenter"],cs={key:0,class:"tooltip-footer"},us={class:"rating-numbers mobile-rating-numbers"},ds=["onClick"],vs={key:0,class:"mobile-modal-footer"},ps={__name:"MovieRating",props:{kpId:{type:String,required:!0},showDash:{type:Boolean,default:!1}},setup(L){const s=jt(),a=Jt(),r=L,m=p(null),w=p(null),H=p(null),A=p(null),f=p(0),D=p(!1),G=p(!1);let B=null;const se=b=>b?b.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",W=()=>{B=setTimeout(()=>{D.value=!1,s.isMobile||(G.value=!1)},100)},$=()=>{B&&(clearTimeout(B),B=null),D.value=!0},h=()=>{s.isMobile&&(G.value=!G.value)},Se=()=>{a.push("/login")},$e=async()=>{try{const b=await Uo(r.kpId);w.value=b.user_rating,H.value=b.average_rating,A.value=se(b.vote_count)}catch(b){console.error("Error loading rating:",b)}},k=async b=>{var J;try{b===w.value?(await Xt(r.kpId,null),w.value=null,m.value.showNotification("–û—Ü–µ–Ω–∫–∞ —É–¥–∞–ª–µ–Ω–∞")):(await Xt(r.kpId,b),w.value=b,m.value.showNotification("–û—Ü–µ–Ω–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞")),s.isMobile&&(G.value=!1),$e()}catch(Y){console.error("Error setting rating:",Y),((J=Y.response)==null?void 0:J.status)===401?m.value.showNotification('–î–ª—è –æ—Ü–µ–Ω–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Se}):m.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ü–µ–Ω–∫–∏"),s.isMobile&&(G.value=!1)}},O=()=>{G.value=!1};return Qt(()=>{$e()}),(b,J)=>(T(),R("div",is,[n("div",ls,[n("a",{href:"#",class:N(["rating-link",{"has-rating":w.value}]),onMouseenter:J[0]||(J[0]=Y=>D.value=!0),onMouseleave:W,onClick:ft(h,["prevent"])},[J[3]||(J[3]=n("img",{src:Xo,alt:"ReYohoho",class:"rating-logo"},null,-1)),n("span",{class:N(["average-rating",he(Vo)(H.value)])},S(H.value?H.value.toFixed(1).replace(/\.0$/,""):"‚Äî"),3)],34),te(n("div",{class:"rating-tooltip",onMouseenter:$,onMouseleave:W},[n("div",as,[(T(),R(Ne,null,lt(10,Y=>n("button",{key:Y,class:N(["number-btn",{active:Y===w.value,hover:Y===f.value,"average-highlight":H.value&&Y<=Math.round(H.value)}]),onClick:g=>k(Y),onMouseenter:g=>f.value=Y,onMouseleave:J[1]||(J[1]=g=>f.value=0)},S(Y),43,rs)),64))]),A.value?(T(),R("div",cs,"–û—Ü–µ–Ω–æ–∫: "+S(A.value),1)):j("",!0)],544),[[oe,(D.value||G.value)&&!he(s).isMobile]])]),Ft(eo,{ref_key:"notificationRef",ref:m},null,512),he(s).isMobile&&G.value?(T(),R("div",{key:0,class:"mobile-modal-overlay",onClick:O},[n("div",{class:"mobile-modal",onClick:J[2]||(J[2]=ft(()=>{},["stop"]))},[n("div",{class:"mobile-modal-header"},[J[4]||(J[4]=n("h3",null,"–û—Ü–µ–Ω–∏—Ç—å —Ñ–∏–ª—å–º",-1)),n("button",{class:"close-button",onClick:O},"√ó")]),n("div",us,[(T(),R(Ne,null,lt(10,Y=>n("button",{key:Y,class:N(["number-btn",{active:Y===w.value,"average-highlight":H.value&&Y<=Math.round(H.value)}]),onClick:g=>k(Y)},S(Y),11,ds)),64))]),A.value?(T(),R("div",vs,"–û—Ü–µ–Ω–æ–∫: "+S(A.value),1)):j("",!0)])])):j("",!0)]))}},Ss=Pt(ps,[["__scopeId","data-v-2df64bd5"]]);export{Ss as M,xs as P,ws as _,ks as a};
