import{_ as Te,r as m,c as D,b as u,d as a,e as t,s as ne,t as g,K as re,g as h,L as Ce,n as A,q as Ve,u as lt,i as gt,N as Mo,z as rt,l as Ue,o as Oe,O as kt,x as Ae,E as Eo,f as se,P as at,m as W,Q as te,y as X,U as Z,R as Fo,D as ft,S as _e,V as Oo,W as Lo,X as tt,Y as qo,Z as ko,$ as Ko,k as zo,v as ot,a0 as Wo,a1 as we,w as yo,a2 as nt,a3 as Go,a4 as Yo,a5 as Zo,a6 as Xo,a7 as ho,a8 as Qo,a9 as Jo,a as en,aa as po,ab as tn,ac as on,ad as nn}from"./index-BRhmzxbc.js";import{_ as ln,a as bo,b as wo,M as Co}from"./MovieList-X4MmiknP.js";import{S as Io}from"./SpinnerLoading-HUMPD4Hz.js";import{N as ut}from"./ToastMessage-NozRLdMk.js";import{u as sn,S as an,a as rn}from"./trailer-DjXMBYTi.js";import{u as Ro,f as un,a as dn}from"./dateUtils-BOe6ddGf.js";const We="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVR4nO2ZQUoDMRSGR7eewHoFsVS0HkUUXNXqASqK2EURBPFIVRe6c+UN1CvUXWvbT4KvMAwzNnnJdCrmg1BKad7/v7y0b5IkiUQiCwGoAx3gQjEugZ0qxTeAIX6MKjMBnBOGS62AVWAPOHVYdlMu9YArYOhphLeBT+ALmOKGEd2QubaAK+B2zngFxt4GgDXgGZjgR8ch5oEkCi8DkvlnRcYLV0Apfqw10M7JvPkV6AN3FmVwK+WyZRnvMEe8ef/ibECyb2o+zRuwnpQAxeLNivQ0BvYyE46qEJ/8fK4ycJKp/X4V4n0MdDNfukkqEO9jwP1LDgD7BeKPgmgp04CL+KUz4Cp+qQxoxC+NAdsNm4c0hWkukkUa8BGfegiadbFDq3/2UAZ8xc+QVvzMtqcKYkBaZ5/MN5xEl2DgLGDZ1KswsC09FPJqXTZoNm5oA6kyMGI2FxqfkluJ0uMTDfhBXAHiHvCCWEL8/RLqlv1MPCf+TSZ+13WC7KnEfWlqcwAeU7GNjnbiQsG5UC1ZAEAt1UMhOpquk6zknMy9l20C2AA+MnEHRo9msuOCs9EH4Fp5TVQ0rqVs0plH4re02Qh1Oq1lCjypsp+5H3gKcD/gykTirqnFZ/ZDy+OGxpapzD+QePrM/2KkKfcGPcv7AdvRkz23G1x4JPIP+AY3r/ywUk/2JAAAAABJRU5ErkJggg==",cn="/reyohoho/assets/icon-shikimori-DGvXK9Jc.svg",mt=s=>{const e=document.createElement("div");e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgba(0, 0, 0, 0.8)",e.style.color="white",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e.style.fontSize="2rem",e.style.zIndex="99000",e.textContent=s,document.body.appendChild(e),setTimeout(()=>{document.body.removeChild(e)},2e3)},vn={key:0},mn={key:1},fn={class:"players-list"},gn=["onClick"],kn={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},yn={key:0},hn={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},pn={key:1},bn={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},wn=["onClick"],Cn={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},_n={__name:"PlayerModal",props:{players:{type:Array,required:!0},selectedPlayer:{type:Object,default:null}},emits:["close","select"],setup(s,{emit:e}){const i=s,o=e,b=m(null),C=D(()=>i.players.filter(y=>!_(y)&&!l(y))),d=D(()=>i.players.some(y=>_(y))),k=D(()=>i.players.some(y=>l(y))),_=y=>y.key.toUpperCase().includes("HDREZKA"),l=y=>y.key.toUpperCase().includes("KODIK"),c=y=>y.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"").replace(/KODIK>/,"").trim(),r=y=>{o("select",y),o("close")},p=y=>i.selectedPlayer&&i.selectedPlayer.key===y.key,E=y=>i.selectedPlayer?y==="hdrezka"&&_(i.selectedPlayer)||y==="kodik"&&l(i.selectedPlayer):!1,P=y=>{b.value=y},L=()=>{b.value=null},R=y=>{let U=i.players.filter(x=>y==="hdrezka"&&_(x)||y==="kodik"&&l(x));return y==="kodik"?U.sort((x,q)=>c(x.translate).localeCompare(c(q.translate))):U},M=y=>R(y).some(U=>U.warning);return(y,U)=>(a(),u("div",{class:"modal",onClick:U[4]||(U[4]=Ve(x=>y.$emit("close"),["self"]))},[t("div",{class:"modal-content",onClick:U[3]||(U[3]=Ve(()=>{},["stop"]))},[t("button",{class:"close",onClick:U[0]||(U[0]=x=>y.$emit("close"))},"√ó"),b.value?(a(),u("h2",mn,[t("button",{class:"back-btn",onClick:L},"‚Üê –ù–∞–∑–∞–¥"),ne(" "+g(b.value==="hdrezka"?"ReYohoho - HDrezka":"Kodik"),1)])):(a(),u("h2",vn,"–í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–µ–µ—Ä")),t("ul",fn,[b.value?(a(!0),u(re,{key:1},Ce(R(b.value),x=>(a(),u("li",{key:x.key},[t("button",{class:A(["player-item",{active:p(x)}]),onClick:q=>r(x)},[ne(g(c(x.translate))+" ",1),x.warning?(a(),u("span",Cn,"warning")):h("",!0)],10,wn)]))),128)):(a(),u(re,{key:0},[(a(!0),u(re,null,Ce(C.value,x=>(a(),u("li",{key:x.key},[t("button",{class:A(["player-item",{active:p(x)}]),onClick:q=>r(x)},[ne(g(c(x.translate))+" ",1),x.warning?(a(),u("span",kn,"warning")):h("",!0)],10,gn)]))),128)),d.value?(a(),u("li",yn,[t("button",{class:A(["group-item",{active:E("hdrezka")}]),onClick:U[1]||(U[1]=x=>P("hdrezka"))},[U[5]||(U[5]=t("span",{class:"material-icons group-icon"},"folder",-1)),U[6]||(U[6]=ne(" ReYohoho - HDrezka ")),M("hdrezka")?(a(),u("span",hn,"warning")):h("",!0)],2)])):h("",!0),k.value?(a(),u("li",pn,[t("button",{class:A(["group-item",{active:E("kodik")}]),onClick:U[2]||(U[2]=x=>P("kodik"))},[U[7]||(U[7]=t("span",{class:"material-icons group-icon"},"folder",-1)),U[8]||(U[8]=ne(" Kodik ")),M("kodik")?(a(),u("span",bn,"warning")):h("",!0)],2)])):h("",!0)],64))])])]))}},Mn=Te(_n,[["__scopeId","data-v-8b8d2b67"]]),En={class:"players-list"},Ln=["src"],In={key:1,class:"controls"},Rn={class:"main-controls"},Tn={class:"material-icons"},Sn={class:"list-button-item"},Pn={class:"material-icons"},An={class:"list-button-item"},xn={class:"material-icons"},jn={class:"list-button-item"},Un={class:"list-button-item"},Bn={class:"material-icons"},$n={class:"list-button-item"},Hn={class:"material-icons"},Nn={class:"tooltip-container","data-tooltip-container":"dimming"},Dn={class:"material-icons"},Vn={class:"tooltip-container","data-tooltip-container":"blur"},Fn={class:"tooltip-container","data-tooltip-container":"compressor"},On={class:"custom-tooltip","data-tooltip":"compressor"},qn={class:"tooltip-container","data-tooltip-container":"mirror"},Kn={class:"custom-tooltip","data-tooltip":"mirror"},zn={class:"tooltip-container","data-tooltip-container":"theater"},Wn={class:"material-symbols-outlined"},Gn={class:"custom-tooltip","data-tooltip":"theater"},Yn={class:"tooltip-container","data-tooltip-container":"aspect_ratio"},Zn={class:"current-ratio"},Xn=["onClick"],Qn={key:0,class:"tooltip-container","data-tooltip-container":"app_link"},Jn={class:"custom-tooltip","data-tooltip":"app_link"},el={key:1,class:"tooltip-container","data-tooltip-container":"copy_link"},tl={class:"custom-tooltip","data-tooltip":"copy_link"},ol={key:0,class:"desktop-list-buttons"},nl={class:"tooltip-container"},ll={class:"material-icons"},sl={class:"custom-tooltip"},il={class:"tooltip-container"},al={class:"material-icons"},rl={class:"custom-tooltip"},ul={class:"tooltip-container"},dl={class:"custom-tooltip"},cl={class:"tooltip-container"},vl={class:"material-icons"},ml={class:"custom-tooltip"},fl={class:"tooltip-container"},gl={class:"material-icons"},kl={class:"custom-tooltip"},yl={key:1,class:"mobile-list-buttons"},hl={class:"tooltip-container"},pl={class:"material-icons"},bl={class:"custom-tooltip"},wl={class:"tooltip-container"},Cl={class:"material-icons"},_l={class:"custom-tooltip"},Ml={class:"tooltip-container"},El={class:"custom-tooltip"},Ll={class:"tooltip-container"},Il={class:"material-icons"},Rl={class:"custom-tooltip"},Tl={class:"tooltip-container"},Sl={class:"material-icons"},Pl={class:"custom-tooltip"},Al={__name:"PlayerComponent",props:{kpId:String,movieInfo:{type:Object,default:()=>({})}},emits:["update:selectedPlayer","update:movieInfo"],setup(s,{emit:e}){const i=lt(),o=sn(),b=gt(),C=Mo(),d=rt(),k=m(C.params.kp_id),_=s,l=e,c=m([]),r=m(null),p=m(!0),E=m(!1),P=m(!1),L=m(null),R=m(null),M=m(!1),y=m(""),U=m(null),x=m(window.innerHeight*.9),q=D(()=>"".concat(x.value,"px")),V=D(()=>i.isMobile),K=D(()=>!!window.electronAPI),S=m(null),ge=m(!1);let be=null;const ie=m(null),Ee=m(null),B=m(null),ee=m(null),F=m(!1),O=m(!1),le=m(null),ce=m(null),ue=m(null),ve=m(null),J=m(null),I=m(null),v=f=>{const n=document.querySelector('[data-tooltip-container="'.concat(f,'"]')),j=document.querySelector('[data-tooltip="'.concat(f,'"]'));if(!n||!j)return;const z=n.getBoundingClientRect(),oe=j.getBoundingClientRect(),ae=window.innerHeight;z.bottom+oe.height>ae?(j.style.top="auto",j.style.bottom="100%",j.style.marginTop="0",j.style.marginBottom="12px",j.style.transform="translateX(-50%)"):(j.style.top="100%",j.style.bottom="auto",j.style.marginTop="12px",j.style.marginBottom="0",j.style.transform="translateX(-50%)")},N=f=>{S.value=f,ge.value=!1,clearTimeout(be),_e(()=>{v(f)})},de=()=>{ge.value||(be=setTimeout(()=>{S.value=null},300))},H=()=>{ge.value=!0,clearTimeout(be)},ke=()=>{ge.value=!1,S.value=null},ye=D({get:()=>o.aspectRatio,set:f=>o.updateAspectRatio(f)}),Me=D({get:()=>o.isCentered,set:f=>o.updateCentering(f)}),Be=D(()=>{var f,n,j,z,oe,ae,$e,He,Ne,De;return((n=(f=_.movieInfo)==null?void 0:f.lists)==null?void 0:n.isFavorite)||((z=(j=_.movieInfo)==null?void 0:j.lists)==null?void 0:z.isWatching)||((ae=(oe=_.movieInfo)==null?void 0:oe.lists)==null?void 0:ae.isLater)||((He=($e=_.movieInfo)==null?void 0:$e.lists)==null?void 0:He.isCompleted)||((De=(Ne=_.movieInfo)==null?void 0:Ne.lists)==null?void 0:De.isAbandoned)}),he=D(()=>o.preferredPlayer),me=m(0),Ie=f=>f.toUpperCase(),Re=()=>{if(E.value||!R.value)return;const[f,n]=ye.value.split(":").map(Number);x.value=window.innerHeight*.9,me.value=Math.min(R.value.clientWidth*(n/f),x.value)},Le=D(()=>{if(E.value)return{};const[f,n]=ye.value.split(":").map(Number),j=x.value*(f/n);return{width:"100%",maxWidth:"".concat(j,"px"),maxHeight:q.value,margin:"0 auto",overflow:"hidden"}}),Ge=D(()=>{const[f,n]=ye.value.split(":").map(Number);return{position:"relative",width:"100%",paddingTop:"".concat(n/f*100,"%")}}),Se=()=>{R.value&&setTimeout(()=>{_e(()=>{R.value.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})},500)},qe=async()=>{try{y.value="",U.value=null;const f=await Fo(_.kpId);if(c.value=Object.entries(f).map(([n,j])=>({key:n.toUpperCase(),...j})),c.value.length>0){if(he.value){const n=Ie(he.value),j=c.value.find(z=>Ie(z.key)===n);r.value=j||c.value[0]}else r.value=c.value[0];l("update:selectedPlayer",r.value)}}catch(f){const{message:n,code:j}=ft(f);y.value=n,U.value=j,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–ª–µ–µ—Ä–æ–≤:",f)}},Ke=()=>{M.value=!0},w=()=>{M.value=!1},G=()=>{try{return le.value||(le.value=new(window.AudioContext||window.webkitAudioContext)),ce.value||(ce.value=le.value.createDynamicsCompressor(),ce.value.threshold.value=-50,ce.value.knee.value=40,ce.value.ratio.value=12,ce.value.attack.value=0,ce.value.release.value=.25,ve.value=le.value.createGain(),J.value=le.value.createGain(),ve.value.gain.value=0,J.value.gain.value=1,ce.value.connect(ve.value),ve.value.connect(le.value.destination),J.value.connect(le.value.destination)),!0}catch(f){return console.log("Error initializing audio context:",f),!1}},xe=async f=>{try{if(!le.value||I.value===f)return!0;const n=L.value,j=(n==null?void 0:n.src)||"";if(j.includes("videoframe")||j.includes("kinoserial.net")||j.includes("allarknow"))return console.log("Player detected as unsupported for compressor:",j),I.value=f,ue.value=null,O.value=!1,K.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –ø–ª–µ–µ—Ä–æ–º"),!1;if(ue.value)try{ue.value.disconnect()}catch(oe){}const z=async(oe=0)=>{oe>0&&await new Promise(ae=>setTimeout(ae,oe));try{return ue.value=le.value.createMediaElementSource(f),I.value=f,ue.value.connect(ce.value),ue.value.connect(J.value),console.log("Video audio setup completed (attempt with ".concat(oe,"ms delay)")),!0}catch(ae){if(ae.name==="InvalidStateError"&&ae.message.includes("already connected"))return console.log("MediaElementSource already connected (".concat(oe,"ms delay attempt)")),!1;throw ae}};return await z(0)||await z(100)||await z(300)||await z(800)?!0:(console.log("Video element has internal audio processing, compressor not available for this player"),I.value=f,ue.value=null,O.value=!1,K.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –ø–ª–µ–µ—Ä–æ–º"),!1)}catch(n){return console.log("Error setting up video audio:",n),!1}},Ye=async f=>{if(L.value)try{const n=L.value,j=n.contentDocument||n.contentWindow.document;if(!j)return;const z=j.querySelectorAll("video");if(z.length===0)return;const oe=z[0];if(!G())return;if(!await xe(oe)||!ue.value){console.log("Compressor not available for this player");return}f&&!O.value?(ve.value.gain.setValueAtTime(1,le.value.currentTime),J.value.gain.setValueAtTime(0,le.value.currentTime),O.value=!0,K.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –≤–∫–ª—é—á—ë–Ω"),console.log("Compressor enabled")):!f&&O.value&&(ve.value.gain.setValueAtTime(0,le.value.currentTime),J.value.gain.setValueAtTime(1,le.value.currentTime),O.value=!1,K.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –æ—Ç–∫–ª—é—á—ë–Ω"),console.log("Compressor disabled"))}catch(n){console.log("Compressor error:",n),K.value&&window.electronAPI.showToast("–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä–∞")}},dt=()=>{K.value?window.electronAPI.sendHotKey("F2"):(mt("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},$=()=>{K.value?(Fe.value=!Fe.value,Ye(Fe.value)):(mt("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},Y=()=>{K.value?(ze.value=!ze.value,To(ze.value)):(mt("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},Q=()=>{E.value=!E.value,E.value?(window.addEventListener("mousemove",je),document.addEventListener("keydown",ct),document.body.classList.add("no-scroll")):(window.removeEventListener("mousemove",je),document.removeEventListener("keydown",ct),document.body.classList.remove("no-scroll")),P.value=E.value,_e(()=>Se())},pe=m(null),je=()=>{pe.value=setTimeout(()=>{clearTimeout(pe.value),P.value=!1},4e3),P.value=!0},Pe=D(()=>i.dimmingEnabled),st=()=>{E.value||i.toggleDimming()},Fe=D({get:()=>o.compressorEnabled,set:f=>o.updateCompressor(f)}),ze=D({get:()=>o.mirrorEnabled,set:f=>o.updateMirror(f)}),To=f=>{if(L.value)try{const n=L.value,j=n.contentDocument||n.contentWindow.document;if(!j)return;const z=j.querySelectorAll("video");if(z.length>0&&(z.forEach(oe=>{f?oe.style.transform="scaleX(-1)":oe.style.transform="scaleX(1)"}),F.value=f,K.value)){const oe=f?"–ó–µ—Ä–∫–∞–ª–æ –≤–∫–ª—é—á–µ–Ω–æ":"–ó–µ—Ä–∫–∞–ª–æ –æ—Ç–∫–ª—é—á–µ–Ω–æ";window.electronAPI.showToast(oe)}}catch(n){}},So=()=>{ee.value&&clearInterval(ee.value),ee.value=setInterval(()=>{if(L.value)try{const f=L.value,n=f.contentDocument||f.contentWindow.document;if(!n)return;const j=n.querySelectorAll("video");if(j.length>0){const z=j[0],ae=z.style.transform==="scaleX(-1)";ze.value&&!ae?(z.style.transform="scaleX(-1)",F.value=!0):!ze.value&&ae&&(z.style.transform="scaleX(1)",F.value=!1),I.value!==z?(console.log("Video element changed, reinitializing compressor"),I.value=null,O.value=!1,Fe.value&&setTimeout(()=>{Ye(!0)},500)):Fe.value!==O.value&&ue.value&&(console.log("Compressor state mismatch, reapplying"),Ye(Fe.value))}}catch(f){}},1e3)},Po=()=>{p.value=!1,So()},ct=f=>{(f.key==="Escape"&&E.value||f.altKey&&f.keyCode===84)&&Q()},wt=f=>{ye.value=f,setTimeout(()=>{Me.value&&Se()},310)},Ao=()=>{const f="reyohoho://#".concat(k.value);try{window.location.href=f}catch(n){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Å—ã–ª–∫–∏:",n)}},xo=()=>{const f=window.location.href;navigator.clipboard.writeText(f).then(()=>{}),ie.value.showNotification("–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∏–ª—å–º —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞")};function jo(f){return f.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"HDRezka - ").replace(/KODIK>/,"Kodik - ").trim()}const Uo=D(()=>{var f,n;return K.value?!1:!((n=(f=r.value)==null?void 0:f.key)!=null&&n.toUpperCase().includes("TORRENTS"))}),Bo=()=>{try{ue.value&&(ue.value.disconnect(),ue.value=null),le.value&&(le.value.close(),le.value=null),ce.value=null,ve.value=null,J.value=null,I.value=null,O.value=!1}catch(f){console.log("Error cleaning up audio context:",f)}},$o=f=>{var n;if(((n=r.value)==null?void 0:n.key)===f.key){w();return}r.value=f,p.value=!0,F.value=!1,O.value=!1,I.value=null,ee.value&&(clearInterval(ee.value),ee.value=null),o.updatePreferredPlayer(Ie(f.key)),l("update:selectedPlayer",f)};Ue(r,f=>{if(f)if(p.value=!0,F.value=!1,O.value=!1,I.value=null,ee.value&&(clearInterval(ee.value),ee.value=null),o.updatePreferredPlayer(Ie(f.key)),l("update:selectedPlayer",f),f.key.toUpperCase().includes("TORRENTS")){const n=document.querySelector(".rocketme_fon");n&&(n.style.display="none");const j=document.querySelector(".pm_preloader");j&&(j.style.display="none")}else{const n=document.querySelector(".rocketme_fon");n&&(n.style.display="");const j=document.querySelector(".pm_preloader");j&&(j.style.display="")}}),Ue(()=>C.params.kp_id,async f=>{f&&f!==k.value&&(k.value=f,F.value=!1,O.value=!1,I.value=null,ee.value&&(clearInterval(ee.value),ee.value=null),Me.value&&Se())},{immediate:!0});const it=["16:9","12:5","4:3"],Ho=()=>{const n=(it.indexOf(ye.value)+1)%it.length;wt(it[n])},No=f=>{var j,z,oe,ae,$e,He,Ne,De,Ze,Xe,Qe,Je,et;return(et={[Z.FAVORITE]:((z=(j=_.movieInfo)==null?void 0:j.lists)==null?void 0:z.isFavorite)||!1,[Z.HISTORY]:((ae=(oe=_.movieInfo)==null?void 0:oe.lists)==null?void 0:ae.isHistory)||!1,[Z.LATER]:((He=($e=_.movieInfo)==null?void 0:$e.lists)==null?void 0:He.isLater)||!1,[Z.COMPLETED]:((De=(Ne=_.movieInfo)==null?void 0:Ne.lists)==null?void 0:De.isCompleted)||!1,[Z.ABANDONED]:((Xe=(Ze=_.movieInfo)==null?void 0:Ze.lists)==null?void 0:Xe.isAbandoned)||!1,[Z.WATCHING]:((Je=(Qe=_.movieInfo)==null?void 0:Qe.lists)==null?void 0:Je.isWatching)||!1}[f])!=null?et:!1},fe=async f=>{if(!b.token){ie.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Do});return}try{const n={[Z.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[Z.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[Z.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[Z.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[Z.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[Z.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};No(f)?(await Oo(k.value,f),ie.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(n[f]))):(await Lo(k.value,f),ie.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(n[f])))}catch(n){const{message:j,code:z}=ft(n);ie.value.showNotification("".concat(j," ").concat(z))}l("update:movieInfo")},Do=()=>{d.push("/login")},vt=D(()=>o.showFavoriteTooltip),Vo=()=>{d.push("/settings"),ke()};return Oe(()=>{p.value=!0,qe(),V.value&&(ye.value="4:3"),Re(),window.addEventListener("resize",Re),window.addEventListener("resize",v),Me.value&&Se()}),kt(()=>{window.removeEventListener("resize",Re),window.removeEventListener("resize",v),window.removeEventListener("mousemove",je),document.removeEventListener("keydown",ct),document.body.classList.remove("no-scroll"),ee.value&&clearInterval(ee.value),Bo()}),(f,n)=>{var j,z,oe,ae,$e,He,Ne,De,Ze,Xe,Qe,Je,et,Ct,_t,Mt,Et,Lt,It,Rt,Tt,St,Pt,At,xt,jt,Ut,Bt,$t,Ht,Nt,Dt,Vt,Ft,Ot,qt,Kt,zt,Wt,Gt,Yt,Zt,Xt,Qt,Jt,eo,to,oo,no,lo,so,io,ao,ro,uo,co,vo,mo,fo,go;return y.value?(a(),Ae(Eo,{key:0,message:y.value,code:U.value},null,8,["message","code"])):(a(),u(re,{key:1},[t("div",En,[n[54]||(n[54]=t("span",null,"–ü–ª–µ–µ—Ä:",-1)),t("button",{class:"player-btn",onClick:Ke},g(r.value?jo(r.value.translate).toUpperCase():"–ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–µ–µ—Ä–æ–≤..."),1)]),M.value?(a(),Ae(Mn,{key:0,players:c.value,"selected-player":r.value,onClose:w,onSelect:$o},null,8,["players","selected-player"])):h("",!0),t("div",{ref_key:"containerRef",ref:R,class:A(["player-container",{"theater-mode":E.value}]),style:at(E.value?{}:Le.value)},[t("div",{class:A(["iframe-wrapper",{pm_video:Uo.value}]),style:at(E.value?{}:Ge.value)},[W(t("iframe",{ref_key:"playerIframe",ref:L,src:(j=r.value)==null?void 0:j.iframe,frameborder:"0",allowfullscreen:"",webkitallowfullscreen:"",class:A(["responsive-iframe",{"theater-mode-unlock":P.value,"theater-mode-lock":E.value,dimmed:Pe.value}]),onLoad:Po},null,42,Ln),[[te,!p.value&&((z=r.value)==null?void 0:z.iframe)]]),p.value?(a(),Ae(Io,{key:0})):h("",!0)],6),E.value?(a(),u("button",{key:0,class:A(["close-theater-btn",{visible:P.value}]),onClick:Q}," ‚úñ ",2)):h("",!0)],6),E.value?h("",!0):(a(),u("div",In,[t("div",Rn,[V.value?h("",!0):(a(),u("div",{key:0,ref_key:"tooltipContainer",ref:Ee,class:"tooltip-container list-buttons-container","data-tooltip-container":"favorite"},[vt.value?(a(),u("button",{key:0,class:A(["favorite-btn",{active:(ae=(oe=s.movieInfo)==null?void 0:oe.lists)==null?void 0:ae.isFavorite}]),onMouseenter:n[0]||(n[0]=T=>N("favorite")),onMouseleave:de,onClick:n[1]||(n[1]=T=>fe(X(Z).FAVORITE))},[t("span",Tn,g((He=($e=s.movieInfo)==null?void 0:$e.lists)!=null&&He.isFavorite?"favorite":"favorite_border"),1),t("span",{class:A(["material-icons dropdown-arrow",{highlighted:Be.value}])},"expand_more",2)],34)):h("",!0),W(t("div",{ref_key:"tooltip",ref:B,class:"custom-tooltip advanced-tooltip list-buttons-dropdown","data-tooltip":"favorite",onMouseenter:H,onMouseleave:ke},[t("div",Sn,[t("button",{class:A(["favorite-btn",{active:(De=(Ne=s.movieInfo)==null?void 0:Ne.lists)==null?void 0:De.isFavorite}]),onClick:n[2]||(n[2]=T=>fe(X(Z).FAVORITE))},[t("span",Pn,g((Xe=(Ze=s.movieInfo)==null?void 0:Ze.lists)!=null&&Xe.isFavorite?"favorite":"favorite_border"),1),n[55]||(n[55]=t("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))],2)]),t("div",An,[t("button",{class:A(["watching-btn",{active:(Je=(Qe=s.movieInfo)==null?void 0:Qe.lists)==null?void 0:Je.isWatching}]),onClick:n[3]||(n[3]=T=>fe(X(Z).WATCHING))},[t("span",xn,g((Ct=(et=s.movieInfo)==null?void 0:et.lists)!=null&&Ct.isWatching?"visibility_off":"visibility"),1),n[56]||(n[56]=t("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))],2)]),t("div",jn,[t("button",{class:A(["later-btn",{active:(Mt=(_t=s.movieInfo)==null?void 0:_t.lists)==null?void 0:Mt.isLater}]),onClick:n[4]||(n[4]=T=>fe(X(Z).LATER))},n[57]||(n[57]=[t("span",{class:"material-icons"},"watch_later",-1),t("span",{class:"button-label"},"–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ",-1)]),2)]),t("div",Un,[t("button",{class:A(["completed-btn",{active:(Lt=(Et=s.movieInfo)==null?void 0:Et.lists)==null?void 0:Lt.isCompleted}]),onClick:n[5]||(n[5]=T=>fe(X(Z).COMPLETED))},[t("span",Bn,g((Rt=(It=s.movieInfo)==null?void 0:It.lists)!=null&&Rt.isCompleted?"check_circle":"check_circle_outline"),1),n[58]||(n[58]=t("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))],2)]),t("div",$n,[t("button",{class:A(["abandoned-btn",{active:(St=(Tt=s.movieInfo)==null?void 0:Tt.lists)==null?void 0:St.isAbandoned}]),onClick:n[6]||(n[6]=T=>fe(X(Z).ABANDONED))},[t("span",Hn,g(((At=(Pt=s.movieInfo)==null?void 0:Pt.lists)!=null&&At.isAbandoned,"not_interested")),1),n[59]||(n[59]=t("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))],2)]),t("div",{class:"tooltip-hint"},[n[61]||(n[61]=t("span",{class:"material-icons"},"settings",-1)),t("span",null,[n[60]||(n[60]=ne("–°—Ç–∏–ª—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ ")),t("a",{class:"settings-link",onClick:Vo},"–Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö")])])],544),[[te,S.value==="favorite"&&vt.value]])],512)),V.value?h("",!0):(a(),u(re,{key:1},[t("div",Nn,[t("button",{class:A(["dimming-btn",{active:Pe.value}]),onMouseenter:n[7]||(n[7]=T=>N("dimming")),onMouseleave:n[8]||(n[8]=T=>S.value=null),onClick:st},[t("span",Dn,g(Pe.value?"light_mode":"dark_mode"),1)],34),W(t("div",{class:"custom-tooltip","data-tooltip":"dimming"},g(Pe.value?"–û—Ç–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ":"–í–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ"),513),[[te,S.value==="dimming"]])]),t("div",Vn,[t("button",{class:A(["blur-btn",{"electron-only":!K.value}]),onMouseenter:n[9]||(n[9]=T=>N("blur")),onMouseleave:n[10]||(n[10]=T=>S.value=null),onClick:dt},n[62]||(n[62]=[t("span",{class:"material-icons"},"blur_on",-1)]),34),W(t("div",{class:"custom-tooltip","data-tooltip":"blur"},g(K.value?"–ë–ª—é—Ä":"–ë–ª—é—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[te,S.value==="blur"]])]),t("div",Fn,[t("button",{class:A(["material-symbols-outlined",{active:Fe.value,"electron-only":!K.value}]),onMouseenter:n[11]||(n[11]=T=>N("compressor")),onMouseleave:n[12]||(n[12]=T=>S.value=null),onClick:$},n[63]||(n[63]=[t("span",{class:"material-icons"},"graphic_eq",-1)]),34),W(t("div",On," –ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä ",512),[[te,S.value==="compressor"]])]),t("div",qn,[t("button",{class:A(["mirror-btn",{active:ze.value,"electron-only":!K.value}]),onMouseenter:n[13]||(n[13]=T=>N("mirror")),onMouseleave:n[14]||(n[14]=T=>S.value=null),onClick:Y},n[64]||(n[64]=[t("span",{class:"material-icons"},"flip",-1)]),34),W(t("div",Kn," –ó–µ—Ä–∫–∞–ª–æ ",512),[[te,S.value==="mirror"]])]),t("div",zn,[t("button",{class:"theater-mode-btn",onMouseenter:n[15]||(n[15]=T=>N("theater")),onMouseleave:n[16]||(n[16]=T=>S.value=null),onClick:Q},[t("span",Wn,g(E.value?"fullscreen_exit":"aspect_ratio"),1)],32),W(t("div",Gn,[ne(g(E.value?"–í—ã–π—Ç–∏ –∏–∑ —Ç–µ–∞—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞":"–¢–µ–∞—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º")+" ",1),n[65]||(n[65]=t("span",{class:"shortcut-hint"},"Alt+T",-1))],512),[[te,S.value==="theater"]])]),t("div",Yn,[t("button",{class:"aspect-ratio-dropdown-btn",onMouseenter:n[17]||(n[17]=T=>N("aspect_ratio")),onMouseleave:de,onClick:Ho},[t("span",Zn,g(ye.value),1)],32),W(t("div",{class:"custom-tooltip advanced-tooltip aspect-ratio-dropdown","data-tooltip":"aspect_ratio",onMouseenter:H,onMouseleave:ke},[(a(),u(re,null,Ce(it,T=>t("div",{key:T,class:A(["aspect-ratio-option",{active:ye.value===T}]),onClick:dr=>wt(T)},g(T),11,Xn)),64))],544),[[te,S.value==="aspect_ratio"]])]),t("div",{class:"tooltip-container","data-tooltip-container":"centering",onMouseenter:n[19]||(n[19]=T=>N("centering")),onMouseleave:de},[t("button",{class:"center-btn",onClick:Se},n[66]||(n[66]=[t("span",{class:"material-icons"},"center_focus_strong",-1)])),W(t("div",{class:"custom-tooltip advanced-tooltip","data-tooltip":"centering",onMouseenter:H,onMouseleave:ke},[n[67]||(n[67]=ne(" –û—Ç—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–ª–µ–µ—Ä ")),se(an,{modelValue:Me.value,"onUpdate:modelValue":n[18]||(n[18]=T=>Me.value=T),title:"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞"},null,8,["modelValue"]),n[68]||(n[68]=t("span",{class:"tooltip-title"},"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞",-1))],544),[[te,S.value==="centering"]])],32),K.value?h("",!0):(a(),u("div",Qn,[t("button",{class:"app-link-btn",onMouseenter:n[20]||(n[20]=T=>N("app_link")),onMouseleave:n[21]||(n[21]=T=>S.value=null),onClick:Ao},n[69]||(n[69]=[t("span",{class:"material-icons"},"open_in_new",-1)]),32),W(t("div",Jn," –û—Ç–∫—Ä—ã—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ",512),[[te,S.value==="app_link"]])])),K.value?(a(),u("div",el,[t("button",{class:"copy-link-btn",onMouseenter:n[22]||(n[22]=T=>N("copy_link")),onMouseleave:n[23]||(n[23]=T=>S.value=null),onClick:xo},n[70]||(n[70]=[t("span",{class:"material-icons"},"content_copy",-1)]),32),W(t("div",tl," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É ",512),[[te,S.value==="copy_link"]])])):h("",!0)],64))]),!V.value&&!vt.value?(a(),u("div",ol,[t("div",nl,[t("button",{class:A(["favorite-btn",{active:(jt=(xt=s.movieInfo)==null?void 0:xt.lists)==null?void 0:jt.isFavorite}]),onMouseenter:n[24]||(n[24]=T=>N("favorite")),onMouseleave:n[25]||(n[25]=T=>S.value=null),onClick:n[26]||(n[26]=T=>fe(X(Z).FAVORITE))},[t("span",ll,g((Bt=(Ut=s.movieInfo)==null?void 0:Ut.lists)!=null&&Bt.isFavorite?"favorite":"favorite_border"),1)],34),W(t("div",sl,g("–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"),512),[[te,S.value==="favorite"]])]),t("div",il,[t("button",{class:A(["watching-btn",{active:(Ht=($t=s.movieInfo)==null?void 0:$t.lists)==null?void 0:Ht.isWatching}]),onMouseenter:n[27]||(n[27]=T=>N("watching")),onMouseleave:n[28]||(n[28]=T=>S.value=null),onClick:n[29]||(n[29]=T=>fe(X(Z).WATCHING))},[t("span",al,g((Dt=(Nt=s.movieInfo)==null?void 0:Nt.lists)!=null&&Dt.isWatching?"visibility_off":"visibility"),1)],34),W(t("div",rl,g("–°–º–æ—Ç—Ä—é"),512),[[te,S.value==="watching"]])]),t("div",ul,[t("button",{class:A(["later-btn",{active:(Ft=(Vt=s.movieInfo)==null?void 0:Vt.lists)==null?void 0:Ft.isLater}]),onMouseenter:n[30]||(n[30]=T=>N("later")),onMouseleave:n[31]||(n[31]=T=>S.value=null),onClick:n[32]||(n[32]=T=>fe(X(Z).LATER))},n[71]||(n[71]=[t("span",{class:"material-icons"},"watch_later",-1)]),34),W(t("div",dl,g("–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"),512),[[te,S.value==="later"]])]),t("div",cl,[t("button",{class:A(["completed-btn",{active:(qt=(Ot=s.movieInfo)==null?void 0:Ot.lists)==null?void 0:qt.isCompleted}]),onMouseenter:n[33]||(n[33]=T=>N("completed")),onMouseleave:n[34]||(n[34]=T=>S.value=null),onClick:n[35]||(n[35]=T=>fe(X(Z).COMPLETED))},[t("span",vl,g((zt=(Kt=s.movieInfo)==null?void 0:Kt.lists)!=null&&zt.isCompleted?"check_circle":"check_circle_outline"),1)],34),W(t("div",ml,g("–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"),512),[[te,S.value==="completed"]])]),t("div",fl,[t("button",{class:A(["abandoned-btn",{active:(Gt=(Wt=s.movieInfo)==null?void 0:Wt.lists)==null?void 0:Gt.isAbandoned}]),onMouseenter:n[36]||(n[36]=T=>N("abandoned")),onMouseleave:n[37]||(n[37]=T=>S.value=null),onClick:n[38]||(n[38]=T=>fe(X(Z).ABANDONED))},[t("span",gl,g(((Zt=(Yt=s.movieInfo)==null?void 0:Yt.lists)!=null&&Zt.isAbandoned,"not_interested")),1)],34),W(t("div",kl,g("–ë—Ä–æ—à–µ–Ω–æ"),512),[[te,S.value==="abandoned"]])])])):V.value?(a(),u("div",yl,[t("div",hl,[t("button",{class:A(["favorite-btn",{active:(Qt=(Xt=s.movieInfo)==null?void 0:Xt.lists)==null?void 0:Qt.isFavorite}]),onMouseenter:n[39]||(n[39]=T=>N("favorite")),onMouseleave:n[40]||(n[40]=T=>S.value=null),onClick:n[41]||(n[41]=T=>fe(X(Z).FAVORITE))},[t("span",pl,g((eo=(Jt=s.movieInfo)==null?void 0:Jt.lists)!=null&&eo.isFavorite?"favorite":"favorite_border"),1)],34),W(t("div",bl,g("–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"),512),[[te,S.value==="favorite"]])]),t("div",wl,[t("button",{class:A(["watching-btn",{active:(oo=(to=s.movieInfo)==null?void 0:to.lists)==null?void 0:oo.isWatching}]),onMouseenter:n[42]||(n[42]=T=>N("watching")),onMouseleave:n[43]||(n[43]=T=>S.value=null),onClick:n[44]||(n[44]=T=>fe(X(Z).WATCHING))},[t("span",Cl,g((lo=(no=s.movieInfo)==null?void 0:no.lists)!=null&&lo.isWatching?"visibility_off":"visibility"),1)],34),W(t("div",_l,g("–°–º–æ—Ç—Ä—é"),512),[[te,S.value==="watching"]])]),t("div",Ml,[t("button",{class:A(["later-btn",{active:(io=(so=s.movieInfo)==null?void 0:so.lists)==null?void 0:io.isLater}]),onMouseenter:n[45]||(n[45]=T=>N("later")),onMouseleave:n[46]||(n[46]=T=>S.value=null),onClick:n[47]||(n[47]=T=>fe(X(Z).LATER))},n[72]||(n[72]=[t("span",{class:"material-icons"},"watch_later",-1)]),34),W(t("div",El,g("–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"),512),[[te,S.value==="later"]])]),t("div",Ll,[t("button",{class:A(["completed-btn",{active:(ro=(ao=s.movieInfo)==null?void 0:ao.lists)==null?void 0:ro.isCompleted}]),onMouseenter:n[48]||(n[48]=T=>N("completed")),onMouseleave:n[49]||(n[49]=T=>S.value=null),onClick:n[50]||(n[50]=T=>fe(X(Z).COMPLETED))},[t("span",Il,g((co=(uo=s.movieInfo)==null?void 0:uo.lists)!=null&&co.isCompleted?"check_circle":"check_circle_outline"),1)],34),W(t("div",Rl,g("–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"),512),[[te,S.value==="completed"]])]),t("div",Tl,[t("button",{class:A(["abandoned-btn",{active:(mo=(vo=s.movieInfo)==null?void 0:vo.lists)==null?void 0:mo.isAbandoned}]),onMouseenter:n[51]||(n[51]=T=>N("abandoned")),onMouseleave:n[52]||(n[52]=T=>S.value=null),onClick:n[53]||(n[53]=T=>fe(X(Z).ABANDONED))},[t("span",Sl,g(((go=(fo=s.movieInfo)==null?void 0:fo.lists)!=null&&go.isAbandoned,"not_interested")),1)],34),W(t("div",Pl,g("–ë—Ä–æ—à–µ–Ω–æ"),512),[[te,S.value==="abandoned"]])])])):h("",!0)])),se(ut,{ref_key:"notificationRef",ref:ie},null,512)],64))}}},_o=Te(Al,[["__scopeId","data-v-bc52e732"]]),xl={key:0,class:"carousel-container"},jl={class:"carousel-wrapper"},Ul=["onClick"],Bl=["src","alt"],$l={class:"video-name"},Hl={key:0,class:"video-player"},Nl=["src"],Dl={__name:"TrailerCarousel",props:{videos:{type:Array,required:!0},activeVideoIndex:{type:Number,default:null}},emits:["select"],setup(s,{emit:e}){const i=lt(),o=D(()=>i.isMobile),b=s,C=e,d=m(b.activeVideoIndex),k=m(null),_=m(!1),l=m(!1),c=()=>{if(!k.value)return;const{scrollLeft:R,scrollWidth:M,clientWidth:y}=k.value;_.value=R>0,l.value=R<M-y-1},r=R=>{if(!k.value)return;const M=k.value.querySelector(".carousel-item");if(!M)return;const y=M.clientWidth+16;k.value.scrollBy({left:y*R,behavior:"smooth"})},p=R=>{d.value=R,C("select",b.videos[R])},E=()=>c(),P=m([]),L=async R=>{try{return(await fetch("https://img.youtube.com/vi/".concat(R,"/0.jpg"))).ok}catch(M){return!1}};return Oe(async()=>{const R=b.videos.map(async y=>await L(y.videoId)?y:null),M=await Promise.all(R);P.value=M.filter(Boolean),c(),window.addEventListener("resize",E)}),Ue(()=>b.videos,async R=>{const M=R.map(async U=>await L(U.videoId)?U:null),y=await Promise.all(M);P.value=y.filter(Boolean)}),Ue(()=>b.activeVideoIndex,R=>{d.value=R}),kt(()=>{window.removeEventListener("resize",E)}),(R,M)=>P.value.length?(a(),u("div",xl,[M[4]||(M[4]=t("h2",null,"–¢—Ä–µ–π–ª–µ—Ä—ã (YouTube)",-1)),t("div",jl,[W(t("button",{class:"scroll-button left",onClick:M[0]||(M[0]=y=>r(-1))},M[2]||(M[2]=[t("span",{class:"material-symbols-outlined"},"arrow_back_ios",-1)]),512),[[te,!o.value&&_.value]]),t("div",{ref_key:"carousel",ref:k,class:"carousel",onScroll:c},[(a(!0),u(re,null,Ce(P.value,(y,U)=>(a(),u("div",{key:U,class:"carousel-item",onClick:x=>p(U)},[t("img",{src:"https://img.youtube.com/vi/".concat(y.videoId,"/0.jpg"),alt:y.name},null,8,Bl),t("div",$l,g(y.name),1)],8,Ul))),128))],544),W(t("button",{class:"scroll-button right",onClick:M[1]||(M[1]=y=>r(1))},M[3]||(M[3]=[t("span",{class:"material-symbols-outlined"},"arrow_forward_ios",-1)]),512),[[te,!o.value&&l.value]])]),d.value!==null?(a(),u("div",Hl,[t("iframe",{src:s.videos[d.value].iframeUrl,frameborder:"0",allowfullscreen:""},null,8,Nl)])):h("",!0)])):h("",!0)}},Vl=Te(Dl,[["__scopeId","data-v-e60b5c29"]]),Fl={class:"rating-container"},Ol={class:"rating-display"},ql={class:"rating-numbers"},Kl=["onClick","onMouseenter"],zl={key:0,class:"tooltip-footer"},Wl={class:"rating-numbers mobile-rating-numbers"},Gl=["onClick"],Yl={key:0,class:"mobile-modal-footer"},Zl={__name:"MovieRating",props:{kpId:{type:String,required:!0},showDash:{type:Boolean,default:!1}},setup(s){const e=lt(),i=rt(),o=s,b=m(null),C=m(null),d=m(null),k=m(null),_=m(0),l=m(!1),c=m(!1);let r=null;const p=x=>x?x.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",E=()=>{r=setTimeout(()=>{l.value=!1,e.isMobile||(c.value=!1)},100)},P=()=>{r&&(clearTimeout(r),r=null),l.value=!0},L=()=>{e.isMobile&&(c.value=!c.value)},R=()=>{i.push("/login")},M=async()=>{try{const x=await qo(o.kpId);C.value=x.user_rating,d.value=x.average_rating,k.value=p(x.vote_count)}catch(x){console.error("Error loading rating:",x)}},y=async x=>{var q;try{x===C.value?(await ko(o.kpId,null),C.value=null,b.value.showNotification("–û—Ü–µ–Ω–∫–∞ —É–¥–∞–ª–µ–Ω–∞")):(await ko(o.kpId,x),C.value=x,b.value.showNotification("–û—Ü–µ–Ω–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞")),e.isMobile&&(c.value=!1),M()}catch(V){console.error("Error setting rating:",V),((q=V.response)==null?void 0:q.status)===401?b.value.showNotification('–î–ª—è –æ—Ü–µ–Ω–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:R}):b.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ü–µ–Ω–∫–∏"),e.isMobile&&(c.value=!1)}},U=()=>{c.value=!1};return Oe(()=>{M()}),(x,q)=>(a(),u("div",Fl,[t("div",Ol,[t("a",{href:"#",class:A(["rating-link",{"has-rating":C.value}]),onMouseenter:q[0]||(q[0]=V=>l.value=!0),onMouseleave:E,onClick:Ve(L,["prevent"])},[q[3]||(q[3]=t("img",{src:ln,alt:"ReYohoho",class:"rating-logo"},null,-1)),t("span",{class:A(["average-rating",X(tt)(d.value)])},g(d.value?d.value.toFixed(1).replace(/\.0$/,""):"‚Äî"),3)],34),W(t("div",{class:"rating-tooltip",onMouseenter:P,onMouseleave:E},[t("div",ql,[(a(),u(re,null,Ce(10,V=>t("button",{key:V,class:A(["number-btn",{active:V===C.value,hover:V===_.value,"average-highlight":d.value&&V<=Math.round(d.value)}]),onClick:K=>y(V),onMouseenter:K=>_.value=V,onMouseleave:q[1]||(q[1]=K=>_.value=0)},g(V),43,Kl)),64))]),k.value?(a(),u("div",zl,"–û—Ü–µ–Ω–æ–∫: "+g(k.value),1)):h("",!0)],544),[[te,(l.value||c.value)&&!X(e).isMobile]])]),se(ut,{ref_key:"notificationRef",ref:b},null,512),X(e).isMobile&&c.value?(a(),u("div",{key:0,class:"mobile-modal-overlay",onClick:U},[t("div",{class:"mobile-modal",onClick:q[2]||(q[2]=Ve(()=>{},["stop"]))},[t("div",{class:"mobile-modal-header"},[q[4]||(q[4]=t("h3",null,"–û—Ü–µ–Ω–∏—Ç—å —Ñ–∏–ª—å–º",-1)),t("button",{class:"close-button",onClick:U},"√ó")]),t("div",Wl,[(a(),u(re,null,Ce(10,V=>t("button",{key:V,class:A(["number-btn",{active:V===C.value,"average-highlight":d.value&&V<=Math.round(d.value)}]),onClick:K=>y(V)},g(V),11,Gl)),64))]),k.value?(a(),u("div",Yl,"–û—Ü–µ–Ω–æ–∫: "+g(k.value),1)):h("",!0)])])):h("",!0)]))}},Xl=Te(Zl,[["__scopeId","data-v-2d133e7c"]]),Ql={name:"EmojiPicker",props:{isVisible:{type:Boolean,default:!1}},emits:["emoji-selected","mouse-enter","mouse-leave","close"],data(){return{activeCategory:"smileys",categories:[{name:"smileys",icon:"üòÄ",emojis:["üòÄ","üòÉ","üòÑ","üòÅ","üòÜ","üòÖ","üòÇ","ü§£","üòä","üòá","üôÇ","üôÉ","üòâ","üòå","üòç","ü•∞","üòò","üòó","üòô","üòö","üòã","üòõ","üòù","üòú","ü§™","ü§®","üßê","ü§ì","üòé","ü§©","ü•≥"]},{name:"emotions",icon:"üò¢",emojis:["üò•","üò¢","üò≠","üò§","üò†","üò°","ü§¨","ü§Ø","üò≥","ü•µ","ü•∂","üò±","üò®","üò∞","üò•","üòì","ü§ó","ü§î","ü§≠","ü§´","ü§•","üò∂","üòê","üòë","üò¨","üôÑ","üòØ","üò¶","üòß","üòÆ","üò≤"]},{name:"gestures",icon:"üëç",emojis:["üëç","üëé","üëå","ü§å","ü§è","‚úåÔ∏è","ü§û","ü§ü","ü§ò","ü§ô","üëà","üëâ","üëÜ","üñï","üëá","‚òùÔ∏è","üëè","üôå","üëê","ü§≤","ü§ù","üôè","‚úçÔ∏è","üí™","ü¶æ","ü¶ø","ü¶µ","ü¶∂","üëÇ","ü¶ª","üëÉ"]},{name:"hearts",icon:"‚ù§Ô∏è",emojis:["‚ù§Ô∏è","üß°","üíõ","üíö","üíô","üíú","ü§é","üñ§","ü§ç","üíî","‚ù£Ô∏è","üíï","üíû","üíì","üíó","üíñ","üíò","üíù","üíü","‚ô•Ô∏è","üíØ","üí¢","üí•","üí´","üí¶","üí®","üï≥Ô∏è","üí£","üí¨","üëÅÔ∏è‚Äçüó®Ô∏è","üó®Ô∏è"]},{name:"objects",icon:"üéâ",emojis:["üéâ","üéä","üéà","üéÅ","üéÄ","üéÇ","üç∞","üßÅ","üç≠","üç¨","üç´","üç©","üç™","üçï","üçî","üçü","üå≠","ü•™","üåÆ","üåØ","ü•ô","ü•ö","üç≥","ü•ò","üç≤","ü•ó","üçø","üßà","üßÄ","ü•®","ü•Ø"]}]}},computed:{currentEmojis(){const s=this.categories.find(e=>e.name===this.activeCategory);return s?s.emojis:[]}},methods:{selectEmoji(s){this.$emit("emoji-selected",s)}}},Jl={class:"emoji-categories"},es=["onClick"],ts={class:"emoji-grid"},os=["onClick"];function ns(s,e,i,o,b,C){return i.isVisible?(a(),u("div",{key:0,class:"emoji-picker",onMouseenter:e[1]||(e[1]=d=>s.$emit("mouse-enter")),onMouseleave:e[2]||(e[2]=d=>s.$emit("mouse-leave"))},[t("button",{class:"close-btn mobile-only",onClick:e[0]||(e[0]=d=>s.$emit("close"))},e[3]||(e[3]=[t("i",{class:"fas fa-times"},null,-1)])),t("div",Jl,[(a(!0),u(re,null,Ce(b.categories,d=>(a(),u("button",{key:d.name,onClick:k=>b.activeCategory=d.name,class:A([{active:b.activeCategory===d.name},"category-btn"]),type:"button"},g(d.icon),11,es))),128))]),t("div",ts,[(a(!0),u(re,null,Ce(C.currentEmojis,d=>(a(),u("button",{key:d,onClick:k=>C.selectEmoji(d),class:"emoji-btn",type:"button"},g(d),9,os))),128))])],32)):h("",!0)}const yt=Te(Ql,[["render",ns],["__scopeId","data-v-209132f3"]]),ls=async s=>{const e=await Ko();return await s(e)},ss=async s=>{const{data:e}=await ls(i=>i.get("/search_emotes/".concat(s)));return e.emotes||[]},is={name:"ImagePicker",props:{isVisible:{type:Boolean,required:!0},currentUser:{type:Object,default:null}},emits:["image-selected","mouse-enter","mouse-leave","close","login-required"],setup(s,{emit:e}){const i=m(""),o=m([]),b=m(null),C=m(!1),k=zo(async r=>{if(!s.currentUser){console.warn("–ü–æ–ø—ã—Ç–∫–∞ –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏");return}if(!r.trim()){o.value=[],C.value=!1;return}C.value=!0;try{o.value=await ss(r)}catch(p){console.error("Error searching images:",p),o.value=[]}finally{C.value=!1}},300),_=()=>{if(!s.currentUser){e("login-required");return}i.value.trim()&&(C.value=!0),k(i.value)},l=r=>{if(!s.currentUser){e("login-required");return}e("image-selected",r),e("close")},c=()=>{setTimeout(()=>{s.isVisible&&e("mouse-leave")},100)};return Ue(()=>s.isVisible,r=>{r&&(i.value="",o.value=[],C.value=!1)}),{searchQuery:i,images:o,searchInput:b,isLoading:C,handleSearch:_,selectImage:l,handleInputBlur:c}}},as={key:0,class:"auth-required"},rs={class:"auth-message"},us={key:1},ds={class:"image-picker-header"},cs={class:"image-content"},vs={key:0,class:"loading-spinner"},ms={key:1,class:"image-grid"},fs=["onClick"],gs=["src","alt"],ks={key:2,class:"no-images"},ys={key:3,class:"no-search"};function hs(s,e,i,o,b,C){return i.isVisible?(a(),u("div",{key:0,class:"image-picker",onMouseenter:e[7]||(e[7]=d=>s.$emit("mouse-enter")),onMouseleave:e[8]||(e[8]=d=>s.$emit("mouse-leave")),onClick:e[9]||(e[9]=Ve(()=>{},["stop"]))},[t("button",{class:"close-btn mobile-only",onClick:e[0]||(e[0]=d=>s.$emit("close"))},e[10]||(e[10]=[t("i",{class:"fas fa-times"},null,-1)])),i.currentUser?(a(),u("div",us,[t("div",ds,[W(t("input",{ref:"searchInput",type:"text","onUpdate:modelValue":e[2]||(e[2]=d=>o.searchQuery=d),placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–º–∞–π–ª–∞ 7tv",class:"image-search-input",onInput:e[3]||(e[3]=(...d)=>o.handleSearch&&o.handleSearch(...d)),onClick:e[4]||(e[4]=Ve(()=>{},["stop"])),onFocus:e[5]||(e[5]=d=>s.$emit("mouse-enter")),onBlur:e[6]||(e[6]=(...d)=>o.handleInputBlur&&o.handleInputBlur(...d))},null,544),[[ot,o.searchQuery]])]),t("div",cs,[o.isLoading?(a(),u("div",vs,e[14]||(e[14]=[t("div",{class:"spinner"},null,-1),t("p",null,"–ü–æ–∏—Å–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...",-1)]))):o.images.length>0?(a(),u("div",ms,[(a(!0),u(re,null,Ce(o.images,(d,k)=>(a(),u("div",{key:k,class:"image-item",onClick:_=>o.selectImage(d)},[t("img",{src:d,alt:"Image "+(k+1)},null,8,gs)],8,fs))),128))])):o.searchQuery.trim()?(a(),u("div",ks,e[15]||(e[15]=[t("p",null,"–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤",-1)]))):(a(),u("div",ys,e[16]||(e[16]=[t("p",null,"–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞",-1)])))])])):(a(),u("div",as,[t("div",rs,[e[11]||(e[11]=t("i",{class:"fas fa-lock"},null,-1)),e[12]||(e[12]=t("h3",null,"–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è",-1)),e[13]||(e[13]=t("p",null,"–î–ª—è –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç",-1)),t("button",{class:"login-button",onClick:e[1]||(e[1]=d=>s.$emit("login-required"))},"–í–æ–π—Ç–∏")])]))],32)):h("",!0)}const ht=Te(is,[["render",hs],["__scopeId","data-v-f33eb3f6"]]),ps={name:"LinkModal",props:{isVisible:{type:Boolean,default:!1},selectedText:{type:String,default:""}},emits:["close","submit"],setup(s,{emit:e}){const i=m(""),o=m(""),b=m(null),C=m(null),d=D(()=>/^https?:\/\/.+/.test(i.value.trim())&&o.value.trim()),k=()=>{e("close"),l()},_=()=>{d.value&&(e("submit",{url:i.value.trim(),title:o.value.trim()}),k())},l=()=>{i.value="",o.value=""},c=r=>{var p;r.key==="Enter"?(r.preventDefault(),d.value?_():r.target===b.value&&i.value.trim()&&((p=C.value)==null||p.focus())):r.key==="Escape"&&k()};return Ue(()=>s.isVisible,r=>{r&&(s.selectedText.trim()&&(o.value=s.selectedText.trim()),_e(()=>{var p;(p=b.value)==null||p.focus()}))}),{linkUrl:i,linkTitle:o,urlInput:b,titleInput:C,isValidLink:d,closeModal:k,submitLink:_,handleKeydown:c}}},bs={class:"link-modal-header"},ws={class:"link-modal-content"},Cs={class:"form-group"},_s={class:"form-group"},Ms={class:"link-modal-footer"},Es=["disabled"];function Ls(s,e,i,o,b,C){return i.isVisible?(a(),u("div",{key:0,class:"link-modal-overlay",onClick:e[8]||(e[8]=(...d)=>o.closeModal&&o.closeModal(...d))},[t("div",{class:"link-modal",onClick:e[7]||(e[7]=Ve(()=>{},["stop"]))},[t("div",bs,[e[10]||(e[10]=t("h3",null,"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É",-1)),t("button",{class:"close-button",onClick:e[0]||(e[0]=(...d)=>o.closeModal&&o.closeModal(...d))},e[9]||(e[9]=[t("i",{class:"fas fa-times"},null,-1)]))]),t("div",ws,[t("div",Cs,[e[11]||(e[11]=t("label",{for:"link-url"},"URL —Å—Å—ã–ª–∫–∏:",-1)),W(t("input",{id:"link-url",ref:"urlInput","onUpdate:modelValue":e[1]||(e[1]=d=>o.linkUrl=d),type:"url",placeholder:"https://example.com",class:"link-input",onKeydown:e[2]||(e[2]=(...d)=>o.handleKeydown&&o.handleKeydown(...d))},null,544),[[ot,o.linkUrl]])]),t("div",_s,[e[12]||(e[12]=t("label",{for:"link-title"},"–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏:",-1)),W(t("input",{id:"link-title",ref:"titleInput","onUpdate:modelValue":e[3]||(e[3]=d=>o.linkTitle=d),type:"text",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è",class:"link-input",onKeydown:e[4]||(e[4]=(...d)=>o.handleKeydown&&o.handleKeydown(...d))},null,544),[[ot,o.linkTitle]])])]),t("div",Ms,[t("button",{class:"cancel-button",onClick:e[5]||(e[5]=(...d)=>o.closeModal&&o.closeModal(...d))},"–û—Ç–º–µ–Ω–∞"),t("button",{class:"submit-button",disabled:!o.isValidLink,onClick:e[6]||(e[6]=(...d)=>o.submitLink&&o.submitLink(...d))},"–î–æ–±–∞–≤–∏—Ç—å",8,Es)])])])):h("",!0)}const pt=Te(ps,[["render",Ls],["__scopeId","data-v-a794d83f"]]);function Is(){const s=m(!1),e=m(!1),i=m(!1),o=()=>{e.value=!0},b=()=>{e.value=!1,setTimeout(()=>{!e.value&&!i.value&&(s.value=!1)},300)},C=()=>{i.value=!0,s.value=!0},d=()=>{i.value=!1,setTimeout(()=>{!e.value&&!i.value&&(s.value=!1)},300)},k=()=>{s.value=!1};return{showEmojiPicker:s,isEmojiHovered:e,isButtonHovered:i,handleEmojiMouseEnter:o,handleEmojiMouseLeave:b,handleButtonMouseEnter:C,handleButtonMouseLeave:d,closeEmojiPicker:k,insertEmoji:(c,r,p,E)=>{const P=r.value;if(P){const L=P.selectionStart,R=P.selectionEnd,M=p.value.substring(0,L),y=p.value.substring(R),U=M+c+y;E(U),_e(()=>{P.focus(),P.setSelectionRange(L+c.length,L+c.length),P.style.height&&(P.style.height="auto",P.style.height="".concat(Math.min(P.scrollHeight,200),"px"))})}else E(p.value+c)},handleGlobalClick:c=>{!c.target.closest(".emoji-picker")&&!c.target.closest(".emoji-button-inline")&&k()}}}function Rs(){const s=m(!1),e=m(!1),i=m(!1),o=()=>{e.value=!0},b=()=>{e.value=!1,setTimeout(()=>{!e.value&&!i.value&&(s.value=!1)},300)},C=()=>{i.value=!0,s.value=!0},d=()=>{i.value=!1,setTimeout(()=>{!e.value&&!i.value&&(s.value=!1)},300)},k=()=>{s.value=!1};return{showImagePicker:s,isImageHovered:e,isButtonHovered:i,handleImageMouseEnter:o,handleImageMouseLeave:b,handleImageButtonMouseEnter:C,handleButtonMouseLeave:d,closeImagePicker:k,insertImage:(c,r,p,E)=>{const P=r.value;if(P){const L=P.selectionStart,R=P.selectionEnd,M="[img]".concat(c,"[/img]"),y=p.value.slice(0,L)+M+p.value.slice(R);E(y),_e(()=>{P.focus(),P.setSelectionRange(L+M.length,L+M.length),P.style.height&&(P.style.height="auto",P.style.height="".concat(Math.min(P.scrollHeight,200),"px"))})}else{const L="[img]".concat(c,"[/img]");E(p.value+L)}},handleGlobalClick:c=>{!c.target.closest(".image-picker")&&!c.target.closest(".emoji-button-inline")&&k()}}}function Ts(){const s=m(!1),e=m("");return{showLinkModal:s,selectedTextForLink:e,insertLink:(d,k)=>{const _=d.value;if(_){const l=_.selectionStart,c=_.selectionEnd,r=k.value.slice(l,c);e.value=r.trim()||""}s.value=!0},insertLinkFromModal:(d,k,_,l)=>{const c=k.value;if(c){const r=c.selectionStart,p=c.selectionEnd,E="[link=".concat(d.url,"]").concat(d.title,"[/link]"),P=_.value.slice(0,r)+E+_.value.slice(p);l(P),_e(()=>{c.focus(),c.setSelectionRange(r+E.length,r+E.length),c.style.height&&(c.style.height="auto",c.style.height="".concat(Math.min(c.scrollHeight,200),"px"))})}},closeLinkModal:()=>{s.value=!1},insertSpoiler:(d,k,_)=>{const l=d.value;if(l){const c=l.selectionStart,r=l.selectionEnd,p=k.value.slice(c,r);let E;p.trim()?E="[spoiler]".concat(p,"[/spoiler]"):E="[spoiler][/spoiler]";const P=k.value.slice(0,c)+E+k.value.slice(r);_(P),_e(()=>{if(l.focus(),p.trim())l.setSelectionRange(c+E.length,c+E.length);else{const L=c+9;l.setSelectionRange(L,L)}l.style.height&&(l.style.height="auto",l.style.height="".concat(Math.min(l.scrollHeight,200),"px"))})}}}}function Ss(){return{autoResize:i=>{const o=i==null?void 0:i.target;o&&(o.style.height="auto",o.style.height="".concat(Math.min(o.scrollHeight,200),"px"))},autoResizeElement:i=>{i&&(i.style.height="auto",i.style.height="".concat(Math.min(i.scrollHeight,200),"px"))}}}function bt(){const s=Is(),e=Rs(),i=Ts(),{autoResize:o,autoResizeElement:b}=Ss(),C=()=>{s.isButtonHovered.value=!0,e.isButtonHovered.value=!0,s.showEmojiPicker.value=!0,e.showImagePicker.value=!1},d=()=>{s.isButtonHovered.value=!0,e.isButtonHovered.value=!0,e.showImagePicker.value=!0,s.showEmojiPicker.value=!1},k=()=>{s.isButtonHovered.value=!1,e.isButtonHovered.value=!1,setTimeout(()=>{!s.isEmojiHovered.value&&!e.isImageHovered.value&&!s.isButtonHovered.value&&!e.isButtonHovered.value&&(s.showEmojiPicker.value=!1,e.showImagePicker.value=!1)},300)},_=()=>{s.showEmojiPicker.value=!1,e.showImagePicker.value=!1},l=L=>{!L.target.closest(".emoji-picker")&&!L.target.closest(".image-picker")&&!L.target.closest(".emoji-button-inline")&&_()},c=(L,R,M,y)=>{s.insertEmoji(L,R,M,y)},r=(L,R,M,y)=>{e.insertImage(L,R,M,y)},p=(L,R,M)=>{i.insertLink(L,R,M)},E=(L,R,M,y)=>{i.insertLinkFromModal(L,R,M,y)},P=(L,R,M)=>{i.insertSpoiler(L,R,M)};return Oe(()=>{document.addEventListener("click",l)}),kt(()=>{document.removeEventListener("click",l)}),{showEmojiPicker:s.showEmojiPicker,handleEmojiMouseEnter:s.handleEmojiMouseEnter,handleEmojiMouseLeave:s.handleEmojiMouseLeave,closeEmojiPicker:s.closeEmojiPicker,showImagePicker:e.showImagePicker,handleImageMouseEnter:e.handleImageMouseEnter,handleImageMouseLeave:e.handleImageMouseLeave,closeImagePicker:e.closeImagePicker,showLinkModal:i.showLinkModal,selectedTextForLink:i.selectedTextForLink,closeLinkModal:i.closeLinkModal,handleButtonMouseEnter:C,handleImageButtonMouseEnter:d,handleButtonMouseLeave:k,closeAllPickers:_,insertEmojiUniversal:c,insertImageUniversal:r,insertLinkUniversal:p,insertLinkFromModalUniversal:E,insertSpoilerUniversal:P,autoResize:o,autoResizeElement:b}}const Ps=s=>s===1?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π":s>=2&&s<=4?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è":"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤",As=s=>{if(!s)return"?";const e=s.split(" ");return e.length===1?s.slice(0,2).toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()},xs={name:"CommentItem",components:{EmojiPicker:yt,ImagePicker:ht,LinkModal:pt},props:{comment:{type:Object,required:!0,default:()=>({username:"–ê–Ω–æ–Ω–∏–º",user_avatar:null,content:"",created_at:new Date().toISOString(),rating:0,replies:[]})},currentUser:{type:Object,required:!0,default:()=>({})},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate"],setup(s,{emit:e}){var qe,Ke;const i=rt(),o=D(()=>{var w;return s.editingCommentId===((w=s.comment)==null?void 0:w.id)}),b=m(((qe=s.comment)==null?void 0:qe.content)||""),C=m(((Ke=s.comment)==null?void 0:Ke.user_rating)||0),d=m(null),k=m(null),{showEmojiPicker:_,showImagePicker:l,showLinkModal:c,selectedTextForLink:r,handleEmojiMouseEnter:p,handleEmojiMouseLeave:E,handleImageMouseEnter:P,handleImageMouseLeave:L,handleButtonMouseEnter:R,handleImageButtonMouseEnter:M,handleButtonMouseLeave:y,closeEmojiPicker:U,closeImagePicker:x,closeLinkModal:q,insertEmojiUniversal:V,insertImageUniversal:K,insertLinkUniversal:S,insertLinkFromModalUniversal:ge,insertSpoilerUniversal:be,autoResize:ie}=bt(),{formatContentWithTruncation:Ee}=Ro();Oe(async()=>{var w;if((w=s.comment)!=null&&w.user_avatar){const G=await Wo();d.value="".concat(G).concat(s.comment.user_avatar)}});const B=D(()=>{var w;return s.currentUser&&((w=s.comment)==null?void 0:w.user_id)===s.currentUser.id}),ee=D(()=>{var w;return s.currentUser&&((w=s.comment)==null?void 0:w.user_id)===s.currentUser.id||s.currentUser&&s.currentUser.is_admin===1}),F=D(()=>{var w,G,xe;return((w=s.comment)==null?void 0:w.updated_at)&&((G=s.comment)==null?void 0:G.updated_at)!==((xe=s.comment)==null?void 0:xe.created_at)}),O=D(()=>{var w,G;return(w=s.comment)!=null&&w.is_deleted?!1:(((G=s.comment)==null?void 0:G.rating)||0)<=-3}),le=D(()=>O.value),ce=m(!1),ue=D(()=>{var w,G;return(w=s.comment)!=null&&w.is_deleted?null:(((G=s.comment)==null?void 0:G.rating)||0)<=-3?"lowRating":null}),ve=()=>{var w,G;e("start-edit",(w=s.comment)==null?void 0:w.id),b.value=((G=s.comment)==null?void 0:G.content)||"",_e(()=>{k.value&&(k.value.focus(),ie({target:k.value}))})},J=()=>{var w;e("cancel-edit"),b.value=((w=s.comment)==null?void 0:w.content)||""},I=()=>{var w;b.value.trim()&&e("edit",(w=s.comment)==null?void 0:w.id,b.value.trim())},v=()=>{var w;confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π?")&&e("delete",(w=s.comment)==null?void 0:w.id)},N=w=>{var G,xe;C.value===w?(C.value=0,e("rate",(G=s.comment)==null?void 0:G.id,w)):(C.value=w,e("rate",(xe=s.comment)==null?void 0:xe.id,w))},de=w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),I())},H=D(()=>{var w,G;return((G=(w=s.comment)==null?void 0:w.content)==null?void 0:G.length)>500}),ke=m(!1),ye=D(()=>{var w;return Ee((w=s.comment)==null?void 0:w.content,500,ke.value)}),Me=()=>{ke.value=!ke.value},Be=()=>{console.log("Avatar load error, falling back to initials"),d.value=null,_e(()=>{const w=document.querySelector(".avatar-placeholder");w&&(w.style.display="flex")})},he=()=>{i.push("/login")},me=w=>{V(w,k,b,G=>{b.value=G})},Ie=w=>{K(w,k,b,G=>{b.value=G})},Re=()=>{be(k,b,w=>{b.value=w})},Le=()=>{S(k,b,w=>{b.value=w})},Ge=w=>{ge(w,k,b,G=>{b.value=G})},Se=w=>{ie(w)};return Ue(b,()=>{o.value&&k.value&&_e(()=>{Se({target:k.value})})}),{isEditing:o,editContent:b,userRating:C,isCommentOwner:B,canDeleteComment:ee,isCommentEdited:F,formatDate:dn,formatRelativeTime:un,startEdit:ve,cancelEdit:J,saveEdit:I,confirmDelete:v,rateComment:N,avatarUrl:d,getInitials:As,handleEditKeydown:de,isCommentHidden:le,showHiddenComment:ce,hiddenCommentReason:ue,isLongComment:H,isExpanded:ke,formattedContent:ye,toggleExpanded:Me,autoResizeEdit:Se,editTextarea:k,showEmojiPicker:_,showImagePicker:l,insertEmojiEdit:me,insertImageEdit:Ie,insertSpoilerEdit:Re,insertLinkEdit:Le,handleEmojiMouseEnter:p,handleEmojiMouseLeave:E,handleImageMouseEnter:P,handleImageMouseLeave:L,closeEmojiPicker:U,closeImagePicker:x,handleButtonMouseEnter:R,handleButtonMouseLeave:y,handleImageButtonMouseEnter:M,handleAvatarError:Be,openLogin:he,showLinkModal:c,selectedTextForLink:r,insertLinkFromModal:Ge,closeLinkModal:q}}},js=["data-comment-id"],Us={class:"comment-header"},Bs={class:"user-info"},$s={class:"user-avatar"},Hs=["src","alt"],Ns={class:"user-details"},Ds={class:"username"},Vs={key:0,class:"user-rating"},Fs=["title"],Os=["title"],qs={class:"comment-content"},Ks={key:0,class:"hidden-comment-warning"},zs={key:1},Ws={key:0,class:"deleted-comment"},Gs={key:1},Ys={key:0,class:"edit-form"},Zs={class:"edit-textarea-container"},Xs={class:"edit-footer"},Qs={class:"edit-actions"},Js=["disabled"],ei={class:"character-counter-container"},ti={key:1,class:"comment-text-container"},oi=["innerHTML"],ni={class:"comment-footer"},li={class:"comment-actions"},si={class:"rating-buttons"},ii={class:"action-buttons"};function ai(s,e,i,o,b,C){var c,r,p,E,P,L,R,M,y,U,x,q,V,K,S,ge,be,ie,Ee;const d=we("router-link"),k=we("EmojiPicker"),_=we("ImagePicker"),l=we("LinkModal");return a(),u("div",{class:"comment-item","data-comment-id":(c=i.comment)==null?void 0:c.id},[t("div",Us,[t("div",Bs,[se(d,{to:{path:"/lists/".concat((r=i.comment)==null?void 0:r.user_id)},target:"_blank",rel:"noopener noreferrer",class:"user-avatar-link"},{default:yo(()=>{var B,ee;return[t("div",$s,[o.avatarUrl?(a(),u("img",{key:0,src:o.avatarUrl,alt:((B=i.comment)==null?void 0:B.username)||"–ê–Ω–æ–Ω–∏–º",onError:e[0]||(e[0]=(...F)=>o.handleAvatarError&&o.handleAvatarError(...F)),onerror:"this.onerror=null; this.style.display='none'; this.nextElementSibling.style.display='flex';"},null,40,Hs)):(a(),u("div",{key:1,class:"avatar-placeholder",style:at({display:o.avatarUrl?"none":"flex"})},g(o.getInitials(((ee=i.comment)==null?void 0:ee.username)||"–ê–Ω–æ–Ω–∏–º")),5))])]}),_:1},8,["to"]),t("div",Ns,[se(d,{to:{path:"/lists/".concat((p=i.comment)==null?void 0:p.user_id)},target:"_blank",rel:"noopener noreferrer",class:"username-link"},{default:yo(()=>{var B;return[t("span",Ds,g(((B=i.comment)==null?void 0:B.username)||"–ê–Ω–æ–Ω–∏–º"),1)]}),_:1},8,["to"]),(E=i.comment)!=null&&E.user_movie_rating?(a(),u("span",Vs,[e[19]||(e[19]=t("i",{class:"fas fa-star"},null,-1)),ne(" "+g(i.comment.user_movie_rating),1)])):h("",!0),t("span",{class:"date",title:o.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(o.formatDate((P=i.comment)==null?void 0:P.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(o.formatDate((L=i.comment)==null?void 0:L.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(o.formatDate((R=i.comment)==null?void 0:R.created_at))},[ne(g(o.formatRelativeTime((M=i.comment)==null?void 0:M.created_at))+" ",1),o.isCommentEdited?(a(),u("i",{key:0,class:"fas fa-pencil-alt edit-icon",title:o.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(o.formatDate((y=i.comment)==null?void 0:y.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(o.formatDate((U=i.comment)==null?void 0:U.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(o.formatDate((x=i.comment)==null?void 0:x.created_at))},null,8,Os)):h("",!0)],8,Fs)])])]),t("div",qs,[!((q=i.comment)!=null&&q.is_deleted)&&o.isCommentHidden&&!o.showHiddenComment?(a(),u("div",Ks,[o.hiddenCommentReason==="lowRating"?(a(),u("p",{key:0,class:"warning-text",onClick:e[1]||(e[1]=B=>o.showHiddenComment=!0)},e[20]||(e[20]=[t("i",{class:"fas fa-eye-slash"},null,-1),ne(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–∫—Ä—ã—Ç –∏–∑-–∑–∞ –Ω–∏–∑–∫–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å. ")]))):h("",!0)])):(a(),u("div",zs,[(V=i.comment)!=null&&V.is_deleted?(a(),u("div",Ws,e[21]||(e[21]=[t("p",{class:"deleted-message"},[t("i",{class:"fas fa-trash"}),ne(" –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —É–¥–∞–ª—ë–Ω ")],-1)]))):(a(),u("div",Gs,[o.isEditing?(a(),u("div",Ys,[t("div",Zs,[W(t("textarea",{ref:"editTextarea","onUpdate:modelValue":e[2]||(e[2]=B=>o.editContent=B),class:"edit-textarea",rows:"3",maxlength:"1500",onKeydown:e[3]||(e[3]=(...B)=>o.handleEditKeydown&&o.handleEditKeydown(...B)),onInput:e[4]||(e[4]=(...B)=>o.autoResizeEdit&&o.autoResizeEdit(...B))},null,544),[[ot,o.editContent]])]),t("div",Xs,[t("div",Qs,[t("button",{onClick:e[5]||(e[5]=(...B)=>o.cancelEdit&&o.cancelEdit(...B)),class:"cancel-button"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:e[6]||(e[6]=(...B)=>o.saveEdit&&o.saveEdit(...B)),class:"save-button",disabled:!o.editContent.trim()||o.editContent.length>1500}," –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ",8,Js)]),t("div",ei,[t("div",{class:A(["character-counter-inline",{"near-limit":o.editContent.length>1400,"at-limit":o.editContent.length>=1500}])},g(o.editContent.length)+"/1500 ",3),t("button",{type:"button",class:A(["emoji-button-inline",{active:o.showEmojiPicker}]),onMouseenter:e[7]||(e[7]=(...B)=>o.handleButtonMouseEnter&&o.handleButtonMouseEnter(...B)),onMouseleave:e[8]||(e[8]=(...B)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...B))}," üòä ",34),t("button",{type:"button",class:A(["emoji-button-inline",{active:o.showImagePicker}]),onMouseenter:e[9]||(e[9]=(...B)=>o.handleImageButtonMouseEnter&&o.handleImageButtonMouseEnter(...B)),onMouseleave:e[10]||(e[10]=(...B)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...B))},e[22]||(e[22]=[nt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-d19fdc64><g id="logo" data-v-d19fdc64><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-d19fdc64></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-d19fdc64></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-d19fdc64></path></g></svg>',1)]),34),t("button",{type:"button",class:"emoji-button-inline spoiler-button",onClick:e[11]||(e[11]=(...B)=>o.insertSpoilerEdit&&o.insertSpoilerEdit(...B)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},e[23]||(e[23]=[t("i",{class:"fas fa-eye-slash"},null,-1)])),t("button",{type:"button",class:"emoji-button-inline link-button",onClick:e[12]||(e[12]=(...B)=>o.insertLinkEdit&&o.insertLinkEdit(...B)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},e[24]||(e[24]=[t("i",{class:"fas fa-link"},null,-1)])),se(k,{"is-visible":o.showEmojiPicker,onEmojiSelected:o.insertEmojiEdit,onMouseEnter:o.handleEmojiMouseEnter,onMouseLeave:o.handleEmojiMouseLeave,onClose:o.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),se(_,{"is-visible":o.showImagePicker,"current-user":i.currentUser,onImageSelected:o.insertImageEdit,onMouseEnter:o.handleImageMouseEnter,onMouseLeave:o.handleImageMouseLeave,onClose:o.closeImagePicker,onLoginRequired:o.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),se(l,{"is-visible":o.showLinkModal,"selected-text":o.selectedTextForLink,onClose:o.closeLinkModal,onSubmit:o.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):(a(),u("div",ti,[t("p",{class:A(["comment-text",{truncated:o.isLongComment&&!o.isExpanded}]),innerHTML:o.formattedContent},null,10,oi),o.isLongComment?(a(),u("button",{key:0,onClick:e[13]||(e[13]=(...B)=>o.toggleExpanded&&o.toggleExpanded(...B)),class:"expand-button"},g(o.isExpanded?"–°–≤–µ—Ä–Ω—É—Ç—å":"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å"),1)):h("",!0)]))]))]))]),t("div",ni,[t("div",li,[t("div",si,[!o.isCommentOwner&&!((K=i.comment)!=null&&K.is_deleted)?(a(),u("button",{key:0,onClick:e[14]||(e[14]=B=>o.rateComment(1)),class:A(["rating-button",{"rated-up":o.userRating===1}])},e[25]||(e[25]=[t("i",{class:"fas fa-thumbs-up"},null,-1)]),2)):h("",!0),t("span",{class:A(["rating-count",{"rating-positive":o.userRating===1,"rating-negative":o.userRating===-1}])},g(((S=i.comment)==null?void 0:S.rating)||0),3),!o.isCommentOwner&&!((ge=i.comment)!=null&&ge.is_deleted)?(a(),u("button",{key:1,onClick:e[15]||(e[15]=B=>o.rateComment(-1)),class:A(["rating-button",{"rated-down":o.userRating===-1}])},e[26]||(e[26]=[t("i",{class:"fas fa-thumbs-down"},null,-1)]),2)):h("",!0)]),t("div",ii,[!i.currentUser||i.currentUser.allow_comments===1?(a(),u("button",{key:0,onClick:e[16]||(e[16]=B=>s.$emit("reply",i.comment)),class:"action-button reply-button"},e[27]||(e[27]=[t("i",{class:"fas fa-reply"},null,-1)]))):h("",!0),o.isCommentOwner&&!((be=i.comment)!=null&&be.is_deleted)&&!o.isEditing&&((ie=i.currentUser)==null?void 0:ie.allow_comments)===1?(a(),u("button",{key:1,onClick:e[17]||(e[17]=(...B)=>o.startEdit&&o.startEdit(...B)),class:"action-button edit-button"},e[28]||(e[28]=[t("i",{class:"fas fa-edit"},null,-1)]))):h("",!0),o.canDeleteComment&&!((Ee=i.comment)!=null&&Ee.is_deleted)?(a(),u("button",{key:2,onClick:e[18]||(e[18]=(...B)=>o.confirmDelete&&o.confirmDelete(...B)),class:"action-button delete-button"},e[29]||(e[29]=[t("i",{class:"fas fa-trash"},null,-1)]))):h("",!0)])])])],8,js)}const ri=Te(xs,[["render",ai],["__scopeId","data-v-d19fdc64"]]),ui={name:"CommentThread",components:{CommentItem:ri,EmojiPicker:yt,ImagePicker:ht,LinkModal:pt},props:{comment:{type:Object,required:!0},currentUser:{type:Object,required:!0},replyTo:{type:Object,default:null},replyContent:{type:String,default:""},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate","submit-reply","cancel-reply","update-reply-content","reply-keydown"],setup(s,{emit:e}){const i=m(null),o=m(!0),{showEmojiPicker:b,showImagePicker:C,showLinkModal:d,selectedTextForLink:k,handleEmojiMouseEnter:_,handleEmojiMouseLeave:l,handleImageMouseEnter:c,handleImageMouseLeave:r,handleButtonMouseEnter:p,handleImageButtonMouseEnter:E,handleButtonMouseLeave:P,closeEmojiPicker:L,closeImagePicker:R,closeLinkModal:M,insertEmojiUniversal:y,insertImageUniversal:U,insertLinkUniversal:x,insertLinkFromModalUniversal:q,insertSpoilerUniversal:V}=bt(),K=F=>{e("update-reply-content",F.target.value);const O=F.target;O&&(O.style.height="auto",O.style.height="".concat(Math.min(O.scrollHeight,200),"px"))},S={get value(){return s.replyContent},set value(F){e("update-reply-content",F)}};return{replyTextarea:i,showEmojiPicker:b,showImagePicker:C,isCollapsed:o,insertEmoji:F=>{y(F,i,S,O=>{e("update-reply-content",O)})},insertImage:F=>{U(F,i,S,O=>{e("update-reply-content",O)})},insertSpoiler:()=>{V(i,S,F=>{e("update-reply-content",F)})},handleEmojiMouseEnter:_,handleEmojiMouseLeave:l,handleImageMouseEnter:c,handleImageMouseLeave:r,handleButtonMouseEnter:p,handleButtonMouseLeave:P,closeEmojiPicker:L,closeImagePicker:R,handleImageButtonMouseEnter:E,handleReplyInput:K,toggleCollapsed:()=>{o.value=!o.value},showLinkModal:d,selectedTextForLink:k,insertLink:()=>{x(i,S,F=>{e("update-reply-content",F)})},closeLinkModal:M,insertLinkFromModal:F=>{q(F,i,S,O=>{e("update-reply-content",O)})}}},computed:{canReply(){return this.currentUser?this.currentUser.allow_comments===1:!0},getReplyPlaceholder(){return this.currentUser?this.currentUser.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç..."},formattedContent(){const{formatContent:s}=Ro();return s(this.comment.content)}}},di={class:"comment-thread"},ci={key:0,class:"reply-form"},vi={class:"textarea-container"},mi=["value","placeholder","disabled"],fi={class:"reply-footer"},gi={class:"reply-actions"},ki=["disabled"],yi={class:"character-counter-container"},hi=["disabled"],pi={key:1,class:"replies-container"},bi=["title"],wi={class:"replies-count"},Ci=["title"],_i={key:0,class:"replies-content"};function Mi(s,e,i,o,b,C){const d=we("CommentItem"),k=we("EmojiPicker"),_=we("ImagePicker"),l=we("LinkModal"),c=we("CommentThread",!0);return a(),u("div",di,[se(d,{comment:i.comment,"current-user":i.currentUser,"editing-comment-id":i.editingCommentId,onReply:e[0]||(e[0]=r=>s.$emit("reply",r)),onStartEdit:e[1]||(e[1]=r=>s.$emit("start-edit",r)),onCancelEdit:e[2]||(e[2]=r=>s.$emit("cancel-edit")),onEdit:e[3]||(e[3]=(r,p)=>s.$emit("edit",r,p)),onDelete:e[4]||(e[4]=r=>s.$emit("delete",r)),onRate:e[5]||(e[5]=(r,p)=>s.$emit("rate",r,p))},null,8,["comment","current-user","editing-comment-id"]),i.replyTo&&i.replyTo.id===i.comment.id?(a(),u("div",ci,[t("div",vi,[t("textarea",{ref:"replyTextarea",class:"comment-textarea",value:i.replyContent,placeholder:C.getReplyPlaceholder,disabled:i.currentUser&&i.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:e[6]||(e[6]=(...r)=>o.handleReplyInput&&o.handleReplyInput(...r)),onKeydown:e[7]||(e[7]=r=>s.$emit("reply-keydown",r))},null,40,mi)]),t("div",fi,[t("div",gi,[t("button",{class:"cancel-reply",onClick:e[8]||(e[8]=r=>s.$emit("cancel-reply"))},"–û—Ç–º–µ–Ω–∞"),t("button",{class:"submit-button",disabled:!i.replyContent.trim()||i.replyContent.length>1500||i.currentUser&&i.currentUser.allow_comments!==1,onClick:e[9]||(e[9]=r=>s.$emit("submit-reply"))}," –û—Ç–≤–µ—Ç–∏—Ç—å ",8,ki)]),t("div",yi,[t("div",{class:A(["character-counter-inline",{"near-limit":i.replyContent.length>1400,"at-limit":i.replyContent.length>=1500}])},g(i.replyContent.length)+"/1500 ",3),t("button",{type:"button",class:A(["emoji-button-inline",{active:o.showEmojiPicker}]),onMouseenter:e[10]||(e[10]=(...r)=>o.handleButtonMouseEnter&&o.handleButtonMouseEnter(...r)),onMouseleave:e[11]||(e[11]=(...r)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...r))}," üòä ",34),t("button",{type:"button",class:A(["emoji-button-inline",{active:o.showImagePicker}]),onMouseenter:e[12]||(e[12]=(...r)=>o.handleImageButtonMouseEnter&&o.handleImageButtonMouseEnter(...r)),onMouseleave:e[13]||(e[13]=(...r)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...r))},e[29]||(e[29]=[nt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-6c0fc347><g id="logo" data-v-6c0fc347><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-6c0fc347></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-6c0fc347></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-6c0fc347></path></g></svg>',1)]),34),t("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:i.currentUser&&i.currentUser.allow_comments!==1,onClick:e[14]||(e[14]=(...r)=>o.insertSpoiler&&o.insertSpoiler(...r)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},e[30]||(e[30]=[t("i",{class:"fas fa-eye-slash"},null,-1)]),8,hi),t("button",{type:"button",class:"emoji-button-inline link-button",onClick:e[15]||(e[15]=(...r)=>o.insertLink&&o.insertLink(...r)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},e[31]||(e[31]=[t("i",{class:"fas fa-link"},null,-1)])),se(k,{"is-visible":o.showEmojiPicker,onEmojiSelected:o.insertEmoji,onMouseEnter:o.handleEmojiMouseEnter,onMouseLeave:o.handleEmojiMouseLeave,onClose:o.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),se(_,{"is-visible":o.showImagePicker,"current-user":i.currentUser,onImageSelected:o.insertImage,onMouseEnter:o.handleImageMouseEnter,onMouseLeave:o.handleImageMouseLeave,onClose:o.closeImagePicker,onLoginRequired:e[16]||(e[16]=()=>s.$router.push("/login"))},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose"]),se(l,{"is-visible":o.showLinkModal,"selected-text":o.selectedTextForLink,onClose:o.closeLinkModal,onSubmit:o.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):h("",!0),i.comment.replies&&i.comment.replies.length>0?(a(),u("div",pi,[t("button",{class:"collapse-toggle",title:o.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:e[17]||(e[17]=(...r)=>o.toggleCollapsed&&o.toggleCollapsed(...r))},[t("span",{class:A(["collapse-icon",{expanded:!o.isCollapsed}])},e[32]||(e[32]=[t("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},[t("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1)]),2),t("span",wi,g(i.comment.replies.length)+" "+g(i.comment.replies.length===1?"–æ—Ç–≤–µ—Ç":"–æ—Ç–≤–µ—Ç–æ–≤"),1)],8,bi),t("div",{class:"vertical-line-clickable",title:o.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:e[18]||(e[18]=(...r)=>o.toggleCollapsed&&o.toggleCollapsed(...r))},[t("div",{class:A(["vertical-line-visual",{collapsed:o.isCollapsed}])},null,2)],8,Ci),o.isCollapsed?h("",!0):(a(),u("div",_i,[(a(!0),u(re,null,Ce(i.comment.replies,r=>(a(),Ae(c,{key:r.id,comment:r,"current-user":i.currentUser,"reply-to":i.replyTo,"reply-content":i.replyContent,"editing-comment-id":i.editingCommentId,onReply:e[19]||(e[19]=p=>s.$emit("reply",p)),onStartEdit:e[20]||(e[20]=p=>s.$emit("start-edit",p)),onCancelEdit:e[21]||(e[21]=p=>s.$emit("cancel-edit")),onEdit:e[22]||(e[22]=(p,E)=>s.$emit("edit",p,E)),onDelete:e[23]||(e[23]=p=>s.$emit("delete",p)),onRate:e[24]||(e[24]=(p,E)=>s.$emit("rate",p,E)),onSubmitReply:e[25]||(e[25]=p=>s.$emit("submit-reply")),onCancelReply:e[26]||(e[26]=p=>s.$emit("cancel-reply")),onUpdateReplyContent:e[27]||(e[27]=p=>s.$emit("update-reply-content",p)),onReplyKeydown:e[28]||(e[28]=p=>s.$emit("reply-keydown",p))},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id"]))),128))]))])):h("",!0)])}const Ei=Te(ui,[["render",Mi],["__scopeId","data-v-6c0fc347"]]),Li={name:"Comments",components:{CommentThread:Ei,Notification:ut,EmojiPicker:yt,ImagePicker:ht,LinkModal:pt},props:{movieId:{type:[String,Number],required:!0}},setup(s){const e=gt(),i=rt(),o=lt(),b=m([]),C=m(""),d=m(null),k=m(""),_=m(null),l=m(e.user),c=m(null),r=m(null),p=m(o.isAutoShowComments),E=m(!1),P=m(3),L=m(3),{showEmojiPicker:R,showImagePicker:M,showLinkModal:y,selectedTextForLink:U,handleEmojiMouseEnter:x,handleEmojiMouseLeave:q,handleImageMouseEnter:V,handleImageMouseLeave:K,handleButtonMouseEnter:S,handleImageButtonMouseEnter:ge,handleButtonMouseLeave:be,closeEmojiPicker:ie,closeImagePicker:Ee,closeLinkModal:B,insertEmojiUniversal:ee,insertImageUniversal:F,insertLinkUniversal:O,insertLinkFromModalUniversal:le,insertSpoilerUniversal:ce,autoResize:ue}=bt(),ve=D(()=>{const $=(Y=null)=>b.value.filter(Q=>Q.parent_id===Y).sort((Q,pe)=>Q.id-pe.id).map(Q=>({...Q,replies:$(Q.id)})).filter(Q=>!Q.is_deleted||Q.replies&&Q.replies.length>0);return $()}),J=D(()=>{const $=Y=>Y.reduce((Q,pe)=>Q+1+$(pe.replies||[]),0);return $(ve.value)}),I=D(()=>ve.value.slice(0,L.value)),v=D(()=>ve.value.length>L.value),N=D(()=>ve.value.length-L.value),de=()=>{L.value+=P.value},H=async()=>{try{const $=await Go(s.movieId);b.value=$}catch($){console.error("Failed to load comments:",$),c.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.")}},ke=async()=>{if(E.value)return;if(!e.token){c.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Le});return}if(l.value&&l.value.allow_comments!==1){c.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!C.value.replace(/\[spoiler\]\s*\[\/spoiler\]/g,"").replace(/\[img\]\s*\[\/img\]/g,"").replace(/\[link=[^\]]+\]\s*\[\/link\]/g,"").trim()){c.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º");return}if(C.value.length>1500){c.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await ho(s.movieId,C.value.trim()),C.value="",await H(),p.value=!0,_e(()=>{r.value&&(r.value.focus(),r.value.style.height="auto"),setTimeout(()=>{const Y=document.querySelectorAll(".comment-item[data-comment-id]");if(Y.length>0){const Q=Array.from(Y).map(pe=>parseInt(pe.getAttribute("data-comment-id"))).filter(pe=>!isNaN(pe));if(Q.length>0){const pe=Math.max(...Q),je=document.querySelector('[data-comment-id="'.concat(pe,'"]'));je&&je.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}},300)})}catch(Y){console.error("Failed to create comment:",Y),c.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},ye=$=>{if(!e.token){c.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Le});return}_.value=null,d.value=$,k.value="",_e(()=>{const Y=document.querySelector(".reply-form");Y&&Y.scrollIntoView({behavior:"smooth",block:"center"})})},Me=async()=>{if(!e.token){c.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Le});return}if(l.value&&l.value.allow_comments!==1){c.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!(!k.value.trim()||!d.value)){if(k.value.length>1500){c.value.showNotification("–û—Ç–≤–µ—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await ho(s.movieId,k.value.trim(),d.value.id);const $=d.value.id;await H(),k.value="",d.value=null,_e(()=>{setTimeout(()=>{const Y=document.querySelector('[data-comment-id="'.concat($,'"]'));if(Y){const Q=Y.querySelector(".replies-content");if(Q){const pe=Q.querySelectorAll(".comment-item[data-comment-id]");if(pe.length>0){const je=Array.from(pe).map(Pe=>parseInt(Pe.getAttribute("data-comment-id"))).filter(Pe=>!isNaN(Pe));if(je.length>0){const Pe=Math.max(...je),st=document.querySelector('[data-comment-id="'.concat(Pe,'"]'));st&&st.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}}}},300)})}catch($){console.error("Error submitting reply:",$),c.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}}},Be=async($,Y)=>{if(!e.token){c.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Le});return}if(l.value&&l.value.allow_comments!==1){c.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(Y.length>1500){c.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await Xo($,Y.trim()),await H(),_.value=null}catch(Q){console.error("Failed to update comment:",Q),c.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},he=async $=>{if(!e.token){c.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Le});return}try{await Zo($),await H()}catch(Y){console.error("Failed to delete comment:",Y),c.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},me=async($,Y)=>{if(!e.token){c.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Le});return}try{await Yo($,Y),await H()}catch(Q){console.error("Failed to rate comment:",Q),c.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ü–µ–Ω–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},Ie=$=>{E.value||R.value||$.key==="Enter"&&!$.shiftKey&&($.preventDefault(),ke())},Re=$=>{$.key==="Enter"&&!$.shiftKey&&($.preventDefault(),Me())},Le=()=>{i.push("/login")},Ge=$=>{E.value=!0,ee($,r,C,Y=>{C.value=Y}),setTimeout(()=>{E.value=!1},100)},Se=$=>{F($,r,C,Y=>{C.value=Y})},qe=()=>{ce(r,C,$=>{C.value=$})},Ke=()=>{O(r,C,$=>{C.value=$})},w=$=>{le($,r,C,Y=>{C.value=Y})},G=D(()=>l.value?l.value.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."),xe=D(()=>l.value?l.value.allow_comments===1:!0),Ye=$=>{d.value=null,k.value="",_.value=$},dt=()=>{_.value=null};return Oe(()=>{H()}),{comments:b,groupedComments:ve,displayedComments:I,hasMoreComments:v,remainingCommentsCount:N,showMoreComments:de,newComment:C,replyTo:d,replyContent:k,editingCommentId:_,currentUser:l,notificationRef:c,commentTextarea:r,showComments:p,submitComment:ke,handleReply:ye,submitReply:Me,handleEdit:Be,handleDelete:he,handleRate:me,handleCommentKeydown:Ie,handleReplyKeydown:Re,autoResize:ue,totalCommentsCount:J,getCommentWordForm:Ps,showEmojiPicker:R,showImagePicker:M,showLinkModal:y,selectedTextForLink:U,insertEmoji:Ge,insertImage:Se,handleEmojiMouseEnter:x,handleEmojiMouseLeave:q,handleImageMouseEnter:V,handleImageMouseLeave:K,closeEmojiPicker:ie,closeImagePicker:Ee,handleButtonMouseLeave:be,handleButtonMouseEnter:S,handleImageButtonMouseEnter:ge,getCommentPlaceholder:G,canComment:xe,handleStartEdit:Ye,handleCancelEdit:dt,insertSpoiler:qe,insertLink:Ke,insertLinkFromModal:w,closeLinkModal:B}}},Ii={class:"comments-section"},Ri={class:"spoiler-content"},Ti={key:1,class:"comments-container"},Si={class:"comments-header"},Pi={class:"textarea-container"},Ai=["placeholder","disabled"],xi={class:"comment-footer"},ji={class:"comment-actions"},Ui=["disabled"],Bi={class:"character-counter-container"},$i=["disabled"],Hi=["disabled"],Ni=["disabled"],Di={class:"comments-list"},Vi={key:0,class:"show-more-comments"};function Fi(s,e,i,o,b,C){const d=we("EmojiPicker"),k=we("ImagePicker"),_=we("LinkModal"),l=we("CommentThread"),c=we("Notification");return a(),u("div",Ii,[o.showComments?(a(),u("div",Ti,[t("div",Si,[t("button",{class:"hide-comments-btn",onClick:e[1]||(e[1]=r=>o.showComments=!1)},e[18]||(e[18]=[t("i",{class:"fas fa-eye-slash"},null,-1),ne(" –°–∫—Ä—ã—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ")]))]),t("form",{class:"comment-form",onSubmit:e[11]||(e[11]=Ve((...r)=>o.submitComment&&o.submitComment(...r),["prevent"]))},[t("div",Pi,[W(t("textarea",{ref:"commentTextarea","onUpdate:modelValue":e[2]||(e[2]=r=>o.newComment=r),class:"comment-textarea",placeholder:o.getCommentPlaceholder,disabled:o.currentUser&&o.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:e[3]||(e[3]=(...r)=>o.autoResize&&o.autoResize(...r)),onKeydown:e[4]||(e[4]=(...r)=>o.handleCommentKeydown&&o.handleCommentKeydown(...r))},null,40,Ai),[[ot,o.newComment]])]),t("div",xi,[t("div",ji,[t("button",{class:"submit-button",type:"submit",disabled:!o.newComment.trim()||o.newComment.length>1500||o.currentUser&&o.currentUser.allow_comments!==1}," –û—Ç–ø—Ä–∞–≤–∏—Ç—å ",8,Ui)]),t("div",Bi,[t("div",{class:A(["character-counter-inline",{"near-limit":o.newComment.length>1400,"at-limit":o.newComment.length>=1500}])},g(o.newComment.length)+"/1500 ",3),t("button",{type:"button",class:A(["emoji-button-inline",{active:o.showEmojiPicker}]),disabled:o.currentUser&&o.currentUser.allow_comments!==1,onMouseenter:e[5]||(e[5]=(...r)=>o.handleButtonMouseEnter&&o.handleButtonMouseEnter(...r)),onMouseleave:e[6]||(e[6]=(...r)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...r))}," üòä ",42,$i),t("button",{type:"button",class:A(["emoji-button-inline",{active:o.showImagePicker}]),disabled:o.currentUser&&o.currentUser.allow_comments!==1,onMouseenter:e[7]||(e[7]=(...r)=>o.handleImageButtonMouseEnter&&o.handleImageButtonMouseEnter(...r)),onMouseleave:e[8]||(e[8]=(...r)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...r))},e[19]||(e[19]=[nt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-79080d6f><g id="logo" data-v-79080d6f><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-79080d6f></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-79080d6f></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-79080d6f></path></g></svg>',1)]),42,Hi),t("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:o.currentUser&&o.currentUser.allow_comments!==1,onClick:e[9]||(e[9]=(...r)=>o.insertSpoiler&&o.insertSpoiler(...r)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},e[20]||(e[20]=[t("i",{class:"fas fa-eye-slash"},null,-1)]),8,Ni),t("button",{type:"button",class:"emoji-button-inline link-button",onClick:e[10]||(e[10]=(...r)=>o.insertLink&&o.insertLink(...r)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},e[21]||(e[21]=[t("i",{class:"fas fa-link"},null,-1)])),se(d,{"is-visible":o.showEmojiPicker&&o.canComment,onEmojiSelected:o.insertEmoji,onMouseEnter:o.handleEmojiMouseEnter,onMouseLeave:o.handleEmojiMouseLeave,onClose:o.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),se(k,{"is-visible":o.showImagePicker&&o.canComment,"current-user":o.currentUser,onImageSelected:o.insertImage,onMouseEnter:o.handleImageMouseEnter,onMouseLeave:o.handleImageMouseLeave,onClose:o.closeImagePicker,onLoginRequired:s.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),se(_,{"is-visible":o.showLinkModal,"selected-text":o.selectedTextForLink,onClose:o.closeLinkModal,onSubmit:o.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])],32),t("div",Di,[(a(!0),u(re,null,Ce(o.displayedComments,r=>(a(),Ae(l,{key:r.id,comment:r,"current-user":o.currentUser,"reply-to":o.replyTo,"reply-content":o.replyContent,"editing-comment-id":o.editingCommentId,"is-first-comment":!1,onReply:o.handleReply,onStartEdit:o.handleStartEdit,onCancelEdit:o.handleCancelEdit,onEdit:o.handleEdit,onDelete:o.handleDelete,onRate:o.handleRate,onSubmitReply:o.submitReply,onCancelReply:e[12]||(e[12]=p=>o.replyTo=null),onUpdateReplyContent:e[13]||(e[13]=p=>o.replyContent=p),onReplyKeydown:o.handleReplyKeydown},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id","onReply","onStartEdit","onCancelEdit","onEdit","onDelete","onRate","onSubmitReply","onReplyKeydown"]))),128)),o.hasMoreComments?(a(),u("div",Vi,[t("button",{class:"show-more-btn",onClick:e[14]||(e[14]=(...r)=>o.showMoreComments&&o.showMoreComments(...r))}," –ü–æ–∫–∞–∑–∞—Ç—å –µ—â–µ "+g(o.remainingCommentsCount)+" "+g(o.getCommentWordForm(o.remainingCommentsCount)),1)])):h("",!0)])])):(a(),u("div",{key:0,class:"spoiler-warning",onClick:e[0]||(e[0]=r=>o.showComments=!0)},[t("div",Ri,[e[15]||(e[15]=t("i",{class:"fas fa-eye-slash"},null,-1)),e[16]||(e[16]=t("h3",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–∫—Ä—ã—Ç—ã",-1)),e[17]||(e[17]=t("p",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä—ã. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å.",-1)),t("div",{class:A(["comments-count",{"no-comments":o.totalCommentsCount===0}])},[o.totalCommentsCount===0?(a(),u(re,{key:0},[ne(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç ")],64)):(a(),u(re,{key:1},[ne(g(o.totalCommentsCount)+" "+g(o.getCommentWordForm(o.totalCommentsCount)),1)],64))],2)])])),se(c,{ref:"notificationRef"},null,512)])}const Oi=Te(Li,[["render",Fi],["__scopeId","data-v-79080d6f"]]),qi={class:"movie-info"},Ki={class:"content"},zi={key:0,class:"content-card"},Wi={class:"movie-skeleton"},Gi={class:"movie-skeleton__player"},Yi={key:2,class:"content-card"},Zi={key:3,class:"content-card"},Xi={class:"content-header"},Qi=["src"],Ji={class:"content-title"},ea={key:0,class:"ratings-links"},ta={key:1},oa=["href","title"],na={key:2},la=["href","title"],sa={key:3},ia=["href","title"],aa={key:4},ra=["href","title"],ua={key:5},da=["href"],ca={key:6,class:"rating-links-group"},va=["href"],ma=["title"],fa={key:0,class:"fa-regular fa-face-grin-wink"},ga={key:1,class:"fas fa-spinner fa-spin"},ka={key:2,class:"nudity-info-popup"},ya={class:"nudity-info-content"},ha=["content"],pa=["content"],ba={class:"additional-info"},wa={class:"info-content"},Ca={key:0,class:"movie-poster-container desktop-only"},_a=["href"],Ma=["src"],Ea={class:"details-container"},La={class:"info-list"},Ia={key:0},Ra={key:1},Ta={key:2},Sa={key:3},Pa={key:4},Aa={key:5},xa={key:6},ja={key:7},Ua={key:8},Ba={class:"content-info"},$a={key:0,class:"content-description-text"},Ha={key:2,class:"comments-section"},Na={key:3,class:"staff-section"},Da={class:"staff-categories"},Va={key:0,class:"staff-category"},Fa={class:"staff-list"},Oa=["href","title"],qa=["src","alt"],Ka={class:"staff-name"},za={key:0,class:"staff-role"},Wa=["href","title"],Ga={key:1,class:"staff-category"},Ya={class:"staff-names-container"},Za={class:"staff-names-list"},Xa=["href"],Qa=["href","title"],Ja={key:2,class:"staff-category"},er={class:"staff-names-container"},tr={class:"staff-names-list"},or=["href"],nr=["href","title"],lr={key:4,class:"yt-video-container"},sr={key:5,class:"related-movies"},ir=["title"],ar={key:6,class:"related-movies"},rr=["title"],ur={__name:"MovieInfo",setup(s){const e=m(!0),i=lt(),o=gt(),b=Qo(),C=Mo(),d=m(C.params.kp_id),k=m(""),_=m(null),l=m(null),c=Jo(),p=rn().areTrailersActive,E=m(null),P=m(!1),L=m(!1),R=m(10),M=m(null),y=m(!1),U=D(()=>i.isCommentsEnabled),x=()=>{if(l.value){const I=l.value.name_ru||l.value.name_en||l.value.name_original||"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å–º–µ";document.title=I}},q=I=>I?I.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",V=I=>(I||[]).map(v=>({kp_id:v.film_id,poster:v.poster_url_preview||v.poster_url,title:v.name_ru||v.name_en||v.name_original})),K=I=>{if(typeof I!="number")return;const v=Math.floor(I/60),N=I%60;return"".concat(v," —á. ").concat(N," –º–∏–Ω.")},S=m(!1),ge=m({top:"0px",left:"0px"}),be=I=>{S.value=!0,ge.value={top:"".concat(I.pageY+10,"px"),left:"".concat(I.pageX-70,"px")}},ie=m(null),Ee=async()=>{try{const I=[l.value.name_ru||l.value.name_en||l.value.name_original,...l.value.year?[l.value.year]:[],...l.value.film_length?[K(l.value.film_length)]:[]];await navigator.clipboard.writeText(I.join(", ")),ie.value.showNotification("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ")}catch(I){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",I)}},B=async(I=!0)=>{var v,N,de,H,ke,ye,Me,Be;try{let he;if(d.value.startsWith("shiki")?he=await tn(d.value):he=await on(d.value,o.token),Array.isArray(he)&&he.length===0)throw new Error("–î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–∏—Å–∫.");l.value=he,d.value.startsWith("shiki")?l.value={...l.value,title:l.value.name_ru||l.value.name_en,name_original:l.value.name_en,short_description:l.value.slogan}:l.value={...l.value,title:l.value.name_ru||l.value.name_en||l.value.name_original,kinopoisk_id:d.value},c.setHeaderContent({text:l.value.title,imageUrl:l.value.logo_url}),x();const me={kp_id:d.value,title:((v=l.value)==null?void 0:v.name_ru)||((N=l.value)==null?void 0:N.name_en)||((de=l.value)==null?void 0:de.name_original),poster:((H=l.value)==null?void 0:H.poster_url)||((ke=l.value)==null?void 0:ke.cover_url)||((ye=l.value)==null?void 0:ye.screenshots[0]),year:(Me=l.value)==null?void 0:Me.year,type:(Be=l.value)==null?void 0:Be.type};if(d.value.startsWith("shiki"))if(l.value.screenshots&&l.value.screenshots.length>0){const Re=Math.floor(Math.random()*l.value.screenshots.length),Le=l.value.screenshots[Re];b.updateMoviePoster(Le)}else me.poster&&b.updateMoviePoster(me.poster);else me.poster&&b.updateMoviePoster(me.poster);if(D(()=>i.isHistoryAllowed).value&&me.kp_id&&me.title&&I)if(o.token)try{await Lo(me.kp_id,Z.HISTORY)}catch(Re){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é:",Re)}else i.addToHistory({...me})}catch(he){const{message:me,code:Ie}=ft(he);k.value=me,_.value=Ie,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–ª—å–º–∞—Ö:",he)}},ee=D(()=>{var I,v;return console.log("–¢—Ä–µ–π–ª–µ—Ä—ã:",(I=l.value)==null?void 0:I.videos),(v=l.value)==null?void 0:v.videos}),F=D(()=>{var I;return V((I=l.value)==null?void 0:I.sequels_and_prequels)}),O=D(()=>{var I;return V((I=l.value)==null?void 0:I.similars)}),le=()=>{var de;const I=((de=document.querySelector(".related-movies"))==null?void 0:de.clientWidth)||0,N=Math.floor(I/160)||10;R.value=Math.max(1,N)},ce=()=>{le()},ue=I=>{if(I.altKey&&I.keyCode===84&&document.querySelector(".player-container")){const N=document.querySelector(".theater-mode-btn");N&&N.click()}},ve=async()=>{var I;if(!o.token){ie.value.showNotification('–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:()=>c.openLogin()});return}if((I=l.value)!=null&&I.imdb_id){if(M.value){M.value=null;return}y.value=!0;try{const v=await nn(l.value.imdb_id);M.value=v.nudity_info}catch(v){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö:",v),ie.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö")}finally{y.value=!1}}};Oe(async()=>{await B(),e.value=!1,document.addEventListener("keydown",ue),window.addEventListener("resize",ce),setTimeout(le,100)}),en(async()=>{c.clearHeaderContent(),document.removeEventListener("keydown",ue),window.removeEventListener("resize",ce)}),Ue(()=>C.params.kp_id,async I=>{I&&I!==d.value&&(c.clearHeaderContent(),d.value=I,E.value=null,await B(),e.value=!1)},{immediate:!0}),Ue(l,()=>{x()},{deep:!0});const J=I=>{var v,N;return((N=(v=l.value)==null?void 0:v.staff)==null?void 0:N.filter(de=>de.profession_key===I))||[]};return(I,v)=>{var N,de;return a(),u(re,null,[t("div",qi,[t("div",Ki,[(e.value||!l.value)&&!k.value?(a(),u("div",zi,[t("div",Wi,[v[4]||(v[4]=nt('<div class="movie-skeleton__header" data-v-a5e7d39b><div class="movie-skeleton__title" data-v-a5e7d39b></div></div><div class="movie-skeleton__ratings" data-v-a5e7d39b><div class="movie-skeleton__rating-item" data-v-a5e7d39b></div><div class="movie-skeleton__rating-item" data-v-a5e7d39b></div><div class="movie-skeleton__rating-item" data-v-a5e7d39b></div></div>',2)),t("div",Gi,[se(Io)]),v[5]||(v[5]=nt('<div class="movie-skeleton__additional-info" data-v-a5e7d39b><div class="movie-skeleton__section-title" data-v-a5e7d39b></div><div class="movie-skeleton__info-list" data-v-a5e7d39b><div class="movie-skeleton__info-item" data-v-a5e7d39b></div><div class="movie-skeleton__info-item" data-v-a5e7d39b></div><div class="movie-skeleton__info-item" data-v-a5e7d39b></div><div class="movie-skeleton__info-item" data-v-a5e7d39b></div><div class="movie-skeleton__info-item" data-v-a5e7d39b></div></div></div><div class="movie-skeleton__description" data-v-a5e7d39b><div class="movie-skeleton__description-line" data-v-a5e7d39b></div><div class="movie-skeleton__description-line" data-v-a5e7d39b></div><div class="movie-skeleton__description-line" data-v-a5e7d39b></div><div class="movie-skeleton__description-line" data-v-a5e7d39b></div></div>',2))])])):h("",!0),k.value?(a(),Ae(Eo,{key:1,message:k.value,code:_.value},null,8,["message","code"])):h("",!0),k.value?(a(),u("div",Yi,[(a(),Ae(_o,{key:d.value,"kp-id":d.value,"movie-info":l.value,"onUpdate:movieInfo":B},null,8,["kp-id","movie-info"]))])):h("",!0),l.value&&!e.value?(a(),u("div",Zi,[t("div",Xi,[l.value.logo_url?(a(),u("div",{key:0,class:"content-logo",onMousemove:be,onMouseleave:v[0]||(v[0]=H=>S.value=!1),onClick:Ee},[t("img",{src:l.value.logo_url,alt:"–õ–æ–≥–æ—Ç–∏–ø —Ñ–∏–ª—å–º–∞",class:"content-logo"},null,8,Qi)],32)):(a(),u("div",{key:1,onMousemove:be,onMouseleave:v[1]||(v[1]=H=>S.value=!1),onClick:Ee},[t("h1",Ji,g(l.value.title),1)],32)),W(t("div",{class:"title-copy-tooltip",style:at(ge.value)}," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ",4),[[te,S.value]])]),l.value.kinopoisk_id||l.value.title||l.value.imdb_id||l.value.rating_imdb||l.value.shikimori_id?(a(),u("div",ea,[l.value.kinopoisk_id?(a(),Ae(Xl,{key:l.value.kinopoisk_id,"kp-id":l.value.kinopoisk_id,"show-dash":!0},null,8,["kp-id"])):h("",!0),l.value.kinopoisk_id?(a(),u("div",ta,[t("a",{href:"https://www.kinopoisk.ru/film/".concat(l.value.kinopoisk_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:l.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(q(l.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[v[6]||(v[6]=t("img",{src:bo,alt:"–ö–ü",class:"rating-logo"},null,-1)),t("span",{class:A(["rating-value",X(tt)(l.value.rating_kinopoisk)])},g(l.value.rating_kinopoisk?l.value.rating_kinopoisk:"‚Äî"),3),v[7]||(v[7]=t("img",{src:We,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,oa)])):h("",!0),!l.value.kinopoisk_id&&l.value.title?(a(),u("div",na,[t("a",{href:"https://www.kinopoisk.ru/index.php?kp_query=".concat(encodeURIComponent(l.value.title+(l.value.year?" "+l.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:l.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(q(l.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[v[8]||(v[8]=t("img",{src:bo,alt:"–ö–ü",class:"rating-logo"},null,-1)),t("span",{class:A(["rating-value",X(tt)(l.value.rating_kinopoisk)])},g(l.value.rating_kinopoisk?l.value.rating_kinopoisk:"‚Äî"),3),v[9]||(v[9]=t("img",{src:We,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,la)])):h("",!0),l.value.imdb_id?(a(),u("div",sa,[t("a",{href:"https://www.imdb.com/title/".concat(l.value.imdb_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:l.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(q(l.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[v[10]||(v[10]=t("img",{src:wo,alt:"IMDb",class:"rating-logo"},null,-1)),t("span",{class:A(["rating-value",X(tt)(l.value.rating_imdb)])},g(l.value.rating_imdb?l.value.rating_imdb:"‚Äî"),3),v[11]||(v[11]=t("img",{src:We,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,ia)])):h("",!0),!l.value.imdb_id&&l.value.title?(a(),u("div",aa,[t("a",{href:"https://www.imdb.com/find/?q=".concat(encodeURIComponent(l.value.title+(l.value.year?" "+l.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:l.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(q(l.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[v[12]||(v[12]=t("img",{src:wo,alt:"IMDb",class:"rating-logo"},null,-1)),t("span",{class:A(["rating-value",X(tt)(l.value.rating_imdb)])},g(l.value.rating_imdb?l.value.rating_imdb:"‚Äî"),3),v[13]||(v[13]=t("img",{src:We,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,ra)])):h("",!0),l.value.shikimori_id?(a(),u("div",ua,[t("a",{href:"https://shikimori.one/animes/".concat(l.value.shikimori_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},v[14]||(v[14]=[t("img",{src:cn,alt:"Shiki",class:"rating-logo"},null,-1),t("img",{src:We,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,da)])):h("",!0),l.value.imdb_id?(a(),u("div",ca,[t("a",{href:"https://www.imdb.com/title/".concat(l.value.imdb_id,"/parentalguide"),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},v[15]||(v[15]=[t("span",{class:"desktop-text"},"Parents Guide",-1),t("span",{class:"mobile-text"},"PG",-1),t("img",{src:We,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,va),t("button",{class:"rating-link nudity-info-btn",onClick:ve,title:M.value?"–°–∫—Ä—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é":"–ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ü–µ–Ω–∞—Ö(Sex & Nudity)"},[y.value?(a(),u("i",ga)):(a(),u("i",fa)),M.value?(a(),u("div",ka,[t("div",ya,g(M.value),1)])):h("",!0)],8,ma)])):h("",!0)])):h("",!0),(a(),Ae(_o,{key:d.value,"kp-id":d.value,"movie-info":l.value,"onUpdate:movieInfo":B},null,8,["kp-id","movie-info"])),t("meta",{name:"title-and-year",content:l.value.type==="FILM"&&l.value.year?"".concat(l.value.title," (").concat(l.value.year,")"):l.value.title},null,8,ha),l.value.name_original?(a(),u("meta",{key:1,name:"original-title",content:l.value.name_original},null,8,pa)):h("",!0),t("div",ba,[v[25]||(v[25]=t("h2",{class:"additional-info-title"},"–ü–æ–¥—Ä–æ–±–Ω–µ–µ",-1)),t("div",wa,[l.value.poster_url?(a(),u("div",Ca,[t("a",{href:l.value.poster_url,target:"_blank",rel:"noopener noreferrer"},[t("img",{src:l.value.poster_url,alt:"–ü–æ—Å—Ç–µ—Ä —Ñ–∏–ª—å–º–∞",class:"movie-poster"},null,8,Ma)],8,_a)])):h("",!0),t("div",Ea,[t("ul",La,[l.value.type&&X(po)[l.value.type]?(a(),u("li",Ia,[v[16]||(v[16]=t("strong",null,"–¢–∏–ø:",-1)),ne(" "+g(X(po)[l.value.type]),1)])):h("",!0),l.value.year?(a(),u("li",Ra,[v[17]||(v[17]=t("strong",null,"–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞:",-1)),ne(" "+g(l.value.year),1)])):h("",!0),l.value.title?(a(),u("li",Ta,[v[18]||(v[18]=t("strong",null,"–ù–∞–∑–≤–∞–Ω–∏–µ:",-1)),ne(" "+g(l.value.title),1)])):h("",!0),l.value.name_original?(a(),u("li",Sa,[v[19]||(v[19]=t("strong",null,"–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:",-1)),ne(" "+g(l.value.name_original),1)])):h("",!0),l.value.slogan?(a(),u("li",Pa,[v[20]||(v[20]=t("strong",null,"–°–ª–æ–≥–∞–Ω:",-1)),ne(" "+g(l.value.slogan),1)])):h("",!0),l.value.production_companies?(a(),u("li",Aa,[v[21]||(v[21]=t("strong",null,"–ü—Ä–æ–¥–∞–∫—à–Ω:",-1)),ne(" "+g(l.value.production_companies),1)])):h("",!0),(N=l.value.countries)!=null&&N.length?(a(),u("li",xa,[v[22]||(v[22]=t("strong",null,"–°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞:",-1)),ne(" "+g(l.value.countries.map(H=>H.country).join(", ")),1)])):h("",!0),(de=l.value.genres)!=null&&de.length?(a(),u("li",ja,[v[23]||(v[23]=t("strong",null,"–ñ–∞–Ω—Ä—ã:",-1)),ne(" "+g(l.value.genres.map(H=>H.genre).join(", ")),1)])):h("",!0),l.value.film_length?(a(),u("li",Ua,[v[24]||(v[24]=t("strong",null,"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:",-1)),ne(" "+g(K(l.value.film_length)),1)])):h("",!0)]),t("div",Ba,[l.value.description?(a(),u("p",$a,g(l.value.description),1)):h("",!0)])])])]),U.value?(a(),u("div",Ha,[(a(),Ae(Oi,{"movie-id":d.value,key:d.value},null,8,["movie-id"]))])):h("",!0),l.value.staff?(a(),u("div",Na,[t("div",Da,[J("ACTOR").length?(a(),u("div",Va,[v[26]||(v[26]=t("h3",{class:"additional-info-title"},"–ê–∫—Ç—ë—Ä—ã",-1)),t("div",Fa,[(a(!0),u(re,null,Ce(J("ACTOR").slice(0,12),H=>(a(),u("div",{key:H.staff_id,class:"staff-item"},[t("a",{href:"https://www.kinopoisk.ru/name/".concat(H.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-link",title:H.description||""},[t("img",{src:H.poster_url,alt:H.name_ru,class:"staff-photo"},null,8,qa),t("span",Ka,g(H.name_ru||H.name_en),1),H.description?(a(),u("span",za,g(H.description),1)):h("",!0)],8,Oa)]))),128)),t("a",{class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(d.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(J("ACTOR").length," –∞–∫—Ç–µ—Ä–æ–≤")}," +"+g(J("ACTOR").length-12),9,Wa)])])):h("",!0),J("DIRECTOR").length?(a(),u("div",Ga,[v[27]||(v[27]=t("h3",{class:"additional-info-title"},"–†–µ–∂–∏—Å—Å—ë—Ä—ã",-1)),t("div",Ya,[t("div",Za,[(a(!0),u(re,null,Ce(J("DIRECTOR").slice(0,5),H=>(a(),u("a",{key:H.staff_id,href:"https://www.kinopoisk.ru/name/".concat(H.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},g(H.name_ru||H.name_en),9,Xa))),128)),J("DIRECTOR").length>5?(a(),u("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(d.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(J("DIRECTOR").length," —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–≤")}," +"+g(J("DIRECTOR").length-5),9,Qa)):h("",!0)])])])):h("",!0),J("PRODUCER").length?(a(),u("div",Ja,[v[28]||(v[28]=t("h3",{class:"additional-info-title"},"–ü—Ä–æ–¥—é—Å–µ—Ä—ã",-1)),t("div",er,[t("div",tr,[(a(!0),u(re,null,Ce(J("PRODUCER").slice(0,5),H=>(a(),u("a",{key:H.staff_id,href:"https://www.kinopoisk.ru/name/".concat(H.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},g(H.name_ru||H.name_en),9,or))),128)),J("PRODUCER").length>5?(a(),u("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(d.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(J("PRODUCER").length," –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤")}," +"+g(J("PRODUCER").length-5),9,nr)):h("",!0)])])])):h("",!0)])])):h("",!0),ee.value.length&&X(p)?(a(),u("div",lr,[se(Vl,{videos:ee.value,"active-video-index":E.value,onSelect:I.playTrailer},null,8,["videos","active-video-index","onSelect"])])):h("",!0),F.value.length?(a(),u("div",sr,[v[29]||(v[29]=t("h2",null,"–°–∏–∫–≤–µ–ª—ã –∏ –ø—Ä–∏–∫–≤–µ–ª—ã",-1)),se(X(Co),{"movies-list":P.value?F.value:F.value.slice(0,R.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),F.value.length>R.value?(a(),u("a",{key:0,class:"expand-circle-button",onClick:v[2]||(v[2]=H=>P.value=!P.value),title:"".concat(P.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(F.value.length,")")},g(P.value?"‚àí":"+".concat(F.value.length-R.value)),9,ir)):h("",!0)])):h("",!0),O.value.length?(a(),u("div",ar,[v[30]||(v[30]=t("h2",null,"–ü–æ—Ö–æ–∂–∏–µ",-1)),se(X(Co),{"movies-list":L.value?O.value:O.value.slice(0,R.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),O.value.length>R.value?(a(),u("a",{key:0,class:"expand-circle-button",onClick:v[3]||(v[3]=H=>L.value=!L.value),title:"".concat(L.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(O.value.length,")")},g(L.value?"‚àí":"+".concat(O.value.length-R.value)),9,rr)):h("",!0)])):h("",!0)])):h("",!0)])]),se(ut,{ref_key:"notificationRef",ref:ie},null,512)],64)}}},yr=Te(ur,[["__scopeId","data-v-a5e7d39b"]]);export{yr as default};
