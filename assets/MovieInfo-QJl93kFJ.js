import{_ as _e,r as f,c as N,b as u,d as a,e as t,s as X,t as v,K as ne,g as y,L as ge,n as U,q as Fe,u as et,i as ut,N as yo,z as ot,l as Ae,o as qe,O as dt,x as Re,E as ho,f as ee,P as tt,m as K,Q as Y,y as J,U as z,R as Mo,D as rt,S as ye,V as Eo,W as po,X as Lo,Y as ro,Z as Io,k as Ro,v as Xe,$ as Po,a0 as ke,w as uo,a1 as Je,a2 as So,a3 as To,a4 as Ao,a5 as jo,a6 as co,a7 as Uo,a8 as xo,a as Bo,a9 as mo,aa as Ho,ab as $o,ac as No}from"./index-CzWtTzFR.js";import{_ as Do,a as vo,b as fo,M as ko}from"./MovieList-DfCQRKmz.js";import{S as bo}from"./SpinnerLoading-BO2CJ8ac.js";import{N as nt}from"./ToastMessage-DIYMApht.js";import{u as Fo,S as Vo,a as Oo}from"./trailer-CCpZjvyl.js";import{u as Co,f as Ko,a as qo}from"./dateUtils-CFgwn7Ip.js";const ze="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVR4nO2ZQUoDMRSGR7eewHoFsVS0HkUUXNXqASqK2EURBPFIVRe6c+UN1CvUXWvbT4KvMAwzNnnJdCrmg1BKad7/v7y0b5IkiUQiCwGoAx3gQjEugZ0qxTeAIX6MKjMBnBOGS62AVWAPOHVYdlMu9YArYOhphLeBT+ALmOKGEd2QubaAK+B2zngFxt4GgDXgGZjgR8ch5oEkCi8DkvlnRcYLV0Apfqw10M7JvPkV6AN3FmVwK+WyZRnvMEe8ef/ibECyb2o+zRuwnpQAxeLNivQ0BvYyE46qEJ/8fK4ycJKp/X4V4n0MdDNfukkqEO9jwP1LDgD7BeKPgmgp04CL+KUz4Cp+qQxoxC+NAdsNm4c0hWkukkUa8BGfegiadbFDq3/2UAZ8xc+QVvzMtqcKYkBaZ5/MN5xEl2DgLGDZ1KswsC09FPJqXTZoNm5oA6kyMGI2FxqfkluJ0uMTDfhBXAHiHvCCWEL8/RLqlv1MPCf+TSZ+13WC7KnEfWlqcwAeU7GNjnbiQsG5UC1ZAEAt1UMhOpquk6zknMy9l20C2AA+MnEHRo9msuOCs9EH4Fp5TVQ0rqVs0plH4re02Qh1Oq1lCjypsp+5H3gKcD/gykTirqnFZ/ZDy+OGxpapzD+QePrM/2KkKfcGPcv7AdvRkz23G1x4JPIP+AY3r/ywUk/2JAAAAABJRU5ErkJggg==",zo="/reyohoho/assets/icon-shikimori-DGvXK9Jc.svg",at=l=>{const e=document.createElement("div");e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgba(0, 0, 0, 0.8)",e.style.color="white",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e.style.fontSize="2rem",e.style.zIndex="99000",e.textContent=l,document.body.appendChild(e),setTimeout(()=>{document.body.removeChild(e)},2e3)},Wo={key:0},Go={key:1},Yo={class:"players-list"},Zo=["onClick"],Qo={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Xo={key:0},Jo={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},en={key:1},tn={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},on=["onClick"],nn={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},sn={__name:"PlayerModal",props:{players:{type:Array,required:!0},selectedPlayer:{type:Object,default:null}},emits:["close","select"],setup(l,{emit:e}){const i=l,o=e,p=f(null),b=N(()=>i.players.filter(g=>!_(g)&&!n(g))),d=N(()=>i.players.some(g=>_(g))),k=N(()=>i.players.some(g=>n(g))),_=g=>g.key.toUpperCase().includes("HDREZKA"),n=g=>g.key.toUpperCase().includes("KODIK"),c=g=>g.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"").replace(/KODIK>/,"").trim(),r=g=>{o("select",g),o("close")},h=g=>i.selectedPlayer&&i.selectedPlayer.key===g.key,E=g=>i.selectedPlayer?g==="hdrezka"&&_(i.selectedPlayer)||g==="kodik"&&n(i.selectedPlayer):!1,P=g=>{p.value=g},S=()=>{p.value=null},L=g=>{let j=i.players.filter(T=>g==="hdrezka"&&_(T)||g==="kodik"&&n(T));return g==="kodik"?j.sort((T,V)=>c(T.translate).localeCompare(c(V.translate))):j},M=g=>L(g).some(j=>j.warning);return(g,j)=>(a(),u("div",{class:"modal",onClick:j[4]||(j[4]=Fe(T=>g.$emit("close"),["self"]))},[t("div",{class:"modal-content",onClick:j[3]||(j[3]=Fe(()=>{},["stop"]))},[t("button",{class:"close",onClick:j[0]||(j[0]=T=>g.$emit("close"))},"√ó"),p.value?(a(),u("h2",Go,[t("button",{class:"back-btn",onClick:S},"‚Üê –ù–∞–∑–∞–¥"),X(" "+v(p.value==="hdrezka"?"ReYohoho - HDrezka":"Kodik"),1)])):(a(),u("h2",Wo,"–í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–µ–µ—Ä")),t("ul",Yo,[p.value?(a(!0),u(ne,{key:1},ge(L(p.value),T=>(a(),u("li",{key:T.key},[t("button",{class:U(["player-item",{active:h(T)}]),onClick:V=>r(T)},[X(v(c(T.translate))+" ",1),T.warning?(a(),u("span",nn,"warning")):y("",!0)],10,on)]))),128)):(a(),u(ne,{key:0},[(a(!0),u(ne,null,ge(b.value,T=>(a(),u("li",{key:T.key},[t("button",{class:U(["player-item",{active:h(T)}]),onClick:V=>r(T)},[X(v(c(T.translate))+" ",1),T.warning?(a(),u("span",Qo,"warning")):y("",!0)],10,Zo)]))),128)),d.value?(a(),u("li",Xo,[t("button",{class:U(["group-item",{active:E("hdrezka")}]),onClick:j[1]||(j[1]=T=>P("hdrezka"))},[j[5]||(j[5]=t("span",{class:"material-icons group-icon"},"folder",-1)),j[6]||(j[6]=X(" ReYohoho - HDrezka ")),M("hdrezka")?(a(),u("span",Jo,"warning")):y("",!0)],2)])):y("",!0),k.value?(a(),u("li",en,[t("button",{class:U(["group-item",{active:E("kodik")}]),onClick:j[2]||(j[2]=T=>P("kodik"))},[j[7]||(j[7]=t("span",{class:"material-icons group-icon"},"folder",-1)),j[8]||(j[8]=X(" Kodik ")),M("kodik")?(a(),u("span",tn,"warning")):y("",!0)],2)])):y("",!0)],64))])])]))}},ln=_e(sn,[["__scopeId","data-v-460326ba"]]),an={class:"players-list"},rn=["src"],un={key:1,class:"controls"},dn={class:"main-controls"},cn={class:"material-icons"},mn={class:"list-button-item"},vn={class:"material-icons"},fn={class:"list-button-item"},kn={class:"material-icons"},gn={class:"list-button-item"},yn={class:"list-button-item"},hn={class:"material-icons"},pn={class:"list-button-item"},bn={class:"material-icons"},Cn={class:"tooltip-container","data-tooltip-container":"dimming"},wn={class:"material-icons"},_n={class:"tooltip-container","data-tooltip-container":"blur"},Mn={class:"tooltip-container","data-tooltip-container":"compressor"},En={class:"tooltip-container","data-tooltip-container":"mirror"},Ln={class:"tooltip-container","data-tooltip-container":"theater"},In={class:"material-symbols-outlined"},Rn={class:"custom-tooltip","data-tooltip":"theater"},Pn={class:"tooltip-container","data-tooltip-container":"aspect_ratio"},Sn={class:"current-ratio"},Tn=["onClick"],An={key:0,class:"tooltip-container","data-tooltip-container":"app_link"},jn={class:"custom-tooltip","data-tooltip":"app_link"},Un={key:1,class:"tooltip-container","data-tooltip-container":"copy_link"},xn={class:"custom-tooltip","data-tooltip":"copy_link"},Bn={key:0,class:"desktop-list-buttons"},Hn={class:"tooltip-container"},$n={class:"material-icons"},Nn={class:"custom-tooltip"},Dn={class:"tooltip-container"},Fn={class:"material-icons"},Vn={class:"custom-tooltip"},On={class:"tooltip-container"},Kn={class:"custom-tooltip"},qn={class:"tooltip-container"},zn={class:"material-icons"},Wn={class:"custom-tooltip"},Gn={class:"tooltip-container"},Yn={class:"material-icons"},Zn={class:"custom-tooltip"},Qn={key:1,class:"mobile-list-buttons"},Xn={class:"tooltip-container"},Jn={class:"material-icons"},es={class:"custom-tooltip"},ts={class:"tooltip-container"},os={class:"material-icons"},ns={class:"custom-tooltip"},ss={class:"tooltip-container"},ls={class:"custom-tooltip"},is={class:"tooltip-container"},as={class:"material-icons"},rs={class:"custom-tooltip"},us={class:"tooltip-container"},ds={class:"material-icons"},cs={class:"custom-tooltip"},ms={__name:"PlayerComponent",props:{kpId:String,movieInfo:{type:Object,default:()=>({})}},emits:["update:selectedPlayer","update:movieInfo"],setup(l,{emit:e}){const i=et(),o=Fo(),p=ut(),b=yo(),d=ot(),k=f(b.params.kp_id),_=l,n=e,c=f([]),r=f(null),h=f(!0),E=f(!1),P=f(!1),S=f(null),L=f(null),M=f(!1),g=f(""),j=f(null),T=f(window.innerHeight*.9),V=N(()=>"".concat(T.value,"px")),F=N(()=>i.isMobile),W=N(()=>!!window.electronAPI),R=f(null),re=f(!1);let me=null;const te=f(null),he=f(null),x=f(null),ve=w=>{const s=document.querySelector('[data-tooltip-container="'.concat(w,'"]')),D=document.querySelector('[data-tooltip="'.concat(w,'"]'));if(!s||!D)return;const fe=s.getBoundingClientRect(),Le=D.getBoundingClientRect(),Ie=window.innerHeight;fe.bottom+Le.height>Ie?(D.style.top="auto",D.style.bottom="100%",D.style.marginTop="0",D.style.marginBottom="12px",D.style.transform="translateX(-50%)"):(D.style.top="100%",D.style.bottom="auto",D.style.marginTop="12px",D.style.marginBottom="0",D.style.transform="translateX(-50%)")},B=w=>{R.value=w,re.value=!1,clearTimeout(me),ye(()=>{ve(w)})},G=()=>{re.value||(me=setTimeout(()=>{R.value=null},300))},Me=()=>{re.value=!0,clearTimeout(me)},we=()=>{re.value=!1,R.value=null},ue=N({get:()=>o.aspectRatio,set:w=>o.updateAspectRatio(w)}),de=N({get:()=>o.isCentered,set:w=>o.updateCentering(w)}),oe=N(()=>{var w,s,D,fe,Le,Ie,He,$e,Ne,De;return((s=(w=_.movieInfo)==null?void 0:w.lists)==null?void 0:s.isFavorite)||((fe=(D=_.movieInfo)==null?void 0:D.lists)==null?void 0:fe.isWatching)||((Ie=(Le=_.movieInfo)==null?void 0:Le.lists)==null?void 0:Ie.isLater)||(($e=(He=_.movieInfo)==null?void 0:He.lists)==null?void 0:$e.isCompleted)||((De=(Ne=_.movieInfo)==null?void 0:Ne.lists)==null?void 0:De.isAbandoned)}),A=N(()=>o.preferredPlayer),m=f(0),Z=w=>w.toUpperCase(),le=()=>{if(E.value||!L.value)return;const[w,s]=ue.value.split(":").map(Number);T.value=window.innerHeight*.9,m.value=Math.min(L.value.clientWidth*(s/w),T.value)},$=N(()=>{if(E.value)return{};const[w,s]=ue.value.split(":").map(Number),D=T.value*(w/s);return{width:"100%",maxWidth:"".concat(D,"px"),maxHeight:V.value,margin:"0 auto",overflow:"hidden"}}),pe=N(()=>{const[w,s]=ue.value.split(":").map(Number);return{position:"relative",width:"100%",paddingTop:"".concat(s/w*100,"%")}}),be=()=>{L.value&&setTimeout(()=>{ye(()=>{L.value.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})},500)},Pe=async()=>{try{g.value="",j.value=null;const w=await Mo(_.kpId);if(c.value=Object.entries(w).map(([s,D])=>({key:s.toUpperCase(),...D})),c.value.length>0){if(A.value){const s=Z(A.value),D=c.value.find(fe=>Z(fe.key)===s);r.value=D||c.value[0]}else r.value=c.value[0];n("update:selectedPlayer",r.value)}}catch(w){const{message:s,code:D}=rt(w);g.value=s,j.value=D,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–ª–µ–µ—Ä–æ–≤:",w)}},je=()=>{M.value=!0},ce=()=>{M.value=!1},ae=w=>{var s;if(((s=r.value)==null?void 0:s.key)===w.key){ce();return}r.value=w,h.value=!0,o.updatePreferredPlayer(Z(w.key)),n("update:selectedPlayer",w)},Ue=()=>{W.value?window.electronAPI.sendHotKey("F2"):(at("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},Se=()=>{W.value?window.electronAPI.sendHotKey("F3"):(at("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},Ce=()=>{W.value?window.electronAPI.sendHotKey("F4"):(at("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},xe=()=>{E.value=!E.value,E.value?(window.addEventListener("mousemove",Be),document.addEventListener("keydown",O),document.body.classList.add("no-scroll")):(window.removeEventListener("mousemove",Be),document.removeEventListener("keydown",O),document.body.classList.remove("no-scroll")),P.value=E.value,ye(()=>be())},Ve=f(null),Be=()=>{Ve.value=setTimeout(()=>{clearTimeout(Ve.value),P.value=!1},4e3),P.value=!0},Te=N(()=>i.dimmingEnabled),C=()=>{E.value||i.toggleDimming()},O=w=>{(w.key==="Escape"&&E.value||w.altKey&&w.keyCode===84)&&xe()},Ee=w=>{ue.value=w,setTimeout(()=>{de.value&&be()},310)},st=()=>{const w="reyohoho://#".concat(k.value);try{window.location.href=w}catch(s){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Å—ã–ª–∫–∏:",s)}},lt=()=>{const w=window.location.href;navigator.clipboard.writeText(w).then(()=>{}),te.value.showNotification("–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∏–ª—å–º —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞")},H=()=>{h.value=!1};function q(w){return w.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"HDRezka - ").replace(/KODIK>/,"Kodik - ").trim()}const Q=N(()=>{var w,s;return W.value?!1:!((s=(w=r.value)==null?void 0:w.key)!=null&&s.toUpperCase().includes("TORRENTS"))});Ae(r,w=>{if(w)if(h.value=!0,o.updatePreferredPlayer(Z(w.key)),n("update:selectedPlayer",w),w.key.toUpperCase().includes("TORRENTS")){const s=document.querySelector(".rocketme_fon");s&&(s.style.display="none");const D=document.querySelector(".pm_preloader");D&&(D.style.display="none")}else{const s=document.querySelector(".rocketme_fon");s&&(s.style.display="");const D=document.querySelector(".pm_preloader");D&&(D.style.display="")}}),Ae(()=>b.params.kp_id,async w=>{w&&w!==k.value&&(k.value=w,de.value&&be())},{immediate:!0});const ie=["16:9","12:5","4:3"],Oe=()=>{const s=(ie.indexOf(ue.value)+1)%ie.length;Ee(ie[s])},Ke=w=>{var D,fe,Le,Ie,He,$e,Ne,De,We,Ge,Ye,Ze,Qe;return(Qe={[z.FAVORITE]:((fe=(D=_.movieInfo)==null?void 0:D.lists)==null?void 0:fe.isFavorite)||!1,[z.HISTORY]:((Ie=(Le=_.movieInfo)==null?void 0:Le.lists)==null?void 0:Ie.isHistory)||!1,[z.LATER]:(($e=(He=_.movieInfo)==null?void 0:He.lists)==null?void 0:$e.isLater)||!1,[z.COMPLETED]:((De=(Ne=_.movieInfo)==null?void 0:Ne.lists)==null?void 0:De.isCompleted)||!1,[z.ABANDONED]:((Ge=(We=_.movieInfo)==null?void 0:We.lists)==null?void 0:Ge.isAbandoned)||!1,[z.WATCHING]:((Ze=(Ye=_.movieInfo)==null?void 0:Ye.lists)==null?void 0:Ze.isWatching)||!1}[w])!=null?Qe:!1},se=async w=>{if(!p.token){te.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:wo});return}try{const s={[z.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[z.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[z.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[z.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[z.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[z.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};Ke(w)?(await Eo(k.value,w),te.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(s[w]))):(await po(k.value,w),te.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(s[w])))}catch(s){const{message:D,code:fe}=rt(s);te.value.showNotification("".concat(D," ").concat(fe))}n("update:movieInfo")},wo=()=>{d.push("/login")},it=N(()=>o.showFavoriteTooltip),_o=()=>{d.push("/settings"),we()};return qe(()=>{h.value=!0,Pe(),F.value&&(ue.value="4:3"),le(),window.addEventListener("resize",le),window.addEventListener("resize",ve),de.value&&be()}),dt(()=>{window.removeEventListener("resize",le),window.removeEventListener("resize",ve),window.removeEventListener("mousemove",Be),document.removeEventListener("keydown",O),document.body.classList.remove("no-scroll")}),(w,s)=>{var D,fe,Le,Ie,He,$e,Ne,De,We,Ge,Ye,Ze,Qe,kt,gt,yt,ht,pt,bt,Ct,wt,_t,Mt,Et,Lt,It,Rt,Pt,St,Tt,At,jt,Ut,xt,Bt,Ht,$t,Nt,Dt,Ft,Vt,Ot,Kt,qt,zt,Wt,Gt,Yt,Zt,Qt,Xt,Jt,eo,to,oo,no,so,lo,io,ao;return g.value?(a(),Re(ho,{key:0,message:g.value,code:j.value},null,8,["message","code"])):(a(),u(ne,{key:1},[t("div",an,[s[54]||(s[54]=t("span",null,"–ü–ª–µ–µ—Ä:",-1)),t("button",{class:"player-btn",onClick:je},v(r.value?q(r.value.translate).toUpperCase():"–ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–µ–µ—Ä–æ–≤..."),1)]),M.value?(a(),Re(ln,{key:0,players:c.value,"selected-player":r.value,onClose:ce,onSelect:ae},null,8,["players","selected-player"])):y("",!0),t("div",{ref_key:"containerRef",ref:L,class:U(["player-container",{"theater-mode":E.value}]),style:tt(E.value?{}:$.value)},[t("div",{class:U(["iframe-wrapper",{pm_video:Q.value}]),style:tt(E.value?{}:pe.value)},[K(t("iframe",{ref_key:"playerIframe",ref:S,src:(D=r.value)==null?void 0:D.iframe,frameborder:"0",allowfullscreen:"",webkitallowfullscreen:"",class:U(["responsive-iframe",{"theater-mode-unlock":P.value,"theater-mode-lock":E.value,dimmed:Te.value}]),onLoad:H},null,42,rn),[[Y,!h.value&&((fe=r.value)==null?void 0:fe.iframe)]]),h.value?(a(),Re(bo,{key:0})):y("",!0)],6),E.value?(a(),u("button",{key:0,class:U(["close-theater-btn",{visible:P.value}]),onClick:xe}," ‚úñ ",2)):y("",!0)],6),E.value?y("",!0):(a(),u("div",un,[t("div",dn,[F.value?y("",!0):(a(),u("div",{key:0,ref_key:"tooltipContainer",ref:he,class:"tooltip-container list-buttons-container","data-tooltip-container":"favorite"},[it.value?(a(),u("button",{key:0,class:U(["favorite-btn",{active:(Ie=(Le=l.movieInfo)==null?void 0:Le.lists)==null?void 0:Ie.isFavorite}]),onMouseenter:s[0]||(s[0]=I=>B("favorite")),onMouseleave:G,onClick:s[1]||(s[1]=I=>se(J(z).FAVORITE))},[t("span",cn,v(($e=(He=l.movieInfo)==null?void 0:He.lists)!=null&&$e.isFavorite?"favorite":"favorite_border"),1),t("span",{class:U(["material-icons dropdown-arrow",{highlighted:oe.value}])},"expand_more",2)],34)):y("",!0),K(t("div",{ref_key:"tooltip",ref:x,class:"custom-tooltip advanced-tooltip list-buttons-dropdown","data-tooltip":"favorite",onMouseenter:Me,onMouseleave:we},[t("div",mn,[t("button",{class:U(["favorite-btn",{active:(De=(Ne=l.movieInfo)==null?void 0:Ne.lists)==null?void 0:De.isFavorite}]),onClick:s[2]||(s[2]=I=>se(J(z).FAVORITE))},[t("span",vn,v((Ge=(We=l.movieInfo)==null?void 0:We.lists)!=null&&Ge.isFavorite?"favorite":"favorite_border"),1),s[55]||(s[55]=t("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))],2)]),t("div",fn,[t("button",{class:U(["watching-btn",{active:(Ze=(Ye=l.movieInfo)==null?void 0:Ye.lists)==null?void 0:Ze.isWatching}]),onClick:s[3]||(s[3]=I=>se(J(z).WATCHING))},[t("span",kn,v((kt=(Qe=l.movieInfo)==null?void 0:Qe.lists)!=null&&kt.isWatching?"visibility_off":"visibility"),1),s[56]||(s[56]=t("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))],2)]),t("div",gn,[t("button",{class:U(["later-btn",{active:(yt=(gt=l.movieInfo)==null?void 0:gt.lists)==null?void 0:yt.isLater}]),onClick:s[4]||(s[4]=I=>se(J(z).LATER))},s[57]||(s[57]=[t("span",{class:"material-icons"},"watch_later",-1),t("span",{class:"button-label"},"–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ",-1)]),2)]),t("div",yn,[t("button",{class:U(["completed-btn",{active:(pt=(ht=l.movieInfo)==null?void 0:ht.lists)==null?void 0:pt.isCompleted}]),onClick:s[5]||(s[5]=I=>se(J(z).COMPLETED))},[t("span",hn,v((Ct=(bt=l.movieInfo)==null?void 0:bt.lists)!=null&&Ct.isCompleted?"check_circle":"check_circle_outline"),1),s[58]||(s[58]=t("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))],2)]),t("div",pn,[t("button",{class:U(["abandoned-btn",{active:(_t=(wt=l.movieInfo)==null?void 0:wt.lists)==null?void 0:_t.isAbandoned}]),onClick:s[6]||(s[6]=I=>se(J(z).ABANDONED))},[t("span",bn,v(((Et=(Mt=l.movieInfo)==null?void 0:Mt.lists)!=null&&Et.isAbandoned,"not_interested")),1),s[59]||(s[59]=t("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))],2)]),t("div",{class:"tooltip-hint"},[s[61]||(s[61]=t("span",{class:"material-icons"},"settings",-1)),t("span",null,[s[60]||(s[60]=X("–°—Ç–∏–ª—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ ")),t("a",{class:"settings-link",onClick:_o},"–Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö")])])],544),[[Y,R.value==="favorite"&&it.value]])],512)),F.value?y("",!0):(a(),u(ne,{key:1},[t("div",Cn,[t("button",{class:U(["dimming-btn",{active:Te.value}]),onMouseenter:s[7]||(s[7]=I=>B("dimming")),onMouseleave:s[8]||(s[8]=I=>R.value=null),onClick:C},[t("span",wn,v(Te.value?"light_mode":"dark_mode"),1)],34),K(t("div",{class:"custom-tooltip","data-tooltip":"dimming"},v(Te.value?"–û—Ç–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ":"–í–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ"),513),[[Y,R.value==="dimming"]])]),t("div",_n,[t("button",{class:U(["blur-btn",{"electron-only":!W.value}]),onMouseenter:s[9]||(s[9]=I=>B("blur")),onMouseleave:s[10]||(s[10]=I=>R.value=null),onClick:Ue},s[62]||(s[62]=[t("span",{class:"material-icons"},"blur_on",-1)]),34),K(t("div",{class:"custom-tooltip","data-tooltip":"blur"},v(W.value?"–ë–ª—é—Ä":"–ë–ª—é—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[Y,R.value==="blur"]])]),t("div",Mn,[t("button",{class:U(["material-symbols-outlined",{"electron-only":!W.value}]),onMouseenter:s[11]||(s[11]=I=>B("compressor")),onMouseleave:s[12]||(s[12]=I=>R.value=null),onClick:Se},s[63]||(s[63]=[t("span",{class:"material-icons"},"graphic_eq",-1)]),34),K(t("div",{class:"custom-tooltip","data-tooltip":"compressor"},v(W.value?"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä":"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[Y,R.value==="compressor"]])]),t("div",En,[t("button",{class:U(["mirror-btn",{"electron-only":!W.value}]),onMouseenter:s[13]||(s[13]=I=>B("mirror")),onMouseleave:s[14]||(s[14]=I=>R.value=null),onClick:Ce},s[64]||(s[64]=[t("span",{class:"material-icons"},"flip",-1)]),34),K(t("div",{class:"custom-tooltip","data-tooltip":"mirror"},v(W.value?"–ó–µ—Ä–∫–∞–ª–æ":"–ó–µ—Ä–∫–∞–ª–æ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[Y,R.value==="mirror"]])]),t("div",Ln,[t("button",{class:"theater-mode-btn",onMouseenter:s[15]||(s[15]=I=>B("theater")),onMouseleave:s[16]||(s[16]=I=>R.value=null),onClick:xe},[t("span",In,v(E.value?"fullscreen_exit":"aspect_ratio"),1)],32),K(t("div",Rn,[X(v(E.value?"–í—ã–π—Ç–∏ –∏–∑ —Ç–µ–∞—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞":"–¢–µ–∞—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º")+" ",1),s[65]||(s[65]=t("span",{class:"shortcut-hint"},"Alt+T",-1))],512),[[Y,R.value==="theater"]])]),t("div",Pn,[t("button",{class:"aspect-ratio-dropdown-btn",onMouseenter:s[17]||(s[17]=I=>B("aspect_ratio")),onMouseleave:G,onClick:Oe},[t("span",Sn,v(ue.value),1)],32),K(t("div",{class:"custom-tooltip advanced-tooltip aspect-ratio-dropdown","data-tooltip":"aspect_ratio",onMouseenter:Me,onMouseleave:we},[(a(),u(ne,null,ge(ie,I=>t("div",{key:I,class:U(["aspect-ratio-option",{active:ue.value===I}]),onClick:qa=>Ee(I)},v(I),11,Tn)),64))],544),[[Y,R.value==="aspect_ratio"]])]),t("div",{class:"tooltip-container","data-tooltip-container":"centering",onMouseenter:s[19]||(s[19]=I=>B("centering")),onMouseleave:G},[t("button",{class:"center-btn",onClick:be},s[66]||(s[66]=[t("span",{class:"material-icons"},"center_focus_strong",-1)])),K(t("div",{class:"custom-tooltip advanced-tooltip","data-tooltip":"centering",onMouseenter:Me,onMouseleave:we},[s[67]||(s[67]=X(" –û—Ç—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–ª–µ–µ—Ä ")),ee(Vo,{modelValue:de.value,"onUpdate:modelValue":s[18]||(s[18]=I=>de.value=I),title:"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞"},null,8,["modelValue"]),s[68]||(s[68]=t("span",{class:"tooltip-title"},"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞",-1))],544),[[Y,R.value==="centering"]])],32),W.value?y("",!0):(a(),u("div",An,[t("button",{class:"app-link-btn",onMouseenter:s[20]||(s[20]=I=>B("app_link")),onMouseleave:s[21]||(s[21]=I=>R.value=null),onClick:st},s[69]||(s[69]=[t("span",{class:"material-icons"},"open_in_new",-1)]),32),K(t("div",jn," –û—Ç–∫—Ä—ã—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ",512),[[Y,R.value==="app_link"]])])),W.value?(a(),u("div",Un,[t("button",{class:"copy-link-btn",onMouseenter:s[22]||(s[22]=I=>B("copy_link")),onMouseleave:s[23]||(s[23]=I=>R.value=null),onClick:lt},s[70]||(s[70]=[t("span",{class:"material-icons"},"content_copy",-1)]),32),K(t("div",xn," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É ",512),[[Y,R.value==="copy_link"]])])):y("",!0)],64))]),!F.value&&!it.value?(a(),u("div",Bn,[t("div",Hn,[t("button",{class:U(["favorite-btn",{active:(It=(Lt=l.movieInfo)==null?void 0:Lt.lists)==null?void 0:It.isFavorite}]),onMouseenter:s[24]||(s[24]=I=>B("favorite")),onMouseleave:s[25]||(s[25]=I=>R.value=null),onClick:s[26]||(s[26]=I=>se(J(z).FAVORITE))},[t("span",$n,v((Pt=(Rt=l.movieInfo)==null?void 0:Rt.lists)!=null&&Pt.isFavorite?"favorite":"favorite_border"),1)],34),K(t("div",Nn,v("–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"),512),[[Y,R.value==="favorite"]])]),t("div",Dn,[t("button",{class:U(["watching-btn",{active:(Tt=(St=l.movieInfo)==null?void 0:St.lists)==null?void 0:Tt.isWatching}]),onMouseenter:s[27]||(s[27]=I=>B("watching")),onMouseleave:s[28]||(s[28]=I=>R.value=null),onClick:s[29]||(s[29]=I=>se(J(z).WATCHING))},[t("span",Fn,v((jt=(At=l.movieInfo)==null?void 0:At.lists)!=null&&jt.isWatching?"visibility_off":"visibility"),1)],34),K(t("div",Vn,v("–°–º–æ—Ç—Ä—é"),512),[[Y,R.value==="watching"]])]),t("div",On,[t("button",{class:U(["later-btn",{active:(xt=(Ut=l.movieInfo)==null?void 0:Ut.lists)==null?void 0:xt.isLater}]),onMouseenter:s[30]||(s[30]=I=>B("later")),onMouseleave:s[31]||(s[31]=I=>R.value=null),onClick:s[32]||(s[32]=I=>se(J(z).LATER))},s[71]||(s[71]=[t("span",{class:"material-icons"},"watch_later",-1)]),34),K(t("div",Kn,v("–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"),512),[[Y,R.value==="later"]])]),t("div",qn,[t("button",{class:U(["completed-btn",{active:(Ht=(Bt=l.movieInfo)==null?void 0:Bt.lists)==null?void 0:Ht.isCompleted}]),onMouseenter:s[33]||(s[33]=I=>B("completed")),onMouseleave:s[34]||(s[34]=I=>R.value=null),onClick:s[35]||(s[35]=I=>se(J(z).COMPLETED))},[t("span",zn,v((Nt=($t=l.movieInfo)==null?void 0:$t.lists)!=null&&Nt.isCompleted?"check_circle":"check_circle_outline"),1)],34),K(t("div",Wn,v("–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"),512),[[Y,R.value==="completed"]])]),t("div",Gn,[t("button",{class:U(["abandoned-btn",{active:(Ft=(Dt=l.movieInfo)==null?void 0:Dt.lists)==null?void 0:Ft.isAbandoned}]),onMouseenter:s[36]||(s[36]=I=>B("abandoned")),onMouseleave:s[37]||(s[37]=I=>R.value=null),onClick:s[38]||(s[38]=I=>se(J(z).ABANDONED))},[t("span",Yn,v(((Ot=(Vt=l.movieInfo)==null?void 0:Vt.lists)!=null&&Ot.isAbandoned,"not_interested")),1)],34),K(t("div",Zn,v("–ë—Ä–æ—à–µ–Ω–æ"),512),[[Y,R.value==="abandoned"]])])])):F.value?(a(),u("div",Qn,[t("div",Xn,[t("button",{class:U(["favorite-btn",{active:(qt=(Kt=l.movieInfo)==null?void 0:Kt.lists)==null?void 0:qt.isFavorite}]),onMouseenter:s[39]||(s[39]=I=>B("favorite")),onMouseleave:s[40]||(s[40]=I=>R.value=null),onClick:s[41]||(s[41]=I=>se(J(z).FAVORITE))},[t("span",Jn,v((Wt=(zt=l.movieInfo)==null?void 0:zt.lists)!=null&&Wt.isFavorite?"favorite":"favorite_border"),1)],34),K(t("div",es,v("–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"),512),[[Y,R.value==="favorite"]])]),t("div",ts,[t("button",{class:U(["watching-btn",{active:(Yt=(Gt=l.movieInfo)==null?void 0:Gt.lists)==null?void 0:Yt.isWatching}]),onMouseenter:s[42]||(s[42]=I=>B("watching")),onMouseleave:s[43]||(s[43]=I=>R.value=null),onClick:s[44]||(s[44]=I=>se(J(z).WATCHING))},[t("span",os,v((Qt=(Zt=l.movieInfo)==null?void 0:Zt.lists)!=null&&Qt.isWatching?"visibility_off":"visibility"),1)],34),K(t("div",ns,v("–°–º–æ—Ç—Ä—é"),512),[[Y,R.value==="watching"]])]),t("div",ss,[t("button",{class:U(["later-btn",{active:(Jt=(Xt=l.movieInfo)==null?void 0:Xt.lists)==null?void 0:Jt.isLater}]),onMouseenter:s[45]||(s[45]=I=>B("later")),onMouseleave:s[46]||(s[46]=I=>R.value=null),onClick:s[47]||(s[47]=I=>se(J(z).LATER))},s[72]||(s[72]=[t("span",{class:"material-icons"},"watch_later",-1)]),34),K(t("div",ls,v("–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"),512),[[Y,R.value==="later"]])]),t("div",is,[t("button",{class:U(["completed-btn",{active:(to=(eo=l.movieInfo)==null?void 0:eo.lists)==null?void 0:to.isCompleted}]),onMouseenter:s[48]||(s[48]=I=>B("completed")),onMouseleave:s[49]||(s[49]=I=>R.value=null),onClick:s[50]||(s[50]=I=>se(J(z).COMPLETED))},[t("span",as,v((no=(oo=l.movieInfo)==null?void 0:oo.lists)!=null&&no.isCompleted?"check_circle":"check_circle_outline"),1)],34),K(t("div",rs,v("–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"),512),[[Y,R.value==="completed"]])]),t("div",us,[t("button",{class:U(["abandoned-btn",{active:(lo=(so=l.movieInfo)==null?void 0:so.lists)==null?void 0:lo.isAbandoned}]),onMouseenter:s[51]||(s[51]=I=>B("abandoned")),onMouseleave:s[52]||(s[52]=I=>R.value=null),onClick:s[53]||(s[53]=I=>se(J(z).ABANDONED))},[t("span",ds,v(((ao=(io=l.movieInfo)==null?void 0:io.lists)!=null&&ao.isAbandoned,"not_interested")),1)],34),K(t("div",cs,v("–ë—Ä–æ—à–µ–Ω–æ"),512),[[Y,R.value==="abandoned"]])])])):y("",!0)])),ee(nt,{ref_key:"notificationRef",ref:te},null,512)],64))}}},go=_e(ms,[["__scopeId","data-v-2037cb5b"]]),vs={key:0,class:"carousel-container"},fs={class:"carousel-wrapper"},ks=["onClick"],gs=["src","alt"],ys={class:"video-name"},hs={key:0,class:"video-player"},ps=["src"],bs={__name:"TrailerCarousel",props:{videos:{type:Array,required:!0},activeVideoIndex:{type:Number,default:null}},emits:["select"],setup(l,{emit:e}){const i=et(),o=N(()=>i.isMobile),p=l,b=e,d=f(p.activeVideoIndex),k=f(null),_=f(!1),n=f(!1),c=()=>{if(!k.value)return;const{scrollLeft:L,scrollWidth:M,clientWidth:g}=k.value;_.value=L>0,n.value=L<M-g-1},r=L=>{if(!k.value)return;const M=k.value.querySelector(".carousel-item");if(!M)return;const g=M.clientWidth+16;k.value.scrollBy({left:g*L,behavior:"smooth"})},h=L=>{d.value=L,b("select",p.videos[L])},E=()=>c(),P=f([]),S=async L=>{try{return(await fetch("https://img.youtube.com/vi/".concat(L,"/0.jpg"))).ok}catch(M){return!1}};return qe(async()=>{const L=p.videos.map(async g=>await S(g.videoId)?g:null),M=await Promise.all(L);P.value=M.filter(Boolean),c(),window.addEventListener("resize",E)}),Ae(()=>p.videos,async L=>{const M=L.map(async j=>await S(j.videoId)?j:null),g=await Promise.all(M);P.value=g.filter(Boolean)}),Ae(()=>p.activeVideoIndex,L=>{d.value=L}),dt(()=>{window.removeEventListener("resize",E)}),(L,M)=>P.value.length?(a(),u("div",vs,[M[4]||(M[4]=t("h2",null,"–¢—Ä–µ–π–ª–µ—Ä—ã (YouTube)",-1)),t("div",fs,[K(t("button",{class:"scroll-button left",onClick:M[0]||(M[0]=g=>r(-1))},M[2]||(M[2]=[t("span",{class:"material-symbols-outlined"},"arrow_back_ios",-1)]),512),[[Y,!o.value&&_.value]]),t("div",{ref_key:"carousel",ref:k,class:"carousel",onScroll:c},[(a(!0),u(ne,null,ge(P.value,(g,j)=>(a(),u("div",{key:j,class:"carousel-item",onClick:T=>h(j)},[t("img",{src:"https://img.youtube.com/vi/".concat(g.videoId,"/0.jpg"),alt:g.name},null,8,gs),t("div",ys,v(g.name),1)],8,ks))),128))],544),K(t("button",{class:"scroll-button right",onClick:M[1]||(M[1]=g=>r(1))},M[3]||(M[3]=[t("span",{class:"material-symbols-outlined"},"arrow_forward_ios",-1)]),512),[[Y,!o.value&&n.value]])]),d.value!==null?(a(),u("div",hs,[t("iframe",{src:l.videos[d.value].iframeUrl,frameborder:"0",allowfullscreen:""},null,8,ps)])):y("",!0)])):y("",!0)}},Cs=_e(bs,[["__scopeId","data-v-e60b5c29"]]),ws={class:"rating-container"},_s={class:"rating-display"},Ms={class:"average-rating"},Es={class:"rating-numbers"},Ls=["onClick","onMouseenter"],Is={key:0,class:"tooltip-footer"},Rs={class:"rating-numbers mobile-rating-numbers"},Ps=["onClick"],Ss={key:0,class:"mobile-modal-footer"},Ts={__name:"MovieRating",props:{kpId:{type:String,required:!0},showDash:{type:Boolean,default:!1}},setup(l){const e=et(),i=ot(),o=l,p=f(null),b=f(null),d=f(null),k=f(null),_=f(0),n=f(!1),c=f(!1);let r=null;const h=T=>T?T.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",E=()=>{r=setTimeout(()=>{n.value=!1,e.isMobile||(c.value=!1)},100)},P=()=>{r&&(clearTimeout(r),r=null),n.value=!0},S=()=>{e.isMobile&&(c.value=!c.value)},L=()=>{i.push("/login")},M=async()=>{try{const T=await Lo(o.kpId);b.value=T.user_rating,d.value=T.average_rating,k.value=h(T.vote_count)}catch(T){console.error("Error loading rating:",T)}},g=async T=>{var V;try{T===b.value?(await ro(o.kpId,null),b.value=null,p.value.showNotification("–û—Ü–µ–Ω–∫–∞ —É–¥–∞–ª–µ–Ω–∞")):(await ro(o.kpId,T),b.value=T,p.value.showNotification("–û—Ü–µ–Ω–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞")),e.isMobile&&(c.value=!1),M()}catch(F){console.error("Error setting rating:",F),((V=F.response)==null?void 0:V.status)===401?p.value.showNotification('–î–ª—è –æ—Ü–µ–Ω–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:L}):p.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ü–µ–Ω–∫–∏"),e.isMobile&&(c.value=!1)}},j=()=>{c.value=!1};return qe(()=>{M()}),(T,V)=>(a(),u("div",ws,[t("div",_s,[t("a",{href:"#",class:U(["rating-link",{"has-rating":b.value}]),onMouseenter:V[0]||(V[0]=F=>n.value=!0),onMouseleave:E,onClick:Fe(S,["prevent"])},[V[3]||(V[3]=t("img",{src:Do,alt:"ReYohoho",class:"rating-logo"},null,-1)),t("span",Ms,v(d.value?d.value.toFixed(1).replace(/\.0$/,""):"‚Äî"),1)],34),K(t("div",{class:"rating-tooltip",onMouseenter:P,onMouseleave:E},[t("div",Es,[(a(),u(ne,null,ge(10,F=>t("button",{key:F,class:U(["number-btn",{active:F===b.value,hover:F===_.value,"average-highlight":d.value&&F<=Math.round(d.value)}]),onClick:W=>g(F),onMouseenter:W=>_.value=F,onMouseleave:V[1]||(V[1]=W=>_.value=0)},v(F),43,Ls)),64))]),k.value?(a(),u("div",Is,"–û—Ü–µ–Ω–æ–∫: "+v(k.value),1)):y("",!0)],544),[[Y,(n.value||c.value)&&!J(e).isMobile]])]),ee(nt,{ref_key:"notificationRef",ref:p},null,512),J(e).isMobile&&c.value?(a(),u("div",{key:0,class:"mobile-modal-overlay",onClick:j},[t("div",{class:"mobile-modal",onClick:V[2]||(V[2]=Fe(()=>{},["stop"]))},[t("div",{class:"mobile-modal-header"},[V[4]||(V[4]=t("h3",null,"–û—Ü–µ–Ω–∏—Ç—å —Ñ–∏–ª—å–º",-1)),t("button",{class:"close-button",onClick:j},"√ó")]),t("div",Rs,[(a(),u(ne,null,ge(10,F=>t("button",{key:F,class:U(["number-btn",{active:F===b.value,"average-highlight":d.value&&F<=Math.round(d.value)}]),onClick:W=>g(F)},v(F),11,Ps)),64))]),k.value?(a(),u("div",Ss,"–û—Ü–µ–Ω–æ–∫: "+v(k.value),1)):y("",!0)])])):y("",!0)]))}},As=_e(Ts,[["__scopeId","data-v-906480ed"]]),js={name:"EmojiPicker",props:{isVisible:{type:Boolean,default:!1}},emits:["emoji-selected","mouse-enter","mouse-leave","close"],data(){return{activeCategory:"smileys",categories:[{name:"smileys",icon:"üòÄ",emojis:["üòÄ","üòÉ","üòÑ","üòÅ","üòÜ","üòÖ","üòÇ","ü§£","üòä","üòá","üôÇ","üôÉ","üòâ","üòå","üòç","ü•∞","üòò","üòó","üòô","üòö","üòã","üòõ","üòù","üòú","ü§™","ü§®","üßê","ü§ì","üòé","ü§©","ü•≥"]},{name:"emotions",icon:"üò¢",emojis:["üò•","üò¢","üò≠","üò§","üò†","üò°","ü§¨","ü§Ø","üò≥","ü•µ","ü•∂","üò±","üò®","üò∞","üò•","üòì","ü§ó","ü§î","ü§≠","ü§´","ü§•","üò∂","üòê","üòë","üò¨","üôÑ","üòØ","üò¶","üòß","üòÆ","üò≤"]},{name:"gestures",icon:"üëç",emojis:["üëç","üëé","üëå","ü§å","ü§è","‚úåÔ∏è","ü§û","ü§ü","ü§ò","ü§ô","üëà","üëâ","üëÜ","üñï","üëá","‚òùÔ∏è","üëè","üôå","üëê","ü§≤","ü§ù","üôè","‚úçÔ∏è","üí™","ü¶æ","ü¶ø","ü¶µ","ü¶∂","üëÇ","ü¶ª","üëÉ"]},{name:"hearts",icon:"‚ù§Ô∏è",emojis:["‚ù§Ô∏è","üß°","üíõ","üíö","üíô","üíú","ü§é","üñ§","ü§ç","üíî","‚ù£Ô∏è","üíï","üíû","üíì","üíó","üíñ","üíò","üíù","üíü","‚ô•Ô∏è","üíØ","üí¢","üí•","üí´","üí¶","üí®","üï≥Ô∏è","üí£","üí¨","üëÅÔ∏è‚Äçüó®Ô∏è","üó®Ô∏è"]},{name:"objects",icon:"üéâ",emojis:["üéâ","üéä","üéà","üéÅ","üéÄ","üéÇ","üç∞","üßÅ","üç≠","üç¨","üç´","üç©","üç™","üçï","üçî","üçü","üå≠","ü•™","üåÆ","üåØ","ü•ô","ü•ö","üç≥","ü•ò","üç≤","ü•ó","üçø","üßà","üßÄ","ü•®","ü•Ø"]}]}},computed:{currentEmojis(){const l=this.categories.find(e=>e.name===this.activeCategory);return l?l.emojis:[]}},methods:{selectEmoji(l){this.$emit("emoji-selected",l)}}},Us={class:"emoji-categories"},xs=["onClick"],Bs={class:"emoji-grid"},Hs=["onClick"];function $s(l,e,i,o,p,b){return i.isVisible?(a(),u("div",{key:0,class:"emoji-picker",onMouseenter:e[1]||(e[1]=d=>l.$emit("mouse-enter")),onMouseleave:e[2]||(e[2]=d=>l.$emit("mouse-leave"))},[t("button",{class:"close-btn mobile-only",onClick:e[0]||(e[0]=d=>l.$emit("close"))},e[3]||(e[3]=[t("i",{class:"fas fa-times"},null,-1)])),t("div",Us,[(a(!0),u(ne,null,ge(p.categories,d=>(a(),u("button",{key:d.name,onClick:k=>p.activeCategory=d.name,class:U([{active:p.activeCategory===d.name},"category-btn"]),type:"button"},v(d.icon),11,xs))),128))]),t("div",Bs,[(a(!0),u(ne,null,ge(b.currentEmojis,d=>(a(),u("button",{key:d,onClick:k=>b.selectEmoji(d),class:"emoji-btn",type:"button"},v(d),9,Hs))),128))])],32)):y("",!0)}const ct=_e(js,[["render",$s],["__scopeId","data-v-5f18a3b7"]]),Ns=async l=>{const e=await Io();return await l(e)},Ds=async l=>{const{data:e}=await Ns(i=>i.get("/search_emotes/".concat(l)));return e.emotes||[]},Fs={name:"ImagePicker",props:{isVisible:{type:Boolean,required:!0},currentUser:{type:Object,default:null}},emits:["image-selected","mouse-enter","mouse-leave","close","login-required"],setup(l,{emit:e}){const i=f(""),o=f([]),p=f(null),b=f(!1),k=Ro(async r=>{if(!l.currentUser){console.warn("–ü–æ–ø—ã—Ç–∫–∞ –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏");return}if(!r.trim()){o.value=[],b.value=!1;return}b.value=!0;try{o.value=await Ds(r)}catch(h){console.error("Error searching images:",h),o.value=[]}finally{b.value=!1}},300),_=()=>{if(!l.currentUser){e("login-required");return}i.value.trim()&&(b.value=!0),k(i.value)},n=r=>{if(!l.currentUser){e("login-required");return}e("image-selected",r),e("close")},c=()=>{setTimeout(()=>{l.isVisible&&e("mouse-leave")},100)};return Ae(()=>l.isVisible,r=>{r&&(i.value="",o.value=[],b.value=!1)}),{searchQuery:i,images:o,searchInput:p,isLoading:b,handleSearch:_,selectImage:n,handleInputBlur:c}}},Vs={key:0,class:"auth-required"},Os={class:"auth-message"},Ks={key:1},qs={class:"image-picker-header"},zs={class:"image-content"},Ws={key:0,class:"loading-spinner"},Gs={key:1,class:"image-grid"},Ys=["onClick"],Zs=["src","alt"],Qs={key:2,class:"no-images"},Xs={key:3,class:"no-search"};function Js(l,e,i,o,p,b){return i.isVisible?(a(),u("div",{key:0,class:"image-picker",onMouseenter:e[7]||(e[7]=d=>l.$emit("mouse-enter")),onMouseleave:e[8]||(e[8]=d=>l.$emit("mouse-leave")),onClick:e[9]||(e[9]=Fe(()=>{},["stop"]))},[t("button",{class:"close-btn mobile-only",onClick:e[0]||(e[0]=d=>l.$emit("close"))},e[10]||(e[10]=[t("i",{class:"fas fa-times"},null,-1)])),i.currentUser?(a(),u("div",Ks,[t("div",qs,[K(t("input",{ref:"searchInput",type:"text","onUpdate:modelValue":e[2]||(e[2]=d=>o.searchQuery=d),placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–º–∞–π–ª–∞ 7tv",class:"image-search-input",onInput:e[3]||(e[3]=(...d)=>o.handleSearch&&o.handleSearch(...d)),onClick:e[4]||(e[4]=Fe(()=>{},["stop"])),onFocus:e[5]||(e[5]=d=>l.$emit("mouse-enter")),onBlur:e[6]||(e[6]=(...d)=>o.handleInputBlur&&o.handleInputBlur(...d))},null,544),[[Xe,o.searchQuery]])]),t("div",zs,[o.isLoading?(a(),u("div",Ws,e[14]||(e[14]=[t("div",{class:"spinner"},null,-1),t("p",null,"–ü–æ–∏—Å–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...",-1)]))):o.images.length>0?(a(),u("div",Gs,[(a(!0),u(ne,null,ge(o.images,(d,k)=>(a(),u("div",{key:k,class:"image-item",onClick:_=>o.selectImage(d)},[t("img",{src:d,alt:"Image "+(k+1)},null,8,Zs)],8,Ys))),128))])):o.searchQuery.trim()?(a(),u("div",Qs,e[15]||(e[15]=[t("p",null,"–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤",-1)]))):(a(),u("div",Xs,e[16]||(e[16]=[t("p",null,"–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞",-1)])))])])):(a(),u("div",Vs,[t("div",Os,[e[11]||(e[11]=t("i",{class:"fas fa-lock"},null,-1)),e[12]||(e[12]=t("h3",null,"–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è",-1)),e[13]||(e[13]=t("p",null,"–î–ª—è –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç",-1)),t("button",{class:"login-button",onClick:e[1]||(e[1]=d=>l.$emit("login-required"))},"–í–æ–π—Ç–∏")])]))],32)):y("",!0)}const mt=_e(Fs,[["render",Js],["__scopeId","data-v-be44d2b6"]]),el={name:"LinkModal",props:{isVisible:{type:Boolean,default:!1},selectedText:{type:String,default:""}},emits:["close","submit"],setup(l,{emit:e}){const i=f(""),o=f(""),p=f(null),b=f(null),d=N(()=>/^https?:\/\/.+/.test(i.value.trim())&&o.value.trim()),k=()=>{e("close"),n()},_=()=>{d.value&&(e("submit",{url:i.value.trim(),title:o.value.trim()}),k())},n=()=>{i.value="",o.value=""},c=r=>{var h;r.key==="Enter"?(r.preventDefault(),d.value?_():r.target===p.value&&i.value.trim()&&((h=b.value)==null||h.focus())):r.key==="Escape"&&k()};return Ae(()=>l.isVisible,r=>{r&&(l.selectedText.trim()&&(o.value=l.selectedText.trim()),ye(()=>{var h;(h=p.value)==null||h.focus()}))}),{linkUrl:i,linkTitle:o,urlInput:p,titleInput:b,isValidLink:d,closeModal:k,submitLink:_,handleKeydown:c}}},tl={class:"link-modal-header"},ol={class:"link-modal-content"},nl={class:"form-group"},sl={class:"form-group"},ll={class:"link-modal-footer"},il=["disabled"];function al(l,e,i,o,p,b){return i.isVisible?(a(),u("div",{key:0,class:"link-modal-overlay",onClick:e[8]||(e[8]=(...d)=>o.closeModal&&o.closeModal(...d))},[t("div",{class:"link-modal",onClick:e[7]||(e[7]=Fe(()=>{},["stop"]))},[t("div",tl,[e[10]||(e[10]=t("h3",null,"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É",-1)),t("button",{class:"close-button",onClick:e[0]||(e[0]=(...d)=>o.closeModal&&o.closeModal(...d))},e[9]||(e[9]=[t("i",{class:"fas fa-times"},null,-1)]))]),t("div",ol,[t("div",nl,[e[11]||(e[11]=t("label",{for:"link-url"},"URL —Å—Å—ã–ª–∫–∏:",-1)),K(t("input",{id:"link-url",ref:"urlInput","onUpdate:modelValue":e[1]||(e[1]=d=>o.linkUrl=d),type:"url",placeholder:"https://example.com",class:"link-input",onKeydown:e[2]||(e[2]=(...d)=>o.handleKeydown&&o.handleKeydown(...d))},null,544),[[Xe,o.linkUrl]])]),t("div",sl,[e[12]||(e[12]=t("label",{for:"link-title"},"–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏:",-1)),K(t("input",{id:"link-title",ref:"titleInput","onUpdate:modelValue":e[3]||(e[3]=d=>o.linkTitle=d),type:"text",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è",class:"link-input",onKeydown:e[4]||(e[4]=(...d)=>o.handleKeydown&&o.handleKeydown(...d))},null,544),[[Xe,o.linkTitle]])])]),t("div",ll,[t("button",{class:"cancel-button",onClick:e[5]||(e[5]=(...d)=>o.closeModal&&o.closeModal(...d))},"–û—Ç–º–µ–Ω–∞"),t("button",{class:"submit-button",disabled:!o.isValidLink,onClick:e[6]||(e[6]=(...d)=>o.submitLink&&o.submitLink(...d))},"–î–æ–±–∞–≤–∏—Ç—å",8,il)])])])):y("",!0)}const vt=_e(el,[["render",al],["__scopeId","data-v-4b811824"]]);function rl(){const l=f(!1),e=f(!1),i=f(!1),o=()=>{e.value=!0},p=()=>{e.value=!1,setTimeout(()=>{!e.value&&!i.value&&(l.value=!1)},300)},b=()=>{i.value=!0,l.value=!0},d=()=>{i.value=!1,setTimeout(()=>{!e.value&&!i.value&&(l.value=!1)},300)},k=()=>{l.value=!1};return{showEmojiPicker:l,isEmojiHovered:e,isButtonHovered:i,handleEmojiMouseEnter:o,handleEmojiMouseLeave:p,handleButtonMouseEnter:b,handleButtonMouseLeave:d,closeEmojiPicker:k,insertEmoji:(c,r,h,E)=>{const P=r.value;if(P){const S=P.selectionStart,L=P.selectionEnd,M=h.value.substring(0,S),g=h.value.substring(L),j=M+c+g;E(j),ye(()=>{P.focus(),P.setSelectionRange(S+c.length,S+c.length),P.style.height&&(P.style.height="auto",P.style.height="".concat(Math.min(P.scrollHeight,200),"px"))})}else E(h.value+c)},handleGlobalClick:c=>{!c.target.closest(".emoji-picker")&&!c.target.closest(".emoji-button-inline")&&k()}}}function ul(){const l=f(!1),e=f(!1),i=f(!1),o=()=>{e.value=!0},p=()=>{e.value=!1,setTimeout(()=>{!e.value&&!i.value&&(l.value=!1)},300)},b=()=>{i.value=!0,l.value=!0},d=()=>{i.value=!1,setTimeout(()=>{!e.value&&!i.value&&(l.value=!1)},300)},k=()=>{l.value=!1};return{showImagePicker:l,isImageHovered:e,isButtonHovered:i,handleImageMouseEnter:o,handleImageMouseLeave:p,handleImageButtonMouseEnter:b,handleButtonMouseLeave:d,closeImagePicker:k,insertImage:(c,r,h,E)=>{const P=r.value;if(P){const S=P.selectionStart,L=P.selectionEnd,M="[img]".concat(c,"[/img]"),g=h.value.slice(0,S)+M+h.value.slice(L);E(g),ye(()=>{P.focus(),P.setSelectionRange(S+M.length,S+M.length),P.style.height&&(P.style.height="auto",P.style.height="".concat(Math.min(P.scrollHeight,200),"px"))})}else{const S="[img]".concat(c,"[/img]");E(h.value+S)}},handleGlobalClick:c=>{!c.target.closest(".image-picker")&&!c.target.closest(".emoji-button-inline")&&k()}}}function dl(){const l=f(!1),e=f("");return{showLinkModal:l,selectedTextForLink:e,insertLink:(d,k)=>{const _=d.value;if(_){const n=_.selectionStart,c=_.selectionEnd,r=k.value.slice(n,c);e.value=r.trim()||""}l.value=!0},insertLinkFromModal:(d,k,_,n)=>{const c=k.value;if(c){const r=c.selectionStart,h=c.selectionEnd,E="[link=".concat(d.url,"]").concat(d.title,"[/link]"),P=_.value.slice(0,r)+E+_.value.slice(h);n(P),ye(()=>{c.focus(),c.setSelectionRange(r+E.length,r+E.length),c.style.height&&(c.style.height="auto",c.style.height="".concat(Math.min(c.scrollHeight,200),"px"))})}},closeLinkModal:()=>{l.value=!1},insertSpoiler:(d,k,_)=>{const n=d.value;if(n){const c=n.selectionStart,r=n.selectionEnd,h=k.value.slice(c,r);let E;h.trim()?E="[spoiler]".concat(h,"[/spoiler]"):E="[spoiler][/spoiler]";const P=k.value.slice(0,c)+E+k.value.slice(r);_(P),ye(()=>{if(n.focus(),h.trim())n.setSelectionRange(c+E.length,c+E.length);else{const S=c+9;n.setSelectionRange(S,S)}n.style.height&&(n.style.height="auto",n.style.height="".concat(Math.min(n.scrollHeight,200),"px"))})}}}}function cl(){return{autoResize:i=>{const o=i==null?void 0:i.target;o&&(o.style.height="auto",o.style.height="".concat(Math.min(o.scrollHeight,200),"px"))},autoResizeElement:i=>{i&&(i.style.height="auto",i.style.height="".concat(Math.min(i.scrollHeight,200),"px"))}}}function ft(){const l=rl(),e=ul(),i=dl(),{autoResize:o,autoResizeElement:p}=cl(),b=()=>{l.isButtonHovered.value=!0,e.isButtonHovered.value=!0,l.showEmojiPicker.value=!0,e.showImagePicker.value=!1},d=()=>{l.isButtonHovered.value=!0,e.isButtonHovered.value=!0,e.showImagePicker.value=!0,l.showEmojiPicker.value=!1},k=()=>{l.isButtonHovered.value=!1,e.isButtonHovered.value=!1,setTimeout(()=>{!l.isEmojiHovered.value&&!e.isImageHovered.value&&!l.isButtonHovered.value&&!e.isButtonHovered.value&&(l.showEmojiPicker.value=!1,e.showImagePicker.value=!1)},300)},_=()=>{l.showEmojiPicker.value=!1,e.showImagePicker.value=!1},n=S=>{!S.target.closest(".emoji-picker")&&!S.target.closest(".image-picker")&&!S.target.closest(".emoji-button-inline")&&_()},c=(S,L,M,g)=>{l.insertEmoji(S,L,M,g)},r=(S,L,M,g)=>{e.insertImage(S,L,M,g)},h=(S,L,M)=>{i.insertLink(S,L,M)},E=(S,L,M,g)=>{i.insertLinkFromModal(S,L,M,g)},P=(S,L,M)=>{i.insertSpoiler(S,L,M)};return qe(()=>{document.addEventListener("click",n)}),dt(()=>{document.removeEventListener("click",n)}),{showEmojiPicker:l.showEmojiPicker,handleEmojiMouseEnter:l.handleEmojiMouseEnter,handleEmojiMouseLeave:l.handleEmojiMouseLeave,closeEmojiPicker:l.closeEmojiPicker,showImagePicker:e.showImagePicker,handleImageMouseEnter:e.handleImageMouseEnter,handleImageMouseLeave:e.handleImageMouseLeave,closeImagePicker:e.closeImagePicker,showLinkModal:i.showLinkModal,selectedTextForLink:i.selectedTextForLink,closeLinkModal:i.closeLinkModal,handleButtonMouseEnter:b,handleImageButtonMouseEnter:d,handleButtonMouseLeave:k,closeAllPickers:_,insertEmojiUniversal:c,insertImageUniversal:r,insertLinkUniversal:h,insertLinkFromModalUniversal:E,insertSpoilerUniversal:P,autoResize:o,autoResizeElement:p}}const ml=l=>l===1?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π":l>=2&&l<=4?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è":"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤",vl=l=>{if(!l)return"?";const e=l.split(" ");return e.length===1?l.slice(0,2).toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()},fl={name:"CommentItem",components:{EmojiPicker:ct,ImagePicker:mt,LinkModal:vt},props:{comment:{type:Object,required:!0,default:()=>({username:"–ê–Ω–æ–Ω–∏–º",user_avatar:null,content:"",created_at:new Date().toISOString(),rating:0,replies:[]})},currentUser:{type:Object,required:!0,default:()=>({})},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate"],setup(l,{emit:e}){var Be,Te;const i=ot(),o=N(()=>{var C;return l.editingCommentId===((C=l.comment)==null?void 0:C.id)}),p=f(((Be=l.comment)==null?void 0:Be.content)||""),b=f(((Te=l.comment)==null?void 0:Te.user_rating)||0),d=f(null),k=f(null),{showEmojiPicker:_,showImagePicker:n,showLinkModal:c,selectedTextForLink:r,handleEmojiMouseEnter:h,handleEmojiMouseLeave:E,handleImageMouseEnter:P,handleImageMouseLeave:S,handleButtonMouseEnter:L,handleImageButtonMouseEnter:M,handleButtonMouseLeave:g,closeEmojiPicker:j,closeImagePicker:T,closeLinkModal:V,insertEmojiUniversal:F,insertImageUniversal:W,insertLinkUniversal:R,insertLinkFromModalUniversal:re,insertSpoilerUniversal:me,autoResize:te}=ft(),{formatContentWithTruncation:he}=Co();qe(async()=>{var C;if((C=l.comment)!=null&&C.user_avatar){const O=await Po();d.value="".concat(O).concat(l.comment.user_avatar)}});const x=N(()=>{var C;return l.currentUser&&((C=l.comment)==null?void 0:C.user_id)===l.currentUser.id}),ve=N(()=>{var C;return l.currentUser&&((C=l.comment)==null?void 0:C.user_id)===l.currentUser.id||l.currentUser&&l.currentUser.is_admin===1}),B=N(()=>{var C,O,Ee;return((C=l.comment)==null?void 0:C.updated_at)&&((O=l.comment)==null?void 0:O.updated_at)!==((Ee=l.comment)==null?void 0:Ee.created_at)}),G=N(()=>{var C,O;return(C=l.comment)!=null&&C.is_deleted?!1:(((O=l.comment)==null?void 0:O.rating)||0)<=-3}),Me=N(()=>G.value),we=f(!1),ue=N(()=>{var C,O;return(C=l.comment)!=null&&C.is_deleted?null:(((O=l.comment)==null?void 0:O.rating)||0)<=-3?"lowRating":null}),de=()=>{var C,O;e("start-edit",(C=l.comment)==null?void 0:C.id),p.value=((O=l.comment)==null?void 0:O.content)||"",ye(()=>{k.value&&(k.value.focus(),te({target:k.value}))})},oe=()=>{var C;e("cancel-edit"),p.value=((C=l.comment)==null?void 0:C.content)||""},A=()=>{var C;p.value.trim()&&e("edit",(C=l.comment)==null?void 0:C.id,p.value.trim())},m=()=>{var C;confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π?")&&e("delete",(C=l.comment)==null?void 0:C.id)},Z=C=>{var O,Ee;b.value===C?(b.value=0,e("rate",(O=l.comment)==null?void 0:O.id,C)):(b.value=C,e("rate",(Ee=l.comment)==null?void 0:Ee.id,C))},le=C=>{C.key==="Enter"&&!C.shiftKey&&(C.preventDefault(),A())},$=N(()=>{var C,O;return((O=(C=l.comment)==null?void 0:C.content)==null?void 0:O.length)>500}),pe=f(!1),be=N(()=>{var C;return he((C=l.comment)==null?void 0:C.content,500,pe.value)}),Pe=()=>{pe.value=!pe.value},je=()=>{console.log("Avatar load error, falling back to initials"),d.value=null,ye(()=>{const C=document.querySelector(".avatar-placeholder");C&&(C.style.display="flex")})},ce=()=>{i.push("/login")},ae=C=>{F(C,k,p,O=>{p.value=O})},Ue=C=>{W(C,k,p,O=>{p.value=O})},Se=()=>{me(k,p,C=>{p.value=C})},Ce=()=>{R(k,p,C=>{p.value=C})},xe=C=>{re(C,k,p,O=>{p.value=O})},Ve=C=>{te(C)};return Ae(p,()=>{o.value&&k.value&&ye(()=>{Ve({target:k.value})})}),{isEditing:o,editContent:p,userRating:b,isCommentOwner:x,canDeleteComment:ve,isCommentEdited:B,formatDate:qo,formatRelativeTime:Ko,startEdit:de,cancelEdit:oe,saveEdit:A,confirmDelete:m,rateComment:Z,avatarUrl:d,getInitials:vl,handleEditKeydown:le,isCommentHidden:Me,showHiddenComment:we,hiddenCommentReason:ue,isLongComment:$,isExpanded:pe,formattedContent:be,toggleExpanded:Pe,autoResizeEdit:Ve,editTextarea:k,showEmojiPicker:_,showImagePicker:n,insertEmojiEdit:ae,insertImageEdit:Ue,insertSpoilerEdit:Se,insertLinkEdit:Ce,handleEmojiMouseEnter:h,handleEmojiMouseLeave:E,handleImageMouseEnter:P,handleImageMouseLeave:S,closeEmojiPicker:j,closeImagePicker:T,handleButtonMouseEnter:L,handleButtonMouseLeave:g,handleImageButtonMouseEnter:M,handleAvatarError:je,openLogin:ce,showLinkModal:c,selectedTextForLink:r,insertLinkFromModal:xe,closeLinkModal:V}}},kl=["data-comment-id"],gl={class:"comment-header"},yl={class:"user-info"},hl={class:"user-avatar"},pl=["src","alt"],bl={class:"user-details"},Cl={class:"username"},wl={key:0,class:"user-rating"},_l=["title"],Ml=["title"],El={class:"comment-content"},Ll={key:0,class:"hidden-comment-warning"},Il={key:1},Rl={key:0,class:"deleted-comment"},Pl={key:1},Sl={key:0,class:"edit-form"},Tl={class:"edit-textarea-container"},Al={class:"edit-footer"},jl={class:"edit-actions"},Ul=["disabled"],xl={class:"character-counter-container"},Bl={key:1,class:"comment-text-container"},Hl=["innerHTML"],$l={class:"comment-footer"},Nl={class:"comment-actions"},Dl={class:"rating-buttons"},Fl={class:"action-buttons"};function Vl(l,e,i,o,p,b){var c,r,h,E,P,S,L,M,g,j,T,V,F,W,R,re,me,te,he;const d=ke("router-link"),k=ke("EmojiPicker"),_=ke("ImagePicker"),n=ke("LinkModal");return a(),u("div",{class:"comment-item","data-comment-id":(c=i.comment)==null?void 0:c.id},[t("div",gl,[t("div",yl,[ee(d,{to:{path:"/lists/".concat((r=i.comment)==null?void 0:r.user_id)},target:"_blank",rel:"noopener noreferrer",class:"user-avatar-link"},{default:uo(()=>{var x,ve;return[t("div",hl,[o.avatarUrl?(a(),u("img",{key:0,src:o.avatarUrl,alt:((x=i.comment)==null?void 0:x.username)||"–ê–Ω–æ–Ω–∏–º",onError:e[0]||(e[0]=(...B)=>o.handleAvatarError&&o.handleAvatarError(...B)),onerror:"this.onerror=null; this.style.display='none'; this.nextElementSibling.style.display='flex';"},null,40,pl)):(a(),u("div",{key:1,class:"avatar-placeholder",style:tt({display:o.avatarUrl?"none":"flex"})},v(o.getInitials(((ve=i.comment)==null?void 0:ve.username)||"–ê–Ω–æ–Ω–∏–º")),5))])]}),_:1},8,["to"]),t("div",bl,[ee(d,{to:{path:"/lists/".concat((h=i.comment)==null?void 0:h.user_id)},target:"_blank",rel:"noopener noreferrer",class:"username-link"},{default:uo(()=>{var x;return[t("span",Cl,v(((x=i.comment)==null?void 0:x.username)||"–ê–Ω–æ–Ω–∏–º"),1)]}),_:1},8,["to"]),(E=i.comment)!=null&&E.user_movie_rating?(a(),u("span",wl,[e[19]||(e[19]=t("i",{class:"fas fa-star"},null,-1)),X(" "+v(i.comment.user_movie_rating),1)])):y("",!0),t("span",{class:"date",title:o.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(o.formatDate((P=i.comment)==null?void 0:P.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(o.formatDate((S=i.comment)==null?void 0:S.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(o.formatDate((L=i.comment)==null?void 0:L.created_at))},[X(v(o.formatRelativeTime((M=i.comment)==null?void 0:M.created_at))+" ",1),o.isCommentEdited?(a(),u("i",{key:0,class:"fas fa-pencil-alt edit-icon",title:o.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(o.formatDate((g=i.comment)==null?void 0:g.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(o.formatDate((j=i.comment)==null?void 0:j.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(o.formatDate((T=i.comment)==null?void 0:T.created_at))},null,8,Ml)):y("",!0)],8,_l)])])]),t("div",El,[!((V=i.comment)!=null&&V.is_deleted)&&o.isCommentHidden&&!o.showHiddenComment?(a(),u("div",Ll,[o.hiddenCommentReason==="lowRating"?(a(),u("p",{key:0,class:"warning-text",onClick:e[1]||(e[1]=x=>o.showHiddenComment=!0)},e[20]||(e[20]=[t("i",{class:"fas fa-eye-slash"},null,-1),X(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–∫—Ä—ã—Ç –∏–∑-–∑–∞ –Ω–∏–∑–∫–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å. ")]))):y("",!0)])):(a(),u("div",Il,[(F=i.comment)!=null&&F.is_deleted?(a(),u("div",Rl,e[21]||(e[21]=[t("p",{class:"deleted-message"},[t("i",{class:"fas fa-trash"}),X(" –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —É–¥–∞–ª—ë–Ω ")],-1)]))):(a(),u("div",Pl,[o.isEditing?(a(),u("div",Sl,[t("div",Tl,[K(t("textarea",{ref:"editTextarea","onUpdate:modelValue":e[2]||(e[2]=x=>o.editContent=x),class:"edit-textarea",rows:"3",maxlength:"1500",onKeydown:e[3]||(e[3]=(...x)=>o.handleEditKeydown&&o.handleEditKeydown(...x)),onInput:e[4]||(e[4]=(...x)=>o.autoResizeEdit&&o.autoResizeEdit(...x))},null,544),[[Xe,o.editContent]])]),t("div",Al,[t("div",jl,[t("button",{onClick:e[5]||(e[5]=(...x)=>o.cancelEdit&&o.cancelEdit(...x)),class:"cancel-button"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:e[6]||(e[6]=(...x)=>o.saveEdit&&o.saveEdit(...x)),class:"save-button",disabled:!o.editContent.trim()||o.editContent.length>1500}," –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ",8,Ul)]),t("div",xl,[t("div",{class:U(["character-counter-inline",{"near-limit":o.editContent.length>1400,"at-limit":o.editContent.length>=1500}])},v(o.editContent.length)+"/1500 ",3),t("button",{type:"button",class:U(["emoji-button-inline",{active:o.showEmojiPicker}]),onMouseenter:e[7]||(e[7]=(...x)=>o.handleButtonMouseEnter&&o.handleButtonMouseEnter(...x)),onMouseleave:e[8]||(e[8]=(...x)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...x))}," üòä ",34),t("button",{type:"button",class:U(["emoji-button-inline",{active:o.showImagePicker}]),onMouseenter:e[9]||(e[9]=(...x)=>o.handleImageButtonMouseEnter&&o.handleImageButtonMouseEnter(...x)),onMouseleave:e[10]||(e[10]=(...x)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...x))},e[22]||(e[22]=[Je('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-8652d84d><g id="logo" data-v-8652d84d><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-8652d84d></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-8652d84d></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-8652d84d></path></g></svg>',1)]),34),t("button",{type:"button",class:"emoji-button-inline spoiler-button",onClick:e[11]||(e[11]=(...x)=>o.insertSpoilerEdit&&o.insertSpoilerEdit(...x)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},e[23]||(e[23]=[t("i",{class:"fas fa-eye-slash"},null,-1)])),t("button",{type:"button",class:"emoji-button-inline link-button",onClick:e[12]||(e[12]=(...x)=>o.insertLinkEdit&&o.insertLinkEdit(...x)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},e[24]||(e[24]=[t("i",{class:"fas fa-link"},null,-1)])),ee(k,{"is-visible":o.showEmojiPicker,onEmojiSelected:o.insertEmojiEdit,onMouseEnter:o.handleEmojiMouseEnter,onMouseLeave:o.handleEmojiMouseLeave,onClose:o.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),ee(_,{"is-visible":o.showImagePicker,"current-user":i.currentUser,onImageSelected:o.insertImageEdit,onMouseEnter:o.handleImageMouseEnter,onMouseLeave:o.handleImageMouseLeave,onClose:o.closeImagePicker,onLoginRequired:o.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),ee(n,{"is-visible":o.showLinkModal,"selected-text":o.selectedTextForLink,onClose:o.closeLinkModal,onSubmit:o.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):(a(),u("div",Bl,[t("p",{class:U(["comment-text",{truncated:o.isLongComment&&!o.isExpanded}]),innerHTML:o.formattedContent},null,10,Hl),o.isLongComment?(a(),u("button",{key:0,onClick:e[13]||(e[13]=(...x)=>o.toggleExpanded&&o.toggleExpanded(...x)),class:"expand-button"},v(o.isExpanded?"–°–≤–µ—Ä–Ω—É—Ç—å":"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å"),1)):y("",!0)]))]))]))]),t("div",$l,[t("div",Nl,[t("div",Dl,[!o.isCommentOwner&&!((W=i.comment)!=null&&W.is_deleted)?(a(),u("button",{key:0,onClick:e[14]||(e[14]=x=>o.rateComment(1)),class:U(["rating-button",{"rated-up":o.userRating===1}])},e[25]||(e[25]=[t("i",{class:"fas fa-thumbs-up"},null,-1)]),2)):y("",!0),t("span",{class:U(["rating-count",{"rating-positive":o.userRating===1,"rating-negative":o.userRating===-1}])},v(((R=i.comment)==null?void 0:R.rating)||0),3),!o.isCommentOwner&&!((re=i.comment)!=null&&re.is_deleted)?(a(),u("button",{key:1,onClick:e[15]||(e[15]=x=>o.rateComment(-1)),class:U(["rating-button",{"rated-down":o.userRating===-1}])},e[26]||(e[26]=[t("i",{class:"fas fa-thumbs-down"},null,-1)]),2)):y("",!0)]),t("div",Fl,[!i.currentUser||i.currentUser.allow_comments===1?(a(),u("button",{key:0,onClick:e[16]||(e[16]=x=>l.$emit("reply",i.comment)),class:"action-button reply-button"},e[27]||(e[27]=[t("i",{class:"fas fa-reply"},null,-1)]))):y("",!0),o.isCommentOwner&&!((me=i.comment)!=null&&me.is_deleted)&&!o.isEditing&&((te=i.currentUser)==null?void 0:te.allow_comments)===1?(a(),u("button",{key:1,onClick:e[17]||(e[17]=(...x)=>o.startEdit&&o.startEdit(...x)),class:"action-button edit-button"},e[28]||(e[28]=[t("i",{class:"fas fa-edit"},null,-1)]))):y("",!0),o.canDeleteComment&&!((he=i.comment)!=null&&he.is_deleted)?(a(),u("button",{key:2,onClick:e[18]||(e[18]=(...x)=>o.confirmDelete&&o.confirmDelete(...x)),class:"action-button delete-button"},e[29]||(e[29]=[t("i",{class:"fas fa-trash"},null,-1)]))):y("",!0)])])])],8,kl)}const Ol=_e(fl,[["render",Vl],["__scopeId","data-v-8652d84d"]]),Kl={name:"CommentThread",components:{CommentItem:Ol,EmojiPicker:ct,ImagePicker:mt,LinkModal:vt},props:{comment:{type:Object,required:!0},currentUser:{type:Object,required:!0},replyTo:{type:Object,default:null},replyContent:{type:String,default:""},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate","submit-reply","cancel-reply","update-reply-content","reply-keydown"],setup(l,{emit:e}){const i=f(null),o=f(!0),{showEmojiPicker:p,showImagePicker:b,showLinkModal:d,selectedTextForLink:k,handleEmojiMouseEnter:_,handleEmojiMouseLeave:n,handleImageMouseEnter:c,handleImageMouseLeave:r,handleButtonMouseEnter:h,handleImageButtonMouseEnter:E,handleButtonMouseLeave:P,closeEmojiPicker:S,closeImagePicker:L,closeLinkModal:M,insertEmojiUniversal:g,insertImageUniversal:j,insertLinkUniversal:T,insertLinkFromModalUniversal:V,insertSpoilerUniversal:F}=ft(),W=B=>{e("update-reply-content",B.target.value);const G=B.target;G&&(G.style.height="auto",G.style.height="".concat(Math.min(G.scrollHeight,200),"px"))},R={get value(){return l.replyContent},set value(B){e("update-reply-content",B)}};return{replyTextarea:i,showEmojiPicker:p,showImagePicker:b,isCollapsed:o,insertEmoji:B=>{g(B,i,R,G=>{e("update-reply-content",G)})},insertImage:B=>{j(B,i,R,G=>{e("update-reply-content",G)})},insertSpoiler:()=>{F(i,R,B=>{e("update-reply-content",B)})},handleEmojiMouseEnter:_,handleEmojiMouseLeave:n,handleImageMouseEnter:c,handleImageMouseLeave:r,handleButtonMouseEnter:h,handleButtonMouseLeave:P,closeEmojiPicker:S,closeImagePicker:L,handleImageButtonMouseEnter:E,handleReplyInput:W,toggleCollapsed:()=>{o.value=!o.value},showLinkModal:d,selectedTextForLink:k,insertLink:()=>{T(i,R,B=>{e("update-reply-content",B)})},closeLinkModal:M,insertLinkFromModal:B=>{V(B,i,R,G=>{e("update-reply-content",G)})}}},computed:{canReply(){return this.currentUser?this.currentUser.allow_comments===1:!0},getReplyPlaceholder(){return this.currentUser?this.currentUser.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç..."},formattedContent(){const{formatContent:l}=Co();return l(this.comment.content)}}},ql={class:"comment-thread"},zl={key:0,class:"reply-form"},Wl={class:"textarea-container"},Gl=["value","placeholder","disabled"],Yl={class:"reply-footer"},Zl={class:"reply-actions"},Ql=["disabled"],Xl={class:"character-counter-container"},Jl=["disabled"],ei={key:1,class:"replies-container"},ti=["title"],oi={class:"replies-count"},ni=["title"],si={key:0,class:"replies-content"};function li(l,e,i,o,p,b){const d=ke("CommentItem"),k=ke("EmojiPicker"),_=ke("ImagePicker"),n=ke("LinkModal"),c=ke("CommentThread",!0);return a(),u("div",ql,[ee(d,{comment:i.comment,"current-user":i.currentUser,"editing-comment-id":i.editingCommentId,onReply:e[0]||(e[0]=r=>l.$emit("reply",r)),onStartEdit:e[1]||(e[1]=r=>l.$emit("start-edit",r)),onCancelEdit:e[2]||(e[2]=r=>l.$emit("cancel-edit")),onEdit:e[3]||(e[3]=(r,h)=>l.$emit("edit",r,h)),onDelete:e[4]||(e[4]=r=>l.$emit("delete",r)),onRate:e[5]||(e[5]=(r,h)=>l.$emit("rate",r,h))},null,8,["comment","current-user","editing-comment-id"]),i.replyTo&&i.replyTo.id===i.comment.id?(a(),u("div",zl,[t("div",Wl,[t("textarea",{ref:"replyTextarea",class:"comment-textarea",value:i.replyContent,placeholder:b.getReplyPlaceholder,disabled:i.currentUser&&i.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:e[6]||(e[6]=(...r)=>o.handleReplyInput&&o.handleReplyInput(...r)),onKeydown:e[7]||(e[7]=r=>l.$emit("reply-keydown",r))},null,40,Gl)]),t("div",Yl,[t("div",Zl,[t("button",{class:"cancel-reply",onClick:e[8]||(e[8]=r=>l.$emit("cancel-reply"))},"–û—Ç–º–µ–Ω–∞"),t("button",{class:"submit-button",disabled:!i.replyContent.trim()||i.replyContent.length>1500||i.currentUser&&i.currentUser.allow_comments!==1,onClick:e[9]||(e[9]=r=>l.$emit("submit-reply"))}," –û—Ç–≤–µ—Ç–∏—Ç—å ",8,Ql)]),t("div",Xl,[t("div",{class:U(["character-counter-inline",{"near-limit":i.replyContent.length>1400,"at-limit":i.replyContent.length>=1500}])},v(i.replyContent.length)+"/1500 ",3),t("button",{type:"button",class:U(["emoji-button-inline",{active:o.showEmojiPicker}]),onMouseenter:e[10]||(e[10]=(...r)=>o.handleButtonMouseEnter&&o.handleButtonMouseEnter(...r)),onMouseleave:e[11]||(e[11]=(...r)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...r))}," üòä ",34),t("button",{type:"button",class:U(["emoji-button-inline",{active:o.showImagePicker}]),onMouseenter:e[12]||(e[12]=(...r)=>o.handleImageButtonMouseEnter&&o.handleImageButtonMouseEnter(...r)),onMouseleave:e[13]||(e[13]=(...r)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...r))},e[29]||(e[29]=[Je('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-da7dc7e6><g id="logo" data-v-da7dc7e6><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-da7dc7e6></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-da7dc7e6></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-da7dc7e6></path></g></svg>',1)]),34),t("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:i.currentUser&&i.currentUser.allow_comments!==1,onClick:e[14]||(e[14]=(...r)=>o.insertSpoiler&&o.insertSpoiler(...r)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},e[30]||(e[30]=[t("i",{class:"fas fa-eye-slash"},null,-1)]),8,Jl),t("button",{type:"button",class:"emoji-button-inline link-button",onClick:e[15]||(e[15]=(...r)=>o.insertLink&&o.insertLink(...r)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},e[31]||(e[31]=[t("i",{class:"fas fa-link"},null,-1)])),ee(k,{"is-visible":o.showEmojiPicker,onEmojiSelected:o.insertEmoji,onMouseEnter:o.handleEmojiMouseEnter,onMouseLeave:o.handleEmojiMouseLeave,onClose:o.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),ee(_,{"is-visible":o.showImagePicker,"current-user":i.currentUser,onImageSelected:o.insertImage,onMouseEnter:o.handleImageMouseEnter,onMouseLeave:o.handleImageMouseLeave,onClose:o.closeImagePicker,onLoginRequired:e[16]||(e[16]=()=>l.$router.push("/login"))},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose"]),ee(n,{"is-visible":o.showLinkModal,"selected-text":o.selectedTextForLink,onClose:o.closeLinkModal,onSubmit:o.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):y("",!0),i.comment.replies&&i.comment.replies.length>0?(a(),u("div",ei,[t("button",{class:"collapse-toggle",title:o.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:e[17]||(e[17]=(...r)=>o.toggleCollapsed&&o.toggleCollapsed(...r))},[t("span",{class:U(["collapse-icon",{expanded:!o.isCollapsed}])},e[32]||(e[32]=[t("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},[t("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1)]),2),t("span",oi,v(i.comment.replies.length)+" "+v(i.comment.replies.length===1?"–æ—Ç–≤–µ—Ç":"–æ—Ç–≤–µ—Ç–æ–≤"),1)],8,ti),t("div",{class:"vertical-line-clickable",title:o.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:e[18]||(e[18]=(...r)=>o.toggleCollapsed&&o.toggleCollapsed(...r))},[t("div",{class:U(["vertical-line-visual",{collapsed:o.isCollapsed}])},null,2)],8,ni),o.isCollapsed?y("",!0):(a(),u("div",si,[(a(!0),u(ne,null,ge(i.comment.replies,r=>(a(),Re(c,{key:r.id,comment:r,"current-user":i.currentUser,"reply-to":i.replyTo,"reply-content":i.replyContent,"editing-comment-id":i.editingCommentId,onReply:e[19]||(e[19]=h=>l.$emit("reply",h)),onStartEdit:e[20]||(e[20]=h=>l.$emit("start-edit",h)),onCancelEdit:e[21]||(e[21]=h=>l.$emit("cancel-edit")),onEdit:e[22]||(e[22]=(h,E)=>l.$emit("edit",h,E)),onDelete:e[23]||(e[23]=h=>l.$emit("delete",h)),onRate:e[24]||(e[24]=(h,E)=>l.$emit("rate",h,E)),onSubmitReply:e[25]||(e[25]=h=>l.$emit("submit-reply")),onCancelReply:e[26]||(e[26]=h=>l.$emit("cancel-reply")),onUpdateReplyContent:e[27]||(e[27]=h=>l.$emit("update-reply-content",h)),onReplyKeydown:e[28]||(e[28]=h=>l.$emit("reply-keydown",h))},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id"]))),128))]))])):y("",!0)])}const ii=_e(Kl,[["render",li],["__scopeId","data-v-da7dc7e6"]]),ai={name:"Comments",components:{CommentThread:ii,Notification:nt,EmojiPicker:ct,ImagePicker:mt,LinkModal:vt},props:{movieId:{type:[String,Number],required:!0}},setup(l){const e=ut(),i=ot(),o=et(),p=f([]),b=f(""),d=f(null),k=f(""),_=f(null),n=f(e.user),c=f(null),r=f(null),h=f(o.isAutoShowComments),E=f(!1),P=f(3),S=f(3),{showEmojiPicker:L,showImagePicker:M,showLinkModal:g,selectedTextForLink:j,handleEmojiMouseEnter:T,handleEmojiMouseLeave:V,handleImageMouseEnter:F,handleImageMouseLeave:W,handleButtonMouseEnter:R,handleImageButtonMouseEnter:re,handleButtonMouseLeave:me,closeEmojiPicker:te,closeImagePicker:he,closeLinkModal:x,insertEmojiUniversal:ve,insertImageUniversal:B,insertLinkUniversal:G,insertLinkFromModalUniversal:Me,insertSpoilerUniversal:we,autoResize:ue}=ft(),de=N(()=>{const H=(q=null)=>p.value.filter(Q=>Q.parent_id===q).sort((Q,ie)=>Q.id-ie.id).map(Q=>({...Q,replies:H(Q.id)})).filter(Q=>!Q.is_deleted||Q.replies&&Q.replies.length>0);return H()}),oe=N(()=>{const H=q=>q.reduce((Q,ie)=>Q+1+H(ie.replies||[]),0);return H(de.value)}),A=N(()=>de.value.slice(0,S.value)),m=N(()=>de.value.length>S.value),Z=N(()=>de.value.length-S.value),le=()=>{S.value+=P.value},$=async()=>{try{const H=await So(l.movieId);p.value=H}catch(H){console.error("Failed to load comments:",H),c.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.")}},pe=async()=>{if(E.value)return;if(!e.token){c.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Ce});return}if(n.value&&n.value.allow_comments!==1){c.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!b.value.replace(/\[spoiler\]\s*\[\/spoiler\]/g,"").replace(/\[img\]\s*\[\/img\]/g,"").replace(/\[link=[^\]]+\]\s*\[\/link\]/g,"").trim()){c.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º");return}if(b.value.length>1500){c.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await co(l.movieId,b.value.trim()),b.value="",await $(),h.value=!0,ye(()=>{r.value&&(r.value.focus(),r.value.style.height="auto"),setTimeout(()=>{const q=document.querySelectorAll(".comment-item[data-comment-id]");if(q.length>0){const Q=Array.from(q).map(ie=>parseInt(ie.getAttribute("data-comment-id"))).filter(ie=>!isNaN(ie));if(Q.length>0){const ie=Math.max(...Q),Oe=document.querySelector('[data-comment-id="'.concat(ie,'"]'));Oe&&Oe.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}},300)})}catch(q){console.error("Failed to create comment:",q),c.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},be=H=>{if(!e.token){c.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Ce});return}_.value=null,d.value=H,k.value="",ye(()=>{const q=document.querySelector(".reply-form");q&&q.scrollIntoView({behavior:"smooth",block:"center"})})},Pe=async()=>{if(!e.token){c.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Ce});return}if(n.value&&n.value.allow_comments!==1){c.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!(!k.value.trim()||!d.value)){if(k.value.length>1500){c.value.showNotification("–û—Ç–≤–µ—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await co(l.movieId,k.value.trim(),d.value.id);const H=d.value.id;await $(),k.value="",d.value=null,ye(()=>{setTimeout(()=>{const q=document.querySelector('[data-comment-id="'.concat(H,'"]'));if(q){const Q=q.querySelector(".replies-content");if(Q){const ie=Q.querySelectorAll(".comment-item[data-comment-id]");if(ie.length>0){const Oe=Array.from(ie).map(Ke=>parseInt(Ke.getAttribute("data-comment-id"))).filter(Ke=>!isNaN(Ke));if(Oe.length>0){const Ke=Math.max(...Oe),se=document.querySelector('[data-comment-id="'.concat(Ke,'"]'));se&&se.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}}}},300)})}catch(H){console.error("Error submitting reply:",H),c.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}}},je=async(H,q)=>{if(!e.token){c.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Ce});return}if(n.value&&n.value.allow_comments!==1){c.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(q.length>1500){c.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await jo(H,q.trim()),await $(),_.value=null}catch(Q){console.error("Failed to update comment:",Q),c.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},ce=async H=>{if(!e.token){c.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Ce});return}try{await Ao(H),await $()}catch(q){console.error("Failed to delete comment:",q),c.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},ae=async(H,q)=>{if(!e.token){c.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Ce});return}try{await To(H,q),await $()}catch(Q){console.error("Failed to rate comment:",Q),c.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ü–µ–Ω–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},Ue=H=>{E.value||L.value||H.key==="Enter"&&!H.shiftKey&&(H.preventDefault(),pe())},Se=H=>{H.key==="Enter"&&!H.shiftKey&&(H.preventDefault(),Pe())},Ce=()=>{i.push("/login")},xe=H=>{E.value=!0,ve(H,r,b,q=>{b.value=q}),setTimeout(()=>{E.value=!1},100)},Ve=H=>{B(H,r,b,q=>{b.value=q})},Be=()=>{we(r,b,H=>{b.value=H})},Te=()=>{G(r,b,H=>{b.value=H})},C=H=>{Me(H,r,b,q=>{b.value=q})},O=N(()=>n.value?n.value.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."),Ee=N(()=>n.value?n.value.allow_comments===1:!0),st=H=>{d.value=null,k.value="",_.value=H},lt=()=>{_.value=null};return qe(()=>{$()}),{comments:p,groupedComments:de,displayedComments:A,hasMoreComments:m,remainingCommentsCount:Z,showMoreComments:le,newComment:b,replyTo:d,replyContent:k,editingCommentId:_,currentUser:n,notificationRef:c,commentTextarea:r,showComments:h,submitComment:pe,handleReply:be,submitReply:Pe,handleEdit:je,handleDelete:ce,handleRate:ae,handleCommentKeydown:Ue,handleReplyKeydown:Se,autoResize:ue,totalCommentsCount:oe,getCommentWordForm:ml,showEmojiPicker:L,showImagePicker:M,showLinkModal:g,selectedTextForLink:j,insertEmoji:xe,insertImage:Ve,handleEmojiMouseEnter:T,handleEmojiMouseLeave:V,handleImageMouseEnter:F,handleImageMouseLeave:W,closeEmojiPicker:te,closeImagePicker:he,handleButtonMouseLeave:me,handleButtonMouseEnter:R,handleImageButtonMouseEnter:re,getCommentPlaceholder:O,canComment:Ee,handleStartEdit:st,handleCancelEdit:lt,insertSpoiler:Be,insertLink:Te,insertLinkFromModal:C,closeLinkModal:x}}},ri={class:"comments-section"},ui={class:"spoiler-content"},di={key:1,class:"comments-container"},ci={class:"comments-header"},mi={class:"textarea-container"},vi=["placeholder","disabled"],fi={class:"comment-footer"},ki={class:"comment-actions"},gi=["disabled"],yi={class:"character-counter-container"},hi=["disabled"],pi=["disabled"],bi=["disabled"],Ci={class:"comments-list"},wi={key:0,class:"show-more-comments"};function _i(l,e,i,o,p,b){const d=ke("EmojiPicker"),k=ke("ImagePicker"),_=ke("LinkModal"),n=ke("CommentThread"),c=ke("Notification");return a(),u("div",ri,[o.showComments?(a(),u("div",di,[t("div",ci,[t("button",{class:"hide-comments-btn",onClick:e[1]||(e[1]=r=>o.showComments=!1)},e[18]||(e[18]=[t("i",{class:"fas fa-eye-slash"},null,-1),X(" –°–∫—Ä—ã—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ")]))]),t("form",{class:"comment-form",onSubmit:e[11]||(e[11]=Fe((...r)=>o.submitComment&&o.submitComment(...r),["prevent"]))},[t("div",mi,[K(t("textarea",{ref:"commentTextarea","onUpdate:modelValue":e[2]||(e[2]=r=>o.newComment=r),class:"comment-textarea",placeholder:o.getCommentPlaceholder,disabled:o.currentUser&&o.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:e[3]||(e[3]=(...r)=>o.autoResize&&o.autoResize(...r)),onKeydown:e[4]||(e[4]=(...r)=>o.handleCommentKeydown&&o.handleCommentKeydown(...r))},null,40,vi),[[Xe,o.newComment]])]),t("div",fi,[t("div",ki,[t("button",{class:"submit-button",type:"submit",disabled:!o.newComment.trim()||o.newComment.length>1500||o.currentUser&&o.currentUser.allow_comments!==1}," –û—Ç–ø—Ä–∞–≤–∏—Ç—å ",8,gi)]),t("div",yi,[t("div",{class:U(["character-counter-inline",{"near-limit":o.newComment.length>1400,"at-limit":o.newComment.length>=1500}])},v(o.newComment.length)+"/1500 ",3),t("button",{type:"button",class:U(["emoji-button-inline",{active:o.showEmojiPicker}]),disabled:o.currentUser&&o.currentUser.allow_comments!==1,onMouseenter:e[5]||(e[5]=(...r)=>o.handleButtonMouseEnter&&o.handleButtonMouseEnter(...r)),onMouseleave:e[6]||(e[6]=(...r)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...r))}," üòä ",42,hi),t("button",{type:"button",class:U(["emoji-button-inline",{active:o.showImagePicker}]),disabled:o.currentUser&&o.currentUser.allow_comments!==1,onMouseenter:e[7]||(e[7]=(...r)=>o.handleImageButtonMouseEnter&&o.handleImageButtonMouseEnter(...r)),onMouseleave:e[8]||(e[8]=(...r)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...r))},e[19]||(e[19]=[Je('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-b78de9c9><g id="logo" data-v-b78de9c9><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-b78de9c9></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-b78de9c9></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-b78de9c9></path></g></svg>',1)]),42,pi),t("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:o.currentUser&&o.currentUser.allow_comments!==1,onClick:e[9]||(e[9]=(...r)=>o.insertSpoiler&&o.insertSpoiler(...r)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},e[20]||(e[20]=[t("i",{class:"fas fa-eye-slash"},null,-1)]),8,bi),t("button",{type:"button",class:"emoji-button-inline link-button",onClick:e[10]||(e[10]=(...r)=>o.insertLink&&o.insertLink(...r)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},e[21]||(e[21]=[t("i",{class:"fas fa-link"},null,-1)])),ee(d,{"is-visible":o.showEmojiPicker&&o.canComment,onEmojiSelected:o.insertEmoji,onMouseEnter:o.handleEmojiMouseEnter,onMouseLeave:o.handleEmojiMouseLeave,onClose:o.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),ee(k,{"is-visible":o.showImagePicker&&o.canComment,"current-user":o.currentUser,onImageSelected:o.insertImage,onMouseEnter:o.handleImageMouseEnter,onMouseLeave:o.handleImageMouseLeave,onClose:o.closeImagePicker,onLoginRequired:l.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),ee(_,{"is-visible":o.showLinkModal,"selected-text":o.selectedTextForLink,onClose:o.closeLinkModal,onSubmit:o.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])],32),t("div",Ci,[(a(!0),u(ne,null,ge(o.displayedComments,r=>(a(),Re(n,{key:r.id,comment:r,"current-user":o.currentUser,"reply-to":o.replyTo,"reply-content":o.replyContent,"editing-comment-id":o.editingCommentId,"is-first-comment":!1,onReply:o.handleReply,onStartEdit:o.handleStartEdit,onCancelEdit:o.handleCancelEdit,onEdit:o.handleEdit,onDelete:o.handleDelete,onRate:o.handleRate,onSubmitReply:o.submitReply,onCancelReply:e[12]||(e[12]=h=>o.replyTo=null),onUpdateReplyContent:e[13]||(e[13]=h=>o.replyContent=h),onReplyKeydown:o.handleReplyKeydown},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id","onReply","onStartEdit","onCancelEdit","onEdit","onDelete","onRate","onSubmitReply","onReplyKeydown"]))),128)),o.hasMoreComments?(a(),u("div",wi,[t("button",{class:"show-more-btn",onClick:e[14]||(e[14]=(...r)=>o.showMoreComments&&o.showMoreComments(...r))}," –ü–æ–∫–∞–∑–∞—Ç—å –µ—â–µ "+v(o.remainingCommentsCount)+" "+v(o.getCommentWordForm(o.remainingCommentsCount)),1)])):y("",!0)])])):(a(),u("div",{key:0,class:"spoiler-warning",onClick:e[0]||(e[0]=r=>o.showComments=!0)},[t("div",ui,[e[15]||(e[15]=t("i",{class:"fas fa-eye-slash"},null,-1)),e[16]||(e[16]=t("h3",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–∫—Ä—ã—Ç—ã",-1)),e[17]||(e[17]=t("p",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä—ã. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å.",-1)),t("div",{class:U(["comments-count",{"no-comments":o.totalCommentsCount===0}])},[o.totalCommentsCount===0?(a(),u(ne,{key:0},[X(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç ")],64)):(a(),u(ne,{key:1},[X(v(o.totalCommentsCount)+" "+v(o.getCommentWordForm(o.totalCommentsCount)),1)],64))],2)])])),ee(c,{ref:"notificationRef"},null,512)])}const Mi=_e(ai,[["render",_i],["__scopeId","data-v-b78de9c9"]]),Ei={class:"movie-info"},Li={class:"content"},Ii={key:0,class:"content-card"},Ri={class:"movie-skeleton"},Pi={class:"movie-skeleton__player"},Si={key:2,class:"content-card"},Ti={key:3,class:"content-card"},Ai={class:"content-header"},ji=["src"],Ui={class:"content-title"},xi={key:0,class:"ratings-links"},Bi={key:1},Hi=["href","title"],$i={key:2},Ni=["href","title"],Di={key:3},Fi=["href","title"],Vi={key:4},Oi=["href","title"],Ki={key:5},qi=["href"],zi={key:6,class:"rating-links-group"},Wi=["href"],Gi=["title"],Yi={key:0,class:"fa-regular fa-face-grin-wink"},Zi={key:1,class:"fas fa-spinner fa-spin"},Qi={key:2,class:"nudity-info-popup"},Xi={class:"nudity-info-content"},Ji=["content"],ea=["content"],ta={class:"additional-info"},oa={class:"info-content"},na={key:0,class:"movie-poster-container desktop-only"},sa=["href"],la=["src"],ia={class:"details-container"},aa={class:"info-list"},ra={key:0},ua={key:1},da={key:2},ca={key:3},ma={key:4},va={key:5},fa={key:6},ka={key:7},ga={key:8},ya={class:"content-info"},ha={key:0,class:"content-description-text"},pa={key:2,class:"comments-section"},ba={key:3,class:"staff-section"},Ca={class:"staff-categories"},wa={key:0,class:"staff-category"},_a={class:"staff-list"},Ma=["href","title"],Ea=["src","alt"],La={class:"staff-name"},Ia={key:0,class:"staff-role"},Ra=["href","title"],Pa={key:1,class:"staff-category"},Sa={class:"staff-names-container"},Ta={class:"staff-names-list"},Aa=["href"],ja=["href","title"],Ua={key:2,class:"staff-category"},xa={class:"staff-names-container"},Ba={class:"staff-names-list"},Ha=["href"],$a=["href","title"],Na={key:4,class:"yt-video-container"},Da={key:5,class:"related-movies"},Fa=["title"],Va={key:6,class:"related-movies"},Oa=["title"],Ka={__name:"MovieInfo",setup(l){const e=f(!0),i=et(),o=ut(),p=Uo(),b=yo(),d=f(b.params.kp_id),k=f(""),_=f(null),n=f(null),c=xo(),h=Oo().areTrailersActive,E=f(null),P=f(!1),S=f(!1),L=f(10),M=f(null),g=f(!1),j=N(()=>i.isCommentsEnabled),T=()=>{if(n.value){const A=n.value.name_ru||n.value.name_en||n.value.name_original||"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å–º–µ";document.title=A}},V=A=>A?A.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",F=A=>(A||[]).map(m=>({kp_id:m.film_id,poster:m.poster_url_preview||m.poster_url,title:m.name_ru||m.name_en||m.name_original})),W=A=>{if(typeof A!="number")return;const m=Math.floor(A/60),Z=A%60;return"".concat(m," —á. ").concat(Z," –º–∏–Ω.")},R=f(!1),re=f({top:"0px",left:"0px"}),me=A=>{R.value=!0,re.value={top:"".concat(A.pageY+10,"px"),left:"".concat(A.pageX-70,"px")}},te=f(null),he=async()=>{try{const A=[n.value.name_ru||n.value.name_en||n.value.name_original,...n.value.year?[n.value.year]:[],...n.value.film_length?[W(n.value.film_length)]:[]];await navigator.clipboard.writeText(A.join(", ")),te.value.showNotification("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ")}catch(A){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",A)}},x=async(A=!0)=>{var m,Z,le,$,pe,be,Pe,je;try{let ce;if(d.value.startsWith("shiki")?ce=await Ho(d.value):ce=await $o(d.value,o.token),Array.isArray(ce)&&ce.length===0)throw new Error("–î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–∏—Å–∫.");n.value=ce,d.value.startsWith("shiki")?n.value={...n.value,title:n.value.name_ru||n.value.name_en,name_original:n.value.name_en,short_description:n.value.slogan}:n.value={...n.value,title:n.value.name_ru||n.value.name_en||n.value.name_original,kinopoisk_id:d.value},c.setHeaderContent({text:n.value.title,imageUrl:n.value.logo_url}),T();const ae={kp_id:d.value,title:((m=n.value)==null?void 0:m.name_ru)||((Z=n.value)==null?void 0:Z.name_en)||((le=n.value)==null?void 0:le.name_original),poster:(($=n.value)==null?void 0:$.poster_url)||((pe=n.value)==null?void 0:pe.cover_url)||((be=n.value)==null?void 0:be.screenshots[0]),year:(Pe=n.value)==null?void 0:Pe.year,type:(je=n.value)==null?void 0:je.type};if(d.value.startsWith("shiki"))if(n.value.screenshots&&n.value.screenshots.length>0){const Se=Math.floor(Math.random()*n.value.screenshots.length),Ce=n.value.screenshots[Se];p.updateMoviePoster(Ce)}else ae.poster&&p.updateMoviePoster(ae.poster);else ae.poster&&p.updateMoviePoster(ae.poster);if(N(()=>i.isHistoryAllowed).value&&ae.kp_id&&ae.title&&A)if(o.token)try{await po(ae.kp_id,z.HISTORY)}catch(Se){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é:",Se)}else i.addToHistory({...ae})}catch(ce){const{message:ae,code:Ue}=rt(ce);k.value=ae,_.value=Ue,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–ª—å–º–∞—Ö:",ce)}},ve=N(()=>{var A,m;return console.log("–¢—Ä–µ–π–ª–µ—Ä—ã:",(A=n.value)==null?void 0:A.videos),(m=n.value)==null?void 0:m.videos}),B=N(()=>{var A;return F((A=n.value)==null?void 0:A.sequels_and_prequels)}),G=N(()=>{var A;return F((A=n.value)==null?void 0:A.similars)}),Me=()=>{var le;const A=((le=document.querySelector(".related-movies"))==null?void 0:le.clientWidth)||0,Z=Math.floor(A/160)||10;L.value=Math.max(1,Z)},we=()=>{Me()},ue=A=>{if(A.altKey&&A.keyCode===84&&document.querySelector(".player-container")){const Z=document.querySelector(".theater-mode-btn");Z&&Z.click()}},de=async()=>{var A;if(!o.token){te.value.showNotification('–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:()=>c.openLogin()});return}if((A=n.value)!=null&&A.imdb_id){if(M.value){M.value=null;return}g.value=!0;try{const m=await No(n.value.imdb_id);M.value=m.nudity_info}catch(m){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö:",m),te.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö")}finally{g.value=!1}}};qe(async()=>{await x(),e.value=!1,document.addEventListener("keydown",ue),window.addEventListener("resize",we),setTimeout(Me,100)}),Bo(async()=>{c.clearHeaderContent(),document.removeEventListener("keydown",ue),window.removeEventListener("resize",we)}),Ae(()=>b.params.kp_id,async A=>{A&&A!==d.value&&(c.clearHeaderContent(),d.value=A,E.value=null,await x(),e.value=!1)},{immediate:!0}),Ae(n,()=>{T()},{deep:!0});const oe=A=>{var m,Z;return((Z=(m=n.value)==null?void 0:m.staff)==null?void 0:Z.filter(le=>le.profession_key===A))||[]};return(A,m)=>{var Z,le;return a(),u(ne,null,[t("div",Ei,[t("div",Li,[(e.value||!n.value)&&!k.value?(a(),u("div",Ii,[t("div",Ri,[m[4]||(m[4]=Je('<div class="movie-skeleton__header" data-v-7724dca3><div class="movie-skeleton__title" data-v-7724dca3></div></div><div class="movie-skeleton__ratings" data-v-7724dca3><div class="movie-skeleton__rating-item" data-v-7724dca3></div><div class="movie-skeleton__rating-item" data-v-7724dca3></div><div class="movie-skeleton__rating-item" data-v-7724dca3></div></div>',2)),t("div",Pi,[ee(bo)]),m[5]||(m[5]=Je('<div class="movie-skeleton__additional-info" data-v-7724dca3><div class="movie-skeleton__section-title" data-v-7724dca3></div><div class="movie-skeleton__info-list" data-v-7724dca3><div class="movie-skeleton__info-item" data-v-7724dca3></div><div class="movie-skeleton__info-item" data-v-7724dca3></div><div class="movie-skeleton__info-item" data-v-7724dca3></div><div class="movie-skeleton__info-item" data-v-7724dca3></div><div class="movie-skeleton__info-item" data-v-7724dca3></div></div></div><div class="movie-skeleton__description" data-v-7724dca3><div class="movie-skeleton__description-line" data-v-7724dca3></div><div class="movie-skeleton__description-line" data-v-7724dca3></div><div class="movie-skeleton__description-line" data-v-7724dca3></div><div class="movie-skeleton__description-line" data-v-7724dca3></div></div>',2))])])):y("",!0),k.value?(a(),Re(ho,{key:1,message:k.value,code:_.value},null,8,["message","code"])):y("",!0),k.value?(a(),u("div",Si,[(a(),Re(go,{key:d.value,"kp-id":d.value,"movie-info":n.value,"onUpdate:movieInfo":x},null,8,["kp-id","movie-info"]))])):y("",!0),n.value&&!e.value?(a(),u("div",Ti,[t("div",Ai,[n.value.logo_url?(a(),u("div",{key:0,class:"content-logo",onMousemove:me,onMouseleave:m[0]||(m[0]=$=>R.value=!1),onClick:he},[t("img",{src:n.value.logo_url,alt:"–õ–æ–≥–æ—Ç–∏–ø —Ñ–∏–ª—å–º–∞",class:"content-logo"},null,8,ji)],32)):(a(),u("div",{key:1,onMousemove:me,onMouseleave:m[1]||(m[1]=$=>R.value=!1),onClick:he},[t("h1",Ui,v(n.value.title),1)],32)),K(t("div",{class:"title-copy-tooltip",style:tt(re.value)}," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ",4),[[Y,R.value]])]),n.value.kinopoisk_id||n.value.title||n.value.imdb_id||n.value.rating_imdb||n.value.shikimori_id?(a(),u("div",xi,[n.value.kinopoisk_id?(a(),Re(As,{key:0,"kp-id":n.value.kinopoisk_id,"show-dash":!0},null,8,["kp-id"])):y("",!0),n.value.kinopoisk_id?(a(),u("div",Bi,[t("a",{href:"https://www.kinopoisk.ru/film/".concat(n.value.kinopoisk_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:n.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(V(n.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[m[6]||(m[6]=t("img",{src:vo,alt:"–ö–ü",class:"rating-logo"},null,-1)),t("span",null,v(n.value.rating_kinopoisk?n.value.rating_kinopoisk:"‚Äî"),1),m[7]||(m[7]=t("img",{src:ze,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Hi)])):y("",!0),!n.value.kinopoisk_id&&n.value.title?(a(),u("div",$i,[t("a",{href:"https://www.kinopoisk.ru/index.php?kp_query=".concat(encodeURIComponent(n.value.title+(n.value.year?" "+n.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:n.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(V(n.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[m[8]||(m[8]=t("img",{src:vo,alt:"–ö–ü",class:"rating-logo"},null,-1)),t("span",null,v(n.value.rating_kinopoisk?n.value.rating_kinopoisk:"‚Äî"),1),m[9]||(m[9]=t("img",{src:ze,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Ni)])):y("",!0),n.value.imdb_id?(a(),u("div",Di,[t("a",{href:"https://www.imdb.com/title/".concat(n.value.imdb_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:n.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(V(n.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[m[10]||(m[10]=t("img",{src:fo,alt:"IMDb",class:"rating-logo"},null,-1)),t("span",null,v(n.value.rating_imdb?n.value.rating_imdb:"‚Äî"),1),m[11]||(m[11]=t("img",{src:ze,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Fi)])):y("",!0),!n.value.imdb_id&&n.value.title?(a(),u("div",Vi,[t("a",{href:"https://www.imdb.com/find/?q=".concat(encodeURIComponent(n.value.title+(n.value.year?" "+n.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:n.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(V(n.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[m[12]||(m[12]=t("img",{src:fo,alt:"IMDb",class:"rating-logo"},null,-1)),t("span",null,v(n.value.rating_imdb?n.value.rating_imdb:"‚Äî"),1),m[13]||(m[13]=t("img",{src:ze,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Oi)])):y("",!0),n.value.shikimori_id?(a(),u("div",Ki,[t("a",{href:"https://shikimori.one/animes/".concat(n.value.shikimori_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},m[14]||(m[14]=[t("img",{src:zo,alt:"Shiki",class:"rating-logo"},null,-1),t("img",{src:ze,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,qi)])):y("",!0),n.value.imdb_id?(a(),u("div",zi,[t("a",{href:"https://www.imdb.com/title/".concat(n.value.imdb_id,"/parentalguide"),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},m[15]||(m[15]=[t("span",null,"Parents Guide",-1),t("img",{src:ze,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,Wi),t("button",{class:"rating-link nudity-info-btn",onClick:de,title:M.value?"–°–∫—Ä—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é":"–ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ü–µ–Ω–∞—Ö(Sex & Nudity)"},[g.value?(a(),u("i",Zi)):(a(),u("i",Yi)),M.value?(a(),u("div",Qi,[t("div",Xi,v(M.value),1)])):y("",!0)],8,Gi)])):y("",!0)])):y("",!0),(a(),Re(go,{key:d.value,"kp-id":d.value,"movie-info":n.value,"onUpdate:movieInfo":x},null,8,["kp-id","movie-info"])),t("meta",{name:"title-and-year",content:n.value.type==="FILM"&&n.value.year?"".concat(n.value.title," (").concat(n.value.year,")"):n.value.title},null,8,Ji),n.value.name_original?(a(),u("meta",{key:1,name:"original-title",content:n.value.name_original},null,8,ea)):y("",!0),t("div",ta,[m[25]||(m[25]=t("h2",{class:"additional-info-title"},"–ü–æ–¥—Ä–æ–±–Ω–µ–µ",-1)),t("div",oa,[n.value.poster_url?(a(),u("div",na,[t("a",{href:n.value.poster_url,target:"_blank",rel:"noopener noreferrer"},[t("img",{src:n.value.poster_url,alt:"–ü–æ—Å—Ç–µ—Ä —Ñ–∏–ª—å–º–∞",class:"movie-poster"},null,8,la)],8,sa)])):y("",!0),t("div",ia,[t("ul",aa,[n.value.type&&J(mo)[n.value.type]?(a(),u("li",ra,[m[16]||(m[16]=t("strong",null,"–¢–∏–ø:",-1)),X(" "+v(J(mo)[n.value.type]),1)])):y("",!0),n.value.year?(a(),u("li",ua,[m[17]||(m[17]=t("strong",null,"–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞:",-1)),X(" "+v(n.value.year),1)])):y("",!0),n.value.title?(a(),u("li",da,[m[18]||(m[18]=t("strong",null,"–ù–∞–∑–≤–∞–Ω–∏–µ:",-1)),X(" "+v(n.value.title),1)])):y("",!0),n.value.name_original?(a(),u("li",ca,[m[19]||(m[19]=t("strong",null,"–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:",-1)),X(" "+v(n.value.name_original),1)])):y("",!0),n.value.slogan?(a(),u("li",ma,[m[20]||(m[20]=t("strong",null,"–°–ª–æ–≥–∞–Ω:",-1)),X(" "+v(n.value.slogan),1)])):y("",!0),n.value.production_companies?(a(),u("li",va,[m[21]||(m[21]=t("strong",null,"–ü—Ä–æ–¥–∞–∫—à–Ω:",-1)),X(" "+v(n.value.production_companies),1)])):y("",!0),(Z=n.value.countries)!=null&&Z.length?(a(),u("li",fa,[m[22]||(m[22]=t("strong",null,"–°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞:",-1)),X(" "+v(n.value.countries.map($=>$.country).join(", ")),1)])):y("",!0),(le=n.value.genres)!=null&&le.length?(a(),u("li",ka,[m[23]||(m[23]=t("strong",null,"–ñ–∞–Ω—Ä—ã:",-1)),X(" "+v(n.value.genres.map($=>$.genre).join(", ")),1)])):y("",!0),n.value.film_length?(a(),u("li",ga,[m[24]||(m[24]=t("strong",null,"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:",-1)),X(" "+v(W(n.value.film_length)),1)])):y("",!0)]),t("div",ya,[n.value.description?(a(),u("p",ha,v(n.value.description),1)):y("",!0)])])])]),j.value?(a(),u("div",pa,[(a(),Re(Mi,{"movie-id":d.value,key:d.value},null,8,["movie-id"]))])):y("",!0),n.value.staff?(a(),u("div",ba,[t("div",Ca,[oe("ACTOR").length?(a(),u("div",wa,[m[26]||(m[26]=t("h3",{class:"additional-info-title"},"–ê–∫—Ç—ë—Ä—ã",-1)),t("div",_a,[(a(!0),u(ne,null,ge(oe("ACTOR").slice(0,12),$=>(a(),u("div",{key:$.staff_id,class:"staff-item"},[t("a",{href:"https://www.kinopoisk.ru/name/".concat($.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-link",title:$.description||""},[t("img",{src:$.poster_url,alt:$.name_ru,class:"staff-photo"},null,8,Ea),t("span",La,v($.name_ru||$.name_en),1),$.description?(a(),u("span",Ia,v($.description),1)):y("",!0)],8,Ma)]))),128)),t("a",{class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(d.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(oe("ACTOR").length," –∞–∫—Ç–µ—Ä–æ–≤")}," +"+v(oe("ACTOR").length-12),9,Ra)])])):y("",!0),oe("DIRECTOR").length?(a(),u("div",Pa,[m[27]||(m[27]=t("h3",{class:"additional-info-title"},"–†–µ–∂–∏—Å—Å—ë—Ä—ã",-1)),t("div",Sa,[t("div",Ta,[(a(!0),u(ne,null,ge(oe("DIRECTOR").slice(0,5),$=>(a(),u("a",{key:$.staff_id,href:"https://www.kinopoisk.ru/name/".concat($.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},v($.name_ru||$.name_en),9,Aa))),128)),oe("DIRECTOR").length>5?(a(),u("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(d.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(oe("DIRECTOR").length," —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–≤")}," +"+v(oe("DIRECTOR").length-5),9,ja)):y("",!0)])])])):y("",!0),oe("PRODUCER").length?(a(),u("div",Ua,[m[28]||(m[28]=t("h3",{class:"additional-info-title"},"–ü—Ä–æ–¥—é—Å–µ—Ä—ã",-1)),t("div",xa,[t("div",Ba,[(a(!0),u(ne,null,ge(oe("PRODUCER").slice(0,5),$=>(a(),u("a",{key:$.staff_id,href:"https://www.kinopoisk.ru/name/".concat($.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},v($.name_ru||$.name_en),9,Ha))),128)),oe("PRODUCER").length>5?(a(),u("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(d.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(oe("PRODUCER").length," –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤")}," +"+v(oe("PRODUCER").length-5),9,$a)):y("",!0)])])])):y("",!0)])])):y("",!0),ve.value.length&&J(h)?(a(),u("div",Na,[ee(Cs,{videos:ve.value,"active-video-index":E.value,onSelect:A.playTrailer},null,8,["videos","active-video-index","onSelect"])])):y("",!0),B.value.length?(a(),u("div",Da,[m[29]||(m[29]=t("h2",null,"–°–∏–∫–≤–µ–ª—ã –∏ –ø—Ä–∏–∫–≤–µ–ª—ã",-1)),ee(J(ko),{"movies-list":P.value?B.value:B.value.slice(0,L.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),B.value.length>L.value?(a(),u("a",{key:0,class:"expand-circle-button",onClick:m[2]||(m[2]=$=>P.value=!P.value),title:"".concat(P.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(B.value.length,")")},v(P.value?"‚àí":"+".concat(B.value.length-L.value)),9,Fa)):y("",!0)])):y("",!0),G.value.length?(a(),u("div",Va,[m[30]||(m[30]=t("h2",null,"–ü–æ—Ö–æ–∂–∏–µ",-1)),ee(J(ko),{"movies-list":S.value?G.value:G.value.slice(0,L.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),G.value.length>L.value?(a(),u("a",{key:0,class:"expand-circle-button",onClick:m[3]||(m[3]=$=>S.value=!S.value),title:"".concat(S.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(G.value.length,")")},v(S.value?"‚àí":"+".concat(G.value.length-L.value)),9,Oa)):y("",!0)])):y("",!0)])):y("",!0)])]),ee(nt,{ref_key:"notificationRef",ref:te},null,512)],64)}}},Xa=_e(Ka,[["__scopeId","data-v-7724dca3"]]);export{Xa as default};
