import{_ as Ee,r as p,c as B,b as n,d as l,e,s as z,t as a,K as oe,g as v,L as _e,n as _,q as Xt,u as Ne,i as Zt,N as jt,z as Qt,l as $e,o as De,O as Jt,x as me,E as eo,f as ce,P as We,m as M,Q as A,y as L,U as $,R as fo,D as Fe,S as ze,V as ko,W as to,X as yo,Y as zt,Z as go,$ as bo,a as _o,a0 as Vt,a1 as Wt,a2 as $o,a3 as Ft,a4 as ho,a5 as wo,a6 as Co}from"./index-mL9ewi2J.js";import{S as oo,_ as Mo,a as Ut,b as qt,M as Yt}from"./MovieList-Cn4KC2Mm.js";import{N as Ue}from"./ToastMessage-I1vjXG0t.js";import{u as Ao,S as Io,a as To}from"./trailer-BivvqPiW.js";const be="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVR4nO2ZQUoDMRSGR7eewHoFsVS0HkUUXNXqASqK2EURBPFIVRe6c+UN1CvUXWvbT4KvMAwzNnnJdCrmg1BKad7/v7y0b5IkiUQiCwGoAx3gQjEugZ0qxTeAIX6MKjMBnBOGS62AVWAPOHVYdlMu9YArYOhphLeBT+ALmOKGEd2QubaAK+B2zngFxt4GgDXgGZjgR8ch5oEkCi8DkvlnRcYLV0Apfqw10M7JvPkV6AN3FmVwK+WyZRnvMEe8ef/ibECyb2o+zRuwnpQAxeLNivQ0BvYyE46qEJ/8fK4ycJKp/X4V4n0MdDNfukkqEO9jwP1LDgD7BeKPgmgp04CL+KUz4Cp+qQxoxC+NAdsNm4c0hWkukkUa8BGfegiadbFDq3/2UAZ8xc+QVvzMtqcKYkBaZ5/MN5xEl2DgLGDZ1KswsC09FPJqXTZoNm5oA6kyMGI2FxqfkluJ0uMTDfhBXAHiHvCCWEL8/RLqlv1MPCf+TSZ+13WC7KnEfWlqcwAeU7GNjnbiQsG5UC1ZAEAt1UMhOpquk6zknMy9l20C2AA+MnEHRo9msuOCs9EH4Fp5TVQ0rqVs0plH4re02Qh1Oq1lCjypsp+5H3gKcD/gykTirqnFZ/ZDy+OGxpapzD+QePrM/2KkKfcGPcv7AdvRkz23G1x4JPIP+AY3r/ywUk/2JAAAAABJRU5ErkJggg==",Eo="/reyohoho/assets/icon-shikimori-DGvXK9Jc.svg",Ve=k=>{const b=document.createElement("div");b.style.position="fixed",b.style.top="0",b.style.left="0",b.style.width="100%",b.style.height="100%",b.style.backgroundColor="rgba(0, 0, 0, 0.8)",b.style.color="white",b.style.display="flex",b.style.justifyContent="center",b.style.alignItems="center",b.style.fontSize="2rem",b.style.zIndex="99000",b.textContent=k,document.body.appendChild(b),setTimeout(()=>{document.body.removeChild(b)},2e3)},Ro={class:"modal-content"},Po={key:0},Lo={key:1},So={class:"players-list"},xo=["onClick"],No={key:0,class:"warning-icon material-icons",title:"Внимание!"},Do={key:0},Ho={key:0,class:"warning-icon material-icons",title:"Внимание!"},Oo={key:1},Bo={key:0,class:"warning-icon material-icons",title:"Внимание!"},Ko=["onClick"],zo={key:0,class:"warning-icon material-icons",title:"Внимание!"},Vo={__name:"PlayerModal",props:{players:{type:Array,required:!0},selectedPlayer:{type:Object,default:null}},emits:["close","select"],setup(k,{emit:b}){const D=k,S=b,I=p(null),W=B(()=>D.players.filter(i=>!w(i)&&!o(i))),h=B(()=>D.players.some(i=>w(i))),T=B(()=>D.players.some(i=>o(i))),w=i=>i.key.toUpperCase().includes("HDREZKA"),o=i=>i.key.toUpperCase().includes("KODIK"),E=i=>i.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"").replace(/KODIK>/,"").trim(),x=i=>{S("select",i),S("close")},F=i=>D.selectedPlayer&&D.selectedPlayer.key===i.key,C=i=>D.selectedPlayer?i==="hdrezka"&&w(D.selectedPlayer)||i==="kodik"&&o(D.selectedPlayer):!1,N=i=>{I.value=i},U=()=>{I.value=null},y=i=>{let c=D.players.filter(g=>i==="hdrezka"&&w(g)||i==="kodik"&&o(g));return i==="kodik"?c.sort((g,se)=>E(g.translate).localeCompare(E(se.translate))):c},m=i=>y(i).some(c=>c.warning);return(i,c)=>(l(),n("div",{class:"modal",onClick:c[3]||(c[3]=Xt(g=>i.$emit("close"),["self"]))},[e("div",Ro,[e("button",{class:"close",onClick:c[0]||(c[0]=g=>i.$emit("close"))},"×"),I.value?(l(),n("h2",Lo,[e("button",{class:"back-btn",onClick:U},"← Назад"),z(" "+a(I.value==="hdrezka"?"ReYohoho - HDrezka":"Kodik"),1)])):(l(),n("h2",Po,"Выберите плеер")),e("ul",So,[I.value?(l(!0),n(oe,{key:1},_e(y(I.value),g=>(l(),n("li",{key:g.key},[e("button",{class:_(["player-item",{active:F(g)}]),onClick:se=>x(g)},[z(a(E(g.translate))+" ",1),g.warning?(l(),n("span",zo,"warning")):v("",!0)],10,Ko)]))),128)):(l(),n(oe,{key:0},[(l(!0),n(oe,null,_e(W.value,g=>(l(),n("li",{key:g.key},[e("button",{class:_(["player-item",{active:F(g)}]),onClick:se=>x(g)},[z(a(E(g.translate))+" ",1),g.warning?(l(),n("span",No,"warning")):v("",!0)],10,xo)]))),128)),h.value?(l(),n("li",Do,[e("button",{class:_(["group-item",{active:C("hdrezka")}]),onClick:c[1]||(c[1]=g=>N("hdrezka"))},[c[4]||(c[4]=e("span",{class:"material-icons group-icon"},"folder",-1)),c[5]||(c[5]=z(" ReYohoho - HDrezka ")),m("hdrezka")?(l(),n("span",Ho,"warning")):v("",!0)],2)])):v("",!0),T.value?(l(),n("li",Oo,[e("button",{class:_(["group-item",{active:C("kodik")}]),onClick:c[2]||(c[2]=g=>N("kodik"))},[c[6]||(c[6]=e("span",{class:"material-icons group-icon"},"folder",-1)),c[7]||(c[7]=z(" Kodik ")),m("kodik")?(l(),n("span",Bo,"warning")):v("",!0)],2)])):v("",!0)],64))])])]))}},Wo=Ee(Vo,[["__scopeId","data-v-753ce7a2"]]),Fo={class:"players-list"},Uo=["src"],qo={key:1,class:"controls"},Yo={class:"main-controls"},Go={class:"material-icons"},Xo={class:"list-button-item"},Zo={class:"material-icons"},jo={class:"list-button-item"},Qo={class:"material-icons"},Jo={class:"list-button-item"},es={class:"list-button-item"},ts={class:"material-icons"},os={class:"list-button-item"},ss={class:"material-icons"},ls={class:"tooltip-container"},ns={class:"material-icons"},is={class:"tooltip-container"},as={class:"tooltip-container"},rs={class:"tooltip-container"},us={class:"tooltip-container"},vs={class:"material-symbols-outlined"},ds={class:"custom-tooltip"},cs={class:"tooltip-container"},ms={class:"current-ratio"},ps=["onClick"],fs={key:0,class:"tooltip-container"},ks={class:"custom-tooltip"},ys={key:1,class:"tooltip-container"},gs={class:"custom-tooltip"},bs={key:0,class:"desktop-list-buttons"},_s={class:"tooltip-container"},$s={class:"material-icons"},hs={class:"custom-tooltip"},ws={class:"tooltip-container"},Cs={class:"material-icons"},Ms={class:"custom-tooltip"},As={class:"tooltip-container"},Is={class:"custom-tooltip"},Ts={class:"tooltip-container"},Es={class:"material-icons"},Rs={class:"custom-tooltip"},Ps={class:"tooltip-container"},Ls={class:"material-icons"},Ss={class:"custom-tooltip"},xs={key:1,class:"mobile-list-buttons"},Ns={class:"tooltip-container"},Ds={class:"material-icons"},Hs={class:"custom-tooltip"},Os={class:"tooltip-container"},Bs={class:"material-icons"},Ks={class:"custom-tooltip"},zs={class:"tooltip-container"},Vs={class:"custom-tooltip"},Ws={class:"tooltip-container"},Fs={class:"material-icons"},Us={class:"custom-tooltip"},qs={class:"tooltip-container"},Ys={class:"material-icons"},Gs={class:"custom-tooltip"},Xs={__name:"PlayerComponent",props:{kpId:String,movieInfo:{type:Object,default:()=>({})}},emits:["update:selectedPlayer","update:movieInfo"],setup(k,{emit:b}){const D=Ne(),S=Ao(),I=Zt(),W=jt(),h=Qt(),T=p(W.params.kp_id),w=k,o=b,E=p([]),x=p(null),F=p(!0),C=p(!1),N=p(!1),U=p(null),y=p(null),m=p(!1),i=p(""),c=p(null),g=p(window.innerHeight*.9),se=B(()=>"".concat(g.value,"px")),Q=B(()=>D.isMobile),q=B(()=>!!window.electronAPI),f=p(null),le=p(!1);let pe=null;const j=p(null),fe=p(null),H=p(null),J=()=>{if(!fe.value||!H.value)return;const u=fe.value.getBoundingClientRect(),t=H.value.getBoundingClientRect(),O=window.innerHeight;u.bottom+t.height>O?(H.value.style.top="auto",H.value.style.bottom="100%",H.value.style.marginTop="0",H.value.style.marginBottom="12px",H.value.style.transform="translateX(-50%)"):(H.value.style.top="100%",H.value.style.bottom="auto",H.value.style.marginTop="12px",H.value.style.marginBottom="0",H.value.style.transform="translateX(-50%)")},P=u=>{f.value=u,le.value=!1,clearTimeout(pe),ze(()=>{J()})},ke=()=>{le.value||(pe=setTimeout(()=>{f.value=null},300))},ye=()=>{le.value=!0,clearTimeout(pe)},ge=()=>{le.value=!1,f.value=null},Y=B({get:()=>S.aspectRatio,set:u=>S.updateAspectRatio(u)}),d=B({get:()=>S.isCentered,set:u=>S.updateCentering(u)}),s=B(()=>{var u,t,O,Z,ie,ae,re,ue,ve,de;return((t=(u=w.movieInfo)==null?void 0:u.lists)==null?void 0:t.isFavorite)||((Z=(O=w.movieInfo)==null?void 0:O.lists)==null?void 0:Z.isWatching)||((ae=(ie=w.movieInfo)==null?void 0:ie.lists)==null?void 0:ae.isLater)||((ue=(re=w.movieInfo)==null?void 0:re.lists)==null?void 0:ue.isCompleted)||((de=(ve=w.movieInfo)==null?void 0:ve.lists)==null?void 0:de.isAbandoned)}),K=B(()=>S.preferredPlayer),G=p(0),ee=u=>u.toUpperCase(),R=()=>{if(C.value||!y.value)return;const[u,t]=Y.value.split(":").map(Number);g.value=window.innerHeight*.9,G.value=Math.min(y.value.clientWidth*(t/u),g.value)},Re=B(()=>{if(C.value)return{};const[u,t]=Y.value.split(":").map(Number),O=g.value*(u/t);return{width:"100%",maxWidth:"".concat(O,"px"),maxHeight:se.value,margin:"0 auto",overflow:"hidden"}}),Pe=B(()=>{const[u,t]=Y.value.split(":").map(Number);return{position:"relative",width:"100%",paddingTop:"".concat(t/u*100,"%")}}),ne=()=>{y.value&&setTimeout(()=>{ze(()=>{y.value.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})},500)},te=async()=>{try{i.value="",c.value=null;const u=await fo(w.kpId);if(E.value=Object.entries(u).map(([t,O])=>({key:t.toUpperCase(),...O})),E.value.length>0){if(K.value){const t=ee(K.value),O=E.value.find(Z=>ee(Z.key)===t);x.value=O||E.value[0]}else x.value=E.value[0];o("update:selectedPlayer",x.value)}}catch(u){const{message:t,code:O}=Fe(u);i.value=t,c.value=O,console.error("Ошибка при загрузке плееров:",u)}},X=()=>{m.value=!0},he=()=>{m.value=!1},we=u=>{var t;if(((t=x.value)==null?void 0:t.key)===u.key){he();return}x.value=u,F.value=!0,S.updatePreferredPlayer(ee(u.key)),o("update:selectedPlayer",u)},He=()=>{q.value?window.electronAPI.sendHotKey("F2"):(Ve("Доступно только в приложении ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},so=()=>{q.value?window.electronAPI.sendHotKey("F3"):(Ve("Доступно только в приложении ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},lo=()=>{q.value?window.electronAPI.sendHotKey("F4"):(Ve("Доступно только в приложении ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},Le=()=>{C.value=!C.value,C.value?(window.addEventListener("mousemove",Oe),document.addEventListener("keydown",Be),document.body.classList.add("no-scroll")):(window.removeEventListener("mousemove",Oe),document.removeEventListener("keydown",Be),document.body.classList.remove("no-scroll")),N.value=C.value,ze(()=>ne())},qe=p(null),Oe=()=>{qe.value=setTimeout(()=>{clearTimeout(qe.value),N.value=!1},4e3),N.value=!0},Se=B(()=>D.dimmingEnabled),no=()=>{C.value||D.toggleDimming()},Be=u=>{(u.key==="Escape"&&C.value||u.altKey&&u.keyCode===84)&&Le()},Ye=u=>{Y.value=u,setTimeout(()=>{d.value&&ne()},310)},io=()=>{const u="reyohoho://#".concat(T.value);try{window.location.href=u}catch(t){console.error("Ошибка при открытии ссылки:",t)}},ao=()=>{const u=window.location.href;navigator.clipboard.writeText(u).then(()=>{}),j.value.showNotification("Ссылка на фильм скопирована")},ro=()=>{F.value=!1};function uo(u){return u.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"HDRezka - ").replace(/KODIK>/,"Kodik - ").trim()}$e(x,u=>{u&&(F.value=!0,S.updatePreferredPlayer(ee(u.key)),o("update:selectedPlayer",u))}),$e(()=>W.params.kp_id,async u=>{u&&u!==T.value&&(T.value=u,d.value&&ne())},{immediate:!0});const xe=["16:9","12:5","4:3"],vo=()=>{const t=(xe.indexOf(Y.value)+1)%xe.length;Ye(xe[t])},co=u=>{var O,Z,ie,ae,re,ue,ve,de,Ce,Me,Ae,Ie,Te;return(Te={[$.FAVORITE]:((Z=(O=w.movieInfo)==null?void 0:O.lists)==null?void 0:Z.isFavorite)||!1,[$.HISTORY]:((ae=(ie=w.movieInfo)==null?void 0:ie.lists)==null?void 0:ae.isHistory)||!1,[$.LATER]:((ue=(re=w.movieInfo)==null?void 0:re.lists)==null?void 0:ue.isLater)||!1,[$.COMPLETED]:((de=(ve=w.movieInfo)==null?void 0:ve.lists)==null?void 0:de.isCompleted)||!1,[$.ABANDONED]:((Me=(Ce=w.movieInfo)==null?void 0:Ce.lists)==null?void 0:Me.isAbandoned)||!1,[$.WATCHING]:((Ie=(Ae=w.movieInfo)==null?void 0:Ae.lists)==null?void 0:Ie.isWatching)||!1}[u])!=null?Te:!1},V=async u=>{if(!I.token){j.value.showNotification('Необходимо <a class="auth-link">авторизоваться</a>',5e3,{onClick:mo});return}try{const t={[$.FAVORITE]:"избранное",[$.HISTORY]:"историю",[$.LATER]:'список "Смотреть позже"',[$.COMPLETED]:'список "Просмотрено"',[$.ABANDONED]:'список "Брошено"',[$.WATCHING]:'список "Смотрю"'};co(u)?(await ko(T.value,u),j.value.showNotification("Удалено из ".concat(t[u]))):(await to(T.value,u),j.value.showNotification("Добавлено в ".concat(t[u])))}catch(t){const{message:O,code:Z}=Fe(t);j.value.showNotification("".concat(O," ").concat(Z))}o("update:movieInfo")},mo=()=>{h.push("/login")},Ke=B(()=>S.showFavoriteTooltip),po=()=>{h.push("/settings"),ge()};return De(()=>{F.value=!0,te(),Q.value&&(Y.value="4:3"),R(),window.addEventListener("resize",R),window.addEventListener("resize",J),d.value&&ne()}),Jt(()=>{window.removeEventListener("resize",R),window.removeEventListener("resize",J),window.removeEventListener("mousemove",Oe),document.removeEventListener("keydown",Be),document.body.classList.remove("no-scroll")}),(u,t)=>{var O,Z,ie,ae,re,ue,ve,de,Ce,Me,Ae,Ie,Te,Ge,Xe,Ze,je,Qe,Je,et,tt,ot,st,lt,nt,it,at,rt,ut,vt,dt,ct,mt,pt,ft,kt,yt,gt,bt,_t,$t,ht,wt,Ct,Mt,At,It,Tt,Et,Rt,Pt,Lt,St,xt,Nt,Dt,Ht,Ot,Bt,Kt;return i.value?(l(),me(eo,{key:0,message:i.value,code:c.value},null,8,["message","code"])):(l(),n(oe,{key:1},[e("div",Fo,[t[54]||(t[54]=e("span",null,"Плеер:",-1)),e("button",{class:"player-btn",onClick:X},a(x.value?uo(x.value.translate).toUpperCase():"Загрузка плееров..."),1)]),m.value?(l(),me(Wo,{key:0,players:E.value,"selected-player":x.value,onClose:he,onSelect:we},null,8,["players","selected-player"])):v("",!0),e("div",{ref_key:"containerRef",ref:y,class:_(["player-container",{"theater-mode":C.value}]),style:We(C.value?{}:Re.value)},[e("div",{class:"iframe-wrapper",style:We(C.value?{}:Pe.value)},[M(e("iframe",{ref_key:"playerIframe",ref:U,src:(O=x.value)==null?void 0:O.iframe,frameborder:"0",allowfullscreen:"",webkitallowfullscreen:"",class:_(["responsive-iframe",{"theater-mode-unlock":N.value,"theater-mode-lock":C.value,dimmed:Se.value}]),onLoad:ro},null,42,Uo),[[A,!F.value&&((Z=x.value)==null?void 0:Z.iframe)]]),F.value?(l(),me(oo,{key:0})):v("",!0)],4),C.value?(l(),n("button",{key:0,class:_(["close-theater-btn",{visible:N.value}]),onClick:Le}," ✖ ",2)):v("",!0)],6),C.value?v("",!0):(l(),n("div",qo,[e("div",Yo,[Q.value?v("",!0):(l(),n("div",{key:0,ref_key:"tooltipContainer",ref:fe,class:"tooltip-container list-buttons-container"},[Ke.value?(l(),n("button",{key:0,class:_(["favorite-btn",{active:(ae=(ie=k.movieInfo)==null?void 0:ie.lists)==null?void 0:ae.isFavorite}]),onMouseenter:t[0]||(t[0]=r=>P("favorite")),onMouseleave:ke,onClick:t[1]||(t[1]=r=>V(L($).FAVORITE))},[e("span",Go,a((ue=(re=k.movieInfo)==null?void 0:re.lists)!=null&&ue.isFavorite?"favorite":"favorite_border"),1),e("span",{class:_(["material-icons dropdown-arrow",{highlighted:s.value}])},"expand_more",2)],34)):v("",!0),M(e("div",{ref_key:"tooltip",ref:H,class:"custom-tooltip advanced-tooltip list-buttons-dropdown",onMouseenter:ye,onMouseleave:ge},[e("div",Xo,[e("button",{class:_(["favorite-btn",{active:(de=(ve=k.movieInfo)==null?void 0:ve.lists)==null?void 0:de.isFavorite}]),onClick:t[2]||(t[2]=r=>V(L($).FAVORITE))},[e("span",Zo,a((Me=(Ce=k.movieInfo)==null?void 0:Ce.lists)!=null&&Me.isFavorite?"favorite":"favorite_border"),1),t[55]||(t[55]=e("span",{class:"button-label"},"В избранное",-1))],2)]),e("div",jo,[e("button",{class:_(["watching-btn",{active:(Ie=(Ae=k.movieInfo)==null?void 0:Ae.lists)==null?void 0:Ie.isWatching}]),onClick:t[3]||(t[3]=r=>V(L($).WATCHING))},[e("span",Qo,a((Ge=(Te=k.movieInfo)==null?void 0:Te.lists)!=null&&Ge.isWatching?"visibility_off":"visibility"),1),t[56]||(t[56]=e("span",{class:"button-label"},"Смотрю",-1))],2)]),e("div",Jo,[e("button",{class:_(["later-btn",{active:(Ze=(Xe=k.movieInfo)==null?void 0:Xe.lists)==null?void 0:Ze.isLater}]),onClick:t[4]||(t[4]=r=>V(L($).LATER))},t[57]||(t[57]=[e("span",{class:"material-icons"},"watch_later",-1),e("span",{class:"button-label"},"Смотреть позже",-1)]),2)]),e("div",es,[e("button",{class:_(["completed-btn",{active:(Qe=(je=k.movieInfo)==null?void 0:je.lists)==null?void 0:Qe.isCompleted}]),onClick:t[5]||(t[5]=r=>V(L($).COMPLETED))},[e("span",ts,a((et=(Je=k.movieInfo)==null?void 0:Je.lists)!=null&&et.isCompleted?"check_circle":"check_circle_outline"),1),t[58]||(t[58]=e("span",{class:"button-label"},"Просмотрено",-1))],2)]),e("div",os,[e("button",{class:_(["abandoned-btn",{active:(ot=(tt=k.movieInfo)==null?void 0:tt.lists)==null?void 0:ot.isAbandoned}]),onClick:t[6]||(t[6]=r=>V(L($).ABANDONED))},[e("span",ss,a(((lt=(st=k.movieInfo)==null?void 0:st.lists)!=null&&lt.isAbandoned,"not_interested")),1),t[59]||(t[59]=e("span",{class:"button-label"},"Брошено",-1))],2)]),e("div",{class:"tooltip-hint"},[t[61]||(t[61]=e("span",{class:"material-icons"},"settings",-1)),e("span",null,[t[60]||(t[60]=z("Стиль отображения можно изменить в ")),e("a",{class:"settings-link",onClick:po},"настройках")])])],544),[[A,f.value==="favorite"&&Ke.value]])],512)),Q.value?v("",!0):(l(),n(oe,{key:1},[e("div",ls,[e("button",{class:_(["dimming-btn",{active:Se.value}]),onMouseenter:t[7]||(t[7]=r=>P("dimming")),onMouseleave:t[8]||(t[8]=r=>f.value=null),onClick:no},[e("span",ns,a(Se.value?"light_mode":"dark_mode"),1)],34),M(e("div",{class:"custom-tooltip"},a(Se.value?"Отключить затемнение":"Включить затемнение"),513),[[A,f.value==="dimming"]])]),e("div",is,[e("button",{class:_(["blur-btn",{"electron-only":!q.value}]),onMouseenter:t[9]||(t[9]=r=>P("blur")),onMouseleave:t[10]||(t[10]=r=>f.value=null),onClick:He},t[62]||(t[62]=[e("span",{class:"material-icons"},"blur_on",-1)]),34),M(e("div",{class:"custom-tooltip"},a(q.value?"Блюр":"Блюр, функция доступна в приложении"),513),[[A,f.value==="blur"]])]),e("div",as,[e("button",{class:_(["material-symbols-outlined",{"electron-only":!q.value}]),onMouseenter:t[11]||(t[11]=r=>P("compressor")),onMouseleave:t[12]||(t[12]=r=>f.value=null),onClick:so},t[63]||(t[63]=[e("span",{class:"material-icons"},"graphic_eq",-1)]),34),M(e("div",{class:"custom-tooltip"},a(q.value?"Компрессор":"Компрессор, функция доступна в приложении"),513),[[A,f.value==="compressor"]])]),e("div",rs,[e("button",{class:_(["mirror-btn",{"electron-only":!q.value}]),onMouseenter:t[13]||(t[13]=r=>P("mirror")),onMouseleave:t[14]||(t[14]=r=>f.value=null),onClick:lo},t[64]||(t[64]=[e("span",{class:"material-icons"},"flip",-1)]),34),M(e("div",{class:"custom-tooltip"},a(q.value?"Зеркало":"Зеркало, функция доступна в приложении"),513),[[A,f.value==="mirror"]])]),e("div",us,[e("button",{class:"theater-mode-btn",onMouseenter:t[15]||(t[15]=r=>P("theater")),onMouseleave:t[16]||(t[16]=r=>f.value=null),onClick:Le},[e("span",vs,a(C.value?"fullscreen_exit":"aspect_ratio"),1)],32),M(e("div",ds,[z(a(C.value?"Выйти из театрального режима":"Театральный режим")+" ",1),t[65]||(t[65]=e("span",{class:"shortcut-hint"},"Alt+T",-1))],512),[[A,f.value==="theater"]])]),e("div",cs,[e("button",{class:"aspect-ratio-dropdown-btn",onMouseenter:t[17]||(t[17]=r=>P("aspect_ratio")),onMouseleave:ke,onClick:vo},[e("span",ms,a(Y.value),1)],32),M(e("div",{class:"custom-tooltip advanced-tooltip aspect-ratio-dropdown",onMouseenter:ye,onMouseleave:ge},[(l(),n(oe,null,_e(xe,r=>e("div",{key:r,class:_(["aspect-ratio-option",{active:Y.value===r}]),onClick:gn=>Ye(r)},a(r),11,ps)),64))],544),[[A,f.value==="aspect_ratio"]])]),e("div",{class:"tooltip-container",onMouseenter:t[19]||(t[19]=r=>P("centering")),onMouseleave:ke},[e("button",{class:"center-btn",onClick:ne},t[66]||(t[66]=[e("span",{class:"material-icons"},"center_focus_strong",-1)])),M(e("div",{class:"custom-tooltip advanced-tooltip",onMouseenter:ye,onMouseleave:ge},[t[67]||(t[67]=z(" Отцентрировать плеер ")),ce(Io,{modelValue:d.value,"onUpdate:modelValue":t[18]||(t[18]=r=>d.value=r),title:"Автоцентрирование плеера"},null,8,["modelValue"]),t[68]||(t[68]=e("span",{class:"tooltip-title"},"Автоцентрирование плеера",-1))],544),[[A,f.value==="centering"]])],32),q.value?v("",!0):(l(),n("div",fs,[e("button",{class:"app-link-btn",onMouseenter:t[20]||(t[20]=r=>P("app_link")),onMouseleave:t[21]||(t[21]=r=>f.value=null),onClick:io},t[69]||(t[69]=[e("span",{class:"material-icons"},"open_in_new",-1)]),32),M(e("div",ks," Открыть в приложении ",512),[[A,f.value==="app_link"]])])),q.value?(l(),n("div",ys,[e("button",{class:"copy-link-btn",onMouseenter:t[22]||(t[22]=r=>P("copy_link")),onMouseleave:t[23]||(t[23]=r=>f.value=null),onClick:ao},t[70]||(t[70]=[e("span",{class:"material-icons"},"content_copy",-1)]),32),M(e("div",gs," Скопировать ссылку ",512),[[A,f.value==="copy_link"]])])):v("",!0)],64))]),!Q.value&&!Ke.value?(l(),n("div",bs,[e("div",_s,[e("button",{class:_(["favorite-btn",{active:(it=(nt=k.movieInfo)==null?void 0:nt.lists)==null?void 0:it.isFavorite}]),onMouseenter:t[24]||(t[24]=r=>P("favorite")),onMouseleave:t[25]||(t[25]=r=>f.value=null),onClick:t[26]||(t[26]=r=>V(L($).FAVORITE))},[e("span",$s,a((rt=(at=k.movieInfo)==null?void 0:at.lists)!=null&&rt.isFavorite?"favorite":"favorite_border"),1)],34),M(e("div",hs,a("В избранное"),512),[[A,f.value==="favorite"]])]),e("div",ws,[e("button",{class:_(["watching-btn",{active:(vt=(ut=k.movieInfo)==null?void 0:ut.lists)==null?void 0:vt.isWatching}]),onMouseenter:t[27]||(t[27]=r=>P("watching")),onMouseleave:t[28]||(t[28]=r=>f.value=null),onClick:t[29]||(t[29]=r=>V(L($).WATCHING))},[e("span",Cs,a((ct=(dt=k.movieInfo)==null?void 0:dt.lists)!=null&&ct.isWatching?"visibility_off":"visibility"),1)],34),M(e("div",Ms,a("Смотрю"),512),[[A,f.value==="watching"]])]),e("div",As,[e("button",{class:_(["later-btn",{active:(pt=(mt=k.movieInfo)==null?void 0:mt.lists)==null?void 0:pt.isLater}]),onMouseenter:t[30]||(t[30]=r=>P("later")),onMouseleave:t[31]||(t[31]=r=>f.value=null),onClick:t[32]||(t[32]=r=>V(L($).LATER))},t[71]||(t[71]=[e("span",{class:"material-icons"},"watch_later",-1)]),34),M(e("div",Is,a("Смотреть позже"),512),[[A,f.value==="later"]])]),e("div",Ts,[e("button",{class:_(["completed-btn",{active:(kt=(ft=k.movieInfo)==null?void 0:ft.lists)==null?void 0:kt.isCompleted}]),onMouseenter:t[33]||(t[33]=r=>P("completed")),onMouseleave:t[34]||(t[34]=r=>f.value=null),onClick:t[35]||(t[35]=r=>V(L($).COMPLETED))},[e("span",Es,a((gt=(yt=k.movieInfo)==null?void 0:yt.lists)!=null&&gt.isCompleted?"check_circle":"check_circle_outline"),1)],34),M(e("div",Rs,a("Просмотрено"),512),[[A,f.value==="completed"]])]),e("div",Ps,[e("button",{class:_(["abandoned-btn",{active:(_t=(bt=k.movieInfo)==null?void 0:bt.lists)==null?void 0:_t.isAbandoned}]),onMouseenter:t[36]||(t[36]=r=>P("abandoned")),onMouseleave:t[37]||(t[37]=r=>f.value=null),onClick:t[38]||(t[38]=r=>V(L($).ABANDONED))},[e("span",Ls,a(((ht=($t=k.movieInfo)==null?void 0:$t.lists)!=null&&ht.isAbandoned,"not_interested")),1)],34),M(e("div",Ss,a("Брошено"),512),[[A,f.value==="abandoned"]])])])):Q.value?(l(),n("div",xs,[e("div",Ns,[e("button",{class:_(["favorite-btn",{active:(Ct=(wt=k.movieInfo)==null?void 0:wt.lists)==null?void 0:Ct.isFavorite}]),onMouseenter:t[39]||(t[39]=r=>P("favorite")),onMouseleave:t[40]||(t[40]=r=>f.value=null),onClick:t[41]||(t[41]=r=>V(L($).FAVORITE))},[e("span",Ds,a((At=(Mt=k.movieInfo)==null?void 0:Mt.lists)!=null&&At.isFavorite?"favorite":"favorite_border"),1)],34),M(e("div",Hs,a("В избранное"),512),[[A,f.value==="favorite"]])]),e("div",Os,[e("button",{class:_(["watching-btn",{active:(Tt=(It=k.movieInfo)==null?void 0:It.lists)==null?void 0:Tt.isWatching}]),onMouseenter:t[42]||(t[42]=r=>P("watching")),onMouseleave:t[43]||(t[43]=r=>f.value=null),onClick:t[44]||(t[44]=r=>V(L($).WATCHING))},[e("span",Bs,a((Rt=(Et=k.movieInfo)==null?void 0:Et.lists)!=null&&Rt.isWatching?"visibility_off":"visibility"),1)],34),M(e("div",Ks,a("Смотрю"),512),[[A,f.value==="watching"]])]),e("div",zs,[e("button",{class:_(["later-btn",{active:(Lt=(Pt=k.movieInfo)==null?void 0:Pt.lists)==null?void 0:Lt.isLater}]),onMouseenter:t[45]||(t[45]=r=>P("later")),onMouseleave:t[46]||(t[46]=r=>f.value=null),onClick:t[47]||(t[47]=r=>V(L($).LATER))},t[72]||(t[72]=[e("span",{class:"material-icons"},"watch_later",-1)]),34),M(e("div",Vs,a("Смотреть позже"),512),[[A,f.value==="later"]])]),e("div",Ws,[e("button",{class:_(["completed-btn",{active:(xt=(St=k.movieInfo)==null?void 0:St.lists)==null?void 0:xt.isCompleted}]),onMouseenter:t[48]||(t[48]=r=>P("completed")),onMouseleave:t[49]||(t[49]=r=>f.value=null),onClick:t[50]||(t[50]=r=>V(L($).COMPLETED))},[e("span",Fs,a((Dt=(Nt=k.movieInfo)==null?void 0:Nt.lists)!=null&&Dt.isCompleted?"check_circle":"check_circle_outline"),1)],34),M(e("div",Us,a("Просмотрено"),512),[[A,f.value==="completed"]])]),e("div",qs,[e("button",{class:_(["abandoned-btn",{active:(Ot=(Ht=k.movieInfo)==null?void 0:Ht.lists)==null?void 0:Ot.isAbandoned}]),onMouseenter:t[51]||(t[51]=r=>P("abandoned")),onMouseleave:t[52]||(t[52]=r=>f.value=null),onClick:t[53]||(t[53]=r=>V(L($).ABANDONED))},[e("span",Ys,a(((Kt=(Bt=k.movieInfo)==null?void 0:Bt.lists)!=null&&Kt.isAbandoned,"not_interested")),1)],34),M(e("div",Gs,a("Брошено"),512),[[A,f.value==="abandoned"]])])])):v("",!0)])),ce(Ue,{ref_key:"notificationRef",ref:j},null,512)],64))}}},Gt=Ee(Xs,[["__scopeId","data-v-88f4cda0"]]),Zs={key:0,class:"carousel-container"},js={class:"carousel-wrapper"},Qs=["onClick"],Js=["src","alt"],el={class:"video-name"},tl={key:0,class:"video-player"},ol=["src"],sl={__name:"TrailerCarousel",props:{videos:{type:Array,required:!0},activeVideoIndex:{type:Number,default:null}},emits:["select"],setup(k,{emit:b}){const D=Ne(),S=B(()=>D.isMobile),I=k,W=b,h=p(I.activeVideoIndex),T=p(null),w=p(!1),o=p(!1),E=()=>{if(!T.value)return;const{scrollLeft:y,scrollWidth:m,clientWidth:i}=T.value;w.value=y>0,o.value=y<m-i-1},x=y=>{if(!T.value)return;const m=T.value.querySelector(".carousel-item");if(!m)return;const i=m.clientWidth+16;T.value.scrollBy({left:i*y,behavior:"smooth"})},F=y=>{h.value=y,W("select",I.videos[y])},C=()=>E(),N=p([]),U=async y=>{try{return(await fetch("https://img.youtube.com/vi/".concat(y,"/0.jpg"))).ok}catch(m){return!1}};return De(async()=>{const y=I.videos.map(async i=>await U(i.videoId)?i:null),m=await Promise.all(y);N.value=m.filter(Boolean),E(),window.addEventListener("resize",C)}),$e(()=>I.videos,async y=>{const m=y.map(async c=>await U(c.videoId)?c:null),i=await Promise.all(m);N.value=i.filter(Boolean)}),$e(()=>I.activeVideoIndex,y=>{h.value=y}),Jt(()=>{window.removeEventListener("resize",C)}),(y,m)=>N.value.length?(l(),n("div",Zs,[m[4]||(m[4]=e("h2",null,"Трейлеры (YouTube)",-1)),e("div",js,[M(e("button",{class:"scroll-button left",onClick:m[0]||(m[0]=i=>x(-1))},m[2]||(m[2]=[e("span",{class:"material-symbols-outlined"},"arrow_back_ios",-1)]),512),[[A,!S.value&&w.value]]),e("div",{ref_key:"carousel",ref:T,class:"carousel",onScroll:E},[(l(!0),n(oe,null,_e(N.value,(i,c)=>(l(),n("div",{key:c,class:"carousel-item",onClick:g=>F(c)},[e("img",{src:"https://img.youtube.com/vi/".concat(i.videoId,"/0.jpg"),alt:i.name},null,8,Js),e("div",el,a(i.name),1)],8,Qs))),128))],544),M(e("button",{class:"scroll-button right",onClick:m[1]||(m[1]=i=>x(1))},m[3]||(m[3]=[e("span",{class:"material-symbols-outlined"},"arrow_forward_ios",-1)]),512),[[A,!S.value&&o.value]])]),h.value!==null?(l(),n("div",tl,[e("iframe",{src:k.videos[h.value].iframeUrl,frameborder:"0",allowfullscreen:""},null,8,ol)])):v("",!0)])):v("",!0)}},ll=Ee(sl,[["__scopeId","data-v-e60b5c29"]]),nl={class:"rating-container"},il={class:"rating-display"},al={class:"average-rating"},rl={class:"rating-numbers"},ul=["onClick","onMouseenter"],vl={__name:"MovieRating",props:{kpId:{type:String,required:!0},showDash:{type:Boolean,default:!1}},setup(k){const b=Ne(),D=Qt(),S=k,I=p(null),W=p(null),h=p(null),T=p(0),w=p(!1),o=p(!1);let E=null;const x=()=>{E=setTimeout(()=>{w.value=!1,b.isMobile||(o.value=!1)},100)},F=()=>{E&&(clearTimeout(E),E=null),w.value=!0},C=()=>{b.isMobile&&(o.value=!o.value)},N=()=>{D.push("/login")},U=async()=>{try{const m=await yo(S.kpId);W.value=m.user_rating,h.value=m.average_rating}catch(m){console.error("Error loading rating:",m)}},y=async m=>{var i;try{m===W.value?(await zt(S.kpId,null),W.value=null,I.value.showNotification("Оценка удалена")):(await zt(S.kpId,m),W.value=m,I.value.showNotification("Оценка сохранена")),b.isMobile&&(o.value=!1),U()}catch(c){console.error("Error setting rating:",c),((i=c.response)==null?void 0:i.status)===401?I.value.showNotification('Для оценки необходимо <a class="auth-link">авторизоваться</a>',5e3,{onClick:N}):I.value.showNotification("Ошибка при сохранении оценки"),b.isMobile&&(o.value=!1)}};return De(()=>{U()}),(m,i)=>(l(),n("div",nl,[e("div",il,[e("a",{href:"#",class:"rating-link",onMouseenter:i[0]||(i[0]=c=>w.value=!0),onMouseleave:x,onClick:Xt(C,["prevent"])},[i[2]||(i[2]=e("img",{src:Mo,alt:"ReYohoho",class:"rating-logo"},null,-1)),e("span",al,a(h.value?h.value.toFixed(1):"—"),1)],32),M(e("div",{class:_(["rating-tooltip",{"mobile-tooltip":L(b).isMobile}]),onMouseenter:F,onMouseleave:x},[e("div",rl,[(l(),n(oe,null,_e(10,c=>e("button",{key:c,class:_(["number-btn",{active:c===W.value,hover:c===T.value}]),onClick:g=>y(c),onMouseenter:g=>T.value=c,onMouseleave:i[1]||(i[1]=g=>T.value=0)},a(c),43,ul)),64))])],34),[[A,w.value||o.value]])]),ce(Ue,{ref_key:"notificationRef",ref:I},null,512)]))}},dl=Ee(vl,[["__scopeId","data-v-52c65a99"]]),cl={class:"movie-info"},ml={class:"content"},pl={key:0,class:"content-card"},fl={class:"movie-skeleton"},kl={class:"movie-skeleton__player"},yl={key:2,class:"content-card"},gl={key:3,class:"content-card"},bl={class:"content-header"},_l={class:"content-title"},$l={key:0,class:"ratings-links"},hl={key:1},wl=["href"],Cl={key:2},Ml=["href"],Al={key:3},Il=["href"],Tl={key:4},El=["href"],Rl={key:5},Pl=["href"],Ll={key:6,class:"rating-links-group"},Sl=["href"],xl=["title"],Nl={key:0,class:"fa-regular fa-face-grin-wink"},Dl={key:1,class:"fas fa-spinner fa-spin"},Hl={key:2,class:"nudity-info-popup"},Ol={class:"nudity-info-content"},Bl=["content"],Kl=["content"],zl={class:"additional-info"},Vl={class:"info-content"},Wl={class:"details-container"},Fl={class:"info-list"},Ul={key:0},ql={key:1},Yl={key:2},Gl={key:3},Xl={key:4},Zl={key:5},jl={key:6},Ql={key:7},Jl={key:8},en={class:"content-info"},tn={key:0,class:"content-description-text"},on={key:2,class:"staff-section"},sn={class:"staff-categories"},ln={key:0,class:"staff-category"},nn={class:"staff-list"},an=["href","title"],rn=["src","alt"],un={class:"staff-name"},vn={key:0,class:"staff-role"},dn=["href","title"],cn={key:3,class:"yt-video-container"},mn={key:4,class:"related-movies"},pn=["title"],fn={key:5,class:"related-movies"},kn=["title"],yn={__name:"MovieInfo",setup(k){const b=p(!0),D=Ne(),S=Zt(),I=go(),W=jt(),h=p(W.params.kp_id),T=p(""),w=p(null),o=p(null),E=bo(),F=To().areTrailersActive,C=p(null),N=p(!1),U=p(!1),y=p(6),m=p(null),i=p(!1),c=()=>{if(o.value){const d=o.value.name_ru||o.value.name_en||o.value.name_original||"Информация о фильме";document.title=d}},g=d=>(d||[]).map(s=>({kp_id:s.film_id,poster:s.poster_url_preview||s.poster_url,title:s.name_ru||s.name_en||s.name_original})),se=d=>{if(typeof d!="number")return;const s=Math.floor(d/60),K=d%60;return"".concat(s," ч. ").concat(K," мин.")},Q=p(!1),q=p({top:"0px",left:"0px"}),f=d=>{Q.value=!0,q.value={top:"".concat(d.pageY+10,"px"),left:"".concat(d.pageX-70,"px")}},le=p(null),pe=async()=>{try{const d=[o.value.name_ru||o.value.name_en||o.value.name_original,...o.value.year?[o.value.year]:[],...o.value.film_length?[se(o.value.film_length)]:[]];await navigator.clipboard.writeText(d.join(", ")),le.value.showNotification("Скопировано")}catch(d){console.error("Ошибка копирования:",d)}},j=async(d=!0)=>{var s,K,G,ee,R,Re,Pe,ne;try{let te;if(h.value.startsWith("shiki")?te=await ho(h.value):te=await wo(h.value,S.token),Array.isArray(te)&&te.length===0)throw new Error("Данные не найдены. Пожалуйста, повторите поиск.");o.value=te,h.value.startsWith("shiki")?o.value={...o.value,title:o.value.name_ru||o.value.name_en,name_original:o.value.name_en,short_description:o.value.slogan}:o.value={...o.value,title:o.value.name_ru||o.value.name_en||o.value.name_original,kinopoisk_id:h.value},E.setHeaderContent({text:o.value.title,imageUrl:o.value.logo_url}),c();const X={kp_id:h.value,title:((s=o.value)==null?void 0:s.name_ru)||((K=o.value)==null?void 0:K.name_en)||((G=o.value)==null?void 0:G.name_original),poster:((ee=o.value)==null?void 0:ee.poster_url)||((R=o.value)==null?void 0:R.cover_url)||((Re=o.value)==null?void 0:Re.screenshots[0]),year:(Pe=o.value)==null?void 0:Pe.year,type:(ne=o.value)==null?void 0:ne.type};if(h.value.startsWith("shiki"))if(o.value.screenshots&&o.value.screenshots.length>0){const we=Math.floor(Math.random()*o.value.screenshots.length),He=o.value.screenshots[we];I.updateMoviePoster(He)}else X.poster&&I.updateMoviePoster(X.poster);else X.poster&&I.updateMoviePoster(X.poster);if(B(()=>D.isHistoryAllowed).value&&X.kp_id&&X.title&&d)if(S.token)try{await to(X.kp_id,$.HISTORY)}catch(we){console.error("Ошибка при добавлении в историю:",we)}else D.addToHistory({...X})}catch(te){const{message:X,code:he}=Fe(te);T.value=X,w.value=he,console.error("Ошибка при загрузке информации о фильмах:",te)}},fe=B(()=>{var d,s;return console.log("Трейлеры:",(d=o.value)==null?void 0:d.videos),(s=o.value)==null?void 0:s.videos}),H=B(()=>{var d;return g((d=o.value)==null?void 0:d.sequels_and_prequels)}),J=B(()=>{var d;return g((d=o.value)==null?void 0:d.similars)}),P=()=>{var G;const d=((G=document.querySelector(".related-movies"))==null?void 0:G.clientWidth)||0,K=Math.floor(d/260)||6;y.value=Math.max(1,K)},ke=()=>{P()},ye=d=>{if(d.altKey&&d.keyCode===84&&document.querySelector(".player-container")){const K=document.querySelector(".theater-mode-btn");K&&K.click()}},ge=async()=>{var d;if((d=o.value)!=null&&d.imdb_id){if(m.value){m.value=null;return}i.value=!0;try{const s=await Co(o.value.imdb_id);m.value=s.nudity_info}catch(s){console.error("Ошибка при загрузке информации о сценах:",s),le.value.showNotification("Ошибка при загрузке информации о сценах")}finally{i.value=!1}}};De(async()=>{await j(),b.value=!1,document.addEventListener("keydown",ye),window.addEventListener("resize",ke),setTimeout(P,100)}),_o(async()=>{E.clearHeaderContent(),document.removeEventListener("keydown",ye),window.removeEventListener("resize",ke)}),$e(()=>W.params.kp_id,async d=>{d&&d!==h.value&&(E.clearHeaderContent(),h.value=d,C.value=null,await j(),b.value=!1)},{immediate:!0}),$e(o,()=>{c()},{deep:!0});const Y=d=>{var s,K;return((K=(s=o.value)==null?void 0:s.staff)==null?void 0:K.filter(G=>G.profession_key===d))||[]};return(d,s)=>{var G,ee;const K=$o("lazy");return l(),n(oe,null,[e("div",cl,[e("div",ml,[(b.value||!o.value)&&!T.value?(l(),n("div",pl,[e("div",fl,[s[5]||(s[5]=Vt('<div class="movie-skeleton__header" data-v-0479bf96><div class="movie-skeleton__title" data-v-0479bf96></div></div><div class="movie-skeleton__ratings" data-v-0479bf96><div class="movie-skeleton__rating-item" data-v-0479bf96></div><div class="movie-skeleton__rating-item" data-v-0479bf96></div><div class="movie-skeleton__rating-item" data-v-0479bf96></div></div>',2)),e("div",kl,[ce(oo)]),s[6]||(s[6]=Vt('<div class="movie-skeleton__additional-info" data-v-0479bf96><div class="movie-skeleton__section-title" data-v-0479bf96></div><div class="movie-skeleton__info-list" data-v-0479bf96><div class="movie-skeleton__info-item" data-v-0479bf96></div><div class="movie-skeleton__info-item" data-v-0479bf96></div><div class="movie-skeleton__info-item" data-v-0479bf96></div><div class="movie-skeleton__info-item" data-v-0479bf96></div><div class="movie-skeleton__info-item" data-v-0479bf96></div></div></div><div class="movie-skeleton__description" data-v-0479bf96><div class="movie-skeleton__description-line" data-v-0479bf96></div><div class="movie-skeleton__description-line" data-v-0479bf96></div><div class="movie-skeleton__description-line" data-v-0479bf96></div><div class="movie-skeleton__description-line" data-v-0479bf96></div></div>',2))])])):v("",!0),T.value?(l(),me(eo,{key:1,message:T.value,code:w.value},null,8,["message","code"])):v("",!0),T.value?(l(),n("div",yl,[(l(),me(Gt,{key:h.value,"kp-id":h.value,"movie-info":o.value,"onUpdate:movieInfo":j},null,8,["kp-id","movie-info"]))])):v("",!0),o.value&&!b.value?(l(),n("div",gl,[e("div",bl,[o.value.logo_url?(l(),n("div",{key:0,class:"content-logo",onMousemove:f,onMouseleave:s[1]||(s[1]=R=>Q.value=!1),onClick:pe},[s[0]||(Wt(-1,!0),(s[0]=M(e("img",{alt:"Логотип фильма",class:"content-logo"},null,512),[[K,o.value.logo_url]])).cacheIndex=0,Wt(1),s[0])],32)):(l(),n("div",{key:1,onMousemove:f,onMouseleave:s[2]||(s[2]=R=>Q.value=!1),onClick:pe},[e("h1",_l,a(o.value.title),1)],32)),M(e("div",{class:"title-copy-tooltip",style:We(q.value)}," Скопировать ",4),[[A,Q.value]])]),o.value.kinopoisk_id||o.value.title||o.value.imdb_id||o.value.rating_imdb||o.value.shikimori_id?(l(),n("div",$l,[o.value.kinopoisk_id?(l(),me(dl,{key:0,"kp-id":o.value.kinopoisk_id,"show-dash":!0},null,8,["kp-id"])):v("",!0),o.value.kinopoisk_id?(l(),n("div",hl,[e("a",{href:"https://www.kinopoisk.ru/film/".concat(o.value.kinopoisk_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},[s[7]||(s[7]=e("img",{src:Ut,alt:"КП",class:"rating-logo"},null,-1)),e("span",null,a(o.value.rating_kinopoisk?o.value.rating_kinopoisk:"—"),1),s[8]||(s[8]=e("img",{src:be,alt:"Внешняя ссылка",class:"external-link-icon"},null,-1))],8,wl)])):v("",!0),!o.value.kinopoisk_id&&o.value.title?(l(),n("div",Cl,[e("a",{href:"https://www.kinopoisk.ru/index.php?kp_query=".concat(encodeURIComponent(o.value.title+(o.value.year?" "+o.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},[s[9]||(s[9]=e("img",{src:Ut,alt:"КП",class:"rating-logo"},null,-1)),e("span",null,a(o.value.rating_kinopoisk?o.value.rating_kinopoisk:"—"),1),s[10]||(s[10]=e("img",{src:be,alt:"Внешняя ссылка",class:"external-link-icon"},null,-1))],8,Ml)])):v("",!0),o.value.imdb_id?(l(),n("div",Al,[e("a",{href:"https://www.imdb.com/title/".concat(o.value.imdb_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},[s[11]||(s[11]=e("img",{src:qt,alt:"IMDb",class:"rating-logo"},null,-1)),e("span",null,a(o.value.rating_imdb?o.value.rating_imdb:"—"),1),s[12]||(s[12]=e("img",{src:be,alt:"Внешняя ссылка",class:"external-link-icon"},null,-1))],8,Il)])):v("",!0),!o.value.imdb_id&&o.value.title?(l(),n("div",Tl,[e("a",{href:"https://www.imdb.com/find/?q=".concat(encodeURIComponent(o.value.title+(o.value.year?" "+o.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},[s[13]||(s[13]=e("img",{src:qt,alt:"IMDb",class:"rating-logo"},null,-1)),e("span",null,a(o.value.rating_imdb?o.value.rating_imdb:"—"),1),s[14]||(s[14]=e("img",{src:be,alt:"Внешняя ссылка",class:"external-link-icon"},null,-1))],8,El)])):v("",!0),o.value.shikimori_id?(l(),n("div",Rl,[e("a",{href:"https://shikimori.one/animes/".concat(o.value.shikimori_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},s[15]||(s[15]=[e("img",{src:Eo,alt:"Shiki",class:"rating-logo"},null,-1),e("img",{src:be,alt:"Внешняя ссылка",class:"external-link-icon"},null,-1)]),8,Pl)])):v("",!0),o.value.imdb_id?(l(),n("div",Ll,[e("a",{href:"https://www.imdb.com/title/".concat(o.value.imdb_id,"/parentalguide"),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},s[16]||(s[16]=[e("span",null,"Parents Guide",-1),e("img",{src:be,alt:"Внешняя ссылка",class:"external-link-icon"},null,-1)]),8,Sl),L(S).token?(l(),n("button",{key:0,class:"rating-link nudity-info-btn",onClick:ge,title:m.value?"Скрыть информацию":"Показать информацию о сценах"},[i.value?(l(),n("i",Dl)):(l(),n("i",Nl)),m.value?(l(),n("div",Hl,[e("div",Ol,a(m.value),1)])):v("",!0)],8,xl)):v("",!0)])):v("",!0)])):v("",!0),(l(),me(Gt,{key:h.value,"kp-id":h.value,"movie-info":o.value,"onUpdate:movieInfo":j},null,8,["kp-id","movie-info"])),e("meta",{name:"title-and-year",content:o.value.type==="FILM"&&o.value.year?"".concat(o.value.title," (").concat(o.value.year,")"):o.value.title},null,8,Bl),o.value.name_original?(l(),n("meta",{key:1,name:"original-title",content:o.value.name_original},null,8,Kl)):v("",!0),e("div",zl,[s[26]||(s[26]=e("h2",{class:"additional-info-title"},"Подробнее",-1)),e("div",Vl,[e("div",Wl,[e("ul",Fl,[o.value.type&&L(Ft)[o.value.type]?(l(),n("li",Ul,[s[17]||(s[17]=e("strong",null,"Тип:",-1)),z(" "+a(L(Ft)[o.value.type]),1)])):v("",!0),o.value.year?(l(),n("li",ql,[s[18]||(s[18]=e("strong",null,"Год выпуска:",-1)),z(" "+a(o.value.year),1)])):v("",!0),o.value.title?(l(),n("li",Yl,[s[19]||(s[19]=e("strong",null,"Название:",-1)),z(" "+a(o.value.title),1)])):v("",!0),o.value.name_original?(l(),n("li",Gl,[s[20]||(s[20]=e("strong",null,"Оригинальное название:",-1)),z(" "+a(o.value.name_original),1)])):v("",!0),o.value.slogan?(l(),n("li",Xl,[s[21]||(s[21]=e("strong",null,"Слоган:",-1)),z(" "+a(o.value.slogan),1)])):v("",!0),o.value.production_companies?(l(),n("li",Zl,[s[22]||(s[22]=e("strong",null,"Продакшн:",-1)),z(" "+a(o.value.production_companies),1)])):v("",!0),(G=o.value.countries)!=null&&G.length?(l(),n("li",jl,[s[23]||(s[23]=e("strong",null,"Страна производства:",-1)),z(" "+a(o.value.countries.map(R=>R.country).join(", ")),1)])):v("",!0),(ee=o.value.genres)!=null&&ee.length?(l(),n("li",Ql,[s[24]||(s[24]=e("strong",null,"Жанры:",-1)),z(" "+a(o.value.genres.map(R=>R.genre).join(", ")),1)])):v("",!0),o.value.film_length?(l(),n("li",Jl,[s[25]||(s[25]=e("strong",null,"Продолжительность:",-1)),z(" "+a(se(o.value.film_length)),1)])):v("",!0)])])])]),e("div",en,[o.value.description?(l(),n("p",tn,a(o.value.description),1)):v("",!0)]),o.value.staff?(l(),n("div",on,[e("div",sn,[Y("ACTOR").length?(l(),n("div",ln,[s[27]||(s[27]=e("h3",{class:"additional-info-title"},"Актёры",-1)),e("div",nn,[(l(!0),n(oe,null,_e(Y("ACTOR").slice(0,12),R=>(l(),n("div",{key:R.staff_id,class:"staff-item"},[e("a",{href:"https://www.kinopoisk.ru/name/".concat(R.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-link",title:R.description||""},[e("img",{src:R.poster_url,alt:R.name_ru,class:"staff-photo"},null,8,rn),e("span",un,a(R.name_ru||R.name_en),1),R.description?(l(),n("span",vn,a(R.description),1)):v("",!0)],8,an)]))),128)),e("a",{class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(h.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"Показать всех ".concat(Y("ACTOR").length," актеров")}," +"+a(Y("ACTOR").length-12),9,dn)])])):v("",!0)])])):v("",!0),fe.value.length&&L(F)?(l(),n("div",cn,[ce(ll,{videos:fe.value,"active-video-index":C.value,onSelect:d.playTrailer},null,8,["videos","active-video-index","onSelect"])])):v("",!0),H.value.length?(l(),n("div",mn,[s[28]||(s[28]=e("h2",null,"Сиквелы и приквелы",-1)),ce(L(Yt),{"movies-list":N.value?H.value:H.value.slice(0,y.value),loading:!1,"is-history":!1},null,8,["movies-list"]),H.value.length>y.value?(l(),n("a",{key:0,class:"expand-circle-button",onClick:s[3]||(s[3]=R=>N.value=!N.value),title:"".concat(N.value?"Скрыть":"Показать все"," (").concat(H.value.length,")")},a(N.value?"−":"+".concat(H.value.length-y.value)),9,pn)):v("",!0)])):v("",!0),J.value.length?(l(),n("div",fn,[s[29]||(s[29]=e("h2",null,"Похожие",-1)),ce(L(Yt),{"movies-list":U.value?J.value:J.value.slice(0,y.value),loading:!1,"is-history":!1},null,8,["movies-list"]),J.value.length>y.value?(l(),n("a",{key:0,class:"expand-circle-button",onClick:s[4]||(s[4]=R=>U.value=!U.value),title:"".concat(U.value?"Скрыть":"Показать все"," (").concat(J.value.length,")")},a(U.value?"−":"+".concat(J.value.length-y.value)),9,kn)):v("",!0)])):v("",!0)])):v("",!0)])]),ce(Ue,{ref_key:"notificationRef",ref:le},null,512)],64)}}},wn=Ee(yn,[["__scopeId","data-v-0479bf96"]]);export{wn as default};
//# sourceMappingURL=MovieInfo-C00kkzbL.js.map
