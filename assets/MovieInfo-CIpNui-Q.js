import{_ as we,r as w,c as V,b as d,d as r,e as t,s as Z,t as b,K as te,g as M,L as fe,n as $,q as xe,u as Xe,i as st,N as cn,z as Je,l as Ie,o as Ne,O as it,x as Ee,E as mn,f as ne,P as Qe,m as K,Q as G,y as Q,U as q,R as Mn,D as ot,S as ge,V as _n,W as vn,X as En,Y as on,Z as Ln,k as In,v as ze,$ as Rn,a0 as ke,a1 as Ge,a2 as Tn,a3 as Pn,a4 as An,a5 as Sn,a6 as sn,a7 as Un,a8 as jn,a as $n,a9 as ln,aa as xn,ab as Bn,ac as Hn}from"./index-BeyB78gd.js";import{S as fn,_ as Dn,a as an,b as rn,M as un}from"./MovieList-cZ1Ro7AE.js";import{N as et}from"./ToastMessage-ahrIkF_p.js";import{u as Nn,S as On,a as Vn}from"./trailer-QGvUPSEV.js";const Oe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVR4nO2ZQUoDMRSGR7eewHoFsVS0HkUUXNXqASqK2EURBPFIVRe6c+UN1CvUXWvbT4KvMAwzNnnJdCrmg1BKad7/v7y0b5IkiUQiCwGoAx3gQjEugZ0qxTeAIX6MKjMBnBOGS62AVWAPOHVYdlMu9YArYOhphLeBT+ALmOKGEd2QubaAK+B2zngFxt4GgDXgGZjgR8ch5oEkCi8DkvlnRcYLV0Apfqw10M7JvPkV6AN3FmVwK+WyZRnvMEe8ef/ibECyb2o+zRuwnpQAxeLNivQ0BvYyE46qEJ/8fK4ycJKp/X4V4n0MdDNfukkqEO9jwP1LDgD7BeKPgmgp04CL+KUz4Cp+qQxoxC+NAdsNm4c0hWkukkUa8BGfegiadbFDq3/2UAZ8xc+QVvzMtqcKYkBaZ5/MN5xEl2DgLGDZ1KswsC09FPJqXTZoNm5oA6kyMGI2FxqfkluJ0uMTDfhBXAHiHvCCWEL8/RLqlv1MPCf+TSZ+13WC7KnEfWlqcwAeU7GNjnbiQsG5UC1ZAEAt1UMhOpquk6zknMy9l20C2AA+MnEHRo9msuOCs9EH4Fp5TVQ0rqVs0plH4re02Qh1Oq1lCjypsp+5H3gKcD/gykTirqnFZ/ZDy+OGxpapzD+QePrM/2KkKfcGPcv7AdvRkz23G1x4JPIP+AY3r/ywUk/2JAAAAABJRU5ErkJggg==",Fn="/reyohoho/assets/icon-shikimori-DGvXK9Jc.svg",nt=o=>{const e=document.createElement("div");e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgba(0, 0, 0, 0.8)",e.style.color="white",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e.style.fontSize="2rem",e.style.zIndex="99000",e.textContent=o,document.body.appendChild(e),setTimeout(()=>{document.body.removeChild(e)},2e3)},Kn={key:0},qn={key:1},Wn={class:"players-list"},zn=["onClick"],Gn={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Yn={key:0},Zn={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Qn={key:1},Xn={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Jn=["onClick"],eo={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},to={__name:"PlayerModal",props:{players:{type:Array,required:!0},selectedPlayer:{type:Object,default:null}},emits:["close","select"],setup(o,{emit:e}){const l=o,n=e,m=w(null),g=V(()=>l.players.filter(p=>!v(p)&&!s(p))),u=V(()=>l.players.some(p=>v(p))),y=V(()=>l.players.some(p=>s(p))),v=p=>p.key.toUpperCase().includes("HDREZKA"),s=p=>p.key.toUpperCase().includes("KODIK"),c=p=>p.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"").replace(/KODIK>/,"").trim(),a=p=>{n("select",p),n("close")},f=p=>l.selectedPlayer&&l.selectedPlayer.key===p.key,_=p=>l.selectedPlayer?p==="hdrezka"&&v(l.selectedPlayer)||p==="kodik"&&s(l.selectedPlayer):!1,L=p=>{m.value=p},A=()=>{m.value=null},R=p=>{let S=l.players.filter(U=>p==="hdrezka"&&v(U)||p==="kodik"&&s(U));return p==="kodik"?S.sort((U,F)=>c(U.translate).localeCompare(c(F.translate))):S},E=p=>R(p).some(S=>S.warning);return(p,S)=>(r(),d("div",{class:"modal",onClick:S[4]||(S[4]=xe(U=>p.$emit("close"),["self"]))},[t("div",{class:"modal-content",onClick:S[3]||(S[3]=xe(()=>{},["stop"]))},[t("button",{class:"close",onClick:S[0]||(S[0]=U=>p.$emit("close"))},"√ó"),m.value?(r(),d("h2",qn,[t("button",{class:"back-btn",onClick:A},"‚Üê –ù–∞–∑–∞–¥"),Z(" "+b(m.value==="hdrezka"?"ReYohoho - HDrezka":"Kodik"),1)])):(r(),d("h2",Kn,"–í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–µ–µ—Ä")),t("ul",Wn,[m.value?(r(!0),d(te,{key:1},fe(R(m.value),U=>(r(),d("li",{key:U.key},[t("button",{class:$(["player-item",{active:f(U)}]),onClick:F=>a(U)},[Z(b(c(U.translate))+" ",1),U.warning?(r(),d("span",eo,"warning")):M("",!0)],10,Jn)]))),128)):(r(),d(te,{key:0},[(r(!0),d(te,null,fe(g.value,U=>(r(),d("li",{key:U.key},[t("button",{class:$(["player-item",{active:f(U)}]),onClick:F=>a(U)},[Z(b(c(U.translate))+" ",1),U.warning?(r(),d("span",Gn,"warning")):M("",!0)],10,zn)]))),128)),u.value?(r(),d("li",Yn,[t("button",{class:$(["group-item",{active:_("hdrezka")}]),onClick:S[1]||(S[1]=U=>L("hdrezka"))},[S[5]||(S[5]=t("span",{class:"material-icons group-icon"},"folder",-1)),S[6]||(S[6]=Z(" ReYohoho - HDrezka ")),E("hdrezka")?(r(),d("span",Zn,"warning")):M("",!0)],2)])):M("",!0),y.value?(r(),d("li",Qn,[t("button",{class:$(["group-item",{active:_("kodik")}]),onClick:S[2]||(S[2]=U=>L("kodik"))},[S[7]||(S[7]=t("span",{class:"material-icons group-icon"},"folder",-1)),S[8]||(S[8]=Z(" Kodik ")),E("kodik")?(r(),d("span",Xn,"warning")):M("",!0)],2)])):M("",!0)],64))])])]))}},no=we(to,[["__scopeId","data-v-460326ba"]]),oo={class:"players-list"},so=["src"],io={key:1,class:"controls"},lo={class:"main-controls"},ao={class:"material-icons"},ro={class:"list-button-item"},uo={class:"material-icons"},co={class:"list-button-item"},mo={class:"material-icons"},vo={class:"list-button-item"},fo={class:"list-button-item"},go={class:"material-icons"},ko={class:"list-button-item"},yo={class:"material-icons"},ho={class:"tooltip-container","data-tooltip-container":"dimming"},bo={class:"material-icons"},po={class:"tooltip-container","data-tooltip-container":"blur"},Co={class:"tooltip-container","data-tooltip-container":"compressor"},wo={class:"tooltip-container","data-tooltip-container":"mirror"},Mo={class:"tooltip-container","data-tooltip-container":"theater"},_o={class:"material-symbols-outlined"},Eo={class:"custom-tooltip","data-tooltip":"theater"},Lo={class:"tooltip-container","data-tooltip-container":"aspect_ratio"},Io={class:"current-ratio"},Ro=["onClick"],To={key:0,class:"tooltip-container","data-tooltip-container":"app_link"},Po={class:"custom-tooltip","data-tooltip":"app_link"},Ao={key:1,class:"tooltip-container","data-tooltip-container":"copy_link"},So={class:"custom-tooltip","data-tooltip":"copy_link"},Uo={key:0,class:"desktop-list-buttons"},jo={class:"tooltip-container"},$o={class:"material-icons"},xo={class:"custom-tooltip"},Bo={class:"tooltip-container"},Ho={class:"material-icons"},Do={class:"custom-tooltip"},No={class:"tooltip-container"},Oo={class:"custom-tooltip"},Vo={class:"tooltip-container"},Fo={class:"material-icons"},Ko={class:"custom-tooltip"},qo={class:"tooltip-container"},Wo={class:"material-icons"},zo={class:"custom-tooltip"},Go={key:1,class:"mobile-list-buttons"},Yo={class:"tooltip-container"},Zo={class:"material-icons"},Qo={class:"custom-tooltip"},Xo={class:"tooltip-container"},Jo={class:"material-icons"},es={class:"custom-tooltip"},ts={class:"tooltip-container"},ns={class:"custom-tooltip"},os={class:"tooltip-container"},ss={class:"material-icons"},is={class:"custom-tooltip"},ls={class:"tooltip-container"},as={class:"material-icons"},rs={class:"custom-tooltip"},us={__name:"PlayerComponent",props:{kpId:String,movieInfo:{type:Object,default:()=>({})}},emits:["update:selectedPlayer","update:movieInfo"],setup(o,{emit:e}){const l=Xe(),n=Nn(),m=st(),g=cn(),u=Je(),y=w(g.params.kp_id),v=o,s=e,c=w([]),a=w(null),f=w(!0),_=w(!1),L=w(!1),A=w(null),R=w(null),E=w(!1),p=w(""),S=w(null),U=w(window.innerHeight*.9),F=V(()=>"".concat(U.value,"px")),N=V(()=>l.isMobile),W=V(()=>!!window.electronAPI),P=w(null),ae=w(!1);let ue=null;const X=w(null),ye=w(null),de=w(null),ce=I=>{const i=document.querySelector('[data-tooltip-container="'.concat(I,'"]')),H=document.querySelector('[data-tooltip="'.concat(I,'"]'));if(!i||!H)return;const ve=i.getBoundingClientRect(),Me=H.getBoundingClientRect(),_e=window.innerHeight;ve.bottom+Me.height>_e?(H.style.top="auto",H.style.bottom="100%",H.style.marginTop="0",H.style.marginBottom="12px",H.style.transform="translateX(-50%)"):(H.style.top="100%",H.style.bottom="auto",H.style.marginTop="12px",H.style.marginBottom="0",H.style.transform="translateX(-50%)")},C=I=>{P.value=I,ae.value=!1,clearTimeout(ue),ge(()=>{ce(I)})},z=()=>{ae.value||(ue=setTimeout(()=>{P.value=null},300))},be=()=>{ae.value=!0,clearTimeout(ue)},pe=()=>{ae.value=!1,P.value=null},J=V({get:()=>n.aspectRatio,set:I=>n.updateAspectRatio(I)}),he=V({get:()=>n.isCentered,set:I=>n.updateCentering(I)}),ee=V(()=>{var I,i,H,ve,Me,_e,Se,Ue,je,$e;return((i=(I=v.movieInfo)==null?void 0:I.lists)==null?void 0:i.isFavorite)||((ve=(H=v.movieInfo)==null?void 0:H.lists)==null?void 0:ve.isWatching)||((_e=(Me=v.movieInfo)==null?void 0:Me.lists)==null?void 0:_e.isLater)||((Ue=(Se=v.movieInfo)==null?void 0:Se.lists)==null?void 0:Ue.isCompleted)||(($e=(je=v.movieInfo)==null?void 0:je.lists)==null?void 0:$e.isAbandoned)}),j=V(()=>n.preferredPlayer),k=w(0),Y=I=>I.toUpperCase(),oe=()=>{if(_.value||!R.value)return;const[I,i]=J.value.split(":").map(Number);U.value=window.innerHeight*.9,k.value=Math.min(R.value.clientWidth*(i/I),U.value)},D=V(()=>{if(_.value)return{};const[I,i]=J.value.split(":").map(Number),H=U.value*(I/i);return{width:"100%",maxWidth:"".concat(H,"px"),maxHeight:F.value,margin:"0 auto",overflow:"hidden"}}),Ce=V(()=>{const[I,i]=J.value.split(":").map(Number);return{position:"relative",width:"100%",paddingTop:"".concat(i/I*100,"%")}}),se=()=>{R.value&&setTimeout(()=>{ge(()=>{R.value.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})},500)},Re=async()=>{try{p.value="",S.value=null;const I=await Mn(v.kpId);if(c.value=Object.entries(I).map(([i,H])=>({key:i.toUpperCase(),...H})),c.value.length>0){if(j.value){const i=Y(j.value),H=c.value.find(ve=>Y(ve.key)===i);a.value=H||c.value[0]}else a.value=c.value[0];s("update:selectedPlayer",a.value)}}catch(I){const{message:i,code:H}=ot(I);p.value=i,S.value=H,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–ª–µ–µ—Ä–æ–≤:",I)}},Te=()=>{E.value=!0},re=()=>{E.value=!1},ie=I=>{var i;if(((i=a.value)==null?void 0:i.key)===I.key){re();return}a.value=I,f.value=!0,n.updatePreferredPlayer(Y(I.key)),s("update:selectedPlayer",I)},Pe=()=>{W.value?window.electronAPI.sendHotKey("F2"):(nt("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},Le=()=>{W.value?window.electronAPI.sendHotKey("F3"):(nt("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},Be=()=>{W.value?window.electronAPI.sendHotKey("F4"):(nt("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},Ae=()=>{_.value=!_.value,_.value?(window.addEventListener("mousemove",x),document.addEventListener("keydown",B),document.body.classList.add("no-scroll")):(window.removeEventListener("mousemove",x),document.removeEventListener("keydown",B),document.body.classList.remove("no-scroll")),L.value=_.value,ge(()=>se())},He=w(null),x=()=>{He.value=setTimeout(()=>{clearTimeout(He.value),L.value=!1},4e3),L.value=!0},O=V(()=>l.dimmingEnabled),h=()=>{_.value||l.toggleDimming()},B=I=>{(I.key==="Escape"&&_.value||I.altKey&&I.keyCode===84)&&Ae()},me=I=>{J.value=I,setTimeout(()=>{he.value&&se()},310)},De=()=>{const I="reyohoho://#".concat(y.value);try{window.location.href=I}catch(i){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Å—ã–ª–∫–∏:",i)}},Ye=()=>{const I=window.location.href;navigator.clipboard.writeText(I).then(()=>{}),X.value.showNotification("–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∏–ª—å–º —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞")},kn=()=>{f.value=!1};function yn(I){return I.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"HDRezka - ").replace(/KODIK>/,"Kodik - ").trim()}const hn=V(()=>{var I,i;return W.value?!1:!((i=(I=a.value)==null?void 0:I.key)!=null&&i.toUpperCase().includes("TORRENTS"))});Ie(a,I=>{if(I)if(f.value=!0,n.updatePreferredPlayer(Y(I.key)),s("update:selectedPlayer",I),I.key.toUpperCase().includes("TORRENTS")){const i=document.querySelector(".rocketme_fon");i&&(i.style.display="none");const H=document.querySelector(".pm_preloader");H&&(H.style.display="none")}else{const i=document.querySelector(".rocketme_fon");i&&(i.style.display="");const H=document.querySelector(".pm_preloader");H&&(H.style.display="")}}),Ie(()=>g.params.kp_id,async I=>{I&&I!==y.value&&(y.value=I,he.value&&se())},{immediate:!0});const Ze=["16:9","12:5","4:3"],bn=()=>{const i=(Ze.indexOf(J.value)+1)%Ze.length;me(Ze[i])},pn=I=>{var H,ve,Me,_e,Se,Ue,je,$e,Ve,Fe,Ke,qe,We;return(We={[q.FAVORITE]:((ve=(H=v.movieInfo)==null?void 0:H.lists)==null?void 0:ve.isFavorite)||!1,[q.HISTORY]:((_e=(Me=v.movieInfo)==null?void 0:Me.lists)==null?void 0:_e.isHistory)||!1,[q.LATER]:((Ue=(Se=v.movieInfo)==null?void 0:Se.lists)==null?void 0:Ue.isLater)||!1,[q.COMPLETED]:(($e=(je=v.movieInfo)==null?void 0:je.lists)==null?void 0:$e.isCompleted)||!1,[q.ABANDONED]:((Fe=(Ve=v.movieInfo)==null?void 0:Ve.lists)==null?void 0:Fe.isAbandoned)||!1,[q.WATCHING]:((qe=(Ke=v.movieInfo)==null?void 0:Ke.lists)==null?void 0:qe.isWatching)||!1}[I])!=null?We:!1},le=async I=>{if(!m.token){X.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Cn});return}try{const i={[q.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[q.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[q.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[q.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[q.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[q.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};pn(I)?(await _n(y.value,I),X.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(i[I]))):(await vn(y.value,I),X.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(i[I])))}catch(i){const{message:H,code:ve}=ot(i);X.value.showNotification("".concat(H," ").concat(ve))}s("update:movieInfo")},Cn=()=>{u.push("/login")},tt=V(()=>n.showFavoriteTooltip),wn=()=>{u.push("/settings"),pe()};return Ne(()=>{f.value=!0,Re(),N.value&&(J.value="4:3"),oe(),window.addEventListener("resize",oe),window.addEventListener("resize",ce),he.value&&se()}),it(()=>{window.removeEventListener("resize",oe),window.removeEventListener("resize",ce),window.removeEventListener("mousemove",x),document.removeEventListener("keydown",B),document.body.classList.remove("no-scroll")}),(I,i)=>{var H,ve,Me,_e,Se,Ue,je,$e,Ve,Fe,Ke,qe,We,dt,ct,mt,vt,ft,gt,kt,yt,ht,bt,pt,Ct,wt,Mt,_t,Et,Lt,It,Rt,Tt,Pt,At,St,Ut,jt,$t,xt,Bt,Ht,Dt,Nt,Ot,Vt,Ft,Kt,qt,Wt,zt,Gt,Yt,Zt,Qt,Xt,Jt,en,tn,nn;return p.value?(r(),Ee(mn,{key:0,message:p.value,code:S.value},null,8,["message","code"])):(r(),d(te,{key:1},[t("div",oo,[i[54]||(i[54]=t("span",null,"–ü–ª–µ–µ—Ä:",-1)),t("button",{class:"player-btn",onClick:Te},b(a.value?yn(a.value.translate).toUpperCase():"–ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–µ–µ—Ä–æ–≤..."),1)]),E.value?(r(),Ee(no,{key:0,players:c.value,"selected-player":a.value,onClose:re,onSelect:ie},null,8,["players","selected-player"])):M("",!0),t("div",{ref_key:"containerRef",ref:R,class:$(["player-container",{"theater-mode":_.value}]),style:Qe(_.value?{}:D.value)},[t("div",{class:$(["iframe-wrapper",{pm_video:hn.value}]),style:Qe(_.value?{}:Ce.value)},[K(t("iframe",{ref_key:"playerIframe",ref:A,src:(H=a.value)==null?void 0:H.iframe,frameborder:"0",allowfullscreen:"",webkitallowfullscreen:"",class:$(["responsive-iframe",{"theater-mode-unlock":L.value,"theater-mode-lock":_.value,dimmed:O.value}]),onLoad:kn},null,42,so),[[G,!f.value&&((ve=a.value)==null?void 0:ve.iframe)]]),f.value?(r(),Ee(fn,{key:0})):M("",!0)],6),_.value?(r(),d("button",{key:0,class:$(["close-theater-btn",{visible:L.value}]),onClick:Ae}," ‚úñ ",2)):M("",!0)],6),_.value?M("",!0):(r(),d("div",io,[t("div",lo,[N.value?M("",!0):(r(),d("div",{key:0,ref_key:"tooltipContainer",ref:ye,class:"tooltip-container list-buttons-container","data-tooltip-container":"favorite"},[tt.value?(r(),d("button",{key:0,class:$(["favorite-btn",{active:(_e=(Me=o.movieInfo)==null?void 0:Me.lists)==null?void 0:_e.isFavorite}]),onMouseenter:i[0]||(i[0]=T=>C("favorite")),onMouseleave:z,onClick:i[1]||(i[1]=T=>le(Q(q).FAVORITE))},[t("span",ao,b((Ue=(Se=o.movieInfo)==null?void 0:Se.lists)!=null&&Ue.isFavorite?"favorite":"favorite_border"),1),t("span",{class:$(["material-icons dropdown-arrow",{highlighted:ee.value}])},"expand_more",2)],34)):M("",!0),K(t("div",{ref_key:"tooltip",ref:de,class:"custom-tooltip advanced-tooltip list-buttons-dropdown","data-tooltip":"favorite",onMouseenter:be,onMouseleave:pe},[t("div",ro,[t("button",{class:$(["favorite-btn",{active:($e=(je=o.movieInfo)==null?void 0:je.lists)==null?void 0:$e.isFavorite}]),onClick:i[2]||(i[2]=T=>le(Q(q).FAVORITE))},[t("span",uo,b((Fe=(Ve=o.movieInfo)==null?void 0:Ve.lists)!=null&&Fe.isFavorite?"favorite":"favorite_border"),1),i[55]||(i[55]=t("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))],2)]),t("div",co,[t("button",{class:$(["watching-btn",{active:(qe=(Ke=o.movieInfo)==null?void 0:Ke.lists)==null?void 0:qe.isWatching}]),onClick:i[3]||(i[3]=T=>le(Q(q).WATCHING))},[t("span",mo,b((dt=(We=o.movieInfo)==null?void 0:We.lists)!=null&&dt.isWatching?"visibility_off":"visibility"),1),i[56]||(i[56]=t("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))],2)]),t("div",vo,[t("button",{class:$(["later-btn",{active:(mt=(ct=o.movieInfo)==null?void 0:ct.lists)==null?void 0:mt.isLater}]),onClick:i[4]||(i[4]=T=>le(Q(q).LATER))},i[57]||(i[57]=[t("span",{class:"material-icons"},"watch_later",-1),t("span",{class:"button-label"},"–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ",-1)]),2)]),t("div",fo,[t("button",{class:$(["completed-btn",{active:(ft=(vt=o.movieInfo)==null?void 0:vt.lists)==null?void 0:ft.isCompleted}]),onClick:i[5]||(i[5]=T=>le(Q(q).COMPLETED))},[t("span",go,b((kt=(gt=o.movieInfo)==null?void 0:gt.lists)!=null&&kt.isCompleted?"check_circle":"check_circle_outline"),1),i[58]||(i[58]=t("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))],2)]),t("div",ko,[t("button",{class:$(["abandoned-btn",{active:(ht=(yt=o.movieInfo)==null?void 0:yt.lists)==null?void 0:ht.isAbandoned}]),onClick:i[6]||(i[6]=T=>le(Q(q).ABANDONED))},[t("span",yo,b(((pt=(bt=o.movieInfo)==null?void 0:bt.lists)!=null&&pt.isAbandoned,"not_interested")),1),i[59]||(i[59]=t("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))],2)]),t("div",{class:"tooltip-hint"},[i[61]||(i[61]=t("span",{class:"material-icons"},"settings",-1)),t("span",null,[i[60]||(i[60]=Z("–°—Ç–∏–ª—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ ")),t("a",{class:"settings-link",onClick:wn},"–Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö")])])],544),[[G,P.value==="favorite"&&tt.value]])],512)),N.value?M("",!0):(r(),d(te,{key:1},[t("div",ho,[t("button",{class:$(["dimming-btn",{active:O.value}]),onMouseenter:i[7]||(i[7]=T=>C("dimming")),onMouseleave:i[8]||(i[8]=T=>P.value=null),onClick:h},[t("span",bo,b(O.value?"light_mode":"dark_mode"),1)],34),K(t("div",{class:"custom-tooltip","data-tooltip":"dimming"},b(O.value?"–û—Ç–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ":"–í–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ"),513),[[G,P.value==="dimming"]])]),t("div",po,[t("button",{class:$(["blur-btn",{"electron-only":!W.value}]),onMouseenter:i[9]||(i[9]=T=>C("blur")),onMouseleave:i[10]||(i[10]=T=>P.value=null),onClick:Pe},i[62]||(i[62]=[t("span",{class:"material-icons"},"blur_on",-1)]),34),K(t("div",{class:"custom-tooltip","data-tooltip":"blur"},b(W.value?"–ë–ª—é—Ä":"–ë–ª—é—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[G,P.value==="blur"]])]),t("div",Co,[t("button",{class:$(["material-symbols-outlined",{"electron-only":!W.value}]),onMouseenter:i[11]||(i[11]=T=>C("compressor")),onMouseleave:i[12]||(i[12]=T=>P.value=null),onClick:Le},i[63]||(i[63]=[t("span",{class:"material-icons"},"graphic_eq",-1)]),34),K(t("div",{class:"custom-tooltip","data-tooltip":"compressor"},b(W.value?"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä":"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[G,P.value==="compressor"]])]),t("div",wo,[t("button",{class:$(["mirror-btn",{"electron-only":!W.value}]),onMouseenter:i[13]||(i[13]=T=>C("mirror")),onMouseleave:i[14]||(i[14]=T=>P.value=null),onClick:Be},i[64]||(i[64]=[t("span",{class:"material-icons"},"flip",-1)]),34),K(t("div",{class:"custom-tooltip","data-tooltip":"mirror"},b(W.value?"–ó–µ—Ä–∫–∞–ª–æ":"–ó–µ—Ä–∫–∞–ª–æ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[G,P.value==="mirror"]])]),t("div",Mo,[t("button",{class:"theater-mode-btn",onMouseenter:i[15]||(i[15]=T=>C("theater")),onMouseleave:i[16]||(i[16]=T=>P.value=null),onClick:Ae},[t("span",_o,b(_.value?"fullscreen_exit":"aspect_ratio"),1)],32),K(t("div",Eo,[Z(b(_.value?"–í—ã–π—Ç–∏ –∏–∑ —Ç–µ–∞—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞":"–¢–µ–∞—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º")+" ",1),i[65]||(i[65]=t("span",{class:"shortcut-hint"},"Alt+T",-1))],512),[[G,P.value==="theater"]])]),t("div",Lo,[t("button",{class:"aspect-ratio-dropdown-btn",onMouseenter:i[17]||(i[17]=T=>C("aspect_ratio")),onMouseleave:z,onClick:bn},[t("span",Io,b(J.value),1)],32),K(t("div",{class:"custom-tooltip advanced-tooltip aspect-ratio-dropdown","data-tooltip":"aspect_ratio",onMouseenter:be,onMouseleave:pe},[(r(),d(te,null,fe(Ze,T=>t("div",{key:T,class:$(["aspect-ratio-option",{active:J.value===T}]),onClick:Ga=>me(T)},b(T),11,Ro)),64))],544),[[G,P.value==="aspect_ratio"]])]),t("div",{class:"tooltip-container","data-tooltip-container":"centering",onMouseenter:i[19]||(i[19]=T=>C("centering")),onMouseleave:z},[t("button",{class:"center-btn",onClick:se},i[66]||(i[66]=[t("span",{class:"material-icons"},"center_focus_strong",-1)])),K(t("div",{class:"custom-tooltip advanced-tooltip","data-tooltip":"centering",onMouseenter:be,onMouseleave:pe},[i[67]||(i[67]=Z(" –û—Ç—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–ª–µ–µ—Ä ")),ne(On,{modelValue:he.value,"onUpdate:modelValue":i[18]||(i[18]=T=>he.value=T),title:"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞"},null,8,["modelValue"]),i[68]||(i[68]=t("span",{class:"tooltip-title"},"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞",-1))],544),[[G,P.value==="centering"]])],32),W.value?M("",!0):(r(),d("div",To,[t("button",{class:"app-link-btn",onMouseenter:i[20]||(i[20]=T=>C("app_link")),onMouseleave:i[21]||(i[21]=T=>P.value=null),onClick:De},i[69]||(i[69]=[t("span",{class:"material-icons"},"open_in_new",-1)]),32),K(t("div",Po," –û—Ç–∫—Ä—ã—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ",512),[[G,P.value==="app_link"]])])),W.value?(r(),d("div",Ao,[t("button",{class:"copy-link-btn",onMouseenter:i[22]||(i[22]=T=>C("copy_link")),onMouseleave:i[23]||(i[23]=T=>P.value=null),onClick:Ye},i[70]||(i[70]=[t("span",{class:"material-icons"},"content_copy",-1)]),32),K(t("div",So," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É ",512),[[G,P.value==="copy_link"]])])):M("",!0)],64))]),!N.value&&!tt.value?(r(),d("div",Uo,[t("div",jo,[t("button",{class:$(["favorite-btn",{active:(wt=(Ct=o.movieInfo)==null?void 0:Ct.lists)==null?void 0:wt.isFavorite}]),onMouseenter:i[24]||(i[24]=T=>C("favorite")),onMouseleave:i[25]||(i[25]=T=>P.value=null),onClick:i[26]||(i[26]=T=>le(Q(q).FAVORITE))},[t("span",$o,b((_t=(Mt=o.movieInfo)==null?void 0:Mt.lists)!=null&&_t.isFavorite?"favorite":"favorite_border"),1)],34),K(t("div",xo,b("–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"),512),[[G,P.value==="favorite"]])]),t("div",Bo,[t("button",{class:$(["watching-btn",{active:(Lt=(Et=o.movieInfo)==null?void 0:Et.lists)==null?void 0:Lt.isWatching}]),onMouseenter:i[27]||(i[27]=T=>C("watching")),onMouseleave:i[28]||(i[28]=T=>P.value=null),onClick:i[29]||(i[29]=T=>le(Q(q).WATCHING))},[t("span",Ho,b((Rt=(It=o.movieInfo)==null?void 0:It.lists)!=null&&Rt.isWatching?"visibility_off":"visibility"),1)],34),K(t("div",Do,b("–°–º–æ—Ç—Ä—é"),512),[[G,P.value==="watching"]])]),t("div",No,[t("button",{class:$(["later-btn",{active:(Pt=(Tt=o.movieInfo)==null?void 0:Tt.lists)==null?void 0:Pt.isLater}]),onMouseenter:i[30]||(i[30]=T=>C("later")),onMouseleave:i[31]||(i[31]=T=>P.value=null),onClick:i[32]||(i[32]=T=>le(Q(q).LATER))},i[71]||(i[71]=[t("span",{class:"material-icons"},"watch_later",-1)]),34),K(t("div",Oo,b("–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"),512),[[G,P.value==="later"]])]),t("div",Vo,[t("button",{class:$(["completed-btn",{active:(St=(At=o.movieInfo)==null?void 0:At.lists)==null?void 0:St.isCompleted}]),onMouseenter:i[33]||(i[33]=T=>C("completed")),onMouseleave:i[34]||(i[34]=T=>P.value=null),onClick:i[35]||(i[35]=T=>le(Q(q).COMPLETED))},[t("span",Fo,b((jt=(Ut=o.movieInfo)==null?void 0:Ut.lists)!=null&&jt.isCompleted?"check_circle":"check_circle_outline"),1)],34),K(t("div",Ko,b("–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"),512),[[G,P.value==="completed"]])]),t("div",qo,[t("button",{class:$(["abandoned-btn",{active:(xt=($t=o.movieInfo)==null?void 0:$t.lists)==null?void 0:xt.isAbandoned}]),onMouseenter:i[36]||(i[36]=T=>C("abandoned")),onMouseleave:i[37]||(i[37]=T=>P.value=null),onClick:i[38]||(i[38]=T=>le(Q(q).ABANDONED))},[t("span",Wo,b(((Ht=(Bt=o.movieInfo)==null?void 0:Bt.lists)!=null&&Ht.isAbandoned,"not_interested")),1)],34),K(t("div",zo,b("–ë—Ä–æ—à–µ–Ω–æ"),512),[[G,P.value==="abandoned"]])])])):N.value?(r(),d("div",Go,[t("div",Yo,[t("button",{class:$(["favorite-btn",{active:(Nt=(Dt=o.movieInfo)==null?void 0:Dt.lists)==null?void 0:Nt.isFavorite}]),onMouseenter:i[39]||(i[39]=T=>C("favorite")),onMouseleave:i[40]||(i[40]=T=>P.value=null),onClick:i[41]||(i[41]=T=>le(Q(q).FAVORITE))},[t("span",Zo,b((Vt=(Ot=o.movieInfo)==null?void 0:Ot.lists)!=null&&Vt.isFavorite?"favorite":"favorite_border"),1)],34),K(t("div",Qo,b("–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"),512),[[G,P.value==="favorite"]])]),t("div",Xo,[t("button",{class:$(["watching-btn",{active:(Kt=(Ft=o.movieInfo)==null?void 0:Ft.lists)==null?void 0:Kt.isWatching}]),onMouseenter:i[42]||(i[42]=T=>C("watching")),onMouseleave:i[43]||(i[43]=T=>P.value=null),onClick:i[44]||(i[44]=T=>le(Q(q).WATCHING))},[t("span",Jo,b((Wt=(qt=o.movieInfo)==null?void 0:qt.lists)!=null&&Wt.isWatching?"visibility_off":"visibility"),1)],34),K(t("div",es,b("–°–º–æ—Ç—Ä—é"),512),[[G,P.value==="watching"]])]),t("div",ts,[t("button",{class:$(["later-btn",{active:(Gt=(zt=o.movieInfo)==null?void 0:zt.lists)==null?void 0:Gt.isLater}]),onMouseenter:i[45]||(i[45]=T=>C("later")),onMouseleave:i[46]||(i[46]=T=>P.value=null),onClick:i[47]||(i[47]=T=>le(Q(q).LATER))},i[72]||(i[72]=[t("span",{class:"material-icons"},"watch_later",-1)]),34),K(t("div",ns,b("–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"),512),[[G,P.value==="later"]])]),t("div",os,[t("button",{class:$(["completed-btn",{active:(Zt=(Yt=o.movieInfo)==null?void 0:Yt.lists)==null?void 0:Zt.isCompleted}]),onMouseenter:i[48]||(i[48]=T=>C("completed")),onMouseleave:i[49]||(i[49]=T=>P.value=null),onClick:i[50]||(i[50]=T=>le(Q(q).COMPLETED))},[t("span",ss,b((Xt=(Qt=o.movieInfo)==null?void 0:Qt.lists)!=null&&Xt.isCompleted?"check_circle":"check_circle_outline"),1)],34),K(t("div",is,b("–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"),512),[[G,P.value==="completed"]])]),t("div",ls,[t("button",{class:$(["abandoned-btn",{active:(en=(Jt=o.movieInfo)==null?void 0:Jt.lists)==null?void 0:en.isAbandoned}]),onMouseenter:i[51]||(i[51]=T=>C("abandoned")),onMouseleave:i[52]||(i[52]=T=>P.value=null),onClick:i[53]||(i[53]=T=>le(Q(q).ABANDONED))},[t("span",as,b(((nn=(tn=o.movieInfo)==null?void 0:tn.lists)!=null&&nn.isAbandoned,"not_interested")),1)],34),K(t("div",rs,b("–ë—Ä–æ—à–µ–Ω–æ"),512),[[G,P.value==="abandoned"]])])])):M("",!0)])),ne(et,{ref_key:"notificationRef",ref:X},null,512)],64))}}},dn=we(us,[["__scopeId","data-v-2037cb5b"]]),ds={key:0,class:"carousel-container"},cs={class:"carousel-wrapper"},ms=["onClick"],vs=["src","alt"],fs={class:"video-name"},gs={key:0,class:"video-player"},ks=["src"],ys={__name:"TrailerCarousel",props:{videos:{type:Array,required:!0},activeVideoIndex:{type:Number,default:null}},emits:["select"],setup(o,{emit:e}){const l=Xe(),n=V(()=>l.isMobile),m=o,g=e,u=w(m.activeVideoIndex),y=w(null),v=w(!1),s=w(!1),c=()=>{if(!y.value)return;const{scrollLeft:R,scrollWidth:E,clientWidth:p}=y.value;v.value=R>0,s.value=R<E-p-1},a=R=>{if(!y.value)return;const E=y.value.querySelector(".carousel-item");if(!E)return;const p=E.clientWidth+16;y.value.scrollBy({left:p*R,behavior:"smooth"})},f=R=>{u.value=R,g("select",m.videos[R])},_=()=>c(),L=w([]),A=async R=>{try{return(await fetch("https://img.youtube.com/vi/".concat(R,"/0.jpg"))).ok}catch(E){return!1}};return Ne(async()=>{const R=m.videos.map(async p=>await A(p.videoId)?p:null),E=await Promise.all(R);L.value=E.filter(Boolean),c(),window.addEventListener("resize",_)}),Ie(()=>m.videos,async R=>{const E=R.map(async S=>await A(S.videoId)?S:null),p=await Promise.all(E);L.value=p.filter(Boolean)}),Ie(()=>m.activeVideoIndex,R=>{u.value=R}),it(()=>{window.removeEventListener("resize",_)}),(R,E)=>L.value.length?(r(),d("div",ds,[E[4]||(E[4]=t("h2",null,"–¢—Ä–µ–π–ª–µ—Ä—ã (YouTube)",-1)),t("div",cs,[K(t("button",{class:"scroll-button left",onClick:E[0]||(E[0]=p=>a(-1))},E[2]||(E[2]=[t("span",{class:"material-symbols-outlined"},"arrow_back_ios",-1)]),512),[[G,!n.value&&v.value]]),t("div",{ref_key:"carousel",ref:y,class:"carousel",onScroll:c},[(r(!0),d(te,null,fe(L.value,(p,S)=>(r(),d("div",{key:S,class:"carousel-item",onClick:U=>f(S)},[t("img",{src:"https://img.youtube.com/vi/".concat(p.videoId,"/0.jpg"),alt:p.name},null,8,vs),t("div",fs,b(p.name),1)],8,ms))),128))],544),K(t("button",{class:"scroll-button right",onClick:E[1]||(E[1]=p=>a(1))},E[3]||(E[3]=[t("span",{class:"material-symbols-outlined"},"arrow_forward_ios",-1)]),512),[[G,!n.value&&s.value]])]),u.value!==null?(r(),d("div",gs,[t("iframe",{src:o.videos[u.value].iframeUrl,frameborder:"0",allowfullscreen:""},null,8,ks)])):M("",!0)])):M("",!0)}},hs=we(ys,[["__scopeId","data-v-e60b5c29"]]),bs={class:"rating-container"},ps={class:"rating-display"},Cs={class:"average-rating"},ws={class:"rating-numbers"},Ms=["onClick","onMouseenter"],_s={key:0,class:"tooltip-footer"},Es={class:"rating-numbers mobile-rating-numbers"},Ls=["onClick"],Is={key:0,class:"mobile-modal-footer"},Rs={__name:"MovieRating",props:{kpId:{type:String,required:!0},showDash:{type:Boolean,default:!1}},setup(o){const e=Xe(),l=Je(),n=o,m=w(null),g=w(null),u=w(null),y=w(null),v=w(0),s=w(!1),c=w(!1);let a=null;const f=U=>U?U.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",_=()=>{a=setTimeout(()=>{s.value=!1,e.isMobile||(c.value=!1)},100)},L=()=>{a&&(clearTimeout(a),a=null),s.value=!0},A=()=>{e.isMobile&&(c.value=!c.value)},R=()=>{l.push("/login")},E=async()=>{try{const U=await En(n.kpId);g.value=U.user_rating,u.value=U.average_rating,y.value=f(U.vote_count)}catch(U){console.error("Error loading rating:",U)}},p=async U=>{var F;try{U===g.value?(await on(n.kpId,null),g.value=null,m.value.showNotification("–û—Ü–µ–Ω–∫–∞ —É–¥–∞–ª–µ–Ω–∞")):(await on(n.kpId,U),g.value=U,m.value.showNotification("–û—Ü–µ–Ω–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞")),e.isMobile&&(c.value=!1),E()}catch(N){console.error("Error setting rating:",N),((F=N.response)==null?void 0:F.status)===401?m.value.showNotification('–î–ª—è –æ—Ü–µ–Ω–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:R}):m.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ü–µ–Ω–∫–∏"),e.isMobile&&(c.value=!1)}},S=()=>{c.value=!1};return Ne(()=>{E()}),(U,F)=>(r(),d("div",bs,[t("div",ps,[t("a",{href:"#",class:$(["rating-link",{"has-rating":g.value}]),onMouseenter:F[0]||(F[0]=N=>s.value=!0),onMouseleave:_,onClick:xe(A,["prevent"])},[F[3]||(F[3]=t("img",{src:Dn,alt:"ReYohoho",class:"rating-logo"},null,-1)),t("span",Cs,b(u.value?u.value.toFixed(1).replace(/\.0$/,""):"‚Äî"),1)],34),K(t("div",{class:"rating-tooltip",onMouseenter:L,onMouseleave:_},[t("div",ws,[(r(),d(te,null,fe(10,N=>t("button",{key:N,class:$(["number-btn",{active:N===g.value,hover:N===v.value,"average-highlight":u.value&&N<=Math.round(u.value)}]),onClick:W=>p(N),onMouseenter:W=>v.value=N,onMouseleave:F[1]||(F[1]=W=>v.value=0)},b(N),43,Ms)),64))]),y.value?(r(),d("div",_s,"–û—Ü–µ–Ω–æ–∫: "+b(y.value),1)):M("",!0)],544),[[G,(s.value||c.value)&&!Q(e).isMobile]])]),ne(et,{ref_key:"notificationRef",ref:m},null,512),Q(e).isMobile&&c.value?(r(),d("div",{key:0,class:"mobile-modal-overlay",onClick:S},[t("div",{class:"mobile-modal",onClick:F[2]||(F[2]=xe(()=>{},["stop"]))},[t("div",{class:"mobile-modal-header"},[F[4]||(F[4]=t("h3",null,"–û—Ü–µ–Ω–∏—Ç—å —Ñ–∏–ª—å–º",-1)),t("button",{class:"close-button",onClick:S},"√ó")]),t("div",Es,[(r(),d(te,null,fe(10,N=>t("button",{key:N,class:$(["number-btn",{active:N===g.value,"average-highlight":u.value&&N<=Math.round(u.value)}]),onClick:W=>p(N)},b(N),11,Ls)),64))]),y.value?(r(),d("div",Is,"–û—Ü–µ–Ω–æ–∫: "+b(y.value),1)):M("",!0)])])):M("",!0)]))}},Ts=we(Rs,[["__scopeId","data-v-906480ed"]]),Ps={name:"EmojiPicker",props:{isVisible:{type:Boolean,default:!1}},emits:["emoji-selected","mouse-enter","mouse-leave","close"],data(){return{activeCategory:"smileys",categories:[{name:"smileys",icon:"üòÄ",emojis:["üòÄ","üòÉ","üòÑ","üòÅ","üòÜ","üòÖ","üòÇ","ü§£","üòä","üòá","üôÇ","üôÉ","üòâ","üòå","üòç","ü•∞","üòò","üòó","üòô","üòö","üòã","üòõ","üòù","üòú","ü§™","ü§®","üßê","ü§ì","üòé","ü§©","ü•≥"]},{name:"emotions",icon:"üò¢",emojis:["üò•","üò¢","üò≠","üò§","üò†","üò°","ü§¨","ü§Ø","üò≥","ü•µ","ü•∂","üò±","üò®","üò∞","üò•","üòì","ü§ó","ü§î","ü§≠","ü§´","ü§•","üò∂","üòê","üòë","üò¨","üôÑ","üòØ","üò¶","üòß","üòÆ","üò≤"]},{name:"gestures",icon:"üëç",emojis:["üëç","üëé","üëå","ü§å","ü§è","‚úåÔ∏è","ü§û","ü§ü","ü§ò","ü§ô","üëà","üëâ","üëÜ","üñï","üëá","‚òùÔ∏è","üëè","üôå","üëê","ü§≤","ü§ù","üôè","‚úçÔ∏è","üí™","ü¶æ","ü¶ø","ü¶µ","ü¶∂","üëÇ","ü¶ª","üëÉ"]},{name:"hearts",icon:"‚ù§Ô∏è",emojis:["‚ù§Ô∏è","üß°","üíõ","üíö","üíô","üíú","ü§é","üñ§","ü§ç","üíî","‚ù£Ô∏è","üíï","üíû","üíì","üíó","üíñ","üíò","üíù","üíü","‚ô•Ô∏è","üíØ","üí¢","üí•","üí´","üí¶","üí®","üï≥Ô∏è","üí£","üí¨","üëÅÔ∏è‚Äçüó®Ô∏è","üó®Ô∏è"]},{name:"objects",icon:"üéâ",emojis:["üéâ","üéä","üéà","üéÅ","üéÄ","üéÇ","üç∞","üßÅ","üç≠","üç¨","üç´","üç©","üç™","üçï","üçî","üçü","üå≠","ü•™","üåÆ","üåØ","ü•ô","ü•ö","üç≥","ü•ò","üç≤","ü•ó","üçø","üßà","üßÄ","ü•®","ü•Ø"]}]}},computed:{currentEmojis(){const o=this.categories.find(e=>e.name===this.activeCategory);return o?o.emojis:[]}},methods:{selectEmoji(o){this.$emit("emoji-selected",o)}}},As={class:"emoji-categories"},Ss=["onClick"],Us={class:"emoji-grid"},js=["onClick"];function $s(o,e,l,n,m,g){return l.isVisible?(r(),d("div",{key:0,class:"emoji-picker",onMouseenter:e[1]||(e[1]=u=>o.$emit("mouse-enter")),onMouseleave:e[2]||(e[2]=u=>o.$emit("mouse-leave"))},[t("button",{class:"close-btn mobile-only",onClick:e[0]||(e[0]=u=>o.$emit("close"))},e[3]||(e[3]=[t("i",{class:"fas fa-times"},null,-1)])),t("div",As,[(r(!0),d(te,null,fe(m.categories,u=>(r(),d("button",{key:u.name,onClick:y=>m.activeCategory=u.name,class:$([{active:m.activeCategory===u.name},"category-btn"]),type:"button"},b(u.icon),11,Ss))),128))]),t("div",Us,[(r(!0),d(te,null,fe(g.currentEmojis,u=>(r(),d("button",{key:u,onClick:y=>g.selectEmoji(u),class:"emoji-btn",type:"button"},b(u),9,js))),128))])],32)):M("",!0)}const lt=we(Ps,[["render",$s],["__scopeId","data-v-5f18a3b7"]]),xs=async o=>{const e=await Ln();return await o(e)},Bs=async o=>{const{data:e}=await xs(l=>l.get("/search_emotes/".concat(o)));return e.emotes||[]},Hs={name:"ImagePicker",props:{isVisible:{type:Boolean,required:!0},currentUser:{type:Object,default:null}},emits:["image-selected","mouse-enter","mouse-leave","close","login-required"],setup(o,{emit:e}){const l=w(""),n=w([]),m=w(null),g=w(!1),y=In(async a=>{if(!o.currentUser){console.warn("–ü–æ–ø—ã—Ç–∫–∞ –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏");return}if(!a.trim()){n.value=[],g.value=!1;return}g.value=!0;try{n.value=await Bs(a)}catch(f){console.error("Error searching images:",f),n.value=[]}finally{g.value=!1}},300),v=()=>{if(!o.currentUser){e("login-required");return}l.value.trim()&&(g.value=!0),y(l.value)},s=a=>{if(!o.currentUser){e("login-required");return}e("image-selected",a),e("close")},c=()=>{setTimeout(()=>{o.isVisible&&e("mouse-leave")},100)};return Ie(()=>o.isVisible,a=>{a&&(l.value="",n.value=[],g.value=!1)}),{searchQuery:l,images:n,searchInput:m,isLoading:g,handleSearch:v,selectImage:s,handleInputBlur:c}}},Ds={key:0,class:"auth-required"},Ns={class:"auth-message"},Os={key:1},Vs={class:"image-picker-header"},Fs={class:"image-content"},Ks={key:0,class:"loading-spinner"},qs={key:1,class:"image-grid"},Ws=["onClick"],zs=["src","alt"],Gs={key:2,class:"no-images"},Ys={key:3,class:"no-search"};function Zs(o,e,l,n,m,g){return l.isVisible?(r(),d("div",{key:0,class:"image-picker",onMouseenter:e[7]||(e[7]=u=>o.$emit("mouse-enter")),onMouseleave:e[8]||(e[8]=u=>o.$emit("mouse-leave")),onClick:e[9]||(e[9]=xe(()=>{},["stop"]))},[t("button",{class:"close-btn mobile-only",onClick:e[0]||(e[0]=u=>o.$emit("close"))},e[10]||(e[10]=[t("i",{class:"fas fa-times"},null,-1)])),l.currentUser?(r(),d("div",Os,[t("div",Vs,[K(t("input",{ref:"searchInput",type:"text","onUpdate:modelValue":e[2]||(e[2]=u=>n.searchQuery=u),placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–º–∞–π–ª–∞ 7tv",class:"image-search-input",onInput:e[3]||(e[3]=(...u)=>n.handleSearch&&n.handleSearch(...u)),onClick:e[4]||(e[4]=xe(()=>{},["stop"])),onFocus:e[5]||(e[5]=u=>o.$emit("mouse-enter")),onBlur:e[6]||(e[6]=(...u)=>n.handleInputBlur&&n.handleInputBlur(...u))},null,544),[[ze,n.searchQuery]])]),t("div",Fs,[n.isLoading?(r(),d("div",Ks,e[14]||(e[14]=[t("div",{class:"spinner"},null,-1),t("p",null,"–ü–æ–∏—Å–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...",-1)]))):n.images.length>0?(r(),d("div",qs,[(r(!0),d(te,null,fe(n.images,(u,y)=>(r(),d("div",{key:y,class:"image-item",onClick:v=>n.selectImage(u)},[t("img",{src:u,alt:"Image "+(y+1)},null,8,zs)],8,Ws))),128))])):n.searchQuery.trim()?(r(),d("div",Gs,e[15]||(e[15]=[t("p",null,"–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤",-1)]))):(r(),d("div",Ys,e[16]||(e[16]=[t("p",null,"–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞",-1)])))])])):(r(),d("div",Ds,[t("div",Ns,[e[11]||(e[11]=t("i",{class:"fas fa-lock"},null,-1)),e[12]||(e[12]=t("h3",null,"–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è",-1)),e[13]||(e[13]=t("p",null,"–î–ª—è –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç",-1)),t("button",{class:"login-button",onClick:e[1]||(e[1]=u=>o.$emit("login-required"))},"–í–æ–π—Ç–∏")])]))],32)):M("",!0)}const at=we(Hs,[["render",Zs],["__scopeId","data-v-be44d2b6"]]),Qs={name:"LinkModal",props:{isVisible:{type:Boolean,default:!1},selectedText:{type:String,default:""}},emits:["close","submit"],setup(o,{emit:e}){const l=w(""),n=w(""),m=w(null),g=w(null),u=V(()=>/^https?:\/\/.+/.test(l.value.trim())&&n.value.trim()),y=()=>{e("close"),s()},v=()=>{u.value&&(e("submit",{url:l.value.trim(),title:n.value.trim()}),y())},s=()=>{l.value="",n.value=""},c=a=>{var f;a.key==="Enter"?(a.preventDefault(),u.value?v():a.target===m.value&&l.value.trim()&&((f=g.value)==null||f.focus())):a.key==="Escape"&&y()};return Ie(()=>o.isVisible,a=>{a&&(o.selectedText.trim()&&(n.value=o.selectedText.trim()),ge(()=>{var f;(f=m.value)==null||f.focus()}))}),{linkUrl:l,linkTitle:n,urlInput:m,titleInput:g,isValidLink:u,closeModal:y,submitLink:v,handleKeydown:c}}},Xs={class:"link-modal-header"},Js={class:"link-modal-content"},ei={class:"form-group"},ti={class:"form-group"},ni={class:"link-modal-footer"},oi=["disabled"];function si(o,e,l,n,m,g){return l.isVisible?(r(),d("div",{key:0,class:"link-modal-overlay",onClick:e[8]||(e[8]=(...u)=>n.closeModal&&n.closeModal(...u))},[t("div",{class:"link-modal",onClick:e[7]||(e[7]=xe(()=>{},["stop"]))},[t("div",Xs,[e[10]||(e[10]=t("h3",null,"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É",-1)),t("button",{class:"close-button",onClick:e[0]||(e[0]=(...u)=>n.closeModal&&n.closeModal(...u))},e[9]||(e[9]=[t("i",{class:"fas fa-times"},null,-1)]))]),t("div",Js,[t("div",ei,[e[11]||(e[11]=t("label",{for:"link-url"},"URL —Å—Å—ã–ª–∫–∏:",-1)),K(t("input",{id:"link-url",ref:"urlInput","onUpdate:modelValue":e[1]||(e[1]=u=>n.linkUrl=u),type:"url",placeholder:"https://example.com",class:"link-input",onKeydown:e[2]||(e[2]=(...u)=>n.handleKeydown&&n.handleKeydown(...u))},null,544),[[ze,n.linkUrl]])]),t("div",ti,[e[12]||(e[12]=t("label",{for:"link-title"},"–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏:",-1)),K(t("input",{id:"link-title",ref:"titleInput","onUpdate:modelValue":e[3]||(e[3]=u=>n.linkTitle=u),type:"text",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è",class:"link-input",onKeydown:e[4]||(e[4]=(...u)=>n.handleKeydown&&n.handleKeydown(...u))},null,544),[[ze,n.linkTitle]])])]),t("div",ni,[t("button",{class:"cancel-button",onClick:e[5]||(e[5]=(...u)=>n.closeModal&&n.closeModal(...u))},"–û—Ç–º–µ–Ω–∞"),t("button",{class:"submit-button",disabled:!n.isValidLink,onClick:e[6]||(e[6]=(...u)=>n.submitLink&&n.submitLink(...u))},"–î–æ–±–∞–≤–∏—Ç—å",8,oi)])])])):M("",!0)}const rt=we(Qs,[["render",si],["__scopeId","data-v-4b811824"]]);function ii(){const o=w(!1),e=w(!1),l=w(!1),n=()=>{e.value=!0},m=()=>{e.value=!1,setTimeout(()=>{!e.value&&!l.value&&(o.value=!1)},300)},g=()=>{l.value=!0,o.value=!0},u=()=>{l.value=!1,setTimeout(()=>{!e.value&&!l.value&&(o.value=!1)},300)},y=()=>{o.value=!1};return{showEmojiPicker:o,isEmojiHovered:e,isButtonHovered:l,handleEmojiMouseEnter:n,handleEmojiMouseLeave:m,handleButtonMouseEnter:g,handleButtonMouseLeave:u,closeEmojiPicker:y,insertEmoji:(c,a,f,_)=>{const L=a.value;if(L){const A=L.selectionStart,R=L.selectionEnd,E=f.value.substring(0,A),p=f.value.substring(R),S=E+c+p;_(S),ge(()=>{L.focus(),L.setSelectionRange(A+c.length,A+c.length),L.style.height&&(L.style.height="auto",L.style.height="".concat(Math.min(L.scrollHeight,200),"px"))})}else _(f.value+c)},handleGlobalClick:c=>{!c.target.closest(".emoji-picker")&&!c.target.closest(".emoji-button-inline")&&y()}}}function li(){const o=w(!1),e=w(!1),l=w(!1),n=()=>{e.value=!0},m=()=>{e.value=!1,setTimeout(()=>{!e.value&&!l.value&&(o.value=!1)},300)},g=()=>{l.value=!0,o.value=!0},u=()=>{l.value=!1,setTimeout(()=>{!e.value&&!l.value&&(o.value=!1)},300)},y=()=>{o.value=!1};return{showImagePicker:o,isImageHovered:e,isButtonHovered:l,handleImageMouseEnter:n,handleImageMouseLeave:m,handleImageButtonMouseEnter:g,handleButtonMouseLeave:u,closeImagePicker:y,insertImage:(c,a,f,_)=>{const L=a.value;if(L){const A=L.selectionStart,R=L.selectionEnd,E="[img]".concat(c,"[/img]"),p=f.value.slice(0,A)+E+f.value.slice(R);_(p),ge(()=>{L.focus(),L.setSelectionRange(A+E.length,A+E.length),L.style.height&&(L.style.height="auto",L.style.height="".concat(Math.min(L.scrollHeight,200),"px"))})}else{const A="[img]".concat(c,"[/img]");_(f.value+A)}},handleGlobalClick:c=>{!c.target.closest(".image-picker")&&!c.target.closest(".emoji-button-inline")&&y()}}}function ai(){const o=w(!1),e=w("");return{showLinkModal:o,selectedTextForLink:e,insertLink:(u,y)=>{const v=u.value;if(v){const s=v.selectionStart,c=v.selectionEnd,a=y.value.slice(s,c);e.value=a.trim()||""}o.value=!0},insertLinkFromModal:(u,y,v,s)=>{const c=y.value;if(c){const a=c.selectionStart,f=c.selectionEnd,_="[link=".concat(u.url,"]").concat(u.title,"[/link]"),L=v.value.slice(0,a)+_+v.value.slice(f);s(L),ge(()=>{c.focus(),c.setSelectionRange(a+_.length,a+_.length),c.style.height&&(c.style.height="auto",c.style.height="".concat(Math.min(c.scrollHeight,200),"px"))})}},closeLinkModal:()=>{o.value=!1},insertSpoiler:(u,y,v)=>{const s=u.value;if(s){const c=s.selectionStart,a=s.selectionEnd,f=y.value.slice(c,a);let _;f.trim()?_="[spoiler]".concat(f,"[/spoiler]"):_="[spoiler][/spoiler]";const L=y.value.slice(0,c)+_+y.value.slice(a);v(L),ge(()=>{if(s.focus(),f.trim())s.setSelectionRange(c+_.length,c+_.length);else{const A=c+9;s.setSelectionRange(A,A)}s.style.height&&(s.style.height="auto",s.style.height="".concat(Math.min(s.scrollHeight,200),"px"))})}}}}function ri(){return{autoResize:l=>{const n=l==null?void 0:l.target;n&&(n.style.height="auto",n.style.height="".concat(Math.min(n.scrollHeight,200),"px"))},autoResizeElement:l=>{l&&(l.style.height="auto",l.style.height="".concat(Math.min(l.scrollHeight,200),"px"))}}}function ut(){const o=ii(),e=li(),l=ai(),{autoResize:n,autoResizeElement:m}=ri(),g=()=>{o.isButtonHovered.value=!0,e.isButtonHovered.value=!0,o.showEmojiPicker.value=!0,e.showImagePicker.value=!1},u=()=>{o.isButtonHovered.value=!0,e.isButtonHovered.value=!0,e.showImagePicker.value=!0,o.showEmojiPicker.value=!1},y=()=>{o.isButtonHovered.value=!1,e.isButtonHovered.value=!1,setTimeout(()=>{!o.isEmojiHovered.value&&!e.isImageHovered.value&&!o.isButtonHovered.value&&!e.isButtonHovered.value&&(o.showEmojiPicker.value=!1,e.showImagePicker.value=!1)},300)},v=()=>{o.showEmojiPicker.value=!1,e.showImagePicker.value=!1},s=A=>{!A.target.closest(".emoji-picker")&&!A.target.closest(".image-picker")&&!A.target.closest(".emoji-button-inline")&&v()},c=(A,R,E,p)=>{o.insertEmoji(A,R,E,p)},a=(A,R,E,p)=>{e.insertImage(A,R,E,p)},f=(A,R,E)=>{l.insertLink(A,R,E)},_=(A,R,E,p)=>{l.insertLinkFromModal(A,R,E,p)},L=(A,R,E)=>{l.insertSpoiler(A,R,E)};return Ne(()=>{document.addEventListener("click",s)}),it(()=>{document.removeEventListener("click",s)}),{showEmojiPicker:o.showEmojiPicker,handleEmojiMouseEnter:o.handleEmojiMouseEnter,handleEmojiMouseLeave:o.handleEmojiMouseLeave,closeEmojiPicker:o.closeEmojiPicker,showImagePicker:e.showImagePicker,handleImageMouseEnter:e.handleImageMouseEnter,handleImageMouseLeave:e.handleImageMouseLeave,closeImagePicker:e.closeImagePicker,showLinkModal:l.showLinkModal,selectedTextForLink:l.selectedTextForLink,closeLinkModal:l.closeLinkModal,handleButtonMouseEnter:g,handleImageButtonMouseEnter:u,handleButtonMouseLeave:y,closeAllPickers:v,insertEmojiUniversal:c,insertImageUniversal:a,insertLinkUniversal:f,insertLinkFromModalUniversal:_,insertSpoilerUniversal:L,autoResize:n,autoResizeElement:m}}function gn(){const o=m=>{try{const g=new URL(m),u=g.hostname==="cdn.7tv.app"&&g.protocol==="https:"||g.pathname.includes("/api/7tv")&&g.protocol==="https:";return u||console.warn("URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç–∫–ª–æ–Ω–µ–Ω:",{url:m,hostname:g.hostname,protocol:g.protocol,reason:g.hostname!=="cdn.7tv.app"?"–Ω–µ—Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–π –¥–æ–º–µ–Ω":"–Ω–µ—Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª"}),u}catch(g){return console.warn("–ù–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–π URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:",m,"–û—à–∏–±–∫–∞:",g.message),!1}},e=m=>{const g=document.createElement("div");return g.textContent=m,g.innerHTML},l=m=>{if(!m)return"";let g=m;return g=g.replace(/\[spoiler\]\s*\[\/spoiler\]/g,""),g=g.replace(/\[img\]\s*\[\/img\]/g,""),g=g.replace(/\[link=[^\]]+\]\s*\[\/link\]/g,""),g=g.replace(/\[img\](.*?)\[\/img\]/g,(u,y)=>{const v=y.trim();if(o(v)){const s=e(v);return'<img src="'.concat(s,'" alt="7TV emote" class="inline-emoji" loading="lazy" />')}return"[–Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: ".concat(e(v),"]")}),g=g.replace(new RegExp("\\[spoiler\\](.*?)\\[\\/spoiler\\]","gs"),(u,y,v,s)=>{const c=e(y.trim());if(!c)return"";const a=v>0?s[v-1]:" ",f=v+u.length<s.length?s[v+u.length]:" ",_=a&&a!==" "&&a!=="\n"&&a!=="	",L=f&&f!==" "&&f!=="\n"&&f!=="	",A=_?" ":"",R=L?" ":"";return"".concat(A,'<span class="spoiler-text" onclick="this.classList.toggle(\'revealed\')" title="–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä">').concat(c,"</span>").concat(R)}),g=g.replace(/\[link=([^\]]+)\](.*?)\[\/link\]/g,(u,y,v)=>{const s=y.trim(),c=v.trim();if(!c)return"";if(/^https?:\/\/.+/.test(s)&&c){const f=e(s),_=e(c);return'<a href="'.concat(f,'" target="_blank" rel="noopener noreferrer" class="comment-link">').concat(_,"</a>")}return e(c||s)}),g};return{formatContent:l,formatContentWithTruncation:(m,g=300,u=!1)=>{if(!m)return"";let y=m;if(m.length>g&&!u){let v=m.slice(0,g);const c=(m.match(/\[img\].*?\[\/img\]/g)||[]).length,a=(v.match(/\[img\].*?\[\/img\]/g)||[]).length,f=c-a,_=v.lastIndexOf("[img]"),L=v.lastIndexOf("[/img]");_>L&&_!==-1&&(v=m.slice(0,_)),v=v.trim();const A=["[img","[im","[i","["];for(const p of A)if(v.endsWith(p)){const S=v.lastIndexOf("[");if(S!==-1){v=v.slice(0,S).trim();break}}const R=["[/img","[/im","[/i","[/"];for(const p of R)if(v.endsWith(p)){const S=v.lastIndexOf("[");if(S!==-1){v=v.slice(0,S).trim();break}}let E="...";f>0&&(E="... (+".concat(f," ").concat(f===1?"–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ":"–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π",")")),y=v+E}return l(y)},isValidImageUrl:o,escapeHtml:e}}const ui=o=>{if(!o)return"";const e=o.substring(0,4),l=o.substring(4,6),n=o.substring(6,8),m=o.substring(9,11),g=o.substring(11,13),u=o.substring(13,15);return new Date(Date.UTC(parseInt(e),parseInt(l)-1,parseInt(n),parseInt(m),parseInt(g),parseInt(u))).toLocaleDateString("ru-RU",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone})},di=o=>{if(!o)return"";const e=o.substring(0,4),l=o.substring(4,6),n=o.substring(6,8),m=o.substring(9,11),g=o.substring(11,13),u=o.substring(13,15),y=new Date(Date.UTC(parseInt(e),parseInt(l)-1,parseInt(n),parseInt(m),parseInt(g),parseInt(u))),s=Math.floor((new Date-y)/1e3);if(s<60)return"—Ç–æ–ª—å–∫–æ —á—Ç–æ";const c=Math.floor(s/60);if(c<60)return"".concat(c," ").concat(ci(c)," –Ω–∞–∑–∞–¥");const a=Math.floor(c/60);if(a<24)return"".concat(a," ").concat(mi(a)," –Ω–∞–∑–∞–¥");const f=Math.floor(a/24);if(f<7)return"".concat(f," ").concat(vi(f)," –Ω–∞–∑–∞–¥");const _=Math.floor(f/7);if(_<4)return"".concat(_," ").concat(fi(_)," –Ω–∞–∑–∞–¥");const L=Math.floor(f/30);if(L<12)return"".concat(L," ").concat(gi(L)," –Ω–∞–∑–∞–¥");const A=Math.floor(f/365);return"".concat(A," ").concat(ki(A)," –Ω–∞–∑–∞–¥")},ci=o=>o%10===1&&o%100!==11?"–º–∏–Ω—É—Ç—É":[2,3,4].includes(o%10)&&![12,13,14].includes(o%100)?"–º–∏–Ω—É—Ç—ã":"–º–∏–Ω—É—Ç",mi=o=>o%10===1&&o%100!==11?"—á–∞—Å":[2,3,4].includes(o%10)&&![12,13,14].includes(o%100)?"—á–∞—Å–∞":"—á–∞—Å–æ–≤",vi=o=>o%10===1&&o%100!==11?"–¥–µ–Ω—å":[2,3,4].includes(o%10)&&![12,13,14].includes(o%100)?"–¥–Ω—è":"–¥–Ω–µ–π",fi=o=>o%10===1&&o%100!==11?"–Ω–µ–¥–µ–ª—é":[2,3,4].includes(o%10)&&![12,13,14].includes(o%100)?"–Ω–µ–¥–µ–ª–∏":"–Ω–µ–¥–µ–ª—å",gi=o=>o%10===1&&o%100!==11?"–º–µ—Å—è—Ü":[2,3,4].includes(o%10)&&![12,13,14].includes(o%100)?"–º–µ—Å—è—Ü–∞":"–º–µ—Å—è—Ü–µ–≤",ki=o=>o%10===1&&o%100!==11?"–≥–æ–¥":[2,3,4].includes(o%10)&&![12,13,14].includes(o%100)?"–≥–æ–¥–∞":"–ª–µ—Ç",yi=o=>o===1?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π":o>=2&&o<=4?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è":"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤",hi=o=>{if(!o)return"?";const e=o.split(" ");return e.length===1?o.slice(0,2).toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()},bi={name:"CommentItem",components:{EmojiPicker:lt,ImagePicker:at,LinkModal:rt},props:{comment:{type:Object,required:!0,default:()=>({username:"–ê–Ω–æ–Ω–∏–º",user_avatar:null,content:"",created_at:new Date().toISOString(),rating:0,replies:[]})},currentUser:{type:Object,required:!0,default:()=>({})},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate"],setup(o,{emit:e}){var x,O;const l=Je(),n=V(()=>{var h;return o.editingCommentId===((h=o.comment)==null?void 0:h.id)}),m=w(((x=o.comment)==null?void 0:x.content)||""),g=w(((O=o.comment)==null?void 0:O.user_rating)||0),u=w(null),y=w(null),{showEmojiPicker:v,showImagePicker:s,showLinkModal:c,selectedTextForLink:a,handleEmojiMouseEnter:f,handleEmojiMouseLeave:_,handleImageMouseEnter:L,handleImageMouseLeave:A,handleButtonMouseEnter:R,handleImageButtonMouseEnter:E,handleButtonMouseLeave:p,closeEmojiPicker:S,closeImagePicker:U,closeLinkModal:F,insertEmojiUniversal:N,insertImageUniversal:W,insertLinkUniversal:P,insertLinkFromModalUniversal:ae,insertSpoilerUniversal:ue,autoResize:X}=ut(),{formatContentWithTruncation:ye}=gn();Ne(async()=>{var h;if((h=o.comment)!=null&&h.user_avatar){const B=await Rn();u.value="".concat(B).concat(o.comment.user_avatar)}});const de=V(()=>{var h;return o.currentUser&&((h=o.comment)==null?void 0:h.user_id)===o.currentUser.id}),ce=V(()=>{var h;return o.currentUser&&((h=o.comment)==null?void 0:h.user_id)===o.currentUser.id||o.currentUser&&o.currentUser.is_admin===1}),C=V(()=>{var h,B,me;return((h=o.comment)==null?void 0:h.updated_at)&&((B=o.comment)==null?void 0:B.updated_at)!==((me=o.comment)==null?void 0:me.created_at)}),z=V(()=>{var h,B;return(h=o.comment)!=null&&h.is_deleted?!1:(((B=o.comment)==null?void 0:B.rating)||0)<=-3}),be=V(()=>z.value),pe=w(!1),J=V(()=>{var h,B;return(h=o.comment)!=null&&h.is_deleted?null:(((B=o.comment)==null?void 0:B.rating)||0)<=-3?"lowRating":null}),he=()=>{var h,B;e("start-edit",(h=o.comment)==null?void 0:h.id),m.value=((B=o.comment)==null?void 0:B.content)||"",ge(()=>{y.value&&(y.value.focus(),X({target:y.value}))})},ee=()=>{var h;e("cancel-edit"),m.value=((h=o.comment)==null?void 0:h.content)||""},j=()=>{var h;m.value.trim()&&e("edit",(h=o.comment)==null?void 0:h.id,m.value.trim())},k=()=>{var h;confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π?")&&e("delete",(h=o.comment)==null?void 0:h.id)},Y=h=>{var B,me;g.value===h?(g.value=0,e("rate",(B=o.comment)==null?void 0:B.id,h)):(g.value=h,e("rate",(me=o.comment)==null?void 0:me.id,h))},oe=h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),j())},D=V(()=>{var h,B;return((B=(h=o.comment)==null?void 0:h.content)==null?void 0:B.length)>300}),Ce=w(!1),se=V(()=>{var h;return ye((h=o.comment)==null?void 0:h.content,300,Ce.value)}),Re=()=>{Ce.value=!Ce.value},Te=()=>{console.log("Avatar load error, falling back to initials"),u.value=null,ge(()=>{const h=document.querySelector(".avatar-placeholder");h&&(h.style.display="flex")})},re=()=>{l.push("/login")},ie=h=>{N(h,y,m,B=>{m.value=B})},Pe=h=>{W(h,y,m,B=>{m.value=B})},Le=()=>{ue(y,m,h=>{m.value=h})},Be=()=>{P(y,m,h=>{m.value=h})},Ae=h=>{ae(h,y,m,B=>{m.value=B})},He=h=>{X(h)};return Ie(m,()=>{n.value&&y.value&&ge(()=>{He({target:y.value})})}),{isEditing:n,editContent:m,userRating:g,isCommentOwner:de,canDeleteComment:ce,isCommentEdited:C,formatDate:ui,formatRelativeTime:di,startEdit:he,cancelEdit:ee,saveEdit:j,confirmDelete:k,rateComment:Y,avatarUrl:u,getInitials:hi,handleEditKeydown:oe,isCommentHidden:be,showHiddenComment:pe,hiddenCommentReason:J,isLongComment:D,isExpanded:Ce,formattedContent:se,toggleExpanded:Re,autoResizeEdit:He,editTextarea:y,showEmojiPicker:v,showImagePicker:s,insertEmojiEdit:ie,insertImageEdit:Pe,insertSpoilerEdit:Le,insertLinkEdit:Be,handleEmojiMouseEnter:f,handleEmojiMouseLeave:_,handleImageMouseEnter:L,handleImageMouseLeave:A,closeEmojiPicker:S,closeImagePicker:U,handleButtonMouseEnter:R,handleButtonMouseLeave:p,handleImageButtonMouseEnter:E,handleAvatarError:Te,openLogin:re,showLinkModal:c,selectedTextForLink:a,insertLinkFromModal:Ae,closeLinkModal:F}}},pi=["data-comment-id"],Ci={class:"comment-header"},wi={class:"user-info"},Mi=["href"],_i={class:"user-avatar"},Ei=["src","alt"],Li={class:"user-details"},Ii=["href"],Ri={class:"username"},Ti={key:0,class:"user-rating"},Pi=["title"],Ai=["title"],Si={class:"comment-content"},Ui={key:0,class:"hidden-comment-warning"},ji={key:1},$i={key:0,class:"deleted-comment"},xi={key:1},Bi={key:0,class:"edit-form"},Hi={class:"edit-textarea-container"},Di={class:"edit-footer"},Ni={class:"edit-actions"},Oi=["disabled"],Vi={class:"character-counter-container"},Fi={key:1,class:"comment-text-container"},Ki=["innerHTML"],qi={class:"comment-footer"},Wi={class:"comment-actions"},zi={class:"rating-buttons"},Gi={class:"action-buttons"};function Yi(o,e,l,n,m,g){var s,c,a,f,_,L,A,R,E,p,S,U,F,N,W,P,ae,ue,X,ye,de,ce;const u=ke("EmojiPicker"),y=ke("ImagePicker"),v=ke("LinkModal");return r(),d("div",{class:"comment-item","data-comment-id":(s=l.comment)==null?void 0:s.id},[t("div",Ci,[t("div",wi,[t("a",{href:"/lists/".concat((c=l.comment)==null?void 0:c.user_id),target:"_blank",rel:"noopener noreferrer",class:"user-avatar-link"},[t("div",_i,[n.avatarUrl?(r(),d("img",{key:0,src:n.avatarUrl,alt:((a=l.comment)==null?void 0:a.username)||"–ê–Ω–æ–Ω–∏–º",onError:e[0]||(e[0]=(...C)=>n.handleAvatarError&&n.handleAvatarError(...C)),onerror:"this.onerror=null; this.style.display='none'; this.nextElementSibling.style.display='flex';"},null,40,Ei)):(r(),d("div",{key:1,class:"avatar-placeholder",style:Qe({display:n.avatarUrl?"none":"flex"})},b(n.getInitials(((f=l.comment)==null?void 0:f.username)||"–ê–Ω–æ–Ω–∏–º")),5))])],8,Mi),t("div",Li,[t("a",{href:"/lists/".concat((_=l.comment)==null?void 0:_.user_id),target:"_blank",rel:"noopener noreferrer",class:"username-link"},[t("span",Ri,b(((L=l.comment)==null?void 0:L.username)||"–ê–Ω–æ–Ω–∏–º"),1)],8,Ii),(A=l.comment)!=null&&A.user_movie_rating?(r(),d("span",Ti,[e[19]||(e[19]=t("i",{class:"fas fa-star"},null,-1)),Z(" "+b(l.comment.user_movie_rating),1)])):M("",!0),t("span",{class:"date",title:n.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((R=l.comment)==null?void 0:R.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(n.formatDate((E=l.comment)==null?void 0:E.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((p=l.comment)==null?void 0:p.created_at))},[Z(b(n.formatRelativeTime((S=l.comment)==null?void 0:S.created_at))+" ",1),n.isCommentEdited?(r(),d("i",{key:0,class:"fas fa-pencil-alt edit-icon",title:n.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((U=l.comment)==null?void 0:U.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(n.formatDate((F=l.comment)==null?void 0:F.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((N=l.comment)==null?void 0:N.created_at))},null,8,Ai)):M("",!0)],8,Pi)])])]),t("div",Si,[!((W=l.comment)!=null&&W.is_deleted)&&n.isCommentHidden&&!n.showHiddenComment?(r(),d("div",Ui,[n.hiddenCommentReason==="lowRating"?(r(),d("p",{key:0,class:"warning-text",onClick:e[1]||(e[1]=C=>n.showHiddenComment=!0)},e[20]||(e[20]=[t("i",{class:"fas fa-eye-slash"},null,-1),Z(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–∫—Ä—ã—Ç –∏–∑-–∑–∞ –Ω–∏–∑–∫–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å. ")]))):M("",!0)])):(r(),d("div",ji,[(P=l.comment)!=null&&P.is_deleted?(r(),d("div",$i,e[21]||(e[21]=[t("p",{class:"deleted-message"},[t("i",{class:"fas fa-trash"}),Z(" –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —É–¥–∞–ª—ë–Ω ")],-1)]))):(r(),d("div",xi,[n.isEditing?(r(),d("div",Bi,[t("div",Hi,[K(t("textarea",{ref:"editTextarea","onUpdate:modelValue":e[2]||(e[2]=C=>n.editContent=C),class:"edit-textarea",rows:"3",maxlength:"1500",onKeydown:e[3]||(e[3]=(...C)=>n.handleEditKeydown&&n.handleEditKeydown(...C)),onInput:e[4]||(e[4]=(...C)=>n.autoResizeEdit&&n.autoResizeEdit(...C))},null,544),[[ze,n.editContent]])]),t("div",Di,[t("div",Ni,[t("button",{onClick:e[5]||(e[5]=(...C)=>n.cancelEdit&&n.cancelEdit(...C)),class:"cancel-button"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:e[6]||(e[6]=(...C)=>n.saveEdit&&n.saveEdit(...C)),class:"save-button",disabled:!n.editContent.trim()||n.editContent.length>1500}," –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ",8,Oi)]),t("div",Vi,[t("div",{class:$(["character-counter-inline",{"near-limit":n.editContent.length>1400,"at-limit":n.editContent.length>=1500}])},b(n.editContent.length)+"/1500 ",3),t("button",{type:"button",class:$(["emoji-button-inline",{active:n.showEmojiPicker}]),onMouseenter:e[7]||(e[7]=(...C)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...C)),onMouseleave:e[8]||(e[8]=(...C)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...C))}," üòä ",34),t("button",{type:"button",class:$(["emoji-button-inline",{active:n.showImagePicker}]),onMouseenter:e[9]||(e[9]=(...C)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...C)),onMouseleave:e[10]||(e[10]=(...C)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...C))},e[22]||(e[22]=[Ge('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-b9b9c094><g id="logo" data-v-b9b9c094><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-b9b9c094></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-b9b9c094></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-b9b9c094></path></g></svg>',1)]),34),t("button",{type:"button",class:"emoji-button-inline spoiler-button",onClick:e[11]||(e[11]=(...C)=>n.insertSpoilerEdit&&n.insertSpoilerEdit(...C)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},e[23]||(e[23]=[t("i",{class:"fas fa-eye-slash"},null,-1)])),t("button",{type:"button",class:"emoji-button-inline link-button",onClick:e[12]||(e[12]=(...C)=>n.insertLinkEdit&&n.insertLinkEdit(...C)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},e[24]||(e[24]=[t("i",{class:"fas fa-link"},null,-1)])),ne(u,{"is-visible":n.showEmojiPicker,onEmojiSelected:n.insertEmojiEdit,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),ne(y,{"is-visible":n.showImagePicker,"current-user":l.currentUser,onImageSelected:n.insertImageEdit,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:n.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),ne(v,{"is-visible":n.showLinkModal,"selected-text":n.selectedTextForLink,onClose:n.closeLinkModal,onSubmit:n.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):(r(),d("div",Fi,[t("p",{class:$(["comment-text",{truncated:n.isLongComment&&!n.isExpanded}]),innerHTML:n.formattedContent},null,10,Ki),n.isLongComment?(r(),d("button",{key:0,onClick:e[13]||(e[13]=(...C)=>n.toggleExpanded&&n.toggleExpanded(...C)),class:"expand-button"},b(n.isExpanded?"–°–≤–µ—Ä–Ω—É—Ç—å":"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å"),1)):M("",!0)]))]))]))]),t("div",qi,[t("div",Wi,[t("div",zi,[!n.isCommentOwner&&!((ae=l.comment)!=null&&ae.is_deleted)?(r(),d("button",{key:0,onClick:e[14]||(e[14]=C=>n.rateComment(1)),class:$(["rating-button",{"rated-up":n.userRating===1}])},e[25]||(e[25]=[t("i",{class:"fas fa-thumbs-up"},null,-1)]),2)):M("",!0),t("span",{class:$(["rating-count",{"rating-positive":n.userRating===1,"rating-negative":n.userRating===-1}])},b(((ue=l.comment)==null?void 0:ue.rating)||0),3),!n.isCommentOwner&&!((X=l.comment)!=null&&X.is_deleted)?(r(),d("button",{key:1,onClick:e[15]||(e[15]=C=>n.rateComment(-1)),class:$(["rating-button",{"rated-down":n.userRating===-1}])},e[26]||(e[26]=[t("i",{class:"fas fa-thumbs-down"},null,-1)]),2)):M("",!0)]),t("div",Gi,[!l.currentUser||l.currentUser.allow_comments===1?(r(),d("button",{key:0,onClick:e[16]||(e[16]=C=>o.$emit("reply",l.comment)),class:"action-button reply-button"},e[27]||(e[27]=[t("i",{class:"fas fa-reply"},null,-1)]))):M("",!0),n.isCommentOwner&&!((ye=l.comment)!=null&&ye.is_deleted)&&!n.isEditing&&((de=l.currentUser)==null?void 0:de.allow_comments)===1?(r(),d("button",{key:1,onClick:e[17]||(e[17]=(...C)=>n.startEdit&&n.startEdit(...C)),class:"action-button edit-button"},e[28]||(e[28]=[t("i",{class:"fas fa-edit"},null,-1)]))):M("",!0),n.canDeleteComment&&!((ce=l.comment)!=null&&ce.is_deleted)?(r(),d("button",{key:2,onClick:e[18]||(e[18]=(...C)=>n.confirmDelete&&n.confirmDelete(...C)),class:"action-button delete-button"},e[29]||(e[29]=[t("i",{class:"fas fa-trash"},null,-1)]))):M("",!0)])])])],8,pi)}const Zi=we(bi,[["render",Yi],["__scopeId","data-v-b9b9c094"]]),Qi={name:"CommentThread",components:{CommentItem:Zi,EmojiPicker:lt,ImagePicker:at,LinkModal:rt},props:{comment:{type:Object,required:!0},currentUser:{type:Object,required:!0},replyTo:{type:Object,default:null},replyContent:{type:String,default:""},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate","submit-reply","cancel-reply","update-reply-content","reply-keydown"],setup(o,{emit:e}){const l=w(null),n=w(!0),{showEmojiPicker:m,showImagePicker:g,showLinkModal:u,selectedTextForLink:y,handleEmojiMouseEnter:v,handleEmojiMouseLeave:s,handleImageMouseEnter:c,handleImageMouseLeave:a,handleButtonMouseEnter:f,handleImageButtonMouseEnter:_,handleButtonMouseLeave:L,closeEmojiPicker:A,closeImagePicker:R,closeLinkModal:E,insertEmojiUniversal:p,insertImageUniversal:S,insertLinkUniversal:U,insertLinkFromModalUniversal:F,insertSpoilerUniversal:N}=ut(),W=C=>{e("update-reply-content",C.target.value);const z=C.target;z&&(z.style.height="auto",z.style.height="".concat(Math.min(z.scrollHeight,200),"px"))},P={get value(){return o.replyContent},set value(C){e("update-reply-content",C)}};return{replyTextarea:l,showEmojiPicker:m,showImagePicker:g,isCollapsed:n,insertEmoji:C=>{p(C,l,P,z=>{e("update-reply-content",z)})},insertImage:C=>{S(C,l,P,z=>{e("update-reply-content",z)})},insertSpoiler:()=>{N(l,P,C=>{e("update-reply-content",C)})},handleEmojiMouseEnter:v,handleEmojiMouseLeave:s,handleImageMouseEnter:c,handleImageMouseLeave:a,handleButtonMouseEnter:f,handleButtonMouseLeave:L,closeEmojiPicker:A,closeImagePicker:R,handleImageButtonMouseEnter:_,handleReplyInput:W,toggleCollapsed:()=>{n.value=!n.value},showLinkModal:u,selectedTextForLink:y,insertLink:()=>{U(l,P,C=>{e("update-reply-content",C)})},closeLinkModal:E,insertLinkFromModal:C=>{F(C,l,P,z=>{e("update-reply-content",z)})}}},computed:{canReply(){return this.currentUser?this.currentUser.allow_comments===1:!0},getReplyPlaceholder(){return this.currentUser?this.currentUser.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç..."},formattedContent(){const{formatContent:o}=gn();return o(this.comment.content)}}},Xi={class:"comment-thread"},Ji={key:0,class:"reply-form"},el={class:"textarea-container"},tl=["value","placeholder","disabled"],nl={class:"reply-footer"},ol={class:"reply-actions"},sl=["disabled"],il={class:"character-counter-container"},ll=["disabled"],al={key:1,class:"replies-container"},rl=["title"],ul={class:"replies-count"},dl=["title"],cl={key:0,class:"replies-content"};function ml(o,e,l,n,m,g){const u=ke("CommentItem"),y=ke("EmojiPicker"),v=ke("ImagePicker"),s=ke("LinkModal"),c=ke("CommentThread",!0);return r(),d("div",Xi,[ne(u,{comment:l.comment,"current-user":l.currentUser,"editing-comment-id":l.editingCommentId,onReply:e[0]||(e[0]=a=>o.$emit("reply",a)),onStartEdit:e[1]||(e[1]=a=>o.$emit("start-edit",a)),onCancelEdit:e[2]||(e[2]=a=>o.$emit("cancel-edit")),onEdit:e[3]||(e[3]=(a,f)=>o.$emit("edit",a,f)),onDelete:e[4]||(e[4]=a=>o.$emit("delete",a)),onRate:e[5]||(e[5]=(a,f)=>o.$emit("rate",a,f))},null,8,["comment","current-user","editing-comment-id"]),l.replyTo&&l.replyTo.id===l.comment.id?(r(),d("div",Ji,[t("div",el,[t("textarea",{ref:"replyTextarea",class:"comment-textarea",value:l.replyContent,placeholder:g.getReplyPlaceholder,disabled:l.currentUser&&l.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:e[6]||(e[6]=(...a)=>n.handleReplyInput&&n.handleReplyInput(...a)),onKeydown:e[7]||(e[7]=a=>o.$emit("reply-keydown",a))},null,40,tl)]),t("div",nl,[t("div",ol,[t("button",{class:"cancel-reply",onClick:e[8]||(e[8]=a=>o.$emit("cancel-reply"))},"–û—Ç–º–µ–Ω–∞"),t("button",{class:"submit-button",disabled:!l.replyContent.trim()||l.replyContent.length>1500||l.currentUser&&l.currentUser.allow_comments!==1,onClick:e[9]||(e[9]=a=>o.$emit("submit-reply"))}," –û—Ç–≤–µ—Ç–∏—Ç—å ",8,sl)]),t("div",il,[t("div",{class:$(["character-counter-inline",{"near-limit":l.replyContent.length>1400,"at-limit":l.replyContent.length>=1500}])},b(l.replyContent.length)+"/1500 ",3),t("button",{type:"button",class:$(["emoji-button-inline",{active:n.showEmojiPicker}]),onMouseenter:e[10]||(e[10]=(...a)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...a)),onMouseleave:e[11]||(e[11]=(...a)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...a))}," üòä ",34),t("button",{type:"button",class:$(["emoji-button-inline",{active:n.showImagePicker}]),onMouseenter:e[12]||(e[12]=(...a)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...a)),onMouseleave:e[13]||(e[13]=(...a)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...a))},e[29]||(e[29]=[Ge('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-9b4e55e5><g id="logo" data-v-9b4e55e5><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-9b4e55e5></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-9b4e55e5></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-9b4e55e5></path></g></svg>',1)]),34),t("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:l.currentUser&&l.currentUser.allow_comments!==1,onClick:e[14]||(e[14]=(...a)=>n.insertSpoiler&&n.insertSpoiler(...a)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},e[30]||(e[30]=[t("i",{class:"fas fa-eye-slash"},null,-1)]),8,ll),t("button",{type:"button",class:"emoji-button-inline link-button",onClick:e[15]||(e[15]=(...a)=>n.insertLink&&n.insertLink(...a)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},e[31]||(e[31]=[t("i",{class:"fas fa-link"},null,-1)])),ne(y,{"is-visible":n.showEmojiPicker,onEmojiSelected:n.insertEmoji,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),ne(v,{"is-visible":n.showImagePicker,"current-user":l.currentUser,onImageSelected:n.insertImage,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:e[16]||(e[16]=()=>o.$router.push("/login"))},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose"]),ne(s,{"is-visible":n.showLinkModal,"selected-text":n.selectedTextForLink,onClose:n.closeLinkModal,onSubmit:n.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):M("",!0),l.comment.replies&&l.comment.replies.length>0?(r(),d("div",al,[t("button",{class:"collapse-toggle",title:n.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:e[17]||(e[17]=(...a)=>n.toggleCollapsed&&n.toggleCollapsed(...a))},[t("span",{class:$(["collapse-icon",{expanded:!n.isCollapsed}])},e[32]||(e[32]=[t("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},[t("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1)]),2),t("span",ul,b(l.comment.replies.length)+" "+b(l.comment.replies.length===1?"–æ—Ç–≤–µ—Ç":"–æ—Ç–≤–µ—Ç–æ–≤"),1)],8,rl),t("div",{class:"vertical-line-clickable",title:n.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:e[18]||(e[18]=(...a)=>n.toggleCollapsed&&n.toggleCollapsed(...a))},[t("div",{class:$(["vertical-line-visual",{collapsed:n.isCollapsed}])},null,2)],8,dl),n.isCollapsed?M("",!0):(r(),d("div",cl,[(r(!0),d(te,null,fe(l.comment.replies,a=>(r(),Ee(c,{key:a.id,comment:a,"current-user":l.currentUser,"reply-to":l.replyTo,"reply-content":l.replyContent,"editing-comment-id":l.editingCommentId,onReply:e[19]||(e[19]=f=>o.$emit("reply",f)),onStartEdit:e[20]||(e[20]=f=>o.$emit("start-edit",f)),onCancelEdit:e[21]||(e[21]=f=>o.$emit("cancel-edit")),onEdit:e[22]||(e[22]=(f,_)=>o.$emit("edit",f,_)),onDelete:e[23]||(e[23]=f=>o.$emit("delete",f)),onRate:e[24]||(e[24]=(f,_)=>o.$emit("rate",f,_)),onSubmitReply:e[25]||(e[25]=f=>o.$emit("submit-reply")),onCancelReply:e[26]||(e[26]=f=>o.$emit("cancel-reply")),onUpdateReplyContent:e[27]||(e[27]=f=>o.$emit("update-reply-content",f)),onReplyKeydown:e[28]||(e[28]=f=>o.$emit("reply-keydown",f))},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id"]))),128))]))])):M("",!0)])}const vl=we(Qi,[["render",ml],["__scopeId","data-v-9b4e55e5"]]),fl={name:"Comments",components:{CommentThread:vl,Notification:et,EmojiPicker:lt,ImagePicker:at,LinkModal:rt},props:{movieId:{type:[String,Number],required:!0}},setup(o){const e=st(),l=Je(),n=w([]),m=w(""),g=w(null),u=w(""),y=w(null),v=w(e.user),s=w(null),c=w(null),a=w(!1),f=w(!1),{showEmojiPicker:_,showImagePicker:L,showLinkModal:A,selectedTextForLink:R,handleEmojiMouseEnter:E,handleEmojiMouseLeave:p,handleImageMouseEnter:S,handleImageMouseLeave:U,handleButtonMouseEnter:F,handleImageButtonMouseEnter:N,handleButtonMouseLeave:W,closeEmojiPicker:P,closeImagePicker:ae,closeLinkModal:ue,insertEmojiUniversal:X,insertImageUniversal:ye,insertLinkUniversal:de,insertLinkFromModalUniversal:ce,insertSpoilerUniversal:C,autoResize:z}=ut(),be=V(()=>{const x=(O=null)=>n.value.filter(h=>h.parent_id===O).sort((h,B)=>h.id-B.id).map(h=>({...h,replies:x(h.id)})).filter(h=>!h.is_deleted||h.replies&&h.replies.length>0);return x()}),pe=V(()=>{const x=O=>O.reduce((h,B)=>h+1+x(B.replies||[]),0);return x(be.value)}),J=async()=>{try{const x=await Tn(o.movieId);n.value=x}catch(x){console.error("Failed to load comments:",x),s.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.")}},he=async()=>{if(f.value)return;if(!e.token){s.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:se});return}if(v.value&&v.value.allow_comments!==1){s.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!m.value.replace(/\[spoiler\]\s*\[\/spoiler\]/g,"").replace(/\[img\]\s*\[\/img\]/g,"").replace(/\[link=[^\]]+\]\s*\[\/link\]/g,"").trim()){s.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º");return}if(m.value.length>1500){s.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await sn(o.movieId,m.value.trim()),m.value="",await J(),a.value=!0,ge(()=>{c.value&&(c.value.focus(),c.value.style.height="auto"),setTimeout(()=>{const O=document.querySelectorAll(".comment-item[data-comment-id]");if(O.length>0){const h=Array.from(O).map(B=>parseInt(B.getAttribute("data-comment-id"))).filter(B=>!isNaN(B));if(h.length>0){const B=Math.max(...h),me=document.querySelector('[data-comment-id="'.concat(B,'"]'));me&&me.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}},300)})}catch(O){console.error("Failed to create comment:",O),s.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},ee=x=>{if(!e.token){s.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:se});return}y.value=null,g.value=x,u.value="",ge(()=>{const O=document.querySelector(".reply-form");O&&O.scrollIntoView({behavior:"smooth",block:"center"})})},j=async()=>{if(!e.token){s.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:se});return}if(v.value&&v.value.allow_comments!==1){s.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!(!u.value.trim()||!g.value)){if(u.value.length>1500){s.value.showNotification("–û—Ç–≤–µ—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await sn(o.movieId,u.value.trim(),g.value.id);const x=g.value.id;await J(),u.value="",g.value=null,ge(()=>{setTimeout(()=>{const O=document.querySelector('[data-comment-id="'.concat(x,'"]'));if(O){const h=O.querySelector(".replies-content");if(h){const B=h.querySelectorAll(".comment-item[data-comment-id]");if(B.length>0){const me=Array.from(B).map(De=>parseInt(De.getAttribute("data-comment-id"))).filter(De=>!isNaN(De));if(me.length>0){const De=Math.max(...me),Ye=document.querySelector('[data-comment-id="'.concat(De,'"]'));Ye&&Ye.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}}}},300)})}catch(x){console.error("Error submitting reply:",x),s.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}}},k=async(x,O)=>{if(!e.token){s.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:se});return}if(v.value&&v.value.allow_comments!==1){s.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(O.length>1500){s.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await Sn(x,O.trim()),await J(),y.value=null}catch(h){console.error("Failed to update comment:",h),s.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},Y=async x=>{if(!e.token){s.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:se});return}try{await An(x),await J()}catch(O){console.error("Failed to delete comment:",O),s.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},oe=async(x,O)=>{if(!e.token){s.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:se});return}try{await Pn(x,O),await J()}catch(h){console.error("Failed to rate comment:",h),s.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ü–µ–Ω–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},D=x=>{f.value||_.value||x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),he())},Ce=x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),j())},se=()=>{l.push("/login")},Re=x=>{f.value=!0,X(x,c,m,O=>{m.value=O}),setTimeout(()=>{f.value=!1},100)},Te=x=>{ye(x,c,m,O=>{m.value=O})},re=()=>{C(c,m,x=>{m.value=x})},ie=()=>{de(c,m,x=>{m.value=x})},Pe=x=>{ce(x,c,m,O=>{m.value=O})},Le=V(()=>v.value?v.value.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."),Be=V(()=>v.value?v.value.allow_comments===1:!0),Ae=x=>{g.value=null,u.value="",y.value=x},He=()=>{y.value=null};return Ne(()=>{J()}),{comments:n,groupedComments:be,newComment:m,replyTo:g,replyContent:u,editingCommentId:y,currentUser:v,notificationRef:s,commentTextarea:c,showComments:a,submitComment:he,handleReply:ee,submitReply:j,handleEdit:k,handleDelete:Y,handleRate:oe,handleCommentKeydown:D,handleReplyKeydown:Ce,autoResize:z,totalCommentsCount:pe,getCommentWordForm:yi,showEmojiPicker:_,showImagePicker:L,showLinkModal:A,selectedTextForLink:R,insertEmoji:Re,insertImage:Te,handleEmojiMouseEnter:E,handleEmojiMouseLeave:p,handleImageMouseEnter:S,handleImageMouseLeave:U,closeEmojiPicker:P,closeImagePicker:ae,handleButtonMouseLeave:W,handleButtonMouseEnter:F,handleImageButtonMouseEnter:N,getCommentPlaceholder:Le,canComment:Be,handleStartEdit:Ae,handleCancelEdit:He,insertSpoiler:re,insertLink:ie,insertLinkFromModal:Pe,closeLinkModal:ue}}},gl={class:"comments-section"},kl={class:"spoiler-content"},yl={key:1,class:"comments-container"},hl={class:"comments-header"},bl={class:"textarea-container"},pl=["placeholder","disabled"],Cl={class:"comment-footer"},wl={class:"comment-actions"},Ml=["disabled"],_l={class:"character-counter-container"},El=["disabled"],Ll=["disabled"],Il=["disabled"],Rl={class:"comments-list"};function Tl(o,e,l,n,m,g){const u=ke("EmojiPicker"),y=ke("ImagePicker"),v=ke("LinkModal"),s=ke("CommentThread"),c=ke("Notification");return r(),d("div",gl,[n.showComments?(r(),d("div",yl,[t("div",hl,[t("button",{class:"hide-comments-btn",onClick:e[1]||(e[1]=a=>n.showComments=!1)},e[17]||(e[17]=[t("i",{class:"fas fa-eye-slash"},null,-1),Z(" –°–∫—Ä—ã—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ")]))]),t("form",{class:"comment-form",onSubmit:e[11]||(e[11]=xe((...a)=>n.submitComment&&n.submitComment(...a),["prevent"]))},[t("div",bl,[K(t("textarea",{ref:"commentTextarea","onUpdate:modelValue":e[2]||(e[2]=a=>n.newComment=a),class:"comment-textarea",placeholder:n.getCommentPlaceholder,disabled:n.currentUser&&n.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:e[3]||(e[3]=(...a)=>n.autoResize&&n.autoResize(...a)),onKeydown:e[4]||(e[4]=(...a)=>n.handleCommentKeydown&&n.handleCommentKeydown(...a))},null,40,pl),[[ze,n.newComment]])]),t("div",Cl,[t("div",wl,[t("button",{class:"submit-button",type:"submit",disabled:!n.newComment.trim()||n.newComment.length>1500||n.currentUser&&n.currentUser.allow_comments!==1}," –û—Ç–ø—Ä–∞–≤–∏—Ç—å ",8,Ml)]),t("div",_l,[t("div",{class:$(["character-counter-inline",{"near-limit":n.newComment.length>1400,"at-limit":n.newComment.length>=1500}])},b(n.newComment.length)+"/1500 ",3),t("button",{type:"button",class:$(["emoji-button-inline",{active:n.showEmojiPicker}]),disabled:n.currentUser&&n.currentUser.allow_comments!==1,onMouseenter:e[5]||(e[5]=(...a)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...a)),onMouseleave:e[6]||(e[6]=(...a)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...a))}," üòä ",42,El),t("button",{type:"button",class:$(["emoji-button-inline",{active:n.showImagePicker}]),disabled:n.currentUser&&n.currentUser.allow_comments!==1,onMouseenter:e[7]||(e[7]=(...a)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...a)),onMouseleave:e[8]||(e[8]=(...a)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...a))},e[18]||(e[18]=[Ge('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-d802e327><g id="logo" data-v-d802e327><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-d802e327></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-d802e327></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-d802e327></path></g></svg>',1)]),42,Ll),t("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:n.currentUser&&n.currentUser.allow_comments!==1,onClick:e[9]||(e[9]=(...a)=>n.insertSpoiler&&n.insertSpoiler(...a)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},e[19]||(e[19]=[t("i",{class:"fas fa-eye-slash"},null,-1)]),8,Il),t("button",{type:"button",class:"emoji-button-inline link-button",onClick:e[10]||(e[10]=(...a)=>n.insertLink&&n.insertLink(...a)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},e[20]||(e[20]=[t("i",{class:"fas fa-link"},null,-1)])),ne(u,{"is-visible":n.showEmojiPicker&&n.canComment,onEmojiSelected:n.insertEmoji,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),ne(y,{"is-visible":n.showImagePicker&&n.canComment,"current-user":n.currentUser,onImageSelected:n.insertImage,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:o.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),ne(v,{"is-visible":n.showLinkModal,"selected-text":n.selectedTextForLink,onClose:n.closeLinkModal,onSubmit:n.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])],32),t("div",Rl,[(r(!0),d(te,null,fe(n.groupedComments,a=>(r(),Ee(s,{key:a.id,comment:a,"current-user":n.currentUser,"reply-to":n.replyTo,"reply-content":n.replyContent,"editing-comment-id":n.editingCommentId,"is-first-comment":!1,onReply:n.handleReply,onStartEdit:n.handleStartEdit,onCancelEdit:n.handleCancelEdit,onEdit:n.handleEdit,onDelete:n.handleDelete,onRate:n.handleRate,onSubmitReply:n.submitReply,onCancelReply:e[12]||(e[12]=f=>n.replyTo=null),onUpdateReplyContent:e[13]||(e[13]=f=>n.replyContent=f),onReplyKeydown:n.handleReplyKeydown},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id","onReply","onStartEdit","onCancelEdit","onEdit","onDelete","onRate","onSubmitReply","onReplyKeydown"]))),128))])])):(r(),d("div",{key:0,class:"spoiler-warning",onClick:e[0]||(e[0]=a=>n.showComments=!0)},[t("div",kl,[e[14]||(e[14]=t("i",{class:"fas fa-eye-slash"},null,-1)),e[15]||(e[15]=t("h3",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–∫—Ä—ã—Ç—ã",-1)),e[16]||(e[16]=t("p",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä—ã. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å.",-1)),t("div",{class:$(["comments-count",{"no-comments":n.totalCommentsCount===0}])},[n.totalCommentsCount===0?(r(),d(te,{key:0},[Z(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç ")],64)):(r(),d(te,{key:1},[Z(b(n.totalCommentsCount)+" "+b(n.getCommentWordForm(n.totalCommentsCount)),1)],64))],2)])])),ne(c,{ref:"notificationRef"},null,512)])}const Pl=we(fl,[["render",Tl],["__scopeId","data-v-d802e327"]]),Al={class:"movie-info"},Sl={class:"content"},Ul={key:0,class:"content-card"},jl={class:"movie-skeleton"},$l={class:"movie-skeleton__player"},xl={key:2,class:"content-card"},Bl={key:3,class:"content-card"},Hl={class:"content-header"},Dl=["src"],Nl={class:"content-title"},Ol={key:0,class:"ratings-links"},Vl={key:1},Fl=["href","title"],Kl={key:2},ql=["href","title"],Wl={key:3},zl=["href","title"],Gl={key:4},Yl=["href","title"],Zl={key:5},Ql=["href"],Xl={key:6,class:"rating-links-group"},Jl=["href"],ea=["title"],ta={key:0,class:"fa-regular fa-face-grin-wink"},na={key:1,class:"fas fa-spinner fa-spin"},oa={key:2,class:"nudity-info-popup"},sa={class:"nudity-info-content"},ia=["content"],la=["content"],aa={class:"additional-info"},ra={class:"info-content"},ua={class:"details-container"},da={class:"info-list"},ca={key:0},ma={key:1},va={key:2},fa={key:3},ga={key:4},ka={key:5},ya={key:6},ha={key:7},ba={key:8},pa={class:"content-info"},Ca={key:0,class:"content-description-text"},wa={key:2,class:"comments-section"},Ma={key:3,class:"staff-section"},_a={class:"staff-categories"},Ea={key:0,class:"staff-category"},La={class:"staff-list"},Ia=["href","title"],Ra=["src","alt"],Ta={class:"staff-name"},Pa={key:0,class:"staff-role"},Aa=["href","title"],Sa={key:1,class:"staff-category"},Ua={class:"staff-names-container"},ja={class:"staff-names-list"},$a=["href"],xa=["href","title"],Ba={key:2,class:"staff-category"},Ha={class:"staff-names-container"},Da={class:"staff-names-list"},Na=["href"],Oa=["href","title"],Va={key:4,class:"yt-video-container"},Fa={key:5,class:"related-movies"},Ka=["title"],qa={key:6,class:"related-movies"},Wa=["title"],za={__name:"MovieInfo",setup(o){const e=w(!0),l=Xe(),n=st(),m=Un(),g=cn(),u=w(g.params.kp_id),y=w(""),v=w(null),s=w(null),c=jn(),f=Vn().areTrailersActive,_=w(null),L=w(!1),A=w(!1),R=w(10),E=w(null),p=w(!1),S=V(()=>l.isCommentsEnabled),U=()=>{if(s.value){const j=s.value.name_ru||s.value.name_en||s.value.name_original||"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å–º–µ";document.title=j}},F=j=>j?j.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",N=j=>(j||[]).map(k=>({kp_id:k.film_id,poster:k.poster_url_preview||k.poster_url,title:k.name_ru||k.name_en||k.name_original})),W=j=>{if(typeof j!="number")return;const k=Math.floor(j/60),Y=j%60;return"".concat(k," —á. ").concat(Y," –º–∏–Ω.")},P=w(!1),ae=w({top:"0px",left:"0px"}),ue=j=>{P.value=!0,ae.value={top:"".concat(j.pageY+10,"px"),left:"".concat(j.pageX-70,"px")}},X=w(null),ye=async()=>{try{const j=[s.value.name_ru||s.value.name_en||s.value.name_original,...s.value.year?[s.value.year]:[],...s.value.film_length?[W(s.value.film_length)]:[]];await navigator.clipboard.writeText(j.join(", ")),X.value.showNotification("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ")}catch(j){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",j)}},de=async(j=!0)=>{var k,Y,oe,D,Ce,se,Re,Te;try{let re;if(u.value.startsWith("shiki")?re=await xn(u.value):re=await Bn(u.value,n.token),Array.isArray(re)&&re.length===0)throw new Error("–î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–∏—Å–∫.");s.value=re,u.value.startsWith("shiki")?s.value={...s.value,title:s.value.name_ru||s.value.name_en,name_original:s.value.name_en,short_description:s.value.slogan}:s.value={...s.value,title:s.value.name_ru||s.value.name_en||s.value.name_original,kinopoisk_id:u.value},c.setHeaderContent({text:s.value.title,imageUrl:s.value.logo_url}),U();const ie={kp_id:u.value,title:((k=s.value)==null?void 0:k.name_ru)||((Y=s.value)==null?void 0:Y.name_en)||((oe=s.value)==null?void 0:oe.name_original),poster:((D=s.value)==null?void 0:D.poster_url)||((Ce=s.value)==null?void 0:Ce.cover_url)||((se=s.value)==null?void 0:se.screenshots[0]),year:(Re=s.value)==null?void 0:Re.year,type:(Te=s.value)==null?void 0:Te.type};if(u.value.startsWith("shiki"))if(s.value.screenshots&&s.value.screenshots.length>0){const Le=Math.floor(Math.random()*s.value.screenshots.length),Be=s.value.screenshots[Le];m.updateMoviePoster(Be)}else ie.poster&&m.updateMoviePoster(ie.poster);else ie.poster&&m.updateMoviePoster(ie.poster);if(V(()=>l.isHistoryAllowed).value&&ie.kp_id&&ie.title&&j)if(n.token)try{await vn(ie.kp_id,q.HISTORY)}catch(Le){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é:",Le)}else l.addToHistory({...ie})}catch(re){const{message:ie,code:Pe}=ot(re);y.value=ie,v.value=Pe,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–ª—å–º–∞—Ö:",re)}},ce=V(()=>{var j,k;return console.log("–¢—Ä–µ–π–ª–µ—Ä—ã:",(j=s.value)==null?void 0:j.videos),(k=s.value)==null?void 0:k.videos}),C=V(()=>{var j;return N((j=s.value)==null?void 0:j.sequels_and_prequels)}),z=V(()=>{var j;return N((j=s.value)==null?void 0:j.similars)}),be=()=>{var oe;const j=((oe=document.querySelector(".related-movies"))==null?void 0:oe.clientWidth)||0,Y=Math.floor(j/160)||10;R.value=Math.max(1,Y)},pe=()=>{be()},J=j=>{if(j.altKey&&j.keyCode===84&&document.querySelector(".player-container")){const Y=document.querySelector(".theater-mode-btn");Y&&Y.click()}},he=async()=>{var j;if(!n.token){X.value.showNotification('–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:()=>c.openLogin()});return}if((j=s.value)!=null&&j.imdb_id){if(E.value){E.value=null;return}p.value=!0;try{const k=await Hn(s.value.imdb_id);E.value=k.nudity_info}catch(k){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö:",k),X.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö")}finally{p.value=!1}}};Ne(async()=>{await de(),e.value=!1,document.addEventListener("keydown",J),window.addEventListener("resize",pe),setTimeout(be,100)}),$n(async()=>{c.clearHeaderContent(),document.removeEventListener("keydown",J),window.removeEventListener("resize",pe)}),Ie(()=>g.params.kp_id,async j=>{j&&j!==u.value&&(c.clearHeaderContent(),u.value=j,_.value=null,await de(),e.value=!1)},{immediate:!0}),Ie(s,()=>{U()},{deep:!0});const ee=j=>{var k,Y;return((Y=(k=s.value)==null?void 0:k.staff)==null?void 0:Y.filter(oe=>oe.profession_key===j))||[]};return(j,k)=>{var Y,oe;return r(),d(te,null,[t("div",Al,[t("div",Sl,[(e.value||!s.value)&&!y.value?(r(),d("div",Ul,[t("div",jl,[k[4]||(k[4]=Ge('<div class="movie-skeleton__header" data-v-8c9baba0><div class="movie-skeleton__title" data-v-8c9baba0></div></div><div class="movie-skeleton__ratings" data-v-8c9baba0><div class="movie-skeleton__rating-item" data-v-8c9baba0></div><div class="movie-skeleton__rating-item" data-v-8c9baba0></div><div class="movie-skeleton__rating-item" data-v-8c9baba0></div></div>',2)),t("div",$l,[ne(fn)]),k[5]||(k[5]=Ge('<div class="movie-skeleton__additional-info" data-v-8c9baba0><div class="movie-skeleton__section-title" data-v-8c9baba0></div><div class="movie-skeleton__info-list" data-v-8c9baba0><div class="movie-skeleton__info-item" data-v-8c9baba0></div><div class="movie-skeleton__info-item" data-v-8c9baba0></div><div class="movie-skeleton__info-item" data-v-8c9baba0></div><div class="movie-skeleton__info-item" data-v-8c9baba0></div><div class="movie-skeleton__info-item" data-v-8c9baba0></div></div></div><div class="movie-skeleton__description" data-v-8c9baba0><div class="movie-skeleton__description-line" data-v-8c9baba0></div><div class="movie-skeleton__description-line" data-v-8c9baba0></div><div class="movie-skeleton__description-line" data-v-8c9baba0></div><div class="movie-skeleton__description-line" data-v-8c9baba0></div></div>',2))])])):M("",!0),y.value?(r(),Ee(mn,{key:1,message:y.value,code:v.value},null,8,["message","code"])):M("",!0),y.value?(r(),d("div",xl,[(r(),Ee(dn,{key:u.value,"kp-id":u.value,"movie-info":s.value,"onUpdate:movieInfo":de},null,8,["kp-id","movie-info"]))])):M("",!0),s.value&&!e.value?(r(),d("div",Bl,[t("div",Hl,[s.value.logo_url?(r(),d("div",{key:0,class:"content-logo",onMousemove:ue,onMouseleave:k[0]||(k[0]=D=>P.value=!1),onClick:ye},[t("img",{src:s.value.logo_url,alt:"–õ–æ–≥–æ—Ç–∏–ø —Ñ–∏–ª—å–º–∞",class:"content-logo"},null,8,Dl)],32)):(r(),d("div",{key:1,onMousemove:ue,onMouseleave:k[1]||(k[1]=D=>P.value=!1),onClick:ye},[t("h1",Nl,b(s.value.title),1)],32)),K(t("div",{class:"title-copy-tooltip",style:Qe(ae.value)}," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ",4),[[G,P.value]])]),s.value.kinopoisk_id||s.value.title||s.value.imdb_id||s.value.rating_imdb||s.value.shikimori_id?(r(),d("div",Ol,[s.value.kinopoisk_id?(r(),Ee(Ts,{key:0,"kp-id":s.value.kinopoisk_id,"show-dash":!0},null,8,["kp-id"])):M("",!0),s.value.kinopoisk_id?(r(),d("div",Vl,[t("a",{href:"https://www.kinopoisk.ru/film/".concat(s.value.kinopoisk_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:s.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(F(s.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[k[6]||(k[6]=t("img",{src:an,alt:"–ö–ü",class:"rating-logo"},null,-1)),t("span",null,b(s.value.rating_kinopoisk?s.value.rating_kinopoisk:"‚Äî"),1),k[7]||(k[7]=t("img",{src:Oe,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Fl)])):M("",!0),!s.value.kinopoisk_id&&s.value.title?(r(),d("div",Kl,[t("a",{href:"https://www.kinopoisk.ru/index.php?kp_query=".concat(encodeURIComponent(s.value.title+(s.value.year?" "+s.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:s.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(F(s.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[k[8]||(k[8]=t("img",{src:an,alt:"–ö–ü",class:"rating-logo"},null,-1)),t("span",null,b(s.value.rating_kinopoisk?s.value.rating_kinopoisk:"‚Äî"),1),k[9]||(k[9]=t("img",{src:Oe,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,ql)])):M("",!0),s.value.imdb_id?(r(),d("div",Wl,[t("a",{href:"https://www.imdb.com/title/".concat(s.value.imdb_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:s.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(F(s.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[k[10]||(k[10]=t("img",{src:rn,alt:"IMDb",class:"rating-logo"},null,-1)),t("span",null,b(s.value.rating_imdb?s.value.rating_imdb:"‚Äî"),1),k[11]||(k[11]=t("img",{src:Oe,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,zl)])):M("",!0),!s.value.imdb_id&&s.value.title?(r(),d("div",Gl,[t("a",{href:"https://www.imdb.com/find/?q=".concat(encodeURIComponent(s.value.title+(s.value.year?" "+s.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:s.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(F(s.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[k[12]||(k[12]=t("img",{src:rn,alt:"IMDb",class:"rating-logo"},null,-1)),t("span",null,b(s.value.rating_imdb?s.value.rating_imdb:"‚Äî"),1),k[13]||(k[13]=t("img",{src:Oe,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Yl)])):M("",!0),s.value.shikimori_id?(r(),d("div",Zl,[t("a",{href:"https://shikimori.one/animes/".concat(s.value.shikimori_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},k[14]||(k[14]=[t("img",{src:Fn,alt:"Shiki",class:"rating-logo"},null,-1),t("img",{src:Oe,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,Ql)])):M("",!0),s.value.imdb_id?(r(),d("div",Xl,[t("a",{href:"https://www.imdb.com/title/".concat(s.value.imdb_id,"/parentalguide"),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},k[15]||(k[15]=[t("span",null,"Parents Guide",-1),t("img",{src:Oe,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,Jl),t("button",{class:"rating-link nudity-info-btn",onClick:he,title:E.value?"–°–∫—Ä—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é":"–ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ü–µ–Ω–∞—Ö(Sex & Nudity)"},[p.value?(r(),d("i",na)):(r(),d("i",ta)),E.value?(r(),d("div",oa,[t("div",sa,b(E.value),1)])):M("",!0)],8,ea)])):M("",!0)])):M("",!0),(r(),Ee(dn,{key:u.value,"kp-id":u.value,"movie-info":s.value,"onUpdate:movieInfo":de},null,8,["kp-id","movie-info"])),t("meta",{name:"title-and-year",content:s.value.type==="FILM"&&s.value.year?"".concat(s.value.title," (").concat(s.value.year,")"):s.value.title},null,8,ia),s.value.name_original?(r(),d("meta",{key:1,name:"original-title",content:s.value.name_original},null,8,la)):M("",!0),t("div",aa,[k[25]||(k[25]=t("h2",{class:"additional-info-title"},"–ü–æ–¥—Ä–æ–±–Ω–µ–µ",-1)),t("div",ra,[t("div",ua,[t("ul",da,[s.value.type&&Q(ln)[s.value.type]?(r(),d("li",ca,[k[16]||(k[16]=t("strong",null,"–¢–∏–ø:",-1)),Z(" "+b(Q(ln)[s.value.type]),1)])):M("",!0),s.value.year?(r(),d("li",ma,[k[17]||(k[17]=t("strong",null,"–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞:",-1)),Z(" "+b(s.value.year),1)])):M("",!0),s.value.title?(r(),d("li",va,[k[18]||(k[18]=t("strong",null,"–ù–∞–∑–≤–∞–Ω–∏–µ:",-1)),Z(" "+b(s.value.title),1)])):M("",!0),s.value.name_original?(r(),d("li",fa,[k[19]||(k[19]=t("strong",null,"–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:",-1)),Z(" "+b(s.value.name_original),1)])):M("",!0),s.value.slogan?(r(),d("li",ga,[k[20]||(k[20]=t("strong",null,"–°–ª–æ–≥–∞–Ω:",-1)),Z(" "+b(s.value.slogan),1)])):M("",!0),s.value.production_companies?(r(),d("li",ka,[k[21]||(k[21]=t("strong",null,"–ü—Ä–æ–¥–∞–∫—à–Ω:",-1)),Z(" "+b(s.value.production_companies),1)])):M("",!0),(Y=s.value.countries)!=null&&Y.length?(r(),d("li",ya,[k[22]||(k[22]=t("strong",null,"–°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞:",-1)),Z(" "+b(s.value.countries.map(D=>D.country).join(", ")),1)])):M("",!0),(oe=s.value.genres)!=null&&oe.length?(r(),d("li",ha,[k[23]||(k[23]=t("strong",null,"–ñ–∞–Ω—Ä—ã:",-1)),Z(" "+b(s.value.genres.map(D=>D.genre).join(", ")),1)])):M("",!0),s.value.film_length?(r(),d("li",ba,[k[24]||(k[24]=t("strong",null,"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:",-1)),Z(" "+b(W(s.value.film_length)),1)])):M("",!0)])])])]),t("div",pa,[s.value.description?(r(),d("p",Ca,b(s.value.description),1)):M("",!0)]),S.value?(r(),d("div",wa,[(r(),Ee(Pl,{"movie-id":u.value,key:u.value},null,8,["movie-id"]))])):M("",!0),s.value.staff?(r(),d("div",Ma,[t("div",_a,[ee("ACTOR").length?(r(),d("div",Ea,[k[26]||(k[26]=t("h3",{class:"additional-info-title"},"–ê–∫—Ç—ë—Ä—ã",-1)),t("div",La,[(r(!0),d(te,null,fe(ee("ACTOR").slice(0,12),D=>(r(),d("div",{key:D.staff_id,class:"staff-item"},[t("a",{href:"https://www.kinopoisk.ru/name/".concat(D.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-link",title:D.description||""},[t("img",{src:D.poster_url,alt:D.name_ru,class:"staff-photo"},null,8,Ra),t("span",Ta,b(D.name_ru||D.name_en),1),D.description?(r(),d("span",Pa,b(D.description),1)):M("",!0)],8,Ia)]))),128)),t("a",{class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(u.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(ee("ACTOR").length," –∞–∫—Ç–µ—Ä–æ–≤")}," +"+b(ee("ACTOR").length-12),9,Aa)])])):M("",!0),ee("DIRECTOR").length?(r(),d("div",Sa,[k[27]||(k[27]=t("h3",{class:"additional-info-title"},"–†–µ–∂–∏—Å—Å—ë—Ä—ã",-1)),t("div",Ua,[t("div",ja,[(r(!0),d(te,null,fe(ee("DIRECTOR").slice(0,5),D=>(r(),d("a",{key:D.staff_id,href:"https://www.kinopoisk.ru/name/".concat(D.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},b(D.name_ru||D.name_en),9,$a))),128)),ee("DIRECTOR").length>5?(r(),d("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(u.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(ee("DIRECTOR").length," —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–≤")}," +"+b(ee("DIRECTOR").length-5),9,xa)):M("",!0)])])])):M("",!0),ee("PRODUCER").length?(r(),d("div",Ba,[k[28]||(k[28]=t("h3",{class:"additional-info-title"},"–ü—Ä–æ–¥—é—Å–µ—Ä—ã",-1)),t("div",Ha,[t("div",Da,[(r(!0),d(te,null,fe(ee("PRODUCER").slice(0,5),D=>(r(),d("a",{key:D.staff_id,href:"https://www.kinopoisk.ru/name/".concat(D.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},b(D.name_ru||D.name_en),9,Na))),128)),ee("PRODUCER").length>5?(r(),d("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(u.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(ee("PRODUCER").length," –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤")}," +"+b(ee("PRODUCER").length-5),9,Oa)):M("",!0)])])])):M("",!0)])])):M("",!0),ce.value.length&&Q(f)?(r(),d("div",Va,[ne(hs,{videos:ce.value,"active-video-index":_.value,onSelect:j.playTrailer},null,8,["videos","active-video-index","onSelect"])])):M("",!0),C.value.length?(r(),d("div",Fa,[k[29]||(k[29]=t("h2",null,"–°–∏–∫–≤–µ–ª—ã –∏ –ø—Ä–∏–∫–≤–µ–ª—ã",-1)),ne(Q(un),{"movies-list":L.value?C.value:C.value.slice(0,R.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),C.value.length>R.value?(r(),d("a",{key:0,class:"expand-circle-button",onClick:k[2]||(k[2]=D=>L.value=!L.value),title:"".concat(L.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(C.value.length,")")},b(L.value?"‚àí":"+".concat(C.value.length-R.value)),9,Ka)):M("",!0)])):M("",!0),z.value.length?(r(),d("div",qa,[k[30]||(k[30]=t("h2",null,"–ü–æ—Ö–æ–∂–∏–µ",-1)),ne(Q(un),{"movies-list":A.value?z.value:z.value.slice(0,R.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),z.value.length>R.value?(r(),d("a",{key:0,class:"expand-circle-button",onClick:k[3]||(k[3]=D=>A.value=!A.value),title:"".concat(A.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(z.value.length,")")},b(A.value?"‚àí":"+".concat(z.value.length-R.value)),9,Wa)):M("",!0)])):M("",!0)])):M("",!0)])]),ne(et,{ref_key:"notificationRef",ref:X},null,512)],64)}}},Ja=we(za,[["__scopeId","data-v-8c9baba0"]]);export{Ja as default};
