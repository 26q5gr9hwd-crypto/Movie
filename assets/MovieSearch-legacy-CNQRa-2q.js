!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function a(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?t(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(t,a,r){return(a=function(t){var a=function(t,a){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,a||"default");if("object"!=e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(t)}(t,"string");return"symbol"==e(a)?a:a+""}(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function n(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */n=function(){return a};var t,a={},r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(e,t,a){e[t]=a.value},l="function"==typeof Symbol?Symbol:{},s=l.iterator||"@@iterator",c=l.asyncIterator||"@@asyncIterator",u=l.toStringTag||"@@toStringTag";function d(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(t){d=function(e,t,a){return e[t]=a}}function v(e,t,a,r){var n=t&&t.prototype instanceof y?t:y,o=Object.create(n.prototype),l=new D(r||[]);return i(o,"_invoke",{value:L(e,a,l)}),o}function p(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}a.wrap=v;var f="suspendedStart",b="suspendedYield",m="executing",h="completed",g={};function y(){}function x(){}function k(){}var w={};d(w,s,(function(){return this}));var _=Object.getPrototypeOf,j=_&&_(_(P([])));j&&j!==r&&o.call(j,s)&&(w=j);var O=k.prototype=y.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function S(t,a){function r(n,i,l,s){var c=p(t[n],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==e(d)&&o.call(d,"__await")?a.resolve(d.__await).then((function(e){r("next",e,l,s)}),(function(e){r("throw",e,l,s)})):a.resolve(d).then((function(e){u.value=e,l(u)}),(function(e){return r("throw",e,l,s)}))}s(c.arg)}var n;i(this,"_invoke",{value:function(e,t){function o(){return new a((function(a,n){r(e,t,a,n)}))}return n=n?n.then(o,o):o()}})}function L(e,a,r){var n=f;return function(o,i){if(n===m)throw Error("Generator is already running");if(n===h){if("throw"===o)throw i;return{value:t,done:!0}}for(r.method=o,r.arg=i;;){var l=r.delegate;if(l){var s=I(l,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=m;var c=p(e,a,r);if("normal"===c.type){if(n=r.done?h:b,c.arg===g)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=h,r.method="throw",r.arg=c.arg)}}}function I(e,a){var r=a.method,n=e.iterator[r];if(n===t)return a.delegate=null,"throw"===r&&e.iterator.return&&(a.method="return",a.arg=t,I(e,a),"throw"===a.method)||"return"!==r&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=p(n,e.iterator,a.arg);if("throw"===o.type)return a.method="throw",a.arg=o.arg,a.delegate=null,g;var i=o.arg;return i?i.done?(a[e.resultName]=i.value,a.next=e.nextLoc,"return"!==a.method&&(a.method="next",a.arg=t),a.delegate=null,g):i:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,g)}function z(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(z,this),this.reset(!0)}function P(a){if(a||""===a){var r=a[s];if(r)return r.call(a);if("function"==typeof a.next)return a;if(!isNaN(a.length)){var n=-1,i=function e(){for(;++n<a.length;)if(o.call(a,n))return e.value=a[n],e.done=!1,e;return e.value=t,e.done=!0,e};return i.next=i}}throw new TypeError(e(a)+" is not iterable")}return x.prototype=k,i(O,"constructor",{value:k,configurable:!0}),i(k,"constructor",{value:x,configurable:!0}),x.displayName=d(k,u,"GeneratorFunction"),a.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,d(e,u,"GeneratorFunction")),e.prototype=Object.create(O),e},a.awrap=function(e){return{__await:e}},E(S.prototype),d(S.prototype,c,(function(){return this})),a.AsyncIterator=S,a.async=function(e,t,r,n,o){void 0===o&&(o=Promise);var i=new S(v(e,t,r,n),o);return a.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(O),d(O,u,"Generator"),d(O,s,(function(){return this})),d(O,"toString",(function(){return"[object Generator]"})),a.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},a.values=P,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var a in this)"t"===a.charAt(0)&&o.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var a=this;function r(r,n){return l.type="throw",l.arg=e,a.next=r,n&&(a.method="next",a.arg=t),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],l=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var n=r;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var i=n?n.completion:{};return i.type=e,i.arg=t,n?(this.method="next",this.next=n.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),C(a),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;C(a)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,a,r){return this.delegate={iterator:P(e),resultName:a,nextLoc:r},"next"===this.method&&(this.arg=t),g}},a}function o(e,t,a,r,n,o,i){try{var l=e[o](i),s=l.value}catch(e){return void a(e)}l.done?t(s):Promise.resolve(s).then(r,n)}function i(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var i=e.apply(t,a);function l(e){o(i,r,n,l,s,"next",e)}function s(e){o(i,r,n,l,s,"throw",e)}l(void 0)}))}}System.register(["./index-legacy-CWZQv3Cz.js","./BaseModal-legacy-C40uNDTF.js","./MovieList-legacy-ByLiT1_q.js","./SpinnerLoading-legacy-Cf59wxj2.js","./icon-imdb-logo-legacy-CT5vGaX7.js"],(function(e,t){"use strict";var r,o,l,s,c,u,d,v,p,f,b,m,h,g,y,x,k,w,_,j,O,E,S,L,I,z,C,D,P,T,M,N,F,Y,G,R,$,H,B,U,A,W,J,K,V,q,Q,X,Z;return{setters:[e=>{r=e._,o=e.r,l=e.c,s=e.o,c=e.a,u=e.b,d=e.d,v=e.e,p=e.f,f=e.w,b=e.g,m=e.t,h=e.T,g=e.n,y=e.h,x=e.i,k=e.j,w=e.k,_=e.l,j=e.m,O=e.p,E=e.u,S=e.q,L=e.s,I=e.v,z=e.x,C=e.y,D=e.z,P=e.A,T=e.E,M=e.B,N=e.C,F=e.D,Y=e.F,G=e.G,R=e.H,$=e.I,H=e.J,B=e.K,U=e.U,A=e.L,W=e.M},e=>{J=e.B},e=>{K=e.D,V=e.M},e=>{q=e.S},e=>{Q=e._,X=e.a,Z=e.b}],execute:function(){var t=document.createElement("style");t.textContent='footer[data-v-1babf189]{width:100%;background:rgba(0,0,0,.8);backdrop-filter:blur(10px);z-index:1000;transition:all .3s ease}.footer-fixed[data-v-1babf189]{position:fixed;bottom:0;left:0}.footer-static[data-v-1babf189]{position:static}.donaters-wrapper[data-v-1babf189]{width:100%;height:20px;display:flex;justify-content:center;align-items:center;padding:10px 0}.donater[data-v-1babf189]{font-family:Neucha,sans-serif;font-weight:700;color:rgba(255,255,255,.945)}.fade-enter-active[data-v-1babf189],.fade-leave-active[data-v-1babf189]{transition:opacity 1s ease}.fade-enter-from[data-v-1babf189],.fade-leave-to[data-v-1babf189]{opacity:0}.modal-enter-active[data-v-ab41b1b2],.modal-leave-active[data-v-ab41b1b2]{transition:opacity .3s ease}.modal-enter-from[data-v-ab41b1b2],.modal-leave-to[data-v-ab41b1b2]{opacity:0}.modal-overlay[data-v-ab41b1b2]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);backdrop-filter:blur(4px);display:flex;justify-content:center;align-items:center;z-index:1000;animation:overlay-in-ab41b1b2 .3s}.modal[data-v-ab41b1b2]{transform:translateY(-50px);animation:modal-in-ab41b1b2 .3s forwards}.random-movie-modal[data-v-ab41b1b2]{width:600px;max-width:95vw;max-height:90vh;overflow-y:auto}.modern-dark-dialog[data-v-ab41b1b2]{background-color:#1d1d1d;color:#e2e8f0;border-radius:12px;overflow:hidden;box-shadow:0 10px 15px -3px rgba(0,0,0,.3),0 4px 6px -2px rgba(0,0,0,.25)}.modal-header[data-v-ab41b1b2]{padding:16px 20px;border-bottom:1px solid var(--accent-color);display:flex;justify-content:space-between;align-items:center}.modal-header h3[data-v-ab41b1b2]{margin:0;font-size:1.1rem;font-weight:600;display:flex;align-items:center;gap:8px}.close-btn[data-v-ab41b1b2]{background:none;border:none;color:#e2e8f0;font-size:1.2rem;cursor:pointer;padding:4px;opacity:.7;transition:opacity .2s ease}.close-btn[data-v-ab41b1b2]:hover{opacity:1}.modal-content[data-v-ab41b1b2]{padding:20px;max-height:60vh;overflow-y:auto}.loading-container[data-v-ab41b1b2]{display:flex;flex-direction:column;align-items:center;gap:16px;padding:40px 20px}.spinner[data-v-ab41b1b2]{width:40px;height:40px;border:3px solid #333;border-top:3px solid var(--accent-color);border-radius:50%;animation:spin-ab41b1b2 1s linear infinite}@keyframes spin-ab41b1b2{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-content[data-v-ab41b1b2]{display:flex;flex-direction:column;align-items:center;gap:16px;padding:40px 20px;color:#ff6b6b}.error-content i[data-v-ab41b1b2]{font-size:3rem}.movie-content[data-v-ab41b1b2]{display:flex;gap:20px}.movie-poster-section[data-v-ab41b1b2]{flex-shrink:0}.movie-poster[data-v-ab41b1b2]{width:150px;height:225px;object-fit:cover;border-radius:8px}.movie-info-section[data-v-ab41b1b2]{flex:1;display:flex;flex-direction:column;gap:12px}.movie-title[data-v-ab41b1b2]{font-size:1.3rem;font-weight:600;margin:0;line-height:1.3}.movie-year[data-v-ab41b1b2]{font-size:1.1rem;color:#a0a0a0}.movie-type[data-v-ab41b1b2]{background:var(--accent-color);color:#fff;padding:4px 8px;border-radius:4px;font-size:.85rem;align-self:flex-start}.movie-countries[data-v-ab41b1b2],.movie-genres[data-v-ab41b1b2]{font-size:.9rem;line-height:1.4}.movie-countries strong[data-v-ab41b1b2],.movie-genres strong[data-v-ab41b1b2]{color:#a0a0a0}.ratings[data-v-ab41b1b2]{display:flex;gap:12px;flex-wrap:wrap}.rating[data-v-ab41b1b2]{display:flex;align-items:center;gap:5px;background:rgba(0,0,0,.3);padding:6px 10px;border-radius:6px;font-weight:600}.rating-logo[data-v-ab41b1b2]{width:20px;height:20px}.total-ratings[data-v-ab41b1b2]{font-size:.8rem;opacity:.7}.external-links[data-v-ab41b1b2]{display:flex;gap:10px;flex-wrap:wrap}.external-link[data-v-ab41b1b2]{display:flex;align-items:center;gap:6px;padding:8px 12px;background:rgba(255,255,255,.1);border-radius:6px;text-decoration:none;color:#e2e8f0;font-size:.9rem;transition:background .2s ease}.external-link[data-v-ab41b1b2]:hover{background:rgba(255,255,255,.2)}.external-link img[data-v-ab41b1b2]{width:16px;height:16px}.modal-actions[data-v-ab41b1b2]{display:flex;justify-content:flex-end;gap:12px;padding:16px 20px;border-top:1px solid #333}.modern-dark-btn[data-v-ab41b1b2]{padding:10px 16px;border-radius:6px;border:none;background-color:#242424;color:#e2e8f0;cursor:pointer;font-weight:500;transition:all .2s ease;text-decoration:none;display:flex;align-items:center;gap:6px}.modern-dark-btn[data-v-ab41b1b2]:hover{background-color:#2b2b2b}.modern-dark-btn[data-v-ab41b1b2]:disabled{opacity:.5;cursor:not-allowed}.modern-dark-btn.primary[data-v-ab41b1b2]{background-color:var(--accent-color);color:#fff}.modern-dark-btn.primary[data-v-ab41b1b2]:hover{background-color:var(--accent-hover-color)}@keyframes modal-in-ab41b1b2{to{transform:translateY(0)}}@keyframes overlay-in-ab41b1b2{0%{backdrop-filter:blur(0)}to{backdrop-filter:blur(4px)}}@media (max-width: 768px){.random-movie-modal[data-v-ab41b1b2]{width:95vw;margin:0 10px}.movie-content[data-v-ab41b1b2]{flex-direction:column;align-items:center;text-align:center}.movie-poster[data-v-ab41b1b2]{width:120px;height:180px}.modal-actions[data-v-ab41b1b2]{flex-direction:column;gap:8px;padding:16px 20px}.modal-actions .modern-dark-btn[data-v-ab41b1b2],.modal-actions a.modern-dark-btn[data-v-ab41b1b2]{width:100%;justify-content:center;box-sizing:border-box}}.wrapper[data-v-05c02d79]{display:flex;flex-direction:column;min-height:100vh}.mainpage[data-v-05c02d79]{flex:1;padding-top:20px;padding-bottom:40px}.search-type-buttons[data-v-05c02d79]{display:flex;justify-content:center;gap:20px;padding-top:10px;margin-bottom:5px;flex-wrap:wrap}.search-type-buttons button[data-v-05c02d79]{padding:5px 10px;font-size:16px;border:none;background:none;color:#fff;cursor:pointer;transition:all .3s ease;position:relative}.search-type-buttons button[data-v-05c02d79]:after{content:"";position:absolute;left:0;bottom:-2px;width:100%;height:2px;background-color:transparent;transition:background-color .3s ease}.search-type-buttons button.active[data-v-05c02d79]:after{background-color:var(--accent-color)}.search-type-buttons button[data-v-05c02d79]:hover{color:#fff}.random-button[data-v-05c02d79]{background:var(--accent-color)!important;color:#fff!important;border-radius:8px;padding:8px 16px!important;font-weight:600;transition:all .3s ease;display:flex;align-items:center;gap:6px}.random-button[data-v-05c02d79]:hover:not(:disabled){background:var(--accent-hover-color)!important;transform:translateY(-1px)}.random-button[data-v-05c02d79]:disabled{opacity:.7;cursor:not-allowed;transform:none}.random-button[data-v-05c02d79]:after{display:none}.search-container[data-v-05c02d79]{display:flex;justify-content:center;padding:20px}.input-wrapper[data-v-05c02d79]{position:relative;width:100%;max-width:800px}.search-input[data-v-05c02d79]{box-sizing:border-box;width:100%;padding:10px;font-size:16px;border:1px solid #ccc;border-radius:10px;background:rgba(30,30,30,.8);color:#fff;transition:border-color .3s ease}.search-input[data-v-05c02d79]:focus{outline:none;border-color:var(--accent-color);box-shadow:0 0 0 2px var(--accent-transparent)}.search-input.wrong-layout[data-v-05c02d79]{border-color:#ff8c00;box-shadow:0 0 5px rgba(255,140,0,.2)}.icons[data-v-05c02d79]{position:absolute;right:10px;top:50%;transform:translateY(-50%);display:flex;gap:8px;align-items:center}.reset-button[data-v-05c02d79],.search-button[data-v-05c02d79]{background:none;border:none;color:#fff;cursor:pointer;padding:2px;opacity:.7;transition:opacity .2s ease}.reset-button[data-v-05c02d79]:hover,.search-button[data-v-05c02d79]:hover{opacity:1}.reset-button i[data-v-05c02d79],.search-button i[data-v-05c02d79]{font-size:18px;display:block;width:20px;height:20px}h2[data-v-05c02d79]{display:flex;font-size:20px;margin-bottom:20px;justify-content:center;align-items:center;gap:10px}.no-results[data-v-05c02d79]{width:100%;text-align:center;color:#fff;font-size:18px;margin-top:20px}.search-prompt[data-v-05c02d79]{text-align:center;color:#fff;font-size:18px;margin-top:20px}.layout-warning[data-v-05c02d79]{position:absolute;bottom:-40px;left:0;right:0;text-align:center;color:#ff8c00;font-size:14px;background:rgba(255,140,0,.15);padding:8px 12px;border-radius:5px;pointer-events:none;border:1px solid rgba(255,140,0,.5);display:flex;align-items:center;justify-content:center;gap:8px;opacity:0;transform:translateY(-10px);transition:all .3s ease;z-index:1;backdrop-filter:blur(5px)}.layout-warning.show[data-v-05c02d79]{opacity:1;transform:translateY(0)}.layout-warning i[data-v-05c02d79]{font-size:16px;color:#ff8c00}.layout-warning[data-v-05c02d79]{color:#ff8c00}.loading-container[data-v-05c02d79]{display:flex;justify-content:center;align-items:center;min-height:200px;width:100%}.empty-history[data-v-05c02d79]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:200px;color:#888;gap:15px}.empty-history .material-icons[data-v-05c02d79]{font-size:64px;color:#888;opacity:.7}.empty-history p[data-v-05c02d79]{font-size:18px;margin:0;color:#888}@media (max-width: 600px){.mainpage[data-v-05c02d79]{padding-top:0;height:calc(100vh - 93px)}.search-container[data-v-05c02d79],.search-type-buttons[data-v-05c02d79]{padding:0}}\n/*$vite$:1*/',document.head.appendChild(t);var ee={class:"donaters-wrapper"},te="donatersCache",ae={__name:"FooterDonaters",setup(e){var t=o([]),a=o(-1),r=o(!1),x=null,k=l((()=>-1!==a.value&&t.value.length?t.value[a.value]:"")),w=()=>{var e=window.pageYOffset||document.documentElement.scrollTop,t=window.innerHeight,a=document.documentElement.scrollHeight;r.value=e+t>=a-10},_=function(){var e=i(n().mark((function e(){var a,r,o,i,l,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(new Date).toISOString().split("T")[0],!(r=localStorage.getItem(te))){e.next=13;break}if(e.prev=3,o=JSON.parse(r),i=o.date,l=o.data,i!==a){e.next=8;break}return t.value=l,e.abrupt("return");case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("Ошибка кэша донатеров:",e.t0);case 13:return e.prev=13,e.next=16,y();case 16:s=e.sent,t.value=s.split("\n").map((e=>e.trim())).filter((e=>e)),localStorage.setItem(te,JSON.stringify({date:a,data:t.value})),e.next=24;break;case 21:e.prev=21,e.t1=e.catch(13),console.error("Ошибка загрузки донатеров:",e.t1);case 24:case"end":return e.stop()}}),e,null,[[3,10],[13,21]])})));return function(){return e.apply(this,arguments)}}();function j(){if(t.value.length){var e=Math.floor(Math.random()*t.value.length);a.value=e}}return s(i(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:0!==t.value.length&&(j(),x=setInterval(j,4e3)),window.addEventListener("scroll",w),w();case 5:case"end":return e.stop()}}),e)})))),c((()=>{x&&clearInterval(x),window.removeEventListener("scroll",w)})),(e,t)=>(d(),u("footer",{class:g({"footer-fixed":!r.value,"footer-static":r.value})},[v("div",ee,[p(h,{name:"fade",mode:"out-in"},{default:f((()=>[k.value?(d(),u("span",{key:a.value,class:"donater"},m(k.value),1)):b("",!0)])),_:1})])],2))}},re=r(ae,[["__scopeId","data-v-1babf189"]]),ne={class:"modal modern-dark-dialog random-movie-modal"},oe={class:"modal-content"},ie={key:0,class:"loading-container"},le={key:1,class:"movie-content"},se={class:"movie-poster-section"},ce=["alt"],ue={class:"movie-info-section"},de={class:"movie-title"},ve={key:0,class:"movie-year"},pe={key:1,class:"movie-type"},fe={key:2,class:"movie-countries"},be={key:3,class:"movie-genres"},me={class:"ratings"},he={key:0,class:"rating rating-our"},ge={key:1,class:"rating rating-kp"},ye={key:2,class:"rating rating-imdb"},xe={class:"external-links"},ke=["href"],we=["href"],_e={key:2,class:"error-content"},je={class:"modal-actions"},Oe=["disabled"],Ee={__name:"RandomMovieModal",props:{isOpen:Boolean,movie:Object,loading:Boolean,error:String},emits:["close","get-new-movie"],setup(e,t){var a=t.emit,r=()=>{a("close")},n=()=>{a("get-new-movie")},o=e=>{e.target.src="/src/assets/image-no-poster.gif"};return(t,a)=>{var i=x("router-link"),l=k("lazy");return d(),w(h,{name:"modal"},{default:f((()=>{return[e.isOpen?(d(),u("div",{key:0,class:"modal-overlay",onClick:_(r,["self"])},[v("div",ne,[v("div",{class:"modal-header"},[a[1]||(a[1]=v("h3",null,[v("i",{class:"fas fa-dice"}),j(" Случайный фильм ")],-1)),v("button",{class:"close-btn",onClick:r},a[0]||(a[0]=[v("i",{class:"fas fa-times"},null,-1)]))]),v("div",oe,[e.loading?(d(),u("div",ie,a[2]||(a[2]=[v("div",{class:"spinner"},null,-1),v("p",null,"Подбираем фильм...",-1)]))):e.movie?(d(),u("div",le,[v("div",se,[O(v("img",{alt:e.movie.title,class:"movie-poster",onError:o},null,40,ce),[[l,e.movie.cover]])]),v("div",ue,[v("h4",de,m(e.movie.title),1),e.movie.year?(d(),u("div",ve,m(e.movie.year),1)):b("",!0),e.movie.type?(d(),u("div",pe,m((t=e.movie.type,{"FilmType.FILM":"Фильм","FilmType.TV_SERIES":"Сериал","FilmType.TV_SHOW":"ТВ-шоу","FilmType.MINI_SERIES":"Мини-сериал"}[t]||t)),1)):b("",!0),e.movie.countries?(d(),u("div",fe,[a[3]||(a[3]=v("strong",null,"Страны:",-1)),j(" "+m(e.movie.countries),1)])):b("",!0),e.movie.genres?(d(),u("div",be,[a[4]||(a[4]=v("strong",null,"Жанры:",-1)),j(" "+m(e.movie.genres),1)])):b("",!0),v("div",me,[e.movie.rating_reyohoho?(d(),u("div",he,[a[5]||(a[5]=v("img",{src:Q,alt:"ReYohoho",class:"rating-logo"},null,-1)),j(" "+m(e.movie.rating_reyohoho.toFixed(1)),1)])):b("",!0),e.movie.rating_kp?(d(),u("div",ge,[a[6]||(a[6]=v("img",{src:X,alt:"КП",class:"rating-logo"},null,-1)),j(" "+m(e.movie.rating_kp),1)])):b("",!0),e.movie.rating_imdb?(d(),u("div",ye,[a[7]||(a[7]=v("img",{src:Z,alt:"IMDb",class:"rating-logo"},null,-1)),j(" "+m(e.movie.rating_imdb),1)])):b("",!0)]),v("div",xe,[e.movie.url_kp?(d(),u("a",{key:0,href:e.movie.url_kp,target:"_blank",class:"external-link"},a[8]||(a[8]=[v("img",{src:X,alt:"КП"},null,-1),j(" Кинопоиск ")]),8,ke)):b("",!0),e.movie.url_imdb?(d(),u("a",{key:1,href:e.movie.url_imdb,target:"_blank",class:"external-link"},a[9]||(a[9]=[v("img",{src:Z,alt:"IMDb"},null,-1),j(" IMDb ")]),8,we)):b("",!0)])])])):e.error?(d(),u("div",_e,[a[10]||(a[10]=v("i",{class:"fas fa-exclamation-triangle"},null,-1)),v("p",null,m(e.error),1)])):b("",!0)]),v("div",je,[v("button",{class:"modern-dark-btn",onClick:r},"Закрыть"),e.movie&&!e.loading?(d(),w(i,{key:0,to:{name:"movie-info",params:{kp_id:e.movie.kp_id}},class:"modern-dark-btn primary",onClick:r},{default:f((()=>a[11]||(a[11]=[j(" Посмотреть ")]))),_:1},8,["to"])):b("",!0),v("button",{class:"modern-dark-btn primary",disabled:e.loading,onClick:n},a[12]||(a[12]=[v("i",{class:"fas fa-dice"},null,-1),j(" Еще раз ")]),8,Oe)])])])):b("",!0)];var t})),_:1})}}},Se=r(Ee,[["__scopeId","data-v-ab41b1b2"]]),Le={class:"wrapper"},Ie={class:"mainpage"},ze={class:"search-type-buttons"},Ce=["disabled"],De={class:"search-container"},Pe={class:"input-wrapper"},Te=["placeholder","inputmode","onKeydown"],Me={class:"icons"},Ne={class:"content-container"},Fe={key:0},Ye={key:0},Ge={key:0,class:"loading-container"},Re={key:1,class:"empty-history"},$e={key:2},He={key:0,class:"no-results"},Be={key:3,class:"search-prompt"},Ue={__name:"MovieSearch",setup(e){var t=E(),r=S(),c=M(),f=o("title"),h=o(""),y=o([]),x=o(!1),k=o(!1),Q=o(!1),X=o(""),Z=o(null),ee=l((()=>t.isMobile)),te=o([]),ae=o(!1),ne=o(""),oe=o(!1),ie=o(null),le=o(!1),se=o(""),ce=o(null);function ue(e){te.value=te.value.filter((t=>t.kp_id!==e))}L(i(n().mark((function e(){var a,o,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.token){e.next=24;break}return x.value=!0,e.prev=2,e.next=5,B(U.HISTORY);case 5:te.value=e.sent,e.next=19;break;case 8:if(e.prev=8,e.t0=e.catch(2),a=G(e.t0),o=a.message,i=a.code,X.value=o,Z.value=i,console.error("Ошибка загрузки истории:",e.t0),401!==i){e.next=19;break}return r.logout(),e.next=18,c.push("/login");case 18:c.go(0);case 19:return e.prev=19,x.value=!1,e.finish(19);case 22:e.next=25;break;case 24:te.value=t.history;case 25:case"end":return e.stop()}}),e,null,[[2,8,19,22]])}))));var de=e=>{f.value=e,fe(),ae.value=!1},ve=e=>{if(X.value="",Z.value=null,"title"===f.value){if(h.value=e.target.value,ee.value)return;ae.value=R(h.value),ae.value&&(ne.value=$(h.value))}else h.value=e.target.value.replace(/\D+/g,"")},pe=()=>{ae.value&&(h.value=A(h.value),ae.value=!1)},fe=()=>{var e;h.value="",y.value=[],k.value=!1,ae.value=!1,X.value="",Z.value=null,null===(e=ce.value)||void 0===e||e.focus()},be=()=>{ge.cancel(),h.value&&(X.value="",Z.value=null,me())},me=function(){var e=i(n().mark((function e(){var t,r,o,i,l,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x.value=!0,k.value=!0,y.value=[],e.prev=3,"kinopoisk"!==f.value){e.next=8;break}return/^\d+$/.test(h.value)||(h.value=h.value.replace(/\D/g,"")),c.push({name:"movie-info",params:{kp_id:h.value}}),e.abrupt("return");case 8:if("imdb"!==f.value){e.next=19;break}return/^\d+$/.test(h.value)||(h.value=h.value.replace(/\D/g,"")),e.next=12,N(h.value);case 12:if(!(t=e.sent).id_kp){e.next=17;break}c.push({name:"movie-info",params:{kp_id:`${t.id_kp}`}}),e.next=18;break;case 17:throw new Error("Не найдено");case 18:return e.abrupt("return");case 19:if("shikimori"!==f.value){e.next=35;break}return/^\d+$/.test(h.value)||(h.value=h.value.replace(/\D/g,"")),e.prev=21,e.next=24,F(h.value);case 24:if(!(r=e.sent).id_kp){e.next=28;break}return c.push({name:"movie-info",params:{kp_id:`${r.id_kp}`}}),e.abrupt("return");case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(21),console.log("Switch to kodik",e.t0);case 33:return c.push({name:"movie-info-shiki",params:{shiki_id:`shiki${h.value}`}}),e.abrupt("return");case 35:if("title"!==f.value){e.next=40;break}return e.next=38,Y(h.value);case 38:o=e.sent,y.value=o.map((e=>{var t,r,n;return a(a({},e),{},{kp_id:e.id.toString(),rating_kp:"null"!==(null===(t=e.raw_data)||void 0===t?void 0:t.rating)?null===(r=e.raw_data)||void 0===r?void 0:r.rating:null,type:null===(n=e.raw_data)||void 0===n?void 0:n.type})}));case 40:e.next=48;break;case 42:e.prev=42,e.t1=e.catch(3),i=G(e.t1),l=i.message,s=i.code,X.value=l,Z.value=s,console.error("Ошибка при поиске:",e.t1);case 48:return e.prev=48,x.value=!1,e.finish(48);case 51:case"end":return e.stop()}}),e,null,[[3,42,48,51],[21,30]])})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=i(n().mark((function e(){var a,o,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x.value=!0,!r.token){e.next=25;break}return e.prev=2,e.next=5,W(U.HISTORY);case 5:te.value=[],x.value=!1,Q.value=!1,e.next=23;break;case 10:if(e.prev=10,e.t0=e.catch(2),a=G(e.t0),o=a.message,i=a.code,X.value=o,Z.value=i,console.error("Ошибка загрузки истории:",e.t0),401!==i){e.next=21;break}return r.logout(),e.next=20,c.push("/login");case 20:c.go(0);case 21:x.value=!1,Q.value=!1;case 23:e.next=28;break;case 25:t.clearAllHistory(),x.value=!1,Q.value=!1;case 28:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),ge=I((()=>{h.value.length>=2?me():h.value.length<2&&(y.value=[],k.value=!1)}),700);s((()=>{var e,t=window.location.hash;if(t.startsWith("#search=")){var a=decodeURIComponent(t.replace("#search=",""));h.value=a,me()}else if(t.startsWith("#imdb=")){var r=decodeURIComponent(t.replace("#imdb=",""));de("imdb"),h.value=r,me()}else if(t.startsWith("#shiki")){var n=decodeURIComponent(t.replace("#shiki",""));de("shikimori"),h.value=n,me()}null===(e=ce.value)||void 0===e||e.focus()})),z(h,(()=>{"title"===f.value&&ge()}));var ye=()=>{if(y.value.length>0){var e=document.querySelector(".movie-card");e&&e.focus()}},xe=()=>{oe.value=!0,we()},ke=()=>{oe.value=!1,ie.value=null,se.value=""},we=function(){var e=i(n().mark((function e(){var t,a,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return le.value=!0,se.value="",e.prev=2,e.next=5,H();case 5:t=e.sent,ie.value=t,e.next=14;break;case 9:e.prev=9,e.t0=e.catch(2),a=G(e.t0),r=a.message,se.value=r,console.error("Ошибка при получении случайного фильма:",e.t0);case 14:return e.prev=14,le.value=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,9,14,17]])})));return function(){return e.apply(this,arguments)}}();return(e,t)=>(d(),u("div",Le,[v("div",Ie,[v("div",ze,[v("button",{class:g({active:"title"===f.value}),onClick:t[0]||(t[0]=e=>de("title"))}," Название ",2),v("button",{class:g({active:"kinopoisk"===f.value}),onClick:t[1]||(t[1]=e=>de("kinopoisk"))}," ID Кинопоиск ",2),v("button",{class:g({active:"shikimori"===f.value}),onClick:t[2]||(t[2]=e=>de("shikimori"))}," ID Shikimori ",2),v("button",{class:g({active:"imdb"===f.value}),onClick:t[3]||(t[3]=e=>de("imdb"))}," ID IMDB ",2),v("button",{class:"random-button",onClick:xe,disabled:le.value},[t[7]||(t[7]=v("i",{class:"fas fa-dice"},null,-1)),j(" "+m(le.value?"Подбираем...":"Случайный фильм"),1)],8,Ce)]),v("div",De,[v("div",Pe,[O(v("input",{ref_key:"searchInput",ref:ce,"onUpdate:modelValue":t[4]||(t[4]=e=>h.value=e),placeholder:{title:"Введите название фильма",kinopoisk:"Пример: 301 (Матрица)",shikimori:"Пример: 28171 (Повар-боец Сома)",imdb:"Пример: 0198781 (Корпорация монстров)"}[f.value]||"Введите название фильма",class:g(["search-input",{"wrong-layout":ae.value}]),inputmode:"title"===f.value?"text":"numeric",onKeydown:[D(_(be,["prevent"]),["enter"]),D(_(pe,["prevent"]),["tab"]),D(_(ye,["prevent"]),["down"])],onInput:ve},null,42,Te),[[C,h.value]]),v("div",Me,[h.value?(d(),u("button",{key:0,class:"reset-button",onClick:fe},t[8]||(t[8]=[v("i",{class:"fas fa-times"},null,-1)]))):b("",!0),v("button",{class:"search-button",onClick:be},t[9]||(t[9]=[v("i",{class:"fas fa-search"},null,-1)]))]),ae.value?(d(),u("div",{key:0,class:g(["layout-warning",{show:ae.value}])},[t[10]||(t[10]=v("i",{class:"fas fa-keyboard"},null,-1)),j(" Возможно, вы используете неправильную раскладку. Нажмите Tab для переключения на "+m(ne.value)+" раскладку ",1)],2)):b("",!0)])]),v("div",Ne,[h.value?b("",!0):(d(),u("div",Fe,[v("h2",null,[t[11]||(t[11]=j(" История просмотра ")),te.value.length>0?(d(),u("span",Ye,[p(K,{onClick:t[5]||(t[5]=e=>Q.value=!0)}),p(J,{"is-open":Q.value,message:"Вы уверены, что хотите очистить историю?",onConfirm:he,onClose:t[6]||(t[6]=e=>Q.value=!1)},null,8,["is-open"])])):b("",!0)]),x.value?(d(),u("div",Ge,[p(q)])):0===te.value.length?(d(),u("div",Re,t[12]||(t[12]=[v("span",{class:"material-icons"},"movie",-1),v("p",null,"Здесь пока пусто",-1)]))):(d(),w(P(V),{key:2,"movies-list":te.value,"is-history":!0,loading:!1,onItemDeleted:ue},null,8,["movies-list"]))])),!h.value&&X.value?(d(),w(T,{key:1,message:X.value,code:Z.value},null,8,["message","code"])):b("",!0),k.value?(d(),u("div",$e,[t[13]||(t[13]=v("h2",null,"Результаты поиска",-1)),p(P(V),{"movies-list":y.value,"is-history":!1,loading:x.value},null,8,["movies-list","loading"]),0!==y.value.length||x.value||X.value?b("",!0):(d(),u("div",He," Ничего не найдено ")),X.value?(d(),w(T,{key:1,message:X.value,code:Z.value},null,8,["message","code"])):b("",!0)])):b("",!0),!h.value||k.value||x.value||X.value?b("",!0):(d(),u("div",Be,' Нажмите кнопку "Поиск" или Enter для поиска '))])]),p(re),p(Se,{"is-open":oe.value,movie:ie.value,loading:le.value,error:se.value,onClose:ke,onGetNewMovie:we},null,8,["is-open","movie","loading","error"])]))}};e("default",r(Ue,[["__scopeId","data-v-05c02d79"]]))}}}))}();
