!function(){function e(a){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(a)}function a(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function t(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach(function(a){n(e,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(o,a))})}return e}function n(a,t,n){return(t=function(a){var t=function(a,t){if("object"!=e(a)||!a)return a;var n=a[Symbol.toPrimitive];if(void 0!==n){var o=n.call(a,t||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(a)}(a,"string");return"symbol"==e(t)?t:t+""}(t))in a?Object.defineProperty(a,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[t]=n,a}function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,a,t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",i=t.toStringTag||"@@toStringTag";function l(t,n,o,i){var l=n&&n.prototype instanceof c?n:c,d=Object.create(l.prototype);return r(d,"_invoke",function(t,n,o){var r,i,l,c=0,d=o||[],u=!1,v={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(a,t){return r=a,i=0,l=e,v.n=t,s}};function p(t,n){for(i=t,l=n,a=0;!u&&c&&!o&&a<d.length;a++){var o,r=d[a],p=v.p,b=r[2];t>3?(o=b===n)&&(l=r[(i=r[4])?5:(i=3,3)],r[4]=r[5]=e):r[0]<=p&&((o=t<2&&p<r[1])?(i=0,v.v=n,v.n=r[1]):p<b&&(o=t<3||r[0]>n||n>b)&&(r[4]=t,r[5]=n,v.n=b,i=0))}if(o||t>1)return s;throw u=!0,n}return function(o,d,b){if(c>1)throw TypeError("Generator is already running");for(u&&1===d&&p(d,b),i=d,l=b;(a=i<2?e:l)||!u;){r||(i?i<3?(i>1&&(v.n=-1),p(i,l)):v.n=l:v.v=l);try{if(c=2,r){if(i||(o="next"),a=r[o]){if(!(a=a.call(r,l)))throw TypeError("iterator result is not an object");if(!a.done)return a;l=a.value,i<2&&(i=0)}else 1===i&&(a=r.return)&&a.call(r),i<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),i=1);r=e}else if((a=(u=v.n<0)?l:t.call(n,v))!==s)break}catch(a){r=e,i=1,l=a}finally{c=1}}return{value:a,done:u}}}(t,o,i),!0),d}var s={};function c(){}function d(){}function u(){}a=Object.getPrototypeOf;var v=[][n]?a(a([][n]())):(r(a={},n,function(){return this}),a),p=u.prototype=c.prototype=Object.create(v);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,r(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=u,r(p,"constructor",u),r(u,"constructor",d),d.displayName="GeneratorFunction",r(u,i,"GeneratorFunction"),r(p),r(p,i,"Generator"),r(p,n,function(){return this}),r(p,"toString",function(){return"[object Generator]"}),(o=function(){return{w:l,m:b}})()}function r(e,a,t,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}r=function(e,a,t,n){function i(a,t){r(e,a,function(e){return this._invoke(a,t,e)})}a?o?o(e,a,{value:t,enumerable:!n,configurable:!n,writable:!n}):e[a]=t:(i("next",0),i("throw",1),i("return",2))},r(e,a,t,n)}function i(e,a,t,n,o,r,i){try{var l=e[r](i),s=l.value}catch(e){return void t(e)}l.done?a(s):Promise.resolve(s).then(n,o)}function l(e){return function(){var a=this,t=arguments;return new Promise(function(n,o){var r=e.apply(a,t);function l(e){i(r,n,o,l,s,"next",e)}function s(e){i(r,n,o,l,s,"throw",e)}l(void 0)})}}System.register(["./index-legacy-C09_Ozr3.js","./BaseModal-legacy-CYW2MwT1.js","./MovieList-legacy-CnIAho9-.js","./SpinnerLoading-legacy-Boi0b7JI.js","./icon-imdb-logo-legacy-DY9dgmyD.js"],function(e,a){"use strict";var n,r,i,s,c,d,u,v,p,b,f,m,g,h,y,x,k,w,_,j,O,S,I,z,C,D,E,T,M,P,F,Y,R,G,$,H,N,B,L,U,W,J,K,V,q,A,Q,X,Z;return{setters:[e=>{n=e._,r=e.r,i=e.c,s=e.o,c=e.a,d=e.b,u=e.d,v=e.e,p=e.w,b=e.T,f=e.n,m=e.g,g=e.f,h=e.h,y=e.t,x=e.i,k=e.j,w=e.k,_=e.l,j=e.m,O=e.p,S=e.u,I=e.q,z=e.s,C=e.v,D=e.x,E=e.y,T=e.z,M=e.A,P=e.E,F=e.B,Y=e.C,R=e.D,G=e.F,$=e.G,H=e.H,N=e.I,B=e.J,L=e.K,U=e.U,W=e.L,J=e.M},e=>{K=e.B},e=>{V=e.D,q=e.M},e=>{A=e.S},e=>{Q=e._,X=e.a,Z=e.b}],execute:function(){var a=document.createElement("style");a.textContent='footer[data-v-1babf189]{width:100%;background:rgba(0,0,0,.8);backdrop-filter:blur(10px);z-index:1000;transition:all .3s ease}.footer-fixed[data-v-1babf189]{position:fixed;bottom:0;left:0}.footer-static[data-v-1babf189]{position:static}.donaters-wrapper[data-v-1babf189]{width:100%;height:20px;display:flex;justify-content:center;align-items:center;padding:10px 0}.donater[data-v-1babf189]{font-family:Neucha,sans-serif;font-weight:700;color:rgba(255,255,255,.945)}.fade-enter-active[data-v-1babf189],.fade-leave-active[data-v-1babf189]{transition:opacity 1s ease}.fade-enter-from[data-v-1babf189],.fade-leave-to[data-v-1babf189]{opacity:0}.modal-enter-active[data-v-ab41b1b2],.modal-leave-active[data-v-ab41b1b2]{transition:opacity .3s ease}.modal-enter-from[data-v-ab41b1b2],.modal-leave-to[data-v-ab41b1b2]{opacity:0}.modal-overlay[data-v-ab41b1b2]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);backdrop-filter:blur(4px);display:flex;justify-content:center;align-items:center;z-index:1000;animation:overlay-in-ab41b1b2 .3s}.modal[data-v-ab41b1b2]{transform:translateY(-50px);animation:modal-in-ab41b1b2 .3s forwards}.random-movie-modal[data-v-ab41b1b2]{width:600px;max-width:95vw;max-height:90vh;overflow-y:auto}.modern-dark-dialog[data-v-ab41b1b2]{background-color:#1d1d1d;color:#e2e8f0;border-radius:12px;overflow:hidden;box-shadow:0 10px 15px -3px rgba(0,0,0,.3),0 4px 6px -2px rgba(0,0,0,.25)}.modal-header[data-v-ab41b1b2]{padding:16px 20px;border-bottom:1px solid var(--accent-color);display:flex;justify-content:space-between;align-items:center}.modal-header h3[data-v-ab41b1b2]{margin:0;font-size:1.1rem;font-weight:600;display:flex;align-items:center;gap:8px}.close-btn[data-v-ab41b1b2]{background:none;border:none;color:#e2e8f0;font-size:1.2rem;cursor:pointer;padding:4px;opacity:.7;transition:opacity .2s ease}.close-btn[data-v-ab41b1b2]:hover{opacity:1}.modal-content[data-v-ab41b1b2]{padding:20px;max-height:60vh;overflow-y:auto}.loading-container[data-v-ab41b1b2]{display:flex;flex-direction:column;align-items:center;gap:16px;padding:40px 20px}.spinner[data-v-ab41b1b2]{width:40px;height:40px;border:3px solid #333;border-top:3px solid var(--accent-color);border-radius:50%;animation:spin-ab41b1b2 1s linear infinite}@keyframes spin-ab41b1b2{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-content[data-v-ab41b1b2]{display:flex;flex-direction:column;align-items:center;gap:16px;padding:40px 20px;color:#ff6b6b}.error-content i[data-v-ab41b1b2]{font-size:3rem}.movie-content[data-v-ab41b1b2]{display:flex;gap:20px}.movie-poster-section[data-v-ab41b1b2]{flex-shrink:0}.movie-poster[data-v-ab41b1b2]{width:150px;height:225px;object-fit:cover;border-radius:8px}.movie-info-section[data-v-ab41b1b2]{flex:1;display:flex;flex-direction:column;gap:12px}.movie-title[data-v-ab41b1b2]{font-size:1.3rem;font-weight:600;margin:0;line-height:1.3}.movie-year[data-v-ab41b1b2]{font-size:1.1rem;color:#a0a0a0}.movie-type[data-v-ab41b1b2]{background:var(--accent-color);color:#fff;padding:4px 8px;border-radius:4px;font-size:.85rem;align-self:flex-start}.movie-countries[data-v-ab41b1b2],.movie-genres[data-v-ab41b1b2]{font-size:.9rem;line-height:1.4}.movie-countries strong[data-v-ab41b1b2],.movie-genres strong[data-v-ab41b1b2]{color:#a0a0a0}.ratings[data-v-ab41b1b2]{display:flex;gap:12px;flex-wrap:wrap}.rating[data-v-ab41b1b2]{display:flex;align-items:center;gap:5px;background:rgba(0,0,0,.3);padding:6px 10px;border-radius:6px;font-weight:600}.rating-logo[data-v-ab41b1b2]{width:20px;height:20px}.total-ratings[data-v-ab41b1b2]{font-size:.8rem;opacity:.7}.external-links[data-v-ab41b1b2]{display:flex;gap:10px;flex-wrap:wrap}.external-link[data-v-ab41b1b2]{display:flex;align-items:center;gap:6px;padding:8px 12px;background:rgba(255,255,255,.1);border-radius:6px;text-decoration:none;color:#e2e8f0;font-size:.9rem;transition:background .2s ease}.external-link[data-v-ab41b1b2]:hover{background:rgba(255,255,255,.2)}.external-link img[data-v-ab41b1b2]{width:16px;height:16px}.modal-actions[data-v-ab41b1b2]{display:flex;justify-content:flex-end;gap:12px;padding:16px 20px;border-top:1px solid #333}.modern-dark-btn[data-v-ab41b1b2]{padding:10px 16px;border-radius:6px;border:none;background-color:#242424;color:#e2e8f0;cursor:pointer;font-weight:500;transition:all .2s ease;text-decoration:none;display:flex;align-items:center;gap:6px}.modern-dark-btn[data-v-ab41b1b2]:hover{background-color:#2b2b2b}.modern-dark-btn[data-v-ab41b1b2]:disabled{opacity:.5;cursor:not-allowed}.modern-dark-btn.primary[data-v-ab41b1b2]{background-color:var(--accent-color);color:#fff}.modern-dark-btn.primary[data-v-ab41b1b2]:hover{background-color:var(--accent-hover-color)}@keyframes modal-in-ab41b1b2{to{transform:translateY(0)}}@keyframes overlay-in-ab41b1b2{0%{backdrop-filter:blur(0)}to{backdrop-filter:blur(4px)}}@media (max-width: 768px){.random-movie-modal[data-v-ab41b1b2]{width:95vw;margin:0 10px}.movie-content[data-v-ab41b1b2]{flex-direction:column;align-items:center;text-align:center}.movie-poster[data-v-ab41b1b2]{width:120px;height:180px}.modal-actions[data-v-ab41b1b2]{flex-direction:column;gap:8px;padding:16px 20px}.modal-actions .modern-dark-btn[data-v-ab41b1b2],.modal-actions a.modern-dark-btn[data-v-ab41b1b2]{width:100%;justify-content:center;box-sizing:border-box}}.wrapper[data-v-05c02d79]{display:flex;flex-direction:column;min-height:100vh}.mainpage[data-v-05c02d79]{flex:1;padding-top:20px;padding-bottom:40px}.search-type-buttons[data-v-05c02d79]{display:flex;justify-content:center;gap:20px;padding-top:10px;margin-bottom:5px;flex-wrap:wrap}.search-type-buttons button[data-v-05c02d79]{padding:5px 10px;font-size:16px;border:none;background:none;color:#fff;cursor:pointer;transition:all .3s ease;position:relative}.search-type-buttons button[data-v-05c02d79]:after{content:"";position:absolute;left:0;bottom:-2px;width:100%;height:2px;background-color:transparent;transition:background-color .3s ease}.search-type-buttons button.active[data-v-05c02d79]:after{background-color:var(--accent-color)}.search-type-buttons button[data-v-05c02d79]:hover{color:#fff}.random-button[data-v-05c02d79]{background:var(--accent-color)!important;color:#fff!important;border-radius:8px;padding:8px 16px!important;font-weight:600;transition:all .3s ease;display:flex;align-items:center;gap:6px}.random-button[data-v-05c02d79]:hover:not(:disabled){background:var(--accent-hover-color)!important;transform:translateY(-1px)}.random-button[data-v-05c02d79]:disabled{opacity:.7;cursor:not-allowed;transform:none}.random-button[data-v-05c02d79]:after{display:none}.search-container[data-v-05c02d79]{display:flex;justify-content:center;padding:20px}.input-wrapper[data-v-05c02d79]{position:relative;width:100%;max-width:800px}.search-input[data-v-05c02d79]{box-sizing:border-box;width:100%;padding:10px;font-size:16px;border:1px solid #ccc;border-radius:10px;background:rgba(30,30,30,.8);color:#fff;transition:border-color .3s ease}.search-input[data-v-05c02d79]:focus{outline:none;border-color:var(--accent-color);box-shadow:0 0 0 2px var(--accent-transparent)}.search-input.wrong-layout[data-v-05c02d79]{border-color:#ff8c00;box-shadow:0 0 5px rgba(255,140,0,.2)}.icons[data-v-05c02d79]{position:absolute;right:10px;top:50%;transform:translateY(-50%);display:flex;gap:8px;align-items:center}.reset-button[data-v-05c02d79],.search-button[data-v-05c02d79]{background:none;border:none;color:#fff;cursor:pointer;padding:2px;opacity:.7;transition:opacity .2s ease}.reset-button[data-v-05c02d79]:hover,.search-button[data-v-05c02d79]:hover{opacity:1}.reset-button i[data-v-05c02d79],.search-button i[data-v-05c02d79]{font-size:18px;display:block;width:20px;height:20px}h2[data-v-05c02d79]{display:flex;font-size:20px;margin-bottom:20px;justify-content:center;align-items:center;gap:10px}.no-results[data-v-05c02d79]{width:100%;text-align:center;color:#fff;font-size:18px;margin-top:20px}.search-prompt[data-v-05c02d79]{text-align:center;color:#fff;font-size:18px;margin-top:20px}.layout-warning[data-v-05c02d79]{position:absolute;bottom:-40px;left:0;right:0;text-align:center;color:#ff8c00;font-size:14px;background:rgba(255,140,0,.15);padding:8px 12px;border-radius:5px;pointer-events:none;border:1px solid rgba(255,140,0,.5);display:flex;align-items:center;justify-content:center;gap:8px;opacity:0;transform:translateY(-10px);transition:all .3s ease;z-index:1;backdrop-filter:blur(5px)}.layout-warning.show[data-v-05c02d79]{opacity:1;transform:translateY(0)}.layout-warning i[data-v-05c02d79]{font-size:16px;color:#ff8c00}.layout-warning[data-v-05c02d79]{color:#ff8c00}.loading-container[data-v-05c02d79]{display:flex;justify-content:center;align-items:center;min-height:200px;width:100%}.empty-history[data-v-05c02d79]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:200px;color:#888;gap:15px}.empty-history .material-icons[data-v-05c02d79]{font-size:64px;color:#888;opacity:.7}.empty-history p[data-v-05c02d79]{font-size:18px;margin:0;color:#888}@media (max-width: 600px){.mainpage[data-v-05c02d79]{padding-top:0;height:calc(100vh - 93px)}.search-container[data-v-05c02d79],.search-type-buttons[data-v-05c02d79]{padding:0}}\n/*$vite$:1*/',document.head.appendChild(a);var ee={class:"donaters-wrapper"},ae="donatersCache",te={__name:"FooterDonaters",setup(e){var a=r([]),t=r(-1),n=r(!1),x=null,k=i(()=>-1!==t.value&&a.value.length?a.value[t.value]:""),w=()=>{var e=window.pageYOffset||document.documentElement.scrollTop,a=window.innerHeight,t=document.documentElement.scrollHeight;n.value=e+a>=t-10},_=function(){var e=l(o().m(function e(){var t,n,r,i,l,s,c,d;return o().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=(new Date).toISOString().split("T")[0],!(n=localStorage.getItem(ae))){e.n=4;break}if(e.p=1,r=JSON.parse(n),i=r.date,l=r.data,i!==t){e.n=2;break}return a.value=l,e.a(2);case 2:e.n=4;break;case 3:e.p=3,c=e.v,console.error("Ошибка кэша донатеров:",c);case 4:return e.p=4,e.n=5,m();case 5:s=e.v,a.value=s.split("\n").map(e=>e.trim()).filter(e=>e),localStorage.setItem(ae,JSON.stringify({date:t,data:a.value})),e.n=7;break;case 6:e.p=6,d=e.v,console.error("Ошибка загрузки донатеров:",d);case 7:return e.a(2)}},e,null,[[4,6],[1,3]])}));return function(){return e.apply(this,arguments)}}();function j(){if(a.value.length){var e=Math.floor(Math.random()*a.value.length);t.value=e}}function O(){0!==a.value.length&&(j(),x=setInterval(j,4e3))}return s(l(o().m(function e(){return o().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,_();case 1:O(),window.addEventListener("scroll",w),w();case 2:return e.a(2)}},e)}))),c(()=>{x&&clearInterval(x),window.removeEventListener("scroll",w)}),(e,a)=>(g(),d("footer",{class:f({"footer-fixed":!n.value,"footer-static":n.value})},[u("div",ee,[v(b,{name:"fade",mode:"out-in"},{default:p(()=>[k.value?(g(),d("span",{key:t.value,class:"donater"},y(k.value),1)):h("",!0)]),_:1})])],2))}},ne=n(te,[["__scopeId","data-v-1babf189"]]),oe={class:"modal modern-dark-dialog random-movie-modal"},re={class:"modal-content"},ie={key:0,class:"loading-container"},le={key:1,class:"movie-content"},se={class:"movie-poster-section"},ce=["alt"],de={class:"movie-info-section"},ue={class:"movie-title"},ve={key:0,class:"movie-year"},pe={key:1,class:"movie-type"},be={key:2,class:"movie-countries"},fe={key:3,class:"movie-genres"},me={class:"ratings"},ge={key:0,class:"rating rating-our"},he={key:1,class:"rating rating-kp"},ye={key:2,class:"rating rating-imdb"},xe={class:"external-links"},ke=["href"],we=["href"],_e={key:2,class:"error-content"},je={class:"modal-actions"},Oe=["disabled"],Se={__name:"RandomMovieModal",props:{isOpen:Boolean,movie:Object,loading:Boolean,error:String},emits:["close","get-new-movie"],setup(e,a){var t=a.emit,n=()=>{t("close")},o=()=>{t("get-new-movie")},r=e=>{e.target.src="/src/assets/image-no-poster.gif"};return(a,t)=>{var i=k("router-link"),l=w("lazy");return g(),x(b,{name:"modal"},{default:p(()=>{return[e.isOpen?(g(),d("div",{key:0,class:"modal-overlay",onClick:_(n,["self"])},[u("div",oe,[u("div",{class:"modal-header"},[t[1]||(t[1]=u("h3",null,[u("i",{class:"fas fa-dice"}),j(" Случайный фильм ")],-1)),u("button",{class:"close-btn",onClick:n},t[0]||(t[0]=[u("i",{class:"fas fa-times"},null,-1)]))]),u("div",re,[e.loading?(g(),d("div",ie,t[2]||(t[2]=[u("div",{class:"spinner"},null,-1),u("p",null,"Подбираем фильм...",-1)]))):e.movie?(g(),d("div",le,[u("div",se,[O(u("img",{alt:e.movie.title,class:"movie-poster",onError:r},null,40,ce),[[l,e.movie.cover]])]),u("div",de,[u("h4",ue,y(e.movie.title),1),e.movie.year?(g(),d("div",ve,y(e.movie.year),1)):h("",!0),e.movie.type?(g(),d("div",pe,y((a=e.movie.type,{"FilmType.FILM":"Фильм","FilmType.TV_SERIES":"Сериал","FilmType.TV_SHOW":"ТВ-шоу","FilmType.MINI_SERIES":"Мини-сериал"}[a]||a)),1)):h("",!0),e.movie.countries?(g(),d("div",be,[t[3]||(t[3]=u("strong",null,"Страны:",-1)),j(" "+y(e.movie.countries),1)])):h("",!0),e.movie.genres?(g(),d("div",fe,[t[4]||(t[4]=u("strong",null,"Жанры:",-1)),j(" "+y(e.movie.genres),1)])):h("",!0),u("div",me,[e.movie.rating_reyohoho?(g(),d("div",ge,[t[5]||(t[5]=u("img",{src:Q,alt:"ReYohoho",class:"rating-logo"},null,-1)),j(" "+y(e.movie.rating_reyohoho.toFixed(1)),1)])):h("",!0),e.movie.rating_kp?(g(),d("div",he,[t[6]||(t[6]=u("img",{src:X,alt:"КП",class:"rating-logo"},null,-1)),j(" "+y(e.movie.rating_kp),1)])):h("",!0),e.movie.rating_imdb?(g(),d("div",ye,[t[7]||(t[7]=u("img",{src:Z,alt:"IMDb",class:"rating-logo"},null,-1)),j(" "+y(e.movie.rating_imdb),1)])):h("",!0)]),u("div",xe,[e.movie.url_kp?(g(),d("a",{key:0,href:e.movie.url_kp,target:"_blank",class:"external-link"},t[8]||(t[8]=[u("img",{src:X,alt:"КП"},null,-1),j(" Кинопоиск ")]),8,ke)):h("",!0),e.movie.url_imdb?(g(),d("a",{key:1,href:e.movie.url_imdb,target:"_blank",class:"external-link"},t[9]||(t[9]=[u("img",{src:Z,alt:"IMDb"},null,-1),j(" IMDb ")]),8,we)):h("",!0)])])])):e.error?(g(),d("div",_e,[t[10]||(t[10]=u("i",{class:"fas fa-exclamation-triangle"},null,-1)),u("p",null,y(e.error),1)])):h("",!0)]),u("div",je,[u("button",{class:"modern-dark-btn",onClick:n},"Закрыть"),e.movie&&!e.loading?(g(),x(i,{key:0,to:{name:"movie-info",params:{kp_id:e.movie.kp_id}},class:"modern-dark-btn primary",onClick:n},{default:p(()=>t[11]||(t[11]=[j(" Посмотреть ")])),_:1},8,["to"])):h("",!0),u("button",{class:"modern-dark-btn primary",disabled:e.loading,onClick:o},t[12]||(t[12]=[u("i",{class:"fas fa-dice"},null,-1),j(" Еще раз ")]),8,Oe)])])])):h("",!0)];var a}),_:1})}}},Ie=n(Se,[["__scopeId","data-v-ab41b1b2"]]),ze={class:"wrapper"},Ce={class:"mainpage"},De={class:"search-type-buttons"},Ee=["disabled"],Te={class:"search-container"},Me={class:"input-wrapper"},Pe=["placeholder","inputmode","onKeydown"],Fe={class:"icons"},Ye={class:"content-container"},Re={key:0},Ge={key:0},$e={key:0,class:"loading-container"},He={key:1,class:"empty-history"},Ne={key:2},Be={key:0,class:"no-results"},Le={key:3,class:"search-prompt"},Ue={__name:"MovieSearch",setup(e){var a=S(),n=I(),c=F(),p=r("title"),b=r(""),m=r([]),k=r(!1),w=r(!1),Q=r(!1),X=r(""),Z=r(null),ee=i(()=>a.isMobile),ae=r([]),te=r(!1),oe=r(""),re=r(!1),ie=r(null),le=r(!1),se=r(""),ce=r(null);function de(e){ae.value=ae.value.filter(a=>a.kp_id!==e)}z(l(o().m(function e(){var t,r,i,l;return o().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!n.token){e.n=7;break}return k.value=!0,e.p=1,e.n=2,L(U.HISTORY);case 2:ae.value=e.v,e.n=5;break;case 3:if(e.p=3,l=e.v,t=$(l),r=t.message,i=t.code,X.value=r,Z.value=i,console.error("Ошибка загрузки истории:",l),401!==i){e.n=5;break}return n.logout(),e.n=4,c.push("/login");case 4:c.go(0);case 5:return e.p=5,k.value=!1,e.f(5);case 6:e.n=8;break;case 7:ae.value=a.history;case 8:return e.a(2)}},e,null,[[1,3,5,6]])})));var ue=e=>{p.value=e,be(),te.value=!1},ve=e=>{if(X.value="",Z.value=null,"title"===p.value){if(b.value=e.target.value,ee.value)return;te.value=H(b.value),te.value&&(oe.value=N(b.value))}else b.value=e.target.value.replace(/\D+/g,"")},pe=()=>{te.value&&(b.value=W(b.value),te.value=!1)},be=()=>{var e;b.value="",m.value=[],w.value=!1,te.value=!1,X.value="",Z.value=null,null===(e=ce.value)||void 0===e||e.focus()},fe=()=>{he.cancel(),b.value&&(X.value="",Z.value=null,me())},me=function(){var e=l(o().m(function e(){var a,n,r,i,l,s,d,u;return o().w(function(e){for(;;)switch(e.p=e.n){case 0:if(k.value=!0,w.value=!0,m.value=[],e.p=1,"kinopoisk"!==p.value){e.n=2;break}return/^\d+$/.test(b.value)||(b.value=b.value.replace(/\D/g,"")),c.push({name:"movie-info",params:{kp_id:b.value}}),e.a(2);case 2:if("imdb"!==p.value){e.n=6;break}return/^\d+$/.test(b.value)||(b.value=b.value.replace(/\D/g,"")),e.n=3,Y(b.value);case 3:if(!(a=e.v).id_kp){e.n=4;break}c.push({name:"movie-info",params:{kp_id:`${a.id_kp}`}}),e.n=5;break;case 4:throw new Error("Не найдено");case 5:return e.a(2);case 6:if("shikimori"!==p.value){e.n=12;break}return/^\d+$/.test(b.value)||(b.value=b.value.replace(/\D/g,"")),e.p=7,e.n=8,R(b.value);case 8:if(!(n=e.v).id_kp){e.n=9;break}return c.push({name:"movie-info",params:{kp_id:`${n.id_kp}`}}),e.a(2);case 9:e.n=11;break;case 10:e.p=10,d=e.v,console.log("Switch to kodik",d);case 11:return c.push({name:"movie-info-shiki",params:{shiki_id:`shiki${b.value}`}}),e.a(2);case 12:if("title"!==p.value){e.n=14;break}return e.n=13,G(b.value);case 13:r=e.v,m.value=r.map(e=>{var a,n,o;return t(t({},e),{},{kp_id:e.id.toString(),rating_kp:"null"!==(null===(a=e.raw_data)||void 0===a?void 0:a.rating)?null===(n=e.raw_data)||void 0===n?void 0:n.rating:null,type:null===(o=e.raw_data)||void 0===o?void 0:o.type})});case 14:e.n=16;break;case 15:e.p=15,u=e.v,i=$(u),l=i.message,s=i.code,X.value=l,Z.value=s,console.error("Ошибка при поиске:",u);case 16:return e.p=16,k.value=!1,e.f(16);case 17:return e.a(2)}},e,null,[[7,10],[1,15,16,17]])}));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=l(o().m(function e(){var t,r,i,l;return o().w(function(e){for(;;)switch(e.p=e.n){case 0:if(k.value=!0,!n.token){e.n=7;break}return e.p=1,e.n=2,J(U.HISTORY);case 2:ae.value=[],k.value=!1,Q.value=!1,e.n=6;break;case 3:if(e.p=3,l=e.v,t=$(l),r=t.message,i=t.code,X.value=r,Z.value=i,console.error("Ошибка загрузки истории:",l),401!==i){e.n=5;break}return n.logout(),e.n=4,c.push("/login");case 4:c.go(0);case 5:k.value=!1,Q.value=!1;case 6:e.n=8;break;case 7:a.clearAllHistory(),k.value=!1,Q.value=!1;case 8:return e.a(2)}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}(),he=C(()=>{b.value.length>=2?me():b.value.length<2&&(m.value=[],w.value=!1)},700);s(()=>{var e,a=window.location.hash;if(a.startsWith("#search=")){var t=decodeURIComponent(a.replace("#search=",""));b.value=t,me()}else if(a.startsWith("#imdb=")){var n=decodeURIComponent(a.replace("#imdb=",""));ue("imdb"),b.value=n,me()}else if(a.startsWith("#shiki")){var o=decodeURIComponent(a.replace("#shiki",""));ue("shikimori"),b.value=o,me()}null===(e=ce.value)||void 0===e||e.focus()}),D(b,()=>{"title"===p.value&&he()});var ye=()=>{if(m.value.length>0){var e=document.querySelector(".movie-card");e&&e.focus()}},xe=()=>{re.value=!0,we()},ke=()=>{re.value=!1,ie.value=null,se.value=""},we=function(){var e=l(o().m(function e(){var a,t,n,r;return o().w(function(e){for(;;)switch(e.p=e.n){case 0:return le.value=!0,se.value="",e.p=1,e.n=2,B();case 2:a=e.v,ie.value=a,e.n=4;break;case 3:e.p=3,r=e.v,t=$(r),n=t.message,se.value=n,console.error("Ошибка при получении случайного фильма:",r);case 4:return e.p=4,le.value=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}();return(e,a)=>(g(),d("div",ze,[u("div",Ce,[u("div",De,[u("button",{class:f({active:"title"===p.value}),onClick:a[0]||(a[0]=e=>ue("title"))}," Название ",2),u("button",{class:f({active:"kinopoisk"===p.value}),onClick:a[1]||(a[1]=e=>ue("kinopoisk"))}," ID Кинопоиск ",2),u("button",{class:f({active:"shikimori"===p.value}),onClick:a[2]||(a[2]=e=>ue("shikimori"))}," ID Shikimori ",2),u("button",{class:f({active:"imdb"===p.value}),onClick:a[3]||(a[3]=e=>ue("imdb"))}," ID IMDB ",2),u("button",{class:"random-button",onClick:xe,disabled:le.value},[a[7]||(a[7]=u("i",{class:"fas fa-dice"},null,-1)),j(" "+y(le.value?"Подбираем...":"Случайный фильм"),1)],8,Ee)]),u("div",Te,[u("div",Me,[O(u("input",{ref_key:"searchInput",ref:ce,"onUpdate:modelValue":a[4]||(a[4]=e=>b.value=e),placeholder:{title:"Введите название фильма",kinopoisk:"Пример: 301 (Матрица)",shikimori:"Пример: 28171 (Повар-боец Сома)",imdb:"Пример: 0198781 (Корпорация монстров)"}[p.value]||"Введите название фильма",class:f(["search-input",{"wrong-layout":te.value}]),inputmode:"title"===p.value?"text":"numeric",onKeydown:[T(_(fe,["prevent"]),["enter"]),T(_(pe,["prevent"]),["tab"]),T(_(ye,["prevent"]),["down"])],onInput:ve},null,42,Pe),[[E,b.value]]),u("div",Fe,[b.value?(g(),d("button",{key:0,class:"reset-button",onClick:be},a[8]||(a[8]=[u("i",{class:"fas fa-times"},null,-1)]))):h("",!0),u("button",{class:"search-button",onClick:fe},a[9]||(a[9]=[u("i",{class:"fas fa-search"},null,-1)]))]),te.value?(g(),d("div",{key:0,class:f(["layout-warning",{show:te.value}])},[a[10]||(a[10]=u("i",{class:"fas fa-keyboard"},null,-1)),j(" Возможно, вы используете неправильную раскладку. Нажмите Tab для переключения на "+y(oe.value)+" раскладку ",1)],2)):h("",!0)])]),u("div",Ye,[b.value?h("",!0):(g(),d("div",Re,[u("h2",null,[a[11]||(a[11]=j(" История просмотра ")),ae.value.length>0?(g(),d("span",Ge,[v(V,{onClick:a[5]||(a[5]=e=>Q.value=!0)}),v(K,{"is-open":Q.value,message:"Вы уверены, что хотите очистить историю?",onConfirm:ge,onClose:a[6]||(a[6]=e=>Q.value=!1)},null,8,["is-open"])])):h("",!0)]),k.value?(g(),d("div",$e,[v(A)])):0===ae.value.length?(g(),d("div",He,a[12]||(a[12]=[u("span",{class:"material-icons"},"movie",-1),u("p",null,"Здесь пока пусто",-1)]))):(g(),x(M(q),{key:2,"movies-list":ae.value,"is-history":!0,loading:!1,onItemDeleted:de},null,8,["movies-list"]))])),!b.value&&X.value?(g(),x(P,{key:1,message:X.value,code:Z.value},null,8,["message","code"])):h("",!0),w.value?(g(),d("div",Ne,[a[13]||(a[13]=u("h2",null,"Результаты поиска",-1)),v(M(q),{"movies-list":m.value,"is-history":!1,loading:k.value},null,8,["movies-list","loading"]),0!==m.value.length||k.value||X.value?h("",!0):(g(),d("div",Be," Ничего не найдено ")),X.value?(g(),x(P,{key:1,message:X.value,code:Z.value},null,8,["message","code"])):h("",!0)])):h("",!0),!b.value||w.value||k.value||X.value?h("",!0):(g(),d("div",Le,' Нажмите кнопку "Поиск" или Enter для поиска '))])]),v(ne),v(Ie,{"is-open":re.value,movie:ie.value,loading:le.value,error:se.value,onClose:ke,onGetNewMovie:we},null,8,["is-open","movie","loading","error"])]))}};e("default",n(Ue,[["__scopeId","data-v-05c02d79"]]))}}})}();
