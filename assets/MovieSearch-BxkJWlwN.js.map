{"version":3,"file":"MovieSearch-BxkJWlwN.js","sources":["../../src/components/FooterDonaters.vue","../../src/components/MovieSearch.vue"],"sourcesContent":["<template>\n  <footer>\n    <div class=\"donaters-wrapper\">\n      <transition name=\"fade\" mode=\"out-in\">\n        <span v-if=\"currentDonater\" :key=\"currentIndex\" class=\"donater\">\n          {{ currentDonater }}\n        </span>\n      </transition>\n    </div>\n  </footer>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, onUnmounted } from 'vue'\nimport { getDons } from '@/api/movies'\n\nconst donaters = ref([])\nconst currentIndex = ref(-1)\nconst CACHE_KEY_DONATERS = 'donatersCache'\nlet intervalId = null\n\nconst currentDonater = computed(() => {\n  if (currentIndex.value === -1 || !donaters.value.length) return ''\n  return donaters.value[currentIndex.value]\n})\n\nconst fetchDonaters = async () => {\n  const today = new Date().toISOString().split('T')[0]\n  const cached = localStorage.getItem(CACHE_KEY_DONATERS)\n\n  if (cached) {\n    try {\n      const { date, data } = JSON.parse(cached)\n      if (date === today) {\n        donaters.value = data\n        return\n      }\n    } catch (e) {\n      console.error('Ошибка кэша донатеров:', e)\n    }\n  }\n\n  try {\n    const dons = await getDons()\n    donaters.value = dons\n      .split('\\n')\n      .map((line) => line.trim())\n      .filter((line) => line)\n    localStorage.setItem(\n      CACHE_KEY_DONATERS,\n      JSON.stringify({\n        date: today,\n        data: donaters.value\n      })\n    )\n  } catch (error) {\n    console.error('Ошибка загрузки донатеров:', error)\n  }\n}\n\nfunction updateCurrentDonater() {\n  if (!donaters.value.length) return\n  const newIndex = Math.floor(Math.random() * donaters.value.length)\n  currentIndex.value = newIndex\n}\n\nfunction startShowingDonaters() {\n  if (donaters.value.length === 0) return\n  updateCurrentDonater()\n  intervalId = setInterval(updateCurrentDonater, 4000)\n}\n\nonMounted(async () => {\n  await fetchDonaters()\n  startShowingDonaters()\n})\n\nonUnmounted(() => {\n  if (intervalId) clearInterval(intervalId)\n})\n</script>\n\n<style scoped>\n.donaters-wrapper {\n  width: 100%;\n  height: 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding-bottom: 10px;\n}\n\n.donater {\n  font-family: Neucha, sans-serif;\n  font-weight: bold;\n  color: rgba(255, 255, 255, 0.945);\n}\n\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 1s ease;\n}\n\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n</style>\n","<template>\n  <div class=\"wrapper\">\n    <div class=\"mainpage\">\n      <!-- Кнопки выбора типа поиска -->\n      <div class=\"search-type-buttons\">\n        <button :class=\"{ active: searchType === 'title' }\" @click=\"setSearchType('title')\">\n          Название\n        </button>\n        <button :class=\"{ active: searchType === 'kinopoisk' }\" @click=\"setSearchType('kinopoisk')\">\n          ID Кинопоиск\n        </button>\n        <button :class=\"{ active: searchType === 'shikimori' }\" @click=\"setSearchType('shikimori')\">\n          ID Shikimori\n        </button>\n        <button :class=\"{ active: searchType === 'imdb' }\" @click=\"setSearchType('imdb')\">\n          ID IMDB\n        </button>\n      </div>\n\n      <!-- Поиск -->\n      <div class=\"search-container\">\n        <div class=\"input-wrapper\">\n          <input\n            ref=\"searchInput\"\n            v-model=\"searchTerm\"\n            :placeholder=\"getPlaceholder()\"\n            class=\"search-input\"\n            :class=\"{ 'wrong-layout': showLayoutWarning }\"\n            :inputmode=\"searchType === 'title' ? 'text' : 'numeric'\"\n            @keydown.enter=\"search\"\n            @keydown.tab.prevent=\"handleTabKey\"\n            @input=\"handleInput\"\n          />\n          <div class=\"icons\">\n            <button v-if=\"searchTerm\" class=\"reset-button\" @click=\"resetSearch\">\n              <i class=\"fas fa-times\"></i>\n            </button>\n            <button class=\"search-button\" @click=\"search\">\n              <i class=\"fas fa-search\"></i>\n            </button>\n          </div>\n          <div v-if=\"showLayoutWarning\" class=\"layout-warning\" :class=\"{ 'show': showLayoutWarning }\">\n            <i class=\"fas fa-keyboard\"></i>\n            Возможно, вы используете неправильную раскладку. Нажмите Tab для переключения на {{ suggestedLayout }} раскладку\n          </div>\n        </div>\n      </div>\n\n      <!-- Контейнер для истории и результатов -->\n      <div class=\"content-container\">\n        <!-- История просмотра -->\n        <div v-if=\"!searchTerm\">\n          <h2>\n            История просмотра\n            <span v-if=\"history.length > 0\">\n              <DeleteButton @click=\"showModal = true\" />\n              <BaseModal\n                :is-open=\"showModal\"\n                message=\"Вы уверены, что хотите очистить историю?\"\n                @confirm=\"clearAllHistory\"\n                @close=\"showModal = false\"\n              />\n            </span>\n          </h2>\n          <div v-if=\"loading\" class=\"loading-container\">\n            <SpinnerLoading />\n          </div>\n          <div v-else-if=\"history.length === 0\" class=\"empty-history\">\n            <span class=\"material-icons\">movie</span>\n            <p>Здесь пока пусто</p>\n          </div>\n          <MovieList\n            v-else\n            :movies-list=\"history\"\n            :is-history=\"true\"\n            :loading=\"false\"\n            @item-deleted=\"handleItemDeleted\"\n          />\n        </div>\n        <ErrorMessage v-if=\"!searchTerm && errorMessage\" :message=\"errorMessage\" :code=\"errorCode\" />\n\n        <!-- Результаты поиска -->\n        <div v-if=\"searchPerformed\">\n          <h2>Результаты поиска</h2>\n          <MovieList :movies-list=\"movies\" :is-history=\"false\" :loading=\"loading\" />\n          <div v-if=\"movies.length === 0 && !loading && !errorMessage\" class=\"no-results\">\n            Ничего не найдено\n          </div>\n          <ErrorMessage v-if=\"errorMessage\" :message=\"errorMessage\" :code=\"errorCode\" />\n        </div>\n\n        <!-- Подсказка, когда ничего не введено в поиске -->\n        <div\n          v-if=\"searchTerm && !searchPerformed && !loading && !errorMessage\"\n          class=\"search-prompt\"\n        >\n          Нажмите кнопку \"Поиск\" или Enter для поиска\n        </div>\n      </div>\n    </div>\n    <FooterDonaters />\n  </div>\n</template>\n\n<script setup>\nimport { apiSearch, getKpIDfromIMDB, getKpIDfromSHIKI } from '@/api/movies'\nimport { handleApiError } from '@/constants'\nimport { getMyLists, delAllFromList } from '@/api/user'\nimport BaseModal from '@/components/BaseModal.vue'\nimport DeleteButton from '@/components/buttons/DeleteButton.vue'\nimport ErrorMessage from '@/components/ErrorMessage.vue'\nimport FooterDonaters from '@/components/FooterDonaters.vue'\nimport { MovieList } from '@/components/MovieList/'\nimport { useMainStore } from '@/store/main'\nimport { useAuthStore } from '@/store/auth'\nimport { USER_LIST_TYPES_ENUM } from '@/constants'\nimport { hasConsecutiveConsonants, suggestLayout, convertLayout } from '@/utils/keyboardLayout'\nimport debounce from 'lodash/debounce'\nimport { watchEffect, onMounted, ref, watch } from 'vue'\nimport { useRouter } from 'vue-router'\nimport SpinnerLoading from '@/components/SpinnerLoading.vue'\n\nconst mainStore = useMainStore()\nconst authStore = useAuthStore()\nconst router = useRouter()\n\nconst searchType = ref('title')\nconst searchTerm = ref('')\nconst movies = ref([])\nconst loading = ref(false)\nconst searchPerformed = ref(false)\nconst showModal = ref(false)\nconst errorMessage = ref('')\nconst errorCode = ref(null)\n\nconst history = ref([])\n\nconst showLayoutWarning = ref(false)\nconst suggestedLayout = ref('')\n\nwatchEffect(async () => {\n  if (authStore.token) {\n    loading.value = true\n    try {\n      history.value = await getMyLists(USER_LIST_TYPES_ENUM.HISTORY)\n    } catch (error) {\n      const { message, code } = handleApiError(error)\n      errorMessage.value = message\n      errorCode.value = code\n      console.error('Ошибка загрузки истории:', error)\n      if (code === 401) {\n        authStore.logout()\n        await router.push('/login')\n        router.go(0)\n      }\n    } finally {\n      loading.value = false\n    }\n  } else {\n    history.value = mainStore.history\n  }\n})\n\nfunction handleItemDeleted(deletedItemId) {\n  history.value = history.value.filter((item) => item.kp_id !== deletedItemId)\n}\n\n// Установка типа поиска\nconst setSearchType = (type) => {\n  searchType.value = type\n  resetSearch()\n  showLayoutWarning.value = false\n}\n\nconst handleInput = (event) => {\n  if (searchType.value === 'title') {\n    searchTerm.value = event.target.value\n    showLayoutWarning.value = hasConsecutiveConsonants(searchTerm.value)\n    if (showLayoutWarning.value) {\n      suggestedLayout.value = suggestLayout(searchTerm.value)\n    }\n  } else {\n    searchTerm.value = event.target.value.replace(/\\D+/g, '')\n  }\n}\n\nconst handleTabKey = () => {\n  if (showLayoutWarning.value) {\n    searchTerm.value = convertLayout(searchTerm.value)\n    showLayoutWarning.value = false\n  }\n}\n\n// Получение placeholder для input\nconst getPlaceholder = () => {\n  return (\n    {\n      title: 'Введите название фильма',\n      kinopoisk: 'Пример: 301 (Матрица)',\n      shikimori: 'Пример: 28171 (Повар-боец Сома)',\n      imdb: 'Пример: 0198781 (Корпорация монстров)'\n    }[searchType.value] || 'Введите название фильма'\n  )\n}\n\n// Очистка поиска\nconst resetSearch = () => {\n  searchTerm.value = ''\n  movies.value = []\n  searchPerformed.value = false\n}\n\nconst search = () => {\n  debouncedPerformSearch.cancel()\n  if (searchTerm.value) {\n    performSearch()\n  } else {\n    alert('Введите запрос для поиска')\n  }\n}\n\nconst performSearch = async () => {\n  loading.value = true\n  searchPerformed.value = true\n  movies.value = []\n\n  try {\n    if (searchType.value === 'kinopoisk') {\n      if (!/^\\d+$/.test(searchTerm.value)) {\n        searchTerm.value = searchTerm.value.replace(/\\D/g, '')\n      }\n      router.push({ name: 'movie-info', params: { kp_id: searchTerm.value } })\n      return\n    }\n\n    if (searchType.value === 'imdb') {\n      if (!/^\\d+$/.test(searchTerm.value)) {\n        searchTerm.value = searchTerm.value.replace(/\\D/g, '')\n      }\n      const response = await getKpIDfromIMDB(searchTerm.value)\n      if (response.id_kp) {\n        router.push({ name: 'movie-info', params: { kp_id: `${response.id_kp}` } })\n      } else {\n        throw new Error('Не найдено')\n      }\n      return\n    }\n\n    if (searchType.value === 'shikimori') {\n      if (!/^\\d+$/.test(searchTerm.value)) {\n        searchTerm.value = searchTerm.value.replace(/\\D/g, '')\n      }\n      const response = await getKpIDfromSHIKI(searchTerm.value)\n      if (response.id_kp) {\n        router.push({ name: 'movie-info', params: { kp_id: `${response.id_kp}` } })\n      } else {\n        throw new Error('Не найдено')\n      }\n      return\n    }\n    if (searchType.value === 'title') {\n      const response = await apiSearch(searchTerm.value)\n      movies.value = response.map((movie) => ({\n        ...movie,\n        kp_id: movie.id.toString(),\n        rating_kp: movie.raw_data?.rating !== 'null' ? movie.raw_data?.rating : null,\n        type: movie.raw_data?.type\n      }))\n    }\n  } catch (error) {\n    const { message, code } = handleApiError(error)\n    errorMessage.value = message\n    errorCode.value = code\n    console.error('Ошибка при поиске:', error)\n  } finally {\n    loading.value = false\n  }\n}\n\nconst clearAllHistory = async () => {\n  loading.value = true\n  if (authStore.token) {\n    try {\n      await delAllFromList(USER_LIST_TYPES_ENUM.HISTORY)\n      history.value = []\n      loading.value = false\n      showModal.value = false\n    } catch (error) {\n      const { message, code } = handleApiError(error)\n      errorMessage.value = message\n      errorCode.value = code\n      console.error('Ошибка загрузки истории:', error)\n      if (code === 401) {\n        authStore.logout()\n        await router.push('/login')\n        router.go(0)\n      }\n      loading.value = false\n      showModal.value = false\n    }\n  } else {\n    mainStore.clearAllHistory()\n    loading.value = false\n    showModal.value = false\n  }\n}\n\nconst debouncedPerformSearch = debounce(() => {\n  if (searchTerm.value.length >= 2) {\n    performSearch()\n  } else if (searchTerm.value.length < 2) {\n    movies.value = []\n    searchPerformed.value = false\n  }\n}, 700)\n\nonMounted(() => {\n  const hash = window.location.hash\n  if (hash.startsWith('#search=')) {\n    const searchQuery = decodeURIComponent(hash.replace('#search=', ''))\n    searchTerm.value = searchQuery\n    performSearch()\n  } else if (hash.startsWith('#imdb=')) {\n    const imdbId = decodeURIComponent(hash.replace('#imdb=', ''))\n    setSearchType('imdb')\n    searchTerm.value = imdbId\n    performSearch()\n  } else if (hash.startsWith('#shiki')) {\n    const shikiId = decodeURIComponent(hash.replace('#shiki', ''))\n    setSearchType('shikimori')\n    searchTerm.value = shikiId\n    performSearch()\n  }\n})\n\n// Автопоиск с задержкой (только для поиска по названию)\nwatch(searchTerm, () => {\n  if (searchType.value !== 'title') {\n    return\n  }\n  debouncedPerformSearch()\n})\n</script>\n\n<style scoped>\n.wrapper {\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n}\n\n.mainpage {\n  flex: 1;\n  padding-top: 20px;\n  padding-bottom: 40px;\n}\n\n/* Общие стили */\n.search-type-buttons {\n  display: flex;\n  justify-content: center;\n  gap: 20px;\n  padding-top: 10px;\n  margin-bottom: 5px;\n  flex-wrap: wrap;\n}\n\n.search-type-buttons button {\n  padding: 5px 10px;\n  font-size: 16px;\n  border: none;\n  background: none;\n  color: #fff;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  position: relative;\n}\n\n.search-type-buttons button::after {\n  content: '';\n  position: absolute;\n  left: 0;\n  bottom: -2px;\n  width: 100%;\n  height: 2px;\n  background-color: transparent;\n  transition: background-color 0.3s ease;\n}\n\n.search-type-buttons button.active::after {\n  background-color: #ffffff;\n}\n\n.search-type-buttons button:hover {\n  color: #ffffff;\n}\n\n.search-container {\n  display: flex;\n  justify-content: center;\n  padding: 20px;\n}\n\n.input-wrapper {\n  position: relative;\n  width: 100%;\n  max-width: 800px;\n}\n\n.search-input {\n  box-sizing: border-box;\n  width: 100%;\n  padding: 10px;\n  font-size: 16px;\n  border: 1px solid #ccc;\n  border-radius: 10px;\n  background: rgba(30, 30, 30, 0.8);\n  color: #fff;\n  transition: border-color 0.3s ease;\n}\n\n.search-input.wrong-layout {\n  border-color: #ff8c00;\n  box-shadow: 0 0 5px rgba(255, 140, 0, 0.2);\n}\n\n.icons {\n  position: absolute;\n  right: 10px;\n  top: 50%;\n  transform: translateY(-50%);\n  display: flex;\n  gap: 8px;\n  align-items: center;\n}\n\n.reset-button,\n.search-button {\n  background: none;\n  border: none;\n  color: #fff;\n  cursor: pointer;\n  padding: 2px;\n  opacity: 0.7;\n  transition: opacity 0.2s ease;\n}\n\n.reset-button:hover,\n.search-button:hover {\n  opacity: 1;\n}\n\n.reset-button i,\n.search-button i {\n  font-size: 18px;\n  display: block;\n  width: 20px;\n  height: 20px;\n}\n\nh2 {\n  display: flex;\n  font-size: 20px;\n  margin-bottom: 20px;\n  justify-content: center;\n  align-items: center;\n  gap: 10px;\n}\n\n/* Сообщение \"Ничего не найдено\" */\n.no-results {\n  width: 100%;\n  text-align: center;\n  color: #fff;\n  font-size: 18px;\n  margin-top: 20px;\n}\n\n/* Подсказка для поиска */\n.search-prompt {\n  text-align: center;\n  color: #fff;\n  font-size: 18px;\n  margin-top: 20px;\n}\n\n.layout-warning {\n  position: absolute;\n  bottom: -40px;\n  left: 0;\n  right: 0;\n  text-align: center;\n  color: #ff8c00;\n  font-size: 14px;\n  background: rgba(255, 140, 0, 0.15);\n  padding: 8px 12px;\n  border-radius: 5px;\n  pointer-events: none;\n  border: 1px solid rgba(255, 140, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  opacity: 0;\n  transform: translateY(-10px);\n  transition: all 0.3s ease;\n  z-index: 1;\n  backdrop-filter: blur(5px);\n}\n\n.layout-warning.show {\n  opacity: 1;\n  transform: translateY(0);\n}\n\n.layout-warning i {\n  font-size: 16px;\n  color: #ff8c00;\n}\n\n.layout-warning {\n  color: #ff8c00;\n}\n\n.loading-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 200px;\n  width: 100%;\n}\n\n.empty-history {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-height: 200px;\n  color: #888;\n  gap: 15px;\n}\n\n.empty-history .material-icons {\n  font-size: 64px;\n  color: #888;\n  opacity: 0.7;\n}\n\n.empty-history p {\n  font-size: 18px;\n  margin: 0;\n  color: #888;\n}\n\n@media (max-width: 600px) {\n  .mainpage {\n    padding-top: 0;\n    height: calc(100vh - 30px - 63px);\n  }\n\n  .search-container,\n  .search-type-buttons {\n    padding: 0;\n  }\n}\n</style>\n"],"names":["CACHE_KEY_DONATERS","donaters","ref","currentIndex","intervalId","currentDonater","computed","fetchDonaters","today","cached","date","data","e","dons","getDons","line","error","updateCurrentDonater","newIndex","startShowingDonaters","onMounted","onUnmounted","mainStore","useMainStore","authStore","useAuthStore","router","useRouter","searchType","searchTerm","movies","loading","searchPerformed","showModal","errorMessage","errorCode","history","showLayoutWarning","suggestedLayout","watchEffect","getMyLists","USER_LIST_TYPES_ENUM","message","code","handleApiError","handleItemDeleted","deletedItemId","item","setSearchType","type","resetSearch","handleInput","event","hasConsecutiveConsonants","suggestLayout","handleTabKey","convertLayout","getPlaceholder","search","debouncedPerformSearch","performSearch","response","getKpIDfromIMDB","getKpIDfromSHIKI","apiSearch","movie","_a","_b","_c","clearAllHistory","delAllFromList","debounce","hash","searchQuery","imdbId","shikiId","watch"],"mappings":"gdAkBMA,EAAqB,qDAF3B,MAAMC,EAAWC,EAAI,CAAE,CAAA,EACjBC,EAAeD,EAAI,EAAE,EAE3B,IAAIE,EAAa,KAEjB,MAAMC,EAAiBC,EAAS,IAC1BH,EAAa,QAAU,IAAM,CAACF,EAAS,MAAM,OAAe,GACzDA,EAAS,MAAME,EAAa,KAAK,CACzC,EAEKI,EAAgB,SAAY,CAChC,MAAMC,EAAQ,IAAI,KAAM,EAAC,YAAW,EAAG,MAAM,GAAG,EAAE,CAAC,EAC7CC,EAAS,aAAa,QAAQT,CAAkB,EAEtD,GAAIS,EACF,GAAI,CACF,KAAM,CAAE,KAAAC,EAAM,KAAAC,CAAM,EAAG,KAAK,MAAMF,CAAM,EACxC,GAAIC,IAASF,EAAO,CAClBP,EAAS,MAAQU,EACjB,MACR,CACK,OAAQC,EAAG,CACV,QAAQ,MAAM,yBAA0BA,CAAC,CAC/C,CAGE,GAAI,CACF,MAAMC,EAAO,MAAMC,EAAO,EAC1Bb,EAAS,MAAQY,EACd,MAAM,IAAI,EACV,IAAKE,GAASA,EAAK,KAAM,CAAA,EACzB,OAAQA,GAASA,CAAI,EACxB,aAAa,QACXf,EACA,KAAK,UAAU,CACb,KAAMQ,EACN,KAAMP,EAAS,KAChB,CAAA,CACP,CACG,OAAQe,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,CACrD,CACA,EAEA,SAASC,GAAuB,CAC9B,GAAI,CAAChB,EAAS,MAAM,OAAQ,OAC5B,MAAMiB,EAAW,KAAK,MAAM,KAAK,SAAWjB,EAAS,MAAM,MAAM,EACjEE,EAAa,MAAQe,CACvB,CAEA,SAASC,GAAuB,CAC1BlB,EAAS,MAAM,SAAW,IAC9BgB,EAAoB,EACpBb,EAAa,YAAYa,EAAsB,GAAI,EACrD,CAEA,OAAAG,EAAU,SAAY,CACpB,MAAMb,EAAa,EACnBY,EAAoB,CACtB,CAAC,EAEDE,EAAY,IAAM,CACZjB,GAAY,cAAcA,CAAU,CAC1C,CAAC,2oBC2CD,MAAMkB,EAAYC,GAAY,EACxBC,EAAYC,GAAY,EACxBC,EAASC,GAAS,EAElBC,EAAa1B,EAAI,OAAO,EACxB2B,EAAa3B,EAAI,EAAE,EACnB4B,EAAS5B,EAAI,CAAE,CAAA,EACf6B,EAAU7B,EAAI,EAAK,EACnB8B,EAAkB9B,EAAI,EAAK,EAC3B+B,EAAY/B,EAAI,EAAK,EACrBgC,EAAehC,EAAI,EAAE,EACrBiC,EAAYjC,EAAI,IAAI,EAEpBkC,EAAUlC,EAAI,CAAE,CAAA,EAEhBmC,EAAoBnC,EAAI,EAAK,EAC7BoC,EAAkBpC,EAAI,EAAE,EAE9BqC,GAAY,SAAY,CACtB,GAAIf,EAAU,MAAO,CACnBO,EAAQ,MAAQ,GAChB,GAAI,CACFK,EAAQ,MAAQ,MAAMI,GAAWC,EAAqB,OAAO,CAC9D,OAAQzB,EAAO,CACd,KAAM,CAAE,QAAA0B,EAAS,KAAAC,CAAM,EAAGC,EAAe5B,CAAK,EAC9CkB,EAAa,MAAQQ,EACrBP,EAAU,MAAQQ,EAClB,QAAQ,MAAM,2BAA4B3B,CAAK,EAC3C2B,IAAS,MACXnB,EAAU,OAAM,EAChB,MAAME,EAAO,KAAK,QAAQ,EAC1BA,EAAO,GAAG,CAAC,EAEnB,QAAc,CACRK,EAAQ,MAAQ,EACtB,CACA,MACIK,EAAQ,MAAQd,EAAU,OAE9B,CAAC,EAED,SAASuB,EAAkBC,EAAe,CACxCV,EAAQ,MAAQA,EAAQ,MAAM,OAAQW,GAASA,EAAK,QAAUD,CAAa,CAC7E,CAGA,MAAME,EAAiBC,GAAS,CAC9BrB,EAAW,MAAQqB,EACnBC,EAAW,EACXb,EAAkB,MAAQ,EAC5B,EAEMc,EAAeC,GAAU,CACzBxB,EAAW,QAAU,SACvBC,EAAW,MAAQuB,EAAM,OAAO,MAChCf,EAAkB,MAAQgB,GAAyBxB,EAAW,KAAK,EAC/DQ,EAAkB,QACpBC,EAAgB,MAAQgB,GAAczB,EAAW,KAAK,IAGxDA,EAAW,MAAQuB,EAAM,OAAO,MAAM,QAAQ,OAAQ,EAAE,CAE5D,EAEMG,EAAe,IAAM,CACrBlB,EAAkB,QACpBR,EAAW,MAAQ2B,GAAc3B,EAAW,KAAK,EACjDQ,EAAkB,MAAQ,GAE9B,EAGMoB,EAAiB,KAEnB,CACE,MAAO,0BACP,UAAW,wBACX,UAAW,kCACX,KAAM,uCACZ,GAAM7B,EAAW,KAAK,GAAK,0BAKrBsB,EAAc,IAAM,CACxBrB,EAAW,MAAQ,GACnBC,EAAO,MAAQ,CAAA,EACfE,EAAgB,MAAQ,EAC1B,EAEM0B,EAAS,IAAM,CACnBC,EAAuB,OAAM,EACzB9B,EAAW,MACb+B,EAAa,EAEb,MAAM,2BAA2B,CAErC,EAEMA,EAAgB,SAAY,CAChC7B,EAAQ,MAAQ,GAChBC,EAAgB,MAAQ,GACxBF,EAAO,MAAQ,CAAA,EAEf,GAAI,CACF,GAAIF,EAAW,QAAU,YAAa,CAC/B,QAAQ,KAAKC,EAAW,KAAK,IAChCA,EAAW,MAAQA,EAAW,MAAM,QAAQ,MAAO,EAAE,GAEvDH,EAAO,KAAK,CAAE,KAAM,aAAc,OAAQ,CAAE,MAAOG,EAAW,MAAS,CAAA,EACvE,MACN,CAEI,GAAID,EAAW,QAAU,OAAQ,CAC1B,QAAQ,KAAKC,EAAW,KAAK,IAChCA,EAAW,MAAQA,EAAW,MAAM,QAAQ,MAAO,EAAE,GAEvD,MAAMgC,EAAW,MAAMC,GAAgBjC,EAAW,KAAK,EACvD,GAAIgC,EAAS,MACXnC,EAAO,KAAK,CAAE,KAAM,aAAc,OAAQ,CAAE,MAAO,GAAG,OAAAmC,EAAS,MAAO,CAAI,CAAA,MAE1E,OAAM,IAAI,MAAM,YAAY,EAE9B,MACN,CAEI,GAAIjC,EAAW,QAAU,YAAa,CAC/B,QAAQ,KAAKC,EAAW,KAAK,IAChCA,EAAW,MAAQA,EAAW,MAAM,QAAQ,MAAO,EAAE,GAEvD,MAAMgC,EAAW,MAAME,GAAiBlC,EAAW,KAAK,EACxD,GAAIgC,EAAS,MACXnC,EAAO,KAAK,CAAE,KAAM,aAAc,OAAQ,CAAE,MAAO,GAAG,OAAAmC,EAAS,MAAO,CAAI,CAAA,MAE1E,OAAM,IAAI,MAAM,YAAY,EAE9B,MACN,CACI,GAAIjC,EAAW,QAAU,QAAS,CAChC,MAAMiC,EAAW,MAAMG,GAAUnC,EAAW,KAAK,EACjDC,EAAO,MAAQ+B,EAAS,IAAKI,GAAW,WAAA,OACtC,GAAGA,EACH,MAAOA,EAAM,GAAG,SAAU,EAC1B,YAAWC,EAAAD,EAAM,WAAN,YAAAC,EAAgB,UAAW,QAASC,EAAAF,EAAM,WAAN,YAAAE,EAAgB,OAAS,KACxE,MAAMC,EAAAH,EAAM,WAAN,YAAAG,EAAgB,IAC9B,EAAQ,CACR,CACG,OAAQpD,EAAO,CACd,KAAM,CAAE,QAAA0B,EAAS,KAAAC,CAAM,EAAGC,EAAe5B,CAAK,EAC9CkB,EAAa,MAAQQ,EACrBP,EAAU,MAAQQ,EAClB,QAAQ,MAAM,qBAAsB3B,CAAK,CAC7C,QAAY,CACRe,EAAQ,MAAQ,EACpB,CACA,EAEMsC,EAAkB,SAAY,CAElC,GADAtC,EAAQ,MAAQ,GACZP,EAAU,MACZ,GAAI,CACF,MAAM8C,GAAe7B,EAAqB,OAAO,EACjDL,EAAQ,MAAQ,CAAA,EAChBL,EAAQ,MAAQ,GAChBE,EAAU,MAAQ,EACnB,OAAQjB,EAAO,CACd,KAAM,CAAE,QAAA0B,EAAS,KAAAC,CAAM,EAAGC,EAAe5B,CAAK,EAC9CkB,EAAa,MAAQQ,EACrBP,EAAU,MAAQQ,EAClB,QAAQ,MAAM,2BAA4B3B,CAAK,EAC3C2B,IAAS,MACXnB,EAAU,OAAM,EAChB,MAAME,EAAO,KAAK,QAAQ,EAC1BA,EAAO,GAAG,CAAC,GAEbK,EAAQ,MAAQ,GAChBE,EAAU,MAAQ,EACxB,MAEIX,EAAU,gBAAe,EACzBS,EAAQ,MAAQ,GAChBE,EAAU,MAAQ,EAEtB,EAEM0B,EAAyBY,GAAS,IAAM,CACxC1C,EAAW,MAAM,QAAU,EAC7B+B,EAAa,EACJ/B,EAAW,MAAM,OAAS,IACnCC,EAAO,MAAQ,CAAA,EACfE,EAAgB,MAAQ,GAE5B,EAAG,GAAG,EAEN,OAAAZ,EAAU,IAAM,CACd,MAAMoD,EAAO,OAAO,SAAS,KAC7B,GAAIA,EAAK,WAAW,UAAU,EAAG,CAC/B,MAAMC,EAAc,mBAAmBD,EAAK,QAAQ,WAAY,EAAE,CAAC,EACnE3C,EAAW,MAAQ4C,EACnBb,EAAa,CACd,SAAUY,EAAK,WAAW,QAAQ,EAAG,CACpC,MAAME,EAAS,mBAAmBF,EAAK,QAAQ,SAAU,EAAE,CAAC,EAC5DxB,EAAc,MAAM,EACpBnB,EAAW,MAAQ6C,EACnBd,EAAa,CACd,SAAUY,EAAK,WAAW,QAAQ,EAAG,CACpC,MAAMG,EAAU,mBAAmBH,EAAK,QAAQ,SAAU,EAAE,CAAC,EAC7DxB,EAAc,WAAW,EACzBnB,EAAW,MAAQ8C,EACnBf,EAAa,CACjB,CACA,CAAC,EAGDgB,GAAM/C,EAAY,IAAM,CAClBD,EAAW,QAAU,SAGzB+B,EAAsB,CACxB,CAAC"}