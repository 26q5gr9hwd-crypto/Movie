import{_ as Ye,r as m,c as $,b as a,d as l,e,m as Y,t as f,O as le,g as y,P as he,n as C,l as ot,u as At,q as Wt,N as En,B as Pt,x as De,o as ut,S as Gt,k as nt,E as Ln,f as ge,V as Tt,p as Q,W as fe,A as K,U as O,X as Pn,G as tt,Y as $e,Z as In,$ as Kt,a0 as It,a1 as Sn,a2 as yn,a3 as xn,v as jn,y as mt,a4 as Nn,i as je,w as zt,a5 as Rt,a6 as Un,a7 as Bn,a8 as $n,a9 as Dn,aa as pn,ab as Hn,ac as Vn,a as hn,ad as bn,ae as Fn,af as On,ag as qn,ah as Kn,ai as zn,aj as Wn,ak as Gn,al as Yn,am as Zn}from"./index-BNo0GTUz.js";import{_ as Xn,a as wn,b as Cn,M as _n}from"./MovieList-Ft7cIYv0.js";import{f as rt,p as Ut,u as Tn,a as Qn,b as Rn}from"./useCommentFormatting-BObO2VaO.js";import{S as An}from"./SpinnerLoading-BISb3nyh.js";import{N as Bt}from"./ToastMessage-BWjaWPAD.js";import{u as Jn,S as eo,a as to}from"./trailer-BKX0zjWz.js";const Lt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVR4nO2ZQUoDMRSGR7eewHoFsVS0HkUUXNXqASqK2EURBPFIVRe6c+UN1CvUXWvbT4KvMAwzNnnJdCrmg1BKad7/v7y0b5IkiUQiCwGoAx3gQjEugZ0qxTeAIX6MKjMBnBOGS62AVWAPOHVYdlMu9YArYOhphLeBT+ALmOKGEd2QubaAK+B2zngFxt4GgDXgGZjgR8ch5oEkCi8DkvlnRcYLV0Apfqw10M7JvPkV6AN3FmVwK+WyZRnvMEe8ef/ibECyb2o+zRuwnpQAxeLNivQ0BvYyE46qEJ/8fK4ycJKp/X4V4n0MdDNfukkqEO9jwP1LDgD7BeKPgmgp04CL+KUz4Cp+qQxoxC+NAdsNm4c0hWkukkUa8BGfegiadbFDq3/2UAZ8xc+QVvzMtqcKYkBaZ5/MN5xEl2DgLGDZ1KswsC09FPJqXTZoNm5oA6kyMGI2FxqfkluJ0uMTDfhBXAHiHvCCWEL8/RLqlv1MPCf+TSZ+13WC7KnEfWlqcwAeU7GNjnbiQsG5UC1ZAEAt1UMhOpquk6zknMy9l20C2AA+MnEHRo9msuOCs9EH4Fp5TVQ0rqVs0plH4re02Qh1Oq1lCjypsp+5H3gKcD/gykTirqnFZ/ZDy+OGxpapzD+QePrM/2KkKfcGPcv7AdvRkz23G1x4JPIP+AY3r/ywUk/2JAAAAABJRU5ErkJggg==",no="/reyohoho/assets/icon-shikimori-DGvXK9Jc.svg",yt=u=>{const t=document.createElement("div");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.backgroundColor="rgba(0, 0, 0, 0.8)",t.style.color="white",t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",t.style.fontSize="2rem",t.style.zIndex="99000",t.textContent=u,document.body.appendChild(t),setTimeout(()=>{document.body.removeChild(t)},2e3)},oo={key:0},so={key:1},lo={class:"players-list"},io=["onClick"],ao={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},ro={key:0},uo={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},co={key:1},vo={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},mo=["onClick"],fo={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},go={__name:"PlayerModal",props:{players:{type:Array,required:!0},selectedPlayer:{type:Object,default:null}},emits:["close","select"],setup(u,{emit:t}){const d=u,n=t,E=m(null),I=$(()=>d.players.filter(b=>!L(b)&&!T(b))),g=$(()=>d.players.some(b=>L(b))),k=$(()=>d.players.some(b=>T(b))),L=b=>b.key.toUpperCase().includes("HDREZKA"),T=b=>b.key.toUpperCase().includes("KODIK"),s=b=>b.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"").replace(/KODIK>/,"").trim(),c=b=>{n("select",b),n("close")},_=b=>d.selectedPlayer&&d.selectedPlayer.key===b.key,h=b=>d.selectedPlayer?b==="hdrezka"&&L(d.selectedPlayer)||b==="kodik"&&T(d.selectedPlayer):!1,j=b=>{E.value=b},P=()=>{E.value=null},S=b=>{let R=d.players.filter(x=>b==="hdrezka"&&L(x)||b==="kodik"&&T(x));return b==="kodik"?R.sort((x,W)=>s(x.translate).localeCompare(s(W.translate))):R},A=b=>S(b).some(R=>R.warning);return(b,R)=>(l(),a("div",{class:"modal",onClick:R[4]||(R[4]=ot(x=>b.$emit("close"),["self"]))},[e("div",{class:"modal-content",onClick:R[3]||(R[3]=ot(()=>{},["stop"]))},[e("button",{class:"close",onClick:R[0]||(R[0]=x=>b.$emit("close"))},"√ó"),E.value?(l(),a("h2",so,[e("button",{class:"back-btn",onClick:P},"‚Üê –ù–∞–∑–∞–¥"),Y(" "+f(E.value==="hdrezka"?"ReYohoho - HDrezka":"Kodik"),1)])):(l(),a("h2",oo,"–í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–µ–µ—Ä")),e("ul",lo,[E.value?(l(!0),a(le,{key:1},he(S(E.value),x=>(l(),a("li",{key:x.key},[e("button",{class:C(["player-item",{active:_(x)}]),onClick:W=>c(x)},[Y(f(s(x.translate))+" ",1),x.warning?(l(),a("span",fo,"warning")):y("",!0)],10,mo)]))),128)):(l(),a(le,{key:0},[(l(!0),a(le,null,he(I.value,x=>(l(),a("li",{key:x.key},[e("button",{class:C(["player-item",{active:_(x)}]),onClick:W=>c(x)},[Y(f(s(x.translate))+" ",1),x.warning?(l(),a("span",ao,"warning")):y("",!0)],10,io)]))),128)),g.value?(l(),a("li",ro,[e("button",{class:C(["group-item",{active:h("hdrezka")}]),onClick:R[1]||(R[1]=x=>j("hdrezka"))},[R[5]||(R[5]=e("span",{class:"material-icons group-icon"},"folder",-1)),R[6]||(R[6]=Y(" ReYohoho - HDrezka ")),A("hdrezka")?(l(),a("span",uo,"warning")):y("",!0)],2)])):y("",!0),k.value?(l(),a("li",co,[e("button",{class:C(["group-item",{active:h("kodik")}]),onClick:R[2]||(R[2]=x=>j("kodik"))},[R[7]||(R[7]=e("span",{class:"material-icons group-icon"},"folder",-1)),R[8]||(R[8]=Y(" Kodik ")),A("kodik")?(l(),a("span",vo,"warning")):y("",!0)],2)])):y("",!0)],64))])])]))}},ko=Ye(go,[["__scopeId","data-v-8b8d2b67"]]),yo={class:"players-list"},po=["src"],ho={key:1,class:"controls"},bo={class:"main-controls"},wo={class:"material-icons"},Co={class:"list-button-item"},_o={class:"material-icons"},Mo={class:"list-button-item"},Eo={class:"material-icons"},Lo={class:"list-button-item"},Io={class:"list-button-item"},To={class:"material-icons"},Ro={class:"list-button-item"},Ao={class:"material-icons"},Po={class:"tooltip-container","data-tooltip-container":"dimming"},So={class:"material-icons"},xo={class:"tooltip-container","data-tooltip-container":"blur"},jo={class:"tooltip-container","data-tooltip-container":"compressor"},No={class:"tooltip-container","data-tooltip-container":"mirror"},Uo={class:"tooltip-container","data-tooltip-container":"theater"},Bo={class:"material-symbols-outlined"},$o={class:"custom-tooltip","data-tooltip":"theater"},Do={class:"tooltip-container","data-tooltip-container":"pip"},Ho={class:"tooltip-container","data-tooltip-container":"aspect_ratio"},Vo={class:"current-ratio"},Fo=["onClick"],Oo={key:0,class:"tooltip-container","data-tooltip-container":"app_link"},qo={class:"custom-tooltip","data-tooltip":"app_link"},Ko={key:1,class:"tooltip-container","data-tooltip-container":"copy_link"},zo={class:"custom-tooltip","data-tooltip":"copy_link"},Wo={key:0,class:"desktop-list-buttons"},Go={class:"tooltip-container"},Yo={class:"material-icons"},Zo={class:"custom-tooltip"},Xo={class:"tooltip-container"},Qo={class:"material-icons"},Jo={class:"custom-tooltip"},es={class:"tooltip-container"},ts={class:"custom-tooltip"},ns={class:"tooltip-container"},os={class:"material-icons"},ss={class:"custom-tooltip"},ls={class:"tooltip-container"},is={class:"material-icons"},as={class:"custom-tooltip"},rs={__name:"PlayerComponent",props:{kpId:String,movieInfo:{type:Object,default:()=>({})}},emits:["update:selectedPlayer","update:movieInfo"],setup(u,{emit:t}){const d=At(),n=Jn(),E=Wt(),I=En(),g=Pt(),k=m(I.params.kp_id),L=u,T=t,s=m([]),c=m(null),_=m(!0),h=m(!1),j=m(!1),P=m(null),S=m(null),A=m(!1),b=m(""),R=m(null),x=m(window.innerHeight*.9),W=$(()=>"".concat(x.value,"px")),q=$(()=>d.isMobile),N=$(()=>!!window.electronAPI),B=m(null),J=m(!1);let Pe=null;const Ie=m(null),He=m(null),H=m(null),ae=m(null),X=m(!1),G=m(!1),ke=m(null),de=m(null),be=m(null),we=m(null),Ce=m(null),Se=m(null),ye=m(null),Ze=p=>{const r=document.querySelector('[data-tooltip-container="'.concat(p,'"]')),i=document.querySelector('[data-tooltip="'.concat(p,'"]'));if(!r||!i)return;const o=r.getBoundingClientRect(),w=i.getBoundingClientRect(),F=window.innerHeight;o.bottom+w.height>F?(i.style.top="auto",i.style.bottom="100%",i.style.marginTop="0",i.style.marginBottom="12px",i.style.transform="translateX(-50%)"):(i.style.top="100%",i.style.bottom="auto",i.style.marginTop="12px",i.style.marginBottom="0",i.style.transform="translateX(-50%)")},ee=p=>{B.value=p,J.value=!1,clearTimeout(Pe),$e(()=>{Ze(p)})},Ne=()=>{J.value||(Pe=setTimeout(()=>{B.value=null},300))},Xe=()=>{J.value=!0,clearTimeout(Pe)},Re=()=>{J.value=!1,B.value=null},Ae=$({get:()=>n.aspectRatio,set:p=>n.updateAspectRatio(p)}),Ve=$({get:()=>n.isCentered,set:p=>n.updateCentering(p)}),st=$(()=>{var p,r,i,o,w,F,ne,re,oe,ue;return((r=(p=L.movieInfo)==null?void 0:p.lists)==null?void 0:r.isFavorite)||((o=(i=L.movieInfo)==null?void 0:i.lists)==null?void 0:o.isWatching)||((F=(w=L.movieInfo)==null?void 0:w.lists)==null?void 0:F.isLater)||((re=(ne=L.movieInfo)==null?void 0:ne.lists)==null?void 0:re.isCompleted)||((ue=(oe=L.movieInfo)==null?void 0:oe.lists)==null?void 0:ue.isAbandoned)}),lt=$(()=>n.preferredPlayer),dt=m(0),xe=p=>p.toUpperCase(),Fe=()=>{if(h.value||!S.value)return;const[p,r]=Ae.value.split(":").map(Number);x.value=window.innerHeight*.9,dt.value=Math.min(S.value.clientWidth*(r/p),x.value)},Oe=$(()=>{if(h.value)return{};const[p,r]=Ae.value.split(":").map(Number),i=x.value*(p/r);return{width:"100%",maxWidth:"".concat(i,"px"),maxHeight:W.value,margin:"0 auto",overflow:"hidden"}}),M=$(()=>{const[p,r]=Ae.value.split(":").map(Number);return{position:"relative",width:"100%",paddingTop:"".concat(r/p*100,"%")}}),V=()=>{S.value&&setTimeout(()=>{$e(()=>{S.value.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})},500)},qe=async()=>{try{b.value="",R.value=null;const p=await Pn(L.kpId);if(s.value=Object.entries(p).map(([r,i])=>({key:r.toUpperCase(),...i})),s.value.length>0){if(lt.value){const r=xe(lt.value),i=s.value.find(o=>xe(o.key)===r);c.value=i||s.value[0]}else c.value=s.value[0];T("update:selectedPlayer",c.value)}}catch(p){const{message:r,code:i}=tt(p);b.value=r,R.value=i,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–ª–µ–µ—Ä–æ–≤:",p)}},pt=()=>{A.value=!0},ft=()=>{A.value=!1},it=()=>{try{return de.value||(de.value=new(window.AudioContext||window.webkitAudioContext)),be.value||(be.value=de.value.createDynamicsCompressor(),be.value.threshold.value=-50,be.value.knee.value=40,be.value.ratio.value=12,be.value.attack.value=0,be.value.release.value=.25,Ce.value=de.value.createGain(),Se.value=de.value.createGain(),Ce.value.gain.value=0,Se.value.gain.value=1,be.value.connect(Ce.value),Ce.value.connect(de.value.destination),Se.value.connect(de.value.destination)),!0}catch(p){return console.log("Error initializing audio context:",p),!1}},Ke=async p=>{try{if(!de.value||ye.value===p)return!0;const r=P.value,i=(r==null?void 0:r.src)||"";if(i.includes("videoframe")||i.includes("kinoserial.net")||i.includes("allarknow"))return console.log("Player detected as unsupported for compressor:",i),ye.value=p,we.value=null,G.value=!1,N.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –ø–ª–µ–µ—Ä–æ–º"),!1;if(we.value)try{we.value.disconnect()}catch(w){}const o=async(w=0)=>{w>0&&await new Promise(F=>setTimeout(F,w));try{return we.value=de.value.createMediaElementSource(p),ye.value=p,we.value.connect(be.value),we.value.connect(Se.value),console.log("Video audio setup completed (attempt with ".concat(w,"ms delay)")),!0}catch(F){if(F.name==="InvalidStateError"&&F.message.includes("already connected"))return console.log("MediaElementSource already connected (".concat(w,"ms delay attempt)")),!1;throw F}};return await o(0)||await o(100)||await o(300)||await o(800)?!0:(console.log("Video element has internal audio processing, compressor not available for this player"),ye.value=p,we.value=null,G.value=!1,N.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –ø–ª–µ–µ—Ä–æ–º"),!1)}catch(r){return console.log("Error setting up video audio:",r),!1}},ze=async p=>{if(P.value)try{const r=P.value,i=r.contentDocument||r.contentWindow.document;if(!i)return;const o=i.querySelectorAll("video");if(o.length===0)return;const w=o[0];if(!it())return;if(!await Ke(w)||!we.value){console.log("Compressor not available for this player");return}p&&!G.value?(Ce.value.gain.setValueAtTime(1,de.value.currentTime),Se.value.gain.setValueAtTime(0,de.value.currentTime),G.value=!0,N.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –≤–∫–ª—é—á—ë–Ω"),console.log("Compressor enabled")):!p&&G.value&&(Ce.value.gain.setValueAtTime(0,de.value.currentTime),Se.value.gain.setValueAtTime(1,de.value.currentTime),G.value=!1,N.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –æ—Ç–∫–ª—é—á—ë–Ω"),console.log("Compressor disabled"))}catch(r){console.log("Compressor error:",r),N.value&&window.electronAPI.showToast("–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä–∞")}},ct=()=>{N.value?window.electronAPI.sendHotKey("F2"):(yt("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},vt=()=>{N.value?(te.value=!te.value,ze(te.value)):(yt("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},U=()=>{N.value?(Me.value=!Me.value,Ue(Me.value)):(yt("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},z=()=>{h.value=!h.value,h.value?(window.addEventListener("mousemove",ce),document.addEventListener("keydown",Be),document.body.classList.add("no-scroll")):(window.removeEventListener("mousemove",ce),document.removeEventListener("keydown",Be),document.body.classList.remove("no-scroll")),j.value=h.value,$e(()=>V())},me=m(null),ce=()=>{me.value=setTimeout(()=>{clearTimeout(me.value),j.value=!1},4e3),j.value=!0},Z=$(()=>d.dimmingEnabled),pe=()=>{h.value||d.toggleDimming()},te=$({get:()=>n.compressorEnabled,set:p=>n.updateCompressor(p)}),Me=$({get:()=>n.mirrorEnabled,set:p=>n.updateMirror(p)}),Ue=p=>{if(P.value)try{const r=P.value,i=r.contentDocument||r.contentWindow.document;if(!i)return;const o=i.querySelectorAll("video");if(o.length>0&&(o.forEach(w=>{p?w.style.transform="scaleX(-1)":w.style.transform="scaleX(1)"}),X.value=p,N.value)){const w=p?"–ó–µ—Ä–∫–∞–ª–æ –≤–∫–ª—é—á–µ–Ω–æ":"–ó–µ—Ä–∫–∞–ª–æ –æ—Ç–∫–ª—é—á–µ–Ω–æ";window.electronAPI.showToast(w)}}catch(r){}},We=()=>{ae.value&&clearInterval(ae.value),ae.value=setInterval(()=>{if(P.value)try{const p=P.value,r=p.contentDocument||p.contentWindow.document;if(!r)return;const i=r.querySelectorAll("video");if(i.length>0){const o=i[0],F=o.style.transform==="scaleX(-1)";Me.value&&!F?(o.style.transform="scaleX(-1)",X.value=!0):!Me.value&&F&&(o.style.transform="scaleX(1)",X.value=!1),ye.value!==o?(console.log("Video element changed, reinitializing compressor"),ye.value=null,G.value=!1,te.value&&setTimeout(()=>{ze(!0)},500)):te.value!==G.value&&we.value&&(console.log("Compressor state mismatch, reapplying"),ze(te.value))}}catch(p){}},1e3)},Qe=(p=!1)=>{if(!N.value)return;ke.value&&clearInterval(ke.value);let r=!1,i=[];function o(){var w;if(i=[],window.selectedNudityTimings&&Array.isArray(window.selectedNudityTimings)&&((w=L.movieInfo)!=null&&w.nudity_timings)){for(const F of L.movieInfo.nudity_timings)if(window.selectedNudityTimings.includes(F.id)){const ne=Ut(F.timing_text);ne&&ne.length>0&&i.push(...ne)}}}o(),ke.value=setInterval(()=>{if(P.value){o();try{const w=P.value,F=w.contentDocument||w.contentWindow.document;if(!F)return;const ne=F.querySelectorAll("video");if(ne.length>0){const re=ne[0];if(!re.paused){const oe=re.currentTime,ue=re.duration,_e=ue>0?oe/ue*100:0;if(p&&(console.log("Video position: ".concat(oe.toFixed(2),"s / ").concat(ue.toFixed(2),"s (").concat(_e.toFixed(1),"%)")),i.length>0)){const ie=i.map(([Ee,Te])=>"".concat(rt(Ee)," - ").concat(rt(Te))).join(", ");console.log("Active blur intervals: [".concat(ie,"]"))}let se=!1;for(const[ie,Ee]of i)if(oe>=ie&&oe<=Ee){se=!0;break}se&&!r&&N.value?(window.electronAPI.sendHotKey("F2"),r=!0,console.log("Blur applied at",oe.toFixed(2),"seconds")):!se&&r&&(window.electronAPI.sendHotKey("F2"),r=!1,console.log("Blur removed at",oe.toFixed(2),"seconds"))}}}catch(w){console.log("Error monitoring video position:",w)}}},100)},Je=()=>{_.value=!1,We(),Qe()},Be=p=>{(p.key==="Escape"&&h.value||p.altKey&&p.keyCode===84)&&z()},St=p=>{Ae.value=p,setTimeout(()=>{Ve.value&&V()},310)},$t=()=>{const p="reyohoho://#".concat(k.value);try{window.location.href=p}catch(r){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Å—ã–ª–∫–∏:",r)}},Dt=()=>{const p=window.location.href;navigator.clipboard.writeText(p).then(()=>{}),Ie.value.showNotification("–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∏–ª—å–º —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞")};function xt(p){return p.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"HDRezka - ").replace(/KODIK>/,"Kodik - ").trim()}const Ht=()=>{try{we.value&&(we.value.disconnect(),we.value=null),de.value&&(de.value.close(),de.value=null),be.value=null,Ce.value=null,Se.value=null,ye.value=null,G.value=!1}catch(p){console.log("Error cleaning up audio context:",p)}},Vt=p=>{var r;if(((r=c.value)==null?void 0:r.key)===p.key){ft();return}c.value=p,_.value=!0,X.value=!1,G.value=!1,ye.value=null,ae.value&&(clearInterval(ae.value),ae.value=null),ke.value&&(clearInterval(ke.value),ke.value=null),p.key.toLowerCase().includes("torrents")||n.updatePreferredPlayer(xe(p.key)),T("update:selectedPlayer",p)};De(c,p=>{p&&(_.value=!0,X.value=!1,G.value=!1,ye.value=null,ae.value&&(clearInterval(ae.value),ae.value=null),ke.value&&(clearInterval(ke.value),ke.value=null),p.key.toLowerCase().includes("torrents")||n.updatePreferredPlayer(xe(p.key)),T("update:selectedPlayer",p))}),De(()=>I.params.kp_id,async p=>{p&&p!==k.value&&(k.value=p,X.value=!1,G.value=!1,ye.value=null,ae.value&&(clearInterval(ae.value),ae.value=null),ke.value&&(clearInterval(ke.value),ke.value=null),Ve.value&&V())},{immediate:!0});const gt=["16:9","12:5","4:3"],jt=()=>{const r=(gt.indexOf(Ae.value)+1)%gt.length;St(gt[r])},Nt=p=>{var i,o,w,F,ne,re,oe,ue,_e,se,ie,Ee,Te;return(Te={[O.FAVORITE]:((o=(i=L.movieInfo)==null?void 0:i.lists)==null?void 0:o.isFavorite)||!1,[O.HISTORY]:((F=(w=L.movieInfo)==null?void 0:w.lists)==null?void 0:F.isHistory)||!1,[O.LATER]:((re=(ne=L.movieInfo)==null?void 0:ne.lists)==null?void 0:re.isLater)||!1,[O.COMPLETED]:((ue=(oe=L.movieInfo)==null?void 0:oe.lists)==null?void 0:ue.isCompleted)||!1,[O.ABANDONED]:((se=(_e=L.movieInfo)==null?void 0:_e.lists)==null?void 0:se.isAbandoned)||!1,[O.WATCHING]:((Ee=(ie=L.movieInfo)==null?void 0:ie.lists)==null?void 0:Ee.isWatching)||!1}[p])!=null?Te:!1},ve=async p=>{if(!E.token){Ie.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Ft});return}try{const r={[O.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[O.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[O.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[O.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[O.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[O.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};Nt(p)?(await In(k.value,p),Ie.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(r[p]))):(await Kt(k.value,p),Ie.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(r[p])))}catch(r){const{message:i,code:o}=tt(r);Ie.value.showNotification("".concat(i," ").concat(o))}T("update:movieInfo")},Ft=()=>{g.push("/login")},kt=$(()=>n.showFavoriteTooltip),Ot=()=>{g.push("/settings"),Re()},qt=async()=>{if(!N.value){yt("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank");return}if(P.value)try{const p=P.value,r=p.contentDocument||p.contentWindow.document;if(!r)return;const i=r.querySelector("video");if(!i)return;document.pictureInPictureElement?await document.exitPictureInPicture():document.pictureInPictureEnabled?await i.requestPictureInPicture():yt('–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–∂–∏–º "–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ"')}catch(p){console.error("Error toggling PiP:",p),yt('–ù–µ —É–¥–∞–ª–æ—Å—å –≤–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º "–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ"')}};return ut(()=>{_.value=!0,qe(),q.value&&(Ae.value="4:3"),Fe(),window.addEventListener("resize",Fe),window.addEventListener("resize",Ze),Ve.value&&V(),window.toggleCompressor=vt,window.toggleMirror=U}),Gt(()=>{window.removeEventListener("resize",Fe),window.removeEventListener("resize",Ze),window.removeEventListener("mousemove",ce),document.removeEventListener("keydown",Be),document.body.classList.remove("no-scroll"),ae.value&&clearInterval(ae.value),ke.value&&clearInterval(ke.value),Ht(),delete window.toggleCompressor,delete window.toggleMirror}),(p,r)=>{var i,o,w,F,ne,re,oe,ue,_e,se,ie,Ee,Te,et,at,ht,bt,wt,Ct,_t,Mt,v,Le,Ge,Et,Jt,en,tn,nn,on,sn,ln,an,rn,un,dn,cn,vn,mn,fn,gn,kn;return b.value?(l(),nt(Ln,{key:0,message:b.value,code:R.value},null,8,["message","code"])):(l(),a(le,{key:1},[e("div",yo,[r[41]||(r[41]=e("span",null,"–ü–ª–µ–µ—Ä:",-1)),e("button",{class:"player-btn",onClick:pt},f(c.value?xt(c.value.translate).toUpperCase():"–ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–µ–µ—Ä–æ–≤..."),1)]),A.value?(l(),nt(ko,{key:0,players:s.value,"selected-player":c.value,onClose:ft,onSelect:Vt},null,8,["players","selected-player"])):y("",!0),e("div",{ref_key:"containerRef",ref:S,class:C(["player-container",{"theater-mode":h.value}]),style:Tt(h.value?{}:Oe.value)},[e("div",{class:"iframe-wrapper",style:Tt(h.value?{}:M.value)},[Q(e("iframe",{ref_key:"playerIframe",ref:P,src:(i=c.value)==null?void 0:i.iframe,frameborder:"0",allowfullscreen:"",webkitallowfullscreen:"",class:C(["responsive-iframe",{"theater-mode-unlock":j.value,"theater-mode-lock":h.value,dimmed:Z.value}]),onLoad:Je},null,42,po),[[fe,!_.value&&((o=c.value)==null?void 0:o.iframe)]]),_.value?(l(),nt(An,{key:0,text:"–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–ª–µ–µ—Ä: ".concat(c.value?xt(c.value.translate):"–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ –ø–ª–µ–µ—Ä–æ–≤","\n–ï—Å–ª–∏ –ø–ª–µ–µ—Ä –Ω–µ –≥—Ä—É–∑–∏—Ç—Å—è, —Ç–æ —Å–º–µ–Ω–∏—Ç–µ –ø–ª–µ–µ—Ä –≤—ã—à–µ –∏–ª–∏ –≤–∫–ª—é—á–∏—Ç–µ VPN"),style:{"white-space":"pre-line"}},null,8,["text"])):y("",!0)],4),h.value?(l(),a("button",{key:0,class:C(["close-theater-btn",{visible:j.value}]),onClick:z}," ‚úñ ",2)):y("",!0)],6),h.value?y("",!0):(l(),a("div",ho,[e("div",bo,[q.value?y("",!0):(l(),a("div",{key:0,ref_key:"tooltipContainer",ref:He,class:"tooltip-container list-buttons-container","data-tooltip-container":"favorite"},[kt.value?(l(),a("button",{key:0,class:C(["favorite-btn",{active:(F=(w=u.movieInfo)==null?void 0:w.lists)==null?void 0:F.isFavorite}]),onMouseenter:r[0]||(r[0]=D=>ee("favorite")),onMouseleave:Ne,onClick:r[1]||(r[1]=D=>ve(K(O).FAVORITE))},[e("span",wo,f((re=(ne=u.movieInfo)==null?void 0:ne.lists)!=null&&re.isFavorite?"favorite":"favorite_border"),1),e("span",{class:C(["material-icons dropdown-arrow",{highlighted:st.value}])},"expand_more",2)],34)):y("",!0),Q(e("div",{ref_key:"tooltip",ref:H,class:"custom-tooltip advanced-tooltip list-buttons-dropdown","data-tooltip":"favorite",onMouseenter:Xe,onMouseleave:Re},[e("div",Co,[e("button",{class:C(["favorite-btn",{active:(ue=(oe=u.movieInfo)==null?void 0:oe.lists)==null?void 0:ue.isFavorite}]),onClick:r[2]||(r[2]=D=>ve(K(O).FAVORITE))},[e("span",_o,f((se=(_e=u.movieInfo)==null?void 0:_e.lists)!=null&&se.isFavorite?"favorite":"favorite_border"),1),r[42]||(r[42]=e("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))],2)]),e("div",Mo,[e("button",{class:C(["watching-btn",{active:(Ee=(ie=u.movieInfo)==null?void 0:ie.lists)==null?void 0:Ee.isWatching}]),onClick:r[3]||(r[3]=D=>ve(K(O).WATCHING))},[e("span",Eo,f((et=(Te=u.movieInfo)==null?void 0:Te.lists)!=null&&et.isWatching?"visibility":"visibility_off"),1),r[43]||(r[43]=e("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))],2)]),e("div",Lo,[e("button",{class:C(["later-btn",{active:(ht=(at=u.movieInfo)==null?void 0:at.lists)==null?void 0:ht.isLater}]),onClick:r[4]||(r[4]=D=>ve(K(O).LATER))},r[44]||(r[44]=[e("span",{class:"material-icons"},"watch_later",-1),e("span",{class:"button-label"},"–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ",-1)]),2)]),e("div",Io,[e("button",{class:C(["completed-btn",{active:(wt=(bt=u.movieInfo)==null?void 0:bt.lists)==null?void 0:wt.isCompleted}]),onClick:r[5]||(r[5]=D=>ve(K(O).COMPLETED))},[e("span",To,f((_t=(Ct=u.movieInfo)==null?void 0:Ct.lists)!=null&&_t.isCompleted?"check_circle":"check_circle_outline"),1),r[45]||(r[45]=e("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))],2)]),e("div",Ro,[e("button",{class:C(["abandoned-btn",{active:(v=(Mt=u.movieInfo)==null?void 0:Mt.lists)==null?void 0:v.isAbandoned}]),onClick:r[6]||(r[6]=D=>ve(K(O).ABANDONED))},[e("span",Ao,f(((Ge=(Le=u.movieInfo)==null?void 0:Le.lists)!=null&&Ge.isAbandoned,"not_interested")),1),r[46]||(r[46]=e("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))],2)]),e("div",{class:"tooltip-hint"},[r[48]||(r[48]=e("span",{class:"material-icons"},"settings",-1)),e("span",null,[r[47]||(r[47]=Y("–°—Ç–∏–ª—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ ")),e("a",{class:"settings-link",onClick:Ot},"–Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö")])])],544),[[fe,B.value==="favorite"&&kt.value]])],512)),q.value?y("",!0):(l(),a(le,{key:1},[e("div",Po,[e("button",{class:C(["dimming-btn",{active:Z.value}]),onMouseenter:r[7]||(r[7]=D=>ee("dimming")),onMouseleave:r[8]||(r[8]=D=>B.value=null),onClick:pe},[e("span",So,f(Z.value?"light_mode":"dark_mode"),1)],34),Q(e("div",{class:"custom-tooltip","data-tooltip":"dimming"},f(Z.value?"–û—Ç–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ":"–í–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ"),513),[[fe,B.value==="dimming"]])]),e("div",xo,[e("button",{class:C(["blur-btn",{"electron-only":!N.value}]),onMouseenter:r[9]||(r[9]=D=>ee("blur")),onMouseleave:r[10]||(r[10]=D=>B.value=null),onClick:ct},r[49]||(r[49]=[e("span",{class:"material-icons"},"blur_on",-1)]),34),Q(e("div",{class:"custom-tooltip","data-tooltip":"blur"},f(N.value?"–ë–ª—é—Ä":"–ë–ª—é—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[fe,B.value==="blur"]])]),e("div",jo,[e("button",{class:C(["material-symbols-outlined",{active:te.value,"electron-only":!N.value}]),onMouseenter:r[11]||(r[11]=D=>ee("compressor")),onMouseleave:r[12]||(r[12]=D=>B.value=null),onClick:vt},r[50]||(r[50]=[e("span",{class:"material-icons"},"graphic_eq",-1)]),34),Q(e("div",{class:"custom-tooltip","data-tooltip":"compressor"},f(N.value?"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä":"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[fe,B.value==="compressor"]])]),e("div",No,[e("button",{class:C(["mirror-btn",{active:Me.value,"electron-only":!N.value}]),onMouseenter:r[13]||(r[13]=D=>ee("mirror")),onMouseleave:r[14]||(r[14]=D=>B.value=null),onClick:U},r[51]||(r[51]=[e("span",{class:"material-icons"},"flip",-1)]),34),Q(e("div",{class:"custom-tooltip","data-tooltip":"mirror"},f(N.value?"–ó–µ—Ä–∫–∞–ª–æ":"–ó–µ—Ä–∫–∞–ª–æ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[fe,B.value==="mirror"]])]),e("div",Uo,[e("button",{class:"theater-mode-btn",onMouseenter:r[15]||(r[15]=D=>ee("theater")),onMouseleave:r[16]||(r[16]=D=>B.value=null),onClick:z},[e("span",Bo,f(h.value?"fullscreen_exit":"aspect_ratio"),1)],32),Q(e("div",$o,[Y(f(h.value?"–í—ã–π—Ç–∏ –∏–∑ —Ç–µ–∞—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞":"–¢–µ–∞—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º")+" ",1),r[52]||(r[52]=e("span",{class:"shortcut-hint"},"Alt+T",-1))],512),[[fe,B.value==="theater"]])]),e("div",Do,[e("button",{class:C(["pip-btn",{"electron-only":!N.value}]),onMouseenter:r[17]||(r[17]=D=>ee("pip")),onMouseleave:r[18]||(r[18]=D=>B.value=null),onClick:qt},r[53]||(r[53]=[e("span",{class:"material-icons"},"picture_in_picture_alt",-1)]),34),Q(e("div",{class:"custom-tooltip","data-tooltip":"pip"},f(N.value?"–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ":"–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[fe,B.value==="pip"]])]),e("div",Ho,[e("button",{class:"aspect-ratio-dropdown-btn",onMouseenter:r[19]||(r[19]=D=>ee("aspect_ratio")),onMouseleave:Ne,onClick:jt},[e("span",Vo,f(Ae.value),1)],32),Q(e("div",{class:"custom-tooltip advanced-tooltip aspect-ratio-dropdown","data-tooltip":"aspect_ratio",onMouseenter:Xe,onMouseleave:Re},[(l(),a(le,null,he(gt,D=>e("div",{key:D,class:C(["aspect-ratio-option",{active:Ae.value===D}]),onClick:mu=>St(D)},f(D),11,Fo)),64))],544),[[fe,B.value==="aspect_ratio"]])]),e("div",{class:"tooltip-container","data-tooltip-container":"centering",onMouseenter:r[21]||(r[21]=D=>ee("centering")),onMouseleave:Ne},[e("button",{class:"center-btn",onClick:V},r[54]||(r[54]=[e("span",{class:"material-icons"},"center_focus_strong",-1)])),Q(e("div",{class:"custom-tooltip advanced-tooltip","data-tooltip":"centering",onMouseenter:Xe,onMouseleave:Re},[r[55]||(r[55]=Y(" –û—Ç—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–ª–µ–µ—Ä ")),ge(eo,{modelValue:Ve.value,"onUpdate:modelValue":r[20]||(r[20]=D=>Ve.value=D),title:"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞"},null,8,["modelValue"]),r[56]||(r[56]=e("span",{class:"tooltip-title"},"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞",-1))],544),[[fe,B.value==="centering"]])],32),N.value?y("",!0):(l(),a("div",Oo,[e("button",{class:"app-link-btn",onMouseenter:r[22]||(r[22]=D=>ee("app_link")),onMouseleave:r[23]||(r[23]=D=>B.value=null),onClick:$t},r[57]||(r[57]=[e("span",{class:"material-icons"},"open_in_new",-1)]),32),Q(e("div",qo," –û—Ç–∫—Ä—ã—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ",512),[[fe,B.value==="app_link"]])])),N.value?(l(),a("div",Ko,[e("button",{class:"copy-link-btn",onMouseenter:r[24]||(r[24]=D=>ee("copy_link")),onMouseleave:r[25]||(r[25]=D=>B.value=null),onClick:Dt},r[58]||(r[58]=[e("span",{class:"material-icons"},"content_copy",-1)]),32),Q(e("div",zo," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É ",512),[[fe,B.value==="copy_link"]])])):y("",!0)],64))]),!q.value&&!kt.value?(l(),a("div",Wo,[e("div",Go,[e("button",{class:C(["favorite-btn",{active:(Jt=(Et=u.movieInfo)==null?void 0:Et.lists)==null?void 0:Jt.isFavorite}]),onMouseenter:r[26]||(r[26]=D=>ee("favorite")),onMouseleave:r[27]||(r[27]=D=>B.value=null),onClick:r[28]||(r[28]=D=>ve(K(O).FAVORITE))},[e("span",Yo,f((tn=(en=u.movieInfo)==null?void 0:en.lists)!=null&&tn.isFavorite?"favorite":"favorite_border"),1)],34),Q(e("div",Zo,f("–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"),512),[[fe,B.value==="favorite"]])]),e("div",Xo,[e("button",{class:C(["watching-btn",{active:(on=(nn=u.movieInfo)==null?void 0:nn.lists)==null?void 0:on.isWatching}]),onMouseenter:r[29]||(r[29]=D=>ee("watching")),onMouseleave:r[30]||(r[30]=D=>B.value=null),onClick:r[31]||(r[31]=D=>ve(K(O).WATCHING))},[e("span",Qo,f((ln=(sn=u.movieInfo)==null?void 0:sn.lists)!=null&&ln.isWatching?"visibility":"visibility_off"),1)],34),Q(e("div",Jo,f("–°–º–æ—Ç—Ä—é"),512),[[fe,B.value==="watching"]])]),e("div",es,[e("button",{class:C(["later-btn",{active:(rn=(an=u.movieInfo)==null?void 0:an.lists)==null?void 0:rn.isLater}]),onMouseenter:r[32]||(r[32]=D=>ee("later")),onMouseleave:r[33]||(r[33]=D=>B.value=null),onClick:r[34]||(r[34]=D=>ve(K(O).LATER))},r[59]||(r[59]=[e("span",{class:"material-icons"},"watch_later",-1)]),34),Q(e("div",ts,f("–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"),512),[[fe,B.value==="later"]])]),e("div",ns,[e("button",{class:C(["completed-btn",{active:(dn=(un=u.movieInfo)==null?void 0:un.lists)==null?void 0:dn.isCompleted}]),onMouseenter:r[35]||(r[35]=D=>ee("completed")),onMouseleave:r[36]||(r[36]=D=>B.value=null),onClick:r[37]||(r[37]=D=>ve(K(O).COMPLETED))},[e("span",os,f((vn=(cn=u.movieInfo)==null?void 0:cn.lists)!=null&&vn.isCompleted?"check_circle":"check_circle_outline"),1)],34),Q(e("div",ss,f("–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"),512),[[fe,B.value==="completed"]])]),e("div",ls,[e("button",{class:C(["abandoned-btn",{active:(fn=(mn=u.movieInfo)==null?void 0:mn.lists)==null?void 0:fn.isAbandoned}]),onMouseenter:r[38]||(r[38]=D=>ee("abandoned")),onMouseleave:r[39]||(r[39]=D=>B.value=null),onClick:r[40]||(r[40]=D=>ve(K(O).ABANDONED))},[e("span",is,f(((kn=(gn=u.movieInfo)==null?void 0:gn.lists)!=null&&kn.isAbandoned,"not_interested")),1)],34),Q(e("div",as,f("–ë—Ä–æ—à–µ–Ω–æ"),512),[[fe,B.value==="abandoned"]])])])):y("",!0)])),ge(Bt,{ref_key:"notificationRef",ref:Ie},null,512)],64))}}},Mn=Ye(rs,[["__scopeId","data-v-a09730a9"]]),us={key:0,class:"carousel-container"},ds={class:"carousel-wrapper"},cs=["onClick"],vs=["src","alt"],ms={class:"video-name"},fs={key:0,class:"video-player"},gs=["src"],ks={__name:"TrailerCarousel",props:{videos:{type:Array,required:!0},activeVideoIndex:{type:Number,default:null}},emits:["select"],setup(u,{emit:t}){const d=At(),n=$(()=>d.isMobile),E=u,I=t,g=m(E.activeVideoIndex),k=m(null),L=m(!1),T=m(!1),s=()=>{if(!k.value)return;const{scrollLeft:S,scrollWidth:A,clientWidth:b}=k.value;L.value=S>0,T.value=S<A-b-1},c=S=>{if(!k.value)return;const A=k.value.querySelector(".carousel-item");if(!A)return;const b=A.clientWidth+16;k.value.scrollBy({left:b*S,behavior:"smooth"})},_=S=>{g.value=S,I("select",E.videos[S])},h=()=>s(),j=m([]),P=async S=>{try{return(await fetch("https://img.youtube.com/vi/".concat(S,"/0.jpg"))).ok}catch(A){return!1}};return ut(async()=>{const S=E.videos.map(async b=>await P(b.videoId)?b:null),A=await Promise.all(S);j.value=A.filter(Boolean),s(),window.addEventListener("resize",h)}),De(()=>E.videos,async S=>{const A=S.map(async R=>await P(R.videoId)?R:null),b=await Promise.all(A);j.value=b.filter(Boolean)}),De(()=>E.activeVideoIndex,S=>{g.value=S}),Gt(()=>{window.removeEventListener("resize",h)}),(S,A)=>j.value.length?(l(),a("div",us,[A[4]||(A[4]=e("h2",null,"–¢—Ä–µ–π–ª–µ—Ä—ã (YouTube)",-1)),e("div",ds,[Q(e("button",{class:"scroll-button left",onClick:A[0]||(A[0]=b=>c(-1))},A[2]||(A[2]=[e("span",{class:"material-symbols-outlined"},"arrow_back_ios",-1)]),512),[[fe,!n.value&&L.value]]),e("div",{ref_key:"carousel",ref:k,class:"carousel",onScroll:s},[(l(!0),a(le,null,he(j.value,(b,R)=>(l(),a("div",{key:R,class:"carousel-item",onClick:x=>_(R)},[e("img",{src:"https://img.youtube.com/vi/".concat(b.videoId,"/0.jpg"),alt:b.name},null,8,vs),e("div",ms,f(b.name),1)],8,cs))),128))],544),Q(e("button",{class:"scroll-button right",onClick:A[1]||(A[1]=b=>c(1))},A[3]||(A[3]=[e("span",{class:"material-symbols-outlined"},"arrow_forward_ios",-1)]),512),[[fe,!n.value&&T.value]])]),g.value!==null?(l(),a("div",fs,[e("iframe",{src:u.videos[g.value].iframeUrl,frameborder:"0",allowfullscreen:""},null,8,gs)])):y("",!0)])):y("",!0)}},ys=Ye(ks,[["__scopeId","data-v-4a5806b3"]]),ps={class:"rating-container"},hs={class:"rating-display"},bs={class:"rating-numbers"},ws=["onClick","onMouseenter"],Cs={key:0,class:"tooltip-footer"},_s={class:"rating-numbers mobile-rating-numbers"},Ms=["onClick"],Es={key:0,class:"mobile-modal-footer"},Ls={__name:"MovieRating",props:{kpId:{type:String,required:!0},showDash:{type:Boolean,default:!1}},setup(u){const t=At(),d=Pt(),n=u,E=m(null),I=m(null),g=m(null),k=m(null),L=m(0),T=m(!1),s=m(!1);let c=null;const _=x=>x?x.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",h=()=>{c=setTimeout(()=>{T.value=!1,t.isMobile||(s.value=!1)},100)},j=()=>{c&&(clearTimeout(c),c=null),T.value=!0},P=()=>{t.isMobile&&(s.value=!s.value)},S=()=>{d.push("/login")},A=async()=>{try{const x=await Sn(n.kpId);I.value=x.user_rating,g.value=x.average_rating,k.value=_(x.vote_count)}catch(x){console.error("Error loading rating:",x)}},b=async x=>{var W;try{x===I.value?(await yn(n.kpId,null),I.value=null,E.value.showNotification("–û—Ü–µ–Ω–∫–∞ —É–¥–∞–ª–µ–Ω–∞")):(await yn(n.kpId,x),I.value=x,E.value.showNotification("–û—Ü–µ–Ω–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞")),t.isMobile&&(s.value=!1),A()}catch(q){console.error("Error setting rating:",q),((W=q.response)==null?void 0:W.status)===401?E.value.showNotification('–î–ª—è –æ—Ü–µ–Ω–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:S}):E.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ü–µ–Ω–∫–∏"),t.isMobile&&(s.value=!1)}},R=()=>{s.value=!1};return ut(()=>{A()}),(x,W)=>(l(),a("div",ps,[e("div",hs,[e("a",{href:"#",class:C(["rating-link",{"has-rating":I.value}]),onMouseenter:W[0]||(W[0]=q=>T.value=!0),onMouseleave:h,onClick:ot(P,["prevent"])},[W[3]||(W[3]=e("img",{src:Xn,alt:"ReYohoho",class:"rating-logo"},null,-1)),e("span",{class:C(["average-rating",K(It)(g.value)])},f(g.value?g.value.toFixed(1).replace(/\.0$/,""):"‚Äî"),3)],34),Q(e("div",{class:"rating-tooltip",onMouseenter:j,onMouseleave:h},[e("div",bs,[(l(),a(le,null,he(10,q=>e("button",{key:q,class:C(["number-btn",{active:q===I.value,hover:q===L.value,"average-highlight":g.value&&q<=Math.round(g.value)}]),onClick:N=>b(q),onMouseenter:N=>L.value=q,onMouseleave:W[1]||(W[1]=N=>L.value=0)},f(q),43,ws)),64))]),k.value?(l(),a("div",Cs,"–û—Ü–µ–Ω–æ–∫: "+f(k.value),1)):y("",!0)],544),[[fe,(T.value||s.value)&&!K(t).isMobile]])]),ge(Bt,{ref_key:"notificationRef",ref:E},null,512),K(t).isMobile&&s.value?(l(),a("div",{key:0,class:"mobile-modal-overlay",onClick:R},[e("div",{class:"mobile-modal",onClick:W[2]||(W[2]=ot(()=>{},["stop"]))},[e("div",{class:"mobile-modal-header"},[W[4]||(W[4]=e("h3",null,"–û—Ü–µ–Ω–∏—Ç—å —Ñ–∏–ª—å–º",-1)),e("button",{class:"close-button",onClick:R},"√ó")]),e("div",_s,[(l(),a(le,null,he(10,q=>e("button",{key:q,class:C(["number-btn",{active:q===I.value,"average-highlight":g.value&&q<=Math.round(g.value)}]),onClick:N=>b(q)},f(q),11,Ms)),64))]),k.value?(l(),a("div",Es,"–û—Ü–µ–Ω–æ–∫: "+f(k.value),1)):y("",!0)])])):y("",!0)]))}},Is=Ye(Ls,[["__scopeId","data-v-2df64bd5"]]),Ts={name:"EmojiPicker",props:{isVisible:{type:Boolean,default:!1}},emits:["emoji-selected","mouse-enter","mouse-leave","close"],data(){return{activeCategory:"smileys",categories:[{name:"smileys",icon:"üòÄ",emojis:["üòÄ","üòÉ","üòÑ","üòÅ","üòÜ","üòÖ","üòÇ","ü§£","üòä","üòá","üôÇ","üôÉ","üòâ","üòå","üòç","ü•∞","üòò","üòó","üòô","üòö","üòã","üòõ","üòù","üòú","ü§™","ü§®","üßê","ü§ì","üòé","ü§©","ü•≥"]},{name:"emotions",icon:"üò¢",emojis:["üò•","üò¢","üò≠","üò§","üò†","üò°","ü§¨","ü§Ø","üò≥","ü•µ","ü•∂","üò±","üò®","üò∞","üò•","üòì","ü§ó","ü§î","ü§≠","ü§´","ü§•","üò∂","üòê","üòë","üò¨","üôÑ","üòØ","üò¶","üòß","üòÆ","üò≤"]},{name:"gestures",icon:"üëç",emojis:["üëç","üëé","üëå","ü§å","ü§è","‚úåÔ∏è","ü§û","ü§ü","ü§ò","ü§ô","üëà","üëâ","üëÜ","üñï","üëá","‚òùÔ∏è","üëè","üôå","üëê","ü§≤","ü§ù","üôè","‚úçÔ∏è","üí™","ü¶æ","ü¶ø","ü¶µ","ü¶∂","üëÇ","ü¶ª","üëÉ"]},{name:"hearts",icon:"‚ù§Ô∏è",emojis:["‚ù§Ô∏è","üß°","üíõ","üíö","üíô","üíú","ü§é","üñ§","ü§ç","üíî","‚ù£Ô∏è","üíï","üíû","üíì","üíó","üíñ","üíò","üíù","üíü","‚ô•Ô∏è","üíØ","üí¢","üí•","üí´","üí¶","üí®","üï≥Ô∏è","üí£","üí¨","üëÅÔ∏è‚Äçüó®Ô∏è","üó®Ô∏è"]},{name:"objects",icon:"üéâ",emojis:["üéâ","üéä","üéà","üéÅ","üéÄ","üéÇ","üç∞","üßÅ","üç≠","üç¨","üç´","üç©","üç™","üçï","üçî","üçü","üå≠","ü•™","üåÆ","üåØ","ü•ô","ü•ö","üç≥","ü•ò","üç≤","ü•ó","üçø","üßà","üßÄ","ü•®","ü•Ø"]}]}},computed:{currentEmojis(){const u=this.categories.find(t=>t.name===this.activeCategory);return u?u.emojis:[]}},methods:{selectEmoji(u){this.$emit("emoji-selected",u)}}},Rs={class:"emoji-categories"},As=["onClick"],Ps={class:"emoji-grid"},Ss=["onClick"];function xs(u,t,d,n,E,I){return d.isVisible?(l(),a("div",{key:0,class:"emoji-picker",onMouseenter:t[1]||(t[1]=g=>u.$emit("mouse-enter")),onMouseleave:t[2]||(t[2]=g=>u.$emit("mouse-leave"))},[e("button",{class:"close-btn mobile-only",onClick:t[0]||(t[0]=g=>u.$emit("close"))},t[3]||(t[3]=[e("i",{class:"fas fa-times"},null,-1)])),e("div",Rs,[(l(!0),a(le,null,he(E.categories,g=>(l(),a("button",{key:g.name,onClick:k=>E.activeCategory=g.name,class:C([{active:E.activeCategory===g.name},"category-btn"]),type:"button"},f(g.icon),11,As))),128))]),e("div",Ps,[(l(!0),a(le,null,he(I.currentEmojis,g=>(l(),a("button",{key:g,onClick:k=>I.selectEmoji(g),class:"emoji-btn",type:"button"},f(g),9,Ss))),128))])],32)):y("",!0)}const Yt=Ye(Ts,[["render",xs],["__scopeId","data-v-209132f3"]]),js=async u=>{const t=await xn();return await u(t)},Ns=async u=>{const{data:t}=await js(d=>d.get("/search_emotes/".concat(u)));return t.emotes||[]},Us={name:"ImagePicker",props:{isVisible:{type:Boolean,required:!0},currentUser:{type:Object,default:null}},emits:["image-selected","mouse-enter","mouse-leave","close","login-required"],setup(u,{emit:t}){const d=m(""),n=m([]),E=m(null),I=m(!1),k=jn(async c=>{if(!u.currentUser){console.warn("–ü–æ–ø—ã—Ç–∫–∞ –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏");return}if(!c.trim()){n.value=[],I.value=!1;return}I.value=!0;try{n.value=await Ns(c)}catch(_){console.error("Error searching images:",_),n.value=[]}finally{I.value=!1}},300),L=()=>{if(!u.currentUser){t("login-required");return}d.value.trim()&&(I.value=!0),k(d.value)},T=c=>{if(!u.currentUser){t("login-required");return}t("image-selected",c),t("close")},s=()=>{setTimeout(()=>{u.isVisible&&t("mouse-leave")},100)};return De(()=>u.isVisible,c=>{c&&(d.value="",n.value=[],I.value=!1)}),{searchQuery:d,images:n,searchInput:E,isLoading:I,handleSearch:L,selectImage:T,handleInputBlur:s}}},Bs={key:0,class:"auth-required"},$s={class:"auth-message"},Ds={key:1},Hs={class:"image-picker-header"},Vs={class:"image-content"},Fs={key:0,class:"loading-spinner"},Os={key:1,class:"image-grid"},qs=["onClick"],Ks=["src","alt"],zs={key:2,class:"no-images"},Ws={key:3,class:"no-search"};function Gs(u,t,d,n,E,I){return d.isVisible?(l(),a("div",{key:0,class:"image-picker",onMouseenter:t[7]||(t[7]=g=>u.$emit("mouse-enter")),onMouseleave:t[8]||(t[8]=g=>u.$emit("mouse-leave")),onClick:t[9]||(t[9]=ot(()=>{},["stop"]))},[e("button",{class:"close-btn mobile-only",onClick:t[0]||(t[0]=g=>u.$emit("close"))},t[10]||(t[10]=[e("i",{class:"fas fa-times"},null,-1)])),d.currentUser?(l(),a("div",Ds,[e("div",Hs,[Q(e("input",{ref:"searchInput",type:"text","onUpdate:modelValue":t[2]||(t[2]=g=>n.searchQuery=g),placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–º–∞–π–ª–∞ 7tv",class:"image-search-input",onInput:t[3]||(t[3]=(...g)=>n.handleSearch&&n.handleSearch(...g)),onClick:t[4]||(t[4]=ot(()=>{},["stop"])),onFocus:t[5]||(t[5]=g=>u.$emit("mouse-enter")),onBlur:t[6]||(t[6]=(...g)=>n.handleInputBlur&&n.handleInputBlur(...g))},null,544),[[mt,n.searchQuery]])]),e("div",Vs,[n.isLoading?(l(),a("div",Fs,t[14]||(t[14]=[e("div",{class:"spinner"},null,-1),e("p",null,"–ü–æ–∏—Å–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...",-1)]))):n.images.length>0?(l(),a("div",Os,[(l(!0),a(le,null,he(n.images,(g,k)=>(l(),a("div",{key:k,class:"image-item",onClick:L=>n.selectImage(g)},[e("img",{src:g,alt:"Image "+(k+1)},null,8,Ks)],8,qs))),128))])):n.searchQuery.trim()?(l(),a("div",zs,t[15]||(t[15]=[e("p",null,"–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤",-1)]))):(l(),a("div",Ws,t[16]||(t[16]=[e("p",null,"–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞",-1)])))])])):(l(),a("div",Bs,[e("div",$s,[t[11]||(t[11]=e("i",{class:"fas fa-lock"},null,-1)),t[12]||(t[12]=e("h3",null,"–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è",-1)),t[13]||(t[13]=e("p",null,"–î–ª—è –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç",-1)),e("button",{class:"login-button",onClick:t[1]||(t[1]=g=>u.$emit("login-required"))},"–í–æ–π—Ç–∏")])]))],32)):y("",!0)}const Zt=Ye(Us,[["render",Gs],["__scopeId","data-v-f33eb3f6"]]),Ys={name:"LinkModal",props:{isVisible:{type:Boolean,default:!1},selectedText:{type:String,default:""}},emits:["close","submit"],setup(u,{emit:t}){const d=m(""),n=m(""),E=m(null),I=m(null),g=$(()=>/^https?:\/\/.+/.test(d.value.trim())&&n.value.trim()),k=()=>{t("close"),T()},L=()=>{g.value&&(t("submit",{url:d.value.trim(),title:n.value.trim()}),k())},T=()=>{d.value="",n.value=""},s=c=>{var _;c.key==="Enter"?(c.preventDefault(),g.value?L():c.target===E.value&&d.value.trim()&&((_=I.value)==null||_.focus())):c.key==="Escape"&&k()};return De(()=>u.isVisible,c=>{c&&(u.selectedText.trim()&&(n.value=u.selectedText.trim()),$e(()=>{var _;(_=E.value)==null||_.focus()}))}),{linkUrl:d,linkTitle:n,urlInput:E,titleInput:I,isValidLink:g,closeModal:k,submitLink:L,handleKeydown:s}}},Zs={class:"link-modal-header"},Xs={class:"link-modal-content"},Qs={class:"form-group"},Js={class:"form-group"},el={class:"link-modal-footer"},tl=["disabled"];function nl(u,t,d,n,E,I){return d.isVisible?(l(),a("div",{key:0,class:"link-modal-overlay",onClick:t[8]||(t[8]=(...g)=>n.closeModal&&n.closeModal(...g))},[e("div",{class:"link-modal",onClick:t[7]||(t[7]=ot(()=>{},["stop"]))},[e("div",Zs,[t[10]||(t[10]=e("h3",null,"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É",-1)),e("button",{class:"close-button",onClick:t[0]||(t[0]=(...g)=>n.closeModal&&n.closeModal(...g))},t[9]||(t[9]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",Xs,[e("div",Qs,[t[11]||(t[11]=e("label",{for:"link-url"},"URL —Å—Å—ã–ª–∫–∏:",-1)),Q(e("input",{id:"link-url",ref:"urlInput","onUpdate:modelValue":t[1]||(t[1]=g=>n.linkUrl=g),type:"url",placeholder:"https://example.com",class:"link-input",onKeydown:t[2]||(t[2]=(...g)=>n.handleKeydown&&n.handleKeydown(...g))},null,544),[[mt,n.linkUrl]])]),e("div",Js,[t[12]||(t[12]=e("label",{for:"link-title"},"–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏:",-1)),Q(e("input",{id:"link-title",ref:"titleInput","onUpdate:modelValue":t[3]||(t[3]=g=>n.linkTitle=g),type:"text",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è",class:"link-input",onKeydown:t[4]||(t[4]=(...g)=>n.handleKeydown&&n.handleKeydown(...g))},null,544),[[mt,n.linkTitle]])])]),e("div",el,[e("button",{class:"cancel-button",onClick:t[5]||(t[5]=(...g)=>n.closeModal&&n.closeModal(...g))},"–û—Ç–º–µ–Ω–∞"),e("button",{class:"submit-button",disabled:!n.isValidLink,onClick:t[6]||(t[6]=(...g)=>n.submitLink&&n.submitLink(...g))},"–î–æ–±–∞–≤–∏—Ç—å",8,tl)])])])):y("",!0)}const Xt=Ye(Ys,[["render",nl],["__scopeId","data-v-a794d83f"]]);function ol(){const u=m(!1),t=m(!1),d=m(!1),n=()=>{t.value=!0},E=()=>{t.value=!1,setTimeout(()=>{!t.value&&!d.value&&(u.value=!1)},300)},I=()=>{d.value=!0,u.value=!0},g=()=>{d.value=!1,setTimeout(()=>{!t.value&&!d.value&&(u.value=!1)},300)},k=()=>{u.value=!1};return{showEmojiPicker:u,isEmojiHovered:t,isButtonHovered:d,handleEmojiMouseEnter:n,handleEmojiMouseLeave:E,handleButtonMouseEnter:I,handleButtonMouseLeave:g,closeEmojiPicker:k,insertEmoji:(s,c,_,h)=>{const j=c.value;if(j){const P=j.selectionStart,S=j.selectionEnd,A=_.value.substring(0,P),b=_.value.substring(S),R=A+s+b;h(R),$e(()=>{j.focus(),j.setSelectionRange(P+s.length,P+s.length),j.style.height&&(j.style.height="auto",j.style.height="".concat(Math.min(j.scrollHeight,200),"px"))})}else h(_.value+s)},handleGlobalClick:s=>{!s.target.closest(".emoji-picker")&&!s.target.closest(".emoji-button-inline")&&k()}}}function sl(){const u=m(!1),t=m(!1),d=m(!1),n=()=>{t.value=!0},E=()=>{t.value=!1,setTimeout(()=>{!t.value&&!d.value&&(u.value=!1)},300)},I=()=>{d.value=!0,u.value=!0},g=()=>{d.value=!1,setTimeout(()=>{!t.value&&!d.value&&(u.value=!1)},300)},k=()=>{u.value=!1};return{showImagePicker:u,isImageHovered:t,isButtonHovered:d,handleImageMouseEnter:n,handleImageMouseLeave:E,handleImageButtonMouseEnter:I,handleButtonMouseLeave:g,closeImagePicker:k,insertImage:(s,c,_,h)=>{const j=c.value;if(j){const P=j.selectionStart,S=j.selectionEnd,A="[img]".concat(s,"[/img]"),b=_.value.slice(0,P)+A+_.value.slice(S);h(b),$e(()=>{j.focus(),j.setSelectionRange(P+A.length,P+A.length),j.style.height&&(j.style.height="auto",j.style.height="".concat(Math.min(j.scrollHeight,200),"px"))})}else{const P="[img]".concat(s,"[/img]");h(_.value+P)}},handleGlobalClick:s=>{!s.target.closest(".image-picker")&&!s.target.closest(".emoji-button-inline")&&k()}}}function ll(){const u=m(!1),t=m("");return{showLinkModal:u,selectedTextForLink:t,insertLink:(g,k)=>{const L=g.value;if(L){const T=L.selectionStart,s=L.selectionEnd,c=k.value.slice(T,s);t.value=c.trim()||""}u.value=!0},insertLinkFromModal:(g,k,L,T)=>{const s=k.value;if(s){const c=s.selectionStart,_=s.selectionEnd,h="[link=".concat(g.url,"]").concat(g.title,"[/link]"),j=L.value.slice(0,c)+h+L.value.slice(_);T(j),$e(()=>{s.focus(),s.setSelectionRange(c+h.length,c+h.length),s.style.height&&(s.style.height="auto",s.style.height="".concat(Math.min(s.scrollHeight,200),"px"))})}},closeLinkModal:()=>{u.value=!1},insertSpoiler:(g,k,L)=>{const T=g.value;if(T){const s=T.selectionStart,c=T.selectionEnd,_=k.value.slice(s,c);let h;_.trim()?h="[spoiler]".concat(_,"[/spoiler]"):h="[spoiler][/spoiler]";const j=k.value.slice(0,s)+h+k.value.slice(c);L(j),$e(()=>{if(T.focus(),_.trim())T.setSelectionRange(s+h.length,s+h.length);else{const P=s+9;T.setSelectionRange(P,P)}T.style.height&&(T.style.height="auto",T.style.height="".concat(Math.min(T.scrollHeight,200),"px"))})}}}}function il(){return{autoResize:d=>{const n=d==null?void 0:d.target;n&&(n.style.height="auto",n.style.height="".concat(Math.min(n.scrollHeight,200),"px"))},autoResizeElement:d=>{d&&(d.style.height="auto",d.style.height="".concat(Math.min(d.scrollHeight,200),"px"))}}}function Qt(){const u=ol(),t=sl(),d=ll(),{autoResize:n,autoResizeElement:E}=il(),I=()=>{u.isButtonHovered.value=!0,t.isButtonHovered.value=!0,u.showEmojiPicker.value=!0,t.showImagePicker.value=!1},g=()=>{u.isButtonHovered.value=!0,t.isButtonHovered.value=!0,t.showImagePicker.value=!0,u.showEmojiPicker.value=!1},k=()=>{u.isButtonHovered.value=!1,t.isButtonHovered.value=!1,setTimeout(()=>{!u.isEmojiHovered.value&&!t.isImageHovered.value&&!u.isButtonHovered.value&&!t.isButtonHovered.value&&(u.showEmojiPicker.value=!1,t.showImagePicker.value=!1)},300)},L=()=>{u.showEmojiPicker.value=!1,t.showImagePicker.value=!1},T=P=>{!P.target.closest(".emoji-picker")&&!P.target.closest(".image-picker")&&!P.target.closest(".emoji-button-inline")&&L()},s=(P,S,A,b)=>{u.insertEmoji(P,S,A,b)},c=(P,S,A,b)=>{t.insertImage(P,S,A,b)},_=(P,S,A)=>{d.insertLink(P,S,A)},h=(P,S,A,b)=>{d.insertLinkFromModal(P,S,A,b)},j=(P,S,A)=>{d.insertSpoiler(P,S,A)};return ut(()=>{document.addEventListener("click",T)}),Gt(()=>{document.removeEventListener("click",T)}),{showEmojiPicker:u.showEmojiPicker,handleEmojiMouseEnter:u.handleEmojiMouseEnter,handleEmojiMouseLeave:u.handleEmojiMouseLeave,closeEmojiPicker:u.closeEmojiPicker,showImagePicker:t.showImagePicker,handleImageMouseEnter:t.handleImageMouseEnter,handleImageMouseLeave:t.handleImageMouseLeave,closeImagePicker:t.closeImagePicker,showLinkModal:d.showLinkModal,selectedTextForLink:d.selectedTextForLink,closeLinkModal:d.closeLinkModal,handleButtonMouseEnter:I,handleImageButtonMouseEnter:g,handleButtonMouseLeave:k,closeAllPickers:L,insertEmojiUniversal:s,insertImageUniversal:c,insertLinkUniversal:_,insertLinkFromModalUniversal:h,insertSpoilerUniversal:j,autoResize:n,autoResizeElement:E}}const al=u=>u===1?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π":u>=2&&u<=4?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è":"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤",rl=u=>{if(!u)return"?";const t=u.split(" ");return t.length===1?u.slice(0,2).toUpperCase():(t[0][0]+t[t.length-1][0]).toUpperCase()},ul={name:"CommentItem",components:{EmojiPicker:Yt,ImagePicker:Zt,LinkModal:Xt},props:{comment:{type:Object,required:!0,default:()=>({username:"–ê–Ω–æ–Ω–∏–º",user_avatar:null,content:"",created_at:new Date().toISOString(),rating:0,replies:[]})},currentUser:{type:Object,required:!0,default:()=>({})},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate"],setup(u,{emit:t}){var Fe,Oe;const d=Pt(),n=$(()=>{var M;return u.editingCommentId===((M=u.comment)==null?void 0:M.id)}),E=m(((Fe=u.comment)==null?void 0:Fe.content)||""),I=m(((Oe=u.comment)==null?void 0:Oe.user_rating)||0),g=m(null),k=m(null),{showEmojiPicker:L,showImagePicker:T,showLinkModal:s,selectedTextForLink:c,handleEmojiMouseEnter:_,handleEmojiMouseLeave:h,handleImageMouseEnter:j,handleImageMouseLeave:P,handleButtonMouseEnter:S,handleImageButtonMouseEnter:A,handleButtonMouseLeave:b,closeEmojiPicker:R,closeImagePicker:x,closeLinkModal:W,insertEmojiUniversal:q,insertImageUniversal:N,insertLinkUniversal:B,insertLinkFromModalUniversal:J,insertSpoilerUniversal:Pe,autoResize:Ie}=Qt(),{formatContentWithTruncation:He}=Tn();ut(async()=>{var M;if((M=u.comment)!=null&&M.user_avatar){const V=await Nn();g.value="".concat(V).concat(u.comment.user_avatar)}});const H=$(()=>{var M;return u.currentUser&&((M=u.comment)==null?void 0:M.user_id)===u.currentUser.id}),ae=$(()=>{var M;return u.currentUser&&((M=u.comment)==null?void 0:M.user_id)===u.currentUser.id||u.currentUser&&u.currentUser.is_admin===1}),X=$(()=>{var M,V,qe;return((M=u.comment)==null?void 0:M.updated_at)&&((V=u.comment)==null?void 0:V.updated_at)!==((qe=u.comment)==null?void 0:qe.created_at)}),G=$(()=>{var M,V;return(M=u.comment)!=null&&M.is_deleted?!1:(((V=u.comment)==null?void 0:V.rating)||0)<=-3}),ke=$(()=>G.value),de=m(!1),be=$(()=>{var M,V;return(M=u.comment)!=null&&M.is_deleted?null:(((V=u.comment)==null?void 0:V.rating)||0)<=-3?"lowRating":null}),we=()=>{var M,V;t("start-edit",(M=u.comment)==null?void 0:M.id),E.value=((V=u.comment)==null?void 0:V.content)||"",$e(()=>{k.value&&(k.value.focus(),Ie({target:k.value}))})},Ce=()=>{var M;t("cancel-edit"),E.value=((M=u.comment)==null?void 0:M.content)||""},Se=()=>{var M;E.value.trim()&&t("edit",(M=u.comment)==null?void 0:M.id,E.value.trim())},ye=()=>{var M;confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π?")&&t("delete",(M=u.comment)==null?void 0:M.id)},Ze=M=>{var V,qe;I.value===M?(I.value=0,t("rate",(V=u.comment)==null?void 0:V.id,M)):(I.value=M,t("rate",(qe=u.comment)==null?void 0:qe.id,M))},ee=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),Se())},Ne=$(()=>{var M;return He((M=u.comment)==null?void 0:M.content)}),Xe=()=>{console.log("Avatar load error, falling back to initials"),g.value=null,$e(()=>{const M=document.querySelector(".avatar-placeholder");M&&(M.style.display="flex")})},Re=()=>{d.push("/login")},Ae=M=>{q(M,k,E,V=>{E.value=V})},Ve=M=>{N(M,k,E,V=>{E.value=V})},st=()=>{Pe(k,E,M=>{E.value=M})},lt=()=>{B(k,E,M=>{E.value=M})},dt=M=>{J(M,k,E,V=>{E.value=V})},xe=M=>{Ie(M)};return De(E,()=>{n.value&&k.value&&$e(()=>{xe({target:k.value})})}),{isEditing:n,editContent:E,userRating:I,isCommentOwner:H,canDeleteComment:ae,isCommentEdited:X,formatDate:Rn,formatRelativeTime:Qn,startEdit:we,cancelEdit:Ce,saveEdit:Se,confirmDelete:ye,rateComment:Ze,avatarUrl:g,getInitials:rl,handleEditKeydown:ee,isCommentHidden:ke,showHiddenComment:de,hiddenCommentReason:be,formattedContent:Ne,autoResizeEdit:xe,editTextarea:k,showEmojiPicker:L,showImagePicker:T,insertEmojiEdit:Ae,insertImageEdit:Ve,insertSpoilerEdit:st,insertLinkEdit:lt,handleEmojiMouseEnter:_,handleEmojiMouseLeave:h,handleImageMouseEnter:j,handleImageMouseLeave:P,closeEmojiPicker:R,closeImagePicker:x,handleButtonMouseEnter:S,handleButtonMouseLeave:b,handleImageButtonMouseEnter:A,handleAvatarError:Xe,openLogin:Re,showLinkModal:s,selectedTextForLink:c,insertLinkFromModal:dt,closeLinkModal:W}}},dl=["data-comment-id"],cl={class:"comment-header"},vl={class:"user-info"},ml={class:"user-avatar"},fl=["src","alt"],gl={class:"user-details"},kl={class:"username"},yl={key:0,class:"user-rating"},pl=["title"],hl=["title"],bl={class:"comment-content"},wl={key:0,class:"hidden-comment-warning"},Cl={key:1},_l={key:0,class:"deleted-comment"},Ml={key:1},El={key:0,class:"edit-form"},Ll={class:"edit-textarea-container"},Il={class:"edit-footer"},Tl={class:"edit-actions"},Rl=["disabled"],Al={class:"character-counter-container"},Pl={key:1,class:"comment-text-container"},Sl=["innerHTML"],xl={class:"comment-footer"},jl={class:"comment-actions"},Nl={class:"rating-buttons"},Ul={class:"action-buttons"};function Bl(u,t,d,n,E,I){var s,c,_,h,j,P,S,A,b,R,x,W,q,N,B,J,Pe,Ie,He;const g=je("router-link"),k=je("EmojiPicker"),L=je("ImagePicker"),T=je("LinkModal");return l(),a("div",{class:"comment-item","data-comment-id":(s=d.comment)==null?void 0:s.id},[e("div",cl,[e("div",vl,[ge(g,{to:{path:"/lists/".concat((c=d.comment)==null?void 0:c.user_id)},target:"_blank",rel:"noopener noreferrer",class:"user-avatar-link"},{default:zt(()=>{var H,ae;return[e("div",ml,[n.avatarUrl?(l(),a("img",{key:0,src:n.avatarUrl,alt:((H=d.comment)==null?void 0:H.username)||"–ê–Ω–æ–Ω–∏–º",onError:t[0]||(t[0]=(...X)=>n.handleAvatarError&&n.handleAvatarError(...X)),onerror:"this.onerror=null; this.style.display='none'; this.nextElementSibling.style.display='flex';"},null,40,fl)):(l(),a("div",{key:1,class:"avatar-placeholder",style:Tt({display:n.avatarUrl?"none":"flex"})},f(n.getInitials(((ae=d.comment)==null?void 0:ae.username)||"–ê–Ω–æ–Ω–∏–º")),5))])]}),_:1},8,["to"]),e("div",gl,[ge(g,{to:{path:"/lists/".concat((_=d.comment)==null?void 0:_.user_id)},target:"_blank",rel:"noopener noreferrer",class:"username-link"},{default:zt(()=>{var H;return[e("span",kl,f(((H=d.comment)==null?void 0:H.username)||"–ê–Ω–æ–Ω–∏–º"),1)]}),_:1},8,["to"]),(h=d.comment)!=null&&h.user_movie_rating?(l(),a("span",yl,[t[18]||(t[18]=e("i",{class:"fas fa-star"},null,-1)),Y(" "+f(d.comment.user_movie_rating),1)])):y("",!0),e("span",{class:"date",title:n.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((j=d.comment)==null?void 0:j.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(n.formatDate((P=d.comment)==null?void 0:P.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((S=d.comment)==null?void 0:S.created_at))},[Y(f(n.formatRelativeTime((A=d.comment)==null?void 0:A.created_at))+" ",1),n.isCommentEdited?(l(),a("i",{key:0,class:"fas fa-pencil-alt edit-icon",title:n.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((b=d.comment)==null?void 0:b.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(n.formatDate((R=d.comment)==null?void 0:R.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((x=d.comment)==null?void 0:x.created_at))},null,8,hl)):y("",!0)],8,pl)])])]),e("div",bl,[!((W=d.comment)!=null&&W.is_deleted)&&n.isCommentHidden&&!n.showHiddenComment?(l(),a("div",wl,[n.hiddenCommentReason==="lowRating"?(l(),a("p",{key:0,class:"warning-text",onClick:t[1]||(t[1]=H=>n.showHiddenComment=!0)},t[19]||(t[19]=[e("i",{class:"fas fa-eye-slash"},null,-1),Y(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–∫—Ä—ã—Ç –∏–∑-–∑–∞ –Ω–∏–∑–∫–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å. ")]))):y("",!0)])):(l(),a("div",Cl,[(q=d.comment)!=null&&q.is_deleted?(l(),a("div",_l,t[20]||(t[20]=[e("p",{class:"deleted-message"},[e("i",{class:"fas fa-trash"}),Y(" –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —É–¥–∞–ª—ë–Ω ")],-1)]))):(l(),a("div",Ml,[n.isEditing?(l(),a("div",El,[e("div",Ll,[Q(e("textarea",{ref:"editTextarea","onUpdate:modelValue":t[2]||(t[2]=H=>n.editContent=H),class:"edit-textarea",rows:"3",maxlength:"1500",onKeydown:t[3]||(t[3]=(...H)=>n.handleEditKeydown&&n.handleEditKeydown(...H)),onInput:t[4]||(t[4]=(...H)=>n.autoResizeEdit&&n.autoResizeEdit(...H))},null,544),[[mt,n.editContent]])]),e("div",Il,[e("div",Tl,[e("button",{onClick:t[5]||(t[5]=(...H)=>n.cancelEdit&&n.cancelEdit(...H)),class:"cancel-button"},"–û—Ç–º–µ–Ω–∞"),e("button",{onClick:t[6]||(t[6]=(...H)=>n.saveEdit&&n.saveEdit(...H)),class:"save-button",disabled:!n.editContent.trim()||n.editContent.length>1500}," –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ",8,Rl)]),e("div",Al,[e("div",{class:C(["character-counter-inline",{"near-limit":n.editContent.length>1400,"at-limit":n.editContent.length>=1500}])},f(n.editContent.length)+"/1500 ",3),e("button",{type:"button",class:C(["emoji-button-inline",{active:n.showEmojiPicker}]),onMouseenter:t[7]||(t[7]=(...H)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...H)),onMouseleave:t[8]||(t[8]=(...H)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...H))}," üòä ",34),e("button",{type:"button",class:C(["emoji-button-inline",{active:n.showImagePicker}]),onMouseenter:t[9]||(t[9]=(...H)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...H)),onMouseleave:t[10]||(t[10]=(...H)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...H))},t[21]||(t[21]=[Rt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-f1c85dfc><g id="logo" data-v-f1c85dfc><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-f1c85dfc></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-f1c85dfc></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-f1c85dfc></path></g></svg>',1)]),34),e("button",{type:"button",class:"emoji-button-inline spoiler-button",onClick:t[11]||(t[11]=(...H)=>n.insertSpoilerEdit&&n.insertSpoilerEdit(...H)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},t[22]||(t[22]=[e("i",{class:"fas fa-eye-slash"},null,-1)])),e("button",{type:"button",class:"emoji-button-inline link-button",onClick:t[12]||(t[12]=(...H)=>n.insertLinkEdit&&n.insertLinkEdit(...H)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},t[23]||(t[23]=[e("i",{class:"fas fa-link"},null,-1)])),ge(k,{"is-visible":n.showEmojiPicker,onEmojiSelected:n.insertEmojiEdit,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),ge(L,{"is-visible":n.showImagePicker,"current-user":d.currentUser,onImageSelected:n.insertImageEdit,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:n.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),ge(T,{"is-visible":n.showLinkModal,"selected-text":n.selectedTextForLink,onClose:n.closeLinkModal,onSubmit:n.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):(l(),a("div",Pl,[e("p",{class:"comment-text",innerHTML:n.formattedContent},null,8,Sl)]))]))]))]),e("div",xl,[e("div",jl,[e("div",Nl,[!n.isCommentOwner&&!((N=d.comment)!=null&&N.is_deleted)?(l(),a("button",{key:0,onClick:t[13]||(t[13]=H=>n.rateComment(1)),class:C(["rating-button",{"rated-up":n.userRating===1}])},t[24]||(t[24]=[e("i",{class:"fas fa-thumbs-up"},null,-1)]),2)):y("",!0),e("span",{class:C(["rating-count",{"rating-positive":n.userRating===1,"rating-negative":n.userRating===-1}])},f(((B=d.comment)==null?void 0:B.rating)||0),3),!n.isCommentOwner&&!((J=d.comment)!=null&&J.is_deleted)?(l(),a("button",{key:1,onClick:t[14]||(t[14]=H=>n.rateComment(-1)),class:C(["rating-button",{"rated-down":n.userRating===-1}])},t[25]||(t[25]=[e("i",{class:"fas fa-thumbs-down"},null,-1)]),2)):y("",!0)]),e("div",Ul,[!d.currentUser||d.currentUser.allow_comments===1?(l(),a("button",{key:0,onClick:t[15]||(t[15]=H=>u.$emit("reply",d.comment)),class:"action-button reply-button"},t[26]||(t[26]=[e("i",{class:"fas fa-reply"},null,-1)]))):y("",!0),n.isCommentOwner&&!((Pe=d.comment)!=null&&Pe.is_deleted)&&!n.isEditing&&((Ie=d.currentUser)==null?void 0:Ie.allow_comments)===1?(l(),a("button",{key:1,onClick:t[16]||(t[16]=(...H)=>n.startEdit&&n.startEdit(...H)),class:"action-button edit-button"},t[27]||(t[27]=[e("i",{class:"fas fa-edit"},null,-1)]))):y("",!0),n.canDeleteComment&&!((He=d.comment)!=null&&He.is_deleted)?(l(),a("button",{key:2,onClick:t[17]||(t[17]=(...H)=>n.confirmDelete&&n.confirmDelete(...H)),class:"action-button delete-button"},t[28]||(t[28]=[e("i",{class:"fas fa-trash"},null,-1)]))):y("",!0)])])])],8,dl)}const $l=Ye(ul,[["render",Bl],["__scopeId","data-v-f1c85dfc"]]),Dl={name:"CommentThread",components:{CommentItem:$l,EmojiPicker:Yt,ImagePicker:Zt,LinkModal:Xt},props:{comment:{type:Object,required:!0},currentUser:{type:Object,required:!0},replyTo:{type:Object,default:null},replyContent:{type:String,default:""},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate","submit-reply","cancel-reply","update-reply-content","reply-keydown"],setup(u,{emit:t}){const d=m(null),n=m(!0),{showEmojiPicker:E,showImagePicker:I,showLinkModal:g,selectedTextForLink:k,handleEmojiMouseEnter:L,handleEmojiMouseLeave:T,handleImageMouseEnter:s,handleImageMouseLeave:c,handleButtonMouseEnter:_,handleImageButtonMouseEnter:h,handleButtonMouseLeave:j,closeEmojiPicker:P,closeImagePicker:S,closeLinkModal:A,insertEmojiUniversal:b,insertImageUniversal:R,insertLinkUniversal:x,insertLinkFromModalUniversal:W,insertSpoilerUniversal:q}=Qt(),N=X=>{t("update-reply-content",X.target.value);const G=X.target;G&&(G.style.height="auto",G.style.height="".concat(Math.min(G.scrollHeight,200),"px"))},B={get value(){return u.replyContent},set value(X){t("update-reply-content",X)}};return{replyTextarea:d,showEmojiPicker:E,showImagePicker:I,isCollapsed:n,insertEmoji:X=>{b(X,d,B,G=>{t("update-reply-content",G)})},insertImage:X=>{R(X,d,B,G=>{t("update-reply-content",G)})},insertSpoiler:()=>{q(d,B,X=>{t("update-reply-content",X)})},handleEmojiMouseEnter:L,handleEmojiMouseLeave:T,handleImageMouseEnter:s,handleImageMouseLeave:c,handleButtonMouseEnter:_,handleButtonMouseLeave:j,closeEmojiPicker:P,closeImagePicker:S,handleImageButtonMouseEnter:h,handleReplyInput:N,toggleCollapsed:()=>{n.value=!n.value},showLinkModal:g,selectedTextForLink:k,insertLink:()=>{x(d,B,X=>{t("update-reply-content",X)})},closeLinkModal:A,insertLinkFromModal:X=>{W(X,d,B,G=>{t("update-reply-content",G)})}}},computed:{canReply(){return this.currentUser?this.currentUser.allow_comments===1:!0},getReplyPlaceholder(){return this.currentUser?this.currentUser.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç..."},formattedContent(){const{formatContent:u}=Tn();return u(this.comment.content)}}},Hl={class:"comment-thread"},Vl={key:0,class:"reply-form"},Fl={class:"textarea-container"},Ol=["value","placeholder","disabled"],ql={class:"reply-footer"},Kl={class:"reply-actions"},zl=["disabled"],Wl={class:"character-counter-container"},Gl=["disabled"],Yl={key:1,class:"replies-container"},Zl=["title"],Xl={class:"replies-count"},Ql=["title"],Jl={key:0,class:"replies-content"};function ei(u,t,d,n,E,I){const g=je("CommentItem"),k=je("EmojiPicker"),L=je("ImagePicker"),T=je("LinkModal"),s=je("CommentThread",!0);return l(),a("div",Hl,[ge(g,{comment:d.comment,"current-user":d.currentUser,"editing-comment-id":d.editingCommentId,onReply:t[0]||(t[0]=c=>u.$emit("reply",c)),onStartEdit:t[1]||(t[1]=c=>u.$emit("start-edit",c)),onCancelEdit:t[2]||(t[2]=c=>u.$emit("cancel-edit")),onEdit:t[3]||(t[3]=(c,_)=>u.$emit("edit",c,_)),onDelete:t[4]||(t[4]=c=>u.$emit("delete",c)),onRate:t[5]||(t[5]=(c,_)=>u.$emit("rate",c,_))},null,8,["comment","current-user","editing-comment-id"]),d.replyTo&&d.replyTo.id===d.comment.id?(l(),a("div",Vl,[e("div",Fl,[e("textarea",{ref:"replyTextarea",class:"comment-textarea",value:d.replyContent,placeholder:I.getReplyPlaceholder,disabled:d.currentUser&&d.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:t[6]||(t[6]=(...c)=>n.handleReplyInput&&n.handleReplyInput(...c)),onKeydown:t[7]||(t[7]=c=>u.$emit("reply-keydown",c))},null,40,Ol)]),e("div",ql,[e("div",Kl,[e("button",{class:"cancel-reply",onClick:t[8]||(t[8]=c=>u.$emit("cancel-reply"))},"–û—Ç–º–µ–Ω–∞"),e("button",{class:"submit-button",disabled:!d.replyContent.trim()||d.replyContent.length>1500||d.currentUser&&d.currentUser.allow_comments!==1,onClick:t[9]||(t[9]=c=>u.$emit("submit-reply"))}," –û—Ç–≤–µ—Ç–∏—Ç—å ",8,zl)]),e("div",Wl,[e("div",{class:C(["character-counter-inline",{"near-limit":d.replyContent.length>1400,"at-limit":d.replyContent.length>=1500}])},f(d.replyContent.length)+"/1500 ",3),e("button",{type:"button",class:C(["emoji-button-inline",{active:n.showEmojiPicker}]),onMouseenter:t[10]||(t[10]=(...c)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...c)),onMouseleave:t[11]||(t[11]=(...c)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...c))}," üòä ",34),e("button",{type:"button",class:C(["emoji-button-inline",{active:n.showImagePicker}]),onMouseenter:t[12]||(t[12]=(...c)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...c)),onMouseleave:t[13]||(t[13]=(...c)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...c))},t[29]||(t[29]=[Rt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-6c0fc347><g id="logo" data-v-6c0fc347><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-6c0fc347></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-6c0fc347></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-6c0fc347></path></g></svg>',1)]),34),e("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:d.currentUser&&d.currentUser.allow_comments!==1,onClick:t[14]||(t[14]=(...c)=>n.insertSpoiler&&n.insertSpoiler(...c)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},t[30]||(t[30]=[e("i",{class:"fas fa-eye-slash"},null,-1)]),8,Gl),e("button",{type:"button",class:"emoji-button-inline link-button",onClick:t[15]||(t[15]=(...c)=>n.insertLink&&n.insertLink(...c)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},t[31]||(t[31]=[e("i",{class:"fas fa-link"},null,-1)])),ge(k,{"is-visible":n.showEmojiPicker,onEmojiSelected:n.insertEmoji,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),ge(L,{"is-visible":n.showImagePicker,"current-user":d.currentUser,onImageSelected:n.insertImage,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:t[16]||(t[16]=()=>u.$router.push("/login"))},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose"]),ge(T,{"is-visible":n.showLinkModal,"selected-text":n.selectedTextForLink,onClose:n.closeLinkModal,onSubmit:n.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):y("",!0),d.comment.replies&&d.comment.replies.length>0?(l(),a("div",Yl,[e("button",{class:"collapse-toggle",title:n.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:t[17]||(t[17]=(...c)=>n.toggleCollapsed&&n.toggleCollapsed(...c))},[e("span",{class:C(["collapse-icon",{expanded:!n.isCollapsed}])},t[32]||(t[32]=[e("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},[e("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1)]),2),e("span",Xl,f(d.comment.replies.length)+" "+f(d.comment.replies.length===1?"–æ—Ç–≤–µ—Ç":"–æ—Ç–≤–µ—Ç–æ–≤"),1)],8,Zl),e("div",{class:"vertical-line-clickable",title:n.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:t[18]||(t[18]=(...c)=>n.toggleCollapsed&&n.toggleCollapsed(...c))},[e("div",{class:C(["vertical-line-visual",{collapsed:n.isCollapsed}])},null,2)],8,Ql),n.isCollapsed?y("",!0):(l(),a("div",Jl,[(l(!0),a(le,null,he(d.comment.replies,c=>(l(),nt(s,{key:c.id,comment:c,"current-user":d.currentUser,"reply-to":d.replyTo,"reply-content":d.replyContent,"editing-comment-id":d.editingCommentId,onReply:t[19]||(t[19]=_=>u.$emit("reply",_)),onStartEdit:t[20]||(t[20]=_=>u.$emit("start-edit",_)),onCancelEdit:t[21]||(t[21]=_=>u.$emit("cancel-edit")),onEdit:t[22]||(t[22]=(_,h)=>u.$emit("edit",_,h)),onDelete:t[23]||(t[23]=_=>u.$emit("delete",_)),onRate:t[24]||(t[24]=(_,h)=>u.$emit("rate",_,h)),onSubmitReply:t[25]||(t[25]=_=>u.$emit("submit-reply")),onCancelReply:t[26]||(t[26]=_=>u.$emit("cancel-reply")),onUpdateReplyContent:t[27]||(t[27]=_=>u.$emit("update-reply-content",_)),onReplyKeydown:t[28]||(t[28]=_=>u.$emit("reply-keydown",_))},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id"]))),128))]))])):y("",!0)])}const ti=Ye(Dl,[["render",ei],["__scopeId","data-v-6c0fc347"]]),ni={name:"Comments",components:{CommentThread:ti,Notification:Bt,EmojiPicker:Yt,ImagePicker:Zt,LinkModal:Xt},props:{movieId:{type:[String,Number],required:!0}},setup(u){const t=Wt(),d=Pt(),n=At(),E=m([]),I=m(""),g=m(null),k=m(""),L=m(null),T=m(t.user),s=m(null),c=m(null),_=m(n.isAutoShowComments),h=m(!1),j=m(3),P=m(n.commentsSortBy),S=m(P.value==="date"?"asc":"desc"),{showEmojiPicker:A,showImagePicker:b,showLinkModal:R,selectedTextForLink:x,handleEmojiMouseEnter:W,handleEmojiMouseLeave:q,handleImageMouseEnter:N,handleImageMouseLeave:B,handleButtonMouseEnter:J,handleImageButtonMouseEnter:Pe,handleButtonMouseLeave:Ie,closeEmojiPicker:He,closeImagePicker:H,closeLinkModal:ae,insertEmojiUniversal:X,insertImageUniversal:G,insertLinkUniversal:ke,insertLinkFromModalUniversal:de,insertSpoilerUniversal:be,autoResize:we}=Qt(),Ce=$(()=>{const U=(z=null)=>{const me=E.value.filter(Z=>Z.parent_id===z).filter(Z=>!Z.is_deleted||Z.replies&&Z.replies.length>0);let ce;return z===null?ce=me.sort((Z,pe)=>{if(P.value==="rating"){const te=Z.rating||0,Me=pe.rating||0;return te!==Me?S.value==="asc"?te-Me:Me-te:Z.id-pe.id}return S.value==="asc"?Z.id-pe.id:pe.id-Z.id}):ce=me.sort((Z,pe)=>Z.id-pe.id),ce.map(Z=>({...Z,replies:U(Z.id)}))};return U()}),Se=$(()=>{const U=z=>z.reduce((me,ce)=>me+1+U(ce.replies||[]),0);return U(Ce.value)}),ye=$(()=>Ce.value.slice(0,j.value)),Ze=$(()=>Ce.value.length>j.value),ee=$(()=>Ce.value.length-j.value),Ne=()=>{j.value=Ce.value.length},Xe=U=>{P.value===U?S.value=S.value==="asc"?"desc":"asc":(P.value=U,S.value=U==="date"?"asc":"desc",n.setCommentsSortBy(U))},Re=async()=>{try{const U=await Un(u.movieId);E.value=U}catch(U){console.error("Failed to load comments:",U),s.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.")}},Ae=async()=>{if(h.value)return;if(!t.token){s.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:M});return}if(T.value&&T.value.allow_comments!==1){s.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!I.value.replace(/\[spoiler\]\s*\[\/spoiler\]/g,"").replace(/\[img\]\s*\[\/img\]/g,"").replace(/\[link=[^\]]+\]\s*\[\/link\]/g,"").trim()){s.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º");return}if(I.value.length>1500){s.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await pn(u.movieId,I.value.trim()),I.value="",await Re(),_.value=!0,$e(()=>{c.value&&(c.value.focus(),c.value.style.height="auto"),setTimeout(()=>{const z=document.querySelectorAll(".comment-item[data-comment-id]");if(z.length>0){const me=Array.from(z).map(ce=>parseInt(ce.getAttribute("data-comment-id"))).filter(ce=>!isNaN(ce));if(me.length>0){const ce=Math.max(...me),Z=document.querySelector('[data-comment-id="'.concat(ce,'"]'));Z&&Z.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}},300)})}catch(z){console.error("Failed to create comment:",z),s.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},Ve=U=>{if(!t.token){s.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:M});return}L.value=null,g.value=U,k.value="",$e(()=>{const z=document.querySelector(".reply-form");z&&z.scrollIntoView({behavior:"smooth",block:"center"})})},st=async()=>{if(!t.token){s.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:M});return}if(T.value&&T.value.allow_comments!==1){s.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!(!k.value.trim()||!g.value)){if(k.value.length>1500){s.value.showNotification("–û—Ç–≤–µ—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await pn(u.movieId,k.value.trim(),g.value.id);const U=g.value.id;await Re(),k.value="",g.value=null,$e(()=>{setTimeout(()=>{const z=document.querySelector('[data-comment-id="'.concat(U,'"]'));if(z){const me=z.querySelector(".replies-content");if(me){const ce=me.querySelectorAll(".comment-item[data-comment-id]");if(ce.length>0){const Z=Array.from(ce).map(pe=>parseInt(pe.getAttribute("data-comment-id"))).filter(pe=>!isNaN(pe));if(Z.length>0){const pe=Math.max(...Z),te=document.querySelector('[data-comment-id="'.concat(pe,'"]'));te&&te.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}}}},300)})}catch(U){console.error("Error submitting reply:",U),s.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}}},lt=async(U,z)=>{if(!t.token){s.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:M});return}if(T.value&&T.value.allow_comments!==1){s.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(z.length>1500){s.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await Dn(U,z.trim()),await Re(),L.value=null}catch(me){console.error("Failed to update comment:",me),s.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},dt=async U=>{if(!t.token){s.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:M});return}try{await $n(U),await Re()}catch(z){console.error("Failed to delete comment:",z),s.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},xe=async(U,z)=>{if(!t.token){s.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:M});return}try{await Bn(U,z),await Re()}catch(me){console.error("Failed to rate comment:",me),s.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ü–µ–Ω–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},Fe=U=>{h.value||A.value||U.key==="Enter"&&!U.shiftKey&&(U.preventDefault(),Ae())},Oe=U=>{U.key==="Enter"&&!U.shiftKey&&(U.preventDefault(),st())},M=()=>{d.push("/login")},V=U=>{h.value=!0,X(U,c,I,z=>{I.value=z}),setTimeout(()=>{h.value=!1},100)},qe=U=>{G(U,c,I,z=>{I.value=z})},pt=()=>{be(c,I,U=>{I.value=U})},ft=()=>{ke(c,I,U=>{I.value=U})},it=U=>{de(U,c,I,z=>{I.value=z})},Ke=$(()=>T.value?T.value.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."),ze=$(()=>T.value?T.value.allow_comments===1:!0),ct=U=>{g.value=null,k.value="",L.value=U},vt=()=>{L.value=null};return ut(()=>{Re()}),{comments:E,groupedComments:Ce,displayedComments:ye,hasMoreComments:Ze,remainingCommentsCount:ee,showMoreComments:Ne,sortBy:P,setSortBy:Xe,sortDirection:S,newComment:I,replyTo:g,replyContent:k,editingCommentId:L,currentUser:T,notificationRef:s,commentTextarea:c,showComments:_,submitComment:Ae,handleReply:Ve,submitReply:st,handleEdit:lt,handleDelete:dt,handleRate:xe,handleCommentKeydown:Fe,handleReplyKeydown:Oe,autoResize:we,totalCommentsCount:Se,getCommentWordForm:al,showEmojiPicker:A,showImagePicker:b,showLinkModal:R,selectedTextForLink:x,insertEmoji:V,insertImage:qe,handleEmojiMouseEnter:W,handleEmojiMouseLeave:q,handleImageMouseEnter:N,handleImageMouseLeave:B,closeEmojiPicker:He,closeImagePicker:H,handleButtonMouseLeave:Ie,handleButtonMouseEnter:J,handleImageButtonMouseEnter:Pe,getCommentPlaceholder:Ke,canComment:ze,handleStartEdit:ct,handleCancelEdit:vt,insertSpoiler:pt,insertLink:ft,insertLinkFromModal:it,closeLinkModal:ae}}},oi={class:"comments-section"},si={class:"spoiler-content"},li={key:1,class:"comments-container"},ii={class:"comments-header"},ai={class:"comments-controls"},ri={class:"textarea-container"},ui=["placeholder","disabled"],di={class:"comment-footer"},ci={class:"comment-actions"},vi=["disabled"],mi={class:"character-counter-container"},fi=["disabled"],gi=["disabled"],ki=["disabled"],yi={class:"comments-list"},pi={key:0,class:"show-more-comments"};function hi(u,t,d,n,E,I){const g=je("EmojiPicker"),k=je("ImagePicker"),L=je("LinkModal"),T=je("CommentThread"),s=je("Notification");return l(),a("div",oi,[n.showComments?(l(),a("div",li,[e("div",ii,[e("div",ai,[e("button",{class:C(["sort-button",{active:n.sortBy==="date"}]),onClick:t[1]||(t[1]=c=>n.setSortBy("date")),title:"–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –¥–∞—Ç–µ"},[t[20]||(t[20]=e("i",{class:"fas fa-clock"},null,-1)),t[21]||(t[21]=Y(" –ü–æ –¥–∞—Ç–µ ")),n.sortBy==="date"?(l(),a("i",{key:0,class:C(["fas",n.sortDirection==="asc"?"fa-arrow-up":"fa-arrow-down"])},null,2)):y("",!0)],2),e("button",{class:C(["sort-button",{active:n.sortBy==="rating"}]),onClick:t[2]||(t[2]=c=>n.setSortBy("rating")),title:"–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É"},[t[22]||(t[22]=e("i",{class:"fas fa-thumbs-up"},null,-1)),t[23]||(t[23]=Y(" –ü–æ —Ä–µ–π—Ç–∏–Ω–≥—É ")),n.sortBy==="rating"?(l(),a("i",{key:0,class:C(["fas",n.sortDirection==="asc"?"fa-arrow-up":"fa-arrow-down"])},null,2)):y("",!0)],2)]),e("button",{class:"hide-comments-btn",onClick:t[3]||(t[3]=c=>n.showComments=!1)},t[24]||(t[24]=[e("i",{class:"fas fa-eye-slash"},null,-1),Y(" –°–∫—Ä—ã—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ")]))]),e("form",{class:"comment-form",onSubmit:t[13]||(t[13]=ot((...c)=>n.submitComment&&n.submitComment(...c),["prevent"]))},[e("div",ri,[Q(e("textarea",{ref:"commentTextarea","onUpdate:modelValue":t[4]||(t[4]=c=>n.newComment=c),class:"comment-textarea",placeholder:n.getCommentPlaceholder,disabled:n.currentUser&&n.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:t[5]||(t[5]=(...c)=>n.autoResize&&n.autoResize(...c)),onKeydown:t[6]||(t[6]=(...c)=>n.handleCommentKeydown&&n.handleCommentKeydown(...c))},null,40,ui),[[mt,n.newComment]])]),e("div",di,[e("div",ci,[e("button",{class:"submit-button",type:"submit",disabled:!n.newComment.trim()||n.newComment.length>1500||n.currentUser&&n.currentUser.allow_comments!==1}," –û—Ç–ø—Ä–∞–≤–∏—Ç—å ",8,vi)]),e("div",mi,[e("div",{class:C(["character-counter-inline",{"near-limit":n.newComment.length>1400,"at-limit":n.newComment.length>=1500}])},f(n.newComment.length)+"/1500 ",3),e("button",{type:"button",class:C(["emoji-button-inline",{active:n.showEmojiPicker}]),disabled:n.currentUser&&n.currentUser.allow_comments!==1,onMouseenter:t[7]||(t[7]=(...c)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...c)),onMouseleave:t[8]||(t[8]=(...c)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...c))}," üòä ",42,fi),e("button",{type:"button",class:C(["emoji-button-inline",{active:n.showImagePicker}]),disabled:n.currentUser&&n.currentUser.allow_comments!==1,onMouseenter:t[9]||(t[9]=(...c)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...c)),onMouseleave:t[10]||(t[10]=(...c)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...c))},t[25]||(t[25]=[Rt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-e82be516><g id="logo" data-v-e82be516><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-e82be516></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-e82be516></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-e82be516></path></g></svg>',1)]),42,gi),e("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:n.currentUser&&n.currentUser.allow_comments!==1,onClick:t[11]||(t[11]=(...c)=>n.insertSpoiler&&n.insertSpoiler(...c)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},t[26]||(t[26]=[e("i",{class:"fas fa-eye-slash"},null,-1)]),8,ki),e("button",{type:"button",class:"emoji-button-inline link-button",onClick:t[12]||(t[12]=(...c)=>n.insertLink&&n.insertLink(...c)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},t[27]||(t[27]=[e("i",{class:"fas fa-link"},null,-1)])),ge(g,{"is-visible":n.showEmojiPicker&&n.canComment,onEmojiSelected:n.insertEmoji,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),ge(k,{"is-visible":n.showImagePicker&&n.canComment,"current-user":n.currentUser,onImageSelected:n.insertImage,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:u.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),ge(L,{"is-visible":n.showLinkModal,"selected-text":n.selectedTextForLink,onClose:n.closeLinkModal,onSubmit:n.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])],32),e("div",yi,[(l(!0),a(le,null,he(n.displayedComments,c=>(l(),nt(T,{key:c.id,comment:c,"current-user":n.currentUser,"reply-to":n.replyTo,"reply-content":n.replyContent,"editing-comment-id":n.editingCommentId,"is-first-comment":!1,onReply:n.handleReply,onStartEdit:n.handleStartEdit,onCancelEdit:n.handleCancelEdit,onEdit:n.handleEdit,onDelete:n.handleDelete,onRate:n.handleRate,onSubmitReply:n.submitReply,onCancelReply:t[14]||(t[14]=_=>n.replyTo=null),onUpdateReplyContent:t[15]||(t[15]=_=>n.replyContent=_),onReplyKeydown:n.handleReplyKeydown},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id","onReply","onStartEdit","onCancelEdit","onEdit","onDelete","onRate","onSubmitReply","onReplyKeydown"]))),128)),n.hasMoreComments?(l(),a("div",pi,[e("button",{class:"show-more-btn",onClick:t[16]||(t[16]=(...c)=>n.showMoreComments&&n.showMoreComments(...c))}," –ü–æ–∫–∞–∑–∞—Ç—å –µ—â–µ "+f(n.remainingCommentsCount)+" "+f(n.getCommentWordForm(n.remainingCommentsCount)),1)])):y("",!0)])])):(l(),a("div",{key:0,class:"spoiler-warning",onClick:t[0]||(t[0]=c=>n.showComments=!0)},[e("div",si,[t[17]||(t[17]=e("i",{class:"fas fa-eye-slash"},null,-1)),t[18]||(t[18]=e("h3",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–∫—Ä—ã—Ç—ã",-1)),t[19]||(t[19]=e("p",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä—ã. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å.",-1)),e("div",{class:C(["comments-count",{"no-comments":n.totalCommentsCount===0}])},[n.totalCommentsCount===0?(l(),a(le,{key:0},[Y(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç ")],64)):(l(),a(le,{key:1},[Y(f(n.totalCommentsCount)+" "+f(n.getCommentWordForm(n.totalCommentsCount)),1)],64))],2)])])),ge(s,{ref:"notificationRef"},null,512)])}const bi=Ye(ni,[["render",hi],["__scopeId","data-v-e82be516"]]),wi={class:"movie-info"},Ci={class:"content"},_i={key:0,class:"content-card"},Mi={class:"movie-skeleton"},Ei={class:"movie-skeleton__player"},Li={key:2,class:"content-card"},Ii={key:3,class:"content-card"},Ti={class:"content-header"},Ri=["src"],Ai={class:"content-title"},Pi={key:0,class:"ratings-links"},Si={key:1},xi=["href","title"],ji={key:2},Ni=["href","title"],Ui={key:3},Bi=["href","title"],$i={key:4},Di=["href","title"],Hi={key:5},Vi=["href"],Fi=["title"],Oi={key:0,class:"fa-regular fa-face-grin-wink"},qi={key:1,class:"fas fa-spinner fa-spin"},Ki=["title"],zi={key:1,class:"mobile-list-dropdown"},Wi={class:"mobile-list-content"},Gi=["content"],Yi=["content"],Zi={class:"additional-info"},Xi={class:"info-content"},Qi={key:0,class:"movie-poster-container desktop-only"},Ji=["href"],ea=["src"],ta={class:"details-container"},na={class:"info-list"},oa={key:0},sa={key:1},la={key:2},ia={key:3},aa={key:4},ra={key:5},ua={key:6},da={key:7},ca={key:8},va={key:9,class:"rating-boxes"},ma={key:0,class:"rating-box mpaa"},fa={key:1,class:"rating-box age"},ga={class:"content-info"},ka={key:0,class:"content-description-text"},ya={key:3,class:"comments-section"},pa={key:4,class:"staff-section"},ha={class:"staff-categories"},ba={key:0,class:"staff-category"},wa={class:"staff-list"},Ca=["href","title"],_a=["src","alt"],Ma={class:"staff-name"},Ea={key:0,class:"staff-role"},La=["href","title"],Ia={key:1,class:"staff-category"},Ta={class:"staff-names-container"},Ra={class:"staff-names-list"},Aa=["href"],Pa=["href","title"],Sa={key:2,class:"staff-category"},xa={class:"staff-names-container"},ja={class:"staff-names-list"},Na=["href"],Ua=["href","title"],Ba={key:5,class:"yt-video-container"},$a={key:6,class:"related-movies"},Da=["title"],Ha={key:7,class:"related-movies"},Va=["title"],Fa={key:0,class:"nudity-info-popup"},Oa={class:"nudity-info-content"},qa={key:0,class:"nudity-info-loading"},Ka={key:1},za={class:"nudity-info-actions"},Wa=["href"],Ga={key:1,class:"nudity-info-popup"},Ya={class:"nudity-info-content"},Za={class:"timings-text"},Xa={key:0,class:"timing-entries"},Qa={class:"timing-content"},Ja={class:"timing-header-row",style:{display:"flex","align-items":"center",gap:"8px"}},er={key:0,class:"pending-badge"},tr={key:1,class:"clean-text-badge"},nr={key:0,class:"timing-actions-row",style:{display:"flex","align-items":"center",gap:"8px","margin-top":"8px"}},or=["onClick"],sr=["onClick"],lr=["onClick"],ir={class:"timing-text"},ar={class:"timing-author"},rr={key:1,style:{color:"#fff","font-size":"13px",margin:"4px 0 0 0"}},ur={key:0},dr={key:1},cr={key:1},vr={key:0,class:"general-parser-result",style:{"margin-top":"15px",padding:"15px",background:"rgba(255, 255, 255, 0.05)","border-radius":"8px"}},mr={style:{margin:"0 0 10px 0",color:"#fff"}},fr={style:{color:"#fff","font-size":"13px"}},gr={key:0},kr={key:1},yr={class:"nudity-info-actions"},pr={key:2,class:"timing-modal"},hr={class:"timing-modal-content"},br={class:"timing-modal-header"},wr={class:"timing-submission-form"},Cr={key:0,class:"timing-preview"},_r={class:"timing-preview-content"},Mr={class:"timing-preview-range"},Er={class:"timing-preview-duration"},Lr={class:"timing-form-actions"},Ir=["disabled"],Tr={key:0,class:"fas fa-spinner fa-spin"},Rr={key:1},Ar={class:"modal-header"},Pr={class:"modal-header-controls"},Sr={class:"modal-body"},xr=["disabled"],jr={key:0,class:"fas fa-spinner fa-spin"},Nr={key:1,class:"fas fa-list"},Ur={class:"top-submitters-list"},Br={class:"submitter-info"},$r={class:"submitter-name"},Dr=["href"],Hr={class:"submitter-count"},Vr={class:"submitter-contribution"},Fr={class:"modal-header"},Or={class:"modal-body"},qr={key:0,class:"timing-filters"},Kr={key:1,class:"loading-spinner"},zr={key:2,class:"no-timings"},Wr={key:3,class:"no-timings"},Gr={key:4,class:"all-timings-list"},Yr={class:"timing-header"},Zr={class:"timing-meta"},Xr={class:"timing-author"},Qr={class:"timing-date"},Jr={class:"timing-movie-info"},eu={key:0,class:"admin-controls"},tu=["onClick","disabled"],nu={key:0,class:"fas fa-spinner fa-spin"},ou={key:1,class:"fas fa-check"},su=["onClick","disabled"],lu={key:0,class:"fas fa-spinner fa-spin"},iu={key:1,class:"fas fa-times"},au=["onClick","disabled"],ru={key:0,class:"fas fa-spinner fa-spin"},uu={key:1,class:"fas fa-eye-slash"},du={class:"timing-content"},cu={class:"timing-text"},vu={__name:"MovieInfo",setup(u){const t=m(!0),d=At(),n=Wt(),E=Hn(),I=En(),g=Pt(),k=m(I.params.kp_id),L=m(""),T=m(null),s=m(null),c=Vn(),_=to(),h=m(null),j=$(()=>_.areTrailersActive),P=m(null),S=m(!1),A=m(!1),b=m(10),R=m(null),x=m(!1),W=m(null),q=m(!1),N=m(void 0),B=m(null),J=m(new Set),Pe=m(!1),Ie=$(()=>{var i;return((i=s.value)==null?void 0:i.nudity_timings.length)>0}),He=$(()=>{var i;return((i=s.value)==null?void 0:i.nudity_timings.length)>0&&d.isStreamerMode&&!d.isMobile}),H=$(()=>{var i,o,w,F,ne,re,oe,ue,_e,se;return((o=(i=s.value)==null?void 0:i.lists)==null?void 0:o.isFavorite)||((F=(w=s.value)==null?void 0:w.lists)==null?void 0:F.isWatching)||((re=(ne=s.value)==null?void 0:ne.lists)==null?void 0:re.isLater)||((ue=(oe=s.value)==null?void 0:oe.lists)==null?void 0:ue.isCompleted)||((se=(_e=s.value)==null?void 0:_e.lists)==null?void 0:se.isAbandoned)}),ae=$(()=>d.isCommentsEnabled),X=()=>{if(s.value){const i=s.value.name_ru||s.value.name_en||s.value.name_original||"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å–º–µ";document.title=i}},G=i=>i?i.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",ke=i=>(i||[]).map(o=>({kp_id:o.film_id,poster:o.poster_url_preview||o.poster_url,title:o.name_ru||o.name_en||o.name_original})),de=i=>{if(typeof i!="number")return;const o=Math.floor(i/60),w=i%60;return"".concat(o," —á. ").concat(w," –º–∏–Ω.")},be=m(!1),we=m({top:"0px",left:"0px"}),Ce=i=>{be.value=!0,we.value={top:"".concat(i.pageY+10,"px"),left:"".concat(i.pageX-70,"px")}},Se=async()=>{try{const i=[s.value.name_ru||s.value.name_en||s.value.name_original,...s.value.year?[s.value.year]:[],...s.value.film_length?[de(s.value.film_length)]:[]];await navigator.clipboard.writeText(i.join(", ")),h.value.showNotification("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ")}catch(i){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",i)}},ye=async(i=!0)=>{var o,w,F,ne,re,oe,ue,_e;try{let se;if(k.value.startsWith("shiki")?se=await Fn(k.value):se=await On(k.value,n.token),Array.isArray(se)&&se.length===0)throw new Error("–î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–∏—Å–∫.");s.value=se,k.value.startsWith("shiki")?s.value={...s.value,title:s.value.name_ru||s.value.name_en,name_original:s.value.name_en,short_description:s.value.slogan}:s.value={...s.value,title:s.value.name_ru||s.value.name_en||s.value.name_original,kinopoisk_id:k.value},c.setHeaderContent({text:s.value.title,imageUrl:s.value.logo_url}),X();const ie={kp_id:k.value,title:((o=s.value)==null?void 0:o.name_ru)||((w=s.value)==null?void 0:w.name_en)||((F=s.value)==null?void 0:F.name_original),poster:((ne=s.value)==null?void 0:ne.poster_url)||((re=s.value)==null?void 0:re.cover_url)||((oe=s.value)==null?void 0:oe.screenshots[0]),year:(ue=s.value)==null?void 0:ue.year,type:(_e=s.value)==null?void 0:_e.type};if(k.value.startsWith("shiki"))if(s.value.screenshots&&s.value.screenshots.length>0){const Te=Math.floor(Math.random()*s.value.screenshots.length),et=s.value.screenshots[Te];E.updateMoviePoster(et)}else ie.poster&&E.updateMoviePoster(ie.poster);else ie.poster&&E.updateMoviePoster(ie.poster);if($(()=>d.isHistoryAllowed).value&&ie.kp_id&&ie.title&&i)if(n.token)try{await Kt(ie.kp_id,O.HISTORY)}catch(Te){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é:",Te)}else d.addToHistory({...ie})}catch(se){const{message:ie,code:Ee}=tt(se);L.value=ie,T.value=Ee,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–ª—å–º–∞—Ö:",se)}},Ze=$(()=>{var i,o;return console.log("–¢—Ä–µ–π–ª–µ—Ä—ã:",(i=s.value)==null?void 0:i.videos),(o=s.value)==null?void 0:o.videos}),ee=$(()=>{var i;return ke((i=s.value)==null?void 0:i.sequels_and_prequels)}),Ne=$(()=>{var i;return ke((i=s.value)==null?void 0:i.similars)}),Xe=()=>{var F;const i=((F=document.querySelector(".related-movies"))==null?void 0:F.clientWidth)||0,w=Math.floor(i/160)||10;b.value=Math.max(1,w)},Re=()=>{Xe()},Ae=i=>{if(i.altKey&&i.keyCode===84&&document.querySelector(".player-container")){const w=document.querySelector(".theater-mode-btn");w&&w.click()}},Ve=i=>{i.button===1&&(i.preventDefault(),st(i))},st=async i=>{if(R.value!==null){R.value=null,x.value=!1;return}N.value=void 0,W.value=i.currentTarget,R.value="",x.value=!0;try{const o=await qn(s.value.imdb_id);R.value=o.nudity_info}catch(o){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö:",o),R.value="–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ Parents Guide –Ω–∞ IMDb –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏."}finally{x.value=!1}},lt=i=>{var o,w;if(R.value=null,N.value!==void 0){N.value=void 0;return}B.value=i.currentTarget,N.value=((o=s.value)==null?void 0:o.nudity_timings)===null?"":((w=s.value)==null?void 0:w.nudity_timings)||""},dt=i=>{var w,F,ne,re,oe,ue,_e,se,ie,Ee,Te,et,at;return(at={[O.FAVORITE]:((F=(w=s.value)==null?void 0:w.lists)==null?void 0:F.isFavorite)||!1,[O.HISTORY]:((re=(ne=s.value)==null?void 0:ne.lists)==null?void 0:re.isHistory)||!1,[O.LATER]:((ue=(oe=s.value)==null?void 0:oe.lists)==null?void 0:ue.isLater)||!1,[O.COMPLETED]:((se=(_e=s.value)==null?void 0:_e.lists)==null?void 0:se.isCompleted)||!1,[O.ABANDONED]:((Ee=(ie=s.value)==null?void 0:ie.lists)==null?void 0:Ee.isAbandoned)||!1,[O.WATCHING]:((et=(Te=s.value)==null?void 0:Te.lists)==null?void 0:et.isWatching)||!1}[i])!=null?at:!1},xe=async i=>{if(!n.token){h.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:()=>g.push("/login")});return}try{const o={[O.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[O.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[O.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[O.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[O.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[O.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};dt(i)?(await In(k.value,i),h.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(o[i]))):(await Kt(k.value,i),h.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(o[i]))),await ye(!1),q.value=!1}catch(o){const{message:w,code:F}=tt(o);h.value.showNotification("".concat(w," ").concat(F))}},Fe=i=>{const o=document.querySelector(".mobile-list-dropdown");o&&!o.contains(i.target)&&(q.value=!1)},Oe=i=>{const o=document.querySelector(".nudity-info-popup");o&&!o.contains(i.target)&&W.value&&!W.value.contains(i.target)&&(R.value=null)},M=i=>{const o=document.querySelector(".nudity-info-popup");o&&!o.contains(i.target)&&B.value&&!B.value.contains(i.target)&&(N.value=void 0)};ut(async()=>{await ye(),t.value=!1,document.addEventListener("keydown",Ae),window.addEventListener("resize",Re),setTimeout(Xe,100),document.addEventListener("click",Fe),document.addEventListener("click",Oe,!0),document.addEventListener("click",M,!0),window.selectedNudityTimings=Array.from(J.value)}),hn(async()=>{c.clearHeaderContent(),document.removeEventListener("keydown",Ae),window.removeEventListener("resize",Re),document.removeEventListener("click",Fe),document.removeEventListener("click",Oe,!0),document.removeEventListener("click",M,!0),delete window.selectedNudityTimings}),De(()=>I.params.kp_id,async i=>{i&&i!==k.value&&(c.clearHeaderContent(),k.value=i,P.value=null,await ye(),t.value=!1)},{immediate:!0}),De(s,()=>{X()},{deep:!0}),De(R,i=>{i?document.addEventListener("click",Oe,!0):document.removeEventListener("click",Oe,!0)},{deep:!0}),De(N,i=>{i?document.addEventListener("click",M,!0):document.removeEventListener("click",M,!0)},{deep:!0}),De(J,()=>{window.selectedNudityTimings=Array.from(J.value)},{deep:!0}),ut(()=>{window.selectedNudityTimings=Array.from(J.value)}),hn(()=>{delete window.selectedNudityTimings});const V=i=>{var o,w;return((w=(o=s.value)==null?void 0:o.staff)==null?void 0:w.filter(F=>F.profession_key===i))||[]},qe=async()=>{try{await navigator.clipboard.writeText(R.value),h.value.showNotification("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω")}catch(i){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",i),h.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞")}finally{R.value=null}},pt=async()=>{if(N.value.length!==0)try{const i=N.value.map(o=>"".concat(o.timing_text," (by @").concat(o.username,")")).join("\n").concat("\nReYohoho\n");await navigator.clipboard.writeText(i),h.value.showNotification("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω")}catch(i){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",i),h.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞")}finally{N.value=void 0}},ft=()=>{const i=encodeURIComponent(R.value);window.open("https://translate.google.com/?sl=en&tl=ru&text=".concat(i),"_blank"),R.value=null},it=$({get:()=>d.submitterUsername,set:i=>d.setSubmitterUsername(i)}),Ke=m(""),ze=m(!1),ct=$(()=>{if(!Ke.value.trim())return[];try{return Ut(Ke.value,!0)||[]}catch(i){return console.error("Error parsing timing text:",i),[]}}),vt=$(()=>it.value.trim()&&Ke.value.trim()),U=async()=>{if(!(!vt.value||ze.value))try{ze.value=!0,await zn(k.value,it.value.trim(),Ke.value),h.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é, —Å–ø–∞—Å–∏–±–æ!"),Ke.value="",me.value=!1}catch(i){const{message:o}=tt(i);h.value.showNotification(o,5e3)}finally{ze.value=!1}},z=async()=>{try{const{submissions:i}=await Kn();ce.value=i,Z.value=!0}catch(i){const{message:o}=tt(i);h.value.showNotification(o)}},me=m(!1),ce=m([]),Z=m(!1),pe=m(!1),te=m([]),Me=m(!1),Ue=m(!1),We=m(null),Qe=m(!1),Je=m(!1),Be=m("all"),St=async i=>{if(!Ue.value)try{Ue.value=!0,We.value=i,Qe.value=!0,Je.value=!1,await Gn(i);const o=te.value.find(w=>w.id===i);o&&(o.status="approved"),h.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ–¥–æ–±—Ä–µ–Ω")}catch(o){const{message:w}=tt(o);h.value.showNotification("–û—à–∏–±–∫–∞: ".concat(w))}finally{Ue.value=!1,We.value=null,Qe.value=!1,Je.value=!1}},$t=async i=>{if(!Ue.value)try{Ue.value=!0,We.value=i,Qe.value=!1,Je.value=!1,await Yn(i);const o=te.value.find(w=>w.id===i);o&&(o.status="rejected"),h.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ—Ç–∫–ª–æ–Ω–µ–Ω")}catch(o){const{message:w}=tt(o);h.value.showNotification("–û—à–∏–±–∫–∞: ".concat(w))}finally{Ue.value=!1,We.value=null,Qe.value=!1,Je.value=!1}},Dt=async i=>{if(!Ue.value)try{Ue.value=!0,We.value=i,Qe.value=!1,Je.value=!0,await Zn(i);const o=te.value.find(w=>w.id===i);o&&(o.status="clean_text"),h.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ—Ç–º–µ—á–µ–Ω –∫–∞–∫ clean_text")}catch(o){const{message:w}=tt(o);h.value.showNotification("–û—à–∏–±–∫–∞: ".concat(w))}finally{Ue.value=!1,We.value=null,Qe.value=!1,Je.value=!1}},xt=async()=>{if(!Me.value)try{Me.value=!0,pe.value=!0;const{timings:i}=await Wn();te.value=i}catch(i){const{message:o}=tt(i);h.value.showNotification(o),pe.value=!1}finally{Me.value=!1}},Ht=i=>({pending:"–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏",approved:"–û–¥–æ–±—Ä–µ–Ω–æ",rejected:"–û—Ç–∫–ª–æ–Ω–µ–Ω–æ",clean_text:"–ù–µ –º–æ–¥–µ—Ä–∏—Ä—É–µ—Ç—Å—è"})[i]||i,Vt=(i,o)=>{const w=[2,0,1,1,1,2];return o[i%100>4&&i%100<20?2:w[Math.min(i%10,5)]]},gt=i=>{if(!ce.value.length)return 0;const o=Math.max(...ce.value.map(w=>w.approved_submissions_count));return i/o*100},jt=$(()=>Be.value==="all"?te.value:te.value.filter(i=>i.status===Be.value)),Nt=i=>{J.value.has(i)?J.value.delete(i):J.value.add(i)},ve=m({});function Ft(i){if(ve.value[i.id])ve.value={...ve.value,[i.id]:!1};else{const o=Ut(i.timing_text,!0);ve.value={...ve.value,[i.id]:o}}}const kt=$(()=>!!window.electronAPI);function Ot(i){if(!kt.value){h.value?h.value.showNotification("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"):alert("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏");return}Nt(i)}function qt(i){if(!kt.value){h.value?h.value.showNotification("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"):alert("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏");return}Nt(i)}function p(){Pe.value=!Pe.value}function r(){const i=[];if(N.value&&Array.isArray(N.value)){for(const o of N.value)if(J.value.has(o.id)){const w=Ut(o.timing_text,!0);w&&w.length>0&&i.push(...w)}}return i}return(i,o)=>{var F,ne,re,oe,ue,_e,se,ie,Ee,Te,et,at,ht,bt,wt,Ct,_t,Mt;const w=je("router-link");return l(),a(le,null,[e("div",wi,[e("div",Ci,[(t.value||!s.value)&&!L.value?(l(),a("div",_i,[e("div",Mi,[o[27]||(o[27]=Rt('<div class="movie-skeleton__header" data-v-c44443f1><div class="movie-skeleton__title" data-v-c44443f1></div></div><div class="movie-skeleton__ratings" data-v-c44443f1><div class="movie-skeleton__rating-item" data-v-c44443f1></div><div class="movie-skeleton__rating-item" data-v-c44443f1></div><div class="movie-skeleton__rating-item" data-v-c44443f1></div></div>',2)),e("div",Ei,[ge(An)]),o[28]||(o[28]=Rt('<div class="movie-skeleton__additional-info" data-v-c44443f1><div class="movie-skeleton__section-title" data-v-c44443f1></div><div class="movie-skeleton__info-list" data-v-c44443f1><div class="movie-skeleton__info-item" data-v-c44443f1></div><div class="movie-skeleton__info-item" data-v-c44443f1></div><div class="movie-skeleton__info-item" data-v-c44443f1></div><div class="movie-skeleton__info-item" data-v-c44443f1></div><div class="movie-skeleton__info-item" data-v-c44443f1></div></div></div><div class="movie-skeleton__description" data-v-c44443f1><div class="movie-skeleton__description-line" data-v-c44443f1></div><div class="movie-skeleton__description-line" data-v-c44443f1></div><div class="movie-skeleton__description-line" data-v-c44443f1></div><div class="movie-skeleton__description-line" data-v-c44443f1></div></div>',2))])])):y("",!0),L.value?(l(),nt(Ln,{key:1,message:L.value,code:T.value},null,8,["message","code"])):y("",!0),L.value?(l(),a("div",Li,[(l(),nt(Mn,{key:k.value,"kp-id":k.value,"movie-info":s.value,"onUpdate:movieInfo":ye},null,8,["kp-id","movie-info"]))])):y("",!0),s.value&&!t.value?(l(),a("div",Ii,[e("div",Ti,[s.value.logo_url?(l(),a("div",{key:0,class:"content-logo",onMousemove:Ce,onMouseleave:o[0]||(o[0]=v=>be.value=!1),onClick:Se},[e("img",{src:s.value.logo_url,alt:"–õ–æ–≥–æ—Ç–∏–ø —Ñ–∏–ª—å–º–∞",class:"content-logo"},null,8,Ri)],32)):(l(),a("div",{key:1,onMousemove:Ce,onMouseleave:o[1]||(o[1]=v=>be.value=!1),onClick:Se},[e("h1",Ai,f(s.value.title),1)],32)),Q(e("div",{class:"title-copy-tooltip",style:Tt(we.value)}," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ",4),[[fe,be.value]])]),s.value.kinopoisk_id||s.value.title||s.value.imdb_id||s.value.rating_imdb||s.value.shikimori_id?(l(),a("div",Pi,[s.value.kinopoisk_id?(l(),nt(Is,{key:s.value.kinopoisk_id,"kp-id":s.value.kinopoisk_id,"show-dash":!0},null,8,["kp-id"])):y("",!0),s.value.kinopoisk_id?(l(),a("div",Si,[e("a",{href:"https://www.kinopoisk.ru/film/".concat(s.value.kinopoisk_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:s.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(G(s.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[o[29]||(o[29]=e("img",{src:wn,alt:"–ö–ü",class:"rating-logo"},null,-1)),e("span",{class:C(["rating-value",K(It)(s.value.rating_kinopoisk)])},f(s.value.rating_kinopoisk?s.value.rating_kinopoisk:"‚Äî"),3),o[30]||(o[30]=e("img",{src:Lt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,xi)])):y("",!0),!s.value.kinopoisk_id&&s.value.title?(l(),a("div",ji,[e("a",{href:"https://www.kinopoisk.ru/index.php?kp_query=".concat(encodeURIComponent(s.value.title+(s.value.year?" "+s.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:s.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(G(s.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[o[31]||(o[31]=e("img",{src:wn,alt:"–ö–ü",class:"rating-logo"},null,-1)),e("span",{class:C(["rating-value",K(It)(s.value.rating_kinopoisk)])},f(s.value.rating_kinopoisk?s.value.rating_kinopoisk:"‚Äî"),3),o[32]||(o[32]=e("img",{src:Lt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Ni)])):y("",!0),s.value.imdb_id?(l(),a("div",Ui,[e("a",{href:"https://www.imdb.com/title/".concat(s.value.imdb_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:s.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(G(s.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[o[33]||(o[33]=e("img",{src:Cn,alt:"IMDb",class:"rating-logo"},null,-1)),e("span",{class:C(["rating-value",K(It)(s.value.rating_imdb)])},f(s.value.rating_imdb?s.value.rating_imdb:"‚Äî"),3),o[34]||(o[34]=e("img",{src:Lt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Bi)])):y("",!0),!s.value.imdb_id&&s.value.title?(l(),a("div",$i,[e("a",{href:"https://www.imdb.com/find/?q=".concat(encodeURIComponent(s.value.title+(s.value.year?" "+s.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:s.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(G(s.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[o[35]||(o[35]=e("img",{src:Cn,alt:"IMDb",class:"rating-logo"},null,-1)),e("span",{class:C(["rating-value",K(It)(s.value.rating_imdb)])},f(s.value.rating_imdb?s.value.rating_imdb:"‚Äî"),3),o[36]||(o[36]=e("img",{src:Lt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Di)])):y("",!0),s.value.shikimori_id?(l(),a("div",Hi,[e("a",{href:"https://shikimori.one/animes/".concat(s.value.shikimori_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},o[37]||(o[37]=[e("img",{src:no,alt:"Shiki",class:"rating-logo"},null,-1),e("img",{src:Lt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,Vi)])):y("",!0),s.value.imdb_id?(l(),a("button",{key:6,class:"nudity-info-btn parents-guide-btn",onClick:o[2]||(o[2]=v=>st(v)),onMousedown:o[3]||(o[3]=v=>Ve(v)),title:R.value?"–°–∫—Ä—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é":"–ü–æ–∫–∞–∑–∞—Ç—å Parents Guide –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ü–µ–Ω–∞—Ö"},[o[38]||(o[38]=e("span",{class:"desktop-text"},"Parents Guide",-1)),o[39]||(o[39]=e("span",{class:"mobile-text"},"PG",-1)),x.value?(l(),a("i",qi)):(l(),a("i",Oi))],40,Fi)):y("",!0),e("button",{class:"nudity-info-btn",onClick:o[4]||(o[4]=v=>lt(v)),title:N.value!==void 0?"–°–∫—Ä—ã—Ç—å —Ç–∞–π–º–∏–Ω–≥–∏":"–ü–æ–∫–∞–∑–∞—Ç—å —Ç–∞–π–º–∏–Ω–≥–∏ —Å—Ü–µ–Ω 18+(–¥–ª—è —Ç–≤–∏—á–∞, –º–∏–≥–∞–Ω–∏–µ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö)"},[e("i",{class:C(["fa-regular fa-clock",{"text-red":Ie.value,"text-red-blink":He.value}])},null,2)],8,Ki)])):y("",!0),(l(),nt(Mn,{key:k.value,"kp-id":k.value,"movie-info":s.value,"onUpdate:movieInfo":ye},null,8,["kp-id","movie-info"])),K(d).isMobile?(l(),a("div",zi,[e("button",{class:C(["mobile-list-toggle",{}]),onClick:o[5]||(o[5]=v=>q.value=!q.value)},[e("span",{class:C(["material-icons",{active:H.value}])},f(H.value?"bookmark_added":"bookmark_border"),3),o[40]||(o[40]=e("span",{class:"button-label"},"–î–æ–±–∞–≤–∏—Ç—å –≤ —Å–ø–∏—Å–æ–∫",-1)),e("span",{class:C(["material-icons dropdown-arrow",{expanded:q.value}])},"expand_more",2)]),Q(e("div",Wi,[e("button",{class:C(["mobile-list-btn",{}]),onClick:o[6]||(o[6]=v=>xe(K(O).FAVORITE))},[e("span",{class:C(["material-icons",{active:(ne=(F=s.value)==null?void 0:F.lists)==null?void 0:ne.isFavorite}])},f((oe=(re=s.value)==null?void 0:re.lists)!=null&&oe.isFavorite?"favorite":"favorite_border"),3),o[41]||(o[41]=e("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))]),e("button",{class:C(["mobile-list-btn",{}]),onClick:o[7]||(o[7]=v=>xe(K(O).WATCHING))},[e("span",{class:C(["material-icons",{active:(_e=(ue=s.value)==null?void 0:ue.lists)==null?void 0:_e.isWatching}])},f((ie=(se=s.value)==null?void 0:se.lists)!=null&&ie.isWatching?"visibility":"visibility_off"),3),o[42]||(o[42]=e("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))]),e("button",{class:C(["mobile-list-btn",{}]),onClick:o[8]||(o[8]=v=>xe(K(O).LATER))},[e("span",{class:C(["material-icons",{active:(Te=(Ee=s.value)==null?void 0:Ee.lists)==null?void 0:Te.isLater}])},"watch_later",2),o[43]||(o[43]=e("span",{class:"button-label"},"–ü–æ–∑–∂–µ",-1))]),e("button",{class:C(["mobile-list-btn",{}]),onClick:o[9]||(o[9]=v=>xe(K(O).COMPLETED))},[e("span",{class:C(["material-icons",{active:(at=(et=s.value)==null?void 0:et.lists)==null?void 0:at.isCompleted}])},f((bt=(ht=s.value)==null?void 0:ht.lists)!=null&&bt.isCompleted?"check_circle":"check_circle_outline"),3),o[44]||(o[44]=e("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))]),e("button",{class:C(["mobile-list-btn",{}]),onClick:o[10]||(o[10]=v=>xe(K(O).ABANDONED))},[e("span",{class:C(["material-icons",{active:(Ct=(wt=s.value)==null?void 0:wt.lists)==null?void 0:Ct.isAbandoned}])},"not_interested",2),o[45]||(o[45]=e("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))])],512),[[fe,q.value]])])):y("",!0),e("meta",{name:"title-and-year",content:s.value.type==="FILM"&&s.value.year?"".concat(s.value.title," (").concat(s.value.year,")"):s.value.title},null,8,Gi),s.value.name_original?(l(),a("meta",{key:2,name:"original-title",content:s.value.name_original},null,8,Yi)):y("",!0),e("div",Zi,[o[56]||(o[56]=e("h2",{class:"additional-info-title"},"–ü–æ–¥—Ä–æ–±–Ω–µ–µ",-1)),e("div",Xi,[s.value.poster_url?(l(),a("div",Qi,[e("a",{href:s.value.poster_url,target:"_blank",rel:"noopener noreferrer"},[e("img",{src:s.value.poster_url,alt:"–ü–æ—Å—Ç–µ—Ä —Ñ–∏–ª—å–º–∞",class:"movie-poster"},null,8,ea)],8,Ji)])):y("",!0),e("div",ta,[e("ul",na,[s.value.type&&K(bn)[s.value.type]?(l(),a("li",oa,[o[46]||(o[46]=e("strong",null,"–¢–∏–ø:",-1)),Y(" "+f(K(bn)[s.value.type]),1)])):y("",!0),s.value.year?(l(),a("li",sa,[o[47]||(o[47]=e("strong",null,"–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞:",-1)),Y(" "+f(s.value.year),1)])):y("",!0),s.value.title?(l(),a("li",la,[o[48]||(o[48]=e("strong",null,"–ù–∞–∑–≤–∞–Ω–∏–µ:",-1)),Y(" "+f(s.value.title),1)])):y("",!0),s.value.name_original?(l(),a("li",ia,[o[49]||(o[49]=e("strong",null,"–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:",-1)),Y(" "+f(s.value.name_original),1)])):y("",!0),s.value.slogan?(l(),a("li",aa,[o[50]||(o[50]=e("strong",null,"–°–ª–æ–≥–∞–Ω:",-1)),Y(" "+f(s.value.slogan),1)])):y("",!0),s.value.production_companies?(l(),a("li",ra,[o[51]||(o[51]=e("strong",null,"–ü—Ä–æ–¥–∞–∫—à–Ω:",-1)),Y(" "+f(s.value.production_companies),1)])):y("",!0),(_t=s.value.countries)!=null&&_t.length?(l(),a("li",ua,[o[52]||(o[52]=e("strong",null,"–°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞:",-1)),Y(" "+f(s.value.countries.map(v=>v.country).join(", ")),1)])):y("",!0),(Mt=s.value.genres)!=null&&Mt.length?(l(),a("li",da,[o[53]||(o[53]=e("strong",null,"–ñ–∞–Ω—Ä—ã:",-1)),Y(" "+f(s.value.genres.map(v=>v.genre).join(", ")),1)])):y("",!0),s.value.film_length?(l(),a("li",ca,[o[54]||(o[54]=e("strong",null,"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:",-1)),Y(" "+f(de(s.value.film_length)),1)])):y("",!0),s.value.rating_mpaa||s.value.rating_age_limits?(l(),a("li",va,[s.value.rating_mpaa?(l(),a("div",ma,[o[55]||(o[55]=e("strong",null,"MPAA",-1)),e("span",null,f(s.value.rating_mpaa.toUpperCase()),1)])):y("",!0),s.value.rating_age_limits?(l(),a("div",fa,[e("strong",null,f(s.value.rating_age_limits.replace("age",""))+"+",1)])):y("",!0)])):y("",!0)]),e("div",ga,[s.value.description?(l(),a("p",ka,f(s.value.description),1)):y("",!0)])])])]),ae.value?(l(),a("div",ya,[(l(),nt(bi,{"movie-id":k.value,key:k.value},null,8,["movie-id"]))])):y("",!0),s.value.staff?(l(),a("div",pa,[e("div",ha,[V("ACTOR").length?(l(),a("div",ba,[o[57]||(o[57]=e("h3",{class:"additional-info-title"},"–ê–∫—Ç—ë—Ä—ã",-1)),e("div",wa,[(l(!0),a(le,null,he(V("ACTOR").slice(0,12),v=>(l(),a("div",{key:v.staff_id,class:"staff-item"},[e("a",{href:"https://www.kinopoisk.ru/name/".concat(v.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-link",title:v.description||""},[e("img",{src:v.poster_url,alt:v.name_ru,class:"staff-photo"},null,8,_a),e("span",Ma,f(v.name_ru||v.name_en),1),v.description?(l(),a("span",Ea,f(v.description),1)):y("",!0)],8,Ca)]))),128)),e("a",{class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(k.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(V("ACTOR").length," –∞–∫—Ç–µ—Ä–æ–≤")}," +"+f(V("ACTOR").length-12),9,La)])])):y("",!0),V("DIRECTOR").length?(l(),a("div",Ia,[o[58]||(o[58]=e("h3",{class:"additional-info-title"},"–†–µ–∂–∏—Å—Å—ë—Ä—ã",-1)),e("div",Ta,[e("div",Ra,[(l(!0),a(le,null,he(V("DIRECTOR").slice(0,5),v=>(l(),a("a",{key:v.staff_id,href:"https://www.kinopoisk.ru/name/".concat(v.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},f(v.name_ru||v.name_en),9,Aa))),128)),V("DIRECTOR").length>5?(l(),a("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(k.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(V("DIRECTOR").length," —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–≤")}," +"+f(V("DIRECTOR").length-5),9,Pa)):y("",!0)])])])):y("",!0),V("PRODUCER").length?(l(),a("div",Sa,[o[59]||(o[59]=e("h3",{class:"additional-info-title"},"–ü—Ä–æ–¥—é—Å–µ—Ä—ã",-1)),e("div",xa,[e("div",ja,[(l(!0),a(le,null,he(V("PRODUCER").slice(0,5),v=>(l(),a("a",{key:v.staff_id,href:"https://www.kinopoisk.ru/name/".concat(v.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},f(v.name_ru||v.name_en),9,Na))),128)),V("PRODUCER").length>5?(l(),a("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(k.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(V("PRODUCER").length," –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤")}," +"+f(V("PRODUCER").length-5),9,Ua)):y("",!0)])])])):y("",!0)])])):y("",!0),Ze.value.length&&j.value?(l(),a("div",Ba,[ge(ys,{videos:Ze.value,"active-video-index":P.value,onSelect:i.playTrailer},null,8,["videos","active-video-index","onSelect"])])):y("",!0),ee.value.length?(l(),a("div",$a,[o[60]||(o[60]=e("h2",null,"–°–∏–∫–≤–µ–ª—ã –∏ –ø—Ä–∏–∫–≤–µ–ª—ã",-1)),ge(K(_n),{"movies-list":S.value?ee.value:ee.value.slice(0,b.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),ee.value.length>b.value?(l(),a("a",{key:0,class:"expand-circle-button",onClick:o[11]||(o[11]=v=>S.value=!S.value),title:"".concat(S.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(ee.value.length,")")},f(S.value?"‚àí":"+".concat(ee.value.length-b.value)),9,Da)):y("",!0)])):y("",!0),Ne.value.length?(l(),a("div",Ha,[o[61]||(o[61]=e("h2",null,"–ü–æ—Ö–æ–∂–∏–µ",-1)),ge(K(_n),{"movies-list":A.value?Ne.value:Ne.value.slice(0,b.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),Ne.value.length>b.value?(l(),a("a",{key:0,class:"expand-circle-button",onClick:o[12]||(o[12]=v=>A.value=!A.value),title:"".concat(A.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(Ne.value.length,")")},f(A.value?"‚àí":"+".concat(Ne.value.length-b.value)),9,Va)):y("",!0)])):y("",!0)])):y("",!0)])]),ge(Bt,{ref_key:"notificationRef",ref:h},null,512),R.value!==null?(l(),a("div",Fa,[e("div",Oa,[x.value?(l(),a("div",qa,o[62]||(o[62]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),e("span",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏...",-1)]))):(l(),a("div",Ka,f(R.value),1))]),e("div",za,[e("a",{href:"https://www.imdb.com/title/".concat(s.value.imdb_id,"/parentalguide"),target:"_blank",rel:"noopener noreferrer",class:"nudity-info-button"},o[63]||(o[63]=[e("i",{class:"fas fa-external-link-alt"},null,-1),e("span",null,"Parents Guide",-1)]),8,Wa),e("button",{class:"nudity-info-button",onClick:qe},o[64]||(o[64]=[e("i",{class:"fas fa-copy"},null,-1),e("span",null,"Copy",-1)])),e("button",{class:"nudity-info-button",onClick:ft},o[65]||(o[65]=[e("i",{class:"fas fa-language"},null,-1),e("span",null,"Translate",-1)]))])])):y("",!0),N.value!==void 0?(l(),a("div",Ga,[e("div",Ya,[e("div",{class:"acknowledgment-table"},[o[68]||(o[68]=e("div",{class:"acknowledgment-header"},[e("i",{class:"fa-solid fa-heart"}),e("span",null,"–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏")],-1)),e("div",{class:"acknowledgment-content"},[o[67]||(o[67]=e("div",{class:"acknowledgment-row"},[e("a",{href:"https://www.twitch.tv/tanyabelkova",target:"_blank",rel:"noopener noreferrer",class:"twitch-link"},[e("i",{class:"fa-brands fa-twitch"}),e("span",null,"TanyaBelkova")]),e("span",{class:"acknowledgment-text"},"‚Äî –∑–∞ –æ—Å–Ω–æ–≤—É –±–∞–∑—ã —Ç–∞–π–º–∏–Ω–≥–æ–≤")],-1)),e("div",{class:"acknowledgment-row clickable",onClick:z},o[66]||(o[66]=[e("div",{class:"community-link"},[e("i",{class:"fa-solid fa-users"}),e("span",null,"–°–æ–æ–±—â–µ—Å—Ç–≤–æ")],-1),e("span",{class:"acknowledgment-text"},"‚Äî –∑–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–∏–Ω–≥–æ–≤",-1)]))])]),e("div",{class:C(["timings-content",{"no-border":!N.value}])},[e("div",Za,[N.value.length>0?(l(),a("div",Xa,[(l(!0),a(le,null,he(N.value,v=>{var Le;return l(),a("div",{key:v.id,class:C(["timing-entry",{pending:v.status==="pending","clean-text":v.status==="clean_text",selected:J.value.has(v.id)}])},[e("div",Qa,[e("div",Ja,[v.status==="pending"?(l(),a("div",er,"–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏")):y("",!0),v.status==="clean_text"?(l(),a("div",tr," –¢–∞–π–º–∏–Ω–≥–∏ —Ç–∞–∫–æ–≥–æ —Ç–∏–ø–∞ –Ω–µ –º–æ–¥–µ—Ä–∏—Ä—É—é—Ç—Å—è, –¥–ª—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Å–≤–µ—Ä—è–π—Ç–µ—Å—å —Å ParentsGuide ")):y("",!0)]),v.status!=="clean_text"&&((Le=s.value)==null?void 0:Le.type)==="FILM"?(l(),a("div",nr,[e("button",{class:"nudity-info-button",onClick:Ge=>Ft(v)},f(ve.value[v.id]?"–°–∫—Ä—ã—Ç—å –ø–∞—Ä—Å–µ—Ä":"–ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä—Å–µ—Ä"),9,or),J.value.has(v.id)?(l(),a("button",{key:0,class:"nudity-info-button",onClick:Ge=>qt(v.id),title:"–£–¥–∞–ª–∏—Ç—å –∏–∑ –∞–≤—Ç–æ–±–ª—é—Ä–∞"},o[69]||(o[69]=[e("i",{class:"fas fa-minus"},null,-1),e("span",null,"–£–¥–∞–ª–∏—Ç—å –∏–∑ –∞–≤—Ç–æ–±–ª—é—Ä–∞",-1)]),8,sr)):(l(),a("button",{key:1,class:"nudity-info-button",onClick:Ge=>Ot(v.id),title:"–î–æ–±–∞–≤–∏—Ç—å –≤ –∞–≤—Ç–æ–±–ª—é—Ä"},o[70]||(o[70]=[e("i",{class:"fas fa-plus"},null,-1),e("span",null,"–î–æ–±–∞–≤–∏—Ç—å –≤ –∞–≤—Ç–æ–±–ª—é—Ä",-1)]),8,lr))])):y("",!0),e("div",{class:C(["timing-hover-container",{blurred:v.status==="pending"}])},[e("span",ir,f(v.timing_text),1),o[71]||(o[71]=e("br",null,null,-1)),e("span",ar,"by "+f(v.username),1)],2),ve.value[v.id]&&Array.isArray(ve.value[v.id])?(l(),a("div",rr,[o[72]||(o[72]=e("b",null,"–ü–∞—Ä—Å–µ—Ä(–∫ —Ç–∞–π–º–∏–Ω–≥–∞–º –¥–æ–±–∞–≤–∏—Ç—Å—è -2 –∏ +2 —Å–µ–∫—É–Ω–¥ –ø–æ –∫—Ä–∞—è–º —Ç–∞–π–º–∏–Ω–≥–∞ –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏, –Ω–æ –≤ –ø—Ä–µ–≤—å—é –ø–∞—Ä—Å–µ—Ä–∞ –∏—Ö –Ω–µ—Ç –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏):",-1)),ve.value[v.id].length===0?(l(),a("span",ur,"–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å")):(l(),a("span",dr,[(l(!0),a(le,null,he(ve.value[v.id],(Ge,Et)=>(l(),a("span",{key:Et}," ["+f(K(rt)(Ge[0]))+" - "+f(K(rt)(Ge[1]))+"]"+f(Et<ve.value[v.id].length-1?", ":""),1))),128))]))])):y("",!0)])],2)}),128))])):(l(),a("div",cr,f("–ó–∞–ø–∏—Å–µ–π –æ —Ç–∞–π–º–∏–Ω–≥–∞—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")))]),Pe.value&&J.value.size>0?(l(),a("div",vr,[e("h4",mr," –û–±—â–∏–π –ø–∞—Ä—Å–µ—Ä ("+f(J.value.size)+" —Ç–∞–π–º–∏–Ω–≥–æ–≤): ",1),e("div",fr,[r().length===0?(l(),a("span",gr,"–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ç–∞–π–º–∏–Ω–≥–∏")):(l(),a("span",kr,[(l(!0),a(le,null,he(r(),(v,Le)=>(l(),a("span",{key:Le}," ["+f(K(rt)(v[0]))+" - "+f(K(rt)(v[1]))+"]"+f(Le<r().length-1?", ":""),1))),128))]))])])):y("",!0),e("div",yr,[N.value.length>0?(l(),a("button",{key:0,class:"nudity-info-button",onClick:pt},o[73]||(o[73]=[e("i",{class:"fas fa-copy"},null,-1),e("span",null,"–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å",-1)]))):y("",!0),J.value.size>0?(l(),a("button",{key:1,class:"nudity-info-button",onClick:p},[o[74]||(o[74]=e("i",{class:"fas fa-eye"},null,-1)),e("span",null,"–û–±—â–∏–π –ø–∞—Ä—Å–µ—Ä ("+f(J.value.size)+")",1)])):y("",!0),e("button",{class:"nudity-info-button",onClick:o[13]||(o[13]=v=>me.value=!0)},o[75]||(o[75]=[e("i",{class:"fas fa-plus"},null,-1),e("span",null,"–î–æ–±–∞–≤–∏—Ç—å/–¥–æ–ø–æ–ª–Ω–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥",-1)]))])],2)])])):y("",!0),me.value?(l(),a("div",pr,[e("div",hr,[e("div",br,[o[77]||(o[77]=e("h3",null,"–î–æ–±–∞–≤–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥",-1)),e("button",{class:"close-modal-btn",onClick:o[14]||(o[14]=v=>me.value=!1)},o[76]||(o[76]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",wr,[Q(e("input",{"onUpdate:modelValue":o[15]||(o[15]=v=>it.value=v),placeholder:"–í–∞—à –Ω–∏–∫",class:"timing-input",maxlength:"50"},null,512),[[mt,it.value]]),Q(e("textarea",{"onUpdate:modelValue":o[16]||(o[16]=v=>Ke.value=v),placeholder:"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ñ–∏–ª—å–º–∞(–≤ [] —Å–∫–æ–±–∫–∞—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä [01:36] –∏–ª–∏ [01:36:55]), –∫ –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã –ø—Ä–∏–ª–∞–≥–∞–µ—Ç–µ —Ç–∞–π–º–∏–Ω–≥\n–¢–∫ –∂–µ –¥–ª—è –∞–≤—Ç–æ–±–ª—é—Ä–∞ –ø—Ä–æ—à—É –≤—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏ —É–∫–∞–∑—ã–≤–∞—Ç—å –∫–∞–∫ –¥–∏–∞–ø–æ–∑–æ–Ω, –∞ –Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –≤—Ä–µ–º—è, –Ω–∞–ø—Ä–∏–º–µ—Ä 00:12:31-00:13:04 - —Ç–µ–∫—Å—Ç, –∞ –Ω–µ 00:12:31\n–î–ª—è —Å–µ—Ä–∏–∞–ª–æ–≤ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ —Å–µ–∑–æ–Ω –∏ –Ω–æ–º–µ—Ä —ç–ø–∏–∑–æ–¥–∞\n",class:"timing-textarea"},null,512),[[mt,Ke.value]]),ct.value&&ct.value.length>0?(l(),a("div",Cr,[o[78]||(o[78]=e("div",{class:"timing-preview-header"},[e("i",{class:"fas fa-eye"}),e("span",null,"–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –ø–∞—Ä—Å–µ—Ä–∞")],-1)),e("div",_r,[(l(!0),a(le,null,he(ct.value,(v,Le)=>(l(),a("div",{key:Le,class:"timing-preview-item"},[e("span",Mr,f(K(rt)(v[0]))+" - "+f(K(rt)(v[1])),1),e("span",Er," ("+f(Math.round(v[1]-v[0]))+"—Å) ",1)]))),128))])])):y("",!0),e("div",Lr,[e("button",{class:"submit-timing-btn",onClick:U,disabled:!vt.value||ze.value},[ze.value?(l(),a("i",Tr)):(l(),a("span",Rr,"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é"))],8,Ir)])])])])):y("",!0),Z.value?(l(),a("div",{key:3,class:"modal-overlay",onClick:o[19]||(o[19]=v=>Z.value=!1)},[e("div",{class:"modal-content",onClick:o[18]||(o[18]=ot(()=>{},["stop"]))},[e("div",Ar,[o[80]||(o[80]=e("h3",null,[Y(" –¢–æ–ø –∞–≤—Ç–æ—Ä–æ–≤ —Ç–∞–π–º–∏–Ω–≥–æ–≤ "),e("span",{class:"hint-text"},[Y("(–•–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —Å–≤–æ–π —Å—Ç—Ä–∏–º/—Å–æ—Ü—Å–µ—Ç–∏? –ù–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º –≤ "),e("a",{href:"https://t.me/reyohoho_sup",target:"_blank",rel:"noopener noreferrer"},"—Ç–µ–ª–µ–≥—Ä–∞–º"),Y(")")])],-1)),e("div",Pr,[e("button",{class:"close-modal-btn",onClick:o[17]||(o[17]=v=>Z.value=!1)},o[79]||(o[79]=[e("i",{class:"fas fa-times"},null,-1)]))])]),e("div",Sr,[e("button",{class:"show-all-timings-btn",onClick:xt,disabled:Me.value},[Me.value?(l(),a("i",jr)):(l(),a("i",Nr)),o[81]||(o[81]=e("span",null,"–í—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏",-1))],8,xr),e("div",Ur,[(l(!0),a(le,null,he(ce.value,(v,Le)=>(l(),a("div",{key:v.username,class:"top-submitter-item"},[e("div",{class:C(["submitter-rank",{gold:Le===0,silver:Le===1,bronze:Le===2}])},f(Le+1),3),e("div",Br,[e("div",$r,[v.stream_link?(l(),a("a",{key:0,href:v.stream_link,target:"_blank",rel:"noopener noreferrer"},[Y(f(v.username)+" ",1),o[82]||(o[82]=e("i",{class:"fa-brands fa-twitch"},null,-1))],8,Dr)):(l(),a(le,{key:1},[Y(f(v.username),1)],64))]),e("div",Hr,f(v.approved_submissions_count)+" "+f(Vt(v.approved_submissions_count,["—Ñ–∏–ª—å–º","—Ñ–∏–ª—å–º–∞","—Ñ–∏–ª—å–º–æ–≤"])),1)]),e("div",Vr,[e("div",{class:"contribution-bar",style:Tt({width:gt(v.approved_submissions_count)+"%"})},null,4)])]))),128))])])])])):y("",!0),pe.value?(l(),a("div",{key:4,class:"modal-overlay",onClick:o[26]||(o[26]=v=>pe.value=!1)},[e("div",{class:"modal-content all-timings-modal",onClick:o[25]||(o[25]=ot(()=>{},["stop"]))},[e("div",Fr,[o[84]||(o[84]=e("h3",null,"–í—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏",-1)),e("button",{class:"close-modal-btn",onClick:o[20]||(o[20]=v=>pe.value=!1)},o[83]||(o[83]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",Or,[!Me.value&&te.value.length>0?(l(),a("div",qr,[e("button",{class:C(["timing-filter-btn",{active:Be.value==="all"}]),onClick:o[21]||(o[21]=v=>Be.value="all")}," –í—Å–µ ("+f(te.value.length)+") ",3),e("button",{class:C(["timing-filter-btn",{active:Be.value==="approved"}]),onClick:o[22]||(o[22]=v=>Be.value="approved")}," –û–¥–æ–±—Ä–µ–Ω–Ω—ã–µ ("+f(te.value.filter(v=>v.status==="approved").length)+") ",3),e("button",{class:C(["timing-filter-btn",{active:Be.value==="pending"}]),onClick:o[23]||(o[23]=v=>Be.value="pending")}," –ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ ("+f(te.value.filter(v=>v.status==="pending").length)+") ",3),e("button",{class:C(["timing-filter-btn",{active:Be.value==="clean_text"}]),onClick:o[24]||(o[24]=v=>Be.value="clean_text")}," –ù–µ –º–æ–¥–µ—Ä–∏—Ä—É—é—Ç—Å—è ("+f(te.value.filter(v=>v.status==="clean_text").length)+") ",3)])):y("",!0),Me.value?(l(),a("div",Kr,o[85]||(o[85]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),e("span",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö —Ç–∞–π–º–∏–Ω–≥–æ–≤...",-1)]))):te.value.length===0?(l(),a("div",zr,o[86]||(o[86]=[e("p",null,"–¢–∞–π–º–∏–Ω–≥–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",-1)]))):jt.value.length===0?(l(),a("div",Wr,o[87]||(o[87]=[e("p",null,"–¢–∞–π–º–∏–Ω–≥–∏ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —Ñ–∏–ª—å—Ç—Ä—É –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",-1)]))):(l(),a("div",Gr,[(l(!0),a(le,null,he(jt.value,v=>{var Le;return l(),a("div",{key:v.id,class:C(["timing-item",{pending:v.status==="pending",approved:v.status==="approved",rejected:v.status==="rejected","clean-text":v.status==="clean_text"}])},[e("div",Yr,[e("div",Zr,[e("span",{class:C(["timing-status",v.status])},f(Ht(v.status)),3),e("span",Xr,f(v.username),1),e("span",Qr,f(K(Rn)(v.submitted_at)),1)]),e("div",Jr,[ge(w,{to:"/movie/".concat(v.kp_id),class:"timing-kp-id clickable",title:"–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ñ–∏–ª—å–º—É ".concat(v.kp_id)},{default:zt(()=>[Y(" KP: "+f(v.kp_id),1)]),_:2},1032,["to","title"]),(Le=K(n).user)!=null&&Le.is_admin&&v.status==="pending"?(l(),a("div",eu,[v.status==="pending"?(l(),a("button",{key:0,class:"approve-btn",onClick:Ge=>St(v.id),disabled:Ue.value,title:"–û–¥–æ–±—Ä–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥"},[We.value===v.id&&Qe.value?(l(),a("i",nu)):(l(),a("i",ou))],8,tu)):y("",!0),v.status==="pending"?(l(),a("button",{key:1,class:"reject-btn",onClick:Ge=>$t(v.id),disabled:Ue.value,title:"–û—Ç–∫–ª–æ–Ω–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥"},[We.value===v.id&&!Qe.value&&!Je.value?(l(),a("i",lu)):(l(),a("i",iu))],8,su)):y("",!0),v.status==="pending"?(l(),a("button",{key:2,class:"clean-text-btn",onClick:Ge=>Dt(v.id),disabled:Ue.value,title:"–û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ clean_text"},[We.value===v.id&&Je.value?(l(),a("i",ru)):(l(),a("i",uu))],8,au)):y("",!0)])):y("",!0)])]),e("div",du,[e("pre",cu,f(v.timing_text),1)])],2)}),128))]))])])])):y("",!0)],64)}}},bu=Ye(vu,[["__scopeId","data-v-c44443f1"]]);export{bu as default};
