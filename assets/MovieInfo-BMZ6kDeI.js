import{_ as he,r as k,c as D,b as i,d as n,e,s as O,t as u,K as Z,g as c,L as pe,n as w,q as Wt,u as Te,i as zt,N as qt,z as Yt,l as fe,o as Re,O as Gt,x as de,E as jt,f as ae,P as He,m as C,Q as A,y as L,U as _,R as fo,D as Oe,S as De,V as ko,W as Xt,X as yo,Y as Nt,Z as go,$ as bo,a as _o,a0 as Ht,a1 as Ot,a2 as wo,a3 as Bt,a4 as $o,a5 as ho}from"./index-CoB_XwZ5.js";import{S as Zt,_ as Mo,a as Kt,b as Vt,M as Ut}from"./MovieList-B43M_IJU.js";import{N as Be}from"./ToastMessage-VyhiWCXA.js";import{u as Co,S as Ao,a as Io}from"./trailer-D96VLycn.js";const me="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVR4nO2ZQUoDMRSGR7eewHoFsVS0HkUUXNXqASqK2EURBPFIVRe6c+UN1CvUXWvbT4KvMAwzNnnJdCrmg1BKad7/v7y0b5IkiUQiCwGoAx3gQjEugZ0qxTeAIX6MKjMBnBOGS62AVWAPOHVYdlMu9YArYOhphLeBT+ALmOKGEd2QubaAK+B2zngFxt4GgDXgGZjgR8ch5oEkCi8DkvlnRcYLV0Apfqw10M7JvPkV6AN3FmVwK+WyZRnvMEe8ef/ibECyb2o+zRuwnpQAxeLNivQ0BvYyE46qEJ/8fK4ycJKp/X4V4n0MdDNfukkqEO9jwP1LDgD7BeKPgmgp04CL+KUz4Cp+qQxoxC+NAdsNm4c0hWkukkUa8BGfegiadbFDq3/2UAZ8xc+QVvzMtqcKYkBaZ5/MN5xEl2DgLGDZ1KswsC09FPJqXTZoNm5oA6kyMGI2FxqfkluJ0uMTDfhBXAHiHvCCWEL8/RLqlv1MPCf+TSZ+13WC7KnEfWlqcwAeU7GNjnbiQsG5UC1ZAEAt1UMhOpquk6zknMy9l20C2AA+MnEHRo9msuOCs9EH4Fp5TVQ0rqVs0plH4re02Qh1Oq1lCjypsp+5H3gKcD/gykTirqnFZ/ZDy+OGxpapzD+QePrM/2KkKfcGPcv7AdvRkz23G1x4JPIP+AY3r/ywUk/2JAAAAABJRU5ErkJggg==",Eo="/reyohoho/assets/icon-shikimori-DGvXK9Jc.svg",Ne=f=>{const g=document.createElement("div");g.style.position="fixed",g.style.top="0",g.style.left="0",g.style.width="100%",g.style.height="100%",g.style.backgroundColor="rgba(0, 0, 0, 0.8)",g.style.color="white",g.style.display="flex",g.style.justifyContent="center",g.style.alignItems="center",g.style.fontSize="2rem",g.style.zIndex="99000",g.textContent=f,document.body.appendChild(g),setTimeout(()=>{document.body.removeChild(g)},2e3)},To={class:"modal-content"},Ro={key:0},Lo={key:1},Po={class:"players-list"},So=["onClick"],xo={key:0,class:"warning-icon material-icons",title:"Внимание!"},Do={key:0},No={key:0,class:"warning-icon material-icons",title:"Внимание!"},Ho={key:1},Oo={key:0,class:"warning-icon material-icons",title:"Внимание!"},Bo=["onClick"],Ko={key:0,class:"warning-icon material-icons",title:"Внимание!"},Vo={__name:"PlayerModal",props:{players:{type:Array,required:!0},selectedPlayer:{type:Object,default:null}},emits:["close","select"],setup(f,{emit:g}){const N=f,P=g,I=k(null),V=D(()=>N.players.filter(l=>!h(l)&&!o(l))),$=D(()=>N.players.some(l=>h(l))),T=D(()=>N.players.some(l=>o(l))),h=l=>l.key.toUpperCase().includes("HDREZKA"),o=l=>l.key.toUpperCase().includes("KODIK"),E=l=>l.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"").replace(/KODIK>/,"").trim(),S=l=>{P("select",l),P("close")},U=l=>N.selectedPlayer&&N.selectedPlayer.key===l.key,M=l=>{I.value=l},H=()=>{I.value=null},W=l=>{let v=N.players.filter(m=>l==="hdrezka"&&h(m)||l==="kodik"&&o(m));return l==="kodik"?v.sort((m,B)=>E(m.translate).localeCompare(E(B.translate))):v},b=l=>W(l).some(v=>v.warning);return(l,v)=>(n(),i("div",{class:"modal",onClick:v[3]||(v[3]=Wt(m=>l.$emit("close"),["self"]))},[e("div",To,[e("button",{class:"close",onClick:v[0]||(v[0]=m=>l.$emit("close"))},"×"),I.value?(n(),i("h2",Lo,[e("button",{class:"back-btn",onClick:H},"← Назад"),O(" "+u(I.value==="hdrezka"?"ReYohoho - HDrezka":"Kodik"),1)])):(n(),i("h2",Ro,"Выберите плеер")),e("ul",Po,[I.value?(n(!0),i(Z,{key:1},pe(W(I.value),m=>(n(),i("li",{key:m.key},[e("button",{class:w(["player-item",{active:U(m)}]),onClick:B=>S(m)},[O(u(E(m.translate))+" ",1),m.warning?(n(),i("span",Ko,"warning")):c("",!0)],10,Bo)]))),128)):(n(),i(Z,{key:0},[(n(!0),i(Z,null,pe(V.value,m=>(n(),i("li",{key:m.key},[e("button",{class:w(["player-item",{active:U(m)}]),onClick:B=>S(m)},[O(u(E(m.translate))+" ",1),m.warning?(n(),i("span",xo,"warning")):c("",!0)],10,So)]))),128)),$.value?(n(),i("li",Do,[e("button",{class:"group-item",onClick:v[1]||(v[1]=m=>M("hdrezka"))},[v[4]||(v[4]=e("span",{class:"material-icons group-icon"},"folder",-1)),v[5]||(v[5]=O(" ReYohoho - HDrezka ")),b("hdrezka")?(n(),i("span",No,"warning")):c("",!0)])])):c("",!0),T.value?(n(),i("li",Ho,[e("button",{class:"group-item",onClick:v[2]||(v[2]=m=>M("kodik"))},[v[6]||(v[6]=e("span",{class:"material-icons group-icon"},"folder",-1)),v[7]||(v[7]=O(" Kodik ")),b("kodik")?(n(),i("span",Oo,"warning")):c("",!0)])])):c("",!0)],64))])])]))}},Uo=he(Vo,[["__scopeId","data-v-7e4f2528"]]),Fo={class:"players-list"},Wo=["src"],zo={key:1,class:"controls"},qo={class:"main-controls"},Yo={class:"material-icons"},Go={class:"list-button-item"},jo={class:"material-icons"},Xo={class:"list-button-item"},Zo={class:"material-icons"},Qo={class:"list-button-item"},Jo={class:"list-button-item"},es={class:"material-icons"},ts={class:"list-button-item"},os={class:"material-icons"},ss={class:"tooltip-container"},ns={class:"material-icons"},ls={class:"tooltip-container"},is={class:"tooltip-container"},as={class:"tooltip-container"},rs={class:"tooltip-container"},us={class:"material-symbols-outlined"},vs={class:"custom-tooltip"},ds={class:"tooltip-container"},cs={class:"current-ratio"},ms=["onClick"],ps={key:0,class:"tooltip-container"},fs={class:"custom-tooltip"},ks={key:1,class:"tooltip-container"},ys={class:"custom-tooltip"},gs={key:0,class:"desktop-list-buttons"},bs={class:"tooltip-container"},_s={class:"material-icons"},ws={class:"custom-tooltip"},$s={class:"tooltip-container"},hs={class:"material-icons"},Ms={class:"custom-tooltip"},Cs={class:"tooltip-container"},As={class:"custom-tooltip"},Is={class:"tooltip-container"},Es={class:"material-icons"},Ts={class:"custom-tooltip"},Rs={class:"tooltip-container"},Ls={class:"material-icons"},Ps={class:"custom-tooltip"},Ss={key:1,class:"mobile-list-buttons"},xs={class:"tooltip-container"},Ds={class:"material-icons"},Ns={class:"custom-tooltip"},Hs={class:"tooltip-container"},Os={class:"material-icons"},Bs={class:"custom-tooltip"},Ks={class:"tooltip-container"},Vs={class:"custom-tooltip"},Us={class:"tooltip-container"},Fs={class:"material-icons"},Ws={class:"custom-tooltip"},zs={class:"tooltip-container"},qs={class:"material-icons"},Ys={class:"custom-tooltip"},Gs={__name:"PlayerComponent",props:{kpId:String,movieInfo:{type:Object,default:()=>({})}},emits:["update:selectedPlayer","update:movieInfo"],setup(f,{emit:g}){const N=Te(),P=Co(),I=zt(),V=qt(),$=Yt(),T=k(V.params.kp_id),h=f,o=g,E=k([]),S=k(null),U=k(!0),M=k(!1),H=k(!1),W=k(null),b=k(null),l=k(!1),v=k(""),m=k(null),B=k(window.innerHeight*.9),Me=D(()=>"".concat(B.value,"px")),X=D(()=>N.isMobile),F=D(()=>!!window.electronAPI),p=k(null),re=k(!1);let ce=null;const Q=k(null),ke=k(null),d=k(null),s=()=>{if(!ke.value||!d.value)return;const r=ke.value.getBoundingClientRect(),t=d.value.getBoundingClientRect(),x=window.innerHeight;r.bottom+t.height>x?(d.value.style.top="auto",d.value.style.bottom="100%",d.value.style.marginTop="0",d.value.style.marginBottom="12px",d.value.style.transform="translateX(-50%)"):(d.value.style.top="100%",d.value.style.bottom="auto",d.value.style.marginTop="12px",d.value.style.marginBottom="0",d.value.style.transform="translateX(-50%)")},y=r=>{p.value=r,re.value=!1,clearTimeout(ce),De(()=>{s()})},Y=()=>{re.value||(ce=setTimeout(()=>{p.value=null},300))},J=()=>{re.value=!0,clearTimeout(ce)},R=()=>{re.value=!1,p.value=null},G=D({get:()=>P.aspectRatio,set:r=>P.updateAspectRatio(r)}),ee=D({get:()=>P.isCentered,set:r=>P.updateCentering(r)}),Ce=D(()=>{var r,t,x,q,te,oe,se,ne,le,ie;return((t=(r=h.movieInfo)==null?void 0:r.lists)==null?void 0:t.isFavorite)||((q=(x=h.movieInfo)==null?void 0:x.lists)==null?void 0:q.isWatching)||((oe=(te=h.movieInfo)==null?void 0:te.lists)==null?void 0:oe.isLater)||((ne=(se=h.movieInfo)==null?void 0:se.lists)==null?void 0:ne.isCompleted)||((ie=(le=h.movieInfo)==null?void 0:le.lists)==null?void 0:ie.isAbandoned)}),j=D(()=>P.preferredPlayer),z=k(0),ue=r=>r.toUpperCase(),ve=()=>{if(M.value||!b.value)return;const[r,t]=G.value.split(":").map(Number);B.value=window.innerHeight*.9,z.value=Math.min(b.value.clientWidth*(t/r),B.value)},Le=D(()=>{if(M.value)return{};const[r,t]=G.value.split(":").map(Number),x=B.value*(r/t);return{width:"100%",maxWidth:"".concat(x,"px"),maxHeight:Me.value,margin:"0 auto",overflow:"hidden"}}),Qt=D(()=>{const[r,t]=G.value.split(":").map(Number);return{position:"relative",width:"100%",paddingTop:"".concat(t/r*100,"%")}}),ye=()=>{b.value&&setTimeout(()=>{De(()=>{b.value.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})},500)},Jt=async()=>{try{v.value="",m.value=null;const r=await fo(h.kpId);if(E.value=Object.entries(r).map(([t,x])=>({key:t.toUpperCase(),...x})),E.value.length>0){if(j.value){const t=ue(j.value),x=E.value.find(q=>ue(q.key)===t);S.value=x||E.value[0]}else S.value=E.value[0];o("update:selectedPlayer",S.value)}}catch(r){const{message:t,code:x}=Oe(r);v.value=t,m.value=x,console.error("Ошибка при загрузке плееров:",r)}},eo=()=>{l.value=!0},Ke=()=>{l.value=!1},to=r=>{var t;if(((t=S.value)==null?void 0:t.key)===r.key){Ke();return}S.value=r,U.value=!0,P.updatePreferredPlayer(ue(r.key)),o("update:selectedPlayer",r)},oo=()=>{F.value?window.electronAPI.sendHotKey("F2"):(Ne("Доступно только в приложении ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},so=()=>{F.value?window.electronAPI.sendHotKey("F3"):(Ne("Доступно только в приложении ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},no=()=>{F.value?window.electronAPI.sendHotKey("F4"):(Ne("Доступно только в приложении ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},Ae=()=>{M.value=!M.value,M.value?(window.addEventListener("mousemove",Pe),document.addEventListener("keydown",Se),document.body.classList.add("no-scroll")):(window.removeEventListener("mousemove",Pe),document.removeEventListener("keydown",Se),document.body.classList.remove("no-scroll")),H.value=M.value,De(()=>ye())},Ve=k(null),Pe=()=>{Ve.value=setTimeout(()=>{clearTimeout(Ve.value),H.value=!1},4e3),H.value=!0},Ie=D(()=>N.dimmingEnabled),lo=()=>{M.value||N.toggleDimming()},Se=r=>{(r.key==="Escape"&&M.value||r.altKey&&r.keyCode===84)&&Ae()},Ue=r=>{G.value=r,setTimeout(()=>{ee.value&&ye()},310)},io=()=>{const r="reyohoho://#".concat(T.value);try{window.location.href=r}catch(t){console.error("Ошибка при открытии ссылки:",t)}},ao=()=>{const r=window.location.href;navigator.clipboard.writeText(r).then(()=>{}),Q.value.showNotification("Ссылка на фильм скопирована")},ro=()=>{U.value=!1};function uo(r){return r.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"").replace(/KODIK>/,"KODIK - ").trim()}fe(S,r=>{r&&(U.value=!0,P.updatePreferredPlayer(ue(r.key)),o("update:selectedPlayer",r))}),fe(()=>V.params.kp_id,async r=>{r&&r!==T.value&&(T.value=r,ee.value&&ye())},{immediate:!0});const Ee=["16:9","12:5","4:3"],vo=()=>{const t=(Ee.indexOf(G.value)+1)%Ee.length;Ue(Ee[t])},co=r=>{var x,q,te,oe,se,ne,le,ie,ge,be,_e,we,$e;return($e={[_.FAVORITE]:((q=(x=h.movieInfo)==null?void 0:x.lists)==null?void 0:q.isFavorite)||!1,[_.HISTORY]:((oe=(te=h.movieInfo)==null?void 0:te.lists)==null?void 0:oe.isHistory)||!1,[_.LATER]:((ne=(se=h.movieInfo)==null?void 0:se.lists)==null?void 0:ne.isLater)||!1,[_.COMPLETED]:((ie=(le=h.movieInfo)==null?void 0:le.lists)==null?void 0:ie.isCompleted)||!1,[_.ABANDONED]:((be=(ge=h.movieInfo)==null?void 0:ge.lists)==null?void 0:be.isAbandoned)||!1,[_.WATCHING]:((we=(_e=h.movieInfo)==null?void 0:_e.lists)==null?void 0:we.isWatching)||!1}[r])!=null?$e:!1},K=async r=>{if(!I.token){Q.value.showNotification('Необходимо <a class="auth-link">авторизоваться</a>',5e3,{onClick:mo});return}try{const t={[_.FAVORITE]:"избранное",[_.HISTORY]:"историю",[_.LATER]:'список "Смотреть позже"',[_.COMPLETED]:'список "Просмотрено"',[_.ABANDONED]:'список "Брошено"',[_.WATCHING]:'список "Смотрю"'};co(r)?(await ko(T.value,r),Q.value.showNotification("Удалено из ".concat(t[r]))):(await Xt(T.value,r),Q.value.showNotification("Добавлено в ".concat(t[r])))}catch(t){const{message:x,code:q}=Oe(t);Q.value.showNotification("".concat(x," ").concat(q))}o("update:movieInfo")},mo=()=>{$.push("/login")},xe=D(()=>P.showFavoriteTooltip),po=()=>{$.push("/settings"),R()};return Re(()=>{U.value=!0,Jt(),X.value&&(G.value="4:3"),ve(),window.addEventListener("resize",ve),window.addEventListener("resize",s),ee.value&&ye()}),Gt(()=>{window.removeEventListener("resize",ve),window.removeEventListener("resize",s),window.removeEventListener("mousemove",Pe),document.removeEventListener("keydown",Se),document.body.classList.remove("no-scroll")}),(r,t)=>{var x,q,te,oe,se,ne,le,ie,ge,be,_e,we,$e,Fe,We,ze,qe,Ye,Ge,je,Xe,Ze,Qe,Je,et,tt,ot,st,nt,lt,it,at,rt,ut,vt,dt,ct,mt,pt,ft,kt,yt,gt,bt,_t,wt,$t,ht,Mt,Ct,At,It,Et,Tt,Rt,Lt,Pt,St,xt,Dt;return v.value?(n(),de(jt,{key:0,message:v.value,code:m.value},null,8,["message","code"])):(n(),i(Z,{key:1},[e("div",Fo,[t[54]||(t[54]=e("span",null,"Плеер:",-1)),e("button",{class:"player-btn",onClick:eo},u(S.value?uo(S.value.translate).toUpperCase():"Загрузка плееров..."),1)]),l.value?(n(),de(Uo,{key:0,players:E.value,"selected-player":S.value,onClose:Ke,onSelect:to},null,8,["players","selected-player"])):c("",!0),e("div",{ref_key:"containerRef",ref:b,class:w(["player-container",{"theater-mode":M.value}]),style:He(M.value?{}:Le.value)},[e("div",{class:"iframe-wrapper",style:He(M.value?{}:Qt.value)},[C(e("iframe",{ref_key:"playerIframe",ref:W,src:(x=S.value)==null?void 0:x.iframe,frameborder:"0",allowfullscreen:"",webkitallowfullscreen:"",class:w(["responsive-iframe",{"theater-mode-unlock":H.value,"theater-mode-lock":M.value,dimmed:Ie.value}]),onLoad:ro},null,42,Wo),[[A,!U.value&&((q=S.value)==null?void 0:q.iframe)]]),U.value?(n(),de(Zt,{key:0})):c("",!0)],4),M.value?(n(),i("button",{key:0,class:w(["close-theater-btn",{visible:H.value}]),onClick:Ae}," ✖ ",2)):c("",!0)],6),M.value?c("",!0):(n(),i("div",zo,[e("div",qo,[X.value?c("",!0):(n(),i("div",{key:0,ref_key:"tooltipContainer",ref:ke,class:"tooltip-container list-buttons-container"},[xe.value?(n(),i("button",{key:0,class:w(["favorite-btn",{active:(oe=(te=f.movieInfo)==null?void 0:te.lists)==null?void 0:oe.isFavorite}]),onMouseenter:t[0]||(t[0]=a=>y("favorite")),onMouseleave:Y,onClick:t[1]||(t[1]=a=>K(L(_).FAVORITE))},[e("span",Yo,u((ne=(se=f.movieInfo)==null?void 0:se.lists)!=null&&ne.isFavorite?"favorite":"favorite_border"),1),e("span",{class:w(["material-icons dropdown-arrow",{highlighted:Ce.value}])},"expand_more",2)],34)):c("",!0),C(e("div",{ref_key:"tooltip",ref:d,class:"custom-tooltip advanced-tooltip list-buttons-dropdown",onMouseenter:J,onMouseleave:R},[e("div",Go,[e("button",{class:w(["favorite-btn",{active:(ie=(le=f.movieInfo)==null?void 0:le.lists)==null?void 0:ie.isFavorite}]),onClick:t[2]||(t[2]=a=>K(L(_).FAVORITE))},[e("span",jo,u((be=(ge=f.movieInfo)==null?void 0:ge.lists)!=null&&be.isFavorite?"favorite":"favorite_border"),1),t[55]||(t[55]=e("span",{class:"button-label"},"В избранное",-1))],2)]),e("div",Xo,[e("button",{class:w(["watching-btn",{active:(we=(_e=f.movieInfo)==null?void 0:_e.lists)==null?void 0:we.isWatching}]),onClick:t[3]||(t[3]=a=>K(L(_).WATCHING))},[e("span",Zo,u((Fe=($e=f.movieInfo)==null?void 0:$e.lists)!=null&&Fe.isWatching?"visibility":"visibility_off"),1),t[56]||(t[56]=e("span",{class:"button-label"},"Смотрю",-1))],2)]),e("div",Qo,[e("button",{class:w(["later-btn",{active:(ze=(We=f.movieInfo)==null?void 0:We.lists)==null?void 0:ze.isLater}]),onClick:t[4]||(t[4]=a=>K(L(_).LATER))},t[57]||(t[57]=[e("span",{class:"material-icons"},"watch_later",-1),e("span",{class:"button-label"},"Смотреть позже",-1)]),2)]),e("div",Jo,[e("button",{class:w(["completed-btn",{active:(Ye=(qe=f.movieInfo)==null?void 0:qe.lists)==null?void 0:Ye.isCompleted}]),onClick:t[5]||(t[5]=a=>K(L(_).COMPLETED))},[e("span",es,u((je=(Ge=f.movieInfo)==null?void 0:Ge.lists)!=null&&je.isCompleted?"check_circle":"check_circle_outline"),1),t[58]||(t[58]=e("span",{class:"button-label"},"Просмотрено",-1))],2)]),e("div",ts,[e("button",{class:w(["abandoned-btn",{active:(Ze=(Xe=f.movieInfo)==null?void 0:Xe.lists)==null?void 0:Ze.isAbandoned}]),onClick:t[6]||(t[6]=a=>K(L(_).ABANDONED))},[e("span",os,u(((Je=(Qe=f.movieInfo)==null?void 0:Qe.lists)!=null&&Je.isAbandoned,"not_interested")),1),t[59]||(t[59]=e("span",{class:"button-label"},"Брошено",-1))],2)]),e("div",{class:"tooltip-hint"},[t[61]||(t[61]=e("span",{class:"material-icons"},"settings",-1)),e("span",null,[t[60]||(t[60]=O("Стиль отображения можно изменить в ")),e("a",{class:"settings-link",onClick:po},"настройках")])])],544),[[A,p.value==="favorite"&&xe.value]])],512)),X.value?c("",!0):(n(),i(Z,{key:1},[e("div",ss,[e("button",{class:w(["dimming-btn",{active:Ie.value}]),onMouseenter:t[7]||(t[7]=a=>y("dimming")),onMouseleave:t[8]||(t[8]=a=>p.value=null),onClick:lo},[e("span",ns,u(Ie.value?"light_mode":"dark_mode"),1)],34),C(e("div",{class:"custom-tooltip"},u(Ie.value?"Отключить затемнение":"Включить затемнение"),513),[[A,p.value==="dimming"]])]),e("div",ls,[e("button",{class:w(["blur-btn",{"electron-only":!F.value}]),onMouseenter:t[9]||(t[9]=a=>y("blur")),onMouseleave:t[10]||(t[10]=a=>p.value=null),onClick:oo},t[62]||(t[62]=[e("span",{class:"material-icons"},"blur_on",-1)]),34),C(e("div",{class:"custom-tooltip"},u(F.value?"Блюр":"Блюр, функция доступна в приложении"),513),[[A,p.value==="blur"]])]),e("div",is,[e("button",{class:w(["material-symbols-outlined",{"electron-only":!F.value}]),onMouseenter:t[11]||(t[11]=a=>y("compressor")),onMouseleave:t[12]||(t[12]=a=>p.value=null),onClick:so},t[63]||(t[63]=[e("span",{class:"material-icons"},"graphic_eq",-1)]),34),C(e("div",{class:"custom-tooltip"},u(F.value?"Компрессор":"Компрессор, функция доступна в приложении"),513),[[A,p.value==="compressor"]])]),e("div",as,[e("button",{class:w(["mirror-btn",{"electron-only":!F.value}]),onMouseenter:t[13]||(t[13]=a=>y("mirror")),onMouseleave:t[14]||(t[14]=a=>p.value=null),onClick:no},t[64]||(t[64]=[e("span",{class:"material-icons"},"flip",-1)]),34),C(e("div",{class:"custom-tooltip"},u(F.value?"Зеркало":"Зеркало, функция доступна в приложении"),513),[[A,p.value==="mirror"]])]),e("div",rs,[e("button",{class:"theater-mode-btn",onMouseenter:t[15]||(t[15]=a=>y("theater")),onMouseleave:t[16]||(t[16]=a=>p.value=null),onClick:Ae},[e("span",us,u(M.value?"fullscreen_exit":"aspect_ratio"),1)],32),C(e("div",vs,[O(u(M.value?"Выйти из театрального режима":"Театральный режим")+" ",1),t[65]||(t[65]=e("span",{class:"shortcut-hint"},"Alt+T",-1))],512),[[A,p.value==="theater"]])]),e("div",ds,[e("button",{class:"aspect-ratio-dropdown-btn",onMouseenter:t[17]||(t[17]=a=>y("aspect_ratio")),onMouseleave:Y,onClick:vo},[e("span",cs,u(G.value),1)],32),C(e("div",{class:"custom-tooltip advanced-tooltip aspect-ratio-dropdown",onMouseenter:J,onMouseleave:R},[(n(),i(Z,null,pe(Ee,a=>e("div",{key:a,class:w(["aspect-ratio-option",{active:G.value===a}]),onClick:ul=>Ue(a)},u(a),11,ms)),64))],544),[[A,p.value==="aspect_ratio"]])]),e("div",{class:"tooltip-container",onMouseenter:t[19]||(t[19]=a=>y("centering")),onMouseleave:Y},[e("button",{class:"center-btn",onClick:ye},t[66]||(t[66]=[e("span",{class:"material-icons"},"center_focus_strong",-1)])),C(e("div",{class:"custom-tooltip advanced-tooltip",onMouseenter:J,onMouseleave:R},[t[67]||(t[67]=O(" Отцентрировать плеер ")),ae(Ao,{modelValue:ee.value,"onUpdate:modelValue":t[18]||(t[18]=a=>ee.value=a),title:"Автоцентрирование плеера"},null,8,["modelValue"]),t[68]||(t[68]=e("span",{class:"tooltip-title"},"Автоцентрирование плеера",-1))],544),[[A,p.value==="centering"]])],32),F.value?c("",!0):(n(),i("div",ps,[e("button",{class:"app-link-btn",onMouseenter:t[20]||(t[20]=a=>y("app_link")),onMouseleave:t[21]||(t[21]=a=>p.value=null),onClick:io},t[69]||(t[69]=[e("span",{class:"material-icons"},"open_in_new",-1)]),32),C(e("div",fs," Открыть в приложении ",512),[[A,p.value==="app_link"]])])),F.value?(n(),i("div",ks,[e("button",{class:"copy-link-btn",onMouseenter:t[22]||(t[22]=a=>y("copy_link")),onMouseleave:t[23]||(t[23]=a=>p.value=null),onClick:ao},t[70]||(t[70]=[e("span",{class:"material-icons"},"content_copy",-1)]),32),C(e("div",ys," Скопировать ссылку ",512),[[A,p.value==="copy_link"]])])):c("",!0)],64))]),!X.value&&!xe.value?(n(),i("div",gs,[e("div",bs,[e("button",{class:w(["favorite-btn",{active:(tt=(et=f.movieInfo)==null?void 0:et.lists)==null?void 0:tt.isFavorite}]),onMouseenter:t[24]||(t[24]=a=>y("favorite")),onMouseleave:t[25]||(t[25]=a=>p.value=null),onClick:t[26]||(t[26]=a=>K(L(_).FAVORITE))},[e("span",_s,u((st=(ot=f.movieInfo)==null?void 0:ot.lists)!=null&&st.isFavorite?"favorite":"favorite_border"),1)],34),C(e("div",ws,u("В избранное"),512),[[A,p.value==="favorite"]])]),e("div",$s,[e("button",{class:w(["watching-btn",{active:(lt=(nt=f.movieInfo)==null?void 0:nt.lists)==null?void 0:lt.isWatching}]),onMouseenter:t[27]||(t[27]=a=>y("watching")),onMouseleave:t[28]||(t[28]=a=>p.value=null),onClick:t[29]||(t[29]=a=>K(L(_).WATCHING))},[e("span",hs,u((at=(it=f.movieInfo)==null?void 0:it.lists)!=null&&at.isWatching?"visibility":"visibility_off"),1)],34),C(e("div",Ms,u("Смотрю"),512),[[A,p.value==="watching"]])]),e("div",Cs,[e("button",{class:w(["later-btn",{active:(ut=(rt=f.movieInfo)==null?void 0:rt.lists)==null?void 0:ut.isLater}]),onMouseenter:t[30]||(t[30]=a=>y("later")),onMouseleave:t[31]||(t[31]=a=>p.value=null),onClick:t[32]||(t[32]=a=>K(L(_).LATER))},t[71]||(t[71]=[e("span",{class:"material-icons"},"watch_later",-1)]),34),C(e("div",As,u("Смотреть позже"),512),[[A,p.value==="later"]])]),e("div",Is,[e("button",{class:w(["completed-btn",{active:(dt=(vt=f.movieInfo)==null?void 0:vt.lists)==null?void 0:dt.isCompleted}]),onMouseenter:t[33]||(t[33]=a=>y("completed")),onMouseleave:t[34]||(t[34]=a=>p.value=null),onClick:t[35]||(t[35]=a=>K(L(_).COMPLETED))},[e("span",Es,u((mt=(ct=f.movieInfo)==null?void 0:ct.lists)!=null&&mt.isCompleted?"check_circle":"check_circle_outline"),1)],34),C(e("div",Ts,u("Просмотрено"),512),[[A,p.value==="completed"]])]),e("div",Rs,[e("button",{class:w(["abandoned-btn",{active:(ft=(pt=f.movieInfo)==null?void 0:pt.lists)==null?void 0:ft.isAbandoned}]),onMouseenter:t[36]||(t[36]=a=>y("abandoned")),onMouseleave:t[37]||(t[37]=a=>p.value=null),onClick:t[38]||(t[38]=a=>K(L(_).ABANDONED))},[e("span",Ls,u(((yt=(kt=f.movieInfo)==null?void 0:kt.lists)!=null&&yt.isAbandoned,"not_interested")),1)],34),C(e("div",Ps,u("Брошено"),512),[[A,p.value==="abandoned"]])])])):X.value?(n(),i("div",Ss,[e("div",xs,[e("button",{class:w(["favorite-btn",{active:(bt=(gt=f.movieInfo)==null?void 0:gt.lists)==null?void 0:bt.isFavorite}]),onMouseenter:t[39]||(t[39]=a=>y("favorite")),onMouseleave:t[40]||(t[40]=a=>p.value=null),onClick:t[41]||(t[41]=a=>K(L(_).FAVORITE))},[e("span",Ds,u((wt=(_t=f.movieInfo)==null?void 0:_t.lists)!=null&&wt.isFavorite?"favorite":"favorite_border"),1)],34),C(e("div",Ns,u("В избранное"),512),[[A,p.value==="favorite"]])]),e("div",Hs,[e("button",{class:w(["watching-btn",{active:(ht=($t=f.movieInfo)==null?void 0:$t.lists)==null?void 0:ht.isWatching}]),onMouseenter:t[42]||(t[42]=a=>y("watching")),onMouseleave:t[43]||(t[43]=a=>p.value=null),onClick:t[44]||(t[44]=a=>K(L(_).WATCHING))},[e("span",Os,u((Ct=(Mt=f.movieInfo)==null?void 0:Mt.lists)!=null&&Ct.isWatching?"visibility":"visibility_off"),1)],34),C(e("div",Bs,u("Смотрю"),512),[[A,p.value==="watching"]])]),e("div",Ks,[e("button",{class:w(["later-btn",{active:(It=(At=f.movieInfo)==null?void 0:At.lists)==null?void 0:It.isLater}]),onMouseenter:t[45]||(t[45]=a=>y("later")),onMouseleave:t[46]||(t[46]=a=>p.value=null),onClick:t[47]||(t[47]=a=>K(L(_).LATER))},t[72]||(t[72]=[e("span",{class:"material-icons"},"watch_later",-1)]),34),C(e("div",Vs,u("Смотреть позже"),512),[[A,p.value==="later"]])]),e("div",Us,[e("button",{class:w(["completed-btn",{active:(Tt=(Et=f.movieInfo)==null?void 0:Et.lists)==null?void 0:Tt.isCompleted}]),onMouseenter:t[48]||(t[48]=a=>y("completed")),onMouseleave:t[49]||(t[49]=a=>p.value=null),onClick:t[50]||(t[50]=a=>K(L(_).COMPLETED))},[e("span",Fs,u((Lt=(Rt=f.movieInfo)==null?void 0:Rt.lists)!=null&&Lt.isCompleted?"check_circle":"check_circle_outline"),1)],34),C(e("div",Ws,u("Просмотрено"),512),[[A,p.value==="completed"]])]),e("div",zs,[e("button",{class:w(["abandoned-btn",{active:(St=(Pt=f.movieInfo)==null?void 0:Pt.lists)==null?void 0:St.isAbandoned}]),onMouseenter:t[51]||(t[51]=a=>y("abandoned")),onMouseleave:t[52]||(t[52]=a=>p.value=null),onClick:t[53]||(t[53]=a=>K(L(_).ABANDONED))},[e("span",qs,u(((Dt=(xt=f.movieInfo)==null?void 0:xt.lists)!=null&&Dt.isAbandoned,"not_interested")),1)],34),C(e("div",Ys,u("Брошено"),512),[[A,p.value==="abandoned"]])])])):c("",!0)])),ae(Be,{ref_key:"notificationRef",ref:Q},null,512)],64))}}},Ft=he(Gs,[["__scopeId","data-v-165a8868"]]),js={key:0,class:"carousel-container"},Xs={class:"carousel-wrapper"},Zs=["onClick"],Qs=["src","alt"],Js={class:"video-name"},en={key:0,class:"video-player"},tn=["src"],on={__name:"TrailerCarousel",props:{videos:{type:Array,required:!0},activeVideoIndex:{type:Number,default:null}},emits:["select"],setup(f,{emit:g}){const N=Te(),P=D(()=>N.isMobile),I=f,V=g,$=k(I.activeVideoIndex),T=k(null),h=k(!1),o=k(!1),E=()=>{if(!T.value)return;const{scrollLeft:b,scrollWidth:l,clientWidth:v}=T.value;h.value=b>0,o.value=b<l-v-1},S=b=>{if(!T.value)return;const l=T.value.querySelector(".carousel-item");if(!l)return;const v=l.clientWidth+16;T.value.scrollBy({left:v*b,behavior:"smooth"})},U=b=>{$.value=b,V("select",I.videos[b])},M=()=>E(),H=k([]),W=async b=>{try{return(await fetch("https://img.youtube.com/vi/".concat(b,"/0.jpg"))).ok}catch(l){return!1}};return Re(async()=>{const b=I.videos.map(async v=>await W(v.videoId)?v:null),l=await Promise.all(b);H.value=l.filter(Boolean),E(),window.addEventListener("resize",M)}),fe(()=>I.videos,async b=>{const l=b.map(async m=>await W(m.videoId)?m:null),v=await Promise.all(l);H.value=v.filter(Boolean)}),fe(()=>I.activeVideoIndex,b=>{$.value=b}),Gt(()=>{window.removeEventListener("resize",M)}),(b,l)=>H.value.length?(n(),i("div",js,[l[4]||(l[4]=e("h2",null,"Трейлеры (YouTube)",-1)),e("div",Xs,[C(e("button",{class:"scroll-button left",onClick:l[0]||(l[0]=v=>S(-1))},l[2]||(l[2]=[e("span",{class:"material-symbols-outlined"},"arrow_back_ios",-1)]),512),[[A,!P.value&&h.value]]),e("div",{ref_key:"carousel",ref:T,class:"carousel",onScroll:E},[(n(!0),i(Z,null,pe(H.value,(v,m)=>(n(),i("div",{key:m,class:"carousel-item",onClick:B=>U(m)},[e("img",{src:"https://img.youtube.com/vi/".concat(v.videoId,"/0.jpg"),alt:v.name},null,8,Qs),e("div",Js,u(v.name),1)],8,Zs))),128))],544),C(e("button",{class:"scroll-button right",onClick:l[1]||(l[1]=v=>S(1))},l[3]||(l[3]=[e("span",{class:"material-symbols-outlined"},"arrow_forward_ios",-1)]),512),[[A,!P.value&&o.value]])]),$.value!==null?(n(),i("div",en,[e("iframe",{src:f.videos[$.value].iframeUrl,frameborder:"0",allowfullscreen:""},null,8,tn)])):c("",!0)])):c("",!0)}},sn=he(on,[["__scopeId","data-v-5d54158b"]]),nn={class:"rating-container"},ln={class:"rating-display"},an={class:"average-rating"},rn={class:"rating-numbers"},un=["onClick","onMouseenter"],vn={__name:"MovieRating",props:{kpId:{type:String,required:!0},showDash:{type:Boolean,default:!1}},setup(f){const g=Te(),N=Yt(),P=f,I=k(null),V=k(null),$=k(null),T=k(0),h=k(!1),o=k(!1);let E=null;const S=()=>{E=setTimeout(()=>{h.value=!1,g.isMobile||(o.value=!1)},100)},U=()=>{E&&(clearTimeout(E),E=null),h.value=!0},M=()=>{g.isMobile&&(o.value=!o.value)},H=()=>{N.push("/login")},W=async()=>{try{const l=await yo(P.kpId);V.value=l.user_rating,$.value=l.average_rating}catch(l){console.error("Error loading rating:",l)}},b=async l=>{var v;try{l===V.value?(await Nt(P.kpId,null),V.value=null,I.value.showNotification("Оценка удалена")):(await Nt(P.kpId,l),V.value=l,I.value.showNotification("Оценка сохранена")),g.isMobile&&(o.value=!1),W()}catch(m){console.error("Error setting rating:",m),((v=m.response)==null?void 0:v.status)===401?I.value.showNotification('Для оценки необходимо <a class="auth-link">авторизоваться</a>',5e3,{onClick:H}):I.value.showNotification("Ошибка при сохранении оценки"),g.isMobile&&(o.value=!1)}};return Re(()=>{W()}),(l,v)=>(n(),i("div",nn,[e("div",ln,[e("a",{href:"#",class:"rating-link",onMouseenter:v[0]||(v[0]=m=>h.value=!0),onMouseleave:S,onClick:Wt(M,["prevent"])},[v[2]||(v[2]=e("img",{src:Mo,alt:"ReYohoho",class:"rating-logo"},null,-1)),e("span",an,u($.value?$.value.toFixed(1):"—"),1)],32),C(e("div",{class:w(["rating-tooltip",{"mobile-tooltip":L(g).isMobile}]),onMouseenter:U,onMouseleave:S},[e("div",rn,[(n(),i(Z,null,pe(10,m=>e("button",{key:m,class:w(["number-btn",{active:m===V.value,hover:m===T.value}]),onClick:B=>b(m),onMouseenter:B=>T.value=m,onMouseleave:v[1]||(v[1]=B=>T.value=0)},u(m),43,un)),64))])],34),[[A,h.value||o.value]])]),ae(Be,{ref_key:"notificationRef",ref:I},null,512)]))}},dn=he(vn,[["__scopeId","data-v-52c65a99"]]),cn={class:"movie-info"},mn={class:"content"},pn={key:0,class:"content-card"},fn={class:"movie-skeleton"},kn={class:"movie-skeleton__player"},yn={key:2,class:"content-card"},gn={key:3,class:"content-card"},bn={class:"content-header"},_n={class:"content-title"},wn={key:0,class:"ratings-links"},$n={key:1},hn=["href"],Mn={key:2},Cn=["href"],An={key:3},In=["href"],En={key:4},Tn=["href"],Rn={key:5},Ln=["href"],Pn={key:6},Sn=["href"],xn=["content"],Dn=["content"],Nn={class:"additional-info"},Hn={class:"info-content"},On={class:"details-container"},Bn={class:"info-list"},Kn={key:0},Vn={key:1},Un={key:2},Fn={key:3},Wn={key:4},zn={key:5},qn={key:6},Yn={key:7},Gn={key:8},jn={class:"content-info"},Xn={key:0,class:"content-description-text"},Zn={key:2,class:"staff-section"},Qn={class:"staff-categories"},Jn={key:0,class:"staff-category"},el={class:"staff-list"},tl=["href","title"],ol=["alt"],sl={class:"staff-name"},nl={key:0,class:"staff-role"},ll={key:3,class:"yt-video-container"},il={key:4,class:"related-movies"},al={key:5,class:"related-movies"},rl={__name:"MovieInfo",setup(f){const g=k(!0),N=Te(),P=zt(),I=go(),V=qt(),$=k(V.params.kp_id),T=k(""),h=k(null),o=k(null),E=bo(),U=Io().areTrailersActive,M=k(null),H=()=>{if(o.value){const d=o.value.name_ru||o.value.name_en||o.value.name_original||"Информация о фильме";document.title=d}},W=d=>(d||[]).map(s=>({kp_id:s.film_id,poster:s.poster_url_preview||s.poster_url,title:s.name_ru||s.name_en||s.name_original})),b=d=>{if(typeof d!="number")return;const s=Math.floor(d/60),y=d%60;return"".concat(s," ч. ").concat(y," мин.")},l=k(!1),v=k({top:"0px",left:"0px"}),m=d=>{l.value=!0,v.value={top:"".concat(d.pageY+10,"px"),left:"".concat(d.pageX-70,"px")}},B=k(null),Me=async()=>{try{const d=[o.value.name_ru||o.value.name_en||o.value.name_original,...o.value.year?[o.value.year]:[],...o.value.film_length?[b(o.value.film_length)]:[]];await navigator.clipboard.writeText(d.join(", ")),B.value.showNotification("Скопировано")}catch(d){console.error("Ошибка копирования:",d)}},X=async(d=!0)=>{var s,y,Y,J,R,G,ee,Ce;try{let j;if($.value.startsWith("shiki")?j=await $o($.value):j=await ho($.value,P.token),Array.isArray(j)&&j.length===0)throw new Error("Данные не найдены. Пожалуйста, повторите поиск.");o.value=j,$.value.startsWith("shiki")?o.value={...o.value,title:o.value.name_ru||o.value.name_en,name_original:o.value.name_en,short_description:o.value.slogan}:o.value={...o.value,title:o.value.name_ru||o.value.name_en||o.value.name_original,kinopoisk_id:$.value},E.setHeaderContent({text:o.value.title,imageUrl:o.value.logo_url}),H();const z={kp_id:$.value,title:((s=o.value)==null?void 0:s.name_ru)||((y=o.value)==null?void 0:y.name_en)||((Y=o.value)==null?void 0:Y.name_original),poster:((J=o.value)==null?void 0:J.poster_url)||((R=o.value)==null?void 0:R.cover_url)||((G=o.value)==null?void 0:G.screenshots[0]),year:(ee=o.value)==null?void 0:ee.year,type:(Ce=o.value)==null?void 0:Ce.type};if($.value.startsWith("shiki"))if(o.value.screenshots&&o.value.screenshots.length>0){const ve=Math.floor(Math.random()*o.value.screenshots.length),Le=o.value.screenshots[ve];I.updateMoviePoster(Le)}else z.poster&&I.updateMoviePoster(z.poster);else z.poster&&I.updateMoviePoster(z.poster);if(D(()=>N.isHistoryAllowed).value&&z.kp_id&&z.title&&d)if(P.token)try{await Xt(z.kp_id,_.HISTORY)}catch(ve){console.error("Ошибка при добавлении в историю:",ve)}else N.addToHistory({...z})}catch(j){const{message:z,code:ue}=Oe(j);T.value=z,h.value=ue,console.error("Ошибка при загрузке информации о фильмах:",j)}},F=D(()=>{var d,s;return console.log("Трейлеры:",(d=o.value)==null?void 0:d.videos),(s=o.value)==null?void 0:s.videos}),p=D(()=>{var d;return W((d=o.value)==null?void 0:d.sequels_and_prequels)}),re=D(()=>{var d;return W((d=o.value)==null?void 0:d.similars)}),ce=d=>{if(d.altKey&&d.keyCode===84&&document.querySelector(".player-container")){const y=document.querySelector(".theater-mode-btn");y&&y.click()}};Re(async()=>{await X(),g.value=!1,document.addEventListener("keydown",ce)}),_o(async()=>{E.clearHeaderContent(),document.removeEventListener("keydown",ce)}),fe(()=>V.params.kp_id,async d=>{d&&d!==$.value&&(E.clearHeaderContent(),$.value=d,M.value=null,await X(),g.value=!1)},{immediate:!0}),fe(o,()=>{H()},{deep:!0});const Q=d=>{var s,y;return((y=(s=o.value)==null?void 0:s.staff)==null?void 0:y.filter(Y=>Y.profession_key===d))||[]},ke=()=>{window.open("https://www.kinopoisk.ru/film/".concat($.value,"/cast/"),"_blank")};return(d,s)=>{var Y,J;const y=wo("lazy");return n(),i(Z,null,[e("div",cn,[e("div",mn,[g.value?(n(),i("div",pn,[e("div",fn,[s[3]||(s[3]=Ht('<div class="movie-skeleton__header" data-v-b1c86b54><div class="movie-skeleton__title" data-v-b1c86b54></div></div><div class="movie-skeleton__ratings" data-v-b1c86b54><div class="movie-skeleton__rating-item" data-v-b1c86b54></div><div class="movie-skeleton__rating-item" data-v-b1c86b54></div><div class="movie-skeleton__rating-item" data-v-b1c86b54></div></div>',2)),e("div",kn,[ae(Zt)]),s[4]||(s[4]=Ht('<div class="movie-skeleton__controls" data-v-b1c86b54><div class="movie-skeleton__control-btn" data-v-b1c86b54></div><div class="movie-skeleton__control-btn" data-v-b1c86b54></div><div class="movie-skeleton__control-btn" data-v-b1c86b54></div><div class="movie-skeleton__control-btn" data-v-b1c86b54></div><div class="movie-skeleton__control-btn" data-v-b1c86b54></div></div><div class="movie-skeleton__additional-info" data-v-b1c86b54><div class="movie-skeleton__section-title" data-v-b1c86b54></div><div class="movie-skeleton__info-list" data-v-b1c86b54><div class="movie-skeleton__info-item" data-v-b1c86b54></div><div class="movie-skeleton__info-item" data-v-b1c86b54></div><div class="movie-skeleton__info-item" data-v-b1c86b54></div><div class="movie-skeleton__info-item" data-v-b1c86b54></div><div class="movie-skeleton__info-item" data-v-b1c86b54></div></div></div><div class="movie-skeleton__description" data-v-b1c86b54><div class="movie-skeleton__description-line" data-v-b1c86b54></div><div class="movie-skeleton__description-line" data-v-b1c86b54></div><div class="movie-skeleton__description-line" data-v-b1c86b54></div><div class="movie-skeleton__description-line" data-v-b1c86b54></div></div>',3))])])):c("",!0),T.value?(n(),de(jt,{key:1,message:T.value,code:h.value},null,8,["message","code"])):c("",!0),T.value?(n(),i("div",yn,[(n(),de(Ft,{key:$.value,"kp-id":$.value,"movie-info":o.value,"onUpdate:movieInfo":X},null,8,["kp-id","movie-info"]))])):c("",!0),o.value?(n(),i("div",gn,[e("div",bn,[o.value.logo_url?(n(),i("div",{key:0,class:"content-logo",onMousemove:m,onMouseleave:s[1]||(s[1]=R=>l.value=!1),onClick:Me},[s[0]||(Ot(-1,!0),(s[0]=C(e("img",{alt:"Логотип фильма",class:"content-logo"},null,512),[[y,o.value.logo_url]])).cacheIndex=0,Ot(1),s[0])],32)):(n(),i("div",{key:1,onMousemove:m,onMouseleave:s[2]||(s[2]=R=>l.value=!1),onClick:Me},[e("h1",_n,u(o.value.title),1)],32)),C(e("div",{class:"title-copy-tooltip",style:He(v.value)}," Скопировать ",4),[[A,l.value]])]),o.value.kinopoisk_id||o.value.title||o.value.imdb_id||o.value.rating_imdb||o.value.shikimori_id?(n(),i("div",wn,[o.value.kinopoisk_id?(n(),de(dn,{key:0,"kp-id":o.value.kinopoisk_id,"show-dash":!0},null,8,["kp-id"])):c("",!0),o.value.kinopoisk_id?(n(),i("div",$n,[e("a",{href:"https://www.kinopoisk.ru/film/".concat(o.value.kinopoisk_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},[s[5]||(s[5]=e("img",{src:Kt,alt:"КП",class:"rating-logo"},null,-1)),e("span",null,u(o.value.rating_kinopoisk?o.value.rating_kinopoisk:"—"),1),s[6]||(s[6]=e("img",{src:me,alt:"Внешняя ссылка",class:"external-link-icon"},null,-1))],8,hn)])):c("",!0),!o.value.kinopoisk_id&&o.value.title?(n(),i("div",Mn,[e("a",{href:"https://www.kinopoisk.ru/index.php?kp_query=".concat(encodeURIComponent(o.value.title+(o.value.year?" "+o.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},[s[7]||(s[7]=e("img",{src:Kt,alt:"КП",class:"rating-logo"},null,-1)),e("span",null,u(o.value.rating_kinopoisk?o.value.rating_kinopoisk:"—"),1),s[8]||(s[8]=e("img",{src:me,alt:"Внешняя ссылка",class:"external-link-icon"},null,-1))],8,Cn)])):c("",!0),o.value.imdb_id?(n(),i("div",An,[e("a",{href:"https://www.imdb.com/title/".concat(o.value.imdb_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},[s[9]||(s[9]=e("img",{src:Vt,alt:"IMDb",class:"rating-logo"},null,-1)),e("span",null,u(o.value.rating_imdb?o.value.rating_imdb:"—"),1),s[10]||(s[10]=e("img",{src:me,alt:"Внешняя ссылка",class:"external-link-icon"},null,-1))],8,In)])):c("",!0),!o.value.imdb_id&&o.value.title?(n(),i("div",En,[e("a",{href:"https://www.imdb.com/find/?q=".concat(encodeURIComponent(o.value.title+(o.value.year?" "+o.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},[s[11]||(s[11]=e("img",{src:Vt,alt:"IMDb",class:"rating-logo"},null,-1)),e("span",null,u(o.value.rating_imdb?o.value.rating_imdb:"—"),1),s[12]||(s[12]=e("img",{src:me,alt:"Внешняя ссылка",class:"external-link-icon"},null,-1))],8,Tn)])):c("",!0),o.value.shikimori_id?(n(),i("div",Rn,[e("a",{href:"https://shikimori.one/animes/".concat(o.value.shikimori_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},s[13]||(s[13]=[e("img",{src:Eo,alt:"Shiki",class:"rating-logo"},null,-1),e("img",{src:me,alt:"Внешняя ссылка",class:"external-link-icon"},null,-1)]),8,Ln)])):c("",!0),o.value.imdb_id?(n(),i("div",Pn,[e("a",{href:"https://www.imdb.com/title/".concat(o.value.imdb_id,"/parentalguide"),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},s[14]||(s[14]=[e("span",null,"Parents Guide",-1),e("img",{src:me,alt:"Внешняя ссылка",class:"external-link-icon"},null,-1)]),8,Sn)])):c("",!0)])):c("",!0),(n(),de(Ft,{key:$.value,"kp-id":$.value,"movie-info":o.value,"onUpdate:movieInfo":X},null,8,["kp-id","movie-info"])),e("meta",{name:"title-and-year",content:o.value.type==="FILM"&&o.value.year?"".concat(o.value.title," (").concat(o.value.year,")"):o.value.title},null,8,xn),o.value.name_original?(n(),i("meta",{key:1,name:"original-title",content:o.value.name_original},null,8,Dn)):c("",!0),e("div",Nn,[s[24]||(s[24]=e("h2",{class:"additional-info-title"},"Подробнее",-1)),e("div",Hn,[e("div",On,[e("ul",Bn,[o.value.type&&L(Bt)[o.value.type]?(n(),i("li",Kn,[s[15]||(s[15]=e("strong",null,"Тип:",-1)),O(" "+u(L(Bt)[o.value.type]),1)])):c("",!0),o.value.year?(n(),i("li",Vn,[s[16]||(s[16]=e("strong",null,"Год выпуска:",-1)),O(" "+u(o.value.year),1)])):c("",!0),o.value.title?(n(),i("li",Un,[s[17]||(s[17]=e("strong",null,"Название:",-1)),O(" "+u(o.value.title),1)])):c("",!0),o.value.name_original?(n(),i("li",Fn,[s[18]||(s[18]=e("strong",null,"Оригинальное название:",-1)),O(" "+u(o.value.name_original),1)])):c("",!0),o.value.slogan?(n(),i("li",Wn,[s[19]||(s[19]=e("strong",null,"Слоган:",-1)),O(" "+u(o.value.slogan),1)])):c("",!0),o.value.production_companies?(n(),i("li",zn,[s[20]||(s[20]=e("strong",null,"Продакшн:",-1)),O(" "+u(o.value.production_companies),1)])):c("",!0),(Y=o.value.countries)!=null&&Y.length?(n(),i("li",qn,[s[21]||(s[21]=e("strong",null,"Страна производства:",-1)),O(" "+u(o.value.countries.map(R=>R.country).join(", ")),1)])):c("",!0),(J=o.value.genres)!=null&&J.length?(n(),i("li",Yn,[s[22]||(s[22]=e("strong",null,"Жанры:",-1)),O(" "+u(o.value.genres.map(R=>R.genre).join(", ")),1)])):c("",!0),o.value.film_length?(n(),i("li",Gn,[s[23]||(s[23]=e("strong",null,"Продолжительность:",-1)),O(" "+u(b(o.value.film_length)),1)])):c("",!0)])])])]),e("div",jn,[o.value.description?(n(),i("p",Xn,u(o.value.description),1)):c("",!0)]),o.value.staff?(n(),i("div",Zn,[e("div",Qn,[Q("ACTOR").length?(n(),i("div",Jn,[s[26]||(s[26]=e("h3",{class:"additional-info-title"},"Актёры",-1)),e("div",el,[(n(!0),i(Z,null,pe(Q("ACTOR").slice(0,5),R=>(n(),i("div",{key:R.staff_id,class:"staff-item"},[e("a",{href:"https://www.kinopoisk.ru/name/".concat(R.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-link",title:R.description||""},[C(e("img",{alt:R.name_ru,class:"staff-photo"},null,8,ol),[[y,R.poster_url]]),e("span",sl,u(R.name_ru||R.name_en),1),R.description?(n(),i("span",nl,u(R.description),1)):c("",!0)],8,tl)]))),128)),e("button",{class:"expand-circle-button",onClick:ke,title:"Весь состав"},s[25]||(s[25]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M18 6L6 18"}),e("path",{d:"M6 6l12 12"})],-1)]))])])):c("",!0)])])):c("",!0),F.value.length&&L(U)?(n(),i("div",ll,[ae(sn,{videos:F.value,"active-video-index":M.value,onSelect:d.playTrailer},null,8,["videos","active-video-index","onSelect"])])):c("",!0),p.value.length?(n(),i("div",il,[s[27]||(s[27]=e("h2",null,"Сиквелы и приквелы",-1)),ae(L(Ut),{"movies-list":p.value,loading:!1,"is-history":!1},null,8,["movies-list"])])):c("",!0),re.value.length?(n(),i("div",al,[s[28]||(s[28]=e("h2",null,"Похожие",-1)),ae(L(Ut),{"movies-list":re.value,loading:!1,"is-history":!1},null,8,["movies-list"])])):c("",!0)])):c("",!0)])]),ae(Be,{ref_key:"notificationRef",ref:B},null,512)],64)}}},pl=he(rl,[["__scopeId","data-v-b1c86b54"]]);export{pl as default};
//# sourceMappingURL=MovieInfo-BMZ6kDeI.js.map
