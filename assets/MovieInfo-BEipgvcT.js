import{_ as Ie,r as m,c as B,b as n,d as l,e,s as K,t as r,K as J,g as v,L as _e,n as b,q as Yt,u as Le,i as Gt,N as Xt,z as Zt,l as be,o as Se,O as jt,x as pe,E as Qt,f as de,P as Ke,m as M,Q as A,y as S,U as $,R as fo,D as ze,S as Oe,V as ko,W as Jt,X as yo,Y as Bt,Z as go,$ as _o,a as bo,a0 as Kt,a1 as zt,a2 as $o,a3 as Vt,a4 as ho,a5 as wo}from"./index-CuZJqkBF.js";import{S as eo,_ as Co,a as Wt,b as Ut,M as Ft}from"./MovieList-C5mTbefh.js";import{N as Ve}from"./ToastMessage-BZdEm2CP.js";import{u as Mo,S as Ao,a as Io}from"./trailer-DKyUntsA.js";const ge="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVR4nO2ZQUoDMRSGR7eewHoFsVS0HkUUXNXqASqK2EURBPFIVRe6c+UN1CvUXWvbT4KvMAwzNnnJdCrmg1BKad7/v7y0b5IkiUQiCwGoAx3gQjEugZ0qxTeAIX6MKjMBnBOGS62AVWAPOHVYdlMu9YArYOhphLeBT+ALmOKGEd2QubaAK+B2zngFxt4GgDXgGZjgR8ch5oEkCi8DkvlnRcYLV0Apfqw10M7JvPkV6AN3FmVwK+WyZRnvMEe8ef/ibECyb2o+zRuwnpQAxeLNivQ0BvYyE46qEJ/8fK4ycJKp/X4V4n0MdDNfukkqEO9jwP1LDgD7BeKPgmgp04CL+KUz4Cp+qQxoxC+NAdsNm4c0hWkukkUa8BGfegiadbFDq3/2UAZ8xc+QVvzMtqcKYkBaZ5/MN5xEl2DgLGDZ1KswsC09FPJqXTZoNm5oA6kyMGI2FxqfkluJ0uMTDfhBXAHiHvCCWEL8/RLqlv1MPCf+TSZ+13WC7KnEfWlqcwAeU7GNjnbiQsG5UC1ZAEAt1UMhOpquk6zknMy9l20C2AA+MnEHRo9msuOCs9EH4Fp5TVQ0rqVs0plH4re02Qh1Oq1lCjypsp+5H3gKcD/gykTirqnFZ/ZDy+OGxpapzD+QePrM/2KkKfcGPcv7AdvRkz23G1x4JPIP+AY3r/ywUk/2JAAAAABJRU5ErkJggg==",To="/reyohoho/assets/icon-shikimori-DGvXK9Jc.svg",Be=k=>{const _=document.createElement("div");_.style.position="fixed",_.style.top="0",_.style.left="0",_.style.width="100%",_.style.height="100%",_.style.backgroundColor="rgba(0, 0, 0, 0.8)",_.style.color="white",_.style.display="flex",_.style.justifyContent="center",_.style.alignItems="center",_.style.fontSize="2rem",_.style.zIndex="99000",_.textContent=k,document.body.appendChild(_),setTimeout(()=>{document.body.removeChild(_)},2e3)},Eo={class:"modal-content"},Ro={key:0},Po={key:1},Lo={class:"players-list"},So=["onClick"],xo={key:0,class:"warning-icon material-icons",title:"Внимание!"},No={key:0},Do={key:0,class:"warning-icon material-icons",title:"Внимание!"},Ho={key:1},Oo={key:0,class:"warning-icon material-icons",title:"Внимание!"},Bo=["onClick"],Ko={key:0,class:"warning-icon material-icons",title:"Внимание!"},zo={__name:"PlayerModal",props:{players:{type:Array,required:!0},selectedPlayer:{type:Object,default:null}},emits:["close","select"],setup(k,{emit:_}){const H=k,x=_,I=m(null),U=B(()=>H.players.filter(i=>!w(i)&&!o(i))),h=B(()=>H.players.some(i=>w(i))),T=B(()=>H.players.some(i=>o(i))),w=i=>i.key.toUpperCase().includes("HDREZKA"),o=i=>i.key.toUpperCase().includes("KODIK"),E=i=>i.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"").replace(/KODIK>/,"").trim(),N=i=>{x("select",i),x("close")},F=i=>H.selectedPlayer&&H.selectedPlayer.key===i.key,C=i=>H.selectedPlayer?i==="hdrezka"&&w(H.selectedPlayer)||i==="kodik"&&o(H.selectedPlayer):!1,D=i=>{I.value=i},q=()=>{I.value=null},y=i=>{let d=H.players.filter(g=>i==="hdrezka"&&w(g)||i==="kodik"&&o(g));return i==="kodik"?d.sort((g,te)=>E(g.translate).localeCompare(E(te.translate))):d},f=i=>y(i).some(d=>d.warning);return(i,d)=>(l(),n("div",{class:"modal",onClick:d[3]||(d[3]=Yt(g=>i.$emit("close"),["self"]))},[e("div",Eo,[e("button",{class:"close",onClick:d[0]||(d[0]=g=>i.$emit("close"))},"×"),I.value?(l(),n("h2",Po,[e("button",{class:"back-btn",onClick:q},"← Назад"),K(" "+r(I.value==="hdrezka"?"ReYohoho - HDrezka":"Kodik"),1)])):(l(),n("h2",Ro,"Выберите плеер")),e("ul",Lo,[I.value?(l(!0),n(J,{key:1},_e(y(I.value),g=>(l(),n("li",{key:g.key},[e("button",{class:b(["player-item",{active:F(g)}]),onClick:te=>N(g)},[K(r(E(g.translate))+" ",1),g.warning?(l(),n("span",Ko,"warning")):v("",!0)],10,Bo)]))),128)):(l(),n(J,{key:0},[(l(!0),n(J,null,_e(U.value,g=>(l(),n("li",{key:g.key},[e("button",{class:b(["player-item",{active:F(g)}]),onClick:te=>N(g)},[K(r(E(g.translate))+" ",1),g.warning?(l(),n("span",xo,"warning")):v("",!0)],10,So)]))),128)),h.value?(l(),n("li",No,[e("button",{class:b(["group-item",{active:C("hdrezka")}]),onClick:d[1]||(d[1]=g=>D("hdrezka"))},[d[4]||(d[4]=e("span",{class:"material-icons group-icon"},"folder",-1)),d[5]||(d[5]=K(" ReYohoho - HDrezka ")),f("hdrezka")?(l(),n("span",Do,"warning")):v("",!0)],2)])):v("",!0),T.value?(l(),n("li",Ho,[e("button",{class:b(["group-item",{active:C("kodik")}]),onClick:d[2]||(d[2]=g=>D("kodik"))},[d[6]||(d[6]=e("span",{class:"material-icons group-icon"},"folder",-1)),d[7]||(d[7]=K(" Kodik ")),f("kodik")?(l(),n("span",Oo,"warning")):v("",!0)],2)])):v("",!0)],64))])])]))}},Vo=Ie(zo,[["__scopeId","data-v-753ce7a2"]]),Wo={class:"players-list"},Uo=["src"],Fo={key:1,class:"controls"},qo={class:"main-controls"},Yo={class:"material-icons"},Go={class:"list-button-item"},Xo={class:"material-icons"},Zo={class:"list-button-item"},jo={class:"material-icons"},Qo={class:"list-button-item"},Jo={class:"list-button-item"},es={class:"material-icons"},ts={class:"list-button-item"},os={class:"material-icons"},ss={class:"tooltip-container"},ls={class:"material-icons"},ns={class:"tooltip-container"},is={class:"tooltip-container"},as={class:"tooltip-container"},rs={class:"tooltip-container"},us={class:"material-symbols-outlined"},vs={class:"custom-tooltip"},ds={class:"tooltip-container"},cs={class:"current-ratio"},ms=["onClick"],ps={key:0,class:"tooltip-container"},fs={class:"custom-tooltip"},ks={key:1,class:"tooltip-container"},ys={class:"custom-tooltip"},gs={key:0,class:"desktop-list-buttons"},_s={class:"tooltip-container"},bs={class:"material-icons"},$s={class:"custom-tooltip"},hs={class:"tooltip-container"},ws={class:"material-icons"},Cs={class:"custom-tooltip"},Ms={class:"tooltip-container"},As={class:"custom-tooltip"},Is={class:"tooltip-container"},Ts={class:"material-icons"},Es={class:"custom-tooltip"},Rs={class:"tooltip-container"},Ps={class:"material-icons"},Ls={class:"custom-tooltip"},Ss={key:1,class:"mobile-list-buttons"},xs={class:"tooltip-container"},Ns={class:"material-icons"},Ds={class:"custom-tooltip"},Hs={class:"tooltip-container"},Os={class:"material-icons"},Bs={class:"custom-tooltip"},Ks={class:"tooltip-container"},zs={class:"custom-tooltip"},Vs={class:"tooltip-container"},Ws={class:"material-icons"},Us={class:"custom-tooltip"},Fs={class:"tooltip-container"},qs={class:"material-icons"},Ys={class:"custom-tooltip"},Gs={__name:"PlayerComponent",props:{kpId:String,movieInfo:{type:Object,default:()=>({})}},emits:["update:selectedPlayer","update:movieInfo"],setup(k,{emit:_}){const H=Le(),x=Mo(),I=Gt(),U=Xt(),h=Zt(),T=m(U.params.kp_id),w=k,o=_,E=m([]),N=m(null),F=m(!0),C=m(!1),D=m(!1),q=m(null),y=m(null),f=m(!1),i=m(""),d=m(null),g=m(window.innerHeight*.9),te=B(()=>"".concat(g.value,"px")),oe=B(()=>H.isMobile),Y=B(()=>!!window.electronAPI),c=m(null),ee=m(!1);let fe=null;const G=m(null),j=m(null),z=m(null),ke=()=>{if(!j.value||!z.value)return;const u=j.value.getBoundingClientRect(),t=z.value.getBoundingClientRect(),O=window.innerHeight;u.bottom+t.height>O?(z.value.style.top="auto",z.value.style.bottom="100%",z.value.style.marginTop="0",z.value.style.marginBottom="12px",z.value.style.transform="translateX(-50%)"):(z.value.style.top="100%",z.value.style.bottom="auto",z.value.style.marginTop="12px",z.value.style.marginBottom="0",z.value.style.transform="translateX(-50%)")},R=u=>{c.value=u,ee.value=!1,clearTimeout(fe),Oe(()=>{ke()})},se=()=>{ee.value||(fe=setTimeout(()=>{c.value=null},300))},p=()=>{ee.value=!0,clearTimeout(fe)},s=()=>{ee.value=!1,c.value=null},P=B({get:()=>x.aspectRatio,set:u=>x.updateAspectRatio(u)}),V=B({get:()=>x.isCentered,set:u=>x.updateCentering(u)}),ce=B(()=>{var u,t,O,Z,ne,ie,ae,re,ue,ve;return((t=(u=w.movieInfo)==null?void 0:u.lists)==null?void 0:t.isFavorite)||((Z=(O=w.movieInfo)==null?void 0:O.lists)==null?void 0:Z.isWatching)||((ie=(ne=w.movieInfo)==null?void 0:ne.lists)==null?void 0:ie.isLater)||((re=(ae=w.movieInfo)==null?void 0:ae.lists)==null?void 0:re.isCompleted)||((ve=(ue=w.movieInfo)==null?void 0:ue.lists)==null?void 0:ve.isAbandoned)}),L=B(()=>x.preferredPlayer),Te=m(0),me=u=>u.toUpperCase(),ye=()=>{if(C.value||!y.value)return;const[u,t]=P.value.split(":").map(Number);g.value=window.innerHeight*.9,Te.value=Math.min(y.value.clientWidth*(t/u),g.value)},Q=B(()=>{if(C.value)return{};const[u,t]=P.value.split(":").map(Number),O=g.value*(u/t);return{width:"100%",maxWidth:"".concat(O,"px"),maxHeight:te.value,margin:"0 auto",overflow:"hidden"}}),X=B(()=>{const[u,t]=P.value.split(":").map(Number);return{position:"relative",width:"100%",paddingTop:"".concat(t/u*100,"%")}}),le=()=>{y.value&&setTimeout(()=>{Oe(()=>{y.value.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})},500)},$e=async()=>{try{i.value="",d.value=null;const u=await fo(w.kpId);if(E.value=Object.entries(u).map(([t,O])=>({key:t.toUpperCase(),...O})),E.value.length>0){if(L.value){const t=me(L.value),O=E.value.find(Z=>me(Z.key)===t);N.value=O||E.value[0]}else N.value=E.value[0];o("update:selectedPlayer",N.value)}}catch(u){const{message:t,code:O}=ze(u);i.value=t,d.value=O,console.error("Ошибка при загрузке плееров:",u)}},xe=()=>{f.value=!0},We=()=>{f.value=!1},to=u=>{var t;if(((t=N.value)==null?void 0:t.key)===u.key){We();return}N.value=u,F.value=!0,x.updatePreferredPlayer(me(u.key)),o("update:selectedPlayer",u)},oo=()=>{Y.value?window.electronAPI.sendHotKey("F2"):(Be("Доступно только в приложении ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},so=()=>{Y.value?window.electronAPI.sendHotKey("F3"):(Be("Доступно только в приложении ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},lo=()=>{Y.value?window.electronAPI.sendHotKey("F4"):(Be("Доступно только в приложении ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},Ee=()=>{C.value=!C.value,C.value?(window.addEventListener("mousemove",Ne),document.addEventListener("keydown",De),document.body.classList.add("no-scroll")):(window.removeEventListener("mousemove",Ne),document.removeEventListener("keydown",De),document.body.classList.remove("no-scroll")),D.value=C.value,Oe(()=>le())},Ue=m(null),Ne=()=>{Ue.value=setTimeout(()=>{clearTimeout(Ue.value),D.value=!1},4e3),D.value=!0},Re=B(()=>H.dimmingEnabled),no=()=>{C.value||H.toggleDimming()},De=u=>{(u.key==="Escape"&&C.value||u.altKey&&u.keyCode===84)&&Ee()},Fe=u=>{P.value=u,setTimeout(()=>{V.value&&le()},310)},io=()=>{const u="reyohoho://#".concat(T.value);try{window.location.href=u}catch(t){console.error("Ошибка при открытии ссылки:",t)}},ao=()=>{const u=window.location.href;navigator.clipboard.writeText(u).then(()=>{}),G.value.showNotification("Ссылка на фильм скопирована")},ro=()=>{F.value=!1};function uo(u){return u.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"HDRezka - ").replace(/KODIK>/,"Kodik - ").trim()}be(N,u=>{u&&(F.value=!0,x.updatePreferredPlayer(me(u.key)),o("update:selectedPlayer",u))}),be(()=>U.params.kp_id,async u=>{u&&u!==T.value&&(T.value=u,V.value&&le())},{immediate:!0});const Pe=["16:9","12:5","4:3"],vo=()=>{const t=(Pe.indexOf(P.value)+1)%Pe.length;Fe(Pe[t])},co=u=>{var O,Z,ne,ie,ae,re,ue,ve,he,we,Ce,Me,Ae;return(Ae={[$.FAVORITE]:((Z=(O=w.movieInfo)==null?void 0:O.lists)==null?void 0:Z.isFavorite)||!1,[$.HISTORY]:((ie=(ne=w.movieInfo)==null?void 0:ne.lists)==null?void 0:ie.isHistory)||!1,[$.LATER]:((re=(ae=w.movieInfo)==null?void 0:ae.lists)==null?void 0:re.isLater)||!1,[$.COMPLETED]:((ve=(ue=w.movieInfo)==null?void 0:ue.lists)==null?void 0:ve.isCompleted)||!1,[$.ABANDONED]:((we=(he=w.movieInfo)==null?void 0:he.lists)==null?void 0:we.isAbandoned)||!1,[$.WATCHING]:((Me=(Ce=w.movieInfo)==null?void 0:Ce.lists)==null?void 0:Me.isWatching)||!1}[u])!=null?Ae:!1},W=async u=>{if(!I.token){G.value.showNotification('Необходимо <a class="auth-link">авторизоваться</a>',5e3,{onClick:mo});return}try{const t={[$.FAVORITE]:"избранное",[$.HISTORY]:"историю",[$.LATER]:'список "Смотреть позже"',[$.COMPLETED]:'список "Просмотрено"',[$.ABANDONED]:'список "Брошено"',[$.WATCHING]:'список "Смотрю"'};co(u)?(await ko(T.value,u),G.value.showNotification("Удалено из ".concat(t[u]))):(await Jt(T.value,u),G.value.showNotification("Добавлено в ".concat(t[u])))}catch(t){const{message:O,code:Z}=ze(t);G.value.showNotification("".concat(O," ").concat(Z))}o("update:movieInfo")},mo=()=>{h.push("/login")},He=B(()=>x.showFavoriteTooltip),po=()=>{h.push("/settings"),s()};return Se(()=>{F.value=!0,$e(),oe.value&&(P.value="4:3"),ye(),window.addEventListener("resize",ye),window.addEventListener("resize",ke),V.value&&le()}),jt(()=>{window.removeEventListener("resize",ye),window.removeEventListener("resize",ke),window.removeEventListener("mousemove",Ne),document.removeEventListener("keydown",De),document.body.classList.remove("no-scroll")}),(u,t)=>{var O,Z,ne,ie,ae,re,ue,ve,he,we,Ce,Me,Ae,qe,Ye,Ge,Xe,Ze,je,Qe,Je,et,tt,ot,st,lt,nt,it,at,rt,ut,vt,dt,ct,mt,pt,ft,kt,yt,gt,_t,bt,$t,ht,wt,Ct,Mt,At,It,Tt,Et,Rt,Pt,Lt,St,xt,Nt,Dt,Ht,Ot;return i.value?(l(),pe(Qt,{key:0,message:i.value,code:d.value},null,8,["message","code"])):(l(),n(J,{key:1},[e("div",Wo,[t[54]||(t[54]=e("span",null,"Плеер:",-1)),e("button",{class:"player-btn",onClick:xe},r(N.value?uo(N.value.translate).toUpperCase():"Загрузка плееров..."),1)]),f.value?(l(),pe(Vo,{key:0,players:E.value,"selected-player":N.value,onClose:We,onSelect:to},null,8,["players","selected-player"])):v("",!0),e("div",{ref_key:"containerRef",ref:y,class:b(["player-container",{"theater-mode":C.value}]),style:Ke(C.value?{}:Q.value)},[e("div",{class:"iframe-wrapper",style:Ke(C.value?{}:X.value)},[M(e("iframe",{ref_key:"playerIframe",ref:q,src:(O=N.value)==null?void 0:O.iframe,frameborder:"0",allowfullscreen:"",webkitallowfullscreen:"",class:b(["responsive-iframe",{"theater-mode-unlock":D.value,"theater-mode-lock":C.value,dimmed:Re.value}]),onLoad:ro},null,42,Uo),[[A,!F.value&&((Z=N.value)==null?void 0:Z.iframe)]]),F.value?(l(),pe(eo,{key:0})):v("",!0)],4),C.value?(l(),n("button",{key:0,class:b(["close-theater-btn",{visible:D.value}]),onClick:Ee}," ✖ ",2)):v("",!0)],6),C.value?v("",!0):(l(),n("div",Fo,[e("div",qo,[oe.value?v("",!0):(l(),n("div",{key:0,ref_key:"tooltipContainer",ref:j,class:"tooltip-container list-buttons-container"},[He.value?(l(),n("button",{key:0,class:b(["favorite-btn",{active:(ie=(ne=k.movieInfo)==null?void 0:ne.lists)==null?void 0:ie.isFavorite}]),onMouseenter:t[0]||(t[0]=a=>R("favorite")),onMouseleave:se,onClick:t[1]||(t[1]=a=>W(S($).FAVORITE))},[e("span",Yo,r((re=(ae=k.movieInfo)==null?void 0:ae.lists)!=null&&re.isFavorite?"favorite":"favorite_border"),1),e("span",{class:b(["material-icons dropdown-arrow",{highlighted:ce.value}])},"expand_more",2)],34)):v("",!0),M(e("div",{ref_key:"tooltip",ref:z,class:"custom-tooltip advanced-tooltip list-buttons-dropdown",onMouseenter:p,onMouseleave:s},[e("div",Go,[e("button",{class:b(["favorite-btn",{active:(ve=(ue=k.movieInfo)==null?void 0:ue.lists)==null?void 0:ve.isFavorite}]),onClick:t[2]||(t[2]=a=>W(S($).FAVORITE))},[e("span",Xo,r((we=(he=k.movieInfo)==null?void 0:he.lists)!=null&&we.isFavorite?"favorite":"favorite_border"),1),t[55]||(t[55]=e("span",{class:"button-label"},"В избранное",-1))],2)]),e("div",Zo,[e("button",{class:b(["watching-btn",{active:(Me=(Ce=k.movieInfo)==null?void 0:Ce.lists)==null?void 0:Me.isWatching}]),onClick:t[3]||(t[3]=a=>W(S($).WATCHING))},[e("span",jo,r((qe=(Ae=k.movieInfo)==null?void 0:Ae.lists)!=null&&qe.isWatching?"visibility_off":"visibility"),1),t[56]||(t[56]=e("span",{class:"button-label"},"Смотрю",-1))],2)]),e("div",Qo,[e("button",{class:b(["later-btn",{active:(Ge=(Ye=k.movieInfo)==null?void 0:Ye.lists)==null?void 0:Ge.isLater}]),onClick:t[4]||(t[4]=a=>W(S($).LATER))},t[57]||(t[57]=[e("span",{class:"material-icons"},"watch_later",-1),e("span",{class:"button-label"},"Смотреть позже",-1)]),2)]),e("div",Jo,[e("button",{class:b(["completed-btn",{active:(Ze=(Xe=k.movieInfo)==null?void 0:Xe.lists)==null?void 0:Ze.isCompleted}]),onClick:t[5]||(t[5]=a=>W(S($).COMPLETED))},[e("span",es,r((Qe=(je=k.movieInfo)==null?void 0:je.lists)!=null&&Qe.isCompleted?"check_circle":"check_circle_outline"),1),t[58]||(t[58]=e("span",{class:"button-label"},"Просмотрено",-1))],2)]),e("div",ts,[e("button",{class:b(["abandoned-btn",{active:(et=(Je=k.movieInfo)==null?void 0:Je.lists)==null?void 0:et.isAbandoned}]),onClick:t[6]||(t[6]=a=>W(S($).ABANDONED))},[e("span",os,r(((ot=(tt=k.movieInfo)==null?void 0:tt.lists)!=null&&ot.isAbandoned,"not_interested")),1),t[59]||(t[59]=e("span",{class:"button-label"},"Брошено",-1))],2)]),e("div",{class:"tooltip-hint"},[t[61]||(t[61]=e("span",{class:"material-icons"},"settings",-1)),e("span",null,[t[60]||(t[60]=K("Стиль отображения можно изменить в ")),e("a",{class:"settings-link",onClick:po},"настройках")])])],544),[[A,c.value==="favorite"&&He.value]])],512)),oe.value?v("",!0):(l(),n(J,{key:1},[e("div",ss,[e("button",{class:b(["dimming-btn",{active:Re.value}]),onMouseenter:t[7]||(t[7]=a=>R("dimming")),onMouseleave:t[8]||(t[8]=a=>c.value=null),onClick:no},[e("span",ls,r(Re.value?"light_mode":"dark_mode"),1)],34),M(e("div",{class:"custom-tooltip"},r(Re.value?"Отключить затемнение":"Включить затемнение"),513),[[A,c.value==="dimming"]])]),e("div",ns,[e("button",{class:b(["blur-btn",{"electron-only":!Y.value}]),onMouseenter:t[9]||(t[9]=a=>R("blur")),onMouseleave:t[10]||(t[10]=a=>c.value=null),onClick:oo},t[62]||(t[62]=[e("span",{class:"material-icons"},"blur_on",-1)]),34),M(e("div",{class:"custom-tooltip"},r(Y.value?"Блюр":"Блюр, функция доступна в приложении"),513),[[A,c.value==="blur"]])]),e("div",is,[e("button",{class:b(["material-symbols-outlined",{"electron-only":!Y.value}]),onMouseenter:t[11]||(t[11]=a=>R("compressor")),onMouseleave:t[12]||(t[12]=a=>c.value=null),onClick:so},t[63]||(t[63]=[e("span",{class:"material-icons"},"graphic_eq",-1)]),34),M(e("div",{class:"custom-tooltip"},r(Y.value?"Компрессор":"Компрессор, функция доступна в приложении"),513),[[A,c.value==="compressor"]])]),e("div",as,[e("button",{class:b(["mirror-btn",{"electron-only":!Y.value}]),onMouseenter:t[13]||(t[13]=a=>R("mirror")),onMouseleave:t[14]||(t[14]=a=>c.value=null),onClick:lo},t[64]||(t[64]=[e("span",{class:"material-icons"},"flip",-1)]),34),M(e("div",{class:"custom-tooltip"},r(Y.value?"Зеркало":"Зеркало, функция доступна в приложении"),513),[[A,c.value==="mirror"]])]),e("div",rs,[e("button",{class:"theater-mode-btn",onMouseenter:t[15]||(t[15]=a=>R("theater")),onMouseleave:t[16]||(t[16]=a=>c.value=null),onClick:Ee},[e("span",us,r(C.value?"fullscreen_exit":"aspect_ratio"),1)],32),M(e("div",vs,[K(r(C.value?"Выйти из театрального режима":"Театральный режим")+" ",1),t[65]||(t[65]=e("span",{class:"shortcut-hint"},"Alt+T",-1))],512),[[A,c.value==="theater"]])]),e("div",ds,[e("button",{class:"aspect-ratio-dropdown-btn",onMouseenter:t[17]||(t[17]=a=>R("aspect_ratio")),onMouseleave:se,onClick:vo},[e("span",cs,r(P.value),1)],32),M(e("div",{class:"custom-tooltip advanced-tooltip aspect-ratio-dropdown",onMouseenter:p,onMouseleave:s},[(l(),n(J,null,_e(Pe,a=>e("div",{key:a,class:b(["aspect-ratio-option",{active:P.value===a}]),onClick:cn=>Fe(a)},r(a),11,ms)),64))],544),[[A,c.value==="aspect_ratio"]])]),e("div",{class:"tooltip-container",onMouseenter:t[19]||(t[19]=a=>R("centering")),onMouseleave:se},[e("button",{class:"center-btn",onClick:le},t[66]||(t[66]=[e("span",{class:"material-icons"},"center_focus_strong",-1)])),M(e("div",{class:"custom-tooltip advanced-tooltip",onMouseenter:p,onMouseleave:s},[t[67]||(t[67]=K(" Отцентрировать плеер ")),de(Ao,{modelValue:V.value,"onUpdate:modelValue":t[18]||(t[18]=a=>V.value=a),title:"Автоцентрирование плеера"},null,8,["modelValue"]),t[68]||(t[68]=e("span",{class:"tooltip-title"},"Автоцентрирование плеера",-1))],544),[[A,c.value==="centering"]])],32),Y.value?v("",!0):(l(),n("div",ps,[e("button",{class:"app-link-btn",onMouseenter:t[20]||(t[20]=a=>R("app_link")),onMouseleave:t[21]||(t[21]=a=>c.value=null),onClick:io},t[69]||(t[69]=[e("span",{class:"material-icons"},"open_in_new",-1)]),32),M(e("div",fs," Открыть в приложении ",512),[[A,c.value==="app_link"]])])),Y.value?(l(),n("div",ks,[e("button",{class:"copy-link-btn",onMouseenter:t[22]||(t[22]=a=>R("copy_link")),onMouseleave:t[23]||(t[23]=a=>c.value=null),onClick:ao},t[70]||(t[70]=[e("span",{class:"material-icons"},"content_copy",-1)]),32),M(e("div",ys," Скопировать ссылку ",512),[[A,c.value==="copy_link"]])])):v("",!0)],64))]),!oe.value&&!He.value?(l(),n("div",gs,[e("div",_s,[e("button",{class:b(["favorite-btn",{active:(lt=(st=k.movieInfo)==null?void 0:st.lists)==null?void 0:lt.isFavorite}]),onMouseenter:t[24]||(t[24]=a=>R("favorite")),onMouseleave:t[25]||(t[25]=a=>c.value=null),onClick:t[26]||(t[26]=a=>W(S($).FAVORITE))},[e("span",bs,r((it=(nt=k.movieInfo)==null?void 0:nt.lists)!=null&&it.isFavorite?"favorite":"favorite_border"),1)],34),M(e("div",$s,r("В избранное"),512),[[A,c.value==="favorite"]])]),e("div",hs,[e("button",{class:b(["watching-btn",{active:(rt=(at=k.movieInfo)==null?void 0:at.lists)==null?void 0:rt.isWatching}]),onMouseenter:t[27]||(t[27]=a=>R("watching")),onMouseleave:t[28]||(t[28]=a=>c.value=null),onClick:t[29]||(t[29]=a=>W(S($).WATCHING))},[e("span",ws,r((vt=(ut=k.movieInfo)==null?void 0:ut.lists)!=null&&vt.isWatching?"visibility_off":"visibility"),1)],34),M(e("div",Cs,r("Смотрю"),512),[[A,c.value==="watching"]])]),e("div",Ms,[e("button",{class:b(["later-btn",{active:(ct=(dt=k.movieInfo)==null?void 0:dt.lists)==null?void 0:ct.isLater}]),onMouseenter:t[30]||(t[30]=a=>R("later")),onMouseleave:t[31]||(t[31]=a=>c.value=null),onClick:t[32]||(t[32]=a=>W(S($).LATER))},t[71]||(t[71]=[e("span",{class:"material-icons"},"watch_later",-1)]),34),M(e("div",As,r("Смотреть позже"),512),[[A,c.value==="later"]])]),e("div",Is,[e("button",{class:b(["completed-btn",{active:(pt=(mt=k.movieInfo)==null?void 0:mt.lists)==null?void 0:pt.isCompleted}]),onMouseenter:t[33]||(t[33]=a=>R("completed")),onMouseleave:t[34]||(t[34]=a=>c.value=null),onClick:t[35]||(t[35]=a=>W(S($).COMPLETED))},[e("span",Ts,r((kt=(ft=k.movieInfo)==null?void 0:ft.lists)!=null&&kt.isCompleted?"check_circle":"check_circle_outline"),1)],34),M(e("div",Es,r("Просмотрено"),512),[[A,c.value==="completed"]])]),e("div",Rs,[e("button",{class:b(["abandoned-btn",{active:(gt=(yt=k.movieInfo)==null?void 0:yt.lists)==null?void 0:gt.isAbandoned}]),onMouseenter:t[36]||(t[36]=a=>R("abandoned")),onMouseleave:t[37]||(t[37]=a=>c.value=null),onClick:t[38]||(t[38]=a=>W(S($).ABANDONED))},[e("span",Ps,r(((bt=(_t=k.movieInfo)==null?void 0:_t.lists)!=null&&bt.isAbandoned,"not_interested")),1)],34),M(e("div",Ls,r("Брошено"),512),[[A,c.value==="abandoned"]])])])):oe.value?(l(),n("div",Ss,[e("div",xs,[e("button",{class:b(["favorite-btn",{active:(ht=($t=k.movieInfo)==null?void 0:$t.lists)==null?void 0:ht.isFavorite}]),onMouseenter:t[39]||(t[39]=a=>R("favorite")),onMouseleave:t[40]||(t[40]=a=>c.value=null),onClick:t[41]||(t[41]=a=>W(S($).FAVORITE))},[e("span",Ns,r((Ct=(wt=k.movieInfo)==null?void 0:wt.lists)!=null&&Ct.isFavorite?"favorite":"favorite_border"),1)],34),M(e("div",Ds,r("В избранное"),512),[[A,c.value==="favorite"]])]),e("div",Hs,[e("button",{class:b(["watching-btn",{active:(At=(Mt=k.movieInfo)==null?void 0:Mt.lists)==null?void 0:At.isWatching}]),onMouseenter:t[42]||(t[42]=a=>R("watching")),onMouseleave:t[43]||(t[43]=a=>c.value=null),onClick:t[44]||(t[44]=a=>W(S($).WATCHING))},[e("span",Os,r((Tt=(It=k.movieInfo)==null?void 0:It.lists)!=null&&Tt.isWatching?"visibility_off":"visibility"),1)],34),M(e("div",Bs,r("Смотрю"),512),[[A,c.value==="watching"]])]),e("div",Ks,[e("button",{class:b(["later-btn",{active:(Rt=(Et=k.movieInfo)==null?void 0:Et.lists)==null?void 0:Rt.isLater}]),onMouseenter:t[45]||(t[45]=a=>R("later")),onMouseleave:t[46]||(t[46]=a=>c.value=null),onClick:t[47]||(t[47]=a=>W(S($).LATER))},t[72]||(t[72]=[e("span",{class:"material-icons"},"watch_later",-1)]),34),M(e("div",zs,r("Смотреть позже"),512),[[A,c.value==="later"]])]),e("div",Vs,[e("button",{class:b(["completed-btn",{active:(Lt=(Pt=k.movieInfo)==null?void 0:Pt.lists)==null?void 0:Lt.isCompleted}]),onMouseenter:t[48]||(t[48]=a=>R("completed")),onMouseleave:t[49]||(t[49]=a=>c.value=null),onClick:t[50]||(t[50]=a=>W(S($).COMPLETED))},[e("span",Ws,r((xt=(St=k.movieInfo)==null?void 0:St.lists)!=null&&xt.isCompleted?"check_circle":"check_circle_outline"),1)],34),M(e("div",Us,r("Просмотрено"),512),[[A,c.value==="completed"]])]),e("div",Fs,[e("button",{class:b(["abandoned-btn",{active:(Dt=(Nt=k.movieInfo)==null?void 0:Nt.lists)==null?void 0:Dt.isAbandoned}]),onMouseenter:t[51]||(t[51]=a=>R("abandoned")),onMouseleave:t[52]||(t[52]=a=>c.value=null),onClick:t[53]||(t[53]=a=>W(S($).ABANDONED))},[e("span",qs,r(((Ot=(Ht=k.movieInfo)==null?void 0:Ht.lists)!=null&&Ot.isAbandoned,"not_interested")),1)],34),M(e("div",Ys,r("Брошено"),512),[[A,c.value==="abandoned"]])])])):v("",!0)])),de(Ve,{ref_key:"notificationRef",ref:G},null,512)],64))}}},qt=Ie(Gs,[["__scopeId","data-v-88f4cda0"]]),Xs={key:0,class:"carousel-container"},Zs={class:"carousel-wrapper"},js=["onClick"],Qs=["src","alt"],Js={class:"video-name"},el={key:0,class:"video-player"},tl=["src"],ol={__name:"TrailerCarousel",props:{videos:{type:Array,required:!0},activeVideoIndex:{type:Number,default:null}},emits:["select"],setup(k,{emit:_}){const H=Le(),x=B(()=>H.isMobile),I=k,U=_,h=m(I.activeVideoIndex),T=m(null),w=m(!1),o=m(!1),E=()=>{if(!T.value)return;const{scrollLeft:y,scrollWidth:f,clientWidth:i}=T.value;w.value=y>0,o.value=y<f-i-1},N=y=>{if(!T.value)return;const f=T.value.querySelector(".carousel-item");if(!f)return;const i=f.clientWidth+16;T.value.scrollBy({left:i*y,behavior:"smooth"})},F=y=>{h.value=y,U("select",I.videos[y])},C=()=>E(),D=m([]),q=async y=>{try{return(await fetch("https://img.youtube.com/vi/".concat(y,"/0.jpg"))).ok}catch(f){return!1}};return Se(async()=>{const y=I.videos.map(async i=>await q(i.videoId)?i:null),f=await Promise.all(y);D.value=f.filter(Boolean),E(),window.addEventListener("resize",C)}),be(()=>I.videos,async y=>{const f=y.map(async d=>await q(d.videoId)?d:null),i=await Promise.all(f);D.value=i.filter(Boolean)}),be(()=>I.activeVideoIndex,y=>{h.value=y}),jt(()=>{window.removeEventListener("resize",C)}),(y,f)=>D.value.length?(l(),n("div",Xs,[f[4]||(f[4]=e("h2",null,"Трейлеры (YouTube)",-1)),e("div",Zs,[M(e("button",{class:"scroll-button left",onClick:f[0]||(f[0]=i=>N(-1))},f[2]||(f[2]=[e("span",{class:"material-symbols-outlined"},"arrow_back_ios",-1)]),512),[[A,!x.value&&w.value]]),e("div",{ref_key:"carousel",ref:T,class:"carousel",onScroll:E},[(l(!0),n(J,null,_e(D.value,(i,d)=>(l(),n("div",{key:d,class:"carousel-item",onClick:g=>F(d)},[e("img",{src:"https://img.youtube.com/vi/".concat(i.videoId,"/0.jpg"),alt:i.name},null,8,Qs),e("div",Js,r(i.name),1)],8,js))),128))],544),M(e("button",{class:"scroll-button right",onClick:f[1]||(f[1]=i=>N(1))},f[3]||(f[3]=[e("span",{class:"material-symbols-outlined"},"arrow_forward_ios",-1)]),512),[[A,!x.value&&o.value]])]),h.value!==null?(l(),n("div",el,[e("iframe",{src:k.videos[h.value].iframeUrl,frameborder:"0",allowfullscreen:""},null,8,tl)])):v("",!0)])):v("",!0)}},sl=Ie(ol,[["__scopeId","data-v-e60b5c29"]]),ll={class:"rating-container"},nl={class:"rating-display"},il={class:"average-rating"},al={class:"rating-numbers"},rl=["onClick","onMouseenter"],ul={__name:"MovieRating",props:{kpId:{type:String,required:!0},showDash:{type:Boolean,default:!1}},setup(k){const _=Le(),H=Zt(),x=k,I=m(null),U=m(null),h=m(null),T=m(0),w=m(!1),o=m(!1);let E=null;const N=()=>{E=setTimeout(()=>{w.value=!1,_.isMobile||(o.value=!1)},100)},F=()=>{E&&(clearTimeout(E),E=null),w.value=!0},C=()=>{_.isMobile&&(o.value=!o.value)},D=()=>{H.push("/login")},q=async()=>{try{const f=await yo(x.kpId);U.value=f.user_rating,h.value=f.average_rating}catch(f){console.error("Error loading rating:",f)}},y=async f=>{var i;try{f===U.value?(await Bt(x.kpId,null),U.value=null,I.value.showNotification("Оценка удалена")):(await Bt(x.kpId,f),U.value=f,I.value.showNotification("Оценка сохранена")),_.isMobile&&(o.value=!1),q()}catch(d){console.error("Error setting rating:",d),((i=d.response)==null?void 0:i.status)===401?I.value.showNotification('Для оценки необходимо <a class="auth-link">авторизоваться</a>',5e3,{onClick:D}):I.value.showNotification("Ошибка при сохранении оценки"),_.isMobile&&(o.value=!1)}};return Se(()=>{q()}),(f,i)=>(l(),n("div",ll,[e("div",nl,[e("a",{href:"#",class:"rating-link",onMouseenter:i[0]||(i[0]=d=>w.value=!0),onMouseleave:N,onClick:Yt(C,["prevent"])},[i[2]||(i[2]=e("img",{src:Co,alt:"ReYohoho",class:"rating-logo"},null,-1)),e("span",il,r(h.value?h.value.toFixed(1):"—"),1)],32),M(e("div",{class:b(["rating-tooltip",{"mobile-tooltip":S(_).isMobile}]),onMouseenter:F,onMouseleave:N},[e("div",al,[(l(),n(J,null,_e(10,d=>e("button",{key:d,class:b(["number-btn",{active:d===U.value,hover:d===T.value}]),onClick:g=>y(d),onMouseenter:g=>T.value=d,onMouseleave:i[1]||(i[1]=g=>T.value=0)},r(d),43,rl)),64))])],34),[[A,w.value||o.value]])]),de(Ve,{ref_key:"notificationRef",ref:I},null,512)]))}},vl=Ie(ul,[["__scopeId","data-v-52c65a99"]]),dl={class:"movie-info"},cl={class:"content"},ml={key:0,class:"content-card"},pl={class:"movie-skeleton"},fl={class:"movie-skeleton__player"},kl={key:2,class:"content-card"},yl={key:3,class:"content-card"},gl={class:"content-header"},_l={class:"content-title"},bl={key:0,class:"ratings-links"},$l={key:1},hl=["href"],wl={key:2},Cl=["href"],Ml={key:3},Al=["href"],Il={key:4},Tl=["href"],El={key:5},Rl=["href"],Pl={key:6},Ll=["href"],Sl=["content"],xl=["content"],Nl={class:"additional-info"},Dl={class:"info-content"},Hl={class:"details-container"},Ol={class:"info-list"},Bl={key:0},Kl={key:1},zl={key:2},Vl={key:3},Wl={key:4},Ul={key:5},Fl={key:6},ql={key:7},Yl={key:8},Gl={class:"content-info"},Xl={key:0,class:"content-description-text"},Zl={key:2,class:"staff-section"},jl={class:"staff-categories"},Ql={key:0,class:"staff-category"},Jl={class:"staff-list"},en=["href","title"],tn=["src","alt"],on={class:"staff-name"},sn={key:0,class:"staff-role"},ln=["href","title"],nn={key:3,class:"yt-video-container"},an={key:4,class:"related-movies"},rn=["title"],un={key:5,class:"related-movies"},vn=["title"],dn={__name:"MovieInfo",setup(k){const _=m(!0),H=Le(),x=Gt(),I=go(),U=Xt(),h=m(U.params.kp_id),T=m(""),w=m(null),o=m(null),E=_o(),F=Io().areTrailersActive,C=m(null),D=m(!1),q=m(!1),y=m(6),f=()=>{if(o.value){const p=o.value.name_ru||o.value.name_en||o.value.name_original||"Информация о фильме";document.title=p}},i=p=>(p||[]).map(s=>({kp_id:s.film_id,poster:s.poster_url_preview||s.poster_url,title:s.name_ru||s.name_en||s.name_original})),d=p=>{if(typeof p!="number")return;const s=Math.floor(p/60),P=p%60;return"".concat(s," ч. ").concat(P," мин.")},g=m(!1),te=m({top:"0px",left:"0px"}),oe=p=>{g.value=!0,te.value={top:"".concat(p.pageY+10,"px"),left:"".concat(p.pageX-70,"px")}},Y=m(null),c=async()=>{try{const p=[o.value.name_ru||o.value.name_en||o.value.name_original,...o.value.year?[o.value.year]:[],...o.value.film_length?[d(o.value.film_length)]:[]];await navigator.clipboard.writeText(p.join(", ")),Y.value.showNotification("Скопировано")}catch(p){console.error("Ошибка копирования:",p)}},ee=async(p=!0)=>{var s,P,V,ce,L,Te,me,ye;try{let Q;if(h.value.startsWith("shiki")?Q=await ho(h.value):Q=await wo(h.value,x.token),Array.isArray(Q)&&Q.length===0)throw new Error("Данные не найдены. Пожалуйста, повторите поиск.");o.value=Q,h.value.startsWith("shiki")?o.value={...o.value,title:o.value.name_ru||o.value.name_en,name_original:o.value.name_en,short_description:o.value.slogan}:o.value={...o.value,title:o.value.name_ru||o.value.name_en||o.value.name_original,kinopoisk_id:h.value},E.setHeaderContent({text:o.value.title,imageUrl:o.value.logo_url}),f();const X={kp_id:h.value,title:((s=o.value)==null?void 0:s.name_ru)||((P=o.value)==null?void 0:P.name_en)||((V=o.value)==null?void 0:V.name_original),poster:((ce=o.value)==null?void 0:ce.poster_url)||((L=o.value)==null?void 0:L.cover_url)||((Te=o.value)==null?void 0:Te.screenshots[0]),year:(me=o.value)==null?void 0:me.year,type:(ye=o.value)==null?void 0:ye.type};if(h.value.startsWith("shiki"))if(o.value.screenshots&&o.value.screenshots.length>0){const $e=Math.floor(Math.random()*o.value.screenshots.length),xe=o.value.screenshots[$e];I.updateMoviePoster(xe)}else X.poster&&I.updateMoviePoster(X.poster);else X.poster&&I.updateMoviePoster(X.poster);if(B(()=>H.isHistoryAllowed).value&&X.kp_id&&X.title&&p)if(x.token)try{await Jt(X.kp_id,$.HISTORY)}catch($e){console.error("Ошибка при добавлении в историю:",$e)}else H.addToHistory({...X})}catch(Q){const{message:X,code:le}=ze(Q);T.value=X,w.value=le,console.error("Ошибка при загрузке информации о фильмах:",Q)}},fe=B(()=>{var p,s;return console.log("Трейлеры:",(p=o.value)==null?void 0:p.videos),(s=o.value)==null?void 0:s.videos}),G=B(()=>{var p;return i((p=o.value)==null?void 0:p.sequels_and_prequels)}),j=B(()=>{var p;return i((p=o.value)==null?void 0:p.similars)}),z=()=>{var V;const p=((V=document.querySelector(".related-movies"))==null?void 0:V.clientWidth)||0,P=Math.floor(p/260)||6;y.value=Math.max(1,P)},ke=()=>{z()},R=p=>{if(p.altKey&&p.keyCode===84&&document.querySelector(".player-container")){const P=document.querySelector(".theater-mode-btn");P&&P.click()}};Se(async()=>{await ee(),_.value=!1,document.addEventListener("keydown",R),window.addEventListener("resize",ke),setTimeout(z,100)}),bo(async()=>{E.clearHeaderContent(),document.removeEventListener("keydown",R),window.removeEventListener("resize",ke)}),be(()=>U.params.kp_id,async p=>{p&&p!==h.value&&(E.clearHeaderContent(),h.value=p,C.value=null,await ee(),_.value=!1)},{immediate:!0}),be(o,()=>{f()},{deep:!0});const se=p=>{var s,P;return((P=(s=o.value)==null?void 0:s.staff)==null?void 0:P.filter(V=>V.profession_key===p))||[]};return(p,s)=>{var V,ce;const P=$o("lazy");return l(),n(J,null,[e("div",dl,[e("div",cl,[(_.value||!o.value)&&!T.value?(l(),n("div",ml,[e("div",pl,[s[5]||(s[5]=Kt('<div class="movie-skeleton__header" data-v-8a405647><div class="movie-skeleton__title" data-v-8a405647></div></div><div class="movie-skeleton__ratings" data-v-8a405647><div class="movie-skeleton__rating-item" data-v-8a405647></div><div class="movie-skeleton__rating-item" data-v-8a405647></div><div class="movie-skeleton__rating-item" data-v-8a405647></div></div>',2)),e("div",fl,[de(eo)]),s[6]||(s[6]=Kt('<div class="movie-skeleton__additional-info" data-v-8a405647><div class="movie-skeleton__section-title" data-v-8a405647></div><div class="movie-skeleton__info-list" data-v-8a405647><div class="movie-skeleton__info-item" data-v-8a405647></div><div class="movie-skeleton__info-item" data-v-8a405647></div><div class="movie-skeleton__info-item" data-v-8a405647></div><div class="movie-skeleton__info-item" data-v-8a405647></div><div class="movie-skeleton__info-item" data-v-8a405647></div></div></div><div class="movie-skeleton__description" data-v-8a405647><div class="movie-skeleton__description-line" data-v-8a405647></div><div class="movie-skeleton__description-line" data-v-8a405647></div><div class="movie-skeleton__description-line" data-v-8a405647></div><div class="movie-skeleton__description-line" data-v-8a405647></div></div>',2))])])):v("",!0),T.value?(l(),pe(Qt,{key:1,message:T.value,code:w.value},null,8,["message","code"])):v("",!0),T.value?(l(),n("div",kl,[(l(),pe(qt,{key:h.value,"kp-id":h.value,"movie-info":o.value,"onUpdate:movieInfo":ee},null,8,["kp-id","movie-info"]))])):v("",!0),o.value&&!_.value?(l(),n("div",yl,[e("div",gl,[o.value.logo_url?(l(),n("div",{key:0,class:"content-logo",onMousemove:oe,onMouseleave:s[1]||(s[1]=L=>g.value=!1),onClick:c},[s[0]||(zt(-1,!0),(s[0]=M(e("img",{alt:"Логотип фильма",class:"content-logo"},null,512),[[P,o.value.logo_url]])).cacheIndex=0,zt(1),s[0])],32)):(l(),n("div",{key:1,onMousemove:oe,onMouseleave:s[2]||(s[2]=L=>g.value=!1),onClick:c},[e("h1",_l,r(o.value.title),1)],32)),M(e("div",{class:"title-copy-tooltip",style:Ke(te.value)}," Скопировать ",4),[[A,g.value]])]),o.value.kinopoisk_id||o.value.title||o.value.imdb_id||o.value.rating_imdb||o.value.shikimori_id?(l(),n("div",bl,[o.value.kinopoisk_id?(l(),pe(vl,{key:0,"kp-id":o.value.kinopoisk_id,"show-dash":!0},null,8,["kp-id"])):v("",!0),o.value.kinopoisk_id?(l(),n("div",$l,[e("a",{href:"https://www.kinopoisk.ru/film/".concat(o.value.kinopoisk_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},[s[7]||(s[7]=e("img",{src:Wt,alt:"КП",class:"rating-logo"},null,-1)),e("span",null,r(o.value.rating_kinopoisk?o.value.rating_kinopoisk:"—"),1),s[8]||(s[8]=e("img",{src:ge,alt:"Внешняя ссылка",class:"external-link-icon"},null,-1))],8,hl)])):v("",!0),!o.value.kinopoisk_id&&o.value.title?(l(),n("div",wl,[e("a",{href:"https://www.kinopoisk.ru/index.php?kp_query=".concat(encodeURIComponent(o.value.title+(o.value.year?" "+o.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},[s[9]||(s[9]=e("img",{src:Wt,alt:"КП",class:"rating-logo"},null,-1)),e("span",null,r(o.value.rating_kinopoisk?o.value.rating_kinopoisk:"—"),1),s[10]||(s[10]=e("img",{src:ge,alt:"Внешняя ссылка",class:"external-link-icon"},null,-1))],8,Cl)])):v("",!0),o.value.imdb_id?(l(),n("div",Ml,[e("a",{href:"https://www.imdb.com/title/".concat(o.value.imdb_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},[s[11]||(s[11]=e("img",{src:Ut,alt:"IMDb",class:"rating-logo"},null,-1)),e("span",null,r(o.value.rating_imdb?o.value.rating_imdb:"—"),1),s[12]||(s[12]=e("img",{src:ge,alt:"Внешняя ссылка",class:"external-link-icon"},null,-1))],8,Al)])):v("",!0),!o.value.imdb_id&&o.value.title?(l(),n("div",Il,[e("a",{href:"https://www.imdb.com/find/?q=".concat(encodeURIComponent(o.value.title+(o.value.year?" "+o.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},[s[13]||(s[13]=e("img",{src:Ut,alt:"IMDb",class:"rating-logo"},null,-1)),e("span",null,r(o.value.rating_imdb?o.value.rating_imdb:"—"),1),s[14]||(s[14]=e("img",{src:ge,alt:"Внешняя ссылка",class:"external-link-icon"},null,-1))],8,Tl)])):v("",!0),o.value.shikimori_id?(l(),n("div",El,[e("a",{href:"https://shikimori.one/animes/".concat(o.value.shikimori_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},s[15]||(s[15]=[e("img",{src:To,alt:"Shiki",class:"rating-logo"},null,-1),e("img",{src:ge,alt:"Внешняя ссылка",class:"external-link-icon"},null,-1)]),8,Rl)])):v("",!0),o.value.imdb_id?(l(),n("div",Pl,[e("a",{href:"https://www.imdb.com/title/".concat(o.value.imdb_id,"/parentalguide"),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},s[16]||(s[16]=[e("span",null,"Parents Guide",-1),e("img",{src:ge,alt:"Внешняя ссылка",class:"external-link-icon"},null,-1)]),8,Ll)])):v("",!0)])):v("",!0),(l(),pe(qt,{key:h.value,"kp-id":h.value,"movie-info":o.value,"onUpdate:movieInfo":ee},null,8,["kp-id","movie-info"])),e("meta",{name:"title-and-year",content:o.value.type==="FILM"&&o.value.year?"".concat(o.value.title," (").concat(o.value.year,")"):o.value.title},null,8,Sl),o.value.name_original?(l(),n("meta",{key:1,name:"original-title",content:o.value.name_original},null,8,xl)):v("",!0),e("div",Nl,[s[26]||(s[26]=e("h2",{class:"additional-info-title"},"Подробнее",-1)),e("div",Dl,[e("div",Hl,[e("ul",Ol,[o.value.type&&S(Vt)[o.value.type]?(l(),n("li",Bl,[s[17]||(s[17]=e("strong",null,"Тип:",-1)),K(" "+r(S(Vt)[o.value.type]),1)])):v("",!0),o.value.year?(l(),n("li",Kl,[s[18]||(s[18]=e("strong",null,"Год выпуска:",-1)),K(" "+r(o.value.year),1)])):v("",!0),o.value.title?(l(),n("li",zl,[s[19]||(s[19]=e("strong",null,"Название:",-1)),K(" "+r(o.value.title),1)])):v("",!0),o.value.name_original?(l(),n("li",Vl,[s[20]||(s[20]=e("strong",null,"Оригинальное название:",-1)),K(" "+r(o.value.name_original),1)])):v("",!0),o.value.slogan?(l(),n("li",Wl,[s[21]||(s[21]=e("strong",null,"Слоган:",-1)),K(" "+r(o.value.slogan),1)])):v("",!0),o.value.production_companies?(l(),n("li",Ul,[s[22]||(s[22]=e("strong",null,"Продакшн:",-1)),K(" "+r(o.value.production_companies),1)])):v("",!0),(V=o.value.countries)!=null&&V.length?(l(),n("li",Fl,[s[23]||(s[23]=e("strong",null,"Страна производства:",-1)),K(" "+r(o.value.countries.map(L=>L.country).join(", ")),1)])):v("",!0),(ce=o.value.genres)!=null&&ce.length?(l(),n("li",ql,[s[24]||(s[24]=e("strong",null,"Жанры:",-1)),K(" "+r(o.value.genres.map(L=>L.genre).join(", ")),1)])):v("",!0),o.value.film_length?(l(),n("li",Yl,[s[25]||(s[25]=e("strong",null,"Продолжительность:",-1)),K(" "+r(d(o.value.film_length)),1)])):v("",!0)])])])]),e("div",Gl,[o.value.description?(l(),n("p",Xl,r(o.value.description),1)):v("",!0)]),o.value.staff?(l(),n("div",Zl,[e("div",jl,[se("ACTOR").length?(l(),n("div",Ql,[s[27]||(s[27]=e("h3",{class:"additional-info-title"},"Актёры",-1)),e("div",Jl,[(l(!0),n(J,null,_e(se("ACTOR").slice(0,12),L=>(l(),n("div",{key:L.staff_id,class:"staff-item"},[e("a",{href:"https://www.kinopoisk.ru/name/".concat(L.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-link",title:L.description||""},[e("img",{src:L.poster_url,alt:L.name_ru,class:"staff-photo"},null,8,tn),e("span",on,r(L.name_ru||L.name_en),1),L.description?(l(),n("span",sn,r(L.description),1)):v("",!0)],8,en)]))),128)),e("a",{class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(h.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"Показать всех ".concat(se("ACTOR").length," актеров")}," +"+r(se("ACTOR").length-12),9,ln)])])):v("",!0)])])):v("",!0),fe.value.length&&S(F)?(l(),n("div",nn,[de(sl,{videos:fe.value,"active-video-index":C.value,onSelect:p.playTrailer},null,8,["videos","active-video-index","onSelect"])])):v("",!0),G.value.length?(l(),n("div",an,[s[28]||(s[28]=e("h2",null,"Сиквелы и приквелы",-1)),de(S(Ft),{"movies-list":D.value?G.value:G.value.slice(0,y.value),loading:!1,"is-history":!1},null,8,["movies-list"]),G.value.length>y.value?(l(),n("a",{key:0,class:"expand-circle-button",onClick:s[3]||(s[3]=L=>D.value=!D.value),title:"".concat(D.value?"Скрыть":"Показать все"," (").concat(G.value.length,")")},r(D.value?"−":"+".concat(G.value.length-y.value)),9,rn)):v("",!0)])):v("",!0),j.value.length?(l(),n("div",un,[s[29]||(s[29]=e("h2",null,"Похожие",-1)),de(S(Ft),{"movies-list":q.value?j.value:j.value.slice(0,y.value),loading:!1,"is-history":!1},null,8,["movies-list"]),j.value.length>y.value?(l(),n("a",{key:0,class:"expand-circle-button",onClick:s[4]||(s[4]=L=>q.value=!q.value),title:"".concat(q.value?"Скрыть":"Показать все"," (").concat(j.value.length,")")},r(q.value?"−":"+".concat(j.value.length-y.value)),9,vn)):v("",!0)])):v("",!0)])):v("",!0)])]),de(Ve,{ref_key:"notificationRef",ref:Y},null,512)],64)}}},yn=Ie(dn,[["__scopeId","data-v-8a405647"]]);export{yn as default};
//# sourceMappingURL=MovieInfo-BEipgvcT.js.map
