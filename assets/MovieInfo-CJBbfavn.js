import{_ as ct,r as v,c as N,b as a,d as i,e as t,m as J,t as m,O as ve,g as h,P as Me,n as S,l as wt,u as en,q as Ln,N as Jn,B as tn,x as qe,o as Nt,S as xn,k as bt,E as eo,f as Le,V as Qt,p as ee,W as we,A as Y,U as K,X as io,G as ht,Y as Qe,Z as to,$ as In,a0 as Xt,a1 as ao,a2 as zn,a3 as ro,v as uo,y as kt,a4 as co,i as We,w as Mn,a5 as Jt,a6 as vo,a7 as mo,a8 as fo,a9 as go,aa as Wn,ab as po,ac as yo,a as Sn,ad as Kn,ae as Gn,af as ho,ag as bo,ah as ko,ai as wo,aj as Co,ak as _o,al as Eo,am as So,an as Io,ao as Mo}from"./index-Dh3RUt75.js";import{_ as Lo,a as Yn,b as Zn,M as Xn}from"./MovieList-B09M1LhI.js";import{p as qt,f as Ve,u as no,a as xo,b as oo}from"./useCommentFormatting-X5aRVt8X.js";import{S as so}from"./SpinnerLoading-CQdCK2vr.js";import{N as vn}from"./ToastMessage-Ck2NLB7a.js";import{u as lo,S as To,a as Ro}from"./trailer-BwkCGEiQ.js";const Zt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVR4nO2ZQUoDMRSGR7eewHoFsVS0HkUUXNXqASqK2EURBPFIVRe6c+UN1CvUXWvbT4KvMAwzNnnJdCrmg1BKad7/v7y0b5IkiUQiCwGoAx3gQjEugZ0qxTeAIX6MKjMBnBOGS62AVWAPOHVYdlMu9YArYOhphLeBT+ALmOKGEd2QubaAK+B2zngFxt4GgDXgGZjgR8ch5oEkCi8DkvlnRcYLV0Apfqw10M7JvPkV6AN3FmVwK+WyZRnvMEe8ef/ibECyb2o+zRuwnpQAxeLNivQ0BvYyE46qEJ/8fK4ycJKp/X4V4n0MdDNfukkqEO9jwP1LDgD7BeKPgmgp04CL+KUz4Cp+qQxoxC+NAdsNm4c0hWkukkUa8BGfegiadbFDq3/2UAZ8xc+QVvzMtqcKYkBaZ5/MN5xEl2DgLGDZ1KswsC09FPJqXTZoNm5oA6kyMGI2FxqfkluJ0uMTDfhBXAHiHvCCWEL8/RLqlv1MPCf+TSZ+13WC7KnEfWlqcwAeU7GNjnbiQsG5UC1ZAEAt1UMhOpquk6zknMy9l20C2AA+MnEHRo9msuOCs9EH4Fp5TVQ0rqVs0plH4re02Qh1Oq1lCjypsp+5H3gKcD/gykTirqnFZ/ZDy+OGxpapzD+QePrM/2KkKfcGPcv7AdvRkz23G1x4JPIP+AY3r/ywUk/2JAAAAABJRU5ErkJggg==",Ao="/reyohoho/assets/icon-shikimori-DGvXK9Jc.svg",Vt=c=>{const n=document.createElement("div");n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.width="100%",n.style.height="100%",n.style.backgroundColor="rgba(0, 0, 0, 0.8)",n.style.color="white",n.style.display="flex",n.style.justifyContent="center",n.style.alignItems="center",n.style.fontSize="2rem",n.style.zIndex="99000",n.textContent=c,document.body.appendChild(n),setTimeout(()=>{document.body.removeChild(n)},2e3)},Bo={key:0},No={key:1},Po={class:"players-list"},Oo=["onClick"],$o={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Fo={key:0},Uo={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},jo={key:1},Ho={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Do=["onClick"],Vo={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},qo={__name:"PlayerModal",props:{players:{type:Array,required:!0},selectedPlayer:{type:Object,default:null}},emits:["close","select"],setup(c,{emit:n}){const u=c,s=n,b=v(null),y=N(()=>u.players.filter(M=>!p(M)&&!_(M))),f=N(()=>u.players.some(M=>p(M))),w=N(()=>u.players.some(M=>_(M))),p=M=>M.key.toUpperCase().includes("HDREZKA"),_=M=>M.key.toUpperCase().includes("KODIK"),k=M=>M.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"").replace(/KODIK>/,"").trim(),l=M=>{s("select",M),s("close")},E=M=>u.selectedPlayer&&u.selectedPlayer.key===M.key,A=M=>u.selectedPlayer?M==="hdrezka"&&p(u.selectedPlayer)||M==="kodik"&&_(u.selectedPlayer):!1,g=M=>{b.value=M},x=()=>{b.value=null},P=M=>{let O=u.players.filter(R=>M==="hdrezka"&&p(R)||M==="kodik"&&_(R));return M==="kodik"?O.sort((R,ne)=>k(R.translate).localeCompare(k(ne.translate))):O},B=M=>P(M).some(O=>O.warning);return(M,O)=>(i(),a("div",{class:"modal",onClick:O[4]||(O[4]=wt(R=>M.$emit("close"),["self"]))},[t("div",{class:"modal-content",onClick:O[3]||(O[3]=wt(()=>{},["stop"]))},[t("button",{class:"close",onClick:O[0]||(O[0]=R=>M.$emit("close"))},"√ó"),b.value?(i(),a("h2",No,[t("button",{class:"back-btn",onClick:x},"‚Üê –ù–∞–∑–∞–¥"),J(" "+m(b.value==="hdrezka"?"ReYohoho - HDrezka":"Kodik"),1)])):(i(),a("h2",Bo,"–í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–µ–µ—Ä")),t("ul",Po,[b.value?(i(!0),a(ve,{key:1},Me(P(b.value),R=>(i(),a("li",{key:R.key},[t("button",{class:S(["player-item",{active:E(R)}]),onClick:ne=>l(R)},[J(m(k(R.translate))+" ",1),R.warning?(i(),a("span",Vo,"warning")):h("",!0)],10,Do)]))),128)):(i(),a(ve,{key:0},[(i(!0),a(ve,null,Me(y.value,R=>(i(),a("li",{key:R.key},[t("button",{class:S(["player-item",{active:E(R)}]),onClick:ne=>l(R)},[J(m(k(R.translate))+" ",1),R.warning?(i(),a("span",$o,"warning")):h("",!0)],10,Oo)]))),128)),f.value?(i(),a("li",Fo,[t("button",{class:S(["group-item",{active:A("hdrezka")}]),onClick:O[1]||(O[1]=R=>g("hdrezka"))},[O[5]||(O[5]=t("span",{class:"material-icons group-icon"},"folder",-1)),O[6]||(O[6]=J(" ReYohoho - HDrezka ")),B("hdrezka")?(i(),a("span",Uo,"warning")):h("",!0)],2)])):h("",!0),w.value?(i(),a("li",jo,[t("button",{class:S(["group-item",{active:A("kodik")}]),onClick:O[2]||(O[2]=R=>g("kodik"))},[O[7]||(O[7]=t("span",{class:"material-icons group-icon"},"folder",-1)),O[8]||(O[8]=J(" Kodik ")),B("kodik")?(i(),a("span",Ho,"warning")):h("",!0)],2)])):h("",!0)],64))])])]))}},zo=ct(qo,[["__scopeId","data-v-8b8d2b67"]]);class Wo{constructor(){this.ws=null,this.isConnected=!1,this.isAuthenticated=!1,this.messageId=0,this.sources=new Map,this.filtersFound=new Map,this.pendingRequests=new Map,this.callbacks={onConnect:null,onDisconnect:null,onSourcesUpdated:null,onFiltersFound:null,onError:null},this.BLUR_FILTER_NAME="reyohoho"}generateMessageId(){return++this.messageId}setCallbacks(n){this.callbacks=n}async connect(n="localhost",u=4455,s=""){return new Promise((b,y)=>{const f="ws://".concat(n,":").concat(u);console.log("Connecting to OBS WebSocket at ".concat(f)),this.ws=new WebSocket(f),this.ws.onopen=async()=>{var w,p;console.log("WebSocket connection opened");try{const _=await this.authenticate(s);console.log("Authentication response:",_),_.success?(console.log("Successfully authenticated to OBS"),(p=(w=this.callbacks).onConnect)==null||p.call(w),this.loadSourcesAndSearchFilters(),b()):(console.error("Authentication failed"),y(new Error("Authentication failed")))}catch(_){console.error("Error during authentication:",_),y(_)}},this.ws.onmessage=w=>{this.handleMessage(JSON.parse(w.data))},this.ws.onclose=()=>{var w,p;console.log("WebSocket connection closed"),(p=(w=this.callbacks).onDisconnect)==null||p.call(w)},this.ws.onerror=w=>{var p,_;console.error("WebSocket error:",w),(_=(p=this.callbacks).onError)==null||_.call(p,w.message||"Connection error"),y(w)}})}disconnect(){if(this.ws&&(this.ws.close(),this.ws=null),this.pendingRequests){for(const[,{reject:n}]of this.pendingRequests.entries())n(new Error("Connection closed"));this.pendingRequests.clear()}this.sources.clear(),this.filtersFound.clear()}sendRequest(n,u={}){return new Promise((s,b)=>{if(!this.isConnected||!this.ws){console.warn("No connection to OBS"),b(new Error("No connection to OBS"));return}const y=this.generateMessageId().toString(),f={op:6,d:{requestType:n,requestId:y,requestData:u}};console.log("Sending OBS request: ".concat(n),u),this.pendingRequests.set(y,{resolve:s,reject:b}),this.ws.send(JSON.stringify(f)),setTimeout(()=>{this.pendingRequests&&this.pendingRequests.has(y)&&(this.pendingRequests.delete(y),b(new Error("Request ".concat(n," timed out"))))},1e4)})}handleMessage(n){switch(n.op){case 0:this.handleHello(n.d);break;case 2:this.handleIdentified();break;case 7:this.handleRequestResponse(n.d);break;case 5:this.handleEvent(n.d);break;default:console.log("Unknown OBS message: op=".concat(n.op))}}authenticate(n=""){return new Promise(u=>{this.password=n,this.authResolve=u})}async handleHello(n){console.log("Received OBS hello"),this.isConnected=!0;const u={op:1,d:{rpcVersion:1}};if(n.authentication&&this.password)try{const s=new TextEncoder,b=await crypto.subtle.digest("SHA-256",s.encode(this.password+n.authentication.salt)),y=Array.from(new Uint8Array(b)),f=btoa(String.fromCharCode(...y)),w=await crypto.subtle.digest("SHA-256",s.encode(f+n.authentication.challenge)),p=Array.from(new Uint8Array(w)),_=btoa(String.fromCharCode(...p));u.d.authentication=_}catch(s){console.error("Authentication error:",s)}this.ws.send(JSON.stringify(u))}handleIdentified(){console.log("OBS authentication successful"),this.isAuthenticated=!0,this.authResolve&&(this.authResolve({success:!0}),this.authResolve=null)}handleRequestResponse(n){const{requestId:u,requestType:s,requestStatus:b,responseData:y}=n;if(console.log("Received response for ".concat(s,":"),{success:b.result,code:b.code,comment:b.comment}),!this.pendingRequests){console.warn("No pending requests map");return}const f=this.pendingRequests.get(u);if(!f){console.warn("No pending request found for ID: ".concat(u));return}this.pendingRequests.delete(u),b.result?(console.log("Request ".concat(s," successful"),y),f.resolve(y)):(console.error("Request ".concat(s," failed:"),b.comment),f.reject(new Error("".concat(s," failed: ").concat(b.comment))))}handleFilterListResponse(n){const u=n.sourceName,b=(n.filters||[]).find(y=>y.filterName.toLowerCase()===this.BLUR_FILTER_NAME.toLowerCase());b&&(this.foundFilters.set(u,{sourceName:u,filterName:b.filterName,enabled:b.filterEnabled}),console.log("Found reyohoho filter in source: ".concat(u))),this.checkSearchComplete()}checkSearchComplete(){setTimeout(()=>{var n,u;console.log("Search complete. Found ".concat(this.foundFilters.size," reyohoho filters")),(u=(n=this.callbacks).onFiltersFound)==null||u.call(n,Array.from(this.foundFilters.values()))},500)}handleEvent(n){console.log("OBS event: ".concat(n.eventType))}async testConnection(){try{console.log("Testing OBS connection...");const n=await this.sendRequest("GetVersion");return console.log("OBS connection test successful:",n),{success:!0,version:n}}catch(n){return console.error("OBS connection test failed:",n),{success:!1,error:n.message}}}async loadSourcesAndSearchFilters(){var n,u,s,b,y,f,w,p,_,k;try{console.log("Loading sources and searching for filters...");try{const g=await this.sendRequest("GetVersion");console.log("OBS version info:",g)}catch(g){console.warn("Could not get OBS version:",g)}console.log("Requesting scene list...");const l=await this.sendRequest("GetSceneList");if(console.log("Raw scenes response:",l),!l||!l.scenes){console.error("Invalid scenes response structure:",l),(u=(n=this.callbacks).onError)==null||u.call(n,"Invalid response from OBS - no scenes data");return}console.log("Found scenes:",l.scenes.length),console.log("Requesting input list...");const E=await this.sendRequest("GetInputList");if(console.log("Raw inputs response:",E),!E||!E.inputs){console.error("Invalid inputs response structure:",E),(b=(s=this.callbacks).onError)==null||b.call(s,"Invalid response from OBS - no inputs data");return}console.log("Found inputs:",E.inputs.length),this.sources.clear(),this.filtersFound.clear();for(const g of l.scenes)if(console.log("Checking scene: ".concat(g.sceneName," with ").concat(g.sceneItems?g.sceneItems.length:0," items")),g.sceneItems&&Array.isArray(g.sceneItems))for(const x of g.sceneItems)x.sourceName&&(this.sources.set(x.sourceName,{sceneName:g.sceneName,sourceId:x.sceneItemId,sourceName:x.sourceName}),await this.searchFiltersInSource(x.sourceName,g.sceneName));for(const g of E.inputs)console.log("Checking input: ".concat(g.inputName)),this.sources.has(g.inputName)||this.sources.set(g.inputName,{sceneName:"Direct Input",sourceId:null,sourceName:g.inputName}),await this.searchFiltersInSource(g.inputName,"Direct Input");const A=Array.from(this.filtersFound.values());console.log("Total filters found:",A.length),A.forEach(g=>{console.log("- ".concat(g.sourceName,": ").concat(g.filterName," (").concat(g.enabled?"enabled":"disabled",")"))}),(f=(y=this.callbacks).onFiltersFound)==null||f.call(y,A),(p=(w=this.callbacks).onSourcesUpdated)==null||p.call(w,Array.from(this.sources.values()))}catch(l){console.error("Error loading sources:",l),console.error("Error stack:",l.stack),(k=(_=this.callbacks).onError)==null||k.call(_,"Error loading sources: ".concat(l.message))}}async searchFiltersInSource(n,u){try{console.log("Searching filters in source: ".concat(n));const s=await this.sendRequest("GetSourceFilterList",{sourceName:n});console.log("Source ".concat(n," has ").concat(s.filters.length," filters"));for(const b of s.filters){console.log("  Filter: ".concat(b.filterName," (").concat(b.filterEnabled?"enabled":"disabled",")"));const y="".concat(n,"::").concat(b.filterName);this.filtersFound.set(y,{id:y,sourceName:n,sceneName:u,filterName:b.filterName,enabled:b.filterEnabled})}}catch(s){console.warn("Could not get filters for source ".concat(n,":"),s)}}async enableBlur(n){var s,b;if(!n){console.warn("No filter selected for blur");return}const u=this.filtersFound.get(n);if(!u){console.warn("Selected filter not found:",n);return}try{await this.sendRequest("SetSourceFilterEnabled",{sourceName:u.sourceName,filterName:u.filterName,filterEnabled:!0}),u.enabled=!0,console.log("Enabled blur filter: ".concat(u.sourceName,"::").concat(u.filterName))}catch(y){(b=(s=this.callbacks).onError)==null||b.call(s,"Error enabling filter: ".concat(y.message))}}async disableBlur(n){var s,b;if(!n){console.warn("No filter selected for blur");return}const u=this.filtersFound.get(n);if(!u){console.warn("Selected filter not found:",n);return}try{await this.sendRequest("SetSourceFilterEnabled",{sourceName:u.sourceName,filterName:u.filterName,filterEnabled:!1}),u.enabled=!1,console.log("Disabled blur filter: ".concat(u.sourceName,"::").concat(u.filterName))}catch(y){(b=(s=this.callbacks).onError)==null||b.call(s,"Error disabling filter: ".concat(y.message))}}async testBlur(n,u=2e3){if(!n){console.warn("No filter selected for test");return}await this.enableBlur(n),setTimeout(()=>{this.disableBlur(n)},u)}getFilterById(n){return this.filtersFound.get(n)}getAllFilters(){return Array.from(this.filtersFound.values())}}const Ko={class:"players-list"},Go=["src"],Yo={key:1,class:"controls"},Zo={class:"main-controls"},Xo={class:"material-icons"},Qo={class:"list-button-item"},Jo={class:"material-icons"},es={class:"list-button-item"},ts={class:"material-icons"},ns={class:"list-button-item"},os={class:"list-button-item"},ss={class:"material-icons"},ls={class:"list-button-item"},is={class:"material-icons"},as={class:"tooltip-container","data-tooltip-container":"dimming"},rs={class:"material-icons"},us={class:"tooltip-container","data-tooltip-container":"blur"},ds={class:"tooltip-container","data-tooltip-container":"compressor"},cs={class:"tooltip-container","data-tooltip-container":"mirror"},vs={class:"tooltip-container","data-tooltip-container":"theater"},ms={class:"material-symbols-outlined"},fs={class:"custom-tooltip","data-tooltip":"theater"},gs={class:"tooltip-container","data-tooltip-container":"pip"},ps={class:"tooltip-container","data-tooltip-container":"aspect_ratio"},ys={class:"current-ratio"},hs=["onClick"],bs={key:0,class:"tooltip-container","data-tooltip-container":"app_link"},ks={class:"custom-tooltip","data-tooltip":"app_link"},ws={key:1,class:"tooltip-container","data-tooltip-container":"copy_link"},Cs={class:"custom-tooltip","data-tooltip":"copy_link"},_s={key:2,class:"tooltip-container","data-tooltip-container":"overlay"},Es={class:"material-icons"},Ss={key:0,class:"desktop-list-buttons"},Is={class:"tooltip-container"},Ms={class:"material-icons"},Ls={class:"custom-tooltip"},xs={class:"tooltip-container"},Ts={class:"material-icons"},Rs={class:"custom-tooltip"},As={class:"tooltip-container"},Bs={class:"custom-tooltip"},Ns={class:"tooltip-container"},Ps={class:"material-icons"},Os={class:"custom-tooltip"},$s={class:"tooltip-container"},Fs={class:"material-icons"},Us={class:"custom-tooltip"},js={__name:"PlayerComponent",props:{kpId:String,movieInfo:{type:Object,default:()=>({})}},emits:["update:selectedPlayer","update:movieInfo"],setup(c,{emit:n}){const u=en(),s=lo(),b=Ln(),y=Jn(),f=tn(),w=v(y.params.kp_id),p=c,_=n,k=v([]),l=v(null),E=v(!0),A=v(!1),g=v(!1),x=v(null),P=v(null),B=v(!1),M=v(""),O=v(null),R=v(window.innerHeight*.9),ne=N(()=>"".concat(R.value,"px")),te=N(()=>u.isMobile),$=N(()=>!!window.electronAPI),T=v(null),je=v(!1);let me=null;const re=v(null),Je=v(null),D=v(null),pe=v(null),ue=v(!1),ae=v(!1),Re=v(null),vt=v(null),et=v(0),be=v(null),Ce=v(null),_e=v(null),Ke=v(null),Ge=v(null),Fe=v(null),oe=N({get:()=>s.videoOverlayEnabled,set:o=>s.updateVideoOverlay(o)}),at=N({get:()=>s.overlaySettings,set:o=>s.updateOverlaySettings(o)}),Oe=v(0),Ye=v(0),rt=v([]),z=v(null),tt=v(null),He=v(!1),de=v(null),$e=v(!1),Ct=v([]),I=v([]),V=N({get:()=>s.obsSettings,set:o=>s.updateObsSettings(o)}),De=o=>{const e=document.querySelector('[data-tooltip-container="'.concat(o,'"]')),d=document.querySelector('[data-tooltip="'.concat(o,'"]'));if(!e||!d)return;const C=e.getBoundingClientRect(),L=d.getBoundingClientRect(),U=window.innerHeight;C.bottom+L.height>U?(d.style.top="auto",d.style.bottom="100%",d.style.marginTop="0",d.style.marginBottom="12px",d.style.transform="translateX(-50%)"):(d.style.top="100%",d.style.bottom="auto",d.style.marginTop="12px",d.style.marginBottom="0",d.style.transform="translateX(-50%)")},ye=o=>{T.value=o,je.value=!1,clearTimeout(me),Qe(()=>{De(o)})},Ae=()=>{je.value||(me=setTimeout(()=>{T.value=null},300))},Pt=()=>{je.value=!0,clearTimeout(me)},Lt=()=>{je.value=!1,T.value=null},lt=N({get:()=>s.aspectRatio,set:o=>s.updateAspectRatio(o)}),it=N({get:()=>s.isCentered,set:o=>s.updateCentering(o)}),ut=N(()=>{var o,e,d,C,L,U,j,X,le,q;return((e=(o=p.movieInfo)==null?void 0:o.lists)==null?void 0:e.isFavorite)||((C=(d=p.movieInfo)==null?void 0:d.lists)==null?void 0:C.isWatching)||((U=(L=p.movieInfo)==null?void 0:L.lists)==null?void 0:U.isLater)||((X=(j=p.movieInfo)==null?void 0:j.lists)==null?void 0:X.isCompleted)||((q=(le=p.movieInfo)==null?void 0:le.lists)==null?void 0:q.isAbandoned)}),F=N(()=>s.preferredPlayer),se=v(0),Ee=o=>o.toUpperCase(),Be=()=>{if(A.value||!P.value)return;const[o,e]=lt.value.split(":").map(Number);R.value=window.innerHeight*.9,se.value=Math.min(P.value.clientWidth*(e/o),R.value)},ge=N(()=>{if(A.value)return{};const[o,e]=lt.value.split(":").map(Number),d=R.value*(o/e);return{width:"100%",maxWidth:"".concat(d,"px"),maxHeight:ne.value,margin:"0 auto",overflow:"hidden"}}),Pe=N(()=>{const[o,e]=lt.value.split(":").map(Number);return{position:"relative",width:"100%",paddingTop:"".concat(e/o*100,"%")}}),Ue=()=>{P.value&&setTimeout(()=>{Qe(()=>{P.value.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})},500)},mt=async()=>{try{M.value="",O.value=null;const o=await io(p.kpId);if(k.value=Object.entries(o).map(([e,d])=>({key:e.toUpperCase(),...d})),k.value.length>0){if(F.value){const e=Ee(F.value),d=k.value.find(C=>Ee(C.key)===e);l.value=d||k.value[0]}else l.value=k.value[0];_("update:selectedPlayer",l.value)}}catch(o){const{message:e,code:d}=ht(o);M.value=e,O.value=d,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–ª–µ–µ—Ä–æ–≤:",o)}},Ot=()=>{B.value=!0},ze=()=>{B.value=!1},_t=()=>{try{return be.value||(be.value=new(window.AudioContext||window.webkitAudioContext)),Ce.value||(Ce.value=be.value.createDynamicsCompressor(),Ce.value.threshold.value=-50,Ce.value.knee.value=40,Ce.value.ratio.value=12,Ce.value.attack.value=0,Ce.value.release.value=.25,Ke.value=be.value.createGain(),Ge.value=be.value.createGain(),Ke.value.gain.value=0,Ge.value.gain.value=1,Ce.value.connect(Ke.value),Ke.value.connect(be.value.destination),Ge.value.connect(be.value.destination)),!0}catch(o){return console.log("Error initializing audio context:",o),!1}},Ze=async o=>{try{if(!be.value||Fe.value===o)return!0;const e=x.value,d=(e==null?void 0:e.src)||"";if(d.includes("videoframe")||d.includes("kinoserial.net")||d.includes("allarknow"))return console.log("Player detected as unsupported for compressor:",d),Fe.value=o,_e.value=null,ae.value=!1,$.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –ø–ª–µ–µ—Ä–æ–º"),!1;if(_e.value)try{_e.value.disconnect()}catch(L){}const C=async(L=0)=>{L>0&&await new Promise(U=>setTimeout(U,L));try{return _e.value=be.value.createMediaElementSource(o),Fe.value=o,_e.value.connect(Ce.value),_e.value.connect(Ge.value),console.log("Video audio setup completed (attempt with ".concat(L,"ms delay)")),!0}catch(U){if(U.name==="InvalidStateError"&&U.message.includes("already connected"))return console.log("MediaElementSource already connected (".concat(L,"ms delay attempt)")),!1;throw U}};return await C(0)||await C(100)||await C(300)||await C(800)?!0:(console.log("Video element has internal audio processing, compressor not available for this player"),Fe.value=o,_e.value=null,ae.value=!1,$.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –ø–ª–µ–µ—Ä–æ–º"),!1)}catch(e){return console.log("Error setting up video audio:",e),!1}},nt=async o=>{if(x.value)try{const e=x.value,d=e.contentDocument||e.contentWindow.document;if(!d)return;const C=d.querySelectorAll("video");if(C.length===0)return;const L=C[0];if(!_t())return;if(!await Ze(L)||!_e.value){console.log("Compressor not available for this player");return}o&&!ae.value?(Ke.value.gain.setValueAtTime(1,be.value.currentTime),Ge.value.gain.setValueAtTime(0,be.value.currentTime),ae.value=!0,$.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –≤–∫–ª—é—á—ë–Ω"),console.log("Compressor enabled")):!o&&ae.value&&(Ke.value.gain.setValueAtTime(0,be.value.currentTime),Ge.value.gain.setValueAtTime(1,be.value.currentTime),ae.value=!1,$.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –æ—Ç–∫–ª—é—á—ë–Ω"),console.log("Compressor disabled"))}catch(e){console.log("Compressor error:",e),$.value&&window.electronAPI.showToast("–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä–∞")}},ft=()=>{$.value?window.electronAPI.sendHotKey("F2"):(Vt("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},dt=()=>{$.value?(gt.value=!gt.value,nt(gt.value)):(Vt("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},ot=()=>{$.value?(st.value=!st.value,on(st.value)):(Vt("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},xt=()=>{A.value=!A.value,A.value?(window.addEventListener("mousemove",Rt),document.addEventListener("keydown",Ut),document.body.classList.add("no-scroll")):(window.removeEventListener("mousemove",Rt),document.removeEventListener("keydown",Ut),document.body.classList.remove("no-scroll")),g.value=A.value,Qe(()=>Ue())},Tt=v(null),Rt=()=>{Tt.value=setTimeout(()=>{clearTimeout(Tt.value),g.value=!1},4e3),g.value=!0},$t=N(()=>u.dimmingEnabled),nn=()=>{A.value||u.toggleDimming()},gt=N({get:()=>s.compressorEnabled,set:o=>s.updateCompressor(o)}),st=N({get:()=>s.mirrorEnabled,set:o=>s.updateMirror(o)}),on=o=>{if(x.value)try{const e=x.value,d=e.contentDocument||e.contentWindow.document;if(!d)return;const C=d.querySelectorAll("video");if(C.length>0&&(C.forEach(L=>{o?L.style.transform="scaleX(-1)":L.style.transform="scaleX(1)"}),ue.value=o,$.value)){const L=o?"–ó–µ—Ä–∫–∞–ª–æ –≤–∫–ª—é—á–µ–Ω–æ":"–ó–µ—Ä–∫–∞–ª–æ –æ—Ç–∫–ª—é—á–µ–Ω–æ";window.electronAPI.showToast(L)}}catch(e){}},Ft=()=>{pe.value&&clearInterval(pe.value),pe.value=setInterval(()=>{if(x.value)try{const o=x.value,e=o.contentDocument||o.contentWindow.document;if(!e)return;const d=e.querySelectorAll("video");if(d.length>0){const C=d[0],U=C.style.transform==="scaleX(-1)";st.value&&!U?(C.style.transform="scaleX(-1)",ue.value=!0):!st.value&&U&&(C.style.transform="scaleX(1)",ue.value=!1),Fe.value!==C?(Fe.value=null,ae.value=!1,gt.value&&setTimeout(()=>{nt(!0)},500)):gt.value!==ae.value&&_e.value&&(console.log("Compressor state mismatch, reapplying"),nt(gt.value))}}catch(o){}},1e3)},Et=(o=!1)=>{if(!$.value)return;Re.value&&clearInterval(Re.value);let e=!1,d=[];function C(){var L;if(d=[],window.selectedNudityTimings&&Array.isArray(window.selectedNudityTimings)&&((L=p.movieInfo)!=null&&L.nudity_timings)){for(const U of p.movieInfo.nudity_timings)if(window.selectedNudityTimings.includes(U.id)){const j=qt(U.timing_text);j&&j.length>0&&d.push(...j)}}}C(),Re.value=setInterval(()=>{var L,U,j;if(x.value){C();try{const X=x.value,le=X.contentDocument||X.contentWindow.document;if(!le)return;const q=le.querySelectorAll("video");if(q.length>0){const G=q[0];if(Oe.value=G.currentTime||0,Ye.value=G.duration||0,$.value&&oe.value&&!z.value&&!He.value&&Date.now()-(window.iframeLoadTime||0)>=3e3)try{pt(le,G)}catch(ie){console.log("Error creating overlay:",ie),He.value=!1}if($.value&&!oe.value&&z.value&&setTimeout(()=>{!oe.value&&z.value&&It()},100),$.value&&((L=p.movieInfo)!=null&&L.nudity_timings)){const W=G.currentTime,ie=[],he=[],Q=d.length>0,ce=V.value.enabled&&$e.value;if(window.overlayNudityTimings&&Array.isArray(window.overlayNudityTimings)&&window.overlayNudityTimings.length>0){for(const xe of p.movieInfo.nudity_timings)if(window.overlayNudityTimings.includes(xe.id)){const Te=qt(xe.timing_text);if(Te&&Te.length>0){const Se=[];if(!Q&&!ce)for(const[Ne,Ie]of Te){let r="normal";W>=Ne&&W<=Ie?(r="active",he.push(xe.id)):Ne>W&&Ne-W<=20&&(r="upcoming"),Se.push({text:"[".concat(Ve(Ne),"-").concat(Ve(Ie),"]"),status:r})}else for(const[Ne,Ie]of Te){let r="normal";ce&&W>=Ne&&W<=Ie?(r="active",he.push(xe.id)):ce&&Ne>W&&Ne-W<=20&&(r="upcoming"),Se.push({text:"[".concat(Ve(Ne),"-").concat(Ve(Ie),"]"),status:r})}ie.push({id:xe.id,intervals:Se})}}}rt.value=ie}if($.value&&z.value&&oe.value&&_n(),!G.paused){const W=G.currentTime,ie=G.duration,he=ie>0?W/ie*100:0;if(o&&(console.log("Video position: ".concat(W.toFixed(2),"s / ").concat(ie.toFixed(2),"s (").concat(he.toFixed(1),"%)")),d.length>0)){const ce=d.map(([xe,Te])=>"".concat(Ve(xe)," - ").concat(Ve(Te))).join(", ");console.log("Active blur intervals: [".concat(ce,"]"))}let Q=!1;for(const[ce,xe]of d)if(W>=ce&&W<=xe){Q=!0;break}V.value.enabled&&$e.value&&V.value.selectedFilterId?Q&&!e?((U=de.value)==null||U.enableBlur(V.value.selectedFilterId),e=!0,console.log("OBS Blur applied at",W.toFixed(2),"seconds")):!Q&&e&&((j=de.value)==null||j.disableBlur(V.value.selectedFilterId),e=!1,console.log("OBS Blur removed at",W.toFixed(2),"seconds")):Q&&!e&&$.value?(window.electronAPI.sendHotKey("F2"),e=!0,console.log("Blur applied at",W.toFixed(2),"seconds")):!Q&&e&&!V.value.enabled&&(window.electronAPI.sendHotKey("F2"),e=!1,console.log("Blur removed at",W.toFixed(2),"seconds"))}}}catch(X){console.log("Error monitoring video position:",X)}}},100)},At=()=>{E.value=!1,window.iframeLoadTime=Date.now(),Ft(),Et(),$.value&&oe.value&&!z.value&&setTimeout(()=>{try{const o=x.value,e=o.contentDocument||o.contentWindow.document;if(e){const d=e.querySelector("video");d&&pt(e,d)}}catch(o){console.log("Error creating overlay on iframe load:",o),He.value=!1}},3e3)},Ut=o=>{(o.key==="Escape"&&A.value||o.altKey&&o.keyCode===84)&&xt()},sn=o=>{lt.value=o,setTimeout(()=>{it.value&&Ue()},310)},mn=()=>{const o="reyohoho://#".concat(w.value);try{window.location.href=o}catch(e){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Å—ã–ª–∫–∏:",e)}},fn=()=>{const o=window.location.href;navigator.clipboard.writeText(o).then(()=>{}),re.value.showNotification("–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∏–ª—å–º —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞")};function ln(o){return o.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"HDRezka - ").replace(/KODIK>/,"Kodik - ").trim()}const gn=()=>{try{_e.value&&(_e.value.disconnect(),_e.value=null),be.value&&(be.value.close(),be.value=null),Ce.value=null,Ke.value=null,Ge.value=null,Fe.value=null,ae.value=!1}catch(o){console.log("Error cleaning up audio context:",o)}},pn=o=>{var e;if(((e=l.value)==null?void 0:e.key)===o.key){ze();return}l.value=o,E.value=!0,ue.value=!1,ae.value=!1,Fe.value=null,z.value&&It(),pe.value&&(clearInterval(pe.value),pe.value=null),Re.value&&(clearInterval(Re.value),Re.value=null),o.key.toLowerCase().includes("torrents")||s.updatePreferredPlayer(Ee(o.key)),_("update:selectedPlayer",o)};qe(l,o=>{o&&(E.value=!0,ue.value=!1,ae.value=!1,Fe.value=null,z.value&&It(),pe.value&&(clearInterval(pe.value),pe.value=null),Re.value&&(clearInterval(Re.value),Re.value=null),o.key.toLowerCase().includes("torrents")||s.updatePreferredPlayer(Ee(o.key)),_("update:selectedPlayer",o))}),qe(()=>y.params.kp_id,async o=>{o&&o!==w.value&&(w.value=o,ue.value=!1,ae.value=!1,Fe.value=null,z.value&&It(),pe.value&&(clearInterval(pe.value),pe.value=null),Re.value&&(clearInterval(Re.value),Re.value=null),et.value=0,it.value&&Ue())},{immediate:!0}),qe(oe,o=>{if($.value)if(o&&!z.value){const e=()=>{if(x.value)try{const d=x.value,C=d.contentDocument||d.contentWindow.document;if(C){const L=C.querySelector("video");if(L){const U=Date.now()-(window.iframeLoadTime||0);U>=3e3?pt(C,L):setTimeout(e,3e3-U)}}}catch(d){console.log("Error creating overlay via watcher:",d),He.value=!1}};e()}else!o&&z.value&&It()}),qe(rt,(o,e)=>{if(!$.value)return;const d=e&&e.length>0,C=o&&o.length>0;!d&&C&&(oe.value||(oe.value=!0,window.electronAPI&&window.electronAPI.showToast("–û–≤–µ—Ä–ª–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á—ë–Ω - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ç–∞–π–º–∏–Ω–≥–∏")))},{deep:!0}),qe(()=>V.value.enabled,o=>{o&&!$e.value?Ht():!o&&$e.value&&dn()});const jt=["16:9","12:5","4:3"],an=()=>{const e=(jt.indexOf(lt.value)+1)%jt.length;sn(jt[e])},rn=o=>{var d,C,L,U,j,X,le,q,G,W,ie,he,Q;return(Q={[K.FAVORITE]:((C=(d=p.movieInfo)==null?void 0:d.lists)==null?void 0:C.isFavorite)||!1,[K.HISTORY]:((U=(L=p.movieInfo)==null?void 0:L.lists)==null?void 0:U.isHistory)||!1,[K.LATER]:((X=(j=p.movieInfo)==null?void 0:j.lists)==null?void 0:X.isLater)||!1,[K.COMPLETED]:((q=(le=p.movieInfo)==null?void 0:le.lists)==null?void 0:q.isCompleted)||!1,[K.ABANDONED]:((W=(G=p.movieInfo)==null?void 0:G.lists)==null?void 0:W.isAbandoned)||!1,[K.WATCHING]:((he=(ie=p.movieInfo)==null?void 0:ie.lists)==null?void 0:he.isWatching)||!1}[o])!=null?Q:!1},ke=async o=>{if(!b.token){re.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:yn});return}try{const e={[K.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[K.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[K.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[K.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[K.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[K.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};rn(o)?(await to(w.value,o),re.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(e[o]))):(await In(w.value,o),re.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(e[o])))}catch(e){const{message:d,code:C}=ht(e);re.value.showNotification("".concat(d," ").concat(C))}_("update:movieInfo")},yn=()=>{f.push("/login")},St=N(()=>s.showFavoriteTooltip),hn=()=>{f.push("/settings"),Lt()},bn=async()=>{if(!$.value){Vt("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank");return}if(x.value)try{const o=x.value,e=o.contentDocument||o.contentWindow.document;if(!e)return;const d=e.querySelector("video");if(!d)return;document.pictureInPictureElement?await document.exitPictureInPicture():document.pictureInPictureEnabled?await d.requestPictureInPicture():Vt('–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–∂–∏–º "–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ"')}catch(o){console.error("Error toggling PiP:",o),Vt('–ù–µ —É–¥–∞–ª–æ—Å—å –≤–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º "–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ"')}},kn=()=>{if(oe.value=!oe.value,!oe.value)It();else{const o=()=>{if(!z.value&&x.value)try{const e=x.value,d=e.contentDocument||e.contentWindow.document;if(d){const C=d.querySelector("video");if(C){const L=Date.now()-(window.iframeLoadTime||0);L>=3e3?pt(d,C):setTimeout(o,3e3-L)}}}catch(e){console.log("Error creating overlay:",e),He.value=!1}};o()}},un=()=>{de.value&&de.value.disconnect(),de.value=new Wo,de.value.setCallbacks({onConnect:()=>{$e.value=!0,s.setObsConnected(!0),$.value&&window.electronAPI&&window.electronAPI.showToast("–ü–æ–¥–∫–ª—é—á–µ–Ω –∫ OBS WebSocket")},onDisconnect:()=>{$e.value=!1,s.setObsConnected(!1),Ct.value=[],I.value=[]},onSourcesUpdated:o=>{Ct.value=o,window.obsSources=o},onFiltersFound:o=>{I.value=o,window.obsFiltersFound=o,s.updateObsSettings({filtersFound:o})},onError:o=>{console.error("OBS WebSocket error:",o),$.value&&window.electronAPI&&window.electronAPI.showToast("–û—à–∏–±–∫–∞ OBS: ".concat(o))}})},Ht=async()=>{de.value||un(),await de.value.connect(V.value.host,V.value.port,V.value.password)},dn=()=>{de.value&&de.value.disconnect()},wn=o=>{de.value&&$e.value&&o?de.value.testBlur(o):$.value&&window.electronAPI&&window.electronAPI.showToast("–§–∏–ª—å—Ç—Ä –Ω–µ –≤—ã–±—Ä–∞–Ω –∏–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ OBS")},zt=()=>{de.value&&$e.value&&de.value.loadSourcesAndSearchFilters()},Wt=()=>I.value,Cn=()=>{if(!$.value)return;const o=x.value,e=o.contentDocument||o.contentWindow.document;if(!e||e.getElementById("overlay-settings-modal"))return;const d=at.value,C=e.createElement("div");C.id="overlay-settings-modal",C.style.cssText="\n    position: fixed !important;\n    top: 0 !important;\n    left: 0 !important;\n    width: 100% !important;\n    height: 100% !important;\n    background: rgba(0, 0, 0, 0.8) !important;\n    display: flex !important;\n    align-items: center !important;\n    justify-content: center !important;\n    z-index: 9999 !important;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n  ";const L=e.createElement("div");L.style.cssText="\n    background: rgba(30, 30, 30, 0.95) !important;\n    backdrop-filter: blur(20px) !important;\n    border-radius: 16px !important;\n    padding: 32px !important;\n    max-width: 400px !important;\n    width: 90% !important;\n    border: 1px solid rgba(255, 255, 255, 0.1) !important;\n    box-shadow: 0 8px 40px rgba(0, 0, 0, 0.5) !important;\n  ",L.innerHTML='\n    <h3 style="color: #ff6b35; margin: 0 0 24px 0; font-size: 20px; font-weight: 600; text-align: center;">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–≤–µ—Ä–ª–µ—è</h3>\n    \n    <div style="display: flex; flex-direction: column; gap: 16px;">\n      <label style="display: flex; align-items: center; gap: 12px; color: white; cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(255, 255, 255, 0.05);">\n        <input type="checkbox" id="showTitle" '.concat(d.showTitle?"checked":"",' style="width: 18px; height: 18px; accent-color: #ff6b35;">\n        <span style="font-size: 16px;">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞</span>\n      </label>\n      \n      <label style="display: flex; align-items: center; gap: 12px; color: white; cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(255, 255, 255, 0.05);">\n        <input type="checkbox" id="showDuration" ').concat(d.showDuration?"checked":"",' style="width: 18px; height: 18px; accent-color: #ff6b35;">\n        <span style="font-size: 16px;">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</span>\n      </label>\n      \n\n    </div>\n    \n    <div style="display: flex; gap: 12px; margin-top: 24px; justify-content: center;">\n      <button id="saveSettings" style="background: #ff6b35; color: white; border: none; border-radius: 8px; padding: 10px 20px; cursor: pointer; font-size: 16px; font-weight: 500; transition: all 0.3s ease;">\n        –°–æ—Ö—Ä–∞–Ω–∏—Ç—å\n      </button>\n      <button id="cancelSettings" style="background: rgba(255, 255, 255, 0.1); color: rgba(255, 255, 255, 0.8); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; padding: 10px 16px; cursor: pointer; font-size: 14px; transition: all 0.3s ease;">\n        –û—Ç–º–µ–Ω–∞\n      </button>\n    </div>\n  '),C.appendChild(L),C.addEventListener("click",j=>{j.target===C&&C.remove()}),L.querySelector("#saveSettings").addEventListener("click",()=>{var X;const j={showTitle:L.querySelector("#showTitle").checked,showDuration:L.querySelector("#showDuration").checked};at.value=j,(X=window.electronAPI)==null||X.showToast("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–≤–µ—Ä–ª–µ—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã"),C.remove()}),L.querySelector("#cancelSettings").addEventListener("click",()=>{C.remove()}),L.querySelectorAll("button").forEach(j=>{j.addEventListener("mouseenter",()=>{j.id==="saveSettings"?(j.style.background="#e55a2b",j.style.transform="translateY(-1px)"):j.style.background="rgba(255, 255, 255, 0.15)"}),j.addEventListener("mouseleave",()=>{j.id==="saveSettings"?(j.style.background="#ff6b35",j.style.transform="translateY(0)"):j.style.background="rgba(255, 255, 255, 0.1)"})}),e.body.appendChild(C)},pt=(o,e)=>{if(!oe.value||z.value||He.value)return;He.value=!0;const d=o.createElement("div");d.id="reyohoho-video-overlay";let C=()=>{d.style.cssText="\n      position: absolute !important;\n      top: 0 !important;\n      left: 0 !important;\n      width: 100% !important;\n      height: 100% !important;\n      pointer-events: none !important;\n      z-index: 999999999 !important;\n      display: flex !important;\n      flex-direction: column !important;\n      justify-content: space-between !important;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n      visibility: visible !important;\n      opacity: 1 !important;\n    "};const L=o.createElement("div");L.style.cssText="\n    background: linear-gradient(180deg, rgba(0, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0.4) 70%, transparent 100%) !important;\n    color: white !important;\n    padding: 20px !important;\n    text-align: left !important;\n    pointer-events: none !important;\n  ";const U=o.createElement("div");U.style.cssText="\n    font-size: 20px !important;\n    font-weight: 600 !important;\n    margin-bottom: 8px !important;\n    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8) !important;\n    line-height: 1.2 !important;\n    background: rgba(0, 0, 0, 0.6) !important;\n    padding: 8px 12px !important;\n    border-radius: 6px !important;\n    display: inline-block !important;\n    color: rgba(255, 255, 255, 0.6) !important;\n  ";const j=o.createElement("div");j.style.cssText="\n    font-size: 18px !important;\n    font-weight: 500 !important;\n    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8) !important;\n    display: flex !important;\n    align-items: center !important;\n    gap: 8px !important;\n    flex-wrap: wrap !important;\n    color: rgba(255, 255, 255, 0.6) !important;\n  ";const X=o.createElement("div");X.style.cssText="\n    position: absolute !important;\n    top: 20px !important;\n    right: 110px !important;\n    backdrop-filter: blur(10px) !important;\n    border-radius: 12px !important;\n    padding: 16px !important;\n    min-width: 280px !important;\n    max-width: 400px !important;\n    pointer-events: none !important;\n    display: none !important;\n  ";const le=o.createElement("div");le.style.cssText="\n    font-size: 14px !important;\n    color: rgba(255, 255, 255, 0.6) !important;\n    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8) !important;\n    line-height: 1.4 !important;\n    word-wrap: break-word !important;\n  ";const q=o.createElement("div");q.style.cssText="\n    position: absolute !important;\n    top: 20px !important;\n    right: 20px !important;\n    display: flex !important;\n    gap: 8px !important;\n    pointer-events: all !important;\n  ";const G=o.createElement("button");G.style.cssText="\n    background: rgba(0, 0, 0, 0.8) !important;\n    backdrop-filter: blur(10px) !important;\n    color: white !important;\n    border: 1px solid rgba(255, 255, 255, 0.2) !important;\n    border-radius: 50% !important;\n    width: 40px !important;\n    height: 40px !important;\n    display: flex !important;\n    align-items: center !important;\n    justify-content: center !important;\n    cursor: pointer !important;\n    transition: all 0.3s ease !important;\n    font-size: 18px !important;\n  ",G.innerHTML="‚öôÔ∏è",G.title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–≤–µ—Ä–ª–µ—è";const W=o.createElement("button");W.style.cssText="\n    background: rgba(0, 0, 0, 0.8) !important;\n    backdrop-filter: blur(10px) !important;\n    color: white !important;\n    border: 1px solid rgba(255, 255, 255, 0.2) !important;\n    border-radius: 50% !important;\n    width: 40px !important;\n    height: 40px !important;\n    display: flex !important;\n    align-items: center !important;\n    justify-content: center !important;\n    cursor: pointer !important;\n    transition: all 0.3s ease !important;\n    font-size: 18px !important;\n  ",W.innerHTML="üëÅÔ∏è",W.title="–û—Ç–∫–ª—é—á–∏—Ç—å –æ–≤–µ—Ä–ª–µ–π",W.addEventListener("click",()=>{oe.value=!1}),G.addEventListener("click",()=>{Cn()}),[G,W].forEach(r=>{r.addEventListener("mouseenter",()=>{r.style.background="#ff6b35",r.style.borderColor="#ff6b35",r.style.transform="scale(1.1)"}),r.addEventListener("mouseleave",()=>{r.style.background="rgba(0, 0, 0, 0.8)",r.style.borderColor="rgba(255, 255, 255, 0.2)",r.style.transform="scale(1)"})}),q.appendChild(G),q.appendChild(W),X.appendChild(le),L.appendChild(U),L.appendChild(j),d.appendChild(L),d.appendChild(X),d.appendChild(q),q.style.transition="opacity 0.3s ease",q.style.opacity="0.8",q.style.visibility="visible",L.style.transition="opacity 0.3s ease";let ie=null;const he=()=>{q.style.opacity="1",L.style.opacity="0",clearTimeout(tt.value),clearTimeout(ie),tt.value=setTimeout(()=>{q.style.opacity="0.8"},3e3),ie=setTimeout(()=>{L.style.opacity="1"},2e3)};o.addEventListener("mousemove",he),d.addEventListener("mouseenter",()=>{q.style.opacity="1",L.style.opacity="0",clearTimeout(ie)}),d.addEventListener("mouseleave",()=>{clearTimeout(tt.value),clearTimeout(ie),q.style.opacity="0.8",L.style.opacity="1"}),d._mouseHandler=he;const ce=(r=>{let Z=r.parentNode,fe=0;const Xe=5;for(;Z&&fe<Xe;){const Mt=o.defaultView.getComputedStyle(Z),Bt=Z.getBoundingClientRect();if(Bt.width>0&&Bt.height>0&&(Mt.position==="relative"||Mt.position==="absolute"||Mt.position==="fixed"||Z.tagName==="BODY"))return Z;Z=Z.parentNode,fe++}return r.parentNode})(e);d._targetContainer=ce,d._videoElement=e,C=()=>{const r=d._videoElement.getBoundingClientRect(),Z=d._targetContainer.getBoundingClientRect(),fe=r.top-Z.top,Xe=r.left-Z.left;d.style.cssText="\n      position: absolute !important;\n      top: ".concat(fe,"px !important;\n      left: ").concat(Xe,"px !important;\n      width: ").concat(r.width,"px !important;\n      height: ").concat(r.height,"px !important;\n      pointer-events: none !important;\n      z-index: 999999999 !important;\n      display: flex !important;\n      flex-direction: column !important;\n      justify-content: space-between !important;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n      visibility: visible !important;\n      opacity: 1 !important;\n      box-sizing: border-box !important;\n    ")},e.style.position="relative",(ce.style.position===""||ce.style.position==="static")&&(ce.style.position="relative"),ce.appendChild(d),C(),z.value=d,He.value=!1;const Te=setInterval(()=>{if(!z.value||!oe.value){clearInterval(Te);return}if(!o.body.contains(d))try{const fe=o.querySelectorAll("video");if(fe.length>0){const Xe=fe[0];d._videoElement=Xe;const Bt=(Kt=>{let yt=Kt.parentNode,Gt=0;const cn=5;for(;yt&&Gt<cn;){const Dt=o.defaultView.getComputedStyle(yt),Yt=yt.getBoundingClientRect();if(Yt.width>0&&Yt.height>0&&(Dt.position==="relative"||Dt.position==="absolute"||Dt.position==="fixed"||yt.tagName==="BODY"))return yt;yt=yt.parentNode,Gt++}return Kt.parentNode})(Xe);d._targetContainer=Bt,Bt.appendChild(d),C(),d._mouseHandler&&(o.removeEventListener("mousemove",d._mouseHandler),o.addEventListener("mousemove",d._mouseHandler))}}catch(fe){console.log("Error re-adding overlay to DOM:",fe)}const r=o.defaultView.getComputedStyle(d);if((r.visibility==="hidden"||r.display==="none"||r.opacity==="0")&&C(),(parseInt(r.zIndex)||0)<999999999&&C(),d._videoElement&&d._targetContainer){const fe=d._videoElement.getBoundingClientRect(),Xe=parseInt(r.width)||0,Mt=parseInt(r.height)||0;(Math.abs(Xe-fe.width)>5||Math.abs(Mt-fe.height)>5)&&C()}},1e3),Se=new window.MutationObserver(r=>{r.forEach(Z=>{Z.type==="attributes"&&Z.target===d&&Z.attributeName==="style"&&setTimeout(()=>{z.value&&oe.value&&C()},100)})});Se.observe(d,{attributes:!0,attributeFilter:["style","class"]});const Ne=()=>{z.value&&oe.value&&C()};o.defaultView.addEventListener("resize",Ne),d._monitorInterval=Te,d._mutationObserver=Se,d._resizeHandler=Ne,d._iframeDoc=o;const Ie=setInterval(()=>{if(!z.value||!oe.value){clearInterval(Ie);return}C()},500);setTimeout(()=>{clearInterval(Ie)},1e4)},_n=()=>{var q,G,W,ie,he;if(!z.value||!oe.value)return;const o=x.value;if(!o)return;const e=o.contentDocument||o.contentWindow.document;if(!e)return;const d=z.value,C=d.children[0],L=d.children[1],U=e.defaultView.getComputedStyle(d);(U.display==="none"||U.visibility==="hidden")&&(d.style.display="flex !important",d.style.visibility="visible !important");const j=C.children[0];if(at.value.showTitle){j.style.display="block";const Q=((q=p.movieInfo)==null?void 0:q.title)||((G=p.movieInfo)==null?void 0:G.name_ru)||((W=p.movieInfo)==null?void 0:W.name_en)||((ie=p.movieInfo)==null?void 0:ie.name_original)||"–ó–∞–≥—Ä—É–∑–∫–∞...",ce=(he=p.movieInfo)!=null&&he.year?" (".concat(p.movieInfo.year,")"):"";j.textContent=Q+ce}else j.style.display="none";const X=C.children[1];let le="";if(at.value.showDuration){const Q=Ve(Oe.value),ce=Ve(Ye.value);le="\n      <span style=\"font-family: 'Courier New', monospace; background: rgba(0, 0, 0, 0.6); padding: 2px 8px; border-radius: 4px; color: rgba(255, 255, 255, 0.6);\">".concat(Q,'</span>\n      <span style="opacity: 0.6;">/</span>\n      <span style="font-family: \'Courier New\', monospace; background: rgba(0, 0, 0, 0.6); padding: 2px 8px; border-radius: 4px; color: rgba(255, 255, 255, 0.6);">').concat(ce,"</span>\n    ")}if(V.value.enabled&&V.value.showObsInOverlay){let Q="–û—Ç–∫–ª—é—á–µ–Ω";const ce="#999999";if($e.value)if(V.value.selectedFilterId){const Te=I.value.find(Se=>Se.id===V.value.selectedFilterId);Te?Q="".concat(Te.filterName," (").concat(Te.sceneName,")"):Q="–§–∏–ª—å—Ç—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω"}else I.value.length>0?Q="–§–∏–ª—å—Ç—Ä –Ω–µ –≤—ã–±—Ä–∞–Ω":Q="–§–∏–ª—å—Ç—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã";const xe='\n      <span style="background: rgba(0, 0, 0, 0.6); padding: 2px 8px; border-radius: 4px; color: '.concat(ce,';">\n        OBS: ').concat(Q,"\n      </span>\n    ");le=le?"".concat(le," ").concat(xe):xe}if(le?(X.style.display="flex",X.innerHTML=le):X.style.display="none",rt.value.length>0){const Q=L.children[0];Q.innerHTML="";const ce=e.createElement("span");ce.textContent="–¢–∞–π–º–∏–Ω–≥–∏: ",ce.style.color="rgba(255, 255, 255, 0.6)",Q.appendChild(ce),rt.value.forEach((xe,Te)=>{if(Te>0){const Se=e.createElement("span");Se.textContent=", ",Se.style.color="rgba(255, 255, 255, 0.6)",Q.appendChild(Se)}xe.intervals.forEach((Se,Ne)=>{if(Ne>0){const r=e.createElement("span");r.textContent=", ",r.style.color="rgba(255, 255, 255, 0.6)",Q.appendChild(r)}const Ie=e.createElement("span");Ie.textContent=Se.text,Se.status==="active"?(Ie.style.color="#ff4444",Ie.style.fontWeight="bold"):Se.status==="upcoming"?(Ie.style.color="#ff6b35",Ie.style.fontWeight="500"):Ie.style.color="rgba(255, 255, 255, 0.6)",Q.appendChild(Ie)})}),L.style.display="block"}else L.style.display="none"},It=()=>{if(z.value){try{z.value._monitorInterval&&clearInterval(z.value._monitorInterval),z.value._mutationObserver&&z.value._mutationObserver.disconnect(),z.value._resizeHandler&&z.value._iframeDoc&&z.value._iframeDoc.defaultView.removeEventListener("resize",z.value._resizeHandler),z.value._mouseHandler&&z.value._iframeDoc&&z.value._iframeDoc.removeEventListener("mousemove",z.value._mouseHandler),z.value.remove()}catch(o){console.log("Error removing overlay:",o)}z.value=null}He.value=!1,tt.value&&(clearTimeout(tt.value),tt.value=null)};Nt(()=>{if(E.value=!0,mt(),te.value&&(lt.value="4:3"),Be(),window.addEventListener("resize",Be),window.addEventListener("resize",De),it.value&&Ue(),window.toggleCompressor=dt,window.toggleMirror=ot,un(),window.connectToOBS=Ht,window.testOBSBlur=wn,window.refreshOBSFilters=zt,window.getOBSFiltersInfo=Wt,window.testOBSConnection=En,window.debugOBS=()=>{var o;console.log("=== OBS Debug Info ==="),console.log("OBS Settings:",V.value),console.log("OBS Connected:",$e.value),console.log("OBS Filters Found:",I.value),console.log("OBS WebSocket instance:",de.value),de.value&&(console.log("WebSocket state:",(o=de.value.ws)==null?void 0:o.readyState),console.log("Is Connected:",de.value.isConnected),console.log("Is Authenticated:",de.value.isAuthenticated))},V.value.enabled&&Ht(),$.value&&(vt.value=setInterval(()=>{const o=window.overlayNudityTimings?window.overlayNudityTimings.length:0;o>et.value?(et.value=o,oe.value||(oe.value=!0,window.electronAPI&&window.electronAPI.showToast("–û–≤–µ—Ä–ª–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á—ë–Ω - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ç–∞–π–º–∏–Ω–≥–∏"))):et.value=o},1e3)),$.value&&oe.value){const o=()=>{if(x.value&&!z.value)try{const e=x.value,d=e.contentDocument||e.contentWindow.document;if(d){const C=d.querySelector("video");if(C){const L=Date.now()-(window.iframeLoadTime||0);L>=3e3?pt(d,C):setTimeout(o,3e3-L)}else{const L=setInterval(()=>{try{const U=d.querySelector("video");if(U){clearInterval(L);const j=Date.now()-(window.iframeLoadTime||0);j>=3e3?pt(d,U):setTimeout(()=>pt(d,U),3e3-j)}}catch(U){console.log("Waiting for video element...",U)}},1e3);setTimeout(()=>clearInterval(L),15e3)}}}catch(e){console.log("Error initializing overlay on mount:",e),He.value=!1}};setTimeout(o,1e3)}}),xn(()=>{window.removeEventListener("resize",Be),window.removeEventListener("resize",De),window.removeEventListener("mousemove",Rt),document.removeEventListener("keydown",Ut),document.body.classList.remove("no-scroll"),pe.value&&clearInterval(pe.value),Re.value&&clearInterval(Re.value),vt.value&&clearInterval(vt.value),It(),gn(),dn(),delete window.toggleCompressor,delete window.toggleMirror,delete window.connectToOBS,delete window.testOBSBlur,delete window.refreshOBSFilters,delete window.getOBSFiltersInfo,delete window.testOBSConnection,delete window.debugOBS,delete window.obsSources,delete window.obsFiltersFound});const En=async()=>de.value&&$e.value?await de.value.testConnection():{success:!1,error:"Not connected"};return(o,e)=>{var d,C,L,U,j,X,le,q,G,W,ie,he,Q,ce,xe,Te,Se,Ne,Ie,r,Z,fe,Xe,Mt,Bt,Kt,yt,Gt,cn,Dt,Yt,Nn,Pn,On,$n,Fn,Un,jn,Hn,Dn,Vn,qn;return M.value?(i(),bt(eo,{key:0,message:M.value,code:O.value},null,8,["message","code"])):(i(),a(ve,{key:1},[t("div",Ko,[e[43]||(e[43]=t("span",null,"–ü–ª–µ–µ—Ä:",-1)),t("button",{class:"player-btn",onClick:Ot},m(l.value?ln(l.value.translate).toUpperCase():"–ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–µ–µ—Ä–æ–≤..."),1)]),B.value?(i(),bt(zo,{key:0,players:k.value,"selected-player":l.value,onClose:ze,onSelect:pn},null,8,["players","selected-player"])):h("",!0),t("div",{ref_key:"containerRef",ref:P,class:S(["player-container",{"theater-mode":A.value}]),style:Qt(A.value?{}:ge.value)},[t("div",{class:"iframe-wrapper",style:Qt(A.value?{}:Pe.value)},[ee(t("iframe",{ref_key:"playerIframe",ref:x,src:(d=l.value)==null?void 0:d.iframe,frameborder:"0",allowfullscreen:"",webkitallowfullscreen:"",class:S(["responsive-iframe",{"theater-mode-unlock":g.value,"theater-mode-lock":A.value,dimmed:$t.value}]),onLoad:At},null,42,Go),[[we,!E.value&&((C=l.value)==null?void 0:C.iframe)]]),E.value?(i(),bt(so,{key:0,text:"–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–ª–µ–µ—Ä: ".concat(l.value?ln(l.value.translate):"–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ –ø–ª–µ–µ—Ä–æ–≤","\n–ï—Å–ª–∏ –ø–ª–µ–µ—Ä –Ω–µ –≥—Ä—É–∑–∏—Ç—Å—è, —Ç–æ —Å–º–µ–Ω–∏—Ç–µ –ø–ª–µ–µ—Ä –≤—ã—à–µ –∏–ª–∏ –≤–∫–ª—é—á–∏—Ç–µ VPN"),style:{"white-space":"pre-line"}},null,8,["text"])):h("",!0)],4),A.value?(i(),a("button",{key:0,class:S(["close-theater-btn",{visible:g.value}]),onClick:xt}," ‚úñ ",2)):h("",!0)],6),A.value?h("",!0):(i(),a("div",Yo,[t("div",Zo,[te.value?h("",!0):(i(),a("div",{key:0,ref_key:"tooltipContainer",ref:Je,class:"tooltip-container list-buttons-container","data-tooltip-container":"favorite"},[St.value?(i(),a("button",{key:0,class:S(["favorite-btn",{active:(U=(L=c.movieInfo)==null?void 0:L.lists)==null?void 0:U.isFavorite}]),onMouseenter:e[0]||(e[0]=H=>ye("favorite")),onMouseleave:Ae,onClick:e[1]||(e[1]=H=>ke(Y(K).FAVORITE))},[t("span",Xo,m((X=(j=c.movieInfo)==null?void 0:j.lists)!=null&&X.isFavorite?"favorite":"favorite_border"),1),t("span",{class:S(["material-icons dropdown-arrow",{highlighted:ut.value}])},"expand_more",2)],34)):h("",!0),ee(t("div",{ref_key:"tooltip",ref:D,class:"custom-tooltip advanced-tooltip list-buttons-dropdown","data-tooltip":"favorite",onMouseenter:Pt,onMouseleave:Lt},[t("div",Qo,[t("button",{class:S(["favorite-btn",{active:(q=(le=c.movieInfo)==null?void 0:le.lists)==null?void 0:q.isFavorite}]),onClick:e[2]||(e[2]=H=>ke(Y(K).FAVORITE))},[t("span",Jo,m((W=(G=c.movieInfo)==null?void 0:G.lists)!=null&&W.isFavorite?"favorite":"favorite_border"),1),e[44]||(e[44]=t("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))],2)]),t("div",es,[t("button",{class:S(["watching-btn",{active:(he=(ie=c.movieInfo)==null?void 0:ie.lists)==null?void 0:he.isWatching}]),onClick:e[3]||(e[3]=H=>ke(Y(K).WATCHING))},[t("span",ts,m((ce=(Q=c.movieInfo)==null?void 0:Q.lists)!=null&&ce.isWatching?"visibility":"visibility_off"),1),e[45]||(e[45]=t("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))],2)]),t("div",ns,[t("button",{class:S(["later-btn",{active:(Te=(xe=c.movieInfo)==null?void 0:xe.lists)==null?void 0:Te.isLater}]),onClick:e[4]||(e[4]=H=>ke(Y(K).LATER))},e[46]||(e[46]=[t("span",{class:"material-icons"},"watch_later",-1),t("span",{class:"button-label"},"–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ",-1)]),2)]),t("div",os,[t("button",{class:S(["completed-btn",{active:(Ne=(Se=c.movieInfo)==null?void 0:Se.lists)==null?void 0:Ne.isCompleted}]),onClick:e[5]||(e[5]=H=>ke(Y(K).COMPLETED))},[t("span",ss,m((r=(Ie=c.movieInfo)==null?void 0:Ie.lists)!=null&&r.isCompleted?"check_circle":"check_circle_outline"),1),e[47]||(e[47]=t("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))],2)]),t("div",ls,[t("button",{class:S(["abandoned-btn",{active:(fe=(Z=c.movieInfo)==null?void 0:Z.lists)==null?void 0:fe.isAbandoned}]),onClick:e[6]||(e[6]=H=>ke(Y(K).ABANDONED))},[t("span",is,m(((Mt=(Xe=c.movieInfo)==null?void 0:Xe.lists)!=null&&Mt.isAbandoned,"not_interested")),1),e[48]||(e[48]=t("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))],2)]),t("div",{class:"tooltip-hint"},[e[50]||(e[50]=t("span",{class:"material-icons"},"settings",-1)),t("span",null,[e[49]||(e[49]=J("–°—Ç–∏–ª—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ ")),t("a",{class:"settings-link",onClick:hn},"–Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö")])])],544),[[we,T.value==="favorite"&&St.value]])],512)),te.value?h("",!0):(i(),a(ve,{key:1},[t("div",as,[t("button",{class:S(["dimming-btn",{active:$t.value}]),onMouseenter:e[7]||(e[7]=H=>ye("dimming")),onMouseleave:e[8]||(e[8]=H=>T.value=null),onClick:nn},[t("span",rs,m($t.value?"light_mode":"dark_mode"),1)],34),ee(t("div",{class:"custom-tooltip","data-tooltip":"dimming"},m($t.value?"–û—Ç–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ":"–í–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ"),513),[[we,T.value==="dimming"]])]),t("div",us,[t("button",{class:S(["blur-btn",{"electron-only":!$.value}]),onMouseenter:e[9]||(e[9]=H=>ye("blur")),onMouseleave:e[10]||(e[10]=H=>T.value=null),onClick:ft},e[51]||(e[51]=[t("span",{class:"material-icons"},"blur_on",-1)]),34),ee(t("div",{class:"custom-tooltip","data-tooltip":"blur"},m($.value?"–ë–ª—é—Ä":"–ë–ª—é—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[we,T.value==="blur"]])]),t("div",ds,[t("button",{class:S(["material-symbols-outlined",{active:gt.value,"electron-only":!$.value}]),onMouseenter:e[11]||(e[11]=H=>ye("compressor")),onMouseleave:e[12]||(e[12]=H=>T.value=null),onClick:dt},e[52]||(e[52]=[t("span",{class:"material-icons"},"graphic_eq",-1)]),34),ee(t("div",{class:"custom-tooltip","data-tooltip":"compressor"},m($.value?"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä":"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[we,T.value==="compressor"]])]),t("div",cs,[t("button",{class:S(["mirror-btn",{active:st.value,"electron-only":!$.value}]),onMouseenter:e[13]||(e[13]=H=>ye("mirror")),onMouseleave:e[14]||(e[14]=H=>T.value=null),onClick:ot},e[53]||(e[53]=[t("span",{class:"material-icons"},"flip",-1)]),34),ee(t("div",{class:"custom-tooltip","data-tooltip":"mirror"},m($.value?"–ó–µ—Ä–∫–∞–ª–æ":"–ó–µ—Ä–∫–∞–ª–æ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[we,T.value==="mirror"]])]),t("div",vs,[t("button",{class:"theater-mode-btn",onMouseenter:e[15]||(e[15]=H=>ye("theater")),onMouseleave:e[16]||(e[16]=H=>T.value=null),onClick:xt},[t("span",ms,m(A.value?"fullscreen_exit":"aspect_ratio"),1)],32),ee(t("div",fs,[J(m(A.value?"–í—ã–π—Ç–∏ –∏–∑ —Ç–µ–∞—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞":"–¢–µ–∞—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º")+" ",1),e[54]||(e[54]=t("span",{class:"shortcut-hint"},"Alt+T",-1))],512),[[we,T.value==="theater"]])]),t("div",gs,[t("button",{class:S(["pip-btn",{"electron-only":!$.value}]),onMouseenter:e[17]||(e[17]=H=>ye("pip")),onMouseleave:e[18]||(e[18]=H=>T.value=null),onClick:bn},e[55]||(e[55]=[t("span",{class:"material-icons"},"picture_in_picture_alt",-1)]),34),ee(t("div",{class:"custom-tooltip","data-tooltip":"pip"},m($.value?"–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ":"–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[we,T.value==="pip"]])]),t("div",ps,[t("button",{class:"aspect-ratio-dropdown-btn",onMouseenter:e[19]||(e[19]=H=>ye("aspect_ratio")),onMouseleave:Ae,onClick:an},[t("span",ys,m(lt.value),1)],32),ee(t("div",{class:"custom-tooltip advanced-tooltip aspect-ratio-dropdown","data-tooltip":"aspect_ratio",onMouseenter:Pt,onMouseleave:Lt},[(i(),a(ve,null,Me(jt,H=>t("div",{key:H,class:S(["aspect-ratio-option",{active:lt.value===H}]),onClick:_d=>sn(H)},m(H),11,hs)),64))],544),[[we,T.value==="aspect_ratio"]])]),t("div",{class:"tooltip-container","data-tooltip-container":"centering",onMouseenter:e[21]||(e[21]=H=>ye("centering")),onMouseleave:Ae},[t("button",{class:"center-btn",onClick:Ue},e[56]||(e[56]=[t("span",{class:"material-icons"},"center_focus_strong",-1)])),ee(t("div",{class:"custom-tooltip advanced-tooltip","data-tooltip":"centering",onMouseenter:Pt,onMouseleave:Lt},[e[57]||(e[57]=J(" –û—Ç—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–ª–µ–µ—Ä ")),Le(To,{modelValue:it.value,"onUpdate:modelValue":e[20]||(e[20]=H=>it.value=H),title:"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞"},null,8,["modelValue"]),e[58]||(e[58]=t("span",{class:"tooltip-title"},"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞",-1))],544),[[we,T.value==="centering"]])],32),$.value?h("",!0):(i(),a("div",bs,[t("button",{class:"app-link-btn",onMouseenter:e[22]||(e[22]=H=>ye("app_link")),onMouseleave:e[23]||(e[23]=H=>T.value=null),onClick:mn},e[59]||(e[59]=[t("span",{class:"material-icons"},"open_in_new",-1)]),32),ee(t("div",ks," –û—Ç–∫—Ä—ã—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ",512),[[we,T.value==="app_link"]])])),$.value?(i(),a("div",ws,[t("button",{class:"copy-link-btn",onMouseenter:e[24]||(e[24]=H=>ye("copy_link")),onMouseleave:e[25]||(e[25]=H=>T.value=null),onClick:fn},e[60]||(e[60]=[t("span",{class:"material-icons"},"content_copy",-1)]),32),ee(t("div",Cs," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É ",512),[[we,T.value==="copy_link"]])])):h("",!0),$.value?(i(),a("div",_s,[t("button",{class:S(["overlay-btn",{active:oe.value}]),onMouseenter:e[26]||(e[26]=H=>ye("overlay")),onMouseleave:e[27]||(e[27]=H=>T.value=null),onClick:kn},[t("span",Es,m(oe.value?"layers":"layers_clear"),1)],34),ee(t("div",{class:"custom-tooltip","data-tooltip":"overlay"},m(oe.value?"–°–∫—Ä—ã—Ç—å –æ–≤–µ—Ä–ª–µ–π –≤–∏–¥–µ–æ":"–ü–æ–∫–∞–∑–∞—Ç—å –æ–≤–µ—Ä–ª–µ–π –≤–∏–¥–µ–æ"),513),[[we,T.value==="overlay"]])])):h("",!0)],64))]),!te.value&&!St.value?(i(),a("div",Ss,[t("div",Is,[t("button",{class:S(["favorite-btn",{active:(Kt=(Bt=c.movieInfo)==null?void 0:Bt.lists)==null?void 0:Kt.isFavorite}]),onMouseenter:e[28]||(e[28]=H=>ye("favorite")),onMouseleave:e[29]||(e[29]=H=>T.value=null),onClick:e[30]||(e[30]=H=>ke(Y(K).FAVORITE))},[t("span",Ms,m((Gt=(yt=c.movieInfo)==null?void 0:yt.lists)!=null&&Gt.isFavorite?"favorite":"favorite_border"),1)],34),ee(t("div",Ls,m("–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"),512),[[we,T.value==="favorite"]])]),t("div",xs,[t("button",{class:S(["watching-btn",{active:(Dt=(cn=c.movieInfo)==null?void 0:cn.lists)==null?void 0:Dt.isWatching}]),onMouseenter:e[31]||(e[31]=H=>ye("watching")),onMouseleave:e[32]||(e[32]=H=>T.value=null),onClick:e[33]||(e[33]=H=>ke(Y(K).WATCHING))},[t("span",Ts,m((Nn=(Yt=c.movieInfo)==null?void 0:Yt.lists)!=null&&Nn.isWatching?"visibility":"visibility_off"),1)],34),ee(t("div",Rs,m("–°–º–æ—Ç—Ä—é"),512),[[we,T.value==="watching"]])]),t("div",As,[t("button",{class:S(["later-btn",{active:(On=(Pn=c.movieInfo)==null?void 0:Pn.lists)==null?void 0:On.isLater}]),onMouseenter:e[34]||(e[34]=H=>ye("later")),onMouseleave:e[35]||(e[35]=H=>T.value=null),onClick:e[36]||(e[36]=H=>ke(Y(K).LATER))},e[61]||(e[61]=[t("span",{class:"material-icons"},"watch_later",-1)]),34),ee(t("div",Bs,m("–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"),512),[[we,T.value==="later"]])]),t("div",Ns,[t("button",{class:S(["completed-btn",{active:(Fn=($n=c.movieInfo)==null?void 0:$n.lists)==null?void 0:Fn.isCompleted}]),onMouseenter:e[37]||(e[37]=H=>ye("completed")),onMouseleave:e[38]||(e[38]=H=>T.value=null),onClick:e[39]||(e[39]=H=>ke(Y(K).COMPLETED))},[t("span",Ps,m((jn=(Un=c.movieInfo)==null?void 0:Un.lists)!=null&&jn.isCompleted?"check_circle":"check_circle_outline"),1)],34),ee(t("div",Os,m("–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"),512),[[we,T.value==="completed"]])]),t("div",$s,[t("button",{class:S(["abandoned-btn",{active:(Dn=(Hn=c.movieInfo)==null?void 0:Hn.lists)==null?void 0:Dn.isAbandoned}]),onMouseenter:e[40]||(e[40]=H=>ye("abandoned")),onMouseleave:e[41]||(e[41]=H=>T.value=null),onClick:e[42]||(e[42]=H=>ke(Y(K).ABANDONED))},[t("span",Fs,m(((qn=(Vn=c.movieInfo)==null?void 0:Vn.lists)!=null&&qn.isAbandoned,"not_interested")),1)],34),ee(t("div",Us,m("–ë—Ä–æ—à–µ–Ω–æ"),512),[[we,T.value==="abandoned"]])])])):h("",!0)])),Le(vn,{ref_key:"notificationRef",ref:re},null,512)],64))}}},Qn=ct(js,[["__scopeId","data-v-361868a6"]]),Hs={key:0,class:"carousel-container"},Ds={class:"carousel-wrapper"},Vs=["onClick"],qs=["src","alt"],zs={class:"video-name"},Ws={key:0,class:"video-player"},Ks=["src"],Gs={__name:"TrailerCarousel",props:{videos:{type:Array,required:!0},activeVideoIndex:{type:Number,default:null}},emits:["select"],setup(c,{emit:n}){const u=en(),s=N(()=>u.isMobile),b=c,y=n,f=v(b.activeVideoIndex),w=v(null),p=v(!1),_=v(!1),k=()=>{if(!w.value)return;const{scrollLeft:P,scrollWidth:B,clientWidth:M}=w.value;p.value=P>0,_.value=P<B-M-1},l=P=>{if(!w.value)return;const B=w.value.querySelector(".carousel-item");if(!B)return;const M=B.clientWidth+16;w.value.scrollBy({left:M*P,behavior:"smooth"})},E=P=>{f.value=P,y("select",b.videos[P])},A=()=>k(),g=v([]),x=async P=>{try{return(await fetch("https://img.youtube.com/vi/".concat(P,"/0.jpg"))).ok}catch(B){return!1}};return Nt(async()=>{const P=b.videos.map(async M=>await x(M.videoId)?M:null),B=await Promise.all(P);g.value=B.filter(Boolean),k(),window.addEventListener("resize",A)}),qe(()=>b.videos,async P=>{const B=P.map(async O=>await x(O.videoId)?O:null),M=await Promise.all(B);g.value=M.filter(Boolean)}),qe(()=>b.activeVideoIndex,P=>{f.value=P}),xn(()=>{window.removeEventListener("resize",A)}),(P,B)=>g.value.length?(i(),a("div",Hs,[B[4]||(B[4]=t("h2",null,"–¢—Ä–µ–π–ª–µ—Ä—ã (YouTube)",-1)),t("div",Ds,[ee(t("button",{class:"scroll-button left",onClick:B[0]||(B[0]=M=>l(-1))},B[2]||(B[2]=[t("span",{class:"material-symbols-outlined"},"arrow_back_ios",-1)]),512),[[we,!s.value&&p.value]]),t("div",{ref_key:"carousel",ref:w,class:"carousel",onScroll:k},[(i(!0),a(ve,null,Me(g.value,(M,O)=>(i(),a("div",{key:O,class:"carousel-item",onClick:R=>E(O)},[t("img",{src:"https://img.youtube.com/vi/".concat(M.videoId,"/0.jpg"),alt:M.name},null,8,qs),t("div",zs,m(M.name),1)],8,Vs))),128))],544),ee(t("button",{class:"scroll-button right",onClick:B[1]||(B[1]=M=>l(1))},B[3]||(B[3]=[t("span",{class:"material-symbols-outlined"},"arrow_forward_ios",-1)]),512),[[we,!s.value&&_.value]])]),f.value!==null?(i(),a("div",Ws,[t("iframe",{src:c.videos[f.value].iframeUrl,frameborder:"0",allowfullscreen:""},null,8,Ks)])):h("",!0)])):h("",!0)}},Ys=ct(Gs,[["__scopeId","data-v-4a5806b3"]]),Zs={class:"rating-container"},Xs={class:"rating-display"},Qs={class:"rating-numbers"},Js=["onClick","onMouseenter"],el={key:0,class:"tooltip-footer"},tl={class:"rating-numbers mobile-rating-numbers"},nl=["onClick"],ol={key:0,class:"mobile-modal-footer"},sl={__name:"MovieRating",props:{kpId:{type:String,required:!0},showDash:{type:Boolean,default:!1}},setup(c){const n=en(),u=tn(),s=c,b=v(null),y=v(null),f=v(null),w=v(null),p=v(0),_=v(!1),k=v(!1);let l=null;const E=R=>R?R.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",A=()=>{l=setTimeout(()=>{_.value=!1,n.isMobile||(k.value=!1)},100)},g=()=>{l&&(clearTimeout(l),l=null),_.value=!0},x=()=>{n.isMobile&&(k.value=!k.value)},P=()=>{u.push("/login")},B=async()=>{try{const R=await ao(s.kpId);y.value=R.user_rating,f.value=R.average_rating,w.value=E(R.vote_count)}catch(R){console.error("Error loading rating:",R)}},M=async R=>{var ne;try{R===y.value?(await zn(s.kpId,null),y.value=null,b.value.showNotification("–û—Ü–µ–Ω–∫–∞ —É–¥–∞–ª–µ–Ω–∞")):(await zn(s.kpId,R),y.value=R,b.value.showNotification("–û—Ü–µ–Ω–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞")),n.isMobile&&(k.value=!1),B()}catch(te){console.error("Error setting rating:",te),((ne=te.response)==null?void 0:ne.status)===401?b.value.showNotification('–î–ª—è –æ—Ü–µ–Ω–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:P}):b.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ü–µ–Ω–∫–∏"),n.isMobile&&(k.value=!1)}},O=()=>{k.value=!1};return Nt(()=>{B()}),(R,ne)=>(i(),a("div",Zs,[t("div",Xs,[t("a",{href:"#",class:S(["rating-link",{"has-rating":y.value}]),onMouseenter:ne[0]||(ne[0]=te=>_.value=!0),onMouseleave:A,onClick:wt(x,["prevent"])},[ne[3]||(ne[3]=t("img",{src:Lo,alt:"ReYohoho",class:"rating-logo"},null,-1)),t("span",{class:S(["average-rating",Y(Xt)(f.value)])},m(f.value?f.value.toFixed(1).replace(/\.0$/,""):"‚Äî"),3)],34),ee(t("div",{class:"rating-tooltip",onMouseenter:g,onMouseleave:A},[t("div",Qs,[(i(),a(ve,null,Me(10,te=>t("button",{key:te,class:S(["number-btn",{active:te===y.value,hover:te===p.value,"average-highlight":f.value&&te<=Math.round(f.value)}]),onClick:$=>M(te),onMouseenter:$=>p.value=te,onMouseleave:ne[1]||(ne[1]=$=>p.value=0)},m(te),43,Js)),64))]),w.value?(i(),a("div",el,"–û—Ü–µ–Ω–æ–∫: "+m(w.value),1)):h("",!0)],544),[[we,(_.value||k.value)&&!Y(n).isMobile]])]),Le(vn,{ref_key:"notificationRef",ref:b},null,512),Y(n).isMobile&&k.value?(i(),a("div",{key:0,class:"mobile-modal-overlay",onClick:O},[t("div",{class:"mobile-modal",onClick:ne[2]||(ne[2]=wt(()=>{},["stop"]))},[t("div",{class:"mobile-modal-header"},[ne[4]||(ne[4]=t("h3",null,"–û—Ü–µ–Ω–∏—Ç—å —Ñ–∏–ª—å–º",-1)),t("button",{class:"close-button",onClick:O},"√ó")]),t("div",tl,[(i(),a(ve,null,Me(10,te=>t("button",{key:te,class:S(["number-btn",{active:te===y.value,"average-highlight":f.value&&te<=Math.round(f.value)}]),onClick:$=>M(te)},m(te),11,nl)),64))]),w.value?(i(),a("div",ol,"–û—Ü–µ–Ω–æ–∫: "+m(w.value),1)):h("",!0)])])):h("",!0)]))}},ll=ct(sl,[["__scopeId","data-v-2df64bd5"]]),il={name:"EmojiPicker",props:{isVisible:{type:Boolean,default:!1}},emits:["emoji-selected","mouse-enter","mouse-leave","close"],data(){return{activeCategory:"smileys",categories:[{name:"smileys",icon:"üòÄ",emojis:["üòÄ","üòÉ","üòÑ","üòÅ","üòÜ","üòÖ","üòÇ","ü§£","üòä","üòá","üôÇ","üôÉ","üòâ","üòå","üòç","ü•∞","üòò","üòó","üòô","üòö","üòã","üòõ","üòù","üòú","ü§™","ü§®","üßê","ü§ì","üòé","ü§©","ü•≥"]},{name:"emotions",icon:"üò¢",emojis:["üò•","üò¢","üò≠","üò§","üò†","üò°","ü§¨","ü§Ø","üò≥","ü•µ","ü•∂","üò±","üò®","üò∞","üò•","üòì","ü§ó","ü§î","ü§≠","ü§´","ü§•","üò∂","üòê","üòë","üò¨","üôÑ","üòØ","üò¶","üòß","üòÆ","üò≤"]},{name:"gestures",icon:"üëç",emojis:["üëç","üëé","üëå","ü§å","ü§è","‚úåÔ∏è","ü§û","ü§ü","ü§ò","ü§ô","üëà","üëâ","üëÜ","üñï","üëá","‚òùÔ∏è","üëè","üôå","üëê","ü§≤","ü§ù","üôè","‚úçÔ∏è","üí™","ü¶æ","ü¶ø","ü¶µ","ü¶∂","üëÇ","ü¶ª","üëÉ"]},{name:"hearts",icon:"‚ù§Ô∏è",emojis:["‚ù§Ô∏è","üß°","üíõ","üíö","üíô","üíú","ü§é","üñ§","ü§ç","üíî","‚ù£Ô∏è","üíï","üíû","üíì","üíó","üíñ","üíò","üíù","üíü","‚ô•Ô∏è","üíØ","üí¢","üí•","üí´","üí¶","üí®","üï≥Ô∏è","üí£","üí¨","üëÅÔ∏è‚Äçüó®Ô∏è","üó®Ô∏è"]},{name:"objects",icon:"üéâ",emojis:["üéâ","üéä","üéà","üéÅ","üéÄ","üéÇ","üç∞","üßÅ","üç≠","üç¨","üç´","üç©","üç™","üçï","üçî","üçü","üå≠","ü•™","üåÆ","üåØ","ü•ô","ü•ö","üç≥","ü•ò","üç≤","ü•ó","üçø","üßà","üßÄ","ü•®","ü•Ø"]}]}},computed:{currentEmojis(){const c=this.categories.find(n=>n.name===this.activeCategory);return c?c.emojis:[]}},methods:{selectEmoji(c){this.$emit("emoji-selected",c)}}},al={class:"emoji-categories"},rl=["onClick"],ul={class:"emoji-grid"},dl=["onClick"];function cl(c,n,u,s,b,y){return u.isVisible?(i(),a("div",{key:0,class:"emoji-picker",onMouseenter:n[1]||(n[1]=f=>c.$emit("mouse-enter")),onMouseleave:n[2]||(n[2]=f=>c.$emit("mouse-leave"))},[t("button",{class:"close-btn mobile-only",onClick:n[0]||(n[0]=f=>c.$emit("close"))},n[3]||(n[3]=[t("i",{class:"fas fa-times"},null,-1)])),t("div",al,[(i(!0),a(ve,null,Me(b.categories,f=>(i(),a("button",{key:f.name,onClick:w=>b.activeCategory=f.name,class:S([{active:b.activeCategory===f.name},"category-btn"]),type:"button"},m(f.icon),11,rl))),128))]),t("div",ul,[(i(!0),a(ve,null,Me(y.currentEmojis,f=>(i(),a("button",{key:f,onClick:w=>y.selectEmoji(f),class:"emoji-btn",type:"button"},m(f),9,dl))),128))])],32)):h("",!0)}const Tn=ct(il,[["render",cl],["__scopeId","data-v-209132f3"]]),vl=async c=>{const n=await ro();return await c(n)},ml=async c=>{const{data:n}=await vl(u=>u.get("/search_emotes/".concat(c)));return n.emotes||[]},fl={name:"ImagePicker",props:{isVisible:{type:Boolean,required:!0},currentUser:{type:Object,default:null}},emits:["image-selected","mouse-enter","mouse-leave","close","login-required"],setup(c,{emit:n}){const u=v(""),s=v([]),b=v(null),y=v(!1),w=uo(async l=>{if(!c.currentUser){console.warn("–ü–æ–ø—ã—Ç–∫–∞ –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏");return}if(!l.trim()){s.value=[],y.value=!1;return}y.value=!0;try{s.value=await ml(l)}catch(E){console.error("Error searching images:",E),s.value=[]}finally{y.value=!1}},300),p=()=>{if(!c.currentUser){n("login-required");return}u.value.trim()&&(y.value=!0),w(u.value)},_=l=>{if(!c.currentUser){n("login-required");return}n("image-selected",l),n("close")},k=()=>{setTimeout(()=>{c.isVisible&&n("mouse-leave")},100)};return qe(()=>c.isVisible,l=>{l&&(u.value="",s.value=[],y.value=!1)}),{searchQuery:u,images:s,searchInput:b,isLoading:y,handleSearch:p,selectImage:_,handleInputBlur:k}}},gl={key:0,class:"auth-required"},pl={class:"auth-message"},yl={key:1},hl={class:"image-picker-header"},bl={class:"image-content"},kl={key:0,class:"loading-spinner"},wl={key:1,class:"image-grid"},Cl=["onClick"],_l=["src","alt"],El={key:2,class:"no-images"},Sl={key:3,class:"no-search"};function Il(c,n,u,s,b,y){return u.isVisible?(i(),a("div",{key:0,class:"image-picker",onMouseenter:n[7]||(n[7]=f=>c.$emit("mouse-enter")),onMouseleave:n[8]||(n[8]=f=>c.$emit("mouse-leave")),onClick:n[9]||(n[9]=wt(()=>{},["stop"]))},[t("button",{class:"close-btn mobile-only",onClick:n[0]||(n[0]=f=>c.$emit("close"))},n[10]||(n[10]=[t("i",{class:"fas fa-times"},null,-1)])),u.currentUser?(i(),a("div",yl,[t("div",hl,[ee(t("input",{ref:"searchInput",type:"text","onUpdate:modelValue":n[2]||(n[2]=f=>s.searchQuery=f),placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–º–∞–π–ª–∞ 7tv",class:"image-search-input",onInput:n[3]||(n[3]=(...f)=>s.handleSearch&&s.handleSearch(...f)),onClick:n[4]||(n[4]=wt(()=>{},["stop"])),onFocus:n[5]||(n[5]=f=>c.$emit("mouse-enter")),onBlur:n[6]||(n[6]=(...f)=>s.handleInputBlur&&s.handleInputBlur(...f))},null,544),[[kt,s.searchQuery]])]),t("div",bl,[s.isLoading?(i(),a("div",kl,n[14]||(n[14]=[t("div",{class:"spinner"},null,-1),t("p",null,"–ü–æ–∏—Å–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...",-1)]))):s.images.length>0?(i(),a("div",wl,[(i(!0),a(ve,null,Me(s.images,(f,w)=>(i(),a("div",{key:w,class:"image-item",onClick:p=>s.selectImage(f)},[t("img",{src:f,alt:"Image "+(w+1)},null,8,_l)],8,Cl))),128))])):s.searchQuery.trim()?(i(),a("div",El,n[15]||(n[15]=[t("p",null,"–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤",-1)]))):(i(),a("div",Sl,n[16]||(n[16]=[t("p",null,"–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞",-1)])))])])):(i(),a("div",gl,[t("div",pl,[n[11]||(n[11]=t("i",{class:"fas fa-lock"},null,-1)),n[12]||(n[12]=t("h3",null,"–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è",-1)),n[13]||(n[13]=t("p",null,"–î–ª—è –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç",-1)),t("button",{class:"login-button",onClick:n[1]||(n[1]=f=>c.$emit("login-required"))},"–í–æ–π—Ç–∏")])]))],32)):h("",!0)}const Rn=ct(fl,[["render",Il],["__scopeId","data-v-f33eb3f6"]]),Ml={name:"LinkModal",props:{isVisible:{type:Boolean,default:!1},selectedText:{type:String,default:""}},emits:["close","submit"],setup(c,{emit:n}){const u=v(""),s=v(""),b=v(null),y=v(null),f=N(()=>/^https?:\/\/.+/.test(u.value.trim())&&s.value.trim()),w=()=>{n("close"),_()},p=()=>{f.value&&(n("submit",{url:u.value.trim(),title:s.value.trim()}),w())},_=()=>{u.value="",s.value=""},k=l=>{var E;l.key==="Enter"?(l.preventDefault(),f.value?p():l.target===b.value&&u.value.trim()&&((E=y.value)==null||E.focus())):l.key==="Escape"&&w()};return qe(()=>c.isVisible,l=>{l&&(c.selectedText.trim()&&(s.value=c.selectedText.trim()),Qe(()=>{var E;(E=b.value)==null||E.focus()}))}),{linkUrl:u,linkTitle:s,urlInput:b,titleInput:y,isValidLink:f,closeModal:w,submitLink:p,handleKeydown:k}}},Ll={class:"link-modal-header"},xl={class:"link-modal-content"},Tl={class:"form-group"},Rl={class:"form-group"},Al={class:"link-modal-footer"},Bl=["disabled"];function Nl(c,n,u,s,b,y){return u.isVisible?(i(),a("div",{key:0,class:"link-modal-overlay",onClick:n[8]||(n[8]=(...f)=>s.closeModal&&s.closeModal(...f))},[t("div",{class:"link-modal",onClick:n[7]||(n[7]=wt(()=>{},["stop"]))},[t("div",Ll,[n[10]||(n[10]=t("h3",null,"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É",-1)),t("button",{class:"close-button",onClick:n[0]||(n[0]=(...f)=>s.closeModal&&s.closeModal(...f))},n[9]||(n[9]=[t("i",{class:"fas fa-times"},null,-1)]))]),t("div",xl,[t("div",Tl,[n[11]||(n[11]=t("label",{for:"link-url"},"URL —Å—Å—ã–ª–∫–∏:",-1)),ee(t("input",{id:"link-url",ref:"urlInput","onUpdate:modelValue":n[1]||(n[1]=f=>s.linkUrl=f),type:"url",placeholder:"https://example.com",class:"link-input",onKeydown:n[2]||(n[2]=(...f)=>s.handleKeydown&&s.handleKeydown(...f))},null,544),[[kt,s.linkUrl]])]),t("div",Rl,[n[12]||(n[12]=t("label",{for:"link-title"},"–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏:",-1)),ee(t("input",{id:"link-title",ref:"titleInput","onUpdate:modelValue":n[3]||(n[3]=f=>s.linkTitle=f),type:"text",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è",class:"link-input",onKeydown:n[4]||(n[4]=(...f)=>s.handleKeydown&&s.handleKeydown(...f))},null,544),[[kt,s.linkTitle]])])]),t("div",Al,[t("button",{class:"cancel-button",onClick:n[5]||(n[5]=(...f)=>s.closeModal&&s.closeModal(...f))},"–û—Ç–º–µ–Ω–∞"),t("button",{class:"submit-button",disabled:!s.isValidLink,onClick:n[6]||(n[6]=(...f)=>s.submitLink&&s.submitLink(...f))},"–î–æ–±–∞–≤–∏—Ç—å",8,Bl)])])])):h("",!0)}const An=ct(Ml,[["render",Nl],["__scopeId","data-v-a794d83f"]]);function Pl(){const c=v(!1),n=v(!1),u=v(!1),s=()=>{n.value=!0},b=()=>{n.value=!1,setTimeout(()=>{!n.value&&!u.value&&(c.value=!1)},300)},y=()=>{u.value=!0,c.value=!0},f=()=>{u.value=!1,setTimeout(()=>{!n.value&&!u.value&&(c.value=!1)},300)},w=()=>{c.value=!1};return{showEmojiPicker:c,isEmojiHovered:n,isButtonHovered:u,handleEmojiMouseEnter:s,handleEmojiMouseLeave:b,handleButtonMouseEnter:y,handleButtonMouseLeave:f,closeEmojiPicker:w,insertEmoji:(k,l,E,A)=>{const g=l.value;if(g){const x=g.selectionStart,P=g.selectionEnd,B=E.value.substring(0,x),M=E.value.substring(P),O=B+k+M;A(O),Qe(()=>{g.focus(),g.setSelectionRange(x+k.length,x+k.length),g.style.height&&(g.style.height="auto",g.style.height="".concat(Math.min(g.scrollHeight,200),"px"))})}else A(E.value+k)},handleGlobalClick:k=>{!k.target.closest(".emoji-picker")&&!k.target.closest(".emoji-button-inline")&&w()}}}function Ol(){const c=v(!1),n=v(!1),u=v(!1),s=()=>{n.value=!0},b=()=>{n.value=!1,setTimeout(()=>{!n.value&&!u.value&&(c.value=!1)},300)},y=()=>{u.value=!0,c.value=!0},f=()=>{u.value=!1,setTimeout(()=>{!n.value&&!u.value&&(c.value=!1)},300)},w=()=>{c.value=!1};return{showImagePicker:c,isImageHovered:n,isButtonHovered:u,handleImageMouseEnter:s,handleImageMouseLeave:b,handleImageButtonMouseEnter:y,handleButtonMouseLeave:f,closeImagePicker:w,insertImage:(k,l,E,A)=>{const g=l.value;if(g){const x=g.selectionStart,P=g.selectionEnd,B="[img]".concat(k,"[/img]"),M=E.value.slice(0,x)+B+E.value.slice(P);A(M),Qe(()=>{g.focus(),g.setSelectionRange(x+B.length,x+B.length),g.style.height&&(g.style.height="auto",g.style.height="".concat(Math.min(g.scrollHeight,200),"px"))})}else{const x="[img]".concat(k,"[/img]");A(E.value+x)}},handleGlobalClick:k=>{!k.target.closest(".image-picker")&&!k.target.closest(".emoji-button-inline")&&w()}}}function $l(){const c=v(!1),n=v("");return{showLinkModal:c,selectedTextForLink:n,insertLink:(f,w)=>{const p=f.value;if(p){const _=p.selectionStart,k=p.selectionEnd,l=w.value.slice(_,k);n.value=l.trim()||""}c.value=!0},insertLinkFromModal:(f,w,p,_)=>{const k=w.value;if(k){const l=k.selectionStart,E=k.selectionEnd,A="[link=".concat(f.url,"]").concat(f.title,"[/link]"),g=p.value.slice(0,l)+A+p.value.slice(E);_(g),Qe(()=>{k.focus(),k.setSelectionRange(l+A.length,l+A.length),k.style.height&&(k.style.height="auto",k.style.height="".concat(Math.min(k.scrollHeight,200),"px"))})}},closeLinkModal:()=>{c.value=!1},insertSpoiler:(f,w,p)=>{const _=f.value;if(_){const k=_.selectionStart,l=_.selectionEnd,E=w.value.slice(k,l);let A;E.trim()?A="[spoiler]".concat(E,"[/spoiler]"):A="[spoiler][/spoiler]";const g=w.value.slice(0,k)+A+w.value.slice(l);p(g),Qe(()=>{if(_.focus(),E.trim())_.setSelectionRange(k+A.length,k+A.length);else{const x=k+9;_.setSelectionRange(x,x)}_.style.height&&(_.style.height="auto",_.style.height="".concat(Math.min(_.scrollHeight,200),"px"))})}}}}function Fl(){return{autoResize:u=>{const s=u==null?void 0:u.target;s&&(s.style.height="auto",s.style.height="".concat(Math.min(s.scrollHeight,200),"px"))},autoResizeElement:u=>{u&&(u.style.height="auto",u.style.height="".concat(Math.min(u.scrollHeight,200),"px"))}}}function Bn(){const c=Pl(),n=Ol(),u=$l(),{autoResize:s,autoResizeElement:b}=Fl(),y=()=>{c.isButtonHovered.value=!0,n.isButtonHovered.value=!0,c.showEmojiPicker.value=!0,n.showImagePicker.value=!1},f=()=>{c.isButtonHovered.value=!0,n.isButtonHovered.value=!0,n.showImagePicker.value=!0,c.showEmojiPicker.value=!1},w=()=>{c.isButtonHovered.value=!1,n.isButtonHovered.value=!1,setTimeout(()=>{!c.isEmojiHovered.value&&!n.isImageHovered.value&&!c.isButtonHovered.value&&!n.isButtonHovered.value&&(c.showEmojiPicker.value=!1,n.showImagePicker.value=!1)},300)},p=()=>{c.showEmojiPicker.value=!1,n.showImagePicker.value=!1},_=x=>{!x.target.closest(".emoji-picker")&&!x.target.closest(".image-picker")&&!x.target.closest(".emoji-button-inline")&&p()},k=(x,P,B,M)=>{c.insertEmoji(x,P,B,M)},l=(x,P,B,M)=>{n.insertImage(x,P,B,M)},E=(x,P,B)=>{u.insertLink(x,P,B)},A=(x,P,B,M)=>{u.insertLinkFromModal(x,P,B,M)},g=(x,P,B)=>{u.insertSpoiler(x,P,B)};return Nt(()=>{document.addEventListener("click",_)}),xn(()=>{document.removeEventListener("click",_)}),{showEmojiPicker:c.showEmojiPicker,handleEmojiMouseEnter:c.handleEmojiMouseEnter,handleEmojiMouseLeave:c.handleEmojiMouseLeave,closeEmojiPicker:c.closeEmojiPicker,showImagePicker:n.showImagePicker,handleImageMouseEnter:n.handleImageMouseEnter,handleImageMouseLeave:n.handleImageMouseLeave,closeImagePicker:n.closeImagePicker,showLinkModal:u.showLinkModal,selectedTextForLink:u.selectedTextForLink,closeLinkModal:u.closeLinkModal,handleButtonMouseEnter:y,handleImageButtonMouseEnter:f,handleButtonMouseLeave:w,closeAllPickers:p,insertEmojiUniversal:k,insertImageUniversal:l,insertLinkUniversal:E,insertLinkFromModalUniversal:A,insertSpoilerUniversal:g,autoResize:s,autoResizeElement:b}}const Ul=c=>c===1?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π":c>=2&&c<=4?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è":"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤",jl=c=>{if(!c)return"?";const n=c.split(" ");return n.length===1?c.slice(0,2).toUpperCase():(n[0][0]+n[n.length-1][0]).toUpperCase()},Hl={name:"CommentItem",components:{EmojiPicker:Tn,ImagePicker:Rn,LinkModal:An},props:{comment:{type:Object,required:!0,default:()=>({username:"–ê–Ω–æ–Ω–∏–º",user_avatar:null,content:"",created_at:new Date().toISOString(),rating:0,replies:[]})},currentUser:{type:Object,required:!0,default:()=>({})},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate"],setup(c,{emit:n}){var $e,Ct;const u=tn(),s=N(()=>{var I;return c.editingCommentId===((I=c.comment)==null?void 0:I.id)}),b=v((($e=c.comment)==null?void 0:$e.content)||""),y=v(((Ct=c.comment)==null?void 0:Ct.user_rating)||0),f=v(null),w=v(null),{showEmojiPicker:p,showImagePicker:_,showLinkModal:k,selectedTextForLink:l,handleEmojiMouseEnter:E,handleEmojiMouseLeave:A,handleImageMouseEnter:g,handleImageMouseLeave:x,handleButtonMouseEnter:P,handleImageButtonMouseEnter:B,handleButtonMouseLeave:M,closeEmojiPicker:O,closeImagePicker:R,closeLinkModal:ne,insertEmojiUniversal:te,insertImageUniversal:$,insertLinkUniversal:T,insertLinkFromModalUniversal:je,insertSpoilerUniversal:me,autoResize:re}=Bn(),{formatContentWithTruncation:Je}=no();Nt(async()=>{var I;if((I=c.comment)!=null&&I.user_avatar){const V=await co();f.value="".concat(V).concat(c.comment.user_avatar)}});const D=N(()=>{var I;return c.currentUser&&((I=c.comment)==null?void 0:I.user_id)===c.currentUser.id}),pe=N(()=>{var I;return c.currentUser&&((I=c.comment)==null?void 0:I.user_id)===c.currentUser.id||c.currentUser&&c.currentUser.is_admin===1}),ue=N(()=>{var I,V,De;return((I=c.comment)==null?void 0:I.updated_at)&&((V=c.comment)==null?void 0:V.updated_at)!==((De=c.comment)==null?void 0:De.created_at)}),ae=N(()=>{var I,V;return(I=c.comment)!=null&&I.is_deleted?!1:(((V=c.comment)==null?void 0:V.rating)||0)<=-3}),Re=N(()=>ae.value),vt=v(!1),et=N(()=>{var I,V;return(I=c.comment)!=null&&I.is_deleted?null:(((V=c.comment)==null?void 0:V.rating)||0)<=-3?"lowRating":null}),be=()=>{var I,V;n("start-edit",(I=c.comment)==null?void 0:I.id),b.value=((V=c.comment)==null?void 0:V.content)||"",Qe(()=>{w.value&&(w.value.focus(),re({target:w.value}))})},Ce=()=>{var I;n("cancel-edit"),b.value=((I=c.comment)==null?void 0:I.content)||""},_e=()=>{var I;b.value.trim()&&n("edit",(I=c.comment)==null?void 0:I.id,b.value.trim())},Ke=()=>{var I;confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π?")&&n("delete",(I=c.comment)==null?void 0:I.id)},Ge=I=>{var V,De;y.value===I?(y.value=0,n("rate",(V=c.comment)==null?void 0:V.id,I)):(y.value=I,n("rate",(De=c.comment)==null?void 0:De.id,I))},Fe=I=>{I.key==="Enter"&&!I.shiftKey&&(I.preventDefault(),_e())},oe=N(()=>{var I;return Je((I=c.comment)==null?void 0:I.content)}),at=()=>{console.log("Avatar load error, falling back to initials"),f.value=null,Qe(()=>{const I=document.querySelector(".avatar-placeholder");I&&(I.style.display="flex")})},Oe=()=>{u.push("/login")},Ye=I=>{te(I,w,b,V=>{b.value=V})},rt=I=>{$(I,w,b,V=>{b.value=V})},z=()=>{me(w,b,I=>{b.value=I})},tt=()=>{T(w,b,I=>{b.value=I})},He=I=>{je(I,w,b,V=>{b.value=V})},de=I=>{re(I)};return qe(b,()=>{s.value&&w.value&&Qe(()=>{de({target:w.value})})}),{isEditing:s,editContent:b,userRating:y,isCommentOwner:D,canDeleteComment:pe,isCommentEdited:ue,formatDate:oo,formatRelativeTime:xo,startEdit:be,cancelEdit:Ce,saveEdit:_e,confirmDelete:Ke,rateComment:Ge,avatarUrl:f,getInitials:jl,handleEditKeydown:Fe,isCommentHidden:Re,showHiddenComment:vt,hiddenCommentReason:et,formattedContent:oe,autoResizeEdit:de,editTextarea:w,showEmojiPicker:p,showImagePicker:_,insertEmojiEdit:Ye,insertImageEdit:rt,insertSpoilerEdit:z,insertLinkEdit:tt,handleEmojiMouseEnter:E,handleEmojiMouseLeave:A,handleImageMouseEnter:g,handleImageMouseLeave:x,closeEmojiPicker:O,closeImagePicker:R,handleButtonMouseEnter:P,handleButtonMouseLeave:M,handleImageButtonMouseEnter:B,handleAvatarError:at,openLogin:Oe,showLinkModal:k,selectedTextForLink:l,insertLinkFromModal:He,closeLinkModal:ne}}},Dl=["data-comment-id"],Vl={class:"comment-header"},ql={class:"user-info"},zl={class:"user-avatar"},Wl=["src","alt"],Kl={class:"user-details"},Gl={class:"username"},Yl={key:0,class:"user-rating"},Zl=["title"],Xl=["title"],Ql={class:"comment-content"},Jl={key:0,class:"hidden-comment-warning"},ei={key:1},ti={key:0,class:"deleted-comment"},ni={key:1},oi={key:0,class:"edit-form"},si={class:"edit-textarea-container"},li={class:"edit-footer"},ii={class:"edit-actions"},ai=["disabled"],ri={class:"character-counter-container"},ui={key:1,class:"comment-text-container"},di=["innerHTML"],ci={class:"comment-footer"},vi={class:"comment-actions"},mi={class:"rating-buttons"},fi={class:"action-buttons"};function gi(c,n,u,s,b,y){var k,l,E,A,g,x,P,B,M,O,R,ne,te,$,T,je,me,re,Je;const f=We("router-link"),w=We("EmojiPicker"),p=We("ImagePicker"),_=We("LinkModal");return i(),a("div",{class:"comment-item","data-comment-id":(k=u.comment)==null?void 0:k.id},[t("div",Vl,[t("div",ql,[Le(f,{to:{path:"/lists/".concat((l=u.comment)==null?void 0:l.user_id)},target:"_blank",rel:"noopener noreferrer",class:"user-avatar-link"},{default:Mn(()=>{var D,pe;return[t("div",zl,[s.avatarUrl?(i(),a("img",{key:0,src:s.avatarUrl,alt:((D=u.comment)==null?void 0:D.username)||"–ê–Ω–æ–Ω–∏–º",onError:n[0]||(n[0]=(...ue)=>s.handleAvatarError&&s.handleAvatarError(...ue)),onerror:"this.onerror=null; this.style.display='none'; this.nextElementSibling.style.display='flex';"},null,40,Wl)):(i(),a("div",{key:1,class:"avatar-placeholder",style:Qt({display:s.avatarUrl?"none":"flex"})},m(s.getInitials(((pe=u.comment)==null?void 0:pe.username)||"–ê–Ω–æ–Ω–∏–º")),5))])]}),_:1},8,["to"]),t("div",Kl,[Le(f,{to:{path:"/lists/".concat((E=u.comment)==null?void 0:E.user_id)},target:"_blank",rel:"noopener noreferrer",class:"username-link"},{default:Mn(()=>{var D;return[t("span",Gl,m(((D=u.comment)==null?void 0:D.username)||"–ê–Ω–æ–Ω–∏–º"),1)]}),_:1},8,["to"]),(A=u.comment)!=null&&A.user_movie_rating?(i(),a("span",Yl,[n[18]||(n[18]=t("i",{class:"fas fa-star"},null,-1)),J(" "+m(u.comment.user_movie_rating),1)])):h("",!0),t("span",{class:"date",title:s.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(s.formatDate((g=u.comment)==null?void 0:g.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(s.formatDate((x=u.comment)==null?void 0:x.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(s.formatDate((P=u.comment)==null?void 0:P.created_at))},[J(m(s.formatRelativeTime((B=u.comment)==null?void 0:B.created_at))+" ",1),s.isCommentEdited?(i(),a("i",{key:0,class:"fas fa-pencil-alt edit-icon",title:s.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(s.formatDate((M=u.comment)==null?void 0:M.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(s.formatDate((O=u.comment)==null?void 0:O.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(s.formatDate((R=u.comment)==null?void 0:R.created_at))},null,8,Xl)):h("",!0)],8,Zl)])])]),t("div",Ql,[!((ne=u.comment)!=null&&ne.is_deleted)&&s.isCommentHidden&&!s.showHiddenComment?(i(),a("div",Jl,[s.hiddenCommentReason==="lowRating"?(i(),a("p",{key:0,class:"warning-text",onClick:n[1]||(n[1]=D=>s.showHiddenComment=!0)},n[19]||(n[19]=[t("i",{class:"fas fa-eye-slash"},null,-1),J(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–∫—Ä—ã—Ç –∏–∑-–∑–∞ –Ω–∏–∑–∫–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å. ")]))):h("",!0)])):(i(),a("div",ei,[(te=u.comment)!=null&&te.is_deleted?(i(),a("div",ti,n[20]||(n[20]=[t("p",{class:"deleted-message"},[t("i",{class:"fas fa-trash"}),J(" –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —É–¥–∞–ª—ë–Ω ")],-1)]))):(i(),a("div",ni,[s.isEditing?(i(),a("div",oi,[t("div",si,[ee(t("textarea",{ref:"editTextarea","onUpdate:modelValue":n[2]||(n[2]=D=>s.editContent=D),class:"edit-textarea",rows:"3",maxlength:"1500",onKeydown:n[3]||(n[3]=(...D)=>s.handleEditKeydown&&s.handleEditKeydown(...D)),onInput:n[4]||(n[4]=(...D)=>s.autoResizeEdit&&s.autoResizeEdit(...D))},null,544),[[kt,s.editContent]])]),t("div",li,[t("div",ii,[t("button",{onClick:n[5]||(n[5]=(...D)=>s.cancelEdit&&s.cancelEdit(...D)),class:"cancel-button"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:n[6]||(n[6]=(...D)=>s.saveEdit&&s.saveEdit(...D)),class:"save-button",disabled:!s.editContent.trim()||s.editContent.length>1500}," –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ",8,ai)]),t("div",ri,[t("div",{class:S(["character-counter-inline",{"near-limit":s.editContent.length>1400,"at-limit":s.editContent.length>=1500}])},m(s.editContent.length)+"/1500 ",3),t("button",{type:"button",class:S(["emoji-button-inline",{active:s.showEmojiPicker}]),onMouseenter:n[7]||(n[7]=(...D)=>s.handleButtonMouseEnter&&s.handleButtonMouseEnter(...D)),onMouseleave:n[8]||(n[8]=(...D)=>s.handleButtonMouseLeave&&s.handleButtonMouseLeave(...D))}," üòä ",34),t("button",{type:"button",class:S(["emoji-button-inline",{active:s.showImagePicker}]),onMouseenter:n[9]||(n[9]=(...D)=>s.handleImageButtonMouseEnter&&s.handleImageButtonMouseEnter(...D)),onMouseleave:n[10]||(n[10]=(...D)=>s.handleButtonMouseLeave&&s.handleButtonMouseLeave(...D))},n[21]||(n[21]=[Jt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-f1c85dfc><g id="logo" data-v-f1c85dfc><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-f1c85dfc></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-f1c85dfc></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-f1c85dfc></path></g></svg>',1)]),34),t("button",{type:"button",class:"emoji-button-inline spoiler-button",onClick:n[11]||(n[11]=(...D)=>s.insertSpoilerEdit&&s.insertSpoilerEdit(...D)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},n[22]||(n[22]=[t("i",{class:"fas fa-eye-slash"},null,-1)])),t("button",{type:"button",class:"emoji-button-inline link-button",onClick:n[12]||(n[12]=(...D)=>s.insertLinkEdit&&s.insertLinkEdit(...D)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},n[23]||(n[23]=[t("i",{class:"fas fa-link"},null,-1)])),Le(w,{"is-visible":s.showEmojiPicker,onEmojiSelected:s.insertEmojiEdit,onMouseEnter:s.handleEmojiMouseEnter,onMouseLeave:s.handleEmojiMouseLeave,onClose:s.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),Le(p,{"is-visible":s.showImagePicker,"current-user":u.currentUser,onImageSelected:s.insertImageEdit,onMouseEnter:s.handleImageMouseEnter,onMouseLeave:s.handleImageMouseLeave,onClose:s.closeImagePicker,onLoginRequired:s.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),Le(_,{"is-visible":s.showLinkModal,"selected-text":s.selectedTextForLink,onClose:s.closeLinkModal,onSubmit:s.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):(i(),a("div",ui,[t("p",{class:"comment-text",innerHTML:s.formattedContent},null,8,di)]))]))]))]),t("div",ci,[t("div",vi,[t("div",mi,[!s.isCommentOwner&&!(($=u.comment)!=null&&$.is_deleted)?(i(),a("button",{key:0,onClick:n[13]||(n[13]=D=>s.rateComment(1)),class:S(["rating-button",{"rated-up":s.userRating===1}])},n[24]||(n[24]=[t("i",{class:"fas fa-thumbs-up"},null,-1)]),2)):h("",!0),t("span",{class:S(["rating-count",{"rating-positive":s.userRating===1,"rating-negative":s.userRating===-1}])},m(((T=u.comment)==null?void 0:T.rating)||0),3),!s.isCommentOwner&&!((je=u.comment)!=null&&je.is_deleted)?(i(),a("button",{key:1,onClick:n[14]||(n[14]=D=>s.rateComment(-1)),class:S(["rating-button",{"rated-down":s.userRating===-1}])},n[25]||(n[25]=[t("i",{class:"fas fa-thumbs-down"},null,-1)]),2)):h("",!0)]),t("div",fi,[!u.currentUser||u.currentUser.allow_comments===1?(i(),a("button",{key:0,onClick:n[15]||(n[15]=D=>c.$emit("reply",u.comment)),class:"action-button reply-button"},n[26]||(n[26]=[t("i",{class:"fas fa-reply"},null,-1)]))):h("",!0),s.isCommentOwner&&!((me=u.comment)!=null&&me.is_deleted)&&!s.isEditing&&((re=u.currentUser)==null?void 0:re.allow_comments)===1?(i(),a("button",{key:1,onClick:n[16]||(n[16]=(...D)=>s.startEdit&&s.startEdit(...D)),class:"action-button edit-button"},n[27]||(n[27]=[t("i",{class:"fas fa-edit"},null,-1)]))):h("",!0),s.canDeleteComment&&!((Je=u.comment)!=null&&Je.is_deleted)?(i(),a("button",{key:2,onClick:n[17]||(n[17]=(...D)=>s.confirmDelete&&s.confirmDelete(...D)),class:"action-button delete-button"},n[28]||(n[28]=[t("i",{class:"fas fa-trash"},null,-1)]))):h("",!0)])])])],8,Dl)}const pi=ct(Hl,[["render",gi],["__scopeId","data-v-f1c85dfc"]]),yi={name:"CommentThread",components:{CommentItem:pi,EmojiPicker:Tn,ImagePicker:Rn,LinkModal:An},props:{comment:{type:Object,required:!0},currentUser:{type:Object,required:!0},replyTo:{type:Object,default:null},replyContent:{type:String,default:""},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate","submit-reply","cancel-reply","update-reply-content","reply-keydown"],setup(c,{emit:n}){const u=v(null),s=v(!0),{showEmojiPicker:b,showImagePicker:y,showLinkModal:f,selectedTextForLink:w,handleEmojiMouseEnter:p,handleEmojiMouseLeave:_,handleImageMouseEnter:k,handleImageMouseLeave:l,handleButtonMouseEnter:E,handleImageButtonMouseEnter:A,handleButtonMouseLeave:g,closeEmojiPicker:x,closeImagePicker:P,closeLinkModal:B,insertEmojiUniversal:M,insertImageUniversal:O,insertLinkUniversal:R,insertLinkFromModalUniversal:ne,insertSpoilerUniversal:te}=Bn(),$=ue=>{n("update-reply-content",ue.target.value);const ae=ue.target;ae&&(ae.style.height="auto",ae.style.height="".concat(Math.min(ae.scrollHeight,200),"px"))},T={get value(){return c.replyContent},set value(ue){n("update-reply-content",ue)}};return{replyTextarea:u,showEmojiPicker:b,showImagePicker:y,isCollapsed:s,insertEmoji:ue=>{M(ue,u,T,ae=>{n("update-reply-content",ae)})},insertImage:ue=>{O(ue,u,T,ae=>{n("update-reply-content",ae)})},insertSpoiler:()=>{te(u,T,ue=>{n("update-reply-content",ue)})},handleEmojiMouseEnter:p,handleEmojiMouseLeave:_,handleImageMouseEnter:k,handleImageMouseLeave:l,handleButtonMouseEnter:E,handleButtonMouseLeave:g,closeEmojiPicker:x,closeImagePicker:P,handleImageButtonMouseEnter:A,handleReplyInput:$,toggleCollapsed:()=>{s.value=!s.value},showLinkModal:f,selectedTextForLink:w,insertLink:()=>{R(u,T,ue=>{n("update-reply-content",ue)})},closeLinkModal:B,insertLinkFromModal:ue=>{ne(ue,u,T,ae=>{n("update-reply-content",ae)})}}},computed:{canReply(){return this.currentUser?this.currentUser.allow_comments===1:!0},getReplyPlaceholder(){return this.currentUser?this.currentUser.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç..."},formattedContent(){const{formatContent:c}=no();return c(this.comment.content)}}},hi={class:"comment-thread"},bi={key:0,class:"reply-form"},ki={class:"textarea-container"},wi=["value","placeholder","disabled"],Ci={class:"reply-footer"},_i={class:"reply-actions"},Ei=["disabled"],Si={class:"character-counter-container"},Ii=["disabled"],Mi={key:1,class:"replies-container"},Li=["title"],xi={class:"replies-count"},Ti=["title"],Ri={key:0,class:"replies-content"};function Ai(c,n,u,s,b,y){const f=We("CommentItem"),w=We("EmojiPicker"),p=We("ImagePicker"),_=We("LinkModal"),k=We("CommentThread",!0);return i(),a("div",hi,[Le(f,{comment:u.comment,"current-user":u.currentUser,"editing-comment-id":u.editingCommentId,onReply:n[0]||(n[0]=l=>c.$emit("reply",l)),onStartEdit:n[1]||(n[1]=l=>c.$emit("start-edit",l)),onCancelEdit:n[2]||(n[2]=l=>c.$emit("cancel-edit")),onEdit:n[3]||(n[3]=(l,E)=>c.$emit("edit",l,E)),onDelete:n[4]||(n[4]=l=>c.$emit("delete",l)),onRate:n[5]||(n[5]=(l,E)=>c.$emit("rate",l,E))},null,8,["comment","current-user","editing-comment-id"]),u.replyTo&&u.replyTo.id===u.comment.id?(i(),a("div",bi,[t("div",ki,[t("textarea",{ref:"replyTextarea",class:"comment-textarea",value:u.replyContent,placeholder:y.getReplyPlaceholder,disabled:u.currentUser&&u.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:n[6]||(n[6]=(...l)=>s.handleReplyInput&&s.handleReplyInput(...l)),onKeydown:n[7]||(n[7]=l=>c.$emit("reply-keydown",l))},null,40,wi)]),t("div",Ci,[t("div",_i,[t("button",{class:"cancel-reply",onClick:n[8]||(n[8]=l=>c.$emit("cancel-reply"))},"–û—Ç–º–µ–Ω–∞"),t("button",{class:"submit-button",disabled:!u.replyContent.trim()||u.replyContent.length>1500||u.currentUser&&u.currentUser.allow_comments!==1,onClick:n[9]||(n[9]=l=>c.$emit("submit-reply"))}," –û—Ç–≤–µ—Ç–∏—Ç—å ",8,Ei)]),t("div",Si,[t("div",{class:S(["character-counter-inline",{"near-limit":u.replyContent.length>1400,"at-limit":u.replyContent.length>=1500}])},m(u.replyContent.length)+"/1500 ",3),t("button",{type:"button",class:S(["emoji-button-inline",{active:s.showEmojiPicker}]),onMouseenter:n[10]||(n[10]=(...l)=>s.handleButtonMouseEnter&&s.handleButtonMouseEnter(...l)),onMouseleave:n[11]||(n[11]=(...l)=>s.handleButtonMouseLeave&&s.handleButtonMouseLeave(...l))}," üòä ",34),t("button",{type:"button",class:S(["emoji-button-inline",{active:s.showImagePicker}]),onMouseenter:n[12]||(n[12]=(...l)=>s.handleImageButtonMouseEnter&&s.handleImageButtonMouseEnter(...l)),onMouseleave:n[13]||(n[13]=(...l)=>s.handleButtonMouseLeave&&s.handleButtonMouseLeave(...l))},n[29]||(n[29]=[Jt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-6c0fc347><g id="logo" data-v-6c0fc347><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-6c0fc347></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-6c0fc347></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-6c0fc347></path></g></svg>',1)]),34),t("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:u.currentUser&&u.currentUser.allow_comments!==1,onClick:n[14]||(n[14]=(...l)=>s.insertSpoiler&&s.insertSpoiler(...l)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},n[30]||(n[30]=[t("i",{class:"fas fa-eye-slash"},null,-1)]),8,Ii),t("button",{type:"button",class:"emoji-button-inline link-button",onClick:n[15]||(n[15]=(...l)=>s.insertLink&&s.insertLink(...l)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},n[31]||(n[31]=[t("i",{class:"fas fa-link"},null,-1)])),Le(w,{"is-visible":s.showEmojiPicker,onEmojiSelected:s.insertEmoji,onMouseEnter:s.handleEmojiMouseEnter,onMouseLeave:s.handleEmojiMouseLeave,onClose:s.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),Le(p,{"is-visible":s.showImagePicker,"current-user":u.currentUser,onImageSelected:s.insertImage,onMouseEnter:s.handleImageMouseEnter,onMouseLeave:s.handleImageMouseLeave,onClose:s.closeImagePicker,onLoginRequired:n[16]||(n[16]=()=>c.$router.push("/login"))},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose"]),Le(_,{"is-visible":s.showLinkModal,"selected-text":s.selectedTextForLink,onClose:s.closeLinkModal,onSubmit:s.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):h("",!0),u.comment.replies&&u.comment.replies.length>0?(i(),a("div",Mi,[t("button",{class:"collapse-toggle",title:s.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:n[17]||(n[17]=(...l)=>s.toggleCollapsed&&s.toggleCollapsed(...l))},[t("span",{class:S(["collapse-icon",{expanded:!s.isCollapsed}])},n[32]||(n[32]=[t("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},[t("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1)]),2),t("span",xi,m(u.comment.replies.length)+" "+m(u.comment.replies.length===1?"–æ—Ç–≤–µ—Ç":"–æ—Ç–≤–µ—Ç–æ–≤"),1)],8,Li),t("div",{class:"vertical-line-clickable",title:s.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:n[18]||(n[18]=(...l)=>s.toggleCollapsed&&s.toggleCollapsed(...l))},[t("div",{class:S(["vertical-line-visual",{collapsed:s.isCollapsed}])},null,2)],8,Ti),s.isCollapsed?h("",!0):(i(),a("div",Ri,[(i(!0),a(ve,null,Me(u.comment.replies,l=>(i(),bt(k,{key:l.id,comment:l,"current-user":u.currentUser,"reply-to":u.replyTo,"reply-content":u.replyContent,"editing-comment-id":u.editingCommentId,onReply:n[19]||(n[19]=E=>c.$emit("reply",E)),onStartEdit:n[20]||(n[20]=E=>c.$emit("start-edit",E)),onCancelEdit:n[21]||(n[21]=E=>c.$emit("cancel-edit")),onEdit:n[22]||(n[22]=(E,A)=>c.$emit("edit",E,A)),onDelete:n[23]||(n[23]=E=>c.$emit("delete",E)),onRate:n[24]||(n[24]=(E,A)=>c.$emit("rate",E,A)),onSubmitReply:n[25]||(n[25]=E=>c.$emit("submit-reply")),onCancelReply:n[26]||(n[26]=E=>c.$emit("cancel-reply")),onUpdateReplyContent:n[27]||(n[27]=E=>c.$emit("update-reply-content",E)),onReplyKeydown:n[28]||(n[28]=E=>c.$emit("reply-keydown",E))},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id"]))),128))]))])):h("",!0)])}const Bi=ct(yi,[["render",Ai],["__scopeId","data-v-6c0fc347"]]),Ni={name:"Comments",components:{CommentThread:Bi,Notification:vn,EmojiPicker:Tn,ImagePicker:Rn,LinkModal:An},props:{movieId:{type:[String,Number],required:!0}},setup(c){const n=Ln(),u=tn(),s=en(),b=v([]),y=v(""),f=v(null),w=v(""),p=v(null),_=v(n.user),k=v(null),l=v(null),E=v(s.isAutoShowComments),A=v(!1),g=v(3),x=v(s.commentsSortBy),P=v(x.value==="date"?"asc":"desc"),{showEmojiPicker:B,showImagePicker:M,showLinkModal:O,selectedTextForLink:R,handleEmojiMouseEnter:ne,handleEmojiMouseLeave:te,handleImageMouseEnter:$,handleImageMouseLeave:T,handleButtonMouseEnter:je,handleImageButtonMouseEnter:me,handleButtonMouseLeave:re,closeEmojiPicker:Je,closeImagePicker:D,closeLinkModal:pe,insertEmojiUniversal:ue,insertImageUniversal:ae,insertLinkUniversal:Re,insertLinkFromModalUniversal:vt,insertSpoilerUniversal:et,autoResize:be}=Bn(),Ce=N(()=>{const F=(se=null)=>{const Ee=b.value.filter(ge=>ge.parent_id===se).filter(ge=>!ge.is_deleted||ge.replies&&ge.replies.length>0);let Be;return se===null?Be=Ee.sort((ge,Pe)=>{if(x.value==="rating"){const Ue=ge.rating||0,mt=Pe.rating||0;return Ue!==mt?P.value==="asc"?Ue-mt:mt-Ue:ge.id-Pe.id}return P.value==="asc"?ge.id-Pe.id:Pe.id-ge.id}):Be=Ee.sort((ge,Pe)=>ge.id-Pe.id),Be.map(ge=>({...ge,replies:F(ge.id)}))};return F()}),_e=N(()=>{const F=se=>se.reduce((Ee,Be)=>Ee+1+F(Be.replies||[]),0);return F(Ce.value)}),Ke=N(()=>Ce.value.slice(0,g.value)),Ge=N(()=>Ce.value.length>g.value),Fe=N(()=>Ce.value.length-g.value),oe=()=>{g.value=Ce.value.length},at=F=>{x.value===F?P.value=P.value==="asc"?"desc":"asc":(x.value=F,P.value=F==="date"?"asc":"desc",s.setCommentsSortBy(F))},Oe=async()=>{try{const F=await vo(c.movieId);b.value=F}catch(F){console.error("Failed to load comments:",F),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.")}},Ye=async()=>{if(A.value)return;if(!n.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:I});return}if(_.value&&_.value.allow_comments!==1){k.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!y.value.replace(/\[spoiler\]\s*\[\/spoiler\]/g,"").replace(/\[img\]\s*\[\/img\]/g,"").replace(/\[link=[^\]]+\]\s*\[\/link\]/g,"").trim()){k.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º");return}if(y.value.length>1500){k.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await Wn(c.movieId,y.value.trim()),y.value="",await Oe(),E.value=!0,Qe(()=>{l.value&&(l.value.focus(),l.value.style.height="auto"),setTimeout(()=>{const se=document.querySelectorAll(".comment-item[data-comment-id]");if(se.length>0){const Ee=Array.from(se).map(Be=>parseInt(Be.getAttribute("data-comment-id"))).filter(Be=>!isNaN(Be));if(Ee.length>0){const Be=Math.max(...Ee),ge=document.querySelector('[data-comment-id="'.concat(Be,'"]'));ge&&ge.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}},300)})}catch(se){console.error("Failed to create comment:",se),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},rt=F=>{if(!n.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:I});return}p.value=null,f.value=F,w.value="",Qe(()=>{const se=document.querySelector(".reply-form");se&&se.scrollIntoView({behavior:"smooth",block:"center"})})},z=async()=>{if(!n.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:I});return}if(_.value&&_.value.allow_comments!==1){k.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!(!w.value.trim()||!f.value)){if(w.value.length>1500){k.value.showNotification("–û—Ç–≤–µ—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await Wn(c.movieId,w.value.trim(),f.value.id);const F=f.value.id;await Oe(),w.value="",f.value=null,Qe(()=>{setTimeout(()=>{const se=document.querySelector('[data-comment-id="'.concat(F,'"]'));if(se){const Ee=se.querySelector(".replies-content");if(Ee){const Be=Ee.querySelectorAll(".comment-item[data-comment-id]");if(Be.length>0){const ge=Array.from(Be).map(Pe=>parseInt(Pe.getAttribute("data-comment-id"))).filter(Pe=>!isNaN(Pe));if(ge.length>0){const Pe=Math.max(...ge),Ue=document.querySelector('[data-comment-id="'.concat(Pe,'"]'));Ue&&Ue.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}}}},300)})}catch(F){console.error("Error submitting reply:",F),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}}},tt=async(F,se)=>{if(!n.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:I});return}if(_.value&&_.value.allow_comments!==1){k.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(se.length>1500){k.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await go(F,se.trim()),await Oe(),p.value=null}catch(Ee){console.error("Failed to update comment:",Ee),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},He=async F=>{if(!n.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:I});return}try{await fo(F),await Oe()}catch(se){console.error("Failed to delete comment:",se),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},de=async(F,se)=>{if(!n.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:I});return}try{await mo(F,se),await Oe()}catch(Ee){console.error("Failed to rate comment:",Ee),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ü–µ–Ω–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},$e=F=>{A.value||B.value||F.key==="Enter"&&!F.shiftKey&&(F.preventDefault(),Ye())},Ct=F=>{F.key==="Enter"&&!F.shiftKey&&(F.preventDefault(),z())},I=()=>{u.push("/login")},V=F=>{A.value=!0,ue(F,l,y,se=>{y.value=se}),setTimeout(()=>{A.value=!1},100)},De=F=>{ae(F,l,y,se=>{y.value=se})},ye=()=>{et(l,y,F=>{y.value=F})},Ae=()=>{Re(l,y,F=>{y.value=F})},Pt=F=>{vt(F,l,y,se=>{y.value=se})},Lt=N(()=>_.value?_.value.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."),lt=N(()=>_.value?_.value.allow_comments===1:!0),it=F=>{f.value=null,w.value="",p.value=F},ut=()=>{p.value=null};return Nt(()=>{Oe()}),{comments:b,groupedComments:Ce,displayedComments:Ke,hasMoreComments:Ge,remainingCommentsCount:Fe,showMoreComments:oe,sortBy:x,setSortBy:at,sortDirection:P,newComment:y,replyTo:f,replyContent:w,editingCommentId:p,currentUser:_,notificationRef:k,commentTextarea:l,showComments:E,submitComment:Ye,handleReply:rt,submitReply:z,handleEdit:tt,handleDelete:He,handleRate:de,handleCommentKeydown:$e,handleReplyKeydown:Ct,autoResize:be,totalCommentsCount:_e,getCommentWordForm:Ul,showEmojiPicker:B,showImagePicker:M,showLinkModal:O,selectedTextForLink:R,insertEmoji:V,insertImage:De,handleEmojiMouseEnter:ne,handleEmojiMouseLeave:te,handleImageMouseEnter:$,handleImageMouseLeave:T,closeEmojiPicker:Je,closeImagePicker:D,handleButtonMouseLeave:re,handleButtonMouseEnter:je,handleImageButtonMouseEnter:me,getCommentPlaceholder:Lt,canComment:lt,handleStartEdit:it,handleCancelEdit:ut,insertSpoiler:ye,insertLink:Ae,insertLinkFromModal:Pt,closeLinkModal:pe}}},Pi={class:"comments-section"},Oi={class:"spoiler-content"},$i={key:1,class:"comments-container"},Fi={class:"comments-header"},Ui={class:"comments-controls"},ji={class:"textarea-container"},Hi=["placeholder","disabled"],Di={class:"comment-footer"},Vi={class:"comment-actions"},qi=["disabled"],zi={class:"character-counter-container"},Wi=["disabled"],Ki=["disabled"],Gi=["disabled"],Yi={class:"comments-list"},Zi={key:0,class:"show-more-comments"};function Xi(c,n,u,s,b,y){const f=We("EmojiPicker"),w=We("ImagePicker"),p=We("LinkModal"),_=We("CommentThread"),k=We("Notification");return i(),a("div",Pi,[s.showComments?(i(),a("div",$i,[t("div",Fi,[t("div",Ui,[t("button",{class:S(["sort-button",{active:s.sortBy==="date"}]),onClick:n[1]||(n[1]=l=>s.setSortBy("date")),title:"–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –¥–∞—Ç–µ"},[n[20]||(n[20]=t("i",{class:"fas fa-clock"},null,-1)),n[21]||(n[21]=J(" –ü–æ –¥–∞—Ç–µ ")),s.sortBy==="date"?(i(),a("i",{key:0,class:S(["fas",s.sortDirection==="asc"?"fa-arrow-up":"fa-arrow-down"])},null,2)):h("",!0)],2),t("button",{class:S(["sort-button",{active:s.sortBy==="rating"}]),onClick:n[2]||(n[2]=l=>s.setSortBy("rating")),title:"–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É"},[n[22]||(n[22]=t("i",{class:"fas fa-thumbs-up"},null,-1)),n[23]||(n[23]=J(" –ü–æ —Ä–µ–π—Ç–∏–Ω–≥—É ")),s.sortBy==="rating"?(i(),a("i",{key:0,class:S(["fas",s.sortDirection==="asc"?"fa-arrow-up":"fa-arrow-down"])},null,2)):h("",!0)],2)]),t("button",{class:"hide-comments-btn",onClick:n[3]||(n[3]=l=>s.showComments=!1)},n[24]||(n[24]=[t("i",{class:"fas fa-eye-slash"},null,-1),J(" –°–∫—Ä—ã—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ")]))]),t("form",{class:"comment-form",onSubmit:n[13]||(n[13]=wt((...l)=>s.submitComment&&s.submitComment(...l),["prevent"]))},[t("div",ji,[ee(t("textarea",{ref:"commentTextarea","onUpdate:modelValue":n[4]||(n[4]=l=>s.newComment=l),class:"comment-textarea",placeholder:s.getCommentPlaceholder,disabled:s.currentUser&&s.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:n[5]||(n[5]=(...l)=>s.autoResize&&s.autoResize(...l)),onKeydown:n[6]||(n[6]=(...l)=>s.handleCommentKeydown&&s.handleCommentKeydown(...l))},null,40,Hi),[[kt,s.newComment]])]),t("div",Di,[t("div",Vi,[t("button",{class:"submit-button",type:"submit",disabled:!s.newComment.trim()||s.newComment.length>1500||s.currentUser&&s.currentUser.allow_comments!==1}," –û—Ç–ø—Ä–∞–≤–∏—Ç—å ",8,qi)]),t("div",zi,[t("div",{class:S(["character-counter-inline",{"near-limit":s.newComment.length>1400,"at-limit":s.newComment.length>=1500}])},m(s.newComment.length)+"/1500 ",3),t("button",{type:"button",class:S(["emoji-button-inline",{active:s.showEmojiPicker}]),disabled:s.currentUser&&s.currentUser.allow_comments!==1,onMouseenter:n[7]||(n[7]=(...l)=>s.handleButtonMouseEnter&&s.handleButtonMouseEnter(...l)),onMouseleave:n[8]||(n[8]=(...l)=>s.handleButtonMouseLeave&&s.handleButtonMouseLeave(...l))}," üòä ",42,Wi),t("button",{type:"button",class:S(["emoji-button-inline",{active:s.showImagePicker}]),disabled:s.currentUser&&s.currentUser.allow_comments!==1,onMouseenter:n[9]||(n[9]=(...l)=>s.handleImageButtonMouseEnter&&s.handleImageButtonMouseEnter(...l)),onMouseleave:n[10]||(n[10]=(...l)=>s.handleButtonMouseLeave&&s.handleButtonMouseLeave(...l))},n[25]||(n[25]=[Jt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-e82be516><g id="logo" data-v-e82be516><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-e82be516></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-e82be516></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-e82be516></path></g></svg>',1)]),42,Ki),t("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:s.currentUser&&s.currentUser.allow_comments!==1,onClick:n[11]||(n[11]=(...l)=>s.insertSpoiler&&s.insertSpoiler(...l)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},n[26]||(n[26]=[t("i",{class:"fas fa-eye-slash"},null,-1)]),8,Gi),t("button",{type:"button",class:"emoji-button-inline link-button",onClick:n[12]||(n[12]=(...l)=>s.insertLink&&s.insertLink(...l)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},n[27]||(n[27]=[t("i",{class:"fas fa-link"},null,-1)])),Le(f,{"is-visible":s.showEmojiPicker&&s.canComment,onEmojiSelected:s.insertEmoji,onMouseEnter:s.handleEmojiMouseEnter,onMouseLeave:s.handleEmojiMouseLeave,onClose:s.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),Le(w,{"is-visible":s.showImagePicker&&s.canComment,"current-user":s.currentUser,onImageSelected:s.insertImage,onMouseEnter:s.handleImageMouseEnter,onMouseLeave:s.handleImageMouseLeave,onClose:s.closeImagePicker,onLoginRequired:c.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),Le(p,{"is-visible":s.showLinkModal,"selected-text":s.selectedTextForLink,onClose:s.closeLinkModal,onSubmit:s.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])],32),t("div",Yi,[(i(!0),a(ve,null,Me(s.displayedComments,l=>(i(),bt(_,{key:l.id,comment:l,"current-user":s.currentUser,"reply-to":s.replyTo,"reply-content":s.replyContent,"editing-comment-id":s.editingCommentId,"is-first-comment":!1,onReply:s.handleReply,onStartEdit:s.handleStartEdit,onCancelEdit:s.handleCancelEdit,onEdit:s.handleEdit,onDelete:s.handleDelete,onRate:s.handleRate,onSubmitReply:s.submitReply,onCancelReply:n[14]||(n[14]=E=>s.replyTo=null),onUpdateReplyContent:n[15]||(n[15]=E=>s.replyContent=E),onReplyKeydown:s.handleReplyKeydown},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id","onReply","onStartEdit","onCancelEdit","onEdit","onDelete","onRate","onSubmitReply","onReplyKeydown"]))),128)),s.hasMoreComments?(i(),a("div",Zi,[t("button",{class:"show-more-btn",onClick:n[16]||(n[16]=(...l)=>s.showMoreComments&&s.showMoreComments(...l))}," –ü–æ–∫–∞–∑–∞—Ç—å –µ—â–µ "+m(s.remainingCommentsCount)+" "+m(s.getCommentWordForm(s.remainingCommentsCount)),1)])):h("",!0)])])):(i(),a("div",{key:0,class:"spoiler-warning",onClick:n[0]||(n[0]=l=>s.showComments=!0)},[t("div",Oi,[n[17]||(n[17]=t("i",{class:"fas fa-eye-slash"},null,-1)),n[18]||(n[18]=t("h3",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–∫—Ä—ã—Ç—ã",-1)),n[19]||(n[19]=t("p",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä—ã. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å.",-1)),t("div",{class:S(["comments-count",{"no-comments":s.totalCommentsCount===0}])},[s.totalCommentsCount===0?(i(),a(ve,{key:0},[J(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç ")],64)):(i(),a(ve,{key:1},[J(m(s.totalCommentsCount)+" "+m(s.getCommentWordForm(s.totalCommentsCount)),1)],64))],2)])])),Le(k,{ref:"notificationRef"},null,512)])}const Qi=ct(Ni,[["render",Xi],["__scopeId","data-v-e82be516"]]),Ji={class:"movie-info"},ea={class:"content"},ta={key:0,class:"content-card"},na={class:"movie-skeleton"},oa={class:"movie-skeleton__player"},sa={key:2,class:"content-card"},la={key:3,class:"content-card"},ia={class:"content-header"},aa=["src"],ra={class:"content-title"},ua={key:0,class:"ratings-links"},da={key:1},ca=["href","title"],va={key:2},ma=["href","title"],fa={key:3},ga=["href","title"],pa={key:4},ya=["href","title"],ha={key:5},ba=["href"],ka=["title"],wa={key:0,class:"fa-regular fa-face-grin-wink"},Ca={key:1,class:"fas fa-spinner fa-spin"},_a=["title"],Ea={key:1,class:"mobile-list-dropdown"},Sa={class:"mobile-list-content"},Ia=["content"],Ma=["content"],La={class:"additional-info"},xa={class:"info-content"},Ta={key:0,class:"movie-poster-container desktop-only"},Ra=["href"],Aa=["src"],Ba={class:"details-container"},Na={class:"info-list"},Pa={key:0},Oa={key:1},$a={key:2},Fa={key:3},Ua={key:4},ja={key:5},Ha={key:6},Da={key:7},Va={key:8},qa={key:9,class:"rating-boxes"},za={key:0,class:"rating-box mpaa"},Wa={key:1,class:"rating-box age"},Ka={class:"content-info"},Ga={key:0,class:"content-description-text"},Ya={key:3,class:"comments-section"},Za={key:4,class:"staff-section"},Xa={class:"staff-categories"},Qa={key:0,class:"staff-category"},Ja={class:"staff-list"},er=["href","title"],tr=["src","alt"],nr={class:"staff-name"},or={key:0,class:"staff-role"},sr=["href","title"],lr={key:1,class:"staff-category"},ir={class:"staff-names-container"},ar={class:"staff-names-list"},rr=["href"],ur=["href","title"],dr={key:2,class:"staff-category"},cr={class:"staff-names-container"},vr={class:"staff-names-list"},mr=["href"],fr=["href","title"],gr={key:5,class:"yt-video-container"},pr={key:6,class:"related-movies"},yr=["title"],hr={key:7,class:"related-movies"},br=["title"],kr={key:0,class:"nudity-info-popup"},wr={class:"nudity-info-content"},Cr={key:0,class:"nudity-info-loading"},_r={key:1},Er={class:"nudity-info-actions"},Sr=["href"],Ir={key:1,class:"nudity-info-popup"},Mr={class:"nudity-info-content"},Lr={class:"timings-text"},xr={key:0,class:"timing-entries"},Tr={class:"timing-content"},Rr={class:"timing-header-row",style:{display:"flex","align-items":"center",gap:"8px"}},Ar={key:0,class:"pending-badge"},Br={key:1,class:"clean-text-badge"},Nr={key:0,class:"timing-actions-row",style:{display:"flex","align-items":"center",gap:"8px","margin-top":"8px"}},Pr=["onClick"],Or=["onClick"],$r=["onClick"],Fr=["onClick"],Ur=["onClick"],jr={class:"timing-text"},Hr={class:"timing-author"},Dr={key:1,style:{color:"#fff","font-size":"13px",margin:"4px 0 0 0"}},Vr={key:0},qr={key:1},zr={key:1},Wr={key:0,class:"general-parser-result",style:{"margin-top":"15px",padding:"15px",background:"rgba(255, 255, 255, 0.05)","border-radius":"8px"}},Kr={style:{margin:"0 0 10px 0",color:"#fff"}},Gr={style:{color:"#fff","font-size":"13px"}},Yr={key:0},Zr={key:1},Xr={key:1,class:"overlay-parser-result",style:{"margin-top":"15px",padding:"15px",background:"rgba(255, 255, 255, 0.05)","border-radius":"8px"}},Qr={style:{margin:"0 0 10px 0",color:"#fff"}},Jr={style:{color:"#fff","font-size":"13px"}},eu={key:0},tu={key:1},nu={class:"nudity-info-actions"},ou={key:2,class:"timing-modal"},su={class:"timing-modal-content"},lu={class:"timing-modal-header"},iu={class:"timing-submission-form"},au={key:0,class:"timing-preview"},ru={class:"timing-preview-content"},uu={class:"timing-preview-range"},du={class:"timing-preview-duration"},cu={class:"timing-form-actions"},vu=["disabled"],mu={key:0,class:"fas fa-spinner fa-spin"},fu={key:1},gu={class:"modal-header"},pu={class:"modal-header-controls"},yu={class:"modal-body"},hu=["disabled"],bu={key:0,class:"fas fa-spinner fa-spin"},ku={key:1,class:"fas fa-list"},wu={class:"top-submitters-list"},Cu={class:"submitter-info"},_u={class:"submitter-name"},Eu=["href"],Su={class:"submitter-count"},Iu={class:"submitter-contribution"},Mu={class:"modal-header"},Lu={class:"modal-body"},xu={key:0,class:"timing-filters"},Tu={key:1,class:"loading-spinner"},Ru={key:2,class:"no-timings"},Au={key:3,class:"no-timings"},Bu={key:4,class:"all-timings-list"},Nu={class:"timing-header"},Pu={class:"timing-meta"},Ou={class:"timing-author"},$u={class:"timing-date"},Fu={class:"timing-movie-info"},Uu={key:0,class:"admin-controls"},ju=["onClick","disabled"],Hu={key:0,class:"fas fa-spinner fa-spin"},Du={key:1,class:"fas fa-check"},Vu=["onClick","disabled"],qu={key:0,class:"fas fa-spinner fa-spin"},zu={key:1,class:"fas fa-times"},Wu=["onClick","disabled"],Ku={key:0,class:"fas fa-spinner fa-spin"},Gu={key:1,class:"fas fa-eye-slash"},Yu={class:"timing-content"},Zu={class:"timing-text"},Xu={key:5,class:"timing-modal obs-modal"},Qu={class:"timing-modal-content obs-modal-content"},Ju={class:"timing-modal-header"},ed={class:"obs-settings-form"},td={class:"obs-setting-group"},nd={class:"obs-checkbox-label"},od={key:0,class:"obs-connection-settings"},sd={class:"obs-setting-group"},ld={class:"obs-setting-group"},id={class:"obs-setting-group"},ad={key:0,class:"obs-setting-group"},rd={key:0,class:"obs-warning"},ud={key:1,class:"obs-filter-selection"},dd=["value"],cd={key:0,class:"selected-filter-info"},vd={class:"filter-details"},md={class:"obs-info"},fd={class:"obs-setting-group"},gd={class:"obs-checkbox-label"},pd={class:"obs-actions"},yd=["disabled"],hd={key:0,class:"fas fa-spinner fa-spin"},bd={key:1,class:"fas fa-plug"},kd=["disabled"],wd=["disabled"],Cd={__name:"MovieInfo",setup(c){const n=v(!0),u=en(),s=Ln(),b=po(),y=lo(),f=Jn(),w=tn(),p=v(f.params.kp_id),_=v(""),k=v(null),l=v(null),E=yo(),A=Ro(),g=v(null),x=N(()=>A.areTrailersActive),P=v(null),B=v(!1),M=v(!1),O=v(10),R=v(null),ne=v(!1),te=v(null),$=v(!1),T=v(void 0),je=v(null),me=v(new Set),re=v(new Set),Je=v(!1),D=v(!1),pe=N(()=>{var o;return((o=l.value)==null?void 0:o.nudity_timings.length)>0}),ue=N(()=>{var o;return((o=l.value)==null?void 0:o.nudity_timings.length)>0&&u.isStreamerMode&&!u.isMobile}),ae=N(()=>{var o,e,d,C,L,U,j,X,le,q;return((e=(o=l.value)==null?void 0:o.lists)==null?void 0:e.isFavorite)||((C=(d=l.value)==null?void 0:d.lists)==null?void 0:C.isWatching)||((U=(L=l.value)==null?void 0:L.lists)==null?void 0:U.isLater)||((X=(j=l.value)==null?void 0:j.lists)==null?void 0:X.isCompleted)||((q=(le=l.value)==null?void 0:le.lists)==null?void 0:q.isAbandoned)}),Re=N(()=>u.isCommentsEnabled),vt=()=>{if(l.value){const o=l.value.name_ru||l.value.name_en||l.value.name_original||"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å–º–µ";document.title=o}},et=o=>o?o.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",be=o=>(o||[]).map(e=>({kp_id:e.film_id,poster:e.poster_url_preview||e.poster_url,title:e.name_ru||e.name_en||e.name_original})),Ce=o=>{if(typeof o!="number")return;const e=Math.floor(o/60),d=o%60;return"".concat(e," —á. ").concat(d," –º–∏–Ω.")},_e=v(!1),Ke=v({top:"0px",left:"0px"}),Ge=o=>{_e.value=!0,Ke.value={top:"".concat(o.pageY+10,"px"),left:"".concat(o.pageX-70,"px")}},Fe=async()=>{try{const o=[l.value.name_ru||l.value.name_en||l.value.name_original,...l.value.year?[l.value.year]:[],...l.value.film_length?[Ce(l.value.film_length)]:[]];await navigator.clipboard.writeText(o.join(", ")),g.value.showNotification("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ")}catch(o){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",o)}},oe=async(o=!0)=>{var e,d,C,L,U,j,X,le;try{let q;if(p.value.startsWith("shiki")?q=await bo(p.value):q=await ko(p.value,s.token),Array.isArray(q)&&q.length===0)throw new Error("–î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–∏—Å–∫.");l.value=q,p.value.startsWith("shiki")?l.value={...l.value,title:l.value.name_ru||l.value.name_en,name_original:l.value.name_en,short_description:l.value.slogan}:l.value={...l.value,title:l.value.name_ru||l.value.name_en||l.value.name_original,kinopoisk_id:p.value},E.setHeaderContent({text:l.value.title,imageUrl:l.value.logo_url}),vt();const G={kp_id:p.value,title:((e=l.value)==null?void 0:e.name_ru)||((d=l.value)==null?void 0:d.name_en)||((C=l.value)==null?void 0:C.name_original),poster:((L=l.value)==null?void 0:L.poster_url)||((U=l.value)==null?void 0:U.cover_url)||((j=l.value)==null?void 0:j.screenshots[0]),year:(X=l.value)==null?void 0:X.year,type:(le=l.value)==null?void 0:le.type};if(p.value.startsWith("shiki"))if(l.value.screenshots&&l.value.screenshots.length>0){const ie=Math.floor(Math.random()*l.value.screenshots.length),he=l.value.screenshots[ie];b.updateMoviePoster(he)}else G.poster&&b.updateMoviePoster(G.poster);else G.poster&&b.updateMoviePoster(G.poster);if(N(()=>u.isHistoryAllowed).value&&G.kp_id&&G.title&&o)if(s.token)try{await In(G.kp_id,K.HISTORY)}catch(ie){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é:",ie)}else u.addToHistory({...G})}catch(q){const{message:G,code:W}=ht(q);_.value=G,k.value=W,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–ª—å–º–∞—Ö:",q)}},at=N(()=>{var o;return(o=l.value)==null?void 0:o.videos}),Oe=N(()=>{var o;return be((o=l.value)==null?void 0:o.sequels_and_prequels)}),Ye=N(()=>{var o;return be((o=l.value)==null?void 0:o.similars)}),rt=()=>{var C;const o=((C=document.querySelector(".related-movies"))==null?void 0:C.clientWidth)||0,d=Math.floor(o/160)||10;O.value=Math.max(1,d)},z=()=>{rt()},tt=o=>{if(o.altKey&&o.keyCode===84&&document.querySelector(".player-container")){const d=document.querySelector(".theater-mode-btn");d&&d.click()}},He=o=>{o.button===1&&(o.preventDefault(),de(o))},de=async o=>{if(R.value!==null){R.value=null,ne.value=!1;return}T.value=void 0,te.value=o.currentTarget,R.value="",ne.value=!0;try{const e=await wo(l.value.imdb_id);R.value=e.nudity_info}catch(e){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö:",e),R.value="–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ Parents Guide –Ω–∞ IMDb –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏."}finally{ne.value=!1}},$e=o=>{var e,d;if(R.value=null,T.value!==void 0){T.value=void 0;return}je.value=o.currentTarget,T.value=((e=l.value)==null?void 0:e.nudity_timings)===null?"":((d=l.value)==null?void 0:d.nudity_timings)||""},Ct=o=>{var d,C,L,U,j,X,le,q,G,W,ie,he,Q;return(Q={[K.FAVORITE]:((C=(d=l.value)==null?void 0:d.lists)==null?void 0:C.isFavorite)||!1,[K.HISTORY]:((U=(L=l.value)==null?void 0:L.lists)==null?void 0:U.isHistory)||!1,[K.LATER]:((X=(j=l.value)==null?void 0:j.lists)==null?void 0:X.isLater)||!1,[K.COMPLETED]:((q=(le=l.value)==null?void 0:le.lists)==null?void 0:q.isCompleted)||!1,[K.ABANDONED]:((W=(G=l.value)==null?void 0:G.lists)==null?void 0:W.isAbandoned)||!1,[K.WATCHING]:((he=(ie=l.value)==null?void 0:ie.lists)==null?void 0:he.isWatching)||!1}[o])!=null?Q:!1},I=async o=>{if(!s.token){g.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:()=>w.push("/login")});return}try{const e={[K.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[K.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[K.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[K.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[K.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[K.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};Ct(o)?(await to(p.value,o),g.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(e[o]))):(await In(p.value,o),g.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(e[o]))),await oe(!1),$.value=!1}catch(e){const{message:d,code:C}=ht(e);g.value.showNotification("".concat(d," ").concat(C))}},V=o=>{const e=document.querySelector(".mobile-list-dropdown");e&&!e.contains(o.target)&&($.value=!1)},De=o=>{const e=document.querySelector(".nudity-info-popup");e&&!e.contains(o.target)&&te.value&&!te.value.contains(o.target)&&(R.value=null)},ye=o=>{const e=document.querySelector(".nudity-info-popup");e&&!e.contains(o.target)&&je.value&&!je.value.contains(o.target)&&(T.value=void 0)};Nt(async()=>{await oe(),n.value=!1,document.addEventListener("keydown",tt),window.addEventListener("resize",z),setTimeout(rt,100),document.addEventListener("click",V),document.addEventListener("click",De,!0),document.addEventListener("click",ye,!0),window.selectedNudityTimings=Array.from(me.value),window.overlayNudityTimings=Array.from(re.value)}),Sn(async()=>{E.clearHeaderContent(),document.removeEventListener("keydown",tt),window.removeEventListener("resize",z),document.removeEventListener("click",V),document.removeEventListener("click",De,!0),document.removeEventListener("click",ye,!0),delete window.selectedNudityTimings,delete window.overlayNudityTimings}),qe(()=>f.params.kp_id,async o=>{o&&o!==p.value&&(E.clearHeaderContent(),p.value=o,P.value=null,await oe(),n.value=!1)},{immediate:!0}),qe(l,()=>{vt()},{deep:!0}),qe(R,o=>{o?document.addEventListener("click",De,!0):document.removeEventListener("click",De,!0)},{deep:!0}),qe(T,o=>{o?document.addEventListener("click",ye,!0):document.removeEventListener("click",ye,!0)},{deep:!0}),qe(me,()=>{window.selectedNudityTimings=Array.from(me.value)},{deep:!0}),qe(re,()=>{window.overlayNudityTimings=Array.from(re.value)},{deep:!0}),Nt(()=>{window.selectedNudityTimings=Array.from(me.value),window.overlayNudityTimings=Array.from(re.value);const o=setInterval(()=>{if(window.obsSources&&Array.isArray(window.obsSources)&&(on.value=window.obsSources),window.getOBSFiltersInfo){const e=window.getOBSFiltersInfo();e&&Array.isArray(e)&&y.updateObsSettings({filtersFound:e})}},1e3);Sn(()=>{clearInterval(o)})}),Sn(()=>{delete window.selectedNudityTimings,delete window.overlayNudityTimings});const Ae=o=>{var e,d;return((d=(e=l.value)==null?void 0:e.staff)==null?void 0:d.filter(C=>C.profession_key===o))||[]},Pt=async()=>{try{await navigator.clipboard.writeText(R.value),g.value.showNotification("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω")}catch(o){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",o),g.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞")}finally{R.value=null}},Lt=async()=>{if(T.value.length!==0)try{const o=T.value.map(e=>"".concat(e.timing_text," (by @").concat(e.username,")")).join("\n").concat("\nReYohoho\n");await navigator.clipboard.writeText(o),g.value.showNotification("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω")}catch(o){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",o),g.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞")}finally{T.value=void 0}},lt=()=>{const o=encodeURIComponent(R.value);window.open("https://translate.google.com/?sl=en&tl=ru&text=".concat(o),"_blank"),R.value=null},it=N({get:()=>u.submitterUsername,set:o=>u.setSubmitterUsername(o)}),ut=v(""),F=v(!1),se=N(()=>{if(!ut.value.trim())return[];try{return qt(ut.value,!0)||[]}catch(o){return console.error("Error parsing timing text:",o),[]}}),Ee=N(()=>it.value.trim()&&ut.value.trim()),Be=async()=>{if(!(!Ee.value||F.value))try{F.value=!0,await _o(p.value,it.value.trim(),ut.value),g.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é, —Å–ø–∞—Å–∏–±–æ!"),ut.value="",Pe.value=!1}catch(o){const{message:e}=ht(o);g.value.showNotification(e,5e3)}finally{F.value=!1}},ge=async()=>{try{const{submissions:o}=await Co();Ue.value=o,mt.value=!0}catch(o){const{message:e}=ht(o);g.value.showNotification(e)}},Pe=v(!1),Ue=v([]),mt=v(!1),Ot=v(!1),ze=v([]),_t=v(!1),Ze=v(!1),nt=v(null),ft=v(!1),dt=v(!1),ot=v("all"),xt=v(!1),Tt=v(!1),Rt=N({get:()=>y.obsSettings.enabled,set:o=>y.updateObsSettings({enabled:o})}),$t=N({get:()=>y.obsSettings.host,set:o=>y.updateObsSettings({host:o})}),nn=N({get:()=>y.obsSettings.port,set:o=>y.updateObsSettings({port:o})}),gt=N({get:()=>y.obsSettings.password,set:o=>y.updateObsSettings({password:o})}),st=N(()=>y.obsSettings.connected),on=v([]),Ft=N(()=>y.obsSettings.filtersFound),Et=N({get:()=>y.obsSettings.selectedFilterId,set:o=>y.setObsSelectedFilter(o)}),At=N(()=>Et.value?Ft.value.find(o=>o.id===Et.value):null),Ut=N({get:()=>y.obsSettings.showObsInOverlay,set:o=>y.updateObsSettings({showObsInOverlay:o})}),sn=async o=>{if(!Ze.value)try{Ze.value=!0,nt.value=o,ft.value=!0,dt.value=!1,await So(o);const e=ze.value.find(d=>d.id===o);e&&(e.status="approved"),g.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ–¥–æ–±—Ä–µ–Ω")}catch(e){const{message:d}=ht(e);g.value.showNotification("–û—à–∏–±–∫–∞: ".concat(d))}finally{Ze.value=!1,nt.value=null,ft.value=!1,dt.value=!1}},mn=async o=>{if(!Ze.value)try{Ze.value=!0,nt.value=o,ft.value=!1,dt.value=!1,await Io(o);const e=ze.value.find(d=>d.id===o);e&&(e.status="rejected"),g.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ—Ç–∫–ª–æ–Ω–µ–Ω")}catch(e){const{message:d}=ht(e);g.value.showNotification("–û—à–∏–±–∫–∞: ".concat(d))}finally{Ze.value=!1,nt.value=null,ft.value=!1,dt.value=!1}},fn=async o=>{if(!Ze.value)try{Ze.value=!0,nt.value=o,ft.value=!1,dt.value=!0,await Mo(o);const e=ze.value.find(d=>d.id===o);e&&(e.status="clean_text"),g.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ—Ç–º–µ—á–µ–Ω –∫–∞–∫ clean_text")}catch(e){const{message:d}=ht(e);g.value.showNotification("–û—à–∏–±–∫–∞: ".concat(d))}finally{Ze.value=!1,nt.value=null,ft.value=!1,dt.value=!1}},ln=async()=>{if(!_t.value)try{_t.value=!0,Ot.value=!0;const{timings:o}=await Eo();ze.value=o}catch(o){const{message:e}=ht(o);g.value.showNotification(e),Ot.value=!1}finally{_t.value=!1}},gn=o=>({pending:"–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏",approved:"–û–¥–æ–±—Ä–µ–Ω–æ",rejected:"–û—Ç–∫–ª–æ–Ω–µ–Ω–æ",clean_text:"–ù–µ –º–æ–¥–µ—Ä–∏—Ä—É–µ—Ç—Å—è"})[o]||o,pn=(o,e)=>{const d=[2,0,1,1,1,2];return e[o%100>4&&o%100<20?2:d[Math.min(o%10,5)]]},jt=o=>{if(!Ue.value.length)return 0;const e=Math.max(...Ue.value.map(d=>d.approved_submissions_count));return o/e*100},an=N(()=>ot.value==="all"?ze.value:ze.value.filter(o=>o.status===ot.value)),rn=o=>{me.value.has(o)?me.value.delete(o):me.value.add(o)},ke=v({});function yn(o){if(ke.value[o.id])ke.value={...ke.value,[o.id]:!1};else{const e=qt(o.timing_text,!0);ke.value={...ke.value,[o.id]:e}}}const St=N(()=>!!window.electronAPI);function hn(o){if(!St.value){g.value?g.value.showNotification("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"):alert("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏");return}rn(o)}function bn(o){if(!St.value){g.value?g.value.showNotification("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"):alert("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏");return}rn(o)}function kn(o){if(!St.value){g.value?g.value.showNotification("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"):alert("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏");return}Ht(o)}function un(o){if(!St.value){g.value?g.value.showNotification("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"):alert("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏");return}Ht(o)}const Ht=o=>{re.value.has(o)?re.value.delete(o):re.value.add(o)};function dn(){Je.value=!Je.value}function wn(){D.value=!D.value}function zt(){const o=[];if(T.value&&Array.isArray(T.value)){for(const e of T.value)if(me.value.has(e.id)){const d=qt(e.timing_text,!0);d&&d.length>0&&o.push(...d)}}return o}function Wt(){const o=[];if(T.value&&Array.isArray(T.value)&&T.value.length>0){for(const e of T.value)if(re.value.has(e.id)){const d=qt(e.timing_text,!0);d&&d.length>0&&o.push(...d)}}return o}const Cn=()=>{Rt.value&&pt()},pt=async()=>{var o,e,d;if(!Tt.value){Tt.value=!0;try{window.connectToOBS?(await window.connectToOBS(),setTimeout(()=>{window.obsSources&&(on.value=window.obsSources)},1e3),(o=g.value)==null||o.showNotification("–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ OBS...")):(e=g.value)==null||e.showNotification("–ü–ª–µ–µ—Ä –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω")}catch(C){console.error("Error connecting to OBS:",C),(d=g.value)==null||d.showNotification("–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ OBS")}finally{Tt.value=!1}}},_n=()=>{var o,e;if(!Et.value){(o=g.value)==null||o.showNotification("–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∏–ª—å—Ç—Ä –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è");return}window.testOBSBlur?window.testOBSBlur(Et.value):(e=g.value)==null||e.showNotification("OBS —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã")},It=()=>{var o,e;window.refreshOBSFilters?(window.refreshOBSFilters(),(o=g.value)==null||o.showNotification("–ü–æ–∏—Å–∫ —Ñ–∏–ª—å—Ç—Ä–æ–≤...")):(e=g.value)==null||e.showNotification("OBS —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã")},En=()=>{var o,e;Et.value&&((e=g.value)==null||e.showNotification("–í—ã–±—Ä–∞–Ω —Ñ–∏–ª—å—Ç—Ä: ".concat((o=At.value)==null?void 0:o.sourceName)))};return(o,e)=>{var C,L,U,j,X,le,q,G,W,ie,he,Q,ce,xe,Te,Se,Ne,Ie;const d=We("router-link");return i(),a(ve,null,[t("div",Ji,[t("div",ea,[(n.value||!l.value)&&!_.value?(i(),a("div",ta,[t("div",na,[e[35]||(e[35]=Jt('<div class="movie-skeleton__header" data-v-793cb6b0><div class="movie-skeleton__title" data-v-793cb6b0></div></div><div class="movie-skeleton__ratings" data-v-793cb6b0><div class="movie-skeleton__rating-item" data-v-793cb6b0></div><div class="movie-skeleton__rating-item" data-v-793cb6b0></div><div class="movie-skeleton__rating-item" data-v-793cb6b0></div></div>',2)),t("div",oa,[Le(so)]),e[36]||(e[36]=Jt('<div class="movie-skeleton__additional-info" data-v-793cb6b0><div class="movie-skeleton__section-title" data-v-793cb6b0></div><div class="movie-skeleton__info-list" data-v-793cb6b0><div class="movie-skeleton__info-item" data-v-793cb6b0></div><div class="movie-skeleton__info-item" data-v-793cb6b0></div><div class="movie-skeleton__info-item" data-v-793cb6b0></div><div class="movie-skeleton__info-item" data-v-793cb6b0></div><div class="movie-skeleton__info-item" data-v-793cb6b0></div></div></div><div class="movie-skeleton__description" data-v-793cb6b0><div class="movie-skeleton__description-line" data-v-793cb6b0></div><div class="movie-skeleton__description-line" data-v-793cb6b0></div><div class="movie-skeleton__description-line" data-v-793cb6b0></div><div class="movie-skeleton__description-line" data-v-793cb6b0></div></div>',2))])])):h("",!0),_.value?(i(),bt(eo,{key:1,message:_.value,code:k.value},null,8,["message","code"])):h("",!0),_.value?(i(),a("div",sa,[(i(),bt(Qn,{key:p.value,"kp-id":p.value,"movie-info":l.value,"onUpdate:movieInfo":oe},null,8,["kp-id","movie-info"]))])):h("",!0),l.value&&!n.value?(i(),a("div",la,[t("div",ia,[l.value.logo_url?(i(),a("div",{key:0,class:"content-logo",onMousemove:Ge,onMouseleave:e[0]||(e[0]=r=>_e.value=!1),onClick:Fe},[t("img",{src:l.value.logo_url,alt:"–õ–æ–≥–æ—Ç–∏–ø —Ñ–∏–ª—å–º–∞",class:"content-logo"},null,8,aa)],32)):(i(),a("div",{key:1,onMousemove:Ge,onMouseleave:e[1]||(e[1]=r=>_e.value=!1),onClick:Fe},[t("h1",ra,m(l.value.title),1)],32)),ee(t("div",{class:"title-copy-tooltip",style:Qt(Ke.value)}," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ",4),[[we,_e.value]])]),l.value.kinopoisk_id||l.value.title||l.value.imdb_id||l.value.rating_imdb||l.value.shikimori_id?(i(),a("div",ua,[l.value.kinopoisk_id?(i(),bt(ll,{key:l.value.kinopoisk_id,"kp-id":l.value.kinopoisk_id,"show-dash":!0},null,8,["kp-id"])):h("",!0),l.value.kinopoisk_id?(i(),a("div",da,[t("a",{href:"https://www.kinopoisk.ru/film/".concat(l.value.kinopoisk_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:l.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(et(l.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[e[37]||(e[37]=t("img",{src:Yn,alt:"–ö–ü",class:"rating-logo"},null,-1)),t("span",{class:S(["rating-value",Y(Xt)(l.value.rating_kinopoisk)])},m(l.value.rating_kinopoisk?l.value.rating_kinopoisk:"‚Äî"),3),e[38]||(e[38]=t("img",{src:Zt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,ca)])):h("",!0),!l.value.kinopoisk_id&&l.value.title?(i(),a("div",va,[t("a",{href:"https://www.kinopoisk.ru/index.php?kp_query=".concat(encodeURIComponent(l.value.title+(l.value.year?" "+l.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:l.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(et(l.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[e[39]||(e[39]=t("img",{src:Yn,alt:"–ö–ü",class:"rating-logo"},null,-1)),t("span",{class:S(["rating-value",Y(Xt)(l.value.rating_kinopoisk)])},m(l.value.rating_kinopoisk?l.value.rating_kinopoisk:"‚Äî"),3),e[40]||(e[40]=t("img",{src:Zt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,ma)])):h("",!0),l.value.imdb_id?(i(),a("div",fa,[t("a",{href:"https://www.imdb.com/title/".concat(l.value.imdb_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:l.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(et(l.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[e[41]||(e[41]=t("img",{src:Zn,alt:"IMDb",class:"rating-logo"},null,-1)),t("span",{class:S(["rating-value",Y(Xt)(l.value.rating_imdb)])},m(l.value.rating_imdb?l.value.rating_imdb:"‚Äî"),3),e[42]||(e[42]=t("img",{src:Zt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,ga)])):h("",!0),!l.value.imdb_id&&l.value.title?(i(),a("div",pa,[t("a",{href:"https://www.imdb.com/find/?q=".concat(encodeURIComponent(l.value.title+(l.value.year?" "+l.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:l.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(et(l.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[e[43]||(e[43]=t("img",{src:Zn,alt:"IMDb",class:"rating-logo"},null,-1)),t("span",{class:S(["rating-value",Y(Xt)(l.value.rating_imdb)])},m(l.value.rating_imdb?l.value.rating_imdb:"‚Äî"),3),e[44]||(e[44]=t("img",{src:Zt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,ya)])):h("",!0),l.value.shikimori_id?(i(),a("div",ha,[t("a",{href:"https://shikimori.one/animes/".concat(l.value.shikimori_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},e[45]||(e[45]=[t("img",{src:Ao,alt:"Shiki",class:"rating-logo"},null,-1),t("img",{src:Zt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,ba)])):h("",!0),l.value.imdb_id?(i(),a("button",{key:6,class:"nudity-info-btn parents-guide-btn",onClick:e[2]||(e[2]=r=>de(r)),onMousedown:e[3]||(e[3]=r=>He(r)),title:R.value?"–°–∫—Ä—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é":"–ü–æ–∫–∞–∑–∞—Ç—å Parents Guide –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ü–µ–Ω–∞—Ö"},[e[46]||(e[46]=t("span",{class:"desktop-text"},"Parents Guide",-1)),e[47]||(e[47]=t("span",{class:"mobile-text"},"PG",-1)),ne.value?(i(),a("i",Ca)):(i(),a("i",wa))],40,ka)):h("",!0),t("button",{class:"nudity-info-btn",onClick:e[4]||(e[4]=r=>$e(r)),title:T.value!==void 0?"–°–∫—Ä—ã—Ç—å —Ç–∞–π–º–∏–Ω–≥–∏":"–ü–æ–∫–∞–∑–∞—Ç—å —Ç–∞–π–º–∏–Ω–≥–∏ —Å—Ü–µ–Ω 18+(–¥–ª—è —Ç–≤–∏—á–∞, –º–∏–≥–∞–Ω–∏–µ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö)"},[t("i",{class:S(["fa-regular fa-clock",{"text-red":pe.value,"text-red-blink":ue.value}])},null,2)],8,_a)])):h("",!0),(i(),bt(Qn,{key:p.value,"kp-id":p.value,"movie-info":l.value,"onUpdate:movieInfo":oe},null,8,["kp-id","movie-info"])),Y(u).isMobile?(i(),a("div",Ea,[t("button",{class:S(["mobile-list-toggle",{}]),onClick:e[5]||(e[5]=r=>$.value=!$.value)},[t("span",{class:S(["material-icons",{active:ae.value}])},m(ae.value?"bookmark_added":"bookmark_border"),3),e[48]||(e[48]=t("span",{class:"button-label"},"–î–æ–±–∞–≤–∏—Ç—å –≤ —Å–ø–∏—Å–æ–∫",-1)),t("span",{class:S(["material-icons dropdown-arrow",{expanded:$.value}])},"expand_more",2)]),ee(t("div",Sa,[t("button",{class:S(["mobile-list-btn",{}]),onClick:e[6]||(e[6]=r=>I(Y(K).FAVORITE))},[t("span",{class:S(["material-icons",{active:(L=(C=l.value)==null?void 0:C.lists)==null?void 0:L.isFavorite}])},m((j=(U=l.value)==null?void 0:U.lists)!=null&&j.isFavorite?"favorite":"favorite_border"),3),e[49]||(e[49]=t("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))]),t("button",{class:S(["mobile-list-btn",{}]),onClick:e[7]||(e[7]=r=>I(Y(K).WATCHING))},[t("span",{class:S(["material-icons",{active:(le=(X=l.value)==null?void 0:X.lists)==null?void 0:le.isWatching}])},m((G=(q=l.value)==null?void 0:q.lists)!=null&&G.isWatching?"visibility":"visibility_off"),3),e[50]||(e[50]=t("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))]),t("button",{class:S(["mobile-list-btn",{}]),onClick:e[8]||(e[8]=r=>I(Y(K).LATER))},[t("span",{class:S(["material-icons",{active:(ie=(W=l.value)==null?void 0:W.lists)==null?void 0:ie.isLater}])},"watch_later",2),e[51]||(e[51]=t("span",{class:"button-label"},"–ü–æ–∑–∂–µ",-1))]),t("button",{class:S(["mobile-list-btn",{}]),onClick:e[9]||(e[9]=r=>I(Y(K).COMPLETED))},[t("span",{class:S(["material-icons",{active:(Q=(he=l.value)==null?void 0:he.lists)==null?void 0:Q.isCompleted}])},m((xe=(ce=l.value)==null?void 0:ce.lists)!=null&&xe.isCompleted?"check_circle":"check_circle_outline"),3),e[52]||(e[52]=t("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))]),t("button",{class:S(["mobile-list-btn",{}]),onClick:e[10]||(e[10]=r=>I(Y(K).ABANDONED))},[t("span",{class:S(["material-icons",{active:(Se=(Te=l.value)==null?void 0:Te.lists)==null?void 0:Se.isAbandoned}])},"not_interested",2),e[53]||(e[53]=t("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))])],512),[[we,$.value]])])):h("",!0),t("meta",{name:"title-and-year",content:l.value.type==="FILM"&&l.value.year?"".concat(l.value.title," (").concat(l.value.year,")"):l.value.title},null,8,Ia),l.value.name_original?(i(),a("meta",{key:2,name:"original-title",content:l.value.name_original},null,8,Ma)):h("",!0),t("div",La,[e[64]||(e[64]=t("h2",{class:"additional-info-title"},"–ü–æ–¥—Ä–æ–±–Ω–µ–µ",-1)),t("div",xa,[l.value.poster_url?(i(),a("div",Ta,[t("a",{href:l.value.poster_url,target:"_blank",rel:"noopener noreferrer"},[t("img",{src:l.value.poster_url,alt:"–ü–æ—Å—Ç–µ—Ä —Ñ–∏–ª—å–º–∞",class:"movie-poster"},null,8,Aa)],8,Ra)])):h("",!0),t("div",Ba,[t("ul",Na,[l.value.type&&Y(Kn)[l.value.type]?(i(),a("li",Pa,[e[54]||(e[54]=t("strong",null,"–¢–∏–ø:",-1)),J(" "+m(Y(Kn)[l.value.type]),1)])):h("",!0),l.value.year?(i(),a("li",Oa,[e[55]||(e[55]=t("strong",null,"–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞:",-1)),J(" "+m(l.value.year),1)])):h("",!0),l.value.title?(i(),a("li",$a,[e[56]||(e[56]=t("strong",null,"–ù–∞–∑–≤–∞–Ω–∏–µ:",-1)),J(" "+m(l.value.title),1)])):h("",!0),l.value.name_original?(i(),a("li",Fa,[e[57]||(e[57]=t("strong",null,"–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:",-1)),J(" "+m(l.value.name_original),1)])):h("",!0),l.value.slogan?(i(),a("li",Ua,[e[58]||(e[58]=t("strong",null,"–°–ª–æ–≥–∞–Ω:",-1)),J(" "+m(l.value.slogan),1)])):h("",!0),l.value.production_companies?(i(),a("li",ja,[e[59]||(e[59]=t("strong",null,"–ü—Ä–æ–¥–∞–∫—à–Ω:",-1)),J(" "+m(l.value.production_companies),1)])):h("",!0),(Ne=l.value.countries)!=null&&Ne.length?(i(),a("li",Ha,[e[60]||(e[60]=t("strong",null,"–°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞:",-1)),J(" "+m(l.value.countries.map(r=>r.country).join(", ")),1)])):h("",!0),(Ie=l.value.genres)!=null&&Ie.length?(i(),a("li",Da,[e[61]||(e[61]=t("strong",null,"–ñ–∞–Ω—Ä—ã:",-1)),J(" "+m(l.value.genres.map(r=>r.genre).join(", ")),1)])):h("",!0),l.value.film_length?(i(),a("li",Va,[e[62]||(e[62]=t("strong",null,"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:",-1)),J(" "+m(Ce(l.value.film_length)),1)])):h("",!0),l.value.rating_mpaa||l.value.rating_age_limits?(i(),a("li",qa,[l.value.rating_mpaa?(i(),a("div",za,[e[63]||(e[63]=t("strong",null,"MPAA",-1)),t("span",null,m(l.value.rating_mpaa.toUpperCase()),1)])):h("",!0),l.value.rating_age_limits?(i(),a("div",Wa,[t("strong",null,m(l.value.rating_age_limits.replace("age",""))+"+",1)])):h("",!0)])):h("",!0)]),t("div",Ka,[l.value.description?(i(),a("p",Ga,m(l.value.description),1)):h("",!0)])])])]),Re.value?(i(),a("div",Ya,[(i(),bt(Qi,{"movie-id":p.value,key:p.value},null,8,["movie-id"]))])):h("",!0),l.value.staff?(i(),a("div",Za,[t("div",Xa,[Ae("ACTOR").length?(i(),a("div",Qa,[e[65]||(e[65]=t("h3",{class:"additional-info-title"},"–ê–∫—Ç—ë—Ä—ã",-1)),t("div",Ja,[(i(!0),a(ve,null,Me(Ae("ACTOR").slice(0,12),r=>(i(),a("div",{key:r.staff_id,class:"staff-item"},[t("a",{href:"https://www.kinopoisk.ru/name/".concat(r.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-link",title:r.description||""},[t("img",{src:r.poster_url,alt:r.name_ru,class:"staff-photo"},null,8,tr),t("span",nr,m(r.name_ru||r.name_en),1),r.description?(i(),a("span",or,m(r.description),1)):h("",!0)],8,er)]))),128)),t("a",{class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(p.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(Ae("ACTOR").length," –∞–∫—Ç–µ—Ä–æ–≤")}," +"+m(Ae("ACTOR").length-12),9,sr)])])):h("",!0),Ae("DIRECTOR").length?(i(),a("div",lr,[e[66]||(e[66]=t("h3",{class:"additional-info-title"},"–†–µ–∂–∏—Å—Å—ë—Ä—ã",-1)),t("div",ir,[t("div",ar,[(i(!0),a(ve,null,Me(Ae("DIRECTOR").slice(0,5),r=>(i(),a("a",{key:r.staff_id,href:"https://www.kinopoisk.ru/name/".concat(r.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},m(r.name_ru||r.name_en),9,rr))),128)),Ae("DIRECTOR").length>5?(i(),a("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(p.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(Ae("DIRECTOR").length," —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–≤")}," +"+m(Ae("DIRECTOR").length-5),9,ur)):h("",!0)])])])):h("",!0),Ae("PRODUCER").length?(i(),a("div",dr,[e[67]||(e[67]=t("h3",{class:"additional-info-title"},"–ü—Ä–æ–¥—é—Å–µ—Ä—ã",-1)),t("div",cr,[t("div",vr,[(i(!0),a(ve,null,Me(Ae("PRODUCER").slice(0,5),r=>(i(),a("a",{key:r.staff_id,href:"https://www.kinopoisk.ru/name/".concat(r.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},m(r.name_ru||r.name_en),9,mr))),128)),Ae("PRODUCER").length>5?(i(),a("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(p.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(Ae("PRODUCER").length," –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤")}," +"+m(Ae("PRODUCER").length-5),9,fr)):h("",!0)])])])):h("",!0)])])):h("",!0),at.value.length&&x.value?(i(),a("div",gr,[Le(Ys,{videos:at.value,"active-video-index":P.value,onSelect:o.playTrailer},null,8,["videos","active-video-index","onSelect"])])):h("",!0),Oe.value.length?(i(),a("div",pr,[e[68]||(e[68]=t("h2",null,"–°–∏–∫–≤–µ–ª—ã –∏ –ø—Ä–∏–∫–≤–µ–ª—ã",-1)),Le(Y(Xn),{"movies-list":B.value?Oe.value:Oe.value.slice(0,O.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),Oe.value.length>O.value?(i(),a("a",{key:0,class:"expand-circle-button",onClick:e[11]||(e[11]=r=>B.value=!B.value),title:"".concat(B.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(Oe.value.length,")")},m(B.value?"‚àí":"+".concat(Oe.value.length-O.value)),9,yr)):h("",!0)])):h("",!0),Ye.value.length?(i(),a("div",hr,[e[69]||(e[69]=t("h2",null,"–ü–æ—Ö–æ–∂–∏–µ",-1)),Le(Y(Xn),{"movies-list":M.value?Ye.value:Ye.value.slice(0,O.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),Ye.value.length>O.value?(i(),a("a",{key:0,class:"expand-circle-button",onClick:e[12]||(e[12]=r=>M.value=!M.value),title:"".concat(M.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(Ye.value.length,")")},m(M.value?"‚àí":"+".concat(Ye.value.length-O.value)),9,br)):h("",!0)])):h("",!0)])):h("",!0)])]),Le(vn,{ref_key:"notificationRef",ref:g},null,512),R.value!==null?(i(),a("div",kr,[t("div",wr,[ne.value?(i(),a("div",Cr,e[70]||(e[70]=[t("i",{class:"fas fa-spinner fa-spin"},null,-1),t("span",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏...",-1)]))):(i(),a("div",_r,m(R.value),1))]),t("div",Er,[t("a",{href:"https://www.imdb.com/title/".concat(l.value.imdb_id,"/parentalguide"),target:"_blank",rel:"noopener noreferrer",class:"nudity-info-button"},e[71]||(e[71]=[t("i",{class:"fas fa-external-link-alt"},null,-1),t("span",null,"Parents Guide",-1)]),8,Sr),t("button",{class:"nudity-info-button",onClick:Pt},e[72]||(e[72]=[t("i",{class:"fas fa-copy"},null,-1),t("span",null,"Copy",-1)])),t("button",{class:"nudity-info-button",onClick:lt},e[73]||(e[73]=[t("i",{class:"fas fa-language"},null,-1),t("span",null,"Translate",-1)]))])])):h("",!0),T.value!==void 0?(i(),a("div",Ir,[t("div",Mr,[t("div",{class:"acknowledgment-table"},[e[76]||(e[76]=t("div",{class:"acknowledgment-header"},[t("i",{class:"fa-solid fa-heart"}),t("span",null,"–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏")],-1)),t("div",{class:"acknowledgment-content"},[e[75]||(e[75]=t("div",{class:"acknowledgment-row"},[t("a",{href:"https://www.twitch.tv/tanyabelkova",target:"_blank",rel:"noopener noreferrer",class:"twitch-link"},[t("i",{class:"fa-brands fa-twitch"}),t("span",null,"TanyaBelkova")]),t("span",{class:"acknowledgment-text"},"‚Äî –∑–∞ –æ—Å–Ω–æ–≤—É –±–∞–∑—ã —Ç–∞–π–º–∏–Ω–≥–æ–≤")],-1)),t("div",{class:"acknowledgment-row clickable",onClick:ge},e[74]||(e[74]=[t("div",{class:"community-link"},[t("i",{class:"fa-solid fa-users"}),t("span",null,"–°–æ–æ–±—â–µ—Å—Ç–≤–æ")],-1),t("span",{class:"acknowledgment-text"},"‚Äî –∑–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–∏–Ω–≥–æ–≤",-1)]))])]),t("div",{class:S(["timings-content",{"no-border":!T.value}])},[t("div",Lr,[T.value.length>0?(i(),a("div",xr,[(i(!0),a(ve,null,Me(T.value,r=>{var Z;return i(),a("div",{key:r.id,class:S(["timing-entry",{pending:r.status==="pending","clean-text":r.status==="clean_text",selected:me.value.has(r.id)}])},[t("div",Tr,[t("div",Rr,[r.status==="pending"?(i(),a("div",Ar,"–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏")):h("",!0),r.status==="clean_text"?(i(),a("div",Br," –¢–∞–π–º–∏–Ω–≥–∏ —Ç–∞–∫–æ–≥–æ —Ç–∏–ø–∞ –Ω–µ –º–æ–¥–µ—Ä–∏—Ä—É—é—Ç—Å—è, –¥–ª—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Å–≤–µ—Ä—è–π—Ç–µ—Å—å —Å ParentsGuide ")):h("",!0)]),r.status!=="clean_text"&&((Z=l.value)==null?void 0:Z.type)==="FILM"?(i(),a("div",Nr,[t("button",{class:"nudity-info-button",onClick:fe=>yn(r)},m(ke.value[r.id]?"–°–∫—Ä—ã—Ç—å –ø–∞—Ä—Å–µ—Ä":"–ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä—Å–µ—Ä"),9,Pr),me.value.has(r.id)?(i(),a("button",{key:0,class:"nudity-info-button",onClick:fe=>bn(r.id),title:"–£–¥–∞–ª–∏—Ç—å –∏–∑ –∞–≤—Ç–æ–±–ª—é—Ä–∞"},e[77]||(e[77]=[t("i",{class:"fas fa-minus"},null,-1),t("span",null,"–£–¥–∞–ª–∏—Ç—å –∏–∑ –∞–≤—Ç–æ–±–ª—é—Ä–∞",-1)]),8,Or)):(i(),a("button",{key:1,class:"nudity-info-button",onClick:fe=>hn(r.id),title:"–î–æ–±–∞–≤–∏—Ç—å –≤ –∞–≤—Ç–æ–±–ª—é—Ä"},e[78]||(e[78]=[t("i",{class:"fas fa-plus"},null,-1),t("span",null,"–î–æ–±–∞–≤–∏—Ç—å –≤ –∞–≤—Ç–æ–±–ª—é—Ä",-1)]),8,$r)),re.value.has(r.id)?(i(),a("button",{key:2,class:"nudity-info-button overlay-button",onClick:fe=>un(r.id),title:"–£–¥–∞–ª–∏—Ç—å –∏–∑ –æ–≤–µ—Ä–ª–µ—è"},e[79]||(e[79]=[t("i",{class:"fas fa-eye-slash"},null,-1),t("span",null,"–£–¥–∞–ª–∏—Ç—å –∏–∑ –æ–≤–µ—Ä–ª–µ—è",-1)]),8,Fr)):(i(),a("button",{key:3,class:"nudity-info-button overlay-button",onClick:fe=>kn(r.id),title:"–î–æ–±–∞–≤–∏—Ç—å –≤ –æ–≤–µ—Ä–ª–µ–π"},e[80]||(e[80]=[t("i",{class:"fas fa-eye"},null,-1),t("span",null,"–î–æ–±–∞–≤–∏—Ç—å –≤ –æ–≤–µ—Ä–ª–µ–π",-1)]),8,Ur))])):h("",!0),t("div",{class:S(["timing-hover-container",{blurred:r.status==="pending"}])},[t("span",jr,m(r.timing_text),1),e[81]||(e[81]=t("br",null,null,-1)),t("span",Hr,"by "+m(r.username),1)],2),ke.value[r.id]&&Array.isArray(ke.value[r.id])?(i(),a("div",Dr,[e[82]||(e[82]=t("b",null,"–ü–∞—Ä—Å–µ—Ä(–∫ —Ç–∞–π–º–∏–Ω–≥–∞–º –¥–æ–±–∞–≤–∏—Ç—Å—è -1 –∏ +1 —Å–µ–∫—É–Ω–¥ –ø–æ –∫—Ä–∞—è–º —Ç–∞–π–º–∏–Ω–≥–∞ –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏, –Ω–æ –≤ –ø—Ä–µ–≤—å—é –ø–∞—Ä—Å–µ—Ä–∞ –∏—Ö –Ω–µ—Ç –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏):",-1)),ke.value[r.id].length===0?(i(),a("span",Vr,"–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å")):(i(),a("span",qr,[(i(!0),a(ve,null,Me(ke.value[r.id],(fe,Xe)=>(i(),a("span",{key:Xe}," ["+m(Y(Ve)(fe[0]))+" - "+m(Y(Ve)(fe[1]))+"]"+m(Xe<ke.value[r.id].length-1?", ":""),1))),128))]))])):h("",!0)])],2)}),128))])):(i(),a("div",zr,m("–ó–∞–ø–∏—Å–µ–π –æ —Ç–∞–π–º–∏–Ω–≥–∞—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")))]),Je.value&&me.value.size>0?(i(),a("div",Wr,[t("h4",Kr," –û–±—â–∏–π –ø–∞—Ä—Å–µ—Ä ("+m(me.value.size)+" —Ç–∞–π–º–∏–Ω–≥–æ–≤): ",1),t("div",Gr,[zt().length===0?(i(),a("span",Yr,"–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ç–∞–π–º–∏–Ω–≥–∏")):(i(),a("span",Zr,[(i(!0),a(ve,null,Me(zt(),(r,Z)=>(i(),a("span",{key:Z}," ["+m(Y(Ve)(r[0]))+" - "+m(Y(Ve)(r[1]))+"]"+m(Z<zt().length-1?", ":""),1))),128))]))])])):h("",!0),D.value&&re.value.size>0?(i(),a("div",Xr,[t("h4",Qr," –ü–∞—Ä—Å–µ—Ä –æ–≤–µ—Ä–ª–µ—è ("+m(re.value.size)+" —Ç–∞–π–º–∏–Ω–≥–æ–≤): ",1),t("div",Jr,[Wt().length===0?(i(),a("span",eu,"–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ç–∞–π–º–∏–Ω–≥–∏")):(i(),a("span",tu,[(i(!0),a(ve,null,Me(Wt(),(r,Z)=>(i(),a("span",{key:Z}," ["+m(Y(Ve)(r[0]))+" - "+m(Y(Ve)(r[1]))+"]"+m(Z<Wt().length-1?", ":""),1))),128))]))])])):h("",!0),t("div",nu,[T.value.length>0?(i(),a("button",{key:0,class:"nudity-info-button",onClick:Lt},e[83]||(e[83]=[t("i",{class:"fas fa-copy"},null,-1),t("span",null,"–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å",-1)]))):h("",!0),me.value.size>0?(i(),a("button",{key:1,class:"nudity-info-button",onClick:dn},[e[84]||(e[84]=t("i",{class:"fas fa-eye"},null,-1)),t("span",null,"–û–±—â–∏–π –ø–∞—Ä—Å–µ—Ä ("+m(me.value.size)+")",1)])):h("",!0),re.value.size>0?(i(),a("button",{key:2,class:"nudity-info-button overlay-button",onClick:wn},[e[85]||(e[85]=t("i",{class:"fas fa-layer-group"},null,-1)),t("span",null,"–ü–∞—Ä—Å–µ—Ä –æ–≤–µ—Ä–ª–µ—è ("+m(re.value.size)+")",1)])):h("",!0),t("button",{class:"nudity-info-button",onClick:e[13]||(e[13]=r=>Pe.value=!0)},e[86]||(e[86]=[t("i",{class:"fas fa-plus"},null,-1),t("span",null,"–î–æ–±–∞–≤–∏—Ç—å/–¥–æ–ø–æ–ª–Ω–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥",-1)])),St.value?(i(),a("button",{key:3,class:"nudity-info-button obs-button",onClick:e[14]||(e[14]=r=>xt.value=!0)},e[87]||(e[87]=[t("i",{class:"fas fa-cog"},null,-1),t("span",null,"–ù–∞—Å—Ç—Ä–æ–π–∫–∏ OBS",-1)]))):h("",!0)])],2)])])):h("",!0),Pe.value?(i(),a("div",ou,[t("div",su,[t("div",lu,[e[89]||(e[89]=t("h3",null,"–î–æ–±–∞–≤–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥",-1)),t("button",{class:"close-modal-btn",onClick:e[15]||(e[15]=r=>Pe.value=!1)},e[88]||(e[88]=[t("i",{class:"fas fa-times"},null,-1)]))]),t("div",iu,[ee(t("input",{"onUpdate:modelValue":e[16]||(e[16]=r=>it.value=r),placeholder:"–í–∞—à –Ω–∏–∫",class:"timing-input",maxlength:"50"},null,512),[[kt,it.value]]),ee(t("textarea",{"onUpdate:modelValue":e[17]||(e[17]=r=>ut.value=r),placeholder:"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ñ–∏–ª—å–º–∞(–≤ [] —Å–∫–æ–±–∫–∞—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä [01:36] –∏–ª–∏ [01:36:55]), –∫ –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã –ø—Ä–∏–ª–∞–≥–∞–µ—Ç–µ —Ç–∞–π–º–∏–Ω–≥\n–¢–∫ –∂–µ –¥–ª—è –∞–≤—Ç–æ–±–ª—é—Ä–∞ –ø—Ä–æ—à—É –≤—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏ —É–∫–∞–∑—ã–≤–∞—Ç—å –∫–∞–∫ –¥–∏–∞–ø–æ–∑–æ–Ω, –∞ –Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –≤—Ä–µ–º—è, –Ω–∞–ø—Ä–∏–º–µ—Ä 00:12:31-00:13:04 - —Ç–µ–∫—Å—Ç, –∞ –Ω–µ 00:12:31\n–î–ª—è —Å–µ—Ä–∏–∞–ª–æ–≤ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ —Å–µ–∑–æ–Ω –∏ –Ω–æ–º–µ—Ä —ç–ø–∏–∑–æ–¥–∞\n",class:"timing-textarea"},null,512),[[kt,ut.value]]),se.value&&se.value.length>0?(i(),a("div",au,[e[90]||(e[90]=t("div",{class:"timing-preview-header"},[t("i",{class:"fas fa-eye"}),t("span",null,"–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –ø–∞—Ä—Å–µ—Ä–∞")],-1)),t("div",ru,[(i(!0),a(ve,null,Me(se.value,(r,Z)=>(i(),a("div",{key:Z,class:"timing-preview-item"},[t("span",uu,m(Y(Ve)(r[0]))+" - "+m(Y(Ve)(r[1])),1),t("span",du," ("+m(Math.round(r[1]-r[0]))+"—Å) ",1)]))),128))])])):h("",!0),t("div",cu,[t("button",{class:"submit-timing-btn",onClick:Be,disabled:!Ee.value||F.value},[F.value?(i(),a("i",mu)):(i(),a("span",fu,"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é"))],8,vu)])])])])):h("",!0),mt.value?(i(),a("div",{key:3,class:"modal-overlay",onClick:e[20]||(e[20]=r=>mt.value=!1)},[t("div",{class:"modal-content",onClick:e[19]||(e[19]=wt(()=>{},["stop"]))},[t("div",gu,[e[92]||(e[92]=t("h3",null,[J(" –¢–æ–ø –∞–≤—Ç–æ—Ä–æ–≤ —Ç–∞–π–º–∏–Ω–≥–æ–≤ "),t("span",{class:"hint-text"},[J("(–•–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —Å–≤–æ–π —Å—Ç—Ä–∏–º/—Å–æ—Ü—Å–µ—Ç–∏? –ù–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º –≤ "),t("a",{href:"https://t.me/reyohoho_sup",target:"_blank",rel:"noopener noreferrer"},"—Ç–µ–ª–µ–≥—Ä–∞–º"),J(")")])],-1)),t("div",pu,[t("button",{class:"close-modal-btn",onClick:e[18]||(e[18]=r=>mt.value=!1)},e[91]||(e[91]=[t("i",{class:"fas fa-times"},null,-1)]))])]),t("div",yu,[t("button",{class:"show-all-timings-btn",onClick:ln,disabled:_t.value},[_t.value?(i(),a("i",bu)):(i(),a("i",ku)),e[93]||(e[93]=t("span",null,"–í—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏",-1))],8,hu),t("div",wu,[(i(!0),a(ve,null,Me(Ue.value,(r,Z)=>(i(),a("div",{key:r.username,class:"top-submitter-item"},[t("div",{class:S(["submitter-rank",{gold:Z===0,silver:Z===1,bronze:Z===2}])},m(Z+1),3),t("div",Cu,[t("div",_u,[r.stream_link?(i(),a("a",{key:0,href:r.stream_link,target:"_blank",rel:"noopener noreferrer"},[J(m(r.username)+" ",1),e[94]||(e[94]=t("i",{class:"fa-brands fa-twitch"},null,-1))],8,Eu)):(i(),a(ve,{key:1},[J(m(r.username),1)],64))]),t("div",Su,m(r.approved_submissions_count)+" "+m(pn(r.approved_submissions_count,["—Ñ–∏–ª—å–º","—Ñ–∏–ª—å–º–∞","—Ñ–∏–ª—å–º–æ–≤"])),1)]),t("div",Iu,[t("div",{class:"contribution-bar",style:Qt({width:jt(r.approved_submissions_count)+"%"})},null,4)])]))),128))])])])])):h("",!0),Ot.value?(i(),a("div",{key:4,class:"modal-overlay",onClick:e[27]||(e[27]=r=>Ot.value=!1)},[t("div",{class:"modal-content all-timings-modal",onClick:e[26]||(e[26]=wt(()=>{},["stop"]))},[t("div",Mu,[e[96]||(e[96]=t("h3",null,"–í—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏",-1)),t("button",{class:"close-modal-btn",onClick:e[21]||(e[21]=r=>Ot.value=!1)},e[95]||(e[95]=[t("i",{class:"fas fa-times"},null,-1)]))]),t("div",Lu,[!_t.value&&ze.value.length>0?(i(),a("div",xu,[t("button",{class:S(["timing-filter-btn",{active:ot.value==="all"}]),onClick:e[22]||(e[22]=r=>ot.value="all")}," –í—Å–µ ("+m(ze.value.length)+") ",3),t("button",{class:S(["timing-filter-btn",{active:ot.value==="approved"}]),onClick:e[23]||(e[23]=r=>ot.value="approved")}," –û–¥–æ–±—Ä–µ–Ω–Ω—ã–µ ("+m(ze.value.filter(r=>r.status==="approved").length)+") ",3),t("button",{class:S(["timing-filter-btn",{active:ot.value==="pending"}]),onClick:e[24]||(e[24]=r=>ot.value="pending")}," –ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ ("+m(ze.value.filter(r=>r.status==="pending").length)+") ",3),t("button",{class:S(["timing-filter-btn",{active:ot.value==="clean_text"}]),onClick:e[25]||(e[25]=r=>ot.value="clean_text")}," –ù–µ –º–æ–¥–µ—Ä–∏—Ä—É—é—Ç—Å—è ("+m(ze.value.filter(r=>r.status==="clean_text").length)+") ",3)])):h("",!0),_t.value?(i(),a("div",Tu,e[97]||(e[97]=[t("i",{class:"fas fa-spinner fa-spin"},null,-1),t("span",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö —Ç–∞–π–º–∏–Ω–≥–æ–≤...",-1)]))):ze.value.length===0?(i(),a("div",Ru,e[98]||(e[98]=[t("p",null,"–¢–∞–π–º–∏–Ω–≥–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",-1)]))):an.value.length===0?(i(),a("div",Au,e[99]||(e[99]=[t("p",null,"–¢–∞–π–º–∏–Ω–≥–∏ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —Ñ–∏–ª—å—Ç—Ä—É –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",-1)]))):(i(),a("div",Bu,[(i(!0),a(ve,null,Me(an.value,r=>{var Z;return i(),a("div",{key:r.id,class:S(["timing-item",{pending:r.status==="pending",approved:r.status==="approved",rejected:r.status==="rejected","clean-text":r.status==="clean_text"}])},[t("div",Nu,[t("div",Pu,[t("span",{class:S(["timing-status",r.status])},m(gn(r.status)),3),t("span",Ou,m(r.username),1),t("span",$u,m(Y(oo)(r.submitted_at)),1)]),t("div",Fu,[Le(d,{to:"/movie/".concat(r.kp_id),class:"timing-kp-id clickable",title:"–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ñ–∏–ª—å–º—É ".concat(r.kp_id)},{default:Mn(()=>[J(" KP: "+m(r.kp_id),1)]),_:2},1032,["to","title"]),(Z=Y(s).user)!=null&&Z.is_admin&&r.status==="pending"?(i(),a("div",Uu,[r.status==="pending"?(i(),a("button",{key:0,class:"approve-btn",onClick:fe=>sn(r.id),disabled:Ze.value,title:"–û–¥–æ–±—Ä–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥"},[nt.value===r.id&&ft.value?(i(),a("i",Hu)):(i(),a("i",Du))],8,ju)):h("",!0),r.status==="pending"?(i(),a("button",{key:1,class:"reject-btn",onClick:fe=>mn(r.id),disabled:Ze.value,title:"–û—Ç–∫–ª–æ–Ω–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥"},[nt.value===r.id&&!ft.value&&!dt.value?(i(),a("i",qu)):(i(),a("i",zu))],8,Vu)):h("",!0),r.status==="pending"?(i(),a("button",{key:2,class:"clean-text-btn",onClick:fe=>fn(r.id),disabled:Ze.value,title:"–û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ clean_text"},[nt.value===r.id&&dt.value?(i(),a("i",Ku)):(i(),a("i",Gu))],8,Wu)):h("",!0)])):h("",!0)])]),t("div",Yu,[t("pre",Zu,m(r.timing_text),1)])],2)}),128))]))])])])):h("",!0),xt.value?(i(),a("div",Xu,[t("div",Qu,[t("div",Ju,[e[101]||(e[101]=t("h3",null,"–ù–∞—Å—Ç—Ä–æ–π–∫–∏ OBS WebSocket",-1)),t("button",{class:"close-modal-btn",onClick:e[28]||(e[28]=r=>xt.value=!1)},e[100]||(e[100]=[t("i",{class:"fas fa-times"},null,-1)]))]),t("div",ed,[t("div",td,[t("label",nd,[ee(t("input",{type:"checkbox","onUpdate:modelValue":e[29]||(e[29]=r=>Rt.value=r),onChange:Cn},null,544),[[Gn,Rt.value]]),e[102]||(e[102]=t("span",null,"–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–±–ª—é—Ä –≤ OBS",-1))]),e[103]||(e[103]=t("div",{class:"obs-setting-description"}," –ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ, –∞–≤—Ç–æ–±–ª—é—Ä –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è —á–µ—Ä–µ–∑ OBS WebSocket –≤–º–µ—Å—Ç–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –±–ª—é—Ä–∞ ",-1))]),Rt.value?(i(),a("div",od,[t("div",sd,[e[104]||(e[104]=t("label",null,"–•–æ—Å—Ç OBS WebSocket:",-1)),ee(t("input",{type:"text","onUpdate:modelValue":e[30]||(e[30]=r=>$t.value=r),placeholder:"localhost",class:"obs-input"},null,512),[[kt,$t.value]])]),t("div",ld,[e[105]||(e[105]=t("label",null,"–ü–æ—Ä—Ç OBS WebSocket:",-1)),ee(t("input",{type:"number","onUpdate:modelValue":e[31]||(e[31]=r=>nn.value=r),placeholder:"4455",class:"obs-input"},null,512),[[kt,nn.value]])]),t("div",id,[e[106]||(e[106]=t("label",null,"–ü–∞—Ä–æ–ª—å (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω):",-1)),ee(t("input",{type:"password","onUpdate:modelValue":e[32]||(e[32]=r=>gt.value=r),placeholder:"–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –µ—Å–ª–∏ –ø–∞—Ä–æ–ª—å –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω",class:"obs-input"},null,512),[[kt,gt.value]])]),st.value?(i(),a("div",ad,[e[109]||(e[109]=t("label",null,"–í—ã–±–æ—Ä —Ñ–∏–ª—å—Ç—Ä–∞ –¥–ª—è –±–ª—é—Ä–∞:",-1)),Ft.value.length===0?(i(),a("div",rd," ‚ö†Ô∏è –§–∏–ª—å—Ç—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤ OBS. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–∞—Ö –µ—Å—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã. ")):(i(),a("div",ud,[ee(t("select",{"onUpdate:modelValue":e[33]||(e[33]=r=>Et.value=r),onChange:En,class:"obs-filter-select"},[e[107]||(e[107]=t("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∏–ª—å—Ç—Ä",-1)),(i(!0),a(ve,null,Me(Ft.value,r=>(i(),a("option",{key:r.id,value:r.id},m(r.sourceName)+" - "+m(r.filterName)+" ("+m(r.sceneName)+") ",9,dd))),128))],544),[[ho,Et.value]]),At.value?(i(),a("div",cd,[t("div",vd,[t("strong",null,m(At.value.filterName),1),e[108]||(e[108]=J(" –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ ")),t("strong",null,m(At.value.sourceName),1)]),t("span",{class:S(["filter-status",{enabled:At.value.enabled}])}," –°—Ç–∞—Ç—É—Å: "+m(At.value.enabled?"‚úÖ –í–∫–ª—é—á–µ–Ω":"‚≠ï –û—Ç–∫–ª—é—á–µ–Ω"),3)])):h("",!0),t("div",md," üí° –ù–∞–π–¥–µ–Ω–æ "+m(Ft.value.length)+" —Ñ–∏–ª—å—Ç—Ä–æ–≤. –í—ã–±–µ—Ä–∏—Ç–µ –ª—é–±–æ–π –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ –±–ª—é—Ä–∞. ",1)]))])):h("",!0),t("div",fd,[t("label",gd,[ee(t("input",{type:"checkbox","onUpdate:modelValue":e[34]||(e[34]=r=>Ut.value=r)},null,512),[[Gn,Ut.value]]),e[110]||(e[110]=t("span",null,"–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å OBS –≤ –≤–∏–¥–µ–æ –æ–≤–µ—Ä–ª–µ–µ",-1))]),e[111]||(e[111]=t("div",{class:"obs-setting-description"}," –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —Ñ–∏–ª—å—Ç—Ä–µ OBS –≤ –≤–∏–¥–µ–æ –æ–≤–µ—Ä–ª–µ–µ ",-1))]),t("div",{class:S(["obs-status",{connected:st.value}])},m(st.value?"–ü–æ–¥–∫–ª—é—á–µ–Ω –∫ OBS":"–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ OBS"),3),t("div",pd,[t("button",{class:"obs-action-btn connect-btn",onClick:pt,disabled:Tt.value},[Tt.value?(i(),a("i",hd)):(i(),a("i",bd)),J(" "+m(st.value?"–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è":"–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è"),1)],8,yd),t("button",{class:"obs-action-btn test-btn",onClick:_n,disabled:!st.value||Ft.value.length===0},e[112]||(e[112]=[t("i",{class:"fas fa-eye"},null,-1),J(" –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–ª—é—Ä ")]),8,kd),t("button",{class:"obs-action-btn refresh-btn",onClick:It,disabled:!st.value},e[113]||(e[113]=[t("i",{class:"fas fa-sync"},null,-1),J(" –û–±–Ω–æ–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã ")]),8,wd)])])):h("",!0)])])])):h("",!0)],64)}}},Td=ct(Cd,[["__scopeId","data-v-793cb6b0"]]);export{Td as default};
