{"version":3,"file":"MovieInfo-legacy-C9vdEDnA.js","sources":["../../src/assets/icon-external-link.png","../../src/helpers/ui.js","../../src/components/PlayerModal.vue","../../src/components/PlayerComponent.vue","../../src/components/TrailerCarousel.vue","../../src/components/MovieInfo.vue","../../src/assets/icon-shikimori.svg"],"sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVR4nO2ZQUoDMRSGR7eewHoFsVS0HkUUXNXqASqK2EURBPFIVRe6c+UN1CvUXWvbT4KvMAwzNnnJdCrmg1BKad7/v7y0b5IkiUQiCwGoAx3gQjEugZ0qxTeAIX6MKjMBnBOGS62AVWAPOHVYdlMu9YArYOhphLeBT+ALmOKGEd2QubaAK+B2zngFxt4GgDXgGZjgR8ch5oEkCi8DkvlnRcYLV0Apfqw10M7JvPkV6AN3FmVwK+WyZRnvMEe8ef/ibECyb2o+zRuwnpQAxeLNivQ0BvYyE46qEJ/8fK4ycJKp/X4V4n0MdDNfukkqEO9jwP1LDgD7BeKPgmgp04CL+KUz4Cp+qQxoxC+NAdsNm4c0hWkukkUa8BGfegiadbFDq3/2UAZ8xc+QVvzMtqcKYkBaZ5/MN5xEl2DgLGDZ1KswsC09FPJqXTZoNm5oA6kyMGI2FxqfkluJ0uMTDfhBXAHiHvCCWEL8/RLqlv1MPCf+TSZ+13WC7KnEfWlqcwAeU7GNjnbiQsG5UC1ZAEAt1UMhOpquk6zknMy9l20C2AA+MnEHRo9msuOCs9EH4Fp5TVQ0rqVs0plH4re02Qh1Oq1lCjypsp+5H3gKcD/gykTirqnFZ/ZDy+OGxpapzD+QePrM/2KkKfcGPcv7AdvRkz23G1x4JPIP+AY3r/ywUk/2JAAAAABJRU5ErkJggg==\"","export const showMessageToast = (message) => {\n  const messageElement = document.createElement('div')\n  messageElement.style.position = 'fixed'\n  messageElement.style.top = '0'\n  messageElement.style.left = '0'\n  messageElement.style.width = '100%'\n  messageElement.style.height = '100%'\n  messageElement.style.backgroundColor = 'rgba(0, 0, 0, 0.8)'\n  messageElement.style.color = 'white'\n  messageElement.style.display = 'flex'\n  messageElement.style.justifyContent = 'center'\n  messageElement.style.alignItems = 'center'\n  messageElement.style.fontSize = '2rem'\n  messageElement.style.zIndex = '99000'\n  messageElement.textContent = message\n  document.body.appendChild(messageElement)\n\n  setTimeout(() => {\n    document.body.removeChild(messageElement)\n  }, 2000)\n}\n","<template>\n  <div class=\"modal\" @click.self=\"$emit('close')\">\n    <div class=\"modal-content\">\n      <button class=\"close\" @click=\"$emit('close')\">&times;</button>\n\n      <h2 v-if=\"!activeGroup\">Выберите плеер</h2>\n      <h2 v-else>\n        <button class=\"back-btn\" @click=\"collapseGroup\">← Назад</button>\n        {{ activeGroup === 'hdrezka' ? 'ReYohoho - HDrezka' : 'Kodik' }}\n      </h2>\n\n      <ul class=\"players-list\">\n        <template v-if=\"!activeGroup\">\n          <li v-for=\"player in mainPlayers\" :key=\"player.key\">\n            <button :class=\"['player-item', { active: isSelected(player) }]\" @click=\"selectPlayer(player)\">\n              {{ cleanName(player.translate) }}\n              <span v-if=\"player.warning\" class=\"warning-icon material-icons\" title=\"Внимание!\">warning</span>\n            </button>\n          </li>\n          <li v-if=\"hasHdrezkaGroup\">\n            <button class=\"group-item\" @click=\"expandGroup('hdrezka')\">\n              <span class=\"material-icons group-icon\">folder</span>\n              ReYohoho - HDrezka\n              <span v-if=\"groupHasWarning('hdrezka')\" class=\"warning-icon material-icons\" title=\"Внимание!\">warning</span>\n            </button>\n          </li>\n          <li v-if=\"hasKodikGroup\">\n            <button class=\"group-item\" @click=\"expandGroup('kodik')\">\n              <span class=\"material-icons group-icon\">folder</span>\n              Kodik\n              <span v-if=\"groupHasWarning('kodik')\" class=\"warning-icon material-icons\" title=\"Внимание!\">warning</span>\n            </button>\n          </li>\n        </template>\n        <template v-else>\n          <li v-for=\"player in groupPlayers(activeGroup)\" :key=\"player.key\">\n            <button :class=\"['player-item', { active: isSelected(player) }]\" @click=\"selectPlayer(player)\">\n              {{ cleanName(player.translate) }}\n              <span v-if=\"player.warning\" class=\"warning-icon material-icons\" title=\"Внимание!\">warning</span>\n            </button>\n          </li>\n        </template>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\n\nconst props = defineProps({\n  players: {\n    type: Array,\n    required: true\n  },\n  selectedPlayer: {\n    type: Object,\n    default: null\n  }\n})\nconst emit = defineEmits(['close', 'select'])\n\nconst activeGroup = ref(null)\n\nconst mainPlayers = computed(() =>\n  props.players.filter(player => !isHdrezka(player) && !isKodik(player))\n)\nconst hasHdrezkaGroup = computed(() =>\n  props.players.some(player => isHdrezka(player))\n)\nconst hasKodikGroup = computed(() =>\n  props.players.some(player => isKodik(player))\n)\n\nconst isHdrezka = player => player.key.toUpperCase().includes('HDREZKA')\nconst isKodik = player => player.key.toUpperCase().includes('KODIK')\n\nconst cleanName = name =>\n  name\n    .replace(/^REYOHOHO_PLAYER>HDREZKA>/, '')\n    .replace(/KODIK>/, '')\n    .trim()\n\nconst selectPlayer = player => {\n  emit('select', player)\n  emit('close')\n}\n\nconst isSelected = player =>\n  props.selectedPlayer && props.selectedPlayer.key === player.key\n\nconst expandGroup = group => {\n  activeGroup.value = group\n}\nconst collapseGroup = () => {\n  activeGroup.value = null\n}\nconst groupPlayers = group => {\n  let players = props.players.filter(\n    player =>\n      (group === 'hdrezka' && isHdrezka(player)) ||\n      (group === 'kodik' && isKodik(player))\n  )\n\n  if (group === 'kodik') {\n    return players.sort((a, b) =>\n      cleanName(a.translate).localeCompare(cleanName(b.translate))\n    )\n  }\n\n  return players\n}\nconst groupHasWarning = group =>\n  groupPlayers(group).some(player => player.warning)\n</script>\n\n<style scoped>\n.modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.85);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 5;\n}\n\n.modal-content {\n  background: #2d2d2d;\n  padding: 20px;\n  border-radius: 8px;\n  width: 90%;\n  max-width: 500px;\n  max-height: 80vh;\n  overflow-y: auto;\n  color: #fff;\n  position: relative;\n  box-shadow: 0 0 20px rgba(0, 0, 0, 0.7);\n}\n\n.close {\n  position: absolute;\n  top: 12px;\n  right: 12px;\n  border: none;\n  background: transparent;\n  color: #fff;\n  font-size: 1.8rem;\n  cursor: pointer;\n}\n\nh2 {\n  margin-top: 0;\n  font-size: 1.4rem;\n  display: flex;\n  align-items: center;\n}\n\n.back-btn {\n  background: transparent;\n  border: none;\n  color: #aaa;\n  font-size: 1rem;\n  margin-right: 8px;\n  cursor: pointer;\n}\n\n.players-list {\n  list-style: none;\n  padding: 0;\n  margin: 15px 0;\n}\n\n.players-list li {\n  margin: 8px 0;\n}\n\n.player-item,\n.group-item {\n  width: 100%;\n  text-align: left;\n  padding: 10px;\n  background-color: #444;\n  border: none;\n  border-radius: 4px;\n  color: #fff;\n  font-size: 1rem;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  transition: background 0.2s;\n}\n\n.player-item:hover,\n.group-item:hover {\n  background-color: #555;\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);\n}\n\n.player-item.active,\n.group-item.active {\n  background-color: #4caf50;\n  box-shadow: 0 0 5px rgba(76, 175, 80, 0.7);\n}\n\n.warning-icon {\n  font-size: 1.2rem;\n  color: #ffcc00;\n  margin-left: 8px;\n}\n\n.group-icon {\n  font-size: 1.2rem;\n  color: #aaa;\n  margin-right: 8px;\n}\n\n@media (max-width: 768px) {\n  .modal-content {\n    padding: 15px;\n    max-width: 90%;\n  }\n}\n\n@media (max-width: 480px) {\n  .modal-content {\n    max-width: 95%;\n  }\n}\n</style>\n","<template>\n  <ErrorMessage v-if=\"errorMessage\" :message=\"errorMessage\" :code=\"errorCode\" />\n\n  <template v-else>\n    <!-- Кнопка для открытия модалки выбора плеера -->\n    <div class=\"players-list\">\n      <span>Плеер:</span>\n      <button class=\"player-btn\" @click=\"openPlayerModal\">\n        {{\n          selectedPlayerInternal\n            ? cleanName(selectedPlayerInternal.translate).toUpperCase()\n            : 'Загрузка плееров...'\n        }}\n      </button>\n    </div>\n\n    <!-- Модальное окно выбора плеера -->\n    <PlayerModal\n      v-if=\"showPlayerModal\"\n      :players=\"playersInternal\"\n      :selected-player=\"selectedPlayerInternal\"\n      @close=\"closePlayerModal\"\n      @select=\"handlePlayerSelect\"\n    />\n\n    <!-- Единый контейнер плеера -->\n    <div\n      ref=\"containerRef\"\n      :class=\"['player-container', { 'theater-mode': theaterMode }]\"\n      :style=\"!theaterMode ? containerStyle : {}\"\n    >\n      <div class=\"iframe-wrapper\" :style=\"!theaterMode ? iframeWrapperStyle : {}\">\n        <!-- <div class=\"fullscreen\" @mousemove=\"showCloseButton\"></div> -->\n\n        <iframe\n          v-show=\"!iframeLoading && selectedPlayerInternal?.iframe\"\n          ref=\"playerIframe\"\n          :src=\"selectedPlayerInternal?.iframe\"\n          frameborder=\"0\"\n          allowfullscreen\n          webkitallowfullscreen\n          class=\"responsive-iframe\"\n          :class=\"{\n            'theater-mode-unlock': closeButtonVisible,\n            'theater-mode-lock': theaterMode,\n            dimmed: dimmingEnabled\n          }\"\n          @load=\"onIframeLoad\"\n        ></iframe>\n        <SpinnerLoading v-if=\"iframeLoading\" />\n      </div>\n\n      <!-- Кнопка закрытия в театральном режиме -->\n      <button\n        v-if=\"theaterMode\"\n        class=\"close-theater-btn\"\n        :class=\"{ visible: closeButtonVisible }\"\n        @click=\"toggleTheaterMode\"\n      >\n        ✖\n      </button>\n    </div>\n\n    <!-- Кнопки управления -->\n    <div v-if=\"!isMobile\" class=\"controls\">\n      <div class=\"tooltip-container\">\n        <button\n          class=\"dimming-btn\"\n          :class=\"{ active: dimmingEnabled }\"\n          @mouseenter=\"showTooltip('dimming')\"\n          @mouseleave=\"activeTooltip = null\"\n          @click=\"toggleDimming\"\n        >\n          <span class=\"material-icons\">{{ dimmingEnabled ? 'light_mode' : 'dark_mode' }}</span>\n        </button>\n        <div v-show=\"activeTooltip === 'dimming'\" class=\"custom-tooltip\">\n          {{ dimmingEnabled ? 'Отключить затемнение' : 'Включить затемнение' }}\n        </div>\n      </div>\n\n      <div class=\"tooltip-container\">\n        <button\n          class=\"blur-btn\"\n          @mouseenter=\"showTooltip('blur')\"\n          @mouseleave=\"activeTooltip = null\"\n          @click=\"toggleBlur\"\n        >\n          <span class=\"material-icons\">blur_on</span>\n        </button>\n        <div v-show=\"activeTooltip === 'blur'\" class=\"custom-tooltip\">\n          {{ isElectron ? 'Блюр' : 'Блюр, функция доступна в приложении' }}\n        </div>\n      </div>\n\n      <div class=\"tooltip-container\">\n        <button\n          class=\"material-symbols-outlined\"\n          @mouseenter=\"showTooltip('compressor')\"\n          @mouseleave=\"activeTooltip = null\"\n          @click=\"toggleCompressor\"\n        >\n          <span class=\"material-icons\">graphic_eq</span>\n        </button>\n        <div v-show=\"activeTooltip === 'compressor'\" class=\"custom-tooltip\">\n          {{ isElectron ? 'Компрессор' : 'Компрессор, функция доступна в приложении' }}\n        </div>\n      </div>\n\n      <div class=\"tooltip-container\">\n        <button\n          class=\"mirror-btn\"\n          @mouseenter=\"showTooltip('mirror')\"\n          @mouseleave=\"activeTooltip = null\"\n          @click=\"toggleMirror\"\n        >\n          <span class=\"material-icons\">flip</span>\n        </button>\n        <div v-show=\"activeTooltip === 'mirror'\" class=\"custom-tooltip\">\n          {{ isElectron ? 'Зеркало' : 'Зеркало, функция доступна в приложении' }}\n        </div>\n      </div>\n\n      <div class=\"tooltip-container\">\n        <button\n          class=\"theater-mode-btn\"\n          @mouseenter=\"showTooltip('theater')\"\n          @mouseleave=\"activeTooltip = null\"\n          @click=\"toggleTheaterMode\"\n        >\n          <span class=\"material-symbols-outlined\">{{\n            theaterMode ? 'fullscreen_exit' : 'aspect_ratio'\n          }}</span>\n        </button>\n        <div v-show=\"activeTooltip === 'theater'\" class=\"custom-tooltip\">\n          {{ theaterMode ? 'Выйти из театрального режима' : 'Театральный режим' }}\n        </div>\n      </div>\n\n      <!-- Кнопки соотношения сторон -->\n      <div v-for=\"ratio in ['16:9', '12:5', '4:3']\" :key=\"ratio\" class=\"tooltip-container\">\n        <button\n          :class=\"['aspect-ratio-btn', { active: aspectRatio === ratio }]\"\n          @mouseenter=\"showTooltip(ratio)\"\n          @mouseleave=\"activeTooltip = null\"\n          @click=\"setAspectRatio(ratio)\"\n        >\n          {{ ratio }}\n        </button>\n        <div v-show=\"activeTooltip === ratio\" class=\"custom-tooltip\">\n          Установить соотношение {{ ratio }}\n        </div>\n      </div>\n\n      <!-- Кнопка центрирования с SliderRound в подсказке -->\n      <div\n        class=\"tooltip-container\"\n        @mouseenter=\"showTooltip('centering')\"\n        @mouseleave=\"tryHideTooltip\"\n      >\n        <button class=\"center-btn\" @click=\"centerPlayer\">\n          <span class=\"material-icons\">center_focus_strong</span>\n        </button>\n        <div\n          v-show=\"activeTooltip === 'centering'\"\n          class=\"custom-tooltip advanced-tooltip\"\n          @mouseenter=\"keepTooltipVisible\"\n          @mouseleave=\"hideTooltip\"\n        >\n          Отцентрировать плеер\n          <SliderRound v-model=\"isCentered\" title=\"Автоцентрирование плеера\" />\n          <span class=\"tooltip-title\">Автоцентрирование плеера</span>\n        </div>\n      </div>\n\n      <!-- Кнопка для открытия в приложении -->\n      <div v-if=\"!isElectron\" class=\"tooltip-container\">\n        <button\n          class=\"app-link-btn\"\n          @mouseenter=\"showTooltip('app_link')\"\n          @mouseleave=\"activeTooltip = null\"\n          @click=\"openAppLink\"\n        >\n          <span class=\"material-icons\">open_in_new</span>\n        </button>\n        <div v-show=\"activeTooltip === 'app_link'\" class=\"custom-tooltip\">Открыть в приложении</div>\n      </div>\n\n      <!-- Кнопка для копирования ссылки на фильм (только в Electron) -->\n      <div v-if=\"isElectron\" class=\"tooltip-container\">\n        <button\n          class=\"copy-link-btn\"\n          @mouseenter=\"showTooltip('copy_link')\"\n          @mouseleave=\"activeTooltip = null\"\n          @click=\"copyMovieLink\"\n        >\n          <span class=\"material-icons\">content_copy</span>\n        </button>\n        <div v-show=\"activeTooltip === 'copy_link'\" class=\"custom-tooltip\">Скопировать ссылку</div>\n      </div>\n    </div>\n\n    <Notification ref=\"notificationRef\" />\n  </template>\n</template>\n\n<script setup>\nimport { getPlayers } from '@/api/movies'\nimport { handleApiError } from '@/constants'\nimport ErrorMessage from '@/components/ErrorMessage.vue'\nimport SpinnerLoading from '@/components/SpinnerLoading.vue'\nimport Notification from '@/components/notification/ToastMessage.vue'\nimport SliderRound from '@/components/slider/SliderRound.vue'\nimport { showMessageToast } from '@/helpers/ui'\nimport { useMainStore } from '@/store/main'\nimport { usePlayerStore } from '@/store/player'\nimport { computed, nextTick, onBeforeUnmount, onMounted, ref, watch } from 'vue'\nimport { useRoute } from 'vue-router'\nimport PlayerModal from '@/components/PlayerModal.vue'\n\nconst mainStore = useMainStore()\nconst playerStore = usePlayerStore()\nconst route = useRoute()\nconst kp_id = ref(route.params.kp_id)\n\nconst props = defineProps({\n  kpId: String\n})\nconst emit = defineEmits(['update:selectedPlayer'])\n\nconst playersInternal = ref([])\nconst selectedPlayerInternal = ref(null)\nconst iframeLoading = ref(true)\nconst theaterMode = ref(false)\nconst closeButtonVisible = ref(false)\nconst playerIframe = ref(null)\nconst containerRef = ref(null)\nconst showPlayerModal = ref(false)\n\n// Переменные для ошибок\nconst errorMessage = ref('')\nconst errorCode = ref(null)\n\nconst maxPlayerHeightValue = ref(window.innerHeight * 0.9)\nconst maxPlayerHeight = computed(() => `${maxPlayerHeightValue.value}px`)\nconst isMobile = computed(() => mainStore.isMobile)\nconst isElectron = computed(() => !!window.electronAPI)\n\nconst activeTooltip = ref(null)\nconst tooltipHovered = ref(false)\nlet hideTimeout = null\n\nconst notificationRef = ref(null)\n\nconst showTooltip = (tooltipName) => {\n  activeTooltip.value = tooltipName\n  tooltipHovered.value = false\n  clearTimeout(hideTimeout)\n}\n\nconst tryHideTooltip = () => {\n  if (!tooltipHovered.value) {\n    hideTimeout = setTimeout(() => {\n      activeTooltip.value = null\n    }, 300)\n  }\n}\n\nconst keepTooltipVisible = () => {\n  tooltipHovered.value = true\n  clearTimeout(hideTimeout)\n}\n\nconst hideTooltip = () => {\n  tooltipHovered.value = false\n  activeTooltip.value = null\n}\n\nconst aspectRatio = computed({\n  get: () => playerStore.aspectRatio,\n  set: (value) => playerStore.updateAspectRatio(value)\n})\n\nconst isCentered = computed({\n  get: () => playerStore.isCentered,\n  set: (value) => playerStore.updateCentering(value)\n})\n\nconst preferredPlayer = computed(() => playerStore.preferredPlayer)\nconst naturalHeight = ref(0)\n\nconst normalizeKey = (key) => key.toUpperCase()\n\nconst updateScaleFactor = () => {\n  if (theaterMode.value || !containerRef.value) return\n  const [w, h] = aspectRatio.value.split(':').map(Number)\n  maxPlayerHeightValue.value = window.innerHeight * 0.9\n  naturalHeight.value = Math.min(\n    containerRef.value.clientWidth * (h / w),\n    maxPlayerHeightValue.value\n  )\n}\n\nconst containerStyle = computed(() => {\n  if (theaterMode.value) return {}\n  const [w, h] = aspectRatio.value.split(':').map(Number)\n  const maxWidth = maxPlayerHeightValue.value * (w / h)\n  return {\n    width: '100%',\n    maxWidth: `${maxWidth}px`,\n    maxHeight: maxPlayerHeight.value,\n    margin: '0 auto',\n    overflow: 'hidden'\n  }\n})\n\nconst iframeWrapperStyle = computed(() => {\n  const [w, h] = aspectRatio.value.split(':').map(Number)\n  return {\n    position: 'relative',\n    width: '100%',\n    paddingTop: `${(h / w) * 100}%`\n  }\n})\n\nconst centerPlayer = () => {\n  if (containerRef.value) {\n    nextTick(() => {\n      containerRef.value.scrollIntoView({\n        behavior: 'smooth',\n        block: 'center',\n        inline: 'center'\n      })\n    })\n  }\n}\n\nconst fetchPlayers = async () => {\n  try {\n    errorMessage.value = ''\n    errorCode.value = null\n    const players = await getPlayers(props.kpId)\n    playersInternal.value = Object.entries(players).map(([key, value]) => ({\n      key: key.toUpperCase(),\n      ...value\n    }))\n    if (playersInternal.value.length > 0) {\n      if (preferredPlayer.value) {\n        const normalizedPreferred = normalizeKey(preferredPlayer.value)\n        const preferred = playersInternal.value.find(\n          (player) => normalizeKey(player.key) === normalizedPreferred\n        )\n        selectedPlayerInternal.value = preferred || playersInternal.value[0]\n      } else {\n        selectedPlayerInternal.value = playersInternal.value[0]\n      }\n      emit('update:selectedPlayer', selectedPlayerInternal.value)\n    }\n  } catch (error) {\n    const { message, code } = handleApiError(error)\n    errorMessage.value = message\n    errorCode.value = code\n    console.error('Ошибка при загрузке плееров:', error)\n  }\n}\n\nconst openPlayerModal = () => {\n  showPlayerModal.value = true\n}\n\nconst closePlayerModal = () => {\n  showPlayerModal.value = false\n}\n\nconst handlePlayerSelect = (player) => {\n  selectedPlayerInternal.value = player\n  iframeLoading.value = true\n  playerStore.updatePreferredPlayer(normalizeKey(player.key))\n  emit('update:selectedPlayer', player)\n}\n\nconst toggleBlur = () => {\n  if (isElectron.value) {\n    window.electronAPI.sendHotKey('F2')\n  } else {\n    showMessageToast('Доступно только в приложении ReYohoho Desktop')\n    window.open('https://t.me/ReYohoho/126', '_blank')\n  }\n}\n\nconst toggleCompressor = () => {\n  if (isElectron.value) {\n    window.electronAPI.sendHotKey('F3')\n  } else {\n    showMessageToast('Доступно только в приложении ReYohoho Desktop')\n    window.open('https://t.me/ReYohoho/126', '_blank')\n  }\n}\n\nconst toggleMirror = () => {\n  if (isElectron.value) {\n    window.electronAPI.sendHotKey('F4')\n  } else {\n    showMessageToast('Доступно только в приложении ReYohoho Desktop')\n    window.open('https://t.me/ReYohoho/126', '_blank')\n  }\n}\n\nconst toggleTheaterMode = () => {\n  theaterMode.value = !theaterMode.value\n  if (theaterMode.value) {\n    window.addEventListener('mousemove', showCloseButton)\n    document.addEventListener('keydown', onKeyDown)\n    document.body.classList.add('no-scroll')\n  } else {\n    window.removeEventListener('mousemove', showCloseButton)\n    document.removeEventListener('keydown', onKeyDown)\n    document.body.classList.remove('no-scroll')\n  }\n  closeButtonVisible.value = theaterMode.value\n  nextTick(() => centerPlayer())\n}\n\nconst theaterModeCloseButtonTimeout = ref(null)\nconst showCloseButton = () => {\n  theaterModeCloseButtonTimeout.value = setTimeout(() => {\n    clearTimeout(theaterModeCloseButtonTimeout.value)\n    closeButtonVisible.value = false\n  }, 4000)\n  closeButtonVisible.value = true\n}\n\nconst dimmingEnabled = computed(() => mainStore.dimmingEnabled)\nconst toggleDimming = () => {\n  if (!theaterMode.value) {\n    mainStore.toggleDimming()\n  }\n}\n\nconst onKeyDown = (event) => {\n  if (event.key === 'Escape' && theaterMode.value) {\n    toggleTheaterMode()\n  }\n}\n\nconst setAspectRatio = (ratio) => {\n  aspectRatio.value = ratio\n  setTimeout(() => {\n    if (isCentered.value) centerPlayer()\n  }, 310)\n}\n\nconst openAppLink = () => {\n  const appUrl = `reyohoho://#${kp_id.value}`\n  try {\n    window.location.href = appUrl\n  } catch (e) {\n    console.error('Ошибка при открытии ссылки:', e)\n  }\n}\n\nconst copyMovieLink = () => {\n  const movieLink = window.location.href\n  navigator.clipboard.writeText(movieLink).then(() => {})\n  notificationRef.value.showNotification('Ссылка на фильм скопирована')\n}\n\nconst onIframeLoad = () => {\n  iframeLoading.value = false\n}\n\nfunction cleanName(name) {\n  return name\n    .replace(/^REYOHOHO_PLAYER>HDREZKA>/, '')\n    .replace(/KODIK>/, 'KODIK - ')\n    .trim()\n}\n\nwatch(selectedPlayerInternal, (newVal) => {\n  if (newVal) {\n    iframeLoading.value = true\n    playerStore.updatePreferredPlayer(normalizeKey(newVal.key))\n    emit('update:selectedPlayer', newVal)\n  }\n})\n\nwatch(\n  () => route.params.kp_id,\n  async (newKpId) => {\n    if (newKpId && newKpId !== kp_id.value) {\n      kp_id.value = newKpId\n      if (isCentered.value) centerPlayer()\n    }\n  },\n  { immediate: true }\n)\n\nonMounted(() => {\n  iframeLoading.value = true\n  fetchPlayers()\n  if (isMobile.value) aspectRatio.value = '4:3'\n  updateScaleFactor()\n  window.addEventListener('resize', updateScaleFactor)\n  if (isCentered.value) centerPlayer()\n})\n\nonBeforeUnmount(() => {\n  window.removeEventListener('resize', updateScaleFactor)\n  window.removeEventListener('mousemove', showCloseButton)\n  document.removeEventListener('keydown', onKeyDown)\n  document.body.classList.remove('no-scroll')\n})\n</script>\n\n<style scoped>\n.players-list {\n  width: 100%;\n  max-width: 800px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n  margin: auto;\n  margin-bottom: 10px;\n}\n\n/* Стили для кнопки выбора плеера */\n.player-btn {\n  display: flex;\n  align-items: center;\n  justify-content: left;\n  background: #3a3a3a;\n  color: #fff;\n  border: 2px solid #505050;\n  border-radius: 5px;\n  padding: 10px;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  width: 100%;\n  max-width: 800px;\n  text-align: left;\n  font-size: 16px;\n}\n\n.player-btn:hover {\n  background: #505050;\n  border-color: #17850b;\n}\n\n.player-btn:active {\n  background: #17850b;\n  border-color: #17850b;\n}\n\n.player-btn:focus {\n  outline: none;\n  box-shadow: 0 0 5px #17850b;\n}\n\n.player-container {\n  width: 100%;\n  transition:\n    max-width 0.3s ease-in-out,\n    max-height 0.3s ease-in-out;\n  overflow: hidden;\n  padding-bottom: 10px;\n}\n\n.iframe-wrapper {\n  transition:\n    padding-top 0.3s ease-in-out,\n    transform 0.3s ease-in-out;\n  width: 100%;\n}\n\n.responsive-iframe {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  border: none;\n  z-index: 4;\n}\n\n.responsive-iframe.dimmed {\n  z-index: 7;\n}\n\n/* Стили для театрального режима */\n.player-container.theater-mode {\n  position: fixed;\n  top: 0 !important;\n  left: 0 !important;\n  width: 100vw !important;\n  height: 100vh !important;\n  background: #000;\n  margin: 0;\n  border-radius: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 7;\n}\n\n.player-container.theater-mode .iframe-wrapper {\n  width: 100% !important;\n  height: 100% !important;\n  padding-top: 0 !important;\n  flex-grow: 1;\n}\n\n.close-theater-btn {\n  position: fixed;\n  top: 20px;\n  right: 80px;\n  background: rgba(255, 0, 0, 0.7);\n  color: white;\n  border: none;\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  cursor: pointer;\n  transition:\n    background 0.3s,\n    opacity 0.3s;\n  opacity: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 24px;\n  z-index: 8;\n}\n\n.close-theater-btn.visible {\n  opacity: 1;\n}\n\n/* Делаем кнопку видимой при наведении на зону */\n.close-theater-btn:hover,\n.close-theater-btn::before:hover {\n  background: rgba(255, 0, 0, 1);\n  opacity: 1;\n}\n\nhtml.no-scroll {\n  overflow: hidden;\n}\n\n/* Блока управления */\n.controls {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  gap: 10px;\n  margin: 0 auto;\n  border-radius: 10px;\n  backdrop-filter: blur(10px);\n}\n\n.controls button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #444;\n  color: #fff;\n  border: none;\n  padding: 12px;\n  font-size: 18px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition:\n    background-color 0.3s ease,\n    transform 0.2s ease,\n    box-shadow 0.3s ease;\n  z-index: 4;\n  width: 50px;\n  height: 50px;\n}\n\n.controls button:hover {\n  background-color: #555;\n  transform: translateY(-3px);\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);\n}\n\n.controls button:active {\n  transform: translateY(0);\n  box-shadow: none;\n}\n\n.controls button.active {\n  background-color: #4caf50;\n  box-shadow: 0 0 10px rgba(76, 175, 80, 0.7);\n}\n\n.material-icons {\n  font-size: 24px;\n}\n\n.tooltip-container {\n  position: relative;\n  display: inline-block;\n}\n\n.custom-tooltip {\n  position: absolute;\n  top: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n  background-color: #333;\n  color: #fff;\n  padding: 5px;\n  border-radius: 4px;\n  font-size: 16px;\n  white-space: nowrap;\n  margin-top: 8px;\n  pointer-events: none;\n  text-align: center;\n}\n\n.advanced-tooltip {\n  white-space: normal;\n  padding: 15px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n  top: calc(100% + 5px);\n  pointer-events: all;\n  text-align: center;\n}\n\n.tooltip-title {\n  font-size: 16px;\n  text-align: center;\n}\n\n.fullscreen {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  z-index: 10;\n}\n\n.theater-mode-lock {\n  pointer-events: none;\n}\n\n.theater-mode-unlock {\n  pointer-events: all;\n}\n</style>\n","<template>\n  <div v-if=\"availableVideos.length\" class=\"carousel-container\">\n    <h2>Трейлеры (YouTube)</h2>\n    <div class=\"carousel-wrapper\">\n      <!-- Кнопка для прокрутки влево -->\n      <button\n        v-show=\"!isMobile && canScrollLeft\"\n        class=\"scroll-button left\"\n        @click=\"scrollCarousel(-1)\"\n      >\n        <span class=\"material-symbols-outlined\">arrow_back_ios</span>\n      </button>\n\n      <!-- Карусель с кастомным скроллом -->\n      <div ref=\"carousel\" class=\"carousel\" @scroll=\"updateScroll\">\n        <div\n          v-for=\"(video, index) in availableVideos\"\n          :key=\"index\"\n          class=\"carousel-item\"\n          @click=\"selectVideo(index)\"\n        >\n          <img :src=\"`https://img.youtube.com/vi/${video.videoId}/0.jpg`\" :alt=\"video.name\" />\n          <div class=\"video-name\">{{ video.name }}</div>\n        </div>\n      </div>\n\n      <!-- Кнопка для прокрутки вправо -->\n      <button\n        v-show=\"!isMobile && canScrollRight\"\n        class=\"scroll-button right\"\n        @click=\"scrollCarousel(1)\"\n      >\n        <span class=\"material-symbols-outlined\">arrow_forward_ios</span>\n      </button>\n    </div>\n    <!-- Встроенный плеер -->\n    <div v-if=\"activeVideoIndex !== null\" class=\"video-player\">\n      <iframe :src=\"videos[activeVideoIndex].iframeUrl\" frameborder=\"0\" allowfullscreen></iframe>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, onBeforeUnmount, watch } from 'vue'\nimport { useMainStore } from '@/store/main'\n\nconst mainStore = useMainStore()\n\nconst isMobile = computed(() => mainStore.isMobile)\n\nconst props = defineProps({\n  videos: {\n    type: Array,\n    required: true\n  }\n})\n\nconst emit = defineEmits(['select'])\nconst activeVideoIndex = ref(null)\nconst carousel = ref(null)\nconst canScrollLeft = ref(false)\nconst canScrollRight = ref(false)\n\n// Обновление состояния кнопок прокрутки\nconst updateScroll = () => {\n  if (!carousel.value) return\n  const { scrollLeft, scrollWidth, clientWidth } = carousel.value\n  canScrollLeft.value = scrollLeft > 0\n  canScrollRight.value = scrollLeft < scrollWidth - clientWidth - 1\n}\n\n// Прокрутка карусели на ширину одного элемента (с учетом gap)\nconst scrollCarousel = (direction) => {\n  if (!carousel.value) return\n  const firstItem = carousel.value.querySelector('.carousel-item')\n  if (!firstItem) return\n  const itemWidth = firstItem.clientWidth + 16 // gap\n  carousel.value.scrollBy({\n    left: itemWidth * direction,\n    behavior: 'smooth'\n  })\n}\n\n// Выбор видео для отображения во встроенном плеере\nconst selectVideo = (index) => {\n  activeVideoIndex.value = index\n  emit('select', props.videos[index])\n}\n\nconst handleResize = () => updateScroll()\n\nconst availableVideos = ref([])\n\nconst checkVideoAvailability = async (videoId) => {\n  try {\n    const response = await fetch(`https://img.youtube.com/vi/${videoId}/0.jpg`)\n    return response.ok\n  } catch {\n    return false\n  }\n}\n\nonMounted(async () => {\n  const availabilityChecks = props.videos.map(async (video) => {\n    const isAvailable = await checkVideoAvailability(video.videoId)\n    return isAvailable ? video : null\n  })\n\n  const results = await Promise.all(availabilityChecks)\n  availableVideos.value = results.filter(Boolean)\n  updateScroll()\n  window.addEventListener('resize', handleResize)\n})\n\nwatch(\n  () => props.videos,\n  async (newVideos) => {\n    const availabilityChecks = newVideos.map(async (video) => {\n      const isAvailable = await checkVideoAvailability(video.videoId)\n      return isAvailable ? video : null\n    })\n\n    const results = await Promise.all(availabilityChecks)\n    availableVideos.value = results.filter(Boolean)\n  }\n)\n\nonBeforeUnmount(() => {\n  window.removeEventListener('resize', handleResize)\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.carousel-container {\n  margin: 2rem 0;\n  padding: 0 20px;\n}\n\n.carousel-wrapper {\n  position: relative;\n  overflow: hidden;\n}\n\n/* Карусель с кастомным скроллом */\n.carousel {\n  display: flex;\n  gap: 16px;\n  overflow-x: auto;\n  scroll-snap-type: x mandatory;\n  -webkit-overflow-scrolling: touch;\n  padding: 8px 0;\n  user-select: none;\n\n  &::-webkit-scrollbar {\n    width: 5px; /* Ширина вертикального скроллбара */\n    height: 5px; /* Высота горизонтального скроллбара */\n  }\n\n  &::-webkit-scrollbar-track {\n    background: transparent; /* Цвет фона */\n    border-radius: 10px; /* Закругление углов */\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #494949; /* Цвет ползунка */\n    border-radius: 10px; /* Закругление углов */\n    border: 0; /* Отступ вокруг ползунка */\n  }\n\n  &::-webkit-scrollbar-thumb:hover {\n    background: #555; /* Цвет ползунка при наведении */\n  }\n}\n\n/* Кнопки прокрутки скрыты по умолчанию, появляются при наведении */\n.scroll-button {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  width: 50px;\n  border: none;\n  background: rgba(0, 0, 0, 0.5);\n  color: white;\n  cursor: pointer;\n  z-index: 10;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: opacity 0.3s;\n  opacity: 0;\n  pointer-events: none;\n}\n\n.carousel-wrapper:hover .scroll-button {\n  opacity: 1;\n  pointer-events: auto;\n}\n\n.scroll-button:hover {\n  background: rgba(0, 0, 0, 0.7);\n}\n\n.scroll-button.left {\n  left: 0;\n}\n\n.scroll-button.right {\n  right: 0;\n}\n\n/* Стили карточки трейлера */\n.carousel-item {\n  flex: 0 0 auto;\n  scroll-snap-align: start;\n  width: 260px;\n  background: #161616;\n  border-radius: 12px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n  transition: transform 0.2s;\n  cursor: pointer;\n  overflow: hidden;\n}\n\n.carousel-item:hover {\n  transform: scale(1.03);\n}\n\n.carousel-item img {\n  width: 100%;\n  height: auto;\n  aspect-ratio: 16 / 9;\n  object-fit: cover;\n  border-top-left-radius: 12px;\n  border-top-right-radius: 12px;\n}\n\n.video-name {\n  padding: 12px;\n  background: #202020;\n  color: #fff;\n  font-size: 14px;\n  text-align: center;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  border-bottom-left-radius: 12px;\n  border-bottom-right-radius: 12px;\n}\n\n/* Увеличенный плеер */\n.video-player {\n  margin-top: 20px;\n  max-width: 1200px;\n  width: 100%;\n  aspect-ratio: 16 / 9;\n  margin: 20px auto 0;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n.video-player iframe {\n  width: 100%;\n  height: 100%;\n  border: none;\n}\n</style>\n","<template>\n  <div class=\"movie-info\">\n    <div class=\"content\">\n      <SpinnerLoading v-if=\"infoLoading\" />\n\n      <ErrorMessage v-if=\"errorMessage\" :message=\"errorMessage\" :code=\"errorCode\" />\n\n      <div v-if=\"errorMessage\" class=\"content-card\">\n        <PlayerComponent :key=\"kp_id\" :kp-id=\"kp_id\" />\n      </div>\n\n      <div v-if=\"movieInfo\" class=\"content-card\">\n        <div class=\"content-header\">\n          <div\n            v-if=\"movieInfo.logo_url\"\n            class=\"content-logo\"\n            @mousemove=\"moveTooltip\"\n            @mouseleave=\"titleCopyTooltip = false\"\n            @click=\"copyMovieMeta\"\n          >\n            <img :src=\"movieInfo.logo_url\" alt=\"Логотип фильма\" class=\"content-logo\" />\n          </div>\n          <div\n            v-else\n            @mousemove=\"moveTooltip\"\n            @mouseleave=\"titleCopyTooltip = false\"\n            @click=\"copyMovieMeta\"\n          >\n            <h1 class=\"content-title\">{{ movieInfo.title }}</h1>\n          </div>\n\n          <div v-show=\"titleCopyTooltip\" class=\"title-copy-tooltip\" :style=\"tooltipStyle\">\n            Скопировать\n          </div>\n        </div>\n\n        <div\n          v-if=\"\n            movieInfo.kinopoisk_id ||\n            movieInfo.title ||\n            movieInfo.imdb_id ||\n            movieInfo.rating_imdb ||\n            movieInfo.shikimori_id\n          \"\n          class=\"ratings-links\"\n        >\n          <!-- Кинопоиск -->\n          <div v-if=\"movieInfo.kinopoisk_id\">\n            <a\n              :href=\"`https://www.kinopoisk.ru/film/${movieInfo.kinopoisk_id}`\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              class=\"rating-link\"\n            >\n              <img src=\"/src/assets/icon-kp-logo.svg\" alt=\"КП\" class=\"rating-logo\" />\n              <span v-if=\"movieInfo.rating_kinopoisk\">{{ movieInfo.rating_kinopoisk }}/10</span>\n              <img\n                src=\"/src/assets/icon-external-link.png\"\n                alt=\"Внешняя ссылка\"\n                class=\"external-link-icon\"\n              />\n            </a>\n          </div>\n\n          <!-- Поиск на Кинопоиске, если нет ID -->\n          <div v-if=\"!movieInfo.kinopoisk_id && movieInfo.title\">\n            <a\n              :href=\"`https://www.kinopoisk.ru/index.php?kp_query=${encodeURIComponent(movieInfo.title + (movieInfo.year ? ' ' + movieInfo.year : ''))}`\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              class=\"rating-link\"\n            >\n              <img src=\"/src/assets/icon-kp-logo.svg\" alt=\"КП\" class=\"rating-logo\" />\n              <span v-if=\"movieInfo.rating_kinopoisk\">{{ movieInfo.rating_kinopoisk }}/10</span>\n              <img\n                src=\"/src/assets/icon-external-link.png\"\n                alt=\"Внешняя ссылка\"\n                class=\"external-link-icon\"\n              />\n            </a>\n          </div>\n\n          <!-- IMDb -->\n          <div v-if=\"movieInfo.imdb_id\">\n            <a\n              :href=\"`https://www.imdb.com/title/${movieInfo.imdb_id}`\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              class=\"rating-link\"\n            >\n              <img src=\"/src/assets/icon-imdb-logo.svg\" alt=\"IMDb\" class=\"rating-logo\" />\n              <span v-if=\"movieInfo.rating_imdb\">{{ movieInfo.rating_imdb }}/10</span>\n              <img\n                src=\"/src/assets/icon-external-link.png\"\n                alt=\"Внешняя ссылка\"\n                class=\"external-link-icon\"\n              />\n            </a>\n          </div>\n\n          <!-- Поиск на IMDb, если нет ID -->\n          <div v-if=\"!movieInfo.imdb_id && movieInfo.title\">\n            <a\n              :href=\"`https://www.imdb.com/find/?q=${encodeURIComponent(movieInfo.title + (movieInfo.year ? ' ' + movieInfo.year : ''))}`\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              class=\"rating-link\"\n            >\n              <img src=\"/src/assets/icon-imdb-logo.svg\" alt=\"IMDb\" class=\"rating-logo\" />\n              <span v-if=\"movieInfo.rating_imdb\">{{ movieInfo.rating_imdb }}/10</span>\n              <img\n                src=\"/src/assets/icon-external-link.png\"\n                alt=\"Внешняя ссылка\"\n                class=\"external-link-icon\"\n              />\n            </a>\n          </div>\n\n          <!-- Shikimori -->\n          <div v-if=\"movieInfo.shikimori_id\">\n            <a\n              :href=\"`https://shikimori.one/animes/${movieInfo.shikimori_id}`\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              class=\"rating-link\"\n            >\n              <img src=\"/src/assets/icon-shikimori.svg\" alt=\"Shiki\" class=\"rating-logo\" />\n              <img\n                src=\"/src/assets/icon-external-link.png\"\n                alt=\"Внешняя ссылка\"\n                class=\"external-link-icon\"\n              />\n            </a>\n          </div>\n\n          <!-- Parents Guide (только если есть IMDb id) -->\n          <div v-if=\"movieInfo.imdb_id\">\n            <a\n              :href=\"`https://www.imdb.com/title/${movieInfo.imdb_id}/parentalguide`\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              class=\"rating-link\"\n            >\n              <span>Parents Guide</span>\n              <img\n                src=\"/src/assets/icon-external-link.png\"\n                alt=\"Внешняя ссылка\"\n                class=\"external-link-icon\"\n              />\n            </a>\n          </div>\n        </div>\n\n        <!-- Интеграция компонента плеера -->\n        <PlayerComponent :key=\"kp_id\" :kp-id=\"kp_id\" />\n\n        <meta\n          name=\"title-and-year\"\n          :content=\"\n            movieInfo.type === 'FILM' && movieInfo.year\n              ? `${movieInfo.title} (${movieInfo.year})`\n              : movieInfo.title\n          \"\n        />\n\n        <meta\n          v-if=\"movieInfo.name_original\"\n          name=\"original-title\"\n          :content=\"movieInfo.name_original\"\n        />\n        <div class=\"additional-info\">\n          <div class=\"controls\">\n            <div class=\"tooltip-container\">\n              <button\n                class=\"favorite-btn\"\n                :class=\"{ active: movieInfo.lists.isFavorite }\"\n                @mouseenter=\"showTooltip('favorite')\"\n                @mouseleave=\"activeTooltip = null\"\n                @click=\"toggleList(USER_LIST_TYPES_ENUM.FAVORITE)\"\n              >\n                <span class=\"material-icons\">{{\n                  movieInfo.lists.isFavorite ? 'favorite' : 'favorite_border'\n                }}</span>\n              </button>\n              <div v-show=\"activeTooltip === 'favorite'\" class=\"custom-tooltip\">\n                {{ 'В избранное' }}\n              </div>\n            </div>\n\n            <div class=\"tooltip-container\">\n              <button\n                class=\"watching-btn\"\n                :class=\"{ active: movieInfo.lists.isWatching }\"\n                @mouseenter=\"showTooltip('watching')\"\n                @mouseleave=\"activeTooltip = null\"\n                @click=\"toggleList(USER_LIST_TYPES_ENUM.WATCHING)\"\n              >\n                <span class=\"material-icons\">{{\n                  movieInfo.lists.isWatching ? 'visibility' : 'visibility_off'\n                }}</span>\n              </button>\n              <div v-show=\"activeTooltip === 'watching'\" class=\"custom-tooltip\">\n                {{ 'Смотрю' }}\n              </div>\n            </div>\n\n            <div class=\"tooltip-container\">\n              <button\n                class=\"later-btn\"\n                :class=\"{ active: movieInfo.lists.isLater }\"\n                @mouseenter=\"showTooltip('later')\"\n                @mouseleave=\"activeTooltip = null\"\n                @click=\"toggleList(USER_LIST_TYPES_ENUM.LATER)\"\n              >\n                <span class=\"material-icons\">{{ 'watch_later' }}</span>\n              </button>\n              <div v-show=\"activeTooltip === 'later'\" class=\"custom-tooltip\">\n                {{ 'Смотреть позже' }}\n              </div>\n            </div>\n\n            <div class=\"tooltip-container\">\n              <button\n                class=\"completed-btn\"\n                :class=\"{ active: movieInfo.lists.isCompleted }\"\n                @mouseenter=\"showTooltip('completed')\"\n                @mouseleave=\"activeTooltip = null\"\n                @click=\"toggleList(USER_LIST_TYPES_ENUM.COMPLETED)\"\n              >\n                <span class=\"material-icons\">{{\n                  movieInfo.lists.isCompleted ? 'check_circle' : 'check_circle_outline'\n                }}</span>\n              </button>\n              <div v-show=\"activeTooltip === 'completed'\" class=\"custom-tooltip\">\n                {{ 'Просмотрено' }}\n              </div>\n            </div>\n\n            <div class=\"tooltip-container\">\n              <button\n                class=\"abandoned-btn\"\n                :class=\"{ active: movieInfo.lists.isAbandoned }\"\n                @mouseenter=\"showTooltip('abandoned')\"\n                @mouseleave=\"activeTooltip = null\"\n                @click=\"toggleList(USER_LIST_TYPES_ENUM.ABANDONED)\"\n              >\n                <span class=\"material-icons\">{{\n                  movieInfo.lists.isAbandoned ? 'not_interested' : 'not_interested'\n                }}</span>\n              </button>\n              <div v-show=\"activeTooltip === 'abandoned'\" class=\"custom-tooltip\">\n                {{ 'Брошено' }}\n              </div>\n            </div>\n          </div>\n          <h2 class=\"additional-info-title\">Подробнее</h2>\n          <div class=\"info-content\">\n            <div class=\"details-container\">\n              <ul class=\"info-list\">\n                <li v-if=\"movieInfo.type && TYPES_ENUM[movieInfo.type]\">\n                  <strong>Тип:</strong> {{ TYPES_ENUM[movieInfo.type] }}\n                </li>\n                <li v-if=\"movieInfo.year\"><strong>Год выпуска:</strong> {{ movieInfo.year }}</li>\n                <li v-if=\"movieInfo.title\"><strong>Название:</strong> {{ movieInfo.title }}</li>\n                <li v-if=\"movieInfo.name_original\">\n                  <strong>Оригинальное название:</strong> {{ movieInfo.name_original }}\n                </li>\n                <li v-if=\"movieInfo.slogan\"><strong>Слоган:</strong> {{ movieInfo.slogan }}</li>\n                <li v-if=\"movieInfo.production_companies\">\n                  <strong>Продакшн:</strong> {{ movieInfo.production_companies }}\n                </li>\n                <li v-if=\"movieInfo.countries?.length\">\n                  <strong>Страна производства:</strong>\n                  {{ movieInfo.countries.map((item) => item.country).join(', ') }}\n                </li>\n                <li v-if=\"movieInfo.genres?.length\">\n                  <strong>Жанры:</strong>\n                  {{ movieInfo.genres.map((item) => item.genre).join(', ') }}\n                </li>\n                <li v-if=\"movieInfo.film_length\">\n                  <strong>Продолжительность:</strong> {{ formatTime(movieInfo.film_length) }}\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"content-info\">\n          <p v-if=\"movieInfo.description\" class=\"content-description-text\">\n            {{ movieInfo.description }}\n          </p>\n        </div>\n\n        <div v-if=\"videos.length && areTrailersActive\" class=\"yt-video-container\">\n          <TrailerCarousel :videos=\"videos\" @select=\"playTrailer\" />\n        </div>\n\n        <!-- Секция с сиквелами и приквелами -->\n        <div v-if=\"sequelsAndPrequels.length\" class=\"related-movies\">\n          <h2>Сиквелы и приквелы</h2>\n          <MovieList :movies-list=\"sequelsAndPrequels\" :loading=\"false\" :is-history=\"false\" />\n        </div>\n\n        <!-- Секция с похожими фильмами -->\n        <div v-if=\"similars.length\" class=\"related-movies\">\n          <h2>Похожие</h2>\n          <MovieList :movies-list=\"similars\" :loading=\"false\" :is-history=\"false\" />\n        </div>\n      </div>\n    </div>\n  </div>\n  <Notification ref=\"notificationRef\" />\n</template>\n\n<script setup>\nimport { getKpInfo, getShikiInfo } from '@/api/movies'\nimport { handleApiError } from '@/constants'\nimport { addToList, delFromList } from '@/api/user'\nimport { MovieList } from '@/components/MovieList/'\nimport PlayerComponent from '@/components/PlayerComponent.vue'\nimport SpinnerLoading from '@/components/SpinnerLoading.vue'\nimport ErrorMessage from '@/components/ErrorMessage.vue'\nimport { TYPES_ENUM, USER_LIST_TYPES_ENUM } from '@/constants'\nimport { useBackgroundStore } from '@/store/background'\nimport { useMainStore } from '@/store/main'\nimport { useAuthStore } from '@/store/auth'\nimport { useNavbarStore } from '@/store/navbar'\nimport { computed, onMounted, onUnmounted, ref, watch } from 'vue'\nimport { useRoute } from 'vue-router'\nimport Notification from '@/components/notification/ToastMessage.vue'\nimport TrailerCarousel from '@/components/TrailerCarousel.vue'\nimport { useTrailerStore } from '@/store/trailer'\n\nconst infoLoading = ref(true)\nconst mainStore = useMainStore()\nconst authStore = useAuthStore()\nconst backgroundStore = useBackgroundStore()\nconst route = useRoute()\nconst kp_id = ref(route.params.kp_id)\nconst errorMessage = ref('')\nconst errorCode = ref(null)\nconst movieInfo = ref(null)\nconst navbarStore = useNavbarStore()\nconst trailerStore = useTrailerStore()\n\nconst areTrailersActive = trailerStore.areTrailersActive\n\nconst activeTooltip = ref(null)\nconst tooltipHovered = ref(false)\nlet hideTimeout = null\n\nconst showTooltip = (tooltipName) => {\n  activeTooltip.value = tooltipName\n  tooltipHovered.value = false\n  clearTimeout(hideTimeout)\n}\n\nconst setDocumentTitle = () => {\n  if (movieInfo.value) {\n    const title =\n      movieInfo.value.name_ru ||\n      movieInfo.value.name_en ||\n      movieInfo.value.name_original ||\n      'Информация о фильме'\n    document.title = title\n  }\n}\n\nconst transformMoviesData = (movies) => {\n  return (movies || []).map((movie) => ({\n    kp_id: movie.film_id,\n    poster: movie.poster_url_preview || movie.poster_url,\n    title: movie.name_ru || movie.name_en || movie.name_original\n  }))\n}\n\nconst formatTime = (minutes) => {\n  if (typeof minutes !== 'number') {\n    return\n  }\n  const hours = Math.floor(minutes / 60)\n  const mins = minutes % 60\n  return `${hours} ч. ${mins} мин.`\n}\n\nconst titleCopyTooltip = ref(false)\nconst tooltipStyle = ref({ top: '0px', left: '0px' })\nconst moveTooltip = (event) => {\n  titleCopyTooltip.value = true\n  tooltipStyle.value = {\n    top: `${event.pageY + 10}px`,\n    left: `${event.pageX - 70}px`\n  }\n}\n\nconst notificationRef = ref(null)\nconst copyMovieMeta = async () => {\n  try {\n    const movieMeta = [\n      movieInfo.value.name_ru || movieInfo.value.name_en || movieInfo.value.name_original,\n      ...(movieInfo.value.year ? [movieInfo.value.year] : []),\n      ...(movieInfo.value.film_length ? [formatTime(movieInfo.value.film_length)] : [])\n    ]\n    await navigator.clipboard.writeText(movieMeta.join(', '))\n    notificationRef.value.showNotification('Скопировано')\n  } catch (err) {\n    console.error('Ошибка копирования:', err)\n  }\n}\n\nconst getListStatus = (movieInfo, listType) => {\n  const statusMap = {\n    [USER_LIST_TYPES_ENUM.FAVORITE]: movieInfo.lists?.isFavorite || false,\n    [USER_LIST_TYPES_ENUM.HISTORY]: movieInfo.lists?.isHistory || false,\n    [USER_LIST_TYPES_ENUM.LATER]: movieInfo.lists?.isLater || false,\n    [USER_LIST_TYPES_ENUM.COMPLETED]: movieInfo.lists?.isCompleted || false,\n    [USER_LIST_TYPES_ENUM.ABANDONED]: movieInfo.lists?.isAbandoned || false,\n    [USER_LIST_TYPES_ENUM.WATCHING]: movieInfo.lists?.isWatching || false\n  }\n\n  return statusMap[listType] ?? false\n}\n\nconst toggleList = async (type) => {\n  if (!authStore.token) {\n    notificationRef.value.showNotification('Необходимо авторизоваться', 5000)\n    return\n  }\n  let hasError = false\n  try {\n    if (getListStatus(movieInfo.value, type)) {\n      await delFromList(kp_id.value, type)\n      notificationRef.value.showNotification('Удалено')\n    } else {\n      await addToList(kp_id.value, type)\n      notificationRef.value.showNotification('Добавлено')\n    }\n  } catch (error) {\n    const { message, code } = handleApiError(error)\n    notificationRef.value.showNotification(`${message} ${code}`)\n  }\n  if (!hasError) {\n    await fetchMovieInfo(false)\n  }\n}\n\nconst fetchMovieInfo = async (updateHistory = true) => {\n  try {\n    let response\n    if (kp_id.value.startsWith('shiki')) {\n      response = await getShikiInfo(kp_id.value)\n    } else {\n      response = await getKpInfo(kp_id.value, authStore.token)\n    }\n\n    if (Array.isArray(response) && response.length === 0) {\n      throw new Error('Данные не найдены. Пожалуйста, повторите поиск.')\n    }\n\n    movieInfo.value = response\n\n    if (kp_id.value.startsWith('shiki')) {\n      movieInfo.value = {\n        ...movieInfo.value,\n        title: movieInfo.value.name_ru || movieInfo.value.name_en,\n        name_original: movieInfo.value.name_en,\n        short_description: movieInfo.value.slogan\n      }\n    } else {\n      movieInfo.value = {\n        ...movieInfo.value,\n        title: movieInfo.value.name_ru || movieInfo.value.name_en || movieInfo.value.name_original,\n        kinopoisk_id: kp_id.value\n      }\n    }\n\n    navbarStore.setHeaderContent({\n      text: movieInfo.value.title,\n      imageUrl: movieInfo.value.logo_url\n    })\n\n    setDocumentTitle()\n\n    const movieToSave = {\n      kp_id: kp_id.value,\n      title: movieInfo.value?.name_ru || movieInfo.value?.name_en || movieInfo.value?.name_original,\n      poster:\n        movieInfo.value?.poster_url ||\n        movieInfo.value?.cover_url ||\n        movieInfo.value?.screenshots[0],\n      year: movieInfo.value?.year,\n      type: movieInfo.value?.type\n    }\n\n    // Устанавливаем фон фильма через новый метод\n    if (kp_id.value.startsWith('shiki')) {\n      if (movieInfo.value.screenshots && movieInfo.value.screenshots.length > 0) {\n        const randomIndex = Math.floor(Math.random() * movieInfo.value.screenshots.length)\n        const randomScreenshot = movieInfo.value.screenshots[randomIndex]\n        backgroundStore.updateMoviePoster(randomScreenshot)\n      } else if (movieToSave.poster) {\n        backgroundStore.updateMoviePoster(movieToSave.poster)\n      }\n    } else {\n      if (movieToSave.poster) {\n        backgroundStore.updateMoviePoster(movieToSave.poster)\n      }\n    }\n\n    const isHistoryAllowed = computed(() => mainStore.isHistoryAllowed)\n\n    if (isHistoryAllowed.value && movieToSave.kp_id && movieToSave.title && updateHistory) {\n      if (authStore.token) {\n        try {\n          await addToList(movieToSave.kp_id, USER_LIST_TYPES_ENUM.HISTORY)\n        } catch (error) {\n          console.error('Ошибка при добавлении в историю:', error)\n        }\n      } else {\n        mainStore.addToHistory({ ...movieToSave })\n      }\n    }\n  } catch (error) {\n    const { message, code } = handleApiError(error)\n    errorMessage.value = message\n    errorCode.value = code\n    console.error('Ошибка при загрузке информации о фильмах:', error)\n  }\n}\n\nconst videos = computed(() => {\n  console.log('Трейлеры:', movieInfo.value?.videos)\n  return movieInfo.value?.videos\n})\n\nconst sequelsAndPrequels = computed(() =>\n  transformMoviesData(movieInfo.value?.sequels_and_prequels)\n)\n\nconst similars = computed(() => transformMoviesData(movieInfo.value?.similars))\n\nonMounted(async () => {\n  await fetchMovieInfo()\n  infoLoading.value = false\n})\n\nonUnmounted(async () => {\n  navbarStore.clearHeaderContent()\n})\n\nwatch(\n  () => route.params.kp_id,\n  async (newKpId) => {\n    if (newKpId && newKpId !== kp_id.value) {\n      navbarStore.clearHeaderContent()\n      kp_id.value = newKpId\n      await fetchMovieInfo()\n      infoLoading.value = false\n    }\n  },\n  { immediate: true }\n)\n\nwatch(\n  movieInfo,\n  () => {\n    setDocumentTitle()\n  },\n  { deep: true }\n)\n</script>\n\n<style scoped>\n.content {\n  min-height: 100vh;\n}\n/* Стили для информации о фильме */\n.content-card {\n  overflow: hidden;\n  padding: 20px;\n  color: #e0e0e0;\n}\n\n.content-header {\n  height: 80px;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n  cursor: pointer;\n}\n\n.content-logo {\n  max-height: 80px;\n  height: 80px;\n  width: auto;\n  object-fit: contain;\n  max-width: 100%;\n}\n\n.content-title {\n  font-size: 55px;\n  margin: 0;\n  line-height: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  text-align: center;\n}\n\n.content-subtitle {\n  font-size: 20px;\n  color: #bbb;\n}\n\n.ratings-links {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 20px;\n  margin: 15px 0;\n}\n\n.rating-link {\n  display: inline-flex;\n  align-items: center;\n  color: inherit;\n  text-decoration: none;\n  font-weight: bold;\n}\n\n.rating-logo {\n  width: 20px;\n  height: 20px;\n  margin-right: 5px;\n}\n\n.external-link-icon {\n  width: 20px;\n  height: auto;\n  margin-left: 5px;\n}\n\n.additional-info {\n  border-radius: 8px;\n  margin-bottom: 20px;\n  font-size: 16px;\n}\n\n.additional-info-title {\n  margin: 15px 0 15px;\n  text-align: left;\n  color: #fff;\n}\n\n.info-content {\n  display: flex;\n  gap: 20px;\n}\n\n.details-container {\n  flex: 3;\n}\n\n.info-list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.info-list li {\n  margin-bottom: 8px;\n}\n\n.content-info {\n  font-size: 16px;\n  line-height: 1.6;\n  color: #ccc;\n}\n\n.content-description-text,\n.content-short-description {\n  margin: 0 0 10px;\n}\n\n.error-message {\n  color: #ff4444;\n  text-align: center;\n  padding: 20px;\n  font-size: 1.2rem;\n  border: 1px solid #ff4444;\n  border-radius: 5px;\n  margin: 20px auto;\n  max-width: 500px;\n  background: rgba(255, 68, 68, 0.1);\n}\n\n/* Стили для секций с похожими фильмами */\n.related-movies {\n  margin-top: 30px;\n}\n\n.related-movies h2 {\n  color: #fff;\n  margin-bottom: 15px;\n}\n\n/* Подсказка */\n.title-copy-tooltip {\n  position: absolute;\n  background-color: #333;\n  color: #fff;\n  padding: 5px 10px;\n  border-radius: 5px;\n  font-size: 14px;\n  white-space: nowrap;\n  pointer-events: none;\n}\n\n@media (max-width: 600px) {\n  .content-card {\n    padding: 0 2px;\n  }\n\n  .content-header,\n  .content-logo,\n  .content-title {\n    display: none;\n  }\n\n  .content-subtitle {\n    font-size: 16px;\n  }\n\n  .ratings-links {\n    margin: 5px 0;\n  }\n\n  .additional-info-title {\n    font-size: 20px;\n  }\n\n  .info-content {\n    flex-direction: column;\n  }\n}\n\n.controls {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  gap: 10px;\n  margin-top: 40px;\n  border-radius: 10px;\n}\n\n.controls button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #444;\n  color: #fff;\n  border: none;\n  padding: 12px;\n  font-size: 18px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition:\n    background-color 0.3s ease,\n    transform 0.2s ease,\n    box-shadow 0.3s ease;\n  z-index: 4;\n  width: 50px;\n  height: 50px;\n}\n\n.controls button:hover {\n  background-color: #555;\n  transform: translateY(-3px);\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);\n}\n\n.controls button:active {\n  transform: translateY(0);\n  box-shadow: none;\n}\n\n.controls button.active {\n  background-color: #4caf50;\n  box-shadow: 0 0 10px rgba(76, 175, 80, 0.7);\n}\n\n.material-icons {\n  font-size: 24px;\n}\n\n.tooltip-container {\n  position: relative;\n  display: inline-block;\n}\n\n.custom-tooltip {\n  position: absolute;\n  top: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n  background-color: #333;\n  color: #fff;\n  padding: 5px;\n  border-radius: 4px;\n  font-size: 16px;\n  white-space: nowrap;\n  margin-top: 8px;\n  pointer-events: none;\n  text-align: center;\n}\n\n.advanced-tooltip {\n  white-space: normal;\n  padding: 15px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n  top: calc(100% + 5px);\n  pointer-events: all;\n  text-align: center;\n}\n\n.tooltip-title {\n  font-size: 16px;\n  text-align: center;\n}\n</style>\n","export default \"__VITE_ASSET__BcVPhcOV__\""],"names":["_imports_1","showMessageToast","message","messageElement","document","createElement","style","position","top","left","width","height","backgroundColor","color","display","justifyContent","alignItems","fontSize","zIndex","textContent","body","appendChild","setTimeout","removeChild","props","__props","emit","__emit","activeGroup","ref","mainPlayers","computed","players","filter","player","isHdrezka","isKodik","hasHdrezkaGroup","some","hasKodikGroup","key","toUpperCase","includes","cleanName","name","replace","trim","selectPlayer","isSelected","selectedPlayer","expandGroup","group","value","collapseGroup","groupPlayers","sort","a","b","translate","localeCompare","groupHasWarning","warning","mainStore","useMainStore","playerStore","usePlayerStore","route","useRoute","kp_id","params","playersInternal","selectedPlayerInternal","iframeLoading","theaterMode","closeButtonVisible","playerIframe","containerRef","showPlayerModal","errorMessage","errorCode","maxPlayerHeightValue","window","innerHeight","maxPlayerHeight","isMobile","isElectron","electronAPI","activeTooltip","tooltipHovered","hideTimeout","notificationRef","showTooltip","tooltipName","clearTimeout","tryHideTooltip","keepTooltipVisible","hideTooltip","aspectRatio","get","set","updateAspectRatio","isCentered","updateCentering","preferredPlayer","naturalHeight","normalizeKey","updateScaleFactor","_aspectRatio$value$sp2","_slicedToArray","split","map","Number","w","h","Math","min","clientWidth","containerStyle","_aspectRatio$value$sp4","maxWidth","maxHeight","margin","overflow","iframeWrapperStyle","_aspectRatio$value$sp6","paddingTop","centerPlayer","nextTick","scrollIntoView","behavior","block","inline","fetchPlayers","_ref3","_asyncToGenerator","_regeneratorRuntime","mark","_callee","normalizedPreferred","preferred","_handleApiError","code","wrap","_callee$","_context","prev","next","getPlayers","kpId","sent","Object","entries","_ref4","_ref5","_objectSpread","length","find","t0","handleApiError","console","error","stop","apply","arguments","openPlayerModal","closePlayerModal","handlePlayerSelect","updatePreferredPlayer","toggleBlur","sendHotKey","open","toggleCompressor","toggleMirror","toggleTheaterMode","addEventListener","showCloseButton","onKeyDown","classList","add","removeEventListener","remove","theaterModeCloseButtonTimeout","dimmingEnabled","toggleDimming","event","openAppLink","appUrl","location","href","e","copyMovieLink","movieLink","navigator","clipboard","writeText","then","showNotification","onIframeLoad","watch","newVal","_ref6","_callee2","newKpId","_context2","_x","immediate","onMounted","onBeforeUnmount","ratio","activeVideoIndex","carousel","canScrollLeft","canScrollRight","updateScroll","_carousel$value","scrollLeft","scrollWidth","scrollCarousel","direction","firstItem","querySelector","itemWidth","scrollBy","handleResize","availableVideos","checkVideoAvailability","_ref8","_callee3","videoId","response","_context3","fetch","abrupt","ok","_x2","_callee5","availabilityChecks","results","_callee5$","_context5","videos","_ref10","_callee4","video","isAvailable","_callee4$","_context4","_x3","Promise","all","Boolean","_ref11","_callee7","newVideos","_context7","_ref12","_callee6","_context6","_x5","this","_x4","index","infoLoading","authStore","useAuthStore","backgroundStore","useBackgroundStore","movieInfo","navbarStore","useNavbarStore","areTrailersActive","useTrailerStore","setDocumentTitle","title","name_ru","name_en","name_original","transformMoviesData","movies","movie","film_id","poster","poster_url_preview","poster_url","formatTime","minutes","floor","titleCopyTooltip","tooltipStyle","moveTooltip","pageY","pageX","copyMovieMeta","_ref13","_callee8","movieMeta","_context8","year","film_length","join","getListStatus","listType","_movieInfo$lists","_movieInfo$lists2","_movieInfo$lists3","_movieInfo$lists4","_movieInfo$lists5","_movieInfo$lists6","_statusMap$listType","USER_LIST_TYPES_ENUM","FAVORITE","lists","isFavorite","HISTORY","isHistory","LATER","isLater","COMPLETED","isCompleted","ABANDONED","isAbandoned","WATCHING","isWatching","toggleList","_ref14","_callee9","type","_handleApiError2","_context9","token","delFromList","addToList","fetchMovieInfo","_x6","_ref15","_callee10","updateHistory","_movieInfo$value","_movieInfo$value2","_movieInfo$value3","_movieInfo$value4","_movieInfo$value5","_movieInfo$value6","_movieInfo$value7","_movieInfo$value8","movieToSave","randomIndex","randomScreenshot","_handleApiError3","_args10","_callee10$","_context10","undefined","startsWith","getShikiInfo","getKpInfo","Array","isArray","Error","isHistoryAllowed","short_description","slogan","kinopoisk_id","setHeaderContent","text","imageUrl","logo_url","cover_url","screenshots","random","updateMoviePoster","addToHistory","t1","_movieInfo$value9","_movieInfo$value10","log","sequelsAndPrequels","_movieInfo$value11","sequels_and_prequels","similars","_movieInfo$value12","_callee11","_callee11$","_context11","onUnmounted","_callee12","_callee12$","_context12","clearHeaderContent","_ref18","_callee13","_context13","_x7","deep"],"mappings":"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"}