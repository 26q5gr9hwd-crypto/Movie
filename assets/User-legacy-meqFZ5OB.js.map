{"version":3,"file":"User-legacy-meqFZ5OB.js","sources":["../../src/components/User.vue"],"sourcesContent":["<template>\r\n  <div class=\"profile-container\">\r\n    <div class=\"profile-header\">\r\n      <h1>Профиль</h1>\r\n    </div>\r\n\r\n    <div class=\"profile-content\" v-if=\"user\">\r\n      <div class=\"profile-photo\">\r\n        <img v-lazy=\"photoURL\" alt=\"Profile Photo\" v-if=\"user.photo && photoURL\" />\r\n        <div class=\"photo-placeholder\" v-else>\r\n          {{ String.fromCodePoint(user.name.codePointAt(0)).toLocaleUpperCase() }}\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"profile-info\">\r\n        <div class=\"info-item\">\r\n          <label>Имя:</label>\r\n          <span>{{ user.name }}</span>\r\n        </div>\r\n\r\n        <div class=\"info-item\">\r\n          <label>Никнейм:</label>\r\n          <span>{{ user.username ?? 'Не указан' }}</span>\r\n        </div>\r\n      </div>\r\n\r\n      <button class=\"logout-btn\" @click=\"confirmLogout\">Выйти</button>\r\n    </div>\r\n\r\n    <div class=\"loading\" v-else>Загрузка профиля...</div>\r\n\r\n    <div class=\"dialog-overlay\" v-if=\"showDialog\">\r\n      <div class=\"dialog modern-dark-dialog\">\r\n        <div class=\"dialog-header\">\r\n          <h3>Выход</h3>\r\n        </div>\r\n        <div class=\"dialog-body\">\r\n          <p>Вы уверены?</p>\r\n        </div>\r\n        <div class=\"dialog-footer\">\r\n          <button class=\"modern-dark-btn\" @click=\"showDialog = false\">Отмена</button>\r\n          <button class=\"modern-dark-btn danger\" @click=\"logout\">Выйти</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted } from 'vue'\r\nimport { useAuthStore } from '@/store/auth'\r\nimport { useRouter } from 'vue-router'\r\nimport { getBaseURL } from '@/api/axios'\r\n\r\nexport default {\r\n  name: 'ProfilePage',\r\n\r\n  setup() {\r\n    const showDialog = ref(false)\r\n    const authStore = useAuthStore()\r\n    const router = useRouter()\r\n    const user = ref(authStore.user)\r\n    const photoURL = ref(null)\r\n\r\n    const confirmLogout = () => {\r\n      showDialog.value = true\r\n    }\r\n\r\n    const logout = async (openLogin = false) => {\r\n      showDialog.value = false\r\n      authStore.logout()\r\n      if (openLogin) {\r\n        await router.push('/')\r\n      } else {\r\n        await router.push('/login')\r\n      }\r\n      router.go(0)\r\n    }\r\n\r\n    onMounted(async () => {\r\n      if (!user.value) {\r\n        logout(true)\r\n      }\r\n\r\n      if (user.value.photo) {\r\n        const baseURL = await getBaseURL()\r\n        photoURL.value = `${baseURL}${user.value.photo}`\r\n      }\r\n    })\r\n\r\n    return {\r\n      user,\r\n      showDialog,\r\n      confirmLogout,\r\n      logout,\r\n      photoURL\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.profile-container {\r\n  max-width: 600px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n  font-family: Arial, sans-serif;\r\n}\r\n\r\n.profile-header {\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.profile-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 20px;\r\n}\r\n\r\n.profile-photo {\r\n  width: 150px;\r\n  height: 150px;\r\n  border-radius: 50%;\r\n  overflow: hidden;\r\n  background-color: #f0f0f0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.profile-photo img {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n.photo-placeholder {\r\n  font-size: 60px;\r\n  color: #666;\r\n}\r\n\r\n.profile-info {\r\n  width: 100%;\r\n  max-width: 300px;\r\n}\r\n\r\n.info-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 10px 0;\r\n  border-bottom: 1px solid #eee;\r\n}\r\n\r\n.info-item label {\r\n  font-weight: bold;\r\n  color: #555;\r\n}\r\n\r\n.logout-btn {\r\n  margin-top: 30px;\r\n  padding: 10px 20px;\r\n  background-color: #ff4444;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.logout-btn:hover {\r\n  background-color: #cc0000;\r\n}\r\n\r\n.loading {\r\n  text-align: center;\r\n  padding: 50px;\r\n  color: #666;\r\n}\r\n\r\n.dialog-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n}\r\n\r\n.dialog {\r\n  background-color: white;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  max-width: 400px;\r\n  width: 100%;\r\n}\r\n/* Modern Dark Dialog */\r\n.modern-dark-dialog {\r\n  background-color: #1d1d1d;\r\n  color: #e2e8f0;\r\n  border-radius: 12px;\r\n  overflow: hidden;\r\n  width: 320px;\r\n  box-shadow:\r\n    0 10px 15px -3px rgba(0, 0, 0, 0.3),\r\n    0 4px 6px -2px rgba(0, 0, 0, 0.25);\r\n}\r\n\r\n.dialog-header {\r\n  padding: 16px 20px;\r\n  border-bottom: 1px solid #4caf50;\r\n}\r\n\r\n.dialog-header h3 {\r\n  margin: 0;\r\n  font-size: 1.1rem;\r\n  font-weight: 600;\r\n}\r\n\r\n.dialog-body {\r\n  padding: 20px;\r\n}\r\n\r\n.dialog-body p {\r\n  margin: 0;\r\n  line-height: 1.5;\r\n}\r\n\r\n.dialog-footer {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 12px;\r\n  padding: 16px 20px;\r\n}\r\n\r\n.modern-dark-btn {\r\n  padding: 8px 16px;\r\n  border-radius: 6px;\r\n  border: none;\r\n  background-color: #242424;\r\n  color: #e2e8f0;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.modern-dark-btn:hover {\r\n  background-color: #2b2b2b;\r\n}\r\n\r\n.modern-dark-btn.danger {\r\n  background-color: #7f1d1d;\r\n  color: #fecaca;\r\n}\r\n\r\n.modern-dark-btn.danger:hover {\r\n  background-color: #991b1b;\r\n}\r\n</style>\r\n"],"names":["_sfc_main","name","setup","showDialog","ref","authStore","useAuthStore","router","useRouter","user","photoURL","logout","_callee","openLogin","_args","arguments","_regeneratorRuntime","wrap","_context","prev","next","length","undefined","value","push","go","stop","onMounted","_asyncToGenerator","mark","_callee2","baseURL","_callee2$","_context2","photo","getBaseURL","sent","confirmLogout","_hoisted_1","class","key","_hoisted_3","alt","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_11","_hoisted_12","_openBlock","_createElementBlock","_createElementVNode","$setup","_hoisted_2","_withDirectives","_hoisted_4","_hoisted_5","_toDisplayString","String","fromCodePoint","codePointAt","toLocaleUpperCase","_cache","_$setup$user$username","username","onClick","_hoisted_9","_hoisted_10","_createCommentVNode"],"mappings":"wqTAsDA,IAAKA,EAAU,CACbC,KAAM,cAENC,KAAAA,GACE,IAAMC,EAAaC,GAAI,GACjBC,EAAYC,IACZC,EAASC,IACTC,EAAOL,EAAIC,EAAUI,MACrBC,EAAWN,EAAI,MAMfO,+BAAS,SAAAC,IAAAC,IAAAA,EAAAC,EAAAC,UAAAC,OAAAA,IAAAC,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAOP,KAAAA,EAEH,GAFGA,EAAQC,EAAAO,OAAAP,QAAAQ,IAAAR,MAAAA,EAAI,GAChCX,EAAWoB,OAAQ,EACnBlB,EAAUM,UACNE,GAASK,EAAAE,KAAA,EAAA,KAAA,CACL,OADKF,EAAAE,KACL,EAAAb,EAAOiB,KAAK,YAAGN,EAAAE,KAAAF,GAAAA,MAAAA,KAAAA,EAAA,OAAAA,EAAAE,KAAA,GAEfb,EAAOiB,KAAK,UAEpBjB,KAAAA,GAAAA,EAAOkB,GAAG,GAAC,yBAAAP,EAAAQ,OAAAd,GAAAA,OARP,OAAA,yCASN,CAAA,IAaA,OAXAe,EAASC,EAAAZ,IAAAa,MAAC,SAAAC,IAAAC,IAAAA,SAAAf,IAAAC,MAAAe,SAAAC,GAAAA,cAAAA,EAAAd,KAAAc,EAAAb,aAGR,GAFKX,EAAKc,OACRZ,GAAO,IAGLF,EAAKc,MAAMW,MAAKD,CAAAA,EAAAb,KAAA,EAAA,KAAA,QAAAa,EAAAb,OACIe,IAAW,KAAA,EAA3BJ,EAAME,EAAAG,KACZ1B,EAASa,MAAQ,GAAGQ,IAAUtB,EAAKc,MAAMW,QAAM,KAAA,EAAA,IAAA,MAAA,OAAAD,EAAAP,UAAAI,EAAA,MAI5C,CACLrB,OACAN,aACAkC,cA7BoBA,KACpBlC,EAAWoB,OAAQ,CAAG,EA6BtBZ,SACAD,WAEJ,GAhGK4B,EAAA,CAAAC,MAAM,wBADbC,IAAA,EAMSD,MAAM,mBACJE,EAAA,CAAAF,MAAM,oBAPjBC,IAAA,EAQ+BE,IAAI,oBARnCF,IAAA,EASaD,MAAM,qBAKRI,EAAA,CAAAJ,MAAM,gBACJK,EAAA,CAAAL,MAAM,aAKNM,EAAA,CAAAN,MAAM,gBApBnBC,IAAA,EA6BSD,MAAM,cA7BfC,IAAA,EA+BSD,MAAM,kBACJO,EAAA,CAAAP,MAAM,6BAOJQ,EAAA,CAAAR,MAAM,oFAtCjB,OAAAS,IAAAC,EA4CM,MA5CNX,EA4CM,aA3CJY,EAEM,MAAA,CAFDX,MAAM,kBAAgB,CACzBW,EAAgB,UAAZ,iBAG6BC,EAAI1C,MAAvCuC,IAAAC,EAqBM,MArBNG,EAqBM,CApBJF,EAKM,MALNT,EAKM,CAJ6CU,EAAI1C,KAACyB,OAASiB,EAAQzC,SAAvE2C,GAAAL,IAAAC,EAA2E,MAA3EK,EAA2E,KAAA,MAAA,IAA9DH,EAAQzC,aACrBsC,IAAAC,EAEM,MAFNM,EACKC,EAAAC,OAAOC,cAAcP,EAAA1C,KAAKR,KAAK0D,gBAAgBC,qBAAiB,MAIvEV,EAUM,MAVNP,EAUM,CATJO,EAGM,MAHNN,EAGM,CAFJiB,EAAA,KAAAA,EAAA,GAAAX,EAAmB,aAAZ,QAAI,IACXA,EAA4B,OAAA,KAAAM,EAAnBL,EAAI1C,KAACR,MAAI,KAGpBiD,EAGM,MAHNL,EAGM,CAFJgB,EAAA,KAAAA,EAAA,GAAAX,EAAuB,aAAhB,YAAQ,IACfA,EAA+C,OAAA,KAAAM,EAAzB,QAAyBM,EAAtCX,EAAI1C,KAACsD,gBAAQD,IAAAA,EAAAA,EAAA,aAAA,OAI1BZ,EAAgE,SAAA,CAAxDX,MAAM,aAAcyB,+BAAO,OAAAb,EAAad,eAAAc,EAAAd,iBAAAtB,UAAA,IAAE,iBAGpDkC,EAAqD,MAArDgB,EAA4B,wBAEMd,EAAUhD,YAA5C6C,IAAAC,EAaM,MAbNiB,EAaM,CAZJhB,EAWM,MAXNJ,EAWM,aAVJI,EAEM,MAAA,CAFDX,MAAM,iBAAe,CACxBW,EAAc,UAAV,2BAENA,EAEM,MAAA,CAFDX,MAAM,eAAa,CACtBW,EAAkB,SAAf,qBAELA,EAGM,MAHNH,EAGM,CAFJG,EAA2E,SAAA,CAAnEX,MAAM,kBAAmByB,uBAAOb,EAAUhD,YAAA,IAAU,UAC5D+C,EAAqE,SAAA,CAA7DX,MAAM,yBAA0ByB,sCAAOb,EAAMxC,QAAAwC,EAAAxC,UAAAI,cAAE,gBAzCjEoD,EAAA,IAAA"}