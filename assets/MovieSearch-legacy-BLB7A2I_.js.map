{"version":3,"file":"MovieSearch-legacy-BLB7A2I_.js","sources":["../../src/components/FooterDonaters.vue","../../src/components/MovieSearch.vue"],"sourcesContent":["<template>\n  <footer>\n    <div class=\"donaters-wrapper\">\n      <transition name=\"fade\" mode=\"out-in\">\n        <span v-if=\"currentDonater\" :key=\"currentIndex\" class=\"donater\">\n          {{ currentDonater }}\n        </span>\n      </transition>\n    </div>\n  </footer>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, onUnmounted } from 'vue'\nimport { getDons } from '@/api/movies'\n\nconst donaters = ref([])\nconst currentIndex = ref(-1)\nconst CACHE_KEY_DONATERS = 'donatersCache'\nlet intervalId = null\n\nconst currentDonater = computed(() => {\n  if (currentIndex.value === -1 || !donaters.value.length) return ''\n  return donaters.value[currentIndex.value]\n})\n\nconst fetchDonaters = async () => {\n  const today = new Date().toISOString().split('T')[0]\n  const cached = localStorage.getItem(CACHE_KEY_DONATERS)\n\n  if (cached) {\n    try {\n      const { date, data } = JSON.parse(cached)\n      if (date === today) {\n        donaters.value = data\n        return\n      }\n    } catch (e) {\n      console.error('Ошибка кэша донатеров:', e)\n    }\n  }\n\n  try {\n    const dons = await getDons()\n    donaters.value = dons\n      .split('\\n')\n      .map((line) => line.trim())\n      .filter((line) => line)\n    localStorage.setItem(\n      CACHE_KEY_DONATERS,\n      JSON.stringify({\n        date: today,\n        data: donaters.value\n      })\n    )\n  } catch (error) {\n    console.error('Ошибка загрузки донатеров:', error)\n  }\n}\n\nfunction updateCurrentDonater() {\n  if (!donaters.value.length) return\n  const newIndex = Math.floor(Math.random() * donaters.value.length)\n  currentIndex.value = newIndex\n}\n\nfunction startShowingDonaters() {\n  if (donaters.value.length === 0) return\n  updateCurrentDonater()\n  intervalId = setInterval(updateCurrentDonater, 4000)\n}\n\nonMounted(async () => {\n  await fetchDonaters()\n  startShowingDonaters()\n})\n\nonUnmounted(() => {\n  if (intervalId) clearInterval(intervalId)\n})\n</script>\n\n<style scoped>\n.donaters-wrapper {\n  width: 100%;\n  height: 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding-bottom: 10px;\n}\n\n.donater {\n  font-family: Neucha, sans-serif;\n  font-weight: bold;\n  color: rgba(255, 255, 255, 0.945);\n}\n\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 1s ease;\n}\n\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n</style>\n","<template>\n  <div class=\"wrapper\">\n    <div class=\"mainpage\">\n      <!-- Кнопки выбора типа поиска -->\n      <div class=\"search-type-buttons\">\n        <button :class=\"{ active: searchType === 'title' }\" @click=\"setSearchType('title')\">\n          Название\n        </button>\n        <button :class=\"{ active: searchType === 'kinopoisk' }\" @click=\"setSearchType('kinopoisk')\">\n          ID Кинопоиск\n        </button>\n        <button :class=\"{ active: searchType === 'shikimori' }\" @click=\"setSearchType('shikimori')\">\n          ID Shikimori\n        </button>\n        <button :class=\"{ active: searchType === 'imdb' }\" @click=\"setSearchType('imdb')\">\n          ID IMDB\n        </button>\n      </div>\n\n      <!-- Поиск -->\n      <div class=\"search-container\">\n        <div class=\"input-wrapper\">\n          <input\n            ref=\"searchInput\"\n            v-model=\"searchTerm\"\n            :placeholder=\"getPlaceholder()\"\n            class=\"search-input\"\n            :class=\"{ 'wrong-layout': showLayoutWarning }\"\n            :inputmode=\"searchType === 'title' ? 'text' : 'numeric'\"\n            @keydown.enter=\"search\"\n            @keydown.tab.prevent=\"handleTabKey\"\n            @input=\"handleInput\"\n          />\n          <div class=\"icons\">\n            <button v-if=\"searchTerm\" class=\"reset-button\" @click=\"resetSearch\">\n              <i class=\"fas fa-times\"></i>\n            </button>\n            <button class=\"search-button\" @click=\"search\">\n              <i class=\"fas fa-search\"></i>\n            </button>\n          </div>\n          <div v-if=\"showLayoutWarning\" class=\"layout-warning\" :class=\"{ 'show': showLayoutWarning }\">\n            <i class=\"fas fa-keyboard\"></i>\n            Возможно, вы используете неправильную раскладку. Нажмите Tab для переключения на {{ suggestedLayout }} раскладку\n          </div>\n        </div>\n      </div>\n\n      <!-- Контейнер для истории и результатов -->\n      <div class=\"content-container\">\n        <!-- История просмотра -->\n        <div v-if=\"!searchTerm && history.length > 0\">\n          <h2>\n            История просмотра\n            <span>\n              <DeleteButton @click=\"showModal = true\" />\n              <BaseModal\n                :is-open=\"showModal\"\n                message=\"Вы уверены, что хотите очистить историю?\"\n                @confirm=\"clearAllHistory\"\n                @close=\"showModal = false\"\n              />\n            </span>\n          </h2>\n          <MovieList\n            :movies-list=\"history\"\n            :is-history=\"true\"\n            :loading=\"loading\"\n            @item-deleted=\"handleItemDeleted\"\n          />\n        </div>\n        <ErrorMessage v-if=\"!searchTerm && errorMessage\" :message=\"errorMessage\" :code=\"errorCode\" />\n\n        <!-- Результаты поиска -->\n        <div v-if=\"searchPerformed\">\n          <h2>Результаты поиска</h2>\n          <MovieList :movies-list=\"movies\" :is-history=\"false\" :loading=\"loading\" />\n          <div v-if=\"movies.length === 0 && !loading && !errorMessage\" class=\"no-results\">\n            Ничего не найдено\n          </div>\n          <ErrorMessage v-if=\"errorMessage\" :message=\"errorMessage\" :code=\"errorCode\" />\n        </div>\n\n        <!-- Подсказка, когда ничего не введено в поиске -->\n        <div\n          v-if=\"searchTerm && !searchPerformed && !loading && !errorMessage\"\n          class=\"search-prompt\"\n        >\n          Нажмите кнопку \"Поиск\" или Enter для поиска\n        </div>\n      </div>\n    </div>\n    <FooterDonaters />\n  </div>\n</template>\n\n<script setup>\nimport { apiSearch, getKpIDfromIMDB, getKpIDfromSHIKI } from '@/api/movies'\nimport { handleApiError } from '@/constants'\nimport { getMyLists, delAllFromList } from '@/api/user'\nimport BaseModal from '@/components/BaseModal.vue'\nimport DeleteButton from '@/components/buttons/DeleteButton.vue'\nimport ErrorMessage from '@/components/ErrorMessage.vue'\nimport FooterDonaters from '@/components/FooterDonaters.vue'\nimport { MovieList } from '@/components/MovieList/'\nimport { useMainStore } from '@/store/main'\nimport { useAuthStore } from '@/store/auth'\nimport { USER_LIST_TYPES_ENUM } from '@/constants'\nimport { hasConsecutiveConsonants, suggestLayout, convertLayout } from '@/utils/keyboardLayout'\nimport debounce from 'lodash/debounce'\nimport { watchEffect, onMounted, ref, watch } from 'vue'\nimport { useRouter } from 'vue-router'\n\nconst mainStore = useMainStore()\nconst authStore = useAuthStore()\nconst router = useRouter()\n\nconst searchType = ref('title')\nconst searchTerm = ref('')\nconst movies = ref([])\nconst loading = ref(false)\nconst searchPerformed = ref(false)\nconst showModal = ref(false)\nconst errorMessage = ref('')\nconst errorCode = ref(null)\n\nconst history = ref([])\n\nconst showLayoutWarning = ref(false)\nconst suggestedLayout = ref('')\n\nwatchEffect(async () => {\n  loading.value = true\n  if (authStore.token) {\n    try {\n      history.value = await getMyLists(USER_LIST_TYPES_ENUM.HISTORY)\n      loading.value = false\n    } catch (error) {\n      const { message, code } = handleApiError(error)\n      errorMessage.value = message\n      errorCode.value = code\n      console.error('Ошибка загрузки истории:', error)\n      if (code === 401) {\n        authStore.logout()\n        await router.push('/login')\n        router.go(0)\n      }\n      loading.value = false\n    }\n  } else {\n    history.value = mainStore.history\n    loading.value = false\n  }\n})\n\nfunction handleItemDeleted(deletedItemId) {\n  history.value = history.value.filter((item) => item.kp_id !== deletedItemId)\n}\n\n// Установка типа поиска\nconst setSearchType = (type) => {\n  searchType.value = type\n  resetSearch()\n  showLayoutWarning.value = false\n}\n\nconst handleInput = (event) => {\n  if (searchType.value === 'title') {\n    searchTerm.value = event.target.value\n    showLayoutWarning.value = hasConsecutiveConsonants(searchTerm.value)\n    if (showLayoutWarning.value) {\n      suggestedLayout.value = suggestLayout(searchTerm.value)\n    }\n  } else {\n    searchTerm.value = event.target.value.replace(/\\D+/g, '')\n  }\n}\n\nconst handleTabKey = () => {\n  if (showLayoutWarning.value) {\n    searchTerm.value = convertLayout(searchTerm.value)\n    showLayoutWarning.value = false\n  }\n}\n\n// Получение placeholder для input\nconst getPlaceholder = () => {\n  return (\n    {\n      title: 'Введите название фильма',\n      kinopoisk: 'Пример: 301 (Матрица)',\n      shikimori: 'Пример: 28171 (Повар-боец Сома)',\n      imdb: 'Пример: 0198781 (Корпорация монстров)'\n    }[searchType.value] || 'Введите название фильма'\n  )\n}\n\n// Очистка поиска\nconst resetSearch = () => {\n  searchTerm.value = ''\n  movies.value = []\n  searchPerformed.value = false\n}\n\nconst search = () => {\n  debouncedPerformSearch.cancel()\n  if (searchTerm.value) {\n    performSearch()\n  } else {\n    alert('Введите запрос для поиска')\n  }\n}\n\nconst performSearch = async () => {\n  loading.value = true\n  searchPerformed.value = true\n  movies.value = []\n\n  try {\n    if (searchType.value === 'kinopoisk') {\n      if (!/^\\d+$/.test(searchTerm.value)) {\n        searchTerm.value = searchTerm.value.replace(/\\D/g, '')\n      }\n      router.push({ name: 'movie-info', params: { kp_id: searchTerm.value } })\n      return\n    }\n\n    if (searchType.value === 'imdb') {\n      if (!/^\\d+$/.test(searchTerm.value)) {\n        searchTerm.value = searchTerm.value.replace(/\\D/g, '')\n      }\n      const response = await getKpIDfromIMDB(searchTerm.value)\n      if (response.id_kp) {\n        router.push({ name: 'movie-info', params: { kp_id: `${response.id_kp}` } })\n      } else {\n        throw new Error('Не найдено')\n      }\n      return\n    }\n\n    if (searchType.value === 'shikimori') {\n      if (!/^\\d+$/.test(searchTerm.value)) {\n        searchTerm.value = searchTerm.value.replace(/\\D/g, '')\n      }\n      const response = await getKpIDfromSHIKI(searchTerm.value)\n      if (response.id_kp) {\n        router.push({ name: 'movie-info', params: { kp_id: `${response.id_kp}` } })\n      } else {\n        throw new Error('Не найдено')\n      }\n      return\n    }\n    if (searchType.value === 'title') {\n      const response = await apiSearch(searchTerm.value)\n      movies.value = response.map((movie) => ({\n        ...movie,\n        kp_id: movie.id.toString(),\n        rating_kp: movie.raw_data?.rating !== 'null' ? movie.raw_data?.rating : null,\n        type: movie.raw_data?.type\n      }))\n    }\n  } catch (error) {\n    const { message, code } = handleApiError(error)\n    errorMessage.value = message\n    errorCode.value = code\n    console.error('Ошибка при поиске:', error)\n  } finally {\n    loading.value = false\n  }\n}\n\nconst clearAllHistory = async () => {\n  loading.value = true\n  if (authStore.token) {\n    try {\n      await delAllFromList(USER_LIST_TYPES_ENUM.HISTORY)\n      history.value = []\n      loading.value = false\n      showModal.value = false\n    } catch (error) {\n      const { message, code } = handleApiError(error)\n      errorMessage.value = message\n      errorCode.value = code\n      console.error('Ошибка загрузки истории:', error)\n      if (code === 401) {\n        authStore.logout()\n        await router.push('/login')\n        router.go(0)\n      }\n      loading.value = false\n      showModal.value = false\n    }\n  } else {\n    mainStore.clearAllHistory()\n    loading.value = false\n    showModal.value = false\n  }\n}\n\nconst debouncedPerformSearch = debounce(() => {\n  if (searchTerm.value.length >= 2) {\n    performSearch()\n  } else if (searchTerm.value.length < 2) {\n    movies.value = []\n    searchPerformed.value = false\n  }\n}, 700)\n\nonMounted(() => {\n  const hash = window.location.hash\n  if (hash.startsWith('#search=')) {\n    const searchQuery = decodeURIComponent(hash.replace('#search=', ''))\n    searchTerm.value = searchQuery\n    performSearch()\n  } else if (hash.startsWith('#imdb=')) {\n    const imdbId = decodeURIComponent(hash.replace('#imdb=', ''))\n    setSearchType('imdb')\n    searchTerm.value = imdbId\n    performSearch()\n  } else if (hash.startsWith('#shiki')) {\n    const shikiId = decodeURIComponent(hash.replace('#shiki', ''))\n    setSearchType('shikimori')\n    searchTerm.value = shikiId\n    performSearch()\n  }\n})\n\n// Автопоиск с задержкой (только для поиска по названию)\nwatch(searchTerm, () => {\n  if (searchType.value !== 'title') {\n    return\n  }\n  debouncedPerformSearch()\n})\n</script>\n\n<style scoped>\n.wrapper {\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n}\n\n.mainpage {\n  flex: 1;\n  padding-top: 20px;\n  padding-bottom: 40px;\n}\n\n/* Общие стили */\n.search-type-buttons {\n  display: flex;\n  justify-content: center;\n  gap: 20px;\n  padding-top: 10px;\n  margin-bottom: 5px;\n  flex-wrap: wrap;\n}\n\n.search-type-buttons button {\n  padding: 5px 10px;\n  font-size: 16px;\n  border: none;\n  background: none;\n  color: #fff;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  position: relative;\n}\n\n.search-type-buttons button::after {\n  content: '';\n  position: absolute;\n  left: 0;\n  bottom: -2px;\n  width: 100%;\n  height: 2px;\n  background-color: transparent;\n  transition: background-color 0.3s ease;\n}\n\n.search-type-buttons button.active::after {\n  background-color: #ffffff;\n}\n\n.search-type-buttons button:hover {\n  color: #ffffff;\n}\n\n.search-container {\n  display: flex;\n  justify-content: center;\n  padding: 20px;\n}\n\n.input-wrapper {\n  position: relative;\n  width: 100%;\n  max-width: 800px;\n}\n\n.search-input {\n  box-sizing: border-box;\n  width: 100%;\n  padding: 10px;\n  font-size: 16px;\n  border: 1px solid #ccc;\n  border-radius: 10px;\n  background: rgba(30, 30, 30, 0.8);\n  color: #fff;\n  transition: border-color 0.3s ease;\n}\n\n.search-input.wrong-layout {\n  border-color: #ff8c00;\n  box-shadow: 0 0 5px rgba(255, 140, 0, 0.2);\n}\n\n.icons {\n  position: absolute;\n  right: 10px;\n  top: 50%;\n  transform: translateY(-50%);\n  display: flex;\n  gap: 8px;\n  align-items: center;\n}\n\n.reset-button,\n.search-button {\n  background: none;\n  border: none;\n  color: #fff;\n  cursor: pointer;\n  padding: 2px;\n  opacity: 0.7;\n  transition: opacity 0.2s ease;\n}\n\n.reset-button:hover,\n.search-button:hover {\n  opacity: 1;\n}\n\n.reset-button i,\n.search-button i {\n  font-size: 18px;\n  display: block;\n  width: 20px;\n  height: 20px;\n}\n\nh2 {\n  display: flex;\n  font-size: 20px;\n  margin-bottom: 20px;\n  justify-content: center;\n  align-items: center;\n  gap: 10px;\n}\n\n/* Сообщение \"Ничего не найдено\" */\n.no-results {\n  width: 100%;\n  text-align: center;\n  color: #fff;\n  font-size: 18px;\n  margin-top: 20px;\n}\n\n/* Подсказка для поиска */\n.search-prompt {\n  text-align: center;\n  color: #fff;\n  font-size: 18px;\n  margin-top: 20px;\n}\n\n.layout-warning {\n  position: absolute;\n  bottom: -40px;\n  left: 0;\n  right: 0;\n  text-align: center;\n  color: #ff8c00;\n  font-size: 14px;\n  background: rgba(255, 140, 0, 0.15);\n  padding: 8px 12px;\n  border-radius: 5px;\n  pointer-events: none;\n  border: 1px solid rgba(255, 140, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  opacity: 0;\n  transform: translateY(-10px);\n  transition: all 0.3s ease;\n  z-index: 1;\n  backdrop-filter: blur(5px);\n}\n\n.layout-warning.show {\n  opacity: 1;\n  transform: translateY(0);\n}\n\n.layout-warning i {\n  font-size: 16px;\n  color: #ff8c00;\n}\n\n.layout-warning {\n  color: #ff8c00;\n}\n\n@media (max-width: 600px) {\n  .mainpage {\n    padding-top: 0;\n    height: calc(100vh - 30px - 63px);\n  }\n\n  .search-container,\n  .search-type-buttons {\n    padding: 0;\n  }\n}\n</style>\n"],"names":["CACHE_KEY_DONATERS","donaters","ref","currentIndex","intervalId","currentDonater","computed","value","length","fetchDonaters","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","today","cached","_JSON$parse","date","data","dons","wrap","_context","prev","next","Date","toISOString","split","localStorage","getItem","JSON","parse","abrupt","t0","console","error","getDons","sent","map","line","trim","filter","setItem","stringify","t1","stop","apply","arguments","updateCurrentDonater","newIndex","Math","floor","random","onMounted","_callee2","_context2","startShowingDonaters","setInterval","onUnmounted","clearInterval","mainStore","useMainStore","authStore","useAuthStore","router","useRouter","searchType","searchTerm","movies","loading","searchPerformed","showModal","errorMessage","errorCode","history","showLayoutWarning","suggestedLayout","handleItemDeleted","deletedItemId","item","kp_id","watchEffect","_callee3","_handleApiError","message","code","_callee3$","_context3","token","getMyLists","USER_LIST_TYPES_ENUM","HISTORY","handleApiError","logout","push","go","setSearchType","type","resetSearch","handleInput","event","target","hasConsecutiveConsonants","suggestLayout","replace","handleTabKey","convertLayout","search","debouncedPerformSearch","cancel","performSearch","alert","_ref4","_callee4","response","_response","_response2","_handleApiError2","_context4","test","name","params","getKpIDfromIMDB","id_kp","Error","getKpIDfromSHIKI","apiSearch","movie","_movie$raw_data","_movie$raw_data2","_movie$raw_data3","_objectSpread","id","toString","rating_kp","raw_data","rating","finish","this","clearAllHistory","_ref5","_callee5","_handleApiError3","_context5","delAllFromList","debounce","hash","window","location","startsWith","searchQuery","decodeURIComponent","imdbId","shikiId","watch","title","kinopoisk","shikimori","imdb"],"mappings":"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"}