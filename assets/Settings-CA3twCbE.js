import{_ as j,b as n,d as i,e as s,m as b,v as oe,L as G,M as J,Q as ae,n as T,g as h,q as ne,al as ie,r as _,u as re,a9 as ue,am as de,c as v,l as ve,o as pe,an as y,s as d,f as m,w as c,t as A,ao as me}from"./index-DnKcxoJx.js";import{u as ce,a as ge,S as g}from"./trailer-DIH8X2l1.js";import{B as fe}from"./BaseModal-BQTIAiRH.js";const Ce={name:"ThemeSelector",setup(){const V=ie(),o=_("#ffffff");return{themeStore:V,customColorValue:o,selectColor:C=>{V.setAccentColor(C)},addCustomColor:()=>{V.addCustomColor(o.value)},removeCustomColor:C=>{V.removeCustomColor(C)}}}},ke={class:"theme-selector"},be={class:"color-picker-section"},ye={class:"color-picker-wrapper"},Ve={class:"theme-selector__colors"},Se=["title","onClick"],he={key:0,class:"material-icons"},Ue=["onClick"];function Ae(V,o,f,u,U,C){return i(),n("div",ke,[o[4]||(o[4]=s("div",{class:"theme-selector__header"},[s("i",{class:"material-icons"},"palette"),s("span",null,"Цвет акцента:")],-1)),s("div",be,[s("div",ye,[b(s("input",{type:"color","onUpdate:modelValue":o[0]||(o[0]=r=>u.customColorValue=r),class:"color-picker",onChange:o[1]||(o[1]=(...r)=>u.addCustomColor&&u.addCustomColor(...r))},null,544),[[oe,u.customColorValue]]),o[2]||(o[2]=s("span",{class:"color-picker-label"},"Добавить цвет",-1))])]),s("div",Ve,[(i(!0),n(G,null,J(u.themeStore.allColors,r=>(i(),n("button",{key:r.value,class:T(["color-option",{active:u.themeStore.accentColor===r.value}]),style:ae({backgroundColor:r.value}),title:r.name,onClick:H=>u.selectColor(r.value)},[u.themeStore.accentColor===r.value?(i(),n("i",he,"check")):h("",!0),r.isCustom?(i(),n("button",{key:1,class:"remove-color",onClick:ne(H=>u.removeCustomColor(r.value),["stop"]),title:"Удалить цвет"},o[3]||(o[3]=[s("i",{class:"material-icons"},"close",-1)]),8,Ue)):h("",!0)],14,Se))),128))])])}const _e=j(Ce,[["render",Ae],["__scopeId","data-v-7f4fe94e"]]),we={class:"settings-page"},Te={class:"settings-container"},He={class:"settings-group"},Ee={class:"radio-group"},Be={class:"radio"},Me={class:"radio"},Ie={class:"radio"},$e={class:"radio"},Fe={class:"settings-group"},Pe={class:"settings-group"},xe={class:"settings-group"},ze={class:"card-size-group"},De={class:"radio-group"},Ne={class:"radio"},Re={class:"radio"},Le={class:"radio"},qe={class:"settings-group"},Qe={class:"settings-group"},We={class:"settings-actions"},je={class:"settings-group"},Ge={class:"settings-group"},Je={class:"settings-group"},Ke={class:"settings-group"},Oe={class:"settings-group"},Xe={class:"api-info"},Ye={class:"api-item"},Ze={class:"api-url"},es={key:0,class:"api-item"},ss={key:1,class:"api-item"},ls={class:"endpoints-list"},ts={class:"server-item"},os={key:0,class:"fas fa-check endpoint-active"},as=["disabled"],ns={key:0,class:"fas fa-spinner fa-spin"},is={key:1,class:"fas fa-heartbeat"},rs=["onClick"],us={class:"endpoint-info"},ds={class:"endpoint-description"},vs={class:"endpoint-url"},ps={key:0,class:"fas fa-check endpoint-active"},ms=["onClick","disabled","title"],cs={key:0,class:"fas fa-spinner fa-spin"},gs={key:1,class:"fas fa-check"},fs={key:2,class:"fas fa-times"},Cs={key:3,class:"fas fa-heartbeat"},ks={class:"settings-group"},bs={__name:"Settings",setup(V){const o=re(),f=ue(),u=ce(),U=ge(),C=de(),r=_(!1),H=_("1.0.29_05_07_2025_13:40:30_UTC"),a=_({checking_all:!1}),K=()=>{o.clearAllHistory(),r.value=!1},k=v({get:()=>f.backgroundType,set:t=>f.updateBackgroundType(t)}),O=v(()=>k.value==="stars"||k.value==="disable");ve(O,t=>{t&&f.toggleBlur(!1)});const B=v({get:()=>u.isCentered,set:t=>u.updateCentering(t)}),M=v({get:()=>f.isCardBorder,set:t=>f.toggleCardBorder(t)}),I=v({get:()=>f.isCardHoverDisabled,set:t=>f.toggleCardHover(t)}),$=v({get:()=>o.isHistoryAllowed,set:t=>o.setHistoryAllowed(t)}),F=v({get:()=>U.areTrailersActive,set:t=>{t?U.activateTrailers():U.deactivateTrailers()}}),P=v({get:()=>o.isCtrlFEnabled,set:()=>o.toggleCtrlF()}),E=v({get:()=>u.showFavoriteTooltip,set:t=>u.setFavoriteTooltip(t)}),x=v({get:()=>o.isCommentsEnabled,set:t=>o.setCommentsEnabled(t)}),z=v({get:()=>o.isAutoShowComments,set:t=>o.setAutoShowComments(t)}),S=v({get:()=>o.cardSize,set:t=>o.updateCardSize(t)}),D=v({get:()=>o.isStreamerMode,set:t=>o.setStreamerMode(t)}),N=v({get:()=>o.rememberScrollPosition,set:t=>o.setRememberScrollPosition(t)}),X=()=>{f.resetBackground()},p=_({url:"",description:"",isCheckingHealth:!1,lastCheckedAt:null,availableEndpoints:[]}),w=()=>{const t=me();p.value={...t}},Y=async t=>{C.setUserSelectedApiUrl(t),w()},Z=async()=>{C.resetUserSelection();const t=C.availableEndpoints;t.length>0&&await C.selectWorkingEndpoint(t),w()},R=async t=>{a.value[t]||(a.value[t]={}),a.value[t].checking=!0,a.value[t].status=null;try{const e=await C.checkEndpointHealth(t);a.value[t].status=e?"healthy":"unhealthy",a.value[t].lastChecked=Date.now()}catch(e){a.value[t].status="unhealthy",console.error("Health check failed:",e)}finally{a.value[t].checking=!1}},ee=async()=>{a.value.checking_all=!0;const t=p.value.availableEndpoints.map(e=>R(e.url));await Promise.all(t),a.value.checking_all=!1},se=t=>{const e=a.value[t];return e?e.status==="healthy"?"health-success":e.status==="unhealthy"?"health-error":"":""},le=t=>{const e=a.value[t];return e?e.checking?"Проверка...":e.status==="healthy"?"Сервер доступен":e.status==="unhealthy"?"Сервер недоступен":"Проверить сервер":"Проверить сервер"};return pe(()=>{w();const t=setInterval(w,1e3);return()=>{clearInterval(t)}}),(t,e)=>(i(),n("div",we,[e[57]||(e[57]=s("h1",null,"Настройки",-1)),s("div",Te,[s("div",He,[e[25]||(e[25]=s("h2",null,"Фон",-1)),s("div",Ee,[s("label",Be,[b(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>k.value=l),type:"radio",value:"dynamic"},null,512),[[y,k.value]]),e[20]||(e[20]=s("span",{class:"radio-label"},"Динамический фон",-1))]),s("label",Me,[b(s("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>k.value=l),type:"radio",value:"stars"},null,512),[[y,k.value]]),e[21]||(e[21]=s("span",{class:"radio-label"},"Звездный фон",-1))]),s("label",Ie,[b(s("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>k.value=l),type:"radio",value:"lava-lamp"},null,512),[[y,k.value]]),e[22]||(e[22]=s("span",{class:"radio-label"},"Лава-лампа",-1))]),s("label",$e,[b(s("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>k.value=l),type:"radio",value:"disabled"},null,512),[[y,k.value]]),e[23]||(e[23]=s("span",{class:"radio-label"},"Отключить фон",-1))])]),s("div",{class:"settings-actions"},[s("button",{class:"reset-button",onClick:X},e[24]||(e[24]=[s("i",{class:"fa-solid fa-arrow-rotate-left"},null,-1),d(" Сбросить фон ")]))])]),s("div",Fe,[e[26]||(e[26]=s("h2",null,"Тема",-1)),m(_e)]),s("div",Pe,[e[30]||(e[30]=s("h2",null,"Плеер",-1)),m(g,{modelValue:B.value,"onUpdate:modelValue":e[4]||(e[4]=l=>B.value=l)},{default:c(()=>e[27]||(e[27]=[d("Автоцентрирование плеера")])),_:1},8,["modelValue"]),m(g,{modelValue:M.value,"onUpdate:modelValue":e[5]||(e[5]=l=>M.value=l)},{default:c(()=>e[28]||(e[28]=[d("Окантовка вокруг карточек")])),_:1},8,["modelValue"]),m(g,{modelValue:I.value,"onUpdate:modelValue":e[6]||(e[6]=l=>I.value=l)},{default:c(()=>e[29]||(e[29]=[d("Отключить подъем карточек при наведении")])),_:1},8,["modelValue"]),m(g,{modelValue:E.value,"onUpdate:modelValue":e[7]||(e[7]=l=>E.value=l)},{default:c(()=>[d("Стиль отображения кнопок избранного: "+A(E.value?"Тултип":"Все кнопки"),1)]),_:1},8,["modelValue"])]),s("div",xe,[e[35]||(e[35]=s("h2",null,"Карточки",-1)),s("div",ze,[e[34]||(e[34]=s("label",null,"Размер карточек:",-1)),s("div",De,[s("label",Ne,[b(s("input",{"onUpdate:modelValue":e[8]||(e[8]=l=>S.value=l),type:"radio",value:"small"},null,512),[[y,S.value]]),e[31]||(e[31]=s("span",{class:"radio-label"},"Маленький",-1))]),s("label",Re,[b(s("input",{"onUpdate:modelValue":e[9]||(e[9]=l=>S.value=l),type:"radio",value:"medium"},null,512),[[y,S.value]]),e[32]||(e[32]=s("span",{class:"radio-label"},"Средний",-1))]),s("label",Le,[b(s("input",{"onUpdate:modelValue":e[10]||(e[10]=l=>S.value=l),type:"radio",value:"large"},null,512),[[y,S.value]]),e[33]||(e[33]=s("span",{class:"radio-label"},"Большой",-1))])])])]),s("div",qe,[e[37]||(e[37]=s("h2",null,"Трейлеры",-1)),m(g,{modelValue:F.value,"onUpdate:modelValue":e[11]||(e[11]=l=>F.value=l)},{default:c(()=>e[36]||(e[36]=[d("Активировать трейлеры")])),_:1},8,["modelValue"])]),s("div",Qe,[e[40]||(e[40]=s("h2",null,"История",-1)),m(g,{modelValue:$.value,"onUpdate:modelValue":e[12]||(e[12]=l=>$.value=l)},{default:c(()=>e[38]||(e[38]=[d(" Сохранять историю просмотра")])),_:1},8,["modelValue"]),s("div",We,[s("button",{class:"reset-button",onClick:e[13]||(e[13]=l=>r.value=!0)},e[39]||(e[39]=[s("i",{class:"fa-solid fa-trash-can"},null,-1),d(" Очистить историю просмотра ")])),m(fe,{"is-open":r.value,message:"Вы уверены, что хотите очистить историю?",onConfirm:K,onClose:e[14]||(e[14]=l=>r.value=!1)},null,8,["is-open"])])]),s("div",je,[e[42]||(e[42]=s("h2",null,"Горячие клавиши",-1)),m(g,{modelValue:P.value,"onUpdate:modelValue":e[15]||(e[15]=l=>P.value=l)},{default:c(()=>e[41]||(e[41]=[d("Перехватывать Ctrl+F для поиска")])),_:1},8,["modelValue"])]),s("div",Ge,[e[44]||(e[44]=s("h2",null,"Навигация",-1)),m(g,{modelValue:N.value,"onUpdate:modelValue":e[16]||(e[16]=l=>N.value=l)},{default:c(()=>e[43]||(e[43]=[d("Запоминать позицию скролла")])),_:1},8,["modelValue"])]),s("div",Je,[e[47]||(e[47]=s("h2",null,"Комментарии",-1)),m(g,{modelValue:x.value,"onUpdate:modelValue":e[17]||(e[17]=l=>x.value=l)},{default:c(()=>e[45]||(e[45]=[d("Показывать блок комментариев")])),_:1},8,["modelValue"]),m(g,{modelValue:z.value,"onUpdate:modelValue":e[18]||(e[18]=l=>z.value=l)},{default:c(()=>e[46]||(e[46]=[d("Автоматически показывать комментарии")])),_:1},8,["modelValue"])]),s("div",Ke,[e[49]||(e[49]=s("h2",null,"Режим стримера",-1)),m(g,{modelValue:D.value,"onUpdate:modelValue":e[19]||(e[19]=l=>D.value=l)},{default:c(()=>e[48]||(e[48]=[d("Мигание кнопки таймингов для привлечения внимания")])),_:1},8,["modelValue"])]),s("div",Oe,[e[54]||(e[54]=s("h2",null,"API сервер",-1)),e[55]||(e[55]=s("p",null,"После смены сервера обновите страницу",-1)),s("div",Xe,[s("div",Ye,[e[50]||(e[50]=s("strong",null,"Текущий API:",-1)),s("span",Ze,A(p.value.url),1)]),p.value.isCheckingHealth?(i(),n("div",es,e[51]||(e[51]=[s("span",{class:"checking-health"},[s("i",{class:"fas fa-spinner fa-spin"}),d(" Проверка доступности серверов... ")],-1)]))):h("",!0),p.value.availableEndpoints.length>1?(i(),n("div",ss,[e[53]||(e[53]=s("strong",null,"Выбор сервера:",-1)),s("ul",ls,[s("li",ts,[s("div",{class:T(["server-option",{"selected-endpoint":!p.value.userSelectedApiUrl,"current-endpoint":!p.value.userSelectedApiUrl&&p.value.url}]),onClick:Z},[e[52]||(e[52]=s("div",{class:"endpoint-info"},[s("span",{class:"endpoint-description"},"Автоматический выбор"),s("span",{class:"endpoint-url"},"Система выберет лучший доступный сервер")],-1)),p.value.userSelectedApiUrl?h("",!0):(i(),n("i",os))],2),s("button",{class:"health-check-btn",onClick:ee,disabled:a.value.checking_all,title:"Проверить все серверы"},[a.value.checking_all?(i(),n("i",ns)):(i(),n("i",is))],8,as)]),(i(!0),n(G,null,J(p.value.availableEndpoints,l=>{var L,q,Q,W;return i(),n("li",{key:l.url,class:"server-item"},[s("div",{class:T(["server-option",{"selected-endpoint":p.value.userSelectedApiUrl===l.url,"current-endpoint":l.url===p.value.url}]),onClick:te=>Y(l.url)},[s("div",us,[s("span",ds,A(l.description),1),s("span",vs,A(l.url),1)]),p.value.userSelectedApiUrl===l.url?(i(),n("i",ps)):h("",!0)],10,rs),s("button",{class:T(["health-check-btn",se(l.url)]),onClick:te=>R(l.url),disabled:(L=a.value[l.url])==null?void 0:L.checking,title:le(l.url)},[(q=a.value[l.url])!=null&&q.checking?(i(),n("i",cs)):((Q=a.value[l.url])==null?void 0:Q.status)==="healthy"?(i(),n("i",gs)):((W=a.value[l.url])==null?void 0:W.status)==="unhealthy"?(i(),n("i",fs)):(i(),n("i",Cs))],10,ms)])}),128))])])):h("",!0)])]),s("div",ks,[e[56]||(e[56]=s("h2",null,"Версия сайта",-1)),d(" "+A(H.value),1)])])]))}},hs=j(bs,[["__scopeId","data-v-f389bc35"]]);export{hs as default};
