import{_ as He,u as Ut,c as R,r as f,o as rt,x as Ee,S as mn,b as a,g as m,d as l,e,p as ee,V as Lt,O as W,P as $,t as c,n as S,W as An,v as On,y as Te,l as ut,X as Le,B as Nt,Y as Fn,i as le,f as Y,w as jt,Z as Bt,m as N,$ as bt,k as Ye,q as fn,a0 as Hn,a1 as Vn,a2 as Dn,a3 as qn,a4 as on,a5 as zn,N as Wn,a6 as Kn,a as Pt,E as Gn,A as D,a7 as Ct,U as X,a8 as ln,a9 as an,aa as Yn,ab as Zn,ac as Qn,ad as rn,G as Oe,ae as Xn,af as Jn,ag as $n,ah as es,ai as ts,aj as ns,ak as ss,al as os}from"./index-Cb-UXR64.js";import{a as un,b as dn}from"./icon-imdb-logo-5qtstUwS.js";import{P as cn,M as ls,_ as yt,a as is}from"./MovieRating-Cza0RgqT.js";import{f as as,a as gn,p as Et,b as Fe}from"./dateUtils-BVcL52pq.js";import{M as vn}from"./MovieList-CDY1xXvN.js";import{S as rs}from"./SpinnerLoading--sAvD-u7.js";import{u as us}from"./player-B69bDTqm.js";import{N as kn}from"./ToastMessage-DDVOgzOv.js";import{u as ds}from"./trailer-bbGxpvEa.js";import{u as yn}from"./useCommentFormatting-CU-Zdt4p.js";import{B as cs}from"./BaseModal-Cq-ikD8d.js";const vs={key:0,class:"carousel-container"},ms={class:"carousel-wrapper"},fs=["onClick"],gs=["src","alt"],ks={class:"video-name"},ys={key:0,class:"video-player"},bs=["src"],hs={__name:"TrailerCarousel",props:{videos:{type:Array,required:!0},activeVideoIndex:{type:Number,default:null}},emits:["select"],setup(u,{emit:t}){const d=Ut(),s=R(()=>d.isMobile),w=u,b=t,v=f(w.activeVideoIndex),h=f(null),_=f(!1),C=f(!1),k=()=>{if(!h.value)return;const{scrollLeft:I,scrollWidth:E,clientWidth:P}=h.value;_.value=I>0,C.value=I<E-P-1},o=I=>{if(!h.value)return;const E=h.value.querySelector(".carousel-item");if(!E)return;const P=E.clientWidth+16;h.value.scrollBy({left:P*I,behavior:"smooth"})},p=I=>{v.value=I,b("select",w.videos[I])},j=()=>k(),g=f([]),T=async I=>{try{return(await fetch("https://img.youtube.com/vi/".concat(I,"/0.jpg"))).ok}catch(E){return!1}};return rt(async()=>{const I=w.videos.map(async P=>await T(P.videoId)?P:null),E=await Promise.all(I);g.value=E.filter(Boolean),k(),window.addEventListener("resize",j)}),Ee(()=>w.videos,async I=>{const E=I.map(async F=>await T(F.videoId)?F:null),P=await Promise.all(E);g.value=P.filter(Boolean)}),Ee(()=>w.activeVideoIndex,I=>{v.value=I}),mn(()=>{window.removeEventListener("resize",j)}),(I,E)=>g.value.length?(l(),a("div",vs,[E[4]||(E[4]=e("h2",null,"–¢—Ä–µ–π–ª–µ—Ä—ã (YouTube)",-1)),e("div",ms,[ee(e("button",{class:"scroll-button left",onClick:E[0]||(E[0]=P=>o(-1))},E[2]||(E[2]=[e("span",{class:"material-symbols-outlined"},"arrow_back_ios",-1)]),512),[[Lt,!s.value&&_.value]]),e("div",{ref_key:"carousel",ref:h,class:"carousel",onScroll:k},[(l(!0),a(W,null,$(g.value,(P,F)=>(l(),a("div",{key:F,class:"carousel-item",onClick:A=>p(F)},[e("img",{src:"https://img.youtube.com/vi/".concat(P.videoId,"/0.jpg"),alt:P.name},null,8,gs),e("div",ks,c(P.name),1)],8,fs))),128))],544),ee(e("button",{class:"scroll-button right",onClick:E[1]||(E[1]=P=>o(1))},E[3]||(E[3]=[e("span",{class:"material-symbols-outlined"},"arrow_forward_ios",-1)]),512),[[Lt,!s.value&&C.value]])]),v.value!==null?(l(),a("div",ys,[e("iframe",{src:u.videos[v.value].iframeUrl,frameborder:"0",allowfullscreen:""},null,8,bs)])):m("",!0)])):m("",!0)}},ps=He(hs,[["__scopeId","data-v-4a5806b3"]]),_s={name:"EmojiPicker",props:{isVisible:{type:Boolean,default:!1}},emits:["emoji-selected","mouse-enter","mouse-leave","close"],data(){return{activeCategory:"smileys",categories:[{name:"smileys",icon:"üòÄ",emojis:["üòÄ","üòÉ","üòÑ","üòÅ","üòÜ","üòÖ","üòÇ","ü§£","üòä","üòá","üôÇ","üôÉ","üòâ","üòå","üòç","ü•∞","üòò","üòó","üòô","üòö","üòã","üòõ","üòù","üòú","ü§™","ü§®","üßê","ü§ì","üòé","ü§©","ü•≥"]},{name:"emotions",icon:"üò¢",emojis:["üò•","üò¢","üò≠","üò§","üò†","üò°","ü§¨","ü§Ø","üò≥","ü•µ","ü•∂","üò±","üò®","üò∞","üò•","üòì","ü§ó","ü§î","ü§≠","ü§´","ü§•","üò∂","üòê","üòë","üò¨","üôÑ","üòØ","üò¶","üòß","üòÆ","üò≤"]},{name:"gestures",icon:"üëç",emojis:["üëç","üëé","üëå","ü§å","ü§è","‚úåÔ∏è","ü§û","ü§ü","ü§ò","ü§ô","üëà","üëâ","üëÜ","üñï","üëá","‚òùÔ∏è","üëè","üôå","üëê","ü§≤","ü§ù","üôè","‚úçÔ∏è","üí™","ü¶æ","ü¶ø","ü¶µ","ü¶∂","üëÇ","ü¶ª","üëÉ"]},{name:"hearts",icon:"‚ù§Ô∏è",emojis:["‚ù§Ô∏è","üß°","üíõ","üíö","üíô","üíú","ü§é","üñ§","ü§ç","üíî","‚ù£Ô∏è","üíï","üíû","üíì","üíó","üíñ","üíò","üíù","üíü","‚ô•Ô∏è","üíØ","üí¢","üí•","üí´","üí¶","üí®","üï≥Ô∏è","üí£","üí¨","üëÅÔ∏è‚Äçüó®Ô∏è","üó®Ô∏è"]},{name:"objects",icon:"üéâ",emojis:["üéâ","üéä","üéà","üéÅ","üéÄ","üéÇ","üç∞","üßÅ","üç≠","üç¨","üç´","üç©","üç™","üçï","üçî","üçü","üå≠","ü•™","üåÆ","üåØ","ü•ô","ü•ö","üç≥","ü•ò","üç≤","ü•ó","üçø","üßà","üßÄ","ü•®","ü•Ø"]}]}},computed:{currentEmojis(){const u=this.categories.find(t=>t.name===this.activeCategory);return u?u.emojis:[]}},methods:{selectEmoji(u){this.$emit("emoji-selected",u)}}},ws={class:"emoji-categories"},Cs=["onClick"],Es={class:"emoji-grid"},Ls=["onClick"];function Ms(u,t,d,s,w,b){return d.isVisible?(l(),a("div",{key:0,class:"emoji-picker",onMouseenter:t[1]||(t[1]=v=>u.$emit("mouse-enter")),onMouseleave:t[2]||(t[2]=v=>u.$emit("mouse-leave"))},[e("button",{class:"close-btn mobile-only",onClick:t[0]||(t[0]=v=>u.$emit("close"))},t[3]||(t[3]=[e("i",{class:"fas fa-times"},null,-1)])),e("div",ws,[(l(!0),a(W,null,$(w.categories,v=>(l(),a("button",{key:v.name,onClick:h=>w.activeCategory=v.name,class:S([{active:w.activeCategory===v.name},"category-btn"]),type:"button"},c(v.icon),11,Cs))),128))]),e("div",Es,[(l(!0),a(W,null,$(b.currentEmojis,v=>(l(),a("button",{key:v,onClick:h=>b.selectEmoji(v),class:"emoji-btn",type:"button"},c(v),9,Ls))),128))])],32)):m("",!0)}const At=He(_s,[["render",Ms],["__scopeId","data-v-209132f3"]]),Ss=async u=>{const t=await An();return await u(t)},Is=async u=>{const{data:t}=await Ss(d=>d.get("/search_emotes/".concat(u)));return t.emotes||[]},Ts={name:"ImagePicker",props:{isVisible:{type:Boolean,required:!0},currentUser:{type:Object,default:null}},emits:["image-selected","mouse-enter","mouse-leave","close","login-required"],setup(u,{emit:t}){const d=f(""),s=f([]),w=f(null),b=f(!1),h=On(async o=>{if(!u.currentUser){console.warn("–ü–æ–ø—ã—Ç–∫–∞ –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏");return}if(!o.trim()){s.value=[],b.value=!1;return}b.value=!0;try{s.value=await Is(o)}catch(p){console.error("Error searching images:",p),s.value=[]}finally{b.value=!1}},300),_=()=>{if(!u.currentUser){t("login-required");return}d.value.trim()&&(b.value=!0),h(d.value)},C=o=>{if(!u.currentUser){t("login-required");return}t("image-selected",o),t("close")},k=()=>{setTimeout(()=>{u.isVisible&&t("mouse-leave")},100)};return Ee(()=>u.isVisible,o=>{o&&(d.value="",s.value=[],b.value=!1)}),{searchQuery:d,images:s,searchInput:w,isLoading:b,handleSearch:_,selectImage:C,handleInputBlur:k}}},xs={key:0,class:"auth-required"},Rs={class:"auth-message"},Ps={key:1},js={class:"image-picker-header"},Bs={class:"image-content"},Us={key:0,class:"loading-spinner"},Ns={key:1,class:"image-grid"},As=["onClick"],Os=["src","alt"],Fs={key:2,class:"no-images"},Hs={key:3,class:"no-search"};function Vs(u,t,d,s,w,b){return d.isVisible?(l(),a("div",{key:0,class:"image-picker",onMouseenter:t[7]||(t[7]=v=>u.$emit("mouse-enter")),onMouseleave:t[8]||(t[8]=v=>u.$emit("mouse-leave")),onClick:t[9]||(t[9]=ut(()=>{},["stop"]))},[e("button",{class:"close-btn mobile-only",onClick:t[0]||(t[0]=v=>u.$emit("close"))},t[10]||(t[10]=[e("i",{class:"fas fa-times"},null,-1)])),d.currentUser?(l(),a("div",Ps,[e("div",js,[ee(e("input",{ref:"searchInput",type:"text","onUpdate:modelValue":t[2]||(t[2]=v=>s.searchQuery=v),placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–º–∞–π–ª–∞ 7tv",class:"image-search-input",onInput:t[3]||(t[3]=(...v)=>s.handleSearch&&s.handleSearch(...v)),onClick:t[4]||(t[4]=ut(()=>{},["stop"])),onFocus:t[5]||(t[5]=v=>u.$emit("mouse-enter")),onBlur:t[6]||(t[6]=(...v)=>s.handleInputBlur&&s.handleInputBlur(...v))},null,544),[[Te,s.searchQuery]])]),e("div",Bs,[s.isLoading?(l(),a("div",Us,t[14]||(t[14]=[e("div",{class:"spinner"},null,-1),e("p",null,"–ü–æ–∏—Å–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...",-1)]))):s.images.length>0?(l(),a("div",Ns,[(l(!0),a(W,null,$(s.images,(v,h)=>(l(),a("div",{key:h,class:"image-item",onClick:_=>s.selectImage(v)},[e("img",{src:v,alt:"Image "+(h+1)},null,8,Os)],8,As))),128))])):s.searchQuery.trim()?(l(),a("div",Fs,t[15]||(t[15]=[e("p",null,"–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤",-1)]))):(l(),a("div",Hs,t[16]||(t[16]=[e("p",null,"–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞",-1)])))])])):(l(),a("div",xs,[e("div",Rs,[t[11]||(t[11]=e("i",{class:"fas fa-lock"},null,-1)),t[12]||(t[12]=e("h3",null,"–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è",-1)),t[13]||(t[13]=e("p",null,"–î–ª—è –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç",-1)),e("button",{class:"login-button",onClick:t[1]||(t[1]=v=>u.$emit("login-required"))},"–í–æ–π—Ç–∏")])]))],32)):m("",!0)}const Ot=He(Ts,[["render",Vs],["__scopeId","data-v-f33eb3f6"]]),Ds={name:"LinkModal",props:{isVisible:{type:Boolean,default:!1},selectedText:{type:String,default:""}},emits:["close","submit"],setup(u,{emit:t}){const d=f(""),s=f(""),w=f(null),b=f(null),v=R(()=>/^https?:\/\/.+/.test(d.value.trim())&&s.value.trim()),h=()=>{t("close"),C()},_=()=>{v.value&&(t("submit",{url:d.value.trim(),title:s.value.trim()}),h())},C=()=>{d.value="",s.value=""},k=o=>{var p;o.key==="Enter"?(o.preventDefault(),v.value?_():o.target===w.value&&d.value.trim()&&((p=b.value)==null||p.focus())):o.key==="Escape"&&h()};return Ee(()=>u.isVisible,o=>{o&&(u.selectedText.trim()&&(s.value=u.selectedText.trim()),Le(()=>{var p;(p=w.value)==null||p.focus()}))}),{linkUrl:d,linkTitle:s,urlInput:w,titleInput:b,isValidLink:v,closeModal:h,submitLink:_,handleKeydown:k}}},qs={class:"link-modal-header"},zs={class:"link-modal-content"},Ws={class:"form-group"},Ks={class:"form-group"},Gs={class:"link-modal-footer"},Ys=["disabled"];function Zs(u,t,d,s,w,b){return d.isVisible?(l(),a("div",{key:0,class:"link-modal-overlay",onClick:t[8]||(t[8]=(...v)=>s.closeModal&&s.closeModal(...v))},[e("div",{class:"link-modal",onClick:t[7]||(t[7]=ut(()=>{},["stop"]))},[e("div",qs,[t[10]||(t[10]=e("h3",null,"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É",-1)),e("button",{class:"close-button",onClick:t[0]||(t[0]=(...v)=>s.closeModal&&s.closeModal(...v))},t[9]||(t[9]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",zs,[e("div",Ws,[t[11]||(t[11]=e("label",{for:"link-url"},"URL —Å—Å—ã–ª–∫–∏:",-1)),ee(e("input",{id:"link-url",ref:"urlInput","onUpdate:modelValue":t[1]||(t[1]=v=>s.linkUrl=v),type:"url",placeholder:"https://example.com",class:"link-input",onKeydown:t[2]||(t[2]=(...v)=>s.handleKeydown&&s.handleKeydown(...v))},null,544),[[Te,s.linkUrl]])]),e("div",Ks,[t[12]||(t[12]=e("label",{for:"link-title"},"–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏:",-1)),ee(e("input",{id:"link-title",ref:"titleInput","onUpdate:modelValue":t[3]||(t[3]=v=>s.linkTitle=v),type:"text",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è",class:"link-input",onKeydown:t[4]||(t[4]=(...v)=>s.handleKeydown&&s.handleKeydown(...v))},null,544),[[Te,s.linkTitle]])])]),e("div",Gs,[e("button",{class:"cancel-button",onClick:t[5]||(t[5]=(...v)=>s.closeModal&&s.closeModal(...v))},"–û—Ç–º–µ–Ω–∞"),e("button",{class:"submit-button",disabled:!s.isValidLink,onClick:t[6]||(t[6]=(...v)=>s.submitLink&&s.submitLink(...v))},"–î–æ–±–∞–≤–∏—Ç—å",8,Ys)])])])):m("",!0)}const Ft=He(Ds,[["render",Zs],["__scopeId","data-v-a794d83f"]]);function Qs(){const u=f(!1),t=f(!1),d=f(!1),s=()=>{t.value=!0},w=()=>{t.value=!1,setTimeout(()=>{!t.value&&!d.value&&(u.value=!1)},300)},b=()=>{d.value=!0,u.value=!0},v=()=>{d.value=!1,setTimeout(()=>{!t.value&&!d.value&&(u.value=!1)},300)},h=()=>{u.value=!1};return{showEmojiPicker:u,isEmojiHovered:t,isButtonHovered:d,handleEmojiMouseEnter:s,handleEmojiMouseLeave:w,handleButtonMouseEnter:b,handleButtonMouseLeave:v,closeEmojiPicker:h,insertEmoji:(k,o,p,j)=>{const g=o.value;if(g){const T=g.selectionStart,I=g.selectionEnd,E=p.value.substring(0,T),P=p.value.substring(I),F=E+k+P;j(F),Le(()=>{g.focus(),g.setSelectionRange(T+k.length,T+k.length),g.style.height&&(g.style.height="auto",g.style.height="".concat(Math.min(g.scrollHeight,200),"px"))})}else j(p.value+k)},handleGlobalClick:k=>{!k.target.closest(".emoji-picker")&&!k.target.closest(".emoji-button-inline")&&h()}}}function Xs(){const u=f(!1),t=f(!1),d=f(!1),s=()=>{t.value=!0},w=()=>{t.value=!1,setTimeout(()=>{!t.value&&!d.value&&(u.value=!1)},300)},b=()=>{d.value=!0,u.value=!0},v=()=>{d.value=!1,setTimeout(()=>{!t.value&&!d.value&&(u.value=!1)},300)},h=()=>{u.value=!1};return{showImagePicker:u,isImageHovered:t,isButtonHovered:d,handleImageMouseEnter:s,handleImageMouseLeave:w,handleImageButtonMouseEnter:b,handleButtonMouseLeave:v,closeImagePicker:h,insertImage:(k,o,p,j)=>{const g=o.value;if(g){const T=g.selectionStart,I=g.selectionEnd,E="[img]".concat(k,"[/img]"),P=p.value.slice(0,T)+E+p.value.slice(I);j(P),Le(()=>{g.focus(),g.setSelectionRange(T+E.length,T+E.length),g.style.height&&(g.style.height="auto",g.style.height="".concat(Math.min(g.scrollHeight,200),"px"))})}else{const T="[img]".concat(k,"[/img]");j(p.value+T)}},handleGlobalClick:k=>{!k.target.closest(".image-picker")&&!k.target.closest(".emoji-button-inline")&&h()}}}function Js(){const u=f(!1),t=f("");return{showLinkModal:u,selectedTextForLink:t,insertLink:(v,h)=>{const _=v.value;if(_){const C=_.selectionStart,k=_.selectionEnd,o=h.value.slice(C,k);t.value=o.trim()||""}u.value=!0},insertLinkFromModal:(v,h,_,C)=>{const k=h.value;if(k){const o=k.selectionStart,p=k.selectionEnd,j="[link=".concat(v.url,"]").concat(v.title,"[/link]"),g=_.value.slice(0,o)+j+_.value.slice(p);C(g),Le(()=>{k.focus(),k.setSelectionRange(o+j.length,o+j.length),k.style.height&&(k.style.height="auto",k.style.height="".concat(Math.min(k.scrollHeight,200),"px"))})}},closeLinkModal:()=>{u.value=!1},insertSpoiler:(v,h,_)=>{const C=v.value;if(C){const k=C.selectionStart,o=C.selectionEnd,p=h.value.slice(k,o);let j;p.trim()?j="[spoiler]".concat(p,"[/spoiler]"):j="[spoiler][/spoiler]";const g=h.value.slice(0,k)+j+h.value.slice(o);_(g),Le(()=>{if(C.focus(),p.trim())C.setSelectionRange(k+j.length,k+j.length);else{const T=k+9;C.setSelectionRange(T,T)}C.style.height&&(C.style.height="auto",C.style.height="".concat(Math.min(C.scrollHeight,200),"px"))})}}}}function $s(){return{autoResize:d=>{const s=d==null?void 0:d.target;s&&(s.style.height="auto",s.style.height="".concat(Math.min(s.scrollHeight,200),"px"))},autoResizeElement:d=>{d&&(d.style.height="auto",d.style.height="".concat(Math.min(d.scrollHeight,200),"px"))}}}function Ht(){const u=Qs(),t=Xs(),d=Js(),{autoResize:s,autoResizeElement:w}=$s(),b=()=>{u.isButtonHovered.value=!0,t.isButtonHovered.value=!0,u.showEmojiPicker.value=!0,t.showImagePicker.value=!1},v=()=>{u.isButtonHovered.value=!0,t.isButtonHovered.value=!0,t.showImagePicker.value=!0,u.showEmojiPicker.value=!1},h=()=>{u.isButtonHovered.value=!1,t.isButtonHovered.value=!1,setTimeout(()=>{!u.isEmojiHovered.value&&!t.isImageHovered.value&&!u.isButtonHovered.value&&!t.isButtonHovered.value&&(u.showEmojiPicker.value=!1,t.showImagePicker.value=!1)},300)},_=()=>{u.showEmojiPicker.value=!1,t.showImagePicker.value=!1},C=T=>{!T.target.closest(".emoji-picker")&&!T.target.closest(".image-picker")&&!T.target.closest(".emoji-button-inline")&&_()},k=(T,I,E,P)=>{u.insertEmoji(T,I,E,P)},o=(T,I,E,P)=>{t.insertImage(T,I,E,P)},p=(T,I,E)=>{d.insertLink(T,I,E)},j=(T,I,E,P)=>{d.insertLinkFromModal(T,I,E,P)},g=(T,I,E)=>{d.insertSpoiler(T,I,E)};return rt(()=>{document.addEventListener("click",C)}),mn(()=>{document.removeEventListener("click",C)}),{showEmojiPicker:u.showEmojiPicker,handleEmojiMouseEnter:u.handleEmojiMouseEnter,handleEmojiMouseLeave:u.handleEmojiMouseLeave,closeEmojiPicker:u.closeEmojiPicker,showImagePicker:t.showImagePicker,handleImageMouseEnter:t.handleImageMouseEnter,handleImageMouseLeave:t.handleImageMouseLeave,closeImagePicker:t.closeImagePicker,showLinkModal:d.showLinkModal,selectedTextForLink:d.selectedTextForLink,closeLinkModal:d.closeLinkModal,handleButtonMouseEnter:b,handleImageButtonMouseEnter:v,handleButtonMouseLeave:h,closeAllPickers:_,insertEmojiUniversal:k,insertImageUniversal:o,insertLinkUniversal:p,insertLinkFromModalUniversal:j,insertSpoilerUniversal:g,autoResize:s,autoResizeElement:w}}const eo=u=>u===1?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π":u>=2&&u<=4?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è":"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤",to=u=>{if(!u)return"?";const t=u.split(" ");return t.length===1?u.slice(0,2).toUpperCase():(t[0][0]+t[t.length-1][0]).toUpperCase()},no={name:"CommentItem",components:{EmojiPicker:At,ImagePicker:Ot,LinkModal:Ft},props:{comment:{type:Object,required:!0,default:()=>({username:"–ê–Ω–æ–Ω–∏–º",user_avatar:null,content:"",created_at:new Date().toISOString(),rating:0,replies:[]})},currentUser:{type:Object,required:!0,default:()=>({})},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate"],setup(u,{emit:t}){var st,ze;const d=Nt(),s=R(()=>{var y;return u.editingCommentId===((y=u.comment)==null?void 0:y.id)}),w=f(((st=u.comment)==null?void 0:st.content)||""),b=f(((ze=u.comment)==null?void 0:ze.user_rating)||0),v=f(null),h=f(null),{showEmojiPicker:_,showImagePicker:C,showLinkModal:k,selectedTextForLink:o,handleEmojiMouseEnter:p,handleEmojiMouseLeave:j,handleImageMouseEnter:g,handleImageMouseLeave:T,handleButtonMouseEnter:I,handleImageButtonMouseEnter:E,handleButtonMouseLeave:P,closeEmojiPicker:F,closeImagePicker:A,closeLinkModal:ie,insertEmojiUniversal:ce,insertImageUniversal:oe,insertLinkUniversal:U,insertLinkFromModalUniversal:ge,insertSpoilerUniversal:q,autoResize:z}=Ht(),{formatContentWithTruncation:ke}=yn();rt(async()=>{var y;if((y=u.comment)!=null&&y.user_avatar){const O=await Fn();v.value="".concat(O).concat(u.comment.user_avatar)}});const x=R(()=>{var y;return u.currentUser&&((y=u.comment)==null?void 0:y.user_id)===u.currentUser.id}),ve=R(()=>{var y;return u.currentUser&&((y=u.comment)==null?void 0:y.user_id)===u.currentUser.id||u.currentUser&&u.currentUser.is_admin===1}),H=R(()=>{var y,O,de;return((y=u.comment)==null?void 0:y.updated_at)&&((O=u.comment)==null?void 0:O.updated_at)!==((de=u.comment)==null?void 0:de.created_at)}),te=R(()=>{var y,O;return(y=u.comment)!=null&&y.is_deleted?!1:(((O=u.comment)==null?void 0:O.rating)||0)<=-3}),dt=R(()=>te.value),Ze=f(!1),ct=R(()=>{var y,O;return(y=u.comment)!=null&&y.is_deleted?null:(((O=u.comment)==null?void 0:O.rating)||0)<=-3?"lowRating":null}),Qe=()=>{var y,O;t("start-edit",(y=u.comment)==null?void 0:y.id),w.value=((O=u.comment)==null?void 0:O.content)||"",Le(()=>{h.value&&(h.value.focus(),z({target:h.value}))})},ue=()=>{var y;t("cancel-edit"),w.value=((y=u.comment)==null?void 0:y.content)||""},Ve=()=>{var y;w.value.trim()&&t("edit",(y=u.comment)==null?void 0:y.id,w.value.trim())},Xe=()=>{var y;confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π?")&&t("delete",(y=u.comment)==null?void 0:y.id)},Pe=y=>{var O,de;b.value===y?(b.value=0,t("rate",(O=u.comment)==null?void 0:O.id,y)):(b.value=y,t("rate",(de=u.comment)==null?void 0:de.id,y))},Je=y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),Ve())},$e=R(()=>{var y;return ke((y=u.comment)==null?void 0:y.content)}),et=()=>{console.log("Avatar load error, falling back to initials"),v.value=null,Le(()=>{const y=document.querySelector(".avatar-placeholder");y&&(y.style.display="flex")})},ae=()=>{d.push("/login")},De=y=>{ce(y,h,w,O=>{w.value=O})},Me=y=>{oe(y,h,w,O=>{w.value=O})},ye=()=>{q(h,w,y=>{w.value=y})},tt=()=>{U(h,w,y=>{w.value=y})},nt=y=>{ge(y,h,w,O=>{w.value=O})},qe=y=>{z(y)};return Ee(w,()=>{s.value&&h.value&&Le(()=>{qe({target:h.value})})}),{isEditing:s,editContent:w,userRating:b,isCommentOwner:x,canDeleteComment:ve,isCommentEdited:H,formatDate:gn,formatRelativeTime:as,startEdit:Qe,cancelEdit:ue,saveEdit:Ve,confirmDelete:Xe,rateComment:Pe,avatarUrl:v,getInitials:to,handleEditKeydown:Je,isCommentHidden:dt,showHiddenComment:Ze,hiddenCommentReason:ct,formattedContent:$e,autoResizeEdit:qe,editTextarea:h,showEmojiPicker:_,showImagePicker:C,insertEmojiEdit:De,insertImageEdit:Me,insertSpoilerEdit:ye,insertLinkEdit:tt,handleEmojiMouseEnter:p,handleEmojiMouseLeave:j,handleImageMouseEnter:g,handleImageMouseLeave:T,closeEmojiPicker:F,closeImagePicker:A,handleButtonMouseEnter:I,handleButtonMouseLeave:P,handleImageButtonMouseEnter:E,handleAvatarError:et,openLogin:ae,showLinkModal:k,selectedTextForLink:o,insertLinkFromModal:nt,closeLinkModal:ie}}},so=["data-comment-id"],oo={class:"comment-header"},lo={class:"user-info"},io={class:"user-avatar"},ao=["src","alt"],ro={class:"user-details"},uo={class:"username"},co={key:0,class:"user-rating"},vo=["title"],mo=["title"],fo={class:"comment-content"},go={key:0,class:"hidden-comment-warning"},ko={key:1},yo={key:0,class:"deleted-comment"},bo={key:1},ho={key:0,class:"edit-form"},po={class:"edit-textarea-container"},_o={class:"edit-footer"},wo={class:"edit-actions"},Co=["disabled"],Eo={class:"character-counter-container"},Lo={key:1,class:"comment-text-container"},Mo=["innerHTML"],So={class:"comment-footer"},Io={class:"comment-actions"},To={class:"rating-buttons"},xo={class:"action-buttons"};function Ro(u,t,d,s,w,b){var k,o,p,j,g,T,I,E,P,F,A,ie,ce,oe,U,ge,q,z,ke;const v=le("router-link"),h=le("EmojiPicker"),_=le("ImagePicker"),C=le("LinkModal");return l(),a("div",{class:"comment-item","data-comment-id":(k=d.comment)==null?void 0:k.id},[e("div",oo,[e("div",lo,[Y(v,{to:{path:"/lists/".concat((o=d.comment)==null?void 0:o.user_id)},target:"_blank",rel:"noopener noreferrer",class:"user-avatar-link"},{default:jt(()=>{var x,ve;return[e("div",io,[s.avatarUrl?(l(),a("img",{key:0,src:s.avatarUrl,alt:((x=d.comment)==null?void 0:x.username)||"–ê–Ω–æ–Ω–∏–º",onError:t[0]||(t[0]=(...H)=>s.handleAvatarError&&s.handleAvatarError(...H)),onerror:"this.onerror=null; this.style.display='none'; this.nextElementSibling.style.display='flex';"},null,40,ao)):(l(),a("div",{key:1,class:"avatar-placeholder",style:Bt({display:s.avatarUrl?"none":"flex"})},c(s.getInitials(((ve=d.comment)==null?void 0:ve.username)||"–ê–Ω–æ–Ω–∏–º")),5))])]}),_:1},8,["to"]),e("div",ro,[Y(v,{to:{path:"/lists/".concat((p=d.comment)==null?void 0:p.user_id)},target:"_blank",rel:"noopener noreferrer",class:"username-link"},{default:jt(()=>{var x;return[e("span",uo,c(((x=d.comment)==null?void 0:x.username)||"–ê–Ω–æ–Ω–∏–º"),1)]}),_:1},8,["to"]),(j=d.comment)!=null&&j.user_movie_rating?(l(),a("span",co,[t[18]||(t[18]=e("i",{class:"fas fa-star"},null,-1)),N(" "+c(d.comment.user_movie_rating),1)])):m("",!0),e("span",{class:"date",title:s.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(s.formatDate((g=d.comment)==null?void 0:g.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(s.formatDate((T=d.comment)==null?void 0:T.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(s.formatDate((I=d.comment)==null?void 0:I.created_at))},[N(c(s.formatRelativeTime((E=d.comment)==null?void 0:E.created_at))+" ",1),s.isCommentEdited?(l(),a("i",{key:0,class:"fas fa-pencil-alt edit-icon",title:s.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(s.formatDate((P=d.comment)==null?void 0:P.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(s.formatDate((F=d.comment)==null?void 0:F.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(s.formatDate((A=d.comment)==null?void 0:A.created_at))},null,8,mo)):m("",!0)],8,vo)])])]),e("div",fo,[!((ie=d.comment)!=null&&ie.is_deleted)&&s.isCommentHidden&&!s.showHiddenComment?(l(),a("div",go,[s.hiddenCommentReason==="lowRating"?(l(),a("p",{key:0,class:"warning-text",onClick:t[1]||(t[1]=x=>s.showHiddenComment=!0)},t[19]||(t[19]=[e("i",{class:"fas fa-eye-slash"},null,-1),N(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–∫—Ä—ã—Ç –∏–∑-–∑–∞ –Ω–∏–∑–∫–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å. ")]))):m("",!0)])):(l(),a("div",ko,[(ce=d.comment)!=null&&ce.is_deleted?(l(),a("div",yo,t[20]||(t[20]=[e("p",{class:"deleted-message"},[e("i",{class:"fas fa-trash"}),N(" –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —É–¥–∞–ª—ë–Ω ")],-1)]))):(l(),a("div",bo,[s.isEditing?(l(),a("div",ho,[e("div",po,[ee(e("textarea",{ref:"editTextarea","onUpdate:modelValue":t[2]||(t[2]=x=>s.editContent=x),class:"edit-textarea",rows:"3",maxlength:"1500",onKeydown:t[3]||(t[3]=(...x)=>s.handleEditKeydown&&s.handleEditKeydown(...x)),onInput:t[4]||(t[4]=(...x)=>s.autoResizeEdit&&s.autoResizeEdit(...x))},null,544),[[Te,s.editContent]])]),e("div",_o,[e("div",wo,[e("button",{onClick:t[5]||(t[5]=(...x)=>s.cancelEdit&&s.cancelEdit(...x)),class:"cancel-button"},"–û—Ç–º–µ–Ω–∞"),e("button",{onClick:t[6]||(t[6]=(...x)=>s.saveEdit&&s.saveEdit(...x)),class:"save-button",disabled:!s.editContent.trim()||s.editContent.length>1500}," –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ",8,Co)]),e("div",Eo,[e("div",{class:S(["character-counter-inline",{"near-limit":s.editContent.length>1400,"at-limit":s.editContent.length>=1500}])},c(s.editContent.length)+"/1500 ",3),e("button",{type:"button",class:S(["emoji-button-inline",{active:s.showEmojiPicker}]),onMouseenter:t[7]||(t[7]=(...x)=>s.handleButtonMouseEnter&&s.handleButtonMouseEnter(...x)),onMouseleave:t[8]||(t[8]=(...x)=>s.handleButtonMouseLeave&&s.handleButtonMouseLeave(...x))}," üòä ",34),e("button",{type:"button",class:S(["emoji-button-inline",{active:s.showImagePicker}]),onMouseenter:t[9]||(t[9]=(...x)=>s.handleImageButtonMouseEnter&&s.handleImageButtonMouseEnter(...x)),onMouseleave:t[10]||(t[10]=(...x)=>s.handleButtonMouseLeave&&s.handleButtonMouseLeave(...x))},t[21]||(t[21]=[bt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-f1c85dfc><g id="logo" data-v-f1c85dfc><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-f1c85dfc></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-f1c85dfc></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-f1c85dfc></path></g></svg>',1)]),34),e("button",{type:"button",class:"emoji-button-inline spoiler-button",onClick:t[11]||(t[11]=(...x)=>s.insertSpoilerEdit&&s.insertSpoilerEdit(...x)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},t[22]||(t[22]=[e("i",{class:"fas fa-eye-slash"},null,-1)])),e("button",{type:"button",class:"emoji-button-inline link-button",onClick:t[12]||(t[12]=(...x)=>s.insertLinkEdit&&s.insertLinkEdit(...x)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},t[23]||(t[23]=[e("i",{class:"fas fa-link"},null,-1)])),Y(h,{"is-visible":s.showEmojiPicker,onEmojiSelected:s.insertEmojiEdit,onMouseEnter:s.handleEmojiMouseEnter,onMouseLeave:s.handleEmojiMouseLeave,onClose:s.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),Y(_,{"is-visible":s.showImagePicker,"current-user":d.currentUser,onImageSelected:s.insertImageEdit,onMouseEnter:s.handleImageMouseEnter,onMouseLeave:s.handleImageMouseLeave,onClose:s.closeImagePicker,onLoginRequired:s.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),Y(C,{"is-visible":s.showLinkModal,"selected-text":s.selectedTextForLink,onClose:s.closeLinkModal,onSubmit:s.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):(l(),a("div",Lo,[e("p",{class:"comment-text",innerHTML:s.formattedContent},null,8,Mo)]))]))]))]),e("div",So,[e("div",Io,[e("div",To,[!s.isCommentOwner&&!((oe=d.comment)!=null&&oe.is_deleted)?(l(),a("button",{key:0,onClick:t[13]||(t[13]=x=>s.rateComment(1)),class:S(["rating-button",{"rated-up":s.userRating===1}])},t[24]||(t[24]=[e("i",{class:"fas fa-thumbs-up"},null,-1)]),2)):m("",!0),e("span",{class:S(["rating-count",{"rating-positive":s.userRating===1,"rating-negative":s.userRating===-1}])},c(((U=d.comment)==null?void 0:U.rating)||0),3),!s.isCommentOwner&&!((ge=d.comment)!=null&&ge.is_deleted)?(l(),a("button",{key:1,onClick:t[14]||(t[14]=x=>s.rateComment(-1)),class:S(["rating-button",{"rated-down":s.userRating===-1}])},t[25]||(t[25]=[e("i",{class:"fas fa-thumbs-down"},null,-1)]),2)):m("",!0)]),e("div",xo,[!d.currentUser||d.currentUser.allow_comments===1?(l(),a("button",{key:0,onClick:t[15]||(t[15]=x=>u.$emit("reply",d.comment)),class:"action-button reply-button"},t[26]||(t[26]=[e("i",{class:"fas fa-reply"},null,-1)]))):m("",!0),s.isCommentOwner&&!((q=d.comment)!=null&&q.is_deleted)&&!s.isEditing&&((z=d.currentUser)==null?void 0:z.allow_comments)===1?(l(),a("button",{key:1,onClick:t[16]||(t[16]=(...x)=>s.startEdit&&s.startEdit(...x)),class:"action-button edit-button"},t[27]||(t[27]=[e("i",{class:"fas fa-edit"},null,-1)]))):m("",!0),s.canDeleteComment&&!((ke=d.comment)!=null&&ke.is_deleted)?(l(),a("button",{key:2,onClick:t[17]||(t[17]=(...x)=>s.confirmDelete&&s.confirmDelete(...x)),class:"action-button delete-button"},t[28]||(t[28]=[e("i",{class:"fas fa-trash"},null,-1)]))):m("",!0)])])])],8,so)}const Po=He(no,[["render",Ro],["__scopeId","data-v-f1c85dfc"]]),jo={name:"CommentThread",components:{CommentItem:Po,EmojiPicker:At,ImagePicker:Ot,LinkModal:Ft},props:{comment:{type:Object,required:!0},currentUser:{type:Object,required:!0},replyTo:{type:Object,default:null},replyContent:{type:String,default:""},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate","submit-reply","cancel-reply","update-reply-content","reply-keydown"],setup(u,{emit:t}){const d=f(null),s=f(!0),{showEmojiPicker:w,showImagePicker:b,showLinkModal:v,selectedTextForLink:h,handleEmojiMouseEnter:_,handleEmojiMouseLeave:C,handleImageMouseEnter:k,handleImageMouseLeave:o,handleButtonMouseEnter:p,handleImageButtonMouseEnter:j,handleButtonMouseLeave:g,closeEmojiPicker:T,closeImagePicker:I,closeLinkModal:E,insertEmojiUniversal:P,insertImageUniversal:F,insertLinkUniversal:A,insertLinkFromModalUniversal:ie,insertSpoilerUniversal:ce}=Ht(),oe=H=>{t("update-reply-content",H.target.value);const te=H.target;te&&(te.style.height="auto",te.style.height="".concat(Math.min(te.scrollHeight,200),"px"))},U={get value(){return u.replyContent},set value(H){t("update-reply-content",H)}};return{replyTextarea:d,showEmojiPicker:w,showImagePicker:b,isCollapsed:s,insertEmoji:H=>{P(H,d,U,te=>{t("update-reply-content",te)})},insertImage:H=>{F(H,d,U,te=>{t("update-reply-content",te)})},insertSpoiler:()=>{ce(d,U,H=>{t("update-reply-content",H)})},handleEmojiMouseEnter:_,handleEmojiMouseLeave:C,handleImageMouseEnter:k,handleImageMouseLeave:o,handleButtonMouseEnter:p,handleButtonMouseLeave:g,closeEmojiPicker:T,closeImagePicker:I,handleImageButtonMouseEnter:j,handleReplyInput:oe,toggleCollapsed:()=>{s.value=!s.value},showLinkModal:v,selectedTextForLink:h,insertLink:()=>{A(d,U,H=>{t("update-reply-content",H)})},closeLinkModal:E,insertLinkFromModal:H=>{ie(H,d,U,te=>{t("update-reply-content",te)})}}},computed:{canReply(){return this.currentUser?this.currentUser.allow_comments===1:!0},getReplyPlaceholder(){return this.currentUser?this.currentUser.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç..."},formattedContent(){const{formatContent:u}=yn();return u(this.comment.content)}}},Bo={class:"comment-thread"},Uo={key:0,class:"reply-form"},No={class:"textarea-container"},Ao=["value","placeholder","disabled"],Oo={class:"reply-footer"},Fo={class:"reply-actions"},Ho=["disabled"],Vo={class:"character-counter-container"},Do=["disabled"],qo={key:1,class:"replies-container"},zo=["title"],Wo={class:"replies-count"},Ko=["title"],Go={key:0,class:"replies-content"};function Yo(u,t,d,s,w,b){const v=le("CommentItem"),h=le("EmojiPicker"),_=le("ImagePicker"),C=le("LinkModal"),k=le("CommentThread",!0);return l(),a("div",Bo,[Y(v,{comment:d.comment,"current-user":d.currentUser,"editing-comment-id":d.editingCommentId,onReply:t[0]||(t[0]=o=>u.$emit("reply",o)),onStartEdit:t[1]||(t[1]=o=>u.$emit("start-edit",o)),onCancelEdit:t[2]||(t[2]=o=>u.$emit("cancel-edit")),onEdit:t[3]||(t[3]=(o,p)=>u.$emit("edit",o,p)),onDelete:t[4]||(t[4]=o=>u.$emit("delete",o)),onRate:t[5]||(t[5]=(o,p)=>u.$emit("rate",o,p))},null,8,["comment","current-user","editing-comment-id"]),d.replyTo&&d.replyTo.id===d.comment.id?(l(),a("div",Uo,[e("div",No,[e("textarea",{ref:"replyTextarea",class:"comment-textarea",value:d.replyContent,placeholder:b.getReplyPlaceholder,disabled:d.currentUser&&d.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:t[6]||(t[6]=(...o)=>s.handleReplyInput&&s.handleReplyInput(...o)),onKeydown:t[7]||(t[7]=o=>u.$emit("reply-keydown",o))},null,40,Ao)]),e("div",Oo,[e("div",Fo,[e("button",{class:"cancel-reply",onClick:t[8]||(t[8]=o=>u.$emit("cancel-reply"))},"–û—Ç–º–µ–Ω–∞"),e("button",{class:"submit-button",disabled:!d.replyContent.trim()||d.replyContent.length>1500||d.currentUser&&d.currentUser.allow_comments!==1,onClick:t[9]||(t[9]=o=>u.$emit("submit-reply"))}," –û—Ç–≤–µ—Ç–∏—Ç—å ",8,Ho)]),e("div",Vo,[e("div",{class:S(["character-counter-inline",{"near-limit":d.replyContent.length>1400,"at-limit":d.replyContent.length>=1500}])},c(d.replyContent.length)+"/1500 ",3),e("button",{type:"button",class:S(["emoji-button-inline",{active:s.showEmojiPicker}]),onMouseenter:t[10]||(t[10]=(...o)=>s.handleButtonMouseEnter&&s.handleButtonMouseEnter(...o)),onMouseleave:t[11]||(t[11]=(...o)=>s.handleButtonMouseLeave&&s.handleButtonMouseLeave(...o))}," üòä ",34),e("button",{type:"button",class:S(["emoji-button-inline",{active:s.showImagePicker}]),onMouseenter:t[12]||(t[12]=(...o)=>s.handleImageButtonMouseEnter&&s.handleImageButtonMouseEnter(...o)),onMouseleave:t[13]||(t[13]=(...o)=>s.handleButtonMouseLeave&&s.handleButtonMouseLeave(...o))},t[29]||(t[29]=[bt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-6c0fc347><g id="logo" data-v-6c0fc347><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-6c0fc347></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-6c0fc347></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-6c0fc347></path></g></svg>',1)]),34),e("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:d.currentUser&&d.currentUser.allow_comments!==1,onClick:t[14]||(t[14]=(...o)=>s.insertSpoiler&&s.insertSpoiler(...o)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},t[30]||(t[30]=[e("i",{class:"fas fa-eye-slash"},null,-1)]),8,Do),e("button",{type:"button",class:"emoji-button-inline link-button",onClick:t[15]||(t[15]=(...o)=>s.insertLink&&s.insertLink(...o)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},t[31]||(t[31]=[e("i",{class:"fas fa-link"},null,-1)])),Y(h,{"is-visible":s.showEmojiPicker,onEmojiSelected:s.insertEmoji,onMouseEnter:s.handleEmojiMouseEnter,onMouseLeave:s.handleEmojiMouseLeave,onClose:s.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),Y(_,{"is-visible":s.showImagePicker,"current-user":d.currentUser,onImageSelected:s.insertImage,onMouseEnter:s.handleImageMouseEnter,onMouseLeave:s.handleImageMouseLeave,onClose:s.closeImagePicker,onLoginRequired:t[16]||(t[16]=()=>u.$router.push("/login"))},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose"]),Y(C,{"is-visible":s.showLinkModal,"selected-text":s.selectedTextForLink,onClose:s.closeLinkModal,onSubmit:s.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):m("",!0),d.comment.replies&&d.comment.replies.length>0?(l(),a("div",qo,[e("button",{class:"collapse-toggle",title:s.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:t[17]||(t[17]=(...o)=>s.toggleCollapsed&&s.toggleCollapsed(...o))},[e("span",{class:S(["collapse-icon",{expanded:!s.isCollapsed}])},t[32]||(t[32]=[e("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},[e("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1)]),2),e("span",Wo,c(d.comment.replies.length)+" "+c(d.comment.replies.length===1?"–æ—Ç–≤–µ—Ç":"–æ—Ç–≤–µ—Ç–æ–≤"),1)],8,zo),e("div",{class:"vertical-line-clickable",title:s.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:t[18]||(t[18]=(...o)=>s.toggleCollapsed&&s.toggleCollapsed(...o))},[e("div",{class:S(["vertical-line-visual",{collapsed:s.isCollapsed}])},null,2)],8,Ko),s.isCollapsed?m("",!0):(l(),a("div",Go,[(l(!0),a(W,null,$(d.comment.replies,o=>(l(),Ye(k,{key:o.id,comment:o,"current-user":d.currentUser,"reply-to":d.replyTo,"reply-content":d.replyContent,"editing-comment-id":d.editingCommentId,onReply:t[19]||(t[19]=p=>u.$emit("reply",p)),onStartEdit:t[20]||(t[20]=p=>u.$emit("start-edit",p)),onCancelEdit:t[21]||(t[21]=p=>u.$emit("cancel-edit")),onEdit:t[22]||(t[22]=(p,j)=>u.$emit("edit",p,j)),onDelete:t[23]||(t[23]=p=>u.$emit("delete",p)),onRate:t[24]||(t[24]=(p,j)=>u.$emit("rate",p,j)),onSubmitReply:t[25]||(t[25]=p=>u.$emit("submit-reply")),onCancelReply:t[26]||(t[26]=p=>u.$emit("cancel-reply")),onUpdateReplyContent:t[27]||(t[27]=p=>u.$emit("update-reply-content",p)),onReplyKeydown:t[28]||(t[28]=p=>u.$emit("reply-keydown",p))},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id"]))),128))]))])):m("",!0)])}const Zo=He(jo,[["render",Yo],["__scopeId","data-v-6c0fc347"]]),Qo={name:"Comments",components:{CommentThread:Zo,Notification:kn,EmojiPicker:At,ImagePicker:Ot,LinkModal:Ft},props:{movieId:{type:[String,Number],required:!0}},setup(u){const t=fn(),d=Nt(),s=Ut(),w=f([]),b=f(""),v=f(null),h=f(""),_=f(null),C=f(t.user),k=f(null),o=f(null),p=f(s.isAutoShowComments),j=f(!1),g=f(3),T=f(s.commentsSortBy),I=f(T.value==="date"?"asc":"desc"),{showEmojiPicker:E,showImagePicker:P,showLinkModal:F,selectedTextForLink:A,handleEmojiMouseEnter:ie,handleEmojiMouseLeave:ce,handleImageMouseEnter:oe,handleImageMouseLeave:U,handleButtonMouseEnter:ge,handleImageButtonMouseEnter:q,handleButtonMouseLeave:z,closeEmojiPicker:ke,closeImagePicker:x,closeLinkModal:ve,insertEmojiUniversal:H,insertImageUniversal:te,insertLinkUniversal:dt,insertLinkFromModalUniversal:Ze,insertSpoilerUniversal:ct,autoResize:Qe}=Ht(),ue=R(()=>{const L=(B=null)=>{const K=w.value.filter(V=>V.parent_id===B).filter(V=>!V.is_deleted||V.replies&&V.replies.length>0);let Z;return B===null?Z=K.sort((V,re)=>{if(T.value==="rating"){const je=V.rating||0,Be=re.rating||0;return je!==Be?I.value==="asc"?je-Be:Be-je:V.id-re.id}return I.value==="asc"?V.id-re.id:re.id-V.id}):Z=K.sort((V,re)=>V.id-re.id),Z.map(V=>({...V,replies:L(V.id)}))};return L()}),Ve=R(()=>{const L=B=>B.reduce((K,Z)=>K+1+L(Z.replies||[]),0);return L(ue.value)}),Xe=R(()=>ue.value.slice(0,g.value)),Pe=R(()=>ue.value.length>g.value),Je=R(()=>ue.value.length-g.value),$e=()=>{g.value=ue.value.length},et=L=>{T.value===L?I.value=I.value==="asc"?"desc":"asc":(T.value=L,I.value=L==="date"?"asc":"desc",s.setCommentsSortBy(L))},ae=async()=>{try{const L=await Hn(u.movieId);w.value=L}catch(L){console.error("Failed to load comments:",L),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.")}},De=async()=>{if(j.value)return;if(!t.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:y});return}if(C.value&&C.value.allow_comments!==1){k.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!b.value.replace(/\[spoiler\]\s*\[\/spoiler\]/g,"").replace(/\[img\]\s*\[\/img\]/g,"").replace(/\[link=[^\]]+\]\s*\[\/link\]/g,"").trim()){k.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º");return}if(b.value.length>1500){k.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await on(u.movieId,b.value.trim()),b.value="",await ae(),p.value=!0,Le(()=>{o.value&&(o.value.focus(),o.value.style.height="auto"),setTimeout(()=>{const B=document.querySelectorAll(".comment-item[data-comment-id]");if(B.length>0){const K=Array.from(B).map(Z=>parseInt(Z.getAttribute("data-comment-id"))).filter(Z=>!isNaN(Z));if(K.length>0){const Z=Math.max(...K),V=document.querySelector('[data-comment-id="'.concat(Z,'"]'));V&&V.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}},300)})}catch(B){console.error("Failed to create comment:",B),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},Me=L=>{if(!t.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:y});return}_.value=null,v.value=L,h.value="",Le(()=>{const B=document.querySelector(".reply-form");B&&B.scrollIntoView({behavior:"smooth",block:"center"})})},ye=async()=>{if(!t.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:y});return}if(C.value&&C.value.allow_comments!==1){k.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!(!h.value.trim()||!v.value)){if(h.value.length>1500){k.value.showNotification("–û—Ç–≤–µ—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await on(u.movieId,h.value.trim(),v.value.id);const L=v.value.id;await ae(),h.value="",v.value=null,Le(()=>{setTimeout(()=>{const B=document.querySelector('[data-comment-id="'.concat(L,'"]'));if(B){const K=B.querySelector(".replies-content");if(K){const Z=K.querySelectorAll(".comment-item[data-comment-id]");if(Z.length>0){const V=Array.from(Z).map(re=>parseInt(re.getAttribute("data-comment-id"))).filter(re=>!isNaN(re));if(V.length>0){const re=Math.max(...V),je=document.querySelector('[data-comment-id="'.concat(re,'"]'));je&&je.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}}}},300)})}catch(L){console.error("Error submitting reply:",L),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}}},tt=async(L,B)=>{if(!t.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:y});return}if(C.value&&C.value.allow_comments!==1){k.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(B.length>1500){k.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await qn(L,B.trim()),await ae(),_.value=null}catch(K){console.error("Failed to update comment:",K),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},nt=async L=>{if(!t.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:y});return}try{await Dn(L),await ae()}catch(B){console.error("Failed to delete comment:",B),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},qe=async(L,B)=>{if(!t.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:y});return}try{await Vn(L,B),await ae()}catch(K){console.error("Failed to rate comment:",K),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ü–µ–Ω–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},st=L=>{j.value||E.value||L.key==="Enter"&&!L.shiftKey&&(L.preventDefault(),De())},ze=L=>{L.key==="Enter"&&!L.shiftKey&&(L.preventDefault(),ye())},y=()=>{d.push("/login")},O=L=>{j.value=!0,H(L,o,b,B=>{b.value=B}),setTimeout(()=>{j.value=!1},100)},de=L=>{te(L,o,b,B=>{b.value=B})},ht=()=>{ct(o,b,L=>{b.value=L})},ot=()=>{dt(o,b,L=>{b.value=L})},lt=L=>{Ze(L,o,b,B=>{b.value=B})},ne=R(()=>C.value?C.value.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."),Mt=R(()=>C.value?C.value.allow_comments===1:!0),St=L=>{v.value=null,h.value="",_.value=L},It=()=>{_.value=null};return rt(()=>{ae()}),{comments:w,groupedComments:ue,displayedComments:Xe,hasMoreComments:Pe,remainingCommentsCount:Je,showMoreComments:$e,sortBy:T,setSortBy:et,sortDirection:I,newComment:b,replyTo:v,replyContent:h,editingCommentId:_,currentUser:C,notificationRef:k,commentTextarea:o,showComments:p,submitComment:De,handleReply:Me,submitReply:ye,handleEdit:tt,handleDelete:nt,handleRate:qe,handleCommentKeydown:st,handleReplyKeydown:ze,autoResize:Qe,totalCommentsCount:Ve,getCommentWordForm:eo,showEmojiPicker:E,showImagePicker:P,showLinkModal:F,selectedTextForLink:A,insertEmoji:O,insertImage:de,handleEmojiMouseEnter:ie,handleEmojiMouseLeave:ce,handleImageMouseEnter:oe,handleImageMouseLeave:U,closeEmojiPicker:ke,closeImagePicker:x,handleButtonMouseLeave:z,handleButtonMouseEnter:ge,handleImageButtonMouseEnter:q,getCommentPlaceholder:ne,canComment:Mt,handleStartEdit:St,handleCancelEdit:It,insertSpoiler:ht,insertLink:ot,insertLinkFromModal:lt,closeLinkModal:ve}}},Xo={class:"comments-section"},Jo={class:"spoiler-content"},$o={key:1,class:"comments-container"},el={class:"comments-header"},tl={class:"comments-controls"},nl={class:"textarea-container"},sl=["placeholder","disabled"],ol={class:"comment-footer"},ll={class:"comment-actions"},il=["disabled"],al={class:"character-counter-container"},rl=["disabled"],ul=["disabled"],dl=["disabled"],cl={class:"comments-list"},vl={key:0,class:"show-more-comments"};function ml(u,t,d,s,w,b){const v=le("EmojiPicker"),h=le("ImagePicker"),_=le("LinkModal"),C=le("CommentThread"),k=le("Notification");return l(),a("div",Xo,[s.showComments?(l(),a("div",$o,[e("div",el,[e("div",tl,[e("button",{class:S(["sort-button",{active:s.sortBy==="date"}]),onClick:t[1]||(t[1]=o=>s.setSortBy("date")),title:"–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –¥–∞—Ç–µ"},[t[20]||(t[20]=e("i",{class:"fas fa-clock"},null,-1)),t[21]||(t[21]=N(" –ü–æ –¥–∞—Ç–µ ")),s.sortBy==="date"?(l(),a("i",{key:0,class:S(["fas",s.sortDirection==="asc"?"fa-arrow-up":"fa-arrow-down"])},null,2)):m("",!0)],2),e("button",{class:S(["sort-button",{active:s.sortBy==="rating"}]),onClick:t[2]||(t[2]=o=>s.setSortBy("rating")),title:"–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É"},[t[22]||(t[22]=e("i",{class:"fas fa-thumbs-up"},null,-1)),t[23]||(t[23]=N(" –ü–æ —Ä–µ–π—Ç–∏–Ω–≥—É ")),s.sortBy==="rating"?(l(),a("i",{key:0,class:S(["fas",s.sortDirection==="asc"?"fa-arrow-up":"fa-arrow-down"])},null,2)):m("",!0)],2)]),e("button",{class:"hide-comments-btn",onClick:t[3]||(t[3]=o=>s.showComments=!1)},t[24]||(t[24]=[e("i",{class:"fas fa-eye-slash"},null,-1),N(" –°–∫—Ä—ã—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ")]))]),e("form",{class:"comment-form",onSubmit:t[13]||(t[13]=ut((...o)=>s.submitComment&&s.submitComment(...o),["prevent"]))},[e("div",nl,[ee(e("textarea",{ref:"commentTextarea","onUpdate:modelValue":t[4]||(t[4]=o=>s.newComment=o),class:"comment-textarea",placeholder:s.getCommentPlaceholder,disabled:s.currentUser&&s.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:t[5]||(t[5]=(...o)=>s.autoResize&&s.autoResize(...o)),onKeydown:t[6]||(t[6]=(...o)=>s.handleCommentKeydown&&s.handleCommentKeydown(...o))},null,40,sl),[[Te,s.newComment]])]),e("div",ol,[e("div",ll,[e("button",{class:"submit-button",type:"submit",disabled:!s.newComment.trim()||s.newComment.length>1500||s.currentUser&&s.currentUser.allow_comments!==1}," –û—Ç–ø—Ä–∞–≤–∏—Ç—å ",8,il)]),e("div",al,[e("div",{class:S(["character-counter-inline",{"near-limit":s.newComment.length>1400,"at-limit":s.newComment.length>=1500}])},c(s.newComment.length)+"/1500 ",3),e("button",{type:"button",class:S(["emoji-button-inline",{active:s.showEmojiPicker}]),disabled:s.currentUser&&s.currentUser.allow_comments!==1,onMouseenter:t[7]||(t[7]=(...o)=>s.handleButtonMouseEnter&&s.handleButtonMouseEnter(...o)),onMouseleave:t[8]||(t[8]=(...o)=>s.handleButtonMouseLeave&&s.handleButtonMouseLeave(...o))}," üòä ",42,rl),e("button",{type:"button",class:S(["emoji-button-inline",{active:s.showImagePicker}]),disabled:s.currentUser&&s.currentUser.allow_comments!==1,onMouseenter:t[9]||(t[9]=(...o)=>s.handleImageButtonMouseEnter&&s.handleImageButtonMouseEnter(...o)),onMouseleave:t[10]||(t[10]=(...o)=>s.handleButtonMouseLeave&&s.handleButtonMouseLeave(...o))},t[25]||(t[25]=[bt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-e82be516><g id="logo" data-v-e82be516><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-e82be516></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-e82be516></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-e82be516></path></g></svg>',1)]),42,ul),e("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:s.currentUser&&s.currentUser.allow_comments!==1,onClick:t[11]||(t[11]=(...o)=>s.insertSpoiler&&s.insertSpoiler(...o)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},t[26]||(t[26]=[e("i",{class:"fas fa-eye-slash"},null,-1)]),8,dl),e("button",{type:"button",class:"emoji-button-inline link-button",onClick:t[12]||(t[12]=(...o)=>s.insertLink&&s.insertLink(...o)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},t[27]||(t[27]=[e("i",{class:"fas fa-link"},null,-1)])),Y(v,{"is-visible":s.showEmojiPicker&&s.canComment,onEmojiSelected:s.insertEmoji,onMouseEnter:s.handleEmojiMouseEnter,onMouseLeave:s.handleEmojiMouseLeave,onClose:s.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),Y(h,{"is-visible":s.showImagePicker&&s.canComment,"current-user":s.currentUser,onImageSelected:s.insertImage,onMouseEnter:s.handleImageMouseEnter,onMouseLeave:s.handleImageMouseLeave,onClose:s.closeImagePicker,onLoginRequired:u.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),Y(_,{"is-visible":s.showLinkModal,"selected-text":s.selectedTextForLink,onClose:s.closeLinkModal,onSubmit:s.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])],32),e("div",cl,[(l(!0),a(W,null,$(s.displayedComments,o=>(l(),Ye(C,{key:o.id,comment:o,"current-user":s.currentUser,"reply-to":s.replyTo,"reply-content":s.replyContent,"editing-comment-id":s.editingCommentId,"is-first-comment":!1,onReply:s.handleReply,onStartEdit:s.handleStartEdit,onCancelEdit:s.handleCancelEdit,onEdit:s.handleEdit,onDelete:s.handleDelete,onRate:s.handleRate,onSubmitReply:s.submitReply,onCancelReply:t[14]||(t[14]=p=>s.replyTo=null),onUpdateReplyContent:t[15]||(t[15]=p=>s.replyContent=p),onReplyKeydown:s.handleReplyKeydown},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id","onReply","onStartEdit","onCancelEdit","onEdit","onDelete","onRate","onSubmitReply","onReplyKeydown"]))),128)),s.hasMoreComments?(l(),a("div",vl,[e("button",{class:"show-more-btn",onClick:t[16]||(t[16]=(...o)=>s.showMoreComments&&s.showMoreComments(...o))}," –ü–æ–∫–∞–∑–∞—Ç—å –µ—â–µ "+c(s.remainingCommentsCount)+" "+c(s.getCommentWordForm(s.remainingCommentsCount)),1)])):m("",!0)])])):(l(),a("div",{key:0,class:"spoiler-warning",onClick:t[0]||(t[0]=o=>s.showComments=!0)},[e("div",Jo,[t[17]||(t[17]=e("i",{class:"fas fa-eye-slash"},null,-1)),t[18]||(t[18]=e("h3",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–∫—Ä—ã—Ç—ã",-1)),t[19]||(t[19]=e("p",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä—ã. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å.",-1)),e("div",{class:S(["comments-count",{"no-comments":s.totalCommentsCount===0}])},[s.totalCommentsCount===0?(l(),a(W,{key:0},[N(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç ")],64)):(l(),a(W,{key:1},[N(c(s.totalCommentsCount)+" "+c(s.getCommentWordForm(s.totalCommentsCount)),1)],64))],2)])])),Y(k,{ref:"notificationRef"},null,512)])}const fl=He(Qo,[["render",ml],["__scopeId","data-v-e82be516"]]),gl={class:"movie-info"},kl={class:"content"},yl={key:0,class:"content-card"},bl={class:"movie-skeleton"},hl={class:"movie-skeleton__player"},pl={key:2,class:"content-card"},_l={key:3,class:"content-card"},wl={class:"content-header"},Cl=["src"],El={class:"content-title"},Ll={key:0,class:"ratings-links"},Ml={key:1},Sl=["href","title"],Il={key:2},Tl=["href","title"],xl={key:3},Rl=["href","title"],Pl={key:4},jl=["href","title"],Bl={key:5},Ul=["href"],Nl=["title"],Al={key:0,class:"fa-regular fa-face-grin-wink"},Ol={key:1,class:"fas fa-spinner fa-spin"},Fl=["title"],Hl={key:1,class:"mobile-list-dropdown"},Vl={class:"mobile-list-content"},Dl=["content"],ql=["content"],zl={class:"additional-info"},Wl={class:"info-content"},Kl={key:0,class:"movie-poster-container desktop-only"},Gl=["href"],Yl=["src"],Zl={class:"details-container"},Ql={class:"info-list"},Xl={key:0},Jl={key:1},$l={key:2},ei={key:3},ti={key:4},ni={key:5},si={key:6},oi={key:7},li={key:8},ii={key:9,class:"rating-boxes"},ai={key:0,class:"rating-box mpaa"},ri={key:1,class:"rating-box age"},ui={class:"content-info"},di={key:0,class:"content-description-text"},ci={key:3,class:"comments-section"},vi={key:4,class:"staff-section"},mi={class:"staff-categories"},fi={key:0,class:"staff-category"},gi={class:"staff-list"},ki=["href","title"],yi=["src","alt"],bi={class:"staff-name"},hi={key:0,class:"staff-role"},pi=["href","title"],_i={key:1,class:"staff-category"},wi={class:"staff-names-container"},Ci={class:"staff-names-list"},Ei=["href"],Li=["href","title"],Mi={key:2,class:"staff-category"},Si={class:"staff-names-container"},Ii={class:"staff-names-list"},Ti=["href"],xi=["href","title"],Ri={key:5,class:"yt-video-container"},Pi={key:6,class:"related-movies"},ji=["title"],Bi={key:7,class:"related-movies"},Ui=["title"],Ni={key:0,class:"nudity-info-popup"},Ai={class:"nudity-info-content"},Oi={key:0,class:"nudity-info-loading"},Fi={key:1},Hi={class:"nudity-info-actions"},Vi=["href"],Di={key:1,class:"nudity-info-popup"},qi={class:"nudity-info-content"},zi={class:"timings-text"},Wi={key:0,class:"timing-entries"},Ki={class:"timing-content"},Gi={class:"timing-header-row",style:{display:"flex","align-items":"center",gap:"8px"}},Yi={key:0,class:"pending-badge"},Zi={key:1,class:"clean-text-badge"},Qi={key:0,class:"timing-actions-row",style:{display:"flex","align-items":"center",gap:"8px","margin-top":"8px"}},Xi=["onClick"],Ji=["onClick"],$i=["onClick"],ea=["onClick"],ta=["onClick"],na={class:"timing-text"},sa={class:"timing-author"},oa={key:1,style:{color:"#fff","font-size":"13px",margin:"4px 0 0 0"}},la={key:0},ia={key:1},aa={key:1},ra={key:0,class:"general-parser-result",style:{"margin-top":"15px",padding:"15px",background:"rgba(255, 255, 255, 0.05)","border-radius":"8px"}},ua={style:{margin:"0 0 10px 0",color:"#fff"}},da={style:{color:"#fff","font-size":"13px"}},ca={key:0},va={key:1},ma={key:1,class:"overlay-parser-result",style:{"margin-top":"15px",padding:"15px",background:"rgba(255, 255, 255, 0.05)","border-radius":"8px"}},fa={style:{margin:"0 0 10px 0",color:"#fff"}},ga={style:{color:"#fff","font-size":"13px"}},ka={key:0},ya={key:1},ba={class:"nudity-info-actions"},ha={key:2,class:"timing-modal"},pa={class:"timing-modal-content"},_a={class:"timing-modal-header"},wa={class:"timing-submission-form"},Ca={key:0,class:"timing-preview"},Ea={class:"timing-preview-content"},La={class:"timing-preview-range"},Ma={class:"timing-preview-duration"},Sa={class:"timing-form-actions"},Ia=["disabled"],Ta={key:0,class:"fas fa-spinner fa-spin"},xa={key:1},Ra={class:"modal-header"},Pa={class:"modal-header-controls"},ja={class:"modal-body"},Ba=["disabled"],Ua={key:0,class:"fas fa-spinner fa-spin"},Na={key:1,class:"fas fa-list"},Aa={class:"top-submitters-list"},Oa={class:"submitter-info"},Fa={class:"submitter-name"},Ha=["href"],Va={class:"submitter-count"},Da={class:"submitter-contribution"},qa={class:"modal-header"},za={class:"modal-body"},Wa={key:0,class:"timing-filters"},Ka={key:1,class:"loading-spinner"},Ga={key:2,class:"no-timings"},Ya={key:3,class:"no-timings"},Za={key:4,class:"all-timings-list"},Qa={class:"timing-header"},Xa={class:"timing-meta"},Ja={class:"timing-author"},$a={class:"timing-date"},er={class:"timing-movie-info"},tr={key:0,class:"admin-controls"},nr=["onClick","disabled"],sr={key:0,class:"fas fa-spinner fa-spin"},or={key:1,class:"fas fa-check"},lr=["onClick","disabled"],ir={key:0,class:"fas fa-spinner fa-spin"},ar={key:1,class:"fas fa-times"},rr=["onClick","disabled"],ur={key:0,class:"fas fa-spinner fa-spin"},dr={key:1,class:"fas fa-eye-slash"},cr={class:"timing-content"},vr={class:"timing-text"},mr={key:5,class:"timing-modal obs-modal"},fr={class:"timing-modal-content obs-modal-content"},gr={class:"timing-modal-header"},kr={class:"obs-settings-form"},yr={class:"obs-setting-group"},br={class:"obs-checkbox-label"},hr={key:0,class:"obs-connection-settings"},pr={class:"obs-setting-group"},_r={class:"obs-setting-group"},wr={class:"obs-setting-group"},Cr={key:0,class:"obs-setting-group"},Er={key:0,class:"obs-warning"},Lr={key:1,class:"obs-filter-selection"},Mr=["value"],Sr={key:0,class:"selected-filter-info"},Ir={class:"filter-details"},Tr={class:"obs-info"},xr={class:"obs-setting-group"},Rr={class:"obs-checkbox-label"},Pr={class:"obs-actions"},jr=["disabled"],Br={key:0,class:"fas fa-spinner fa-spin"},Ur={key:1,class:"fas fa-plug"},Nr=["disabled"],Ar=["disabled"],Or={__name:"MovieInfo",setup(u){const t=f(!0),d=Ut(),s=fn(),w=zn(),b=us(),v=Wn(),h=Nt(),_=f(v.params.kp_id),C=f(""),k=f(null),o=f(null),p=Kn(),j=ds(),g=f(null),T=R(()=>j.areTrailersActive),I=f(null),E=f(!1),P=f(!1),F=f(10),A=f(null),ie=f(!1),ce=f(null),oe=f(!1),U=f(void 0),ge=f(null),q=f(new Set),z=f(new Set),ke=f(!1),x=f(!1),ve=f(null),H=f(!1),te=R(()=>{var i;return((i=o.value)==null?void 0:i.nudity_timings.length)>0}),dt=R(()=>{var i;return((i=o.value)==null?void 0:i.nudity_timings.length)>0&&d.isStreamerMode&&!d.isMobile}),Ze=R(()=>{var i,n,M,G,he,pe,_e,we,Ce,J;return((n=(i=o.value)==null?void 0:i.lists)==null?void 0:n.isFavorite)||((G=(M=o.value)==null?void 0:M.lists)==null?void 0:G.isWatching)||((pe=(he=o.value)==null?void 0:he.lists)==null?void 0:pe.isLater)||((we=(_e=o.value)==null?void 0:_e.lists)==null?void 0:we.isCompleted)||((J=(Ce=o.value)==null?void 0:Ce.lists)==null?void 0:J.isAbandoned)}),ct=R(()=>d.isCommentsEnabled),Qe=()=>{if(o.value){const i=o.value.name_ru||o.value.name_en||o.value.name_original||"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å–º–µ";document.title=i}},ue=i=>i?i.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",Ve=i=>(i||[]).map(n=>({kp_id:n.film_id,poster:n.poster_url_preview||n.poster_url,title:n.name_ru||n.name_en||n.name_original})),Xe=i=>{if(typeof i!="number")return;const n=Math.floor(i/60),M=i%60;return"".concat(n," —á. ").concat(M," –º–∏–Ω.")},Pe=f(!1),Je=f({top:"0px",left:"0px"}),$e=i=>{Pe.value=!0,Je.value={top:"".concat(i.pageY+10,"px"),left:"".concat(i.pageX-70,"px")}},et=async()=>{try{const i=[o.value.name_ru||o.value.name_en||o.value.name_original,...o.value.year?[o.value.year]:[],...o.value.film_length?[Xe(o.value.film_length)]:[]];await navigator.clipboard.writeText(i.join(", ")),g.value.showNotification("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ")}catch(i){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",i)}},ae=async(i=!0)=>{var n,M,G,he,pe,_e,we,Ce;try{let J;if(_.value.startsWith("shiki")?J=await Zn(_.value):J=await Qn(_.value,s.token),Array.isArray(J)&&J.length===0)throw new Error("–î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–∏—Å–∫.");o.value=J,_.value.startsWith("shiki")?o.value={...o.value,title:o.value.name_ru||o.value.name_en,name_original:o.value.name_en,short_description:o.value.slogan}:o.value={...o.value,title:o.value.name_ru||o.value.name_en||o.value.name_original,kinopoisk_id:_.value},p.setHeaderContent({text:o.value.title,imageUrl:o.value.logo_url}),Qe();const se={kp_id:_.value,title:((n=o.value)==null?void 0:n.name_ru)||((M=o.value)==null?void 0:M.name_en)||((G=o.value)==null?void 0:G.name_original),poster:((he=o.value)==null?void 0:he.poster_url)||((pe=o.value)==null?void 0:pe.cover_url)||((_e=o.value)==null?void 0:_e.screenshots[0]),year:(we=o.value)==null?void 0:we.year,type:(Ce=o.value)==null?void 0:Ce.type};if(_.value.startsWith("shiki"))if(o.value.screenshots&&o.value.screenshots.length>0){const Re=Math.floor(Math.random()*o.value.screenshots.length),Ge=o.value.screenshots[Re];w.updateMoviePoster(Ge)}else se.poster&&w.updateMoviePoster(se.poster);else se.poster&&w.updateMoviePoster(se.poster);if(R(()=>d.isHistoryAllowed).value&&se.kp_id&&se.title&&i)if(s.token)try{await rn(se.kp_id,X.HISTORY)}catch(Re){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é:",Re)}else d.addToHistory({...se})}catch(J){const{message:se,code:Ae}=Oe(J);C.value=se,k.value=Ae,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–ª—å–º–∞—Ö:",J)}},De=R(()=>{var i;return(i=o.value)==null?void 0:i.videos}),Me=R(()=>{var i;return Ve((i=o.value)==null?void 0:i.sequels_and_prequels)}),ye=R(()=>{var i;return Ve((i=o.value)==null?void 0:i.similars)}),tt=()=>{var G;const i=((G=document.querySelector(".related-movies"))==null?void 0:G.clientWidth)||0,M=Math.floor(i/160)||10;F.value=Math.max(1,M)},nt=()=>{tt()},qe=i=>{if(i.altKey&&i.keyCode===84&&document.querySelector(".player-container")){const M=document.querySelector(".theater-mode-btn");M&&M.click()}},st=i=>{i.button===1&&(i.preventDefault(),ze(i))},ze=async i=>{if(A.value!==null){A.value=null,ie.value=!1;return}U.value=void 0,ce.value=i.currentTarget,A.value="",ie.value=!0;try{const n=await Xn(o.value.imdb_id);A.value=n.nudity_info}catch(n){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö:",n),A.value="–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ Parents Guide –Ω–∞ IMDb –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏."}finally{ie.value=!1}},y=i=>{var n,M;if(A.value=null,U.value!==void 0){U.value=void 0;return}ge.value=i.currentTarget,U.value=((n=o.value)==null?void 0:n.nudity_timings)===null?"":((M=o.value)==null?void 0:M.nudity_timings)||""},O=i=>{var M,G,he,pe,_e,we,Ce,J,se,Ae,Re,Ge,kt;return(kt={[X.FAVORITE]:((G=(M=o.value)==null?void 0:M.lists)==null?void 0:G.isFavorite)||!1,[X.HISTORY]:((pe=(he=o.value)==null?void 0:he.lists)==null?void 0:pe.isHistory)||!1,[X.LATER]:((we=(_e=o.value)==null?void 0:_e.lists)==null?void 0:we.isLater)||!1,[X.COMPLETED]:((J=(Ce=o.value)==null?void 0:Ce.lists)==null?void 0:J.isCompleted)||!1,[X.ABANDONED]:((Ae=(se=o.value)==null?void 0:se.lists)==null?void 0:Ae.isAbandoned)||!1,[X.WATCHING]:((Ge=(Re=o.value)==null?void 0:Re.lists)==null?void 0:Ge.isWatching)||!1}[i])!=null?kt:!1},de=async i=>{if(!s.token){g.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:()=>h.push("/login")});return}try{const n={[X.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[X.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[X.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[X.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[X.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[X.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};O(i)?(await Jn(_.value,i),g.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(n[i]))):(await rn(_.value,i),g.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(n[i]))),await ae(!1),oe.value=!1}catch(n){const{message:M,code:G}=Oe(n);g.value.showNotification("".concat(M," ").concat(G))}},ht=i=>{const n=document.querySelector(".mobile-list-dropdown");n&&!n.contains(i.target)&&(oe.value=!1)},ot=i=>{const n=document.querySelector(".nudity-info-popup");n&&!n.contains(i.target)&&ce.value&&!ce.value.contains(i.target)&&(A.value=null)},lt=i=>{const n=document.querySelector(".nudity-info-popup");n&&!n.contains(i.target)&&ge.value&&!ge.value.contains(i.target)&&(U.value=void 0)};rt(async()=>{await ae(),t.value=!1,document.addEventListener("keydown",qe),window.addEventListener("resize",nt),setTimeout(tt,100),document.addEventListener("click",ht),document.addEventListener("click",ot,!0),document.addEventListener("click",lt,!0),window.selectedNudityTimings=Array.from(q.value),window.overlayNudityTimings=Array.from(z.value)}),Pt(async()=>{p.clearHeaderContent(),document.removeEventListener("keydown",qe),window.removeEventListener("resize",nt),document.removeEventListener("click",ht),document.removeEventListener("click",ot,!0),document.removeEventListener("click",lt,!0),delete window.selectedNudityTimings,delete window.overlayNudityTimings}),Ee(()=>v.params.kp_id,async i=>{i&&i!==_.value&&(p.clearHeaderContent(),_.value=i,I.value=null,await ae(),t.value=!1)},{immediate:!0}),Ee(o,()=>{Qe()},{deep:!0}),Ee(A,i=>{i?document.addEventListener("click",ot,!0):document.removeEventListener("click",ot,!0)},{deep:!0}),Ee(U,i=>{i?document.addEventListener("click",lt,!0):document.removeEventListener("click",lt,!0)},{deep:!0}),Ee(q,()=>{window.selectedNudityTimings=Array.from(q.value)},{deep:!0}),Ee(z,()=>{window.overlayNudityTimings=Array.from(z.value)},{deep:!0}),rt(()=>{window.selectedNudityTimings=Array.from(q.value),window.overlayNudityTimings=Array.from(z.value);const i=setInterval(()=>{if(window.obsSources&&Array.isArray(window.obsSources)&&(zt.value=window.obsSources),window.getOBSFiltersInfo){const n=window.getOBSFiltersInfo();n&&Array.isArray(n)&&b.updateObsSettings({filtersFound:n})}},1e3);Pt(()=>{clearInterval(i)})}),Pt(()=>{delete window.selectedNudityTimings,delete window.overlayNudityTimings});const ne=i=>{var n,M;return((M=(n=o.value)==null?void 0:n.staff)==null?void 0:M.filter(G=>G.profession_key===i))||[]},Mt=async()=>{try{await navigator.clipboard.writeText(A.value),g.value.showNotification("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω")}catch(i){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",i),g.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞")}finally{A.value=null}},St=async()=>{if(U.value.length!==0)try{const i=U.value.map(n=>"".concat(n.timing_text," (by @").concat(n.username,")")).join("\n").concat("\nReYohoho\n");await navigator.clipboard.writeText(i),g.value.showNotification("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω")}catch(i){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",i),g.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞")}finally{U.value=void 0}},It=()=>{const i=encodeURIComponent(A.value);window.open("https://translate.google.com/?sl=en&tl=ru&text=".concat(i),"_blank"),A.value=null},L=R({get:()=>d.submitterUsername,set:i=>d.setSubmitterUsername(i)}),B=f(""),K=f(!1),Z=R(()=>{if(!B.value.trim())return[];try{return Et(B.value,!0)||[]}catch(i){return console.error("Error parsing timing text:",i),[]}}),V=R(()=>L.value.trim()&&B.value.trim()),re=async()=>{if(!(!V.value||K.value))try{K.value=!0,await es(_.value,L.value.trim(),B.value),g.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é, —Å–ø–∞—Å–∏–±–æ!"),B.value="",Be.value=!1}catch(i){const{message:n}=Oe(i);g.value.showNotification(n,5e3)}finally{K.value=!1}},je=async()=>{try{const{submissions:i}=await $n();pt.value=i,_t.value=!0}catch(i){const{message:n}=Oe(i);g.value.showNotification(n)}},Be=f(!1),pt=f([]),_t=f(!1),vt=f(!1),me=f([]),We=f(!1),fe=f(!1),xe=f(null),Ue=f(!1),Ne=f(!1),Se=f("all"),Tt=f(!1),mt=f(!1),wt=R({get:()=>b.obsSettings.enabled,set:i=>b.updateObsSettings({enabled:i})}),Vt=R({get:()=>b.obsSettings.host,set:i=>b.updateObsSettings({host:i})}),Dt=R({get:()=>b.obsSettings.port,set:i=>b.updateObsSettings({port:i})}),qt=R({get:()=>b.obsSettings.password,set:i=>b.updateObsSettings({password:i})}),it=R(()=>b.obsSettings.connected),zt=f([]),ft=R(()=>b.obsSettings.filtersFound),Ke=R({get:()=>b.obsSettings.selectedFilterId,set:i=>b.setObsSelectedFilter(i)}),at=R(()=>Ke.value?ft.value.find(i=>i.id===Ke.value):null),Wt=R({get:()=>b.obsSettings.showObsInOverlay,set:i=>b.updateObsSettings({showObsInOverlay:i})}),bn=async i=>{if(!fe.value)try{fe.value=!0,xe.value=i,Ue.value=!0,Ne.value=!1,await ns(i);const n=me.value.find(M=>M.id===i);n&&(n.status="approved"),g.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ–¥–æ–±—Ä–µ–Ω")}catch(n){const{message:M}=Oe(n);g.value.showNotification("–û—à–∏–±–∫–∞: ".concat(M))}finally{fe.value=!1,xe.value=null,Ue.value=!1,Ne.value=!1}},hn=async i=>{if(!fe.value)try{fe.value=!0,xe.value=i,Ue.value=!1,Ne.value=!1,await ss(i);const n=me.value.find(M=>M.id===i);n&&(n.status="rejected"),g.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ—Ç–∫–ª–æ–Ω–µ–Ω")}catch(n){const{message:M}=Oe(n);g.value.showNotification("–û—à–∏–±–∫–∞: ".concat(M))}finally{fe.value=!1,xe.value=null,Ue.value=!1,Ne.value=!1}},pn=async i=>{if(!fe.value)try{fe.value=!0,xe.value=i,Ue.value=!1,Ne.value=!0,await os(i);const n=me.value.find(M=>M.id===i);n&&(n.status="clean_text"),g.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ—Ç–º–µ—á–µ–Ω –∫–∞–∫ clean_text")}catch(n){const{message:M}=Oe(n);g.value.showNotification("–û—à–∏–±–∫–∞: ".concat(M))}finally{fe.value=!1,xe.value=null,Ue.value=!1,Ne.value=!1}},_n=async()=>{if(!We.value)try{We.value=!0,vt.value=!0;const{timings:i}=await ts();me.value=i}catch(i){const{message:n}=Oe(i);g.value.showNotification(n),vt.value=!1}finally{We.value=!1}},wn=i=>({pending:"–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏",approved:"–û–¥–æ–±—Ä–µ–Ω–æ",rejected:"–û—Ç–∫–ª–æ–Ω–µ–Ω–æ",clean_text:"–ù–µ –º–æ–¥–µ—Ä–∏—Ä—É–µ—Ç—Å—è"})[i]||i,Cn=(i,n)=>{const M=[2,0,1,1,1,2];return n[i%100>4&&i%100<20?2:M[Math.min(i%10,5)]]},En=i=>{if(!pt.value.length)return 0;const n=Math.max(...pt.value.map(M=>M.approved_submissions_count));return i/n*100},Kt=R(()=>Se.value==="all"?me.value:me.value.filter(i=>i.status===Se.value)),Gt=i=>{q.value.has(i)?q.value.delete(i):q.value.add(i)},be=f({});function Ln(i){if(be.value[i.id])be.value={...be.value,[i.id]:!1};else{const n=Et(i.timing_text,!0);be.value={...be.value,[i.id]:n}}}const gt=R(()=>!!window.electronAPI);function Mn(i){if(!gt.value){g.value?g.value.showNotification("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"):alert("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏");return}ve.value=i,x.value=!0}function Sn(){ve.value!==null&&Gt(ve.value),Yt()}function Yt(){x.value=!1,ve.value=null}function In(i){if(!gt.value){g.value?g.value.showNotification("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"):alert("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏");return}Gt(i)}function Tn(i){if(!gt.value){g.value?g.value.showNotification("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"):alert("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏");return}Zt(i)}function xn(i){if(!gt.value){g.value?g.value.showNotification("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"):alert("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏");return}Zt(i)}const Zt=i=>{z.value.has(i)?z.value.delete(i):z.value.add(i)};function Rn(){ke.value=!ke.value}function Pn(){H.value=!H.value}function xt(){const i=[];if(U.value&&Array.isArray(U.value)){for(const n of U.value)if(q.value.has(n.id)){const M=Et(n.timing_text,!0);M&&M.length>0&&i.push(...M)}}return i}function Rt(){const i=[];if(U.value&&Array.isArray(U.value)&&U.value.length>0){for(const n of U.value)if(z.value.has(n.id)){const M=Et(n.timing_text,!0);M&&M.length>0&&i.push(...M)}}return i}const jn=()=>{wt.value&&Qt()},Qt=async()=>{var i,n,M;if(!mt.value){mt.value=!0;try{window.connectToOBS?(await window.connectToOBS(),setTimeout(()=>{window.obsSources&&(zt.value=window.obsSources)},1e3),(i=g.value)==null||i.showNotification("–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ OBS...")):(n=g.value)==null||n.showNotification("–ü–ª–µ–µ—Ä –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω")}catch(G){console.error("Error connecting to OBS:",G),(M=g.value)==null||M.showNotification("–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ OBS")}finally{mt.value=!1}}},Bn=()=>{var i,n;if(!Ke.value){(i=g.value)==null||i.showNotification("–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∏–ª—å—Ç—Ä –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è");return}window.testOBSBlur?window.testOBSBlur(Ke.value):(n=g.value)==null||n.showNotification("OBS —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã")},Un=()=>{var i,n;window.refreshOBSFilters?(window.refreshOBSFilters(),(i=g.value)==null||i.showNotification("–ü–æ–∏—Å–∫ —Ñ–∏–ª—å—Ç—Ä–æ–≤...")):(n=g.value)==null||n.showNotification("OBS —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã")},Nn=()=>{var i,n;Ke.value&&((n=g.value)==null||n.showNotification("–í—ã–±—Ä–∞–Ω —Ñ–∏–ª—å—Ç—Ä: ".concat((i=at.value)==null?void 0:i.sourceName)))};return(i,n)=>{var G,he,pe,_e,we,Ce,J,se,Ae,Re,Ge,kt,Xt,Jt,$t,en,tn,nn;const M=le("router-link");return l(),a(W,null,[e("div",gl,[e("div",kl,[(t.value||!o.value)&&!C.value?(l(),a("div",yl,[e("div",bl,[n[35]||(n[35]=bt('<div class="movie-skeleton__header" data-v-bc12b30f><div class="movie-skeleton__title" data-v-bc12b30f></div></div><div class="movie-skeleton__ratings" data-v-bc12b30f><div class="movie-skeleton__rating-item" data-v-bc12b30f></div><div class="movie-skeleton__rating-item" data-v-bc12b30f></div><div class="movie-skeleton__rating-item" data-v-bc12b30f></div></div>',2)),e("div",hl,[Y(rs)]),n[36]||(n[36]=bt('<div class="movie-skeleton__additional-info" data-v-bc12b30f><div class="movie-skeleton__section-title" data-v-bc12b30f></div><div class="movie-skeleton__info-list" data-v-bc12b30f><div class="movie-skeleton__info-item" data-v-bc12b30f></div><div class="movie-skeleton__info-item" data-v-bc12b30f></div><div class="movie-skeleton__info-item" data-v-bc12b30f></div><div class="movie-skeleton__info-item" data-v-bc12b30f></div><div class="movie-skeleton__info-item" data-v-bc12b30f></div></div></div><div class="movie-skeleton__description" data-v-bc12b30f><div class="movie-skeleton__description-line" data-v-bc12b30f></div><div class="movie-skeleton__description-line" data-v-bc12b30f></div><div class="movie-skeleton__description-line" data-v-bc12b30f></div><div class="movie-skeleton__description-line" data-v-bc12b30f></div></div>',2))])])):m("",!0),C.value?(l(),Ye(Gn,{key:1,message:C.value,code:k.value},null,8,["message","code"])):m("",!0),C.value?(l(),a("div",pl,[(l(),Ye(cn,{key:_.value,"kp-id":_.value,"movie-info":o.value,"onUpdate:movieInfo":ae},null,8,["kp-id","movie-info"]))])):m("",!0),o.value&&!t.value?(l(),a("div",_l,[e("div",wl,[o.value.logo_url?(l(),a("div",{key:0,class:"content-logo",onMousemove:$e,onMouseleave:n[0]||(n[0]=r=>Pe.value=!1),onClick:et},[e("img",{src:o.value.logo_url,alt:"–õ–æ–≥–æ—Ç–∏–ø —Ñ–∏–ª—å–º–∞",class:"content-logo"},null,8,Cl)],32)):(l(),a("div",{key:1,onMousemove:$e,onMouseleave:n[1]||(n[1]=r=>Pe.value=!1),onClick:et},[e("h1",El,c(o.value.title),1)],32)),ee(e("div",{class:"title-copy-tooltip",style:Bt(Je.value)}," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ",4),[[Lt,Pe.value]])]),o.value.kinopoisk_id||o.value.title||o.value.imdb_id||o.value.rating_imdb||o.value.shikimori_id?(l(),a("div",Ll,[o.value.kinopoisk_id?(l(),Ye(ls,{key:o.value.kinopoisk_id,"kp-id":o.value.kinopoisk_id,"show-dash":!0},null,8,["kp-id"])):m("",!0),o.value.kinopoisk_id?(l(),a("div",Ml,[e("a",{href:"https://www.kinopoisk.ru/film/".concat(o.value.kinopoisk_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:o.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(ue(o.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[n[37]||(n[37]=e("img",{src:un,alt:"–ö–ü",class:"rating-logo"},null,-1)),e("span",{class:S(["rating-value",D(Ct)(o.value.rating_kinopoisk)])},c(o.value.rating_kinopoisk?o.value.rating_kinopoisk:"‚Äî"),3),n[38]||(n[38]=e("img",{src:yt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Sl)])):m("",!0),!o.value.kinopoisk_id&&o.value.title?(l(),a("div",Il,[e("a",{href:"https://www.kinopoisk.ru/index.php?kp_query=".concat(encodeURIComponent(o.value.title+(o.value.year?" "+o.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:o.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(ue(o.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[n[39]||(n[39]=e("img",{src:un,alt:"–ö–ü",class:"rating-logo"},null,-1)),e("span",{class:S(["rating-value",D(Ct)(o.value.rating_kinopoisk)])},c(o.value.rating_kinopoisk?o.value.rating_kinopoisk:"‚Äî"),3),n[40]||(n[40]=e("img",{src:yt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Tl)])):m("",!0),o.value.imdb_id?(l(),a("div",xl,[e("a",{href:"https://www.imdb.com/title/".concat(o.value.imdb_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:o.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(ue(o.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[n[41]||(n[41]=e("img",{src:dn,alt:"IMDb",class:"rating-logo"},null,-1)),e("span",{class:S(["rating-value",D(Ct)(o.value.rating_imdb)])},c(o.value.rating_imdb?o.value.rating_imdb:"‚Äî"),3),n[42]||(n[42]=e("img",{src:yt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Rl)])):m("",!0),!o.value.imdb_id&&o.value.title?(l(),a("div",Pl,[e("a",{href:"https://www.imdb.com/find/?q=".concat(encodeURIComponent(o.value.title+(o.value.year?" "+o.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:o.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(ue(o.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[n[43]||(n[43]=e("img",{src:dn,alt:"IMDb",class:"rating-logo"},null,-1)),e("span",{class:S(["rating-value",D(Ct)(o.value.rating_imdb)])},c(o.value.rating_imdb?o.value.rating_imdb:"‚Äî"),3),n[44]||(n[44]=e("img",{src:yt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,jl)])):m("",!0),o.value.shikimori_id?(l(),a("div",Bl,[e("a",{href:"https://shikimori.one/animes/".concat(o.value.shikimori_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},n[45]||(n[45]=[e("img",{src:is,alt:"Shiki",class:"rating-logo"},null,-1),e("img",{src:yt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,Ul)])):m("",!0),o.value.imdb_id?(l(),a("button",{key:6,class:"nudity-info-btn parents-guide-btn",onClick:n[2]||(n[2]=r=>ze(r)),onMousedown:n[3]||(n[3]=r=>st(r)),title:A.value?"–°–∫—Ä—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é":"–ü–æ–∫–∞–∑–∞—Ç—å Parents Guide –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ü–µ–Ω–∞—Ö"},[n[46]||(n[46]=e("span",{class:"desktop-text"},"Parents Guide",-1)),n[47]||(n[47]=e("span",{class:"mobile-text"},"PG",-1)),ie.value?(l(),a("i",Ol)):(l(),a("i",Al))],40,Nl)):m("",!0),e("button",{class:"nudity-info-btn",onClick:n[4]||(n[4]=r=>y(r)),title:U.value!==void 0?"–°–∫—Ä—ã—Ç—å —Ç–∞–π–º–∏–Ω–≥–∏":"–ü–æ–∫–∞–∑–∞—Ç—å —Ç–∞–π–º–∏–Ω–≥–∏ —Å—Ü–µ–Ω 18+(–¥–ª—è —Ç–≤–∏—á–∞, –º–∏–≥–∞–Ω–∏–µ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö)"},[e("i",{class:S(["fa-regular fa-clock",{"text-red":te.value,"text-red-blink":dt.value}])},null,2)],8,Fl)])):m("",!0),(l(),Ye(cn,{key:_.value,"kp-id":_.value,"movie-info":o.value,"onUpdate:movieInfo":ae},null,8,["kp-id","movie-info"])),D(d).isMobile?(l(),a("div",Hl,[e("button",{class:S(["mobile-list-toggle",{}]),onClick:n[5]||(n[5]=r=>oe.value=!oe.value)},[e("span",{class:S(["material-icons",{active:Ze.value}])},c(Ze.value?"bookmark_added":"bookmark_border"),3),n[48]||(n[48]=e("span",{class:"button-label"},"–î–æ–±–∞–≤–∏—Ç—å –≤ —Å–ø–∏—Å–æ–∫",-1)),e("span",{class:S(["material-icons dropdown-arrow",{expanded:oe.value}])},"expand_more",2)]),ee(e("div",Vl,[e("button",{class:S(["mobile-list-btn",{}]),onClick:n[6]||(n[6]=r=>de(D(X).FAVORITE))},[e("span",{class:S(["material-icons",{active:(he=(G=o.value)==null?void 0:G.lists)==null?void 0:he.isFavorite}])},c((_e=(pe=o.value)==null?void 0:pe.lists)!=null&&_e.isFavorite?"favorite":"favorite_border"),3),n[49]||(n[49]=e("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))]),e("button",{class:S(["mobile-list-btn",{}]),onClick:n[7]||(n[7]=r=>de(D(X).WATCHING))},[e("span",{class:S(["material-icons",{active:(Ce=(we=o.value)==null?void 0:we.lists)==null?void 0:Ce.isWatching}])},c((se=(J=o.value)==null?void 0:J.lists)!=null&&se.isWatching?"visibility":"visibility_off"),3),n[50]||(n[50]=e("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))]),e("button",{class:S(["mobile-list-btn",{}]),onClick:n[8]||(n[8]=r=>de(D(X).LATER))},[e("span",{class:S(["material-icons",{active:(Re=(Ae=o.value)==null?void 0:Ae.lists)==null?void 0:Re.isLater}])},"watch_later",2),n[51]||(n[51]=e("span",{class:"button-label"},"–ü–æ–∑–∂–µ",-1))]),e("button",{class:S(["mobile-list-btn",{}]),onClick:n[9]||(n[9]=r=>de(D(X).COMPLETED))},[e("span",{class:S(["material-icons",{active:(kt=(Ge=o.value)==null?void 0:Ge.lists)==null?void 0:kt.isCompleted}])},c((Jt=(Xt=o.value)==null?void 0:Xt.lists)!=null&&Jt.isCompleted?"check_circle":"check_circle_outline"),3),n[52]||(n[52]=e("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))]),e("button",{class:S(["mobile-list-btn",{}]),onClick:n[10]||(n[10]=r=>de(D(X).ABANDONED))},[e("span",{class:S(["material-icons",{active:(en=($t=o.value)==null?void 0:$t.lists)==null?void 0:en.isAbandoned}])},"not_interested",2),n[53]||(n[53]=e("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))])],512),[[Lt,oe.value]])])):m("",!0),e("meta",{name:"title-and-year",content:o.value.type==="FILM"&&o.value.year?"".concat(o.value.title," (").concat(o.value.year,")"):o.value.title},null,8,Dl),o.value.name_original?(l(),a("meta",{key:2,name:"original-title",content:o.value.name_original},null,8,ql)):m("",!0),e("div",zl,[n[64]||(n[64]=e("h2",{class:"additional-info-title"},"–ü–æ–¥—Ä–æ–±–Ω–µ–µ",-1)),e("div",Wl,[o.value.poster_url?(l(),a("div",Kl,[e("a",{href:o.value.poster_url,target:"_blank",rel:"noopener noreferrer"},[e("img",{src:o.value.poster_url,alt:"–ü–æ—Å—Ç–µ—Ä —Ñ–∏–ª—å–º–∞",class:"movie-poster"},null,8,Yl)],8,Gl)])):m("",!0),e("div",Zl,[e("ul",Ql,[o.value.type&&D(ln)[o.value.type]?(l(),a("li",Xl,[n[54]||(n[54]=e("strong",null,"–¢–∏–ø:",-1)),N(" "+c(D(ln)[o.value.type]),1)])):m("",!0),o.value.year?(l(),a("li",Jl,[n[55]||(n[55]=e("strong",null,"–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞:",-1)),N(" "+c(o.value.year),1)])):m("",!0),o.value.title?(l(),a("li",$l,[n[56]||(n[56]=e("strong",null,"–ù–∞–∑–≤–∞–Ω–∏–µ:",-1)),N(" "+c(o.value.title),1)])):m("",!0),o.value.name_original?(l(),a("li",ei,[n[57]||(n[57]=e("strong",null,"–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:",-1)),N(" "+c(o.value.name_original),1)])):m("",!0),o.value.slogan?(l(),a("li",ti,[n[58]||(n[58]=e("strong",null,"–°–ª–æ–≥–∞–Ω:",-1)),N(" "+c(o.value.slogan),1)])):m("",!0),o.value.production_companies?(l(),a("li",ni,[n[59]||(n[59]=e("strong",null,"–ü—Ä–æ–¥–∞–∫—à–Ω:",-1)),N(" "+c(o.value.production_companies),1)])):m("",!0),(tn=o.value.countries)!=null&&tn.length?(l(),a("li",si,[n[60]||(n[60]=e("strong",null,"–°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞:",-1)),N(" "+c(o.value.countries.map(r=>r.country).join(", ")),1)])):m("",!0),(nn=o.value.genres)!=null&&nn.length?(l(),a("li",oi,[n[61]||(n[61]=e("strong",null,"–ñ–∞–Ω—Ä—ã:",-1)),N(" "+c(o.value.genres.map(r=>r.genre).join(", ")),1)])):m("",!0),o.value.film_length?(l(),a("li",li,[n[62]||(n[62]=e("strong",null,"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:",-1)),N(" "+c(Xe(o.value.film_length)),1)])):m("",!0),o.value.rating_mpaa||o.value.rating_age_limits?(l(),a("li",ii,[o.value.rating_mpaa?(l(),a("div",ai,[n[63]||(n[63]=e("strong",null,"MPAA",-1)),e("span",null,c(o.value.rating_mpaa.toUpperCase()),1)])):m("",!0),o.value.rating_age_limits?(l(),a("div",ri,[e("strong",null,c(o.value.rating_age_limits.replace("age",""))+"+",1)])):m("",!0)])):m("",!0)]),e("div",ui,[o.value.description?(l(),a("p",di,c(o.value.description),1)):m("",!0)])])])]),ct.value?(l(),a("div",ci,[(l(),Ye(fl,{"movie-id":_.value,key:_.value},null,8,["movie-id"]))])):m("",!0),o.value.staff?(l(),a("div",vi,[e("div",mi,[ne("ACTOR").length?(l(),a("div",fi,[n[65]||(n[65]=e("h3",{class:"additional-info-title"},"–ê–∫—Ç—ë—Ä—ã",-1)),e("div",gi,[(l(!0),a(W,null,$(ne("ACTOR").slice(0,12),r=>(l(),a("div",{key:r.staff_id,class:"staff-item"},[e("a",{href:"https://www.kinopoisk.ru/name/".concat(r.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-link",title:r.description||""},[e("img",{src:r.poster_url,alt:r.name_ru,class:"staff-photo"},null,8,yi),e("span",bi,c(r.name_ru||r.name_en),1),r.description?(l(),a("span",hi,c(r.description),1)):m("",!0)],8,ki)]))),128)),e("a",{class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(_.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(ne("ACTOR").length," –∞–∫—Ç–µ—Ä–æ–≤")}," +"+c(ne("ACTOR").length-12),9,pi)])])):m("",!0),ne("DIRECTOR").length?(l(),a("div",_i,[n[66]||(n[66]=e("h3",{class:"additional-info-title"},"–†–µ–∂–∏—Å—Å—ë—Ä—ã",-1)),e("div",wi,[e("div",Ci,[(l(!0),a(W,null,$(ne("DIRECTOR").slice(0,5),r=>(l(),a("a",{key:r.staff_id,href:"https://www.kinopoisk.ru/name/".concat(r.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},c(r.name_ru||r.name_en),9,Ei))),128)),ne("DIRECTOR").length>5?(l(),a("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(_.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(ne("DIRECTOR").length," —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–≤")}," +"+c(ne("DIRECTOR").length-5),9,Li)):m("",!0)])])])):m("",!0),ne("PRODUCER").length?(l(),a("div",Mi,[n[67]||(n[67]=e("h3",{class:"additional-info-title"},"–ü—Ä–æ–¥—é—Å–µ—Ä—ã",-1)),e("div",Si,[e("div",Ii,[(l(!0),a(W,null,$(ne("PRODUCER").slice(0,5),r=>(l(),a("a",{key:r.staff_id,href:"https://www.kinopoisk.ru/name/".concat(r.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},c(r.name_ru||r.name_en),9,Ti))),128)),ne("PRODUCER").length>5?(l(),a("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(_.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(ne("PRODUCER").length," –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤")}," +"+c(ne("PRODUCER").length-5),9,xi)):m("",!0)])])])):m("",!0)])])):m("",!0),De.value.length&&T.value?(l(),a("div",Ri,[Y(ps,{videos:De.value,"active-video-index":I.value,onSelect:i.playTrailer},null,8,["videos","active-video-index","onSelect"])])):m("",!0),Me.value.length?(l(),a("div",Pi,[n[68]||(n[68]=e("h2",null,"–°–∏–∫–≤–µ–ª—ã –∏ –ø—Ä–∏–∫–≤–µ–ª—ã",-1)),Y(D(vn),{"movies-list":E.value?Me.value:Me.value.slice(0,F.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),Me.value.length>F.value?(l(),a("a",{key:0,class:"expand-circle-button",onClick:n[11]||(n[11]=r=>E.value=!E.value),title:"".concat(E.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(Me.value.length,")")},c(E.value?"‚àí":"+".concat(Me.value.length-F.value)),9,ji)):m("",!0)])):m("",!0),ye.value.length?(l(),a("div",Bi,[n[69]||(n[69]=e("h2",null,"–ü–æ—Ö–æ–∂–∏–µ",-1)),Y(D(vn),{"movies-list":P.value?ye.value:ye.value.slice(0,F.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),ye.value.length>F.value?(l(),a("a",{key:0,class:"expand-circle-button",onClick:n[12]||(n[12]=r=>P.value=!P.value),title:"".concat(P.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(ye.value.length,")")},c(P.value?"‚àí":"+".concat(ye.value.length-F.value)),9,Ui)):m("",!0)])):m("",!0)])):m("",!0)])]),Y(kn,{ref_key:"notificationRef",ref:g},null,512),A.value!==null?(l(),a("div",Ni,[e("div",Ai,[ie.value?(l(),a("div",Oi,n[70]||(n[70]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),e("span",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏...",-1)]))):(l(),a("div",Fi,c(A.value),1))]),e("div",Hi,[e("a",{href:"https://www.imdb.com/title/".concat(o.value.imdb_id,"/parentalguide"),target:"_blank",rel:"noopener noreferrer",class:"nudity-info-button"},n[71]||(n[71]=[e("i",{class:"fas fa-external-link-alt"},null,-1),e("span",null,"Parents Guide",-1)]),8,Vi),e("button",{class:"nudity-info-button",onClick:Mt},n[72]||(n[72]=[e("i",{class:"fas fa-copy"},null,-1),e("span",null,"Copy",-1)])),e("button",{class:"nudity-info-button",onClick:It},n[73]||(n[73]=[e("i",{class:"fas fa-language"},null,-1),e("span",null,"Translate",-1)]))])])):m("",!0),U.value!==void 0?(l(),a("div",Di,[e("div",qi,[e("div",{class:"acknowledgment-table"},[n[76]||(n[76]=e("div",{class:"acknowledgment-header"},[e("i",{class:"fa-solid fa-heart"}),e("span",null,"–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏")],-1)),e("div",{class:"acknowledgment-content"},[n[75]||(n[75]=e("div",{class:"acknowledgment-row"},[e("a",{href:"https://www.twitch.tv/tanyabelkova",target:"_blank",rel:"noopener noreferrer",class:"twitch-link"},[e("i",{class:"fa-brands fa-twitch"}),e("span",null,"TanyaBelkova")]),e("span",{class:"acknowledgment-text"},"‚Äî –∑–∞ –æ—Å–Ω–æ–≤—É –±–∞–∑—ã —Ç–∞–π–º–∏–Ω–≥–æ–≤")],-1)),e("div",{class:"acknowledgment-row clickable",onClick:je},n[74]||(n[74]=[e("div",{class:"community-link"},[e("i",{class:"fa-solid fa-users"}),e("span",null,"–°–æ–æ–±—â–µ—Å—Ç–≤–æ")],-1),e("span",{class:"acknowledgment-text"},"‚Äî –∑–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–∏–Ω–≥–æ–≤",-1)]))])]),e("div",{class:S(["timings-content",{"no-border":!U.value}])},[e("div",zi,[U.value.length>0?(l(),a("div",Wi,[(l(!0),a(W,null,$(U.value,r=>{var Q;return l(),a("div",{key:r.id,class:S(["timing-entry",{pending:r.status==="pending","clean-text":r.status==="clean_text",selected:q.value.has(r.id)}])},[e("div",Ki,[e("div",Gi,[r.status==="pending"?(l(),a("div",Yi,"–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏")):m("",!0),r.status==="clean_text"?(l(),a("div",Zi," –¢–∞–π–º–∏–Ω–≥–∏ —Ç–∞–∫–æ–≥–æ —Ç–∏–ø–∞ –Ω–µ –º–æ–¥–µ—Ä–∏—Ä—É—é—Ç—Å—è, –¥–ª—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Å–≤–µ—Ä—è–π—Ç–µ—Å—å —Å ParentsGuide ")):m("",!0)]),r.status!=="clean_text"&&((Q=o.value)==null?void 0:Q.type)==="FILM"?(l(),a("div",Qi,[e("button",{class:"nudity-info-button",onClick:Ie=>Ln(r)},c(be.value[r.id]?"–°–∫—Ä—ã—Ç—å –ø–∞—Ä—Å–µ—Ä":"–ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä—Å–µ—Ä"),9,Xi),q.value.has(r.id)?(l(),a("button",{key:0,class:"nudity-info-button",onClick:Ie=>In(r.id),title:"–£–¥–∞–ª–∏—Ç—å –∏–∑ –∞–≤—Ç–æ–±–ª—é—Ä–∞"},n[77]||(n[77]=[e("i",{class:"fas fa-minus"},null,-1),e("span",null,"–£–¥–∞–ª–∏—Ç—å –∏–∑ –∞–≤—Ç–æ–±–ª—é—Ä–∞",-1)]),8,Ji)):(l(),a("button",{key:1,class:"nudity-info-button",onClick:Ie=>Mn(r.id),title:"–î–æ–±–∞–≤–∏—Ç—å –≤ –∞–≤—Ç–æ–±–ª—é—Ä"},n[78]||(n[78]=[e("i",{class:"fas fa-plus"},null,-1),e("span",null,"–î–æ–±–∞–≤–∏—Ç—å –≤ –∞–≤—Ç–æ–±–ª—é—Ä",-1)]),8,$i)),z.value.has(r.id)?(l(),a("button",{key:2,class:"nudity-info-button overlay-button",onClick:Ie=>xn(r.id),title:"–£–¥–∞–ª–∏—Ç—å –∏–∑ –æ–≤–µ—Ä–ª–µ—è"},n[79]||(n[79]=[e("i",{class:"fas fa-eye-slash"},null,-1),e("span",null,"–£–¥–∞–ª–∏—Ç—å –∏–∑ –æ–≤–µ—Ä–ª–µ—è",-1)]),8,ea)):(l(),a("button",{key:3,class:"nudity-info-button overlay-button",onClick:Ie=>Tn(r.id),title:"–î–æ–±–∞–≤–∏—Ç—å –≤ –æ–≤–µ—Ä–ª–µ–π"},n[80]||(n[80]=[e("i",{class:"fas fa-eye"},null,-1),e("span",null,"–î–æ–±–∞–≤–∏—Ç—å –≤ –æ–≤–µ—Ä–ª–µ–π",-1)]),8,ta))])):m("",!0),e("div",{class:S(["timing-hover-container",{blurred:r.status==="pending"}])},[e("span",na,c(r.timing_text),1),n[81]||(n[81]=e("br",null,null,-1)),e("span",sa,"by "+c(r.username),1)],2),be.value[r.id]&&Array.isArray(be.value[r.id])?(l(),a("div",oa,[n[82]||(n[82]=e("b",null,"–ü–∞—Ä—Å–µ—Ä(–∫ —Ç–∞–π–º–∏–Ω–≥–∞–º –¥–æ–±–∞–≤–∏—Ç—Å—è -3 –∏ +3 —Å–µ–∫—É–Ω–¥ –ø–æ –∫—Ä–∞—è–º —Ç–∞–π–º–∏–Ω–≥–∞ –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏, –Ω–æ –≤ –ø—Ä–µ–≤—å—é –ø–∞—Ä—Å–µ—Ä–∞ –∏—Ö –Ω–µ—Ç –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏):",-1)),be.value[r.id].length===0?(l(),a("span",la,"–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å")):(l(),a("span",ia,[(l(!0),a(W,null,$(be.value[r.id],(Ie,sn)=>(l(),a("span",{key:sn}," ["+c(D(Fe)(Ie[0]))+" - "+c(D(Fe)(Ie[1]))+"]"+c(sn<be.value[r.id].length-1?", ":""),1))),128))]))])):m("",!0)])],2)}),128))])):(l(),a("div",aa,c("–ó–∞–ø–∏—Å–µ–π –æ —Ç–∞–π–º–∏–Ω–≥–∞—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")))]),ke.value&&q.value.size>0?(l(),a("div",ra,[e("h4",ua," –û–±—â–∏–π –ø–∞—Ä—Å–µ—Ä ("+c(q.value.size)+" —Ç–∞–π–º–∏–Ω–≥–æ–≤): ",1),e("div",da,[xt().length===0?(l(),a("span",ca,"–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ç–∞–π–º–∏–Ω–≥–∏")):(l(),a("span",va,[(l(!0),a(W,null,$(xt(),(r,Q)=>(l(),a("span",{key:Q}," ["+c(D(Fe)(r[0]))+" - "+c(D(Fe)(r[1]))+"]"+c(Q<xt().length-1?", ":""),1))),128))]))])])):m("",!0),H.value&&z.value.size>0?(l(),a("div",ma,[e("h4",fa," –ü–∞—Ä—Å–µ—Ä –æ–≤–µ—Ä–ª–µ—è ("+c(z.value.size)+" —Ç–∞–π–º–∏–Ω–≥–æ–≤): ",1),e("div",ga,[Rt().length===0?(l(),a("span",ka,"–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ç–∞–π–º–∏–Ω–≥–∏")):(l(),a("span",ya,[(l(!0),a(W,null,$(Rt(),(r,Q)=>(l(),a("span",{key:Q}," ["+c(D(Fe)(r[0]))+" - "+c(D(Fe)(r[1]))+"]"+c(Q<Rt().length-1?", ":""),1))),128))]))])])):m("",!0),e("div",ba,[U.value.length>0?(l(),a("button",{key:0,class:"nudity-info-button",onClick:St},n[83]||(n[83]=[e("i",{class:"fas fa-copy"},null,-1),e("span",null,"–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å",-1)]))):m("",!0),q.value.size>0?(l(),a("button",{key:1,class:"nudity-info-button",onClick:Rn},[n[84]||(n[84]=e("i",{class:"fas fa-eye"},null,-1)),e("span",null,"–û–±—â–∏–π –ø–∞—Ä—Å–µ—Ä ("+c(q.value.size)+")",1)])):m("",!0),z.value.size>0?(l(),a("button",{key:2,class:"nudity-info-button overlay-button",onClick:Pn},[n[85]||(n[85]=e("i",{class:"fas fa-layer-group"},null,-1)),e("span",null,"–ü–∞—Ä—Å–µ—Ä –æ–≤–µ—Ä–ª–µ—è ("+c(z.value.size)+")",1)])):m("",!0),e("button",{class:"nudity-info-button",onClick:n[13]||(n[13]=r=>Be.value=!0)},n[86]||(n[86]=[e("i",{class:"fas fa-plus"},null,-1),e("span",null,"–î–æ–±–∞–≤–∏—Ç—å/–¥–æ–ø–æ–ª–Ω–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥",-1)])),gt.value?(l(),a("button",{key:3,class:"nudity-info-button obs-button",onClick:n[14]||(n[14]=r=>Tt.value=!0)},n[87]||(n[87]=[e("i",{class:"fas fa-cog"},null,-1),e("span",null,"–ù–∞—Å—Ç—Ä–æ–π–∫–∏ OBS",-1)]))):m("",!0)])],2)])])):m("",!0),Be.value?(l(),a("div",ha,[e("div",pa,[e("div",_a,[n[89]||(n[89]=e("h3",null,"–î–æ–±–∞–≤–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥",-1)),e("button",{class:"close-modal-btn",onClick:n[15]||(n[15]=r=>Be.value=!1)},n[88]||(n[88]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",wa,[ee(e("input",{"onUpdate:modelValue":n[16]||(n[16]=r=>L.value=r),placeholder:"–í–∞—à –Ω–∏–∫",class:"timing-input",maxlength:"50"},null,512),[[Te,L.value]]),ee(e("textarea",{"onUpdate:modelValue":n[17]||(n[17]=r=>B.value=r),placeholder:"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ñ–∏–ª—å–º–∞(–≤ [] —Å–∫–æ–±–∫–∞—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä [01:36] –∏–ª–∏ [01:36:55]), –∫ –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã –ø—Ä–∏–ª–∞–≥–∞–µ—Ç–µ —Ç–∞–π–º–∏–Ω–≥\n–¢–∫ –∂–µ –¥–ª—è –∞–≤—Ç–æ–±–ª—é—Ä–∞ –ø—Ä–æ—à—É –≤—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏ —É–∫–∞–∑—ã–≤–∞—Ç—å –∫–∞–∫ –¥–∏–∞–ø–æ–∑–æ–Ω, –∞ –Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –≤—Ä–µ–º—è, –Ω–∞–ø—Ä–∏–º–µ—Ä 00:12:31-00:13:04 - —Ç–µ–∫—Å—Ç, –∞ –Ω–µ 00:12:31\n–î–ª—è —Å–µ—Ä–∏–∞–ª–æ–≤ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ —Å–µ–∑–æ–Ω –∏ –Ω–æ–º–µ—Ä —ç–ø–∏–∑–æ–¥–∞\n",class:"timing-textarea"},null,512),[[Te,B.value]]),Z.value&&Z.value.length>0?(l(),a("div",Ca,[n[90]||(n[90]=e("div",{class:"timing-preview-header"},[e("i",{class:"fas fa-eye"}),e("span",null,"–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –ø–∞—Ä—Å–µ—Ä–∞")],-1)),e("div",Ea,[(l(!0),a(W,null,$(Z.value,(r,Q)=>(l(),a("div",{key:Q,class:"timing-preview-item"},[e("span",La,c(D(Fe)(r[0]))+" - "+c(D(Fe)(r[1])),1),e("span",Ma," ("+c(Math.round(r[1]-r[0]))+"—Å) ",1)]))),128))])])):m("",!0),e("div",Sa,[e("button",{class:"submit-timing-btn",onClick:re,disabled:!V.value||K.value},[K.value?(l(),a("i",Ta)):(l(),a("span",xa,"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é"))],8,Ia)])])])])):m("",!0),_t.value?(l(),a("div",{key:3,class:"modal-overlay",onClick:n[20]||(n[20]=r=>_t.value=!1)},[e("div",{class:"modal-content",onClick:n[19]||(n[19]=ut(()=>{},["stop"]))},[e("div",Ra,[n[92]||(n[92]=e("h3",null,[N(" –¢–æ–ø –∞–≤—Ç–æ—Ä–æ–≤ —Ç–∞–π–º–∏–Ω–≥–æ–≤ "),e("span",{class:"hint-text"},[N("(–•–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —Å–≤–æ–π —Å—Ç—Ä–∏–º/—Å–æ—Ü—Å–µ—Ç–∏? –ù–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º –≤ "),e("a",{href:"https://t.me/reyohoho_sup",target:"_blank",rel:"noopener noreferrer"},"—Ç–µ–ª–µ–≥—Ä–∞–º"),N(")")])],-1)),e("div",Pa,[e("button",{class:"close-modal-btn",onClick:n[18]||(n[18]=r=>_t.value=!1)},n[91]||(n[91]=[e("i",{class:"fas fa-times"},null,-1)]))])]),e("div",ja,[e("button",{class:"show-all-timings-btn",onClick:_n,disabled:We.value},[We.value?(l(),a("i",Ua)):(l(),a("i",Na)),n[93]||(n[93]=e("span",null,"–í—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏",-1))],8,Ba),e("div",Aa,[(l(!0),a(W,null,$(pt.value,(r,Q)=>(l(),a("div",{key:r.username,class:"top-submitter-item"},[e("div",{class:S(["submitter-rank",{gold:Q===0,silver:Q===1,bronze:Q===2}])},c(Q+1),3),e("div",Oa,[e("div",Fa,[r.stream_link?(l(),a("a",{key:0,href:r.stream_link,target:"_blank",rel:"noopener noreferrer"},[N(c(r.username)+" ",1),n[94]||(n[94]=e("i",{class:"fa-brands fa-twitch"},null,-1))],8,Ha)):(l(),a(W,{key:1},[N(c(r.username),1)],64))]),e("div",Va,c(r.approved_submissions_count)+" "+c(Cn(r.approved_submissions_count,["—Ñ–∏–ª—å–º","—Ñ–∏–ª—å–º–∞","—Ñ–∏–ª—å–º–æ–≤"])),1)]),e("div",Da,[e("div",{class:"contribution-bar",style:Bt({width:En(r.approved_submissions_count)+"%"})},null,4)])]))),128))])])])])):m("",!0),vt.value?(l(),a("div",{key:4,class:"modal-overlay",onClick:n[27]||(n[27]=r=>vt.value=!1)},[e("div",{class:"modal-content all-timings-modal",onClick:n[26]||(n[26]=ut(()=>{},["stop"]))},[e("div",qa,[n[96]||(n[96]=e("h3",null,"–í—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏",-1)),e("button",{class:"close-modal-btn",onClick:n[21]||(n[21]=r=>vt.value=!1)},n[95]||(n[95]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",za,[!We.value&&me.value.length>0?(l(),a("div",Wa,[e("button",{class:S(["timing-filter-btn",{active:Se.value==="all"}]),onClick:n[22]||(n[22]=r=>Se.value="all")}," –í—Å–µ ("+c(me.value.length)+") ",3),e("button",{class:S(["timing-filter-btn",{active:Se.value==="approved"}]),onClick:n[23]||(n[23]=r=>Se.value="approved")}," –û–¥–æ–±—Ä–µ–Ω–Ω—ã–µ ("+c(me.value.filter(r=>r.status==="approved").length)+") ",3),e("button",{class:S(["timing-filter-btn",{active:Se.value==="pending"}]),onClick:n[24]||(n[24]=r=>Se.value="pending")}," –ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ ("+c(me.value.filter(r=>r.status==="pending").length)+") ",3),e("button",{class:S(["timing-filter-btn",{active:Se.value==="clean_text"}]),onClick:n[25]||(n[25]=r=>Se.value="clean_text")}," –ù–µ –º–æ–¥–µ—Ä–∏—Ä—É—é—Ç—Å—è ("+c(me.value.filter(r=>r.status==="clean_text").length)+") ",3)])):m("",!0),We.value?(l(),a("div",Ka,n[97]||(n[97]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),e("span",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö —Ç–∞–π–º–∏–Ω–≥–æ–≤...",-1)]))):me.value.length===0?(l(),a("div",Ga,n[98]||(n[98]=[e("p",null,"–¢–∞–π–º–∏–Ω–≥–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",-1)]))):Kt.value.length===0?(l(),a("div",Ya,n[99]||(n[99]=[e("p",null,"–¢–∞–π–º–∏–Ω–≥–∏ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —Ñ–∏–ª—å—Ç—Ä—É –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",-1)]))):(l(),a("div",Za,[(l(!0),a(W,null,$(Kt.value,r=>{var Q;return l(),a("div",{key:r.id,class:S(["timing-item",{pending:r.status==="pending",approved:r.status==="approved",rejected:r.status==="rejected","clean-text":r.status==="clean_text"}])},[e("div",Qa,[e("div",Xa,[e("span",{class:S(["timing-status",r.status])},c(wn(r.status)),3),e("span",Ja,c(r.username),1),e("span",$a,c(D(gn)(r.submitted_at)),1)]),e("div",er,[Y(M,{to:"/movie/".concat(r.kp_id),class:"timing-kp-id clickable",title:"–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ñ–∏–ª—å–º—É ".concat(r.kp_id)},{default:jt(()=>[N(" KP: "+c(r.kp_id),1)]),_:2},1032,["to","title"]),(Q=D(s).user)!=null&&Q.is_admin&&r.status==="pending"?(l(),a("div",tr,[r.status==="pending"?(l(),a("button",{key:0,class:"approve-btn",onClick:Ie=>bn(r.id),disabled:fe.value,title:"–û–¥–æ–±—Ä–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥"},[xe.value===r.id&&Ue.value?(l(),a("i",sr)):(l(),a("i",or))],8,nr)):m("",!0),r.status==="pending"?(l(),a("button",{key:1,class:"reject-btn",onClick:Ie=>hn(r.id),disabled:fe.value,title:"–û—Ç–∫–ª–æ–Ω–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥"},[xe.value===r.id&&!Ue.value&&!Ne.value?(l(),a("i",ir)):(l(),a("i",ar))],8,lr)):m("",!0),r.status==="pending"?(l(),a("button",{key:2,class:"clean-text-btn",onClick:Ie=>pn(r.id),disabled:fe.value,title:"–û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ clean_text"},[xe.value===r.id&&Ne.value?(l(),a("i",ur)):(l(),a("i",dr))],8,rr)):m("",!0)])):m("",!0)])]),e("div",cr,[e("pre",vr,c(r.timing_text),1)])],2)}),128))]))])])])):m("",!0),Tt.value?(l(),a("div",mr,[e("div",fr,[e("div",gr,[n[101]||(n[101]=e("h3",null,"–ù–∞—Å—Ç—Ä–æ–π–∫–∏ OBS WebSocket",-1)),e("button",{class:"close-modal-btn",onClick:n[28]||(n[28]=r=>Tt.value=!1)},n[100]||(n[100]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",kr,[e("div",yr,[e("label",br,[ee(e("input",{type:"checkbox","onUpdate:modelValue":n[29]||(n[29]=r=>wt.value=r),onChange:jn},null,544),[[an,wt.value]]),n[102]||(n[102]=e("span",null,"–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–±–ª—é—Ä –≤ OBS",-1))]),n[103]||(n[103]=e("div",{class:"obs-setting-description"}," –ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ, –∞–≤—Ç–æ–±–ª—é—Ä –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è —á–µ—Ä–µ–∑ OBS WebSocket –≤–º–µ—Å—Ç–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –±–ª—é—Ä–∞ ",-1))]),wt.value?(l(),a("div",hr,[e("div",pr,[n[104]||(n[104]=e("label",null,"–•–æ—Å—Ç OBS WebSocket:",-1)),ee(e("input",{type:"text","onUpdate:modelValue":n[30]||(n[30]=r=>Vt.value=r),placeholder:"localhost",class:"obs-input"},null,512),[[Te,Vt.value]])]),e("div",_r,[n[105]||(n[105]=e("label",null,"–ü–æ—Ä—Ç OBS WebSocket:",-1)),ee(e("input",{type:"number","onUpdate:modelValue":n[31]||(n[31]=r=>Dt.value=r),placeholder:"4455",class:"obs-input"},null,512),[[Te,Dt.value]])]),e("div",wr,[n[106]||(n[106]=e("label",null,"–ü–∞—Ä–æ–ª—å (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω):",-1)),ee(e("input",{type:"password","onUpdate:modelValue":n[32]||(n[32]=r=>qt.value=r),placeholder:"–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –µ—Å–ª–∏ –ø–∞—Ä–æ–ª—å –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω",class:"obs-input"},null,512),[[Te,qt.value]])]),it.value?(l(),a("div",Cr,[n[109]||(n[109]=e("label",null,"–í—ã–±–æ—Ä —Ñ–∏–ª—å—Ç—Ä–∞ –¥–ª—è –±–ª—é—Ä–∞:",-1)),ft.value.length===0?(l(),a("div",Er," ‚ö†Ô∏è –§–∏–ª—å—Ç—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤ OBS. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–∞—Ö –µ—Å—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã. ")):(l(),a("div",Lr,[ee(e("select",{"onUpdate:modelValue":n[33]||(n[33]=r=>Ke.value=r),onChange:Nn,class:"obs-filter-select"},[n[107]||(n[107]=e("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∏–ª—å—Ç—Ä",-1)),(l(!0),a(W,null,$(ft.value,r=>(l(),a("option",{key:r.id,value:r.id},c(r.sourceName)+" - "+c(r.filterName)+" ("+c(r.sceneName)+") ",9,Mr))),128))],544),[[Yn,Ke.value]]),at.value?(l(),a("div",Sr,[e("div",Ir,[e("strong",null,c(at.value.filterName),1),n[108]||(n[108]=N(" –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ ")),e("strong",null,c(at.value.sourceName),1)]),e("span",{class:S(["filter-status",{enabled:at.value.enabled}])}," –°—Ç–∞—Ç—É—Å: "+c(at.value.enabled?"‚úÖ –í–∫–ª—é—á–µ–Ω":"‚≠ï –û—Ç–∫–ª—é—á–µ–Ω"),3)])):m("",!0),e("div",Tr," üí° –ù–∞–π–¥–µ–Ω–æ "+c(ft.value.length)+" —Ñ–∏–ª—å—Ç—Ä–æ–≤. –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∏–ª—å—Ç—Ä –±–ª—é—Ä–∞. ",1)]))])):m("",!0),e("div",xr,[e("label",Rr,[ee(e("input",{type:"checkbox","onUpdate:modelValue":n[34]||(n[34]=r=>Wt.value=r)},null,512),[[an,Wt.value]]),n[110]||(n[110]=e("span",null,"–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å OBS –≤ –≤–∏–¥–µ–æ –æ–≤–µ—Ä–ª–µ–µ",-1))])]),e("div",{class:S(["obs-status",{connected:it.value}])},c(it.value?"–ü–æ–¥–∫–ª—é—á–µ–Ω –∫ OBS":"–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ OBS"),3),e("div",Pr,[e("button",{class:"obs-action-btn connect-btn",onClick:Qt,disabled:mt.value},[mt.value?(l(),a("i",Br)):(l(),a("i",Ur)),N(" "+c(it.value?"–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è":"–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è"),1)],8,jr),e("button",{class:"obs-action-btn test-btn",onClick:Bn,disabled:!it.value||ft.value.length===0},n[111]||(n[111]=[e("i",{class:"fas fa-eye"},null,-1),N(" –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–ª—é—Ä ")]),8,Nr),e("button",{class:"obs-action-btn refresh-btn",onClick:Un,disabled:!it.value},n[112]||(n[112]=[e("i",{class:"fas fa-sync"},null,-1),N(" –û–±–Ω–æ–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã ")]),8,Ar)])])):m("",!0)])])])):m("",!0),Y(cs,{"is-open":x.value,message:"–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ç–∞–π–º–∏–Ω–≥–∏ –ø–µ—Ä–µ–¥ –≤–∫–ª—é—á–µ–Ω–∏–µ–º –∞–≤—Ç–æ–±–ª—é—Ä–∞ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ñ–∏–ª—å–º—É –≤ –ø–ª–µ–µ—Ä–µ! –ú—ã –Ω–µ –Ω–µ—Å—ë–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ —Ä–∞–±–æ—Ç—É –¥–∞–Ω–Ω–æ–π –æ–ø—Ü–∏–∏, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ—ë –Ω–∞ —Å–≤–æ–π —Å—Ç—Ä–∞—Ö –∏ —Ä–∏—Å–∫!",onConfirm:Sn,onClose:Yt},null,8,["is-open"])],64)}}},Qr=He(Or,[["__scopeId","data-v-bc12b30f"]]);export{Qr as default};
