import{_ as gt,r as p,c as F,b as a,d as i,e,m as te,t as g,O as ce,g as k,P as Te,n as E,l as _t,u as Xt,q as pn,N as Dn,B as Qt,x as We,o as Tt,S as gn,k as Ct,E as On,f as Le,V as Yt,p as ie,W as Ce,A as Z,U as K,X as Wn,G as wt,Y as Je,Z as Vn,$ as mn,a0 as Gt,a1 as Kn,a2 as Rn,a3 as Gn,v as Yn,y as Pt,a4 as Zn,i as Ke,w as fn,a5 as Zt,a6 as Xn,a7 as Qn,a8 as Jn,a9 as eo,aa as Pn,ab as to,ac as no,a as Nn,ad as jn,ae as oo,af as lo,ag as so,ah as io,ai as ao,aj as ro,ak as uo,al as co,am as vo}from"./index-BQ84atMx.js";import{_ as mo,a as Bn,b as $n,M as Un}from"./MovieList-GdR1TYXy.js";import{p as Ht,f as Oe,u as Fn,a as fo,b as zn}from"./useCommentFormatting-DOofepYY.js";import{S as qn}from"./SpinnerLoading-7nKaayWU.js";import{N as tn}from"./ToastMessage-DFjk5kIO.js";import{u as po,S as go,a as yo}from"./trailer-Bbpqy0Fg.js";const Kt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVR4nO2ZQUoDMRSGR7eewHoFsVS0HkUUXNXqASqK2EURBPFIVRe6c+UN1CvUXWvbT4KvMAwzNnnJdCrmg1BKad7/v7y0b5IkiUQiCwGoAx3gQjEugZ0qxTeAIX6MKjMBnBOGS62AVWAPOHVYdlMu9YArYOhphLeBT+ALmOKGEd2QubaAK+B2zngFxt4GgDXgGZjgR8ch5oEkCi8DkvlnRcYLV0Apfqw10M7JvPkV6AN3FmVwK+WyZRnvMEe8ef/ibECyb2o+zRuwnpQAxeLNivQ0BvYyE46qEJ/8fK4ycJKp/X4V4n0MdDNfukkqEO9jwP1LDgD7BeKPgmgp04CL+KUz4Cp+qQxoxC+NAdsNm4c0hWkukkUa8BGfegiadbFDq3/2UAZ8xc+QVvzMtqcKYkBaZ5/MN5xEl2DgLGDZ1KswsC09FPJqXTZoNm5oA6kyMGI2FxqfkluJ0uMTDfhBXAHiHvCCWEL8/RLqlv1MPCf+TSZ+13WC7KnEfWlqcwAeU7GNjnbiQsG5UC1ZAEAt1UMhOpquk6zknMy9l20C2AA+MnEHRo9msuOCs9EH4Fp5TVQ0rqVs0plH4re02Qh1Oq1lCjypsp+5H3gKcD/gykTirqnFZ/ZDy+OGxpapzD+QePrM/2KkKfcGPcv7AdvRkz23G1x4JPIP+AY3r/ywUk/2JAAAAABJRU5ErkJggg==",ko="/reyohoho/assets/icon-shikimori-DGvXK9Jc.svg",Ut=r=>{const t=document.createElement("div");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.backgroundColor="rgba(0, 0, 0, 0.8)",t.style.color="white",t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",t.style.fontSize="2rem",t.style.zIndex="99000",t.textContent=r,document.body.appendChild(t),setTimeout(()=>{document.body.removeChild(t)},2e3)},ho={key:0},bo={key:1},wo={class:"players-list"},Co=["onClick"],_o={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Eo={key:0},Mo={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Lo={key:1},xo={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Io=["onClick"],To={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},So={__name:"PlayerModal",props:{players:{type:Array,required:!0},selectedPlayer:{type:Object,default:null}},emits:["close","select"],setup(r,{emit:t}){const v=r,n=t,T=p(null),A=F(()=>v.players.filter(_=>!M(_)&&!R(_))),y=F(()=>v.players.some(_=>M(_))),h=F(()=>v.players.some(_=>R(_))),M=_=>_.key.toUpperCase().includes("HDREZKA"),R=_=>_.key.toUpperCase().includes("KODIK"),l=_=>_.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"").replace(/KODIK>/,"").trim(),m=_=>{n("select",_),n("close")},L=_=>v.selectedPlayer&&v.selectedPlayer.key===_.key,b=_=>v.selectedPlayer?_==="hdrezka"&&M(v.selectedPlayer)||_==="kodik"&&R(v.selectedPlayer):!1,$=_=>{T.value=_},I=()=>{T.value=null},j=_=>{let P=v.players.filter(B=>_==="hdrezka"&&M(B)||_==="kodik"&&R(B));return _==="kodik"?P.sort((B,J)=>l(B.translate).localeCompare(l(J.translate))):P},N=_=>j(_).some(P=>P.warning);return(_,P)=>(i(),a("div",{class:"modal",onClick:P[4]||(P[4]=_t(B=>_.$emit("close"),["self"]))},[e("div",{class:"modal-content",onClick:P[3]||(P[3]=_t(()=>{},["stop"]))},[e("button",{class:"close",onClick:P[0]||(P[0]=B=>_.$emit("close"))},"√ó"),T.value?(i(),a("h2",bo,[e("button",{class:"back-btn",onClick:I},"‚Üê –ù–∞–∑–∞–¥"),te(" "+g(T.value==="hdrezka"?"ReYohoho - HDrezka":"Kodik"),1)])):(i(),a("h2",ho,"–í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–µ–µ—Ä")),e("ul",wo,[T.value?(i(!0),a(ce,{key:1},Te(j(T.value),B=>(i(),a("li",{key:B.key},[e("button",{class:E(["player-item",{active:L(B)}]),onClick:J=>m(B)},[te(g(l(B.translate))+" ",1),B.warning?(i(),a("span",To,"warning")):k("",!0)],10,Io)]))),128)):(i(),a(ce,{key:0},[(i(!0),a(ce,null,Te(A.value,B=>(i(),a("li",{key:B.key},[e("button",{class:E(["player-item",{active:L(B)}]),onClick:J=>m(B)},[te(g(l(B.translate))+" ",1),B.warning?(i(),a("span",_o,"warning")):k("",!0)],10,Co)]))),128)),y.value?(i(),a("li",Eo,[e("button",{class:E(["group-item",{active:b("hdrezka")}]),onClick:P[1]||(P[1]=B=>$("hdrezka"))},[P[5]||(P[5]=e("span",{class:"material-icons group-icon"},"folder",-1)),P[6]||(P[6]=te(" ReYohoho - HDrezka ")),N("hdrezka")?(i(),a("span",Mo,"warning")):k("",!0)],2)])):k("",!0),h.value?(i(),a("li",Lo,[e("button",{class:E(["group-item",{active:b("kodik")}]),onClick:P[2]||(P[2]=B=>$("kodik"))},[P[7]||(P[7]=e("span",{class:"material-icons group-icon"},"folder",-1)),P[8]||(P[8]=te(" Kodik ")),N("kodik")?(i(),a("span",xo,"warning")):k("",!0)],2)])):k("",!0)],64))])])]))}},Ao=gt(So,[["__scopeId","data-v-8b8d2b67"]]),Ro={class:"players-list"},Po=["src"],No={key:1,class:"controls"},jo={class:"main-controls"},Bo={class:"material-icons"},$o={class:"list-button-item"},Uo={class:"material-icons"},Ho={class:"list-button-item"},Do={class:"material-icons"},Oo={class:"list-button-item"},Vo={class:"list-button-item"},Fo={class:"material-icons"},zo={class:"list-button-item"},qo={class:"material-icons"},Wo={class:"tooltip-container","data-tooltip-container":"dimming"},Ko={class:"material-icons"},Go={class:"tooltip-container","data-tooltip-container":"blur"},Yo={class:"tooltip-container","data-tooltip-container":"compressor"},Zo={class:"tooltip-container","data-tooltip-container":"mirror"},Xo={class:"tooltip-container","data-tooltip-container":"theater"},Qo={class:"material-symbols-outlined"},Jo={class:"custom-tooltip","data-tooltip":"theater"},el={class:"tooltip-container","data-tooltip-container":"pip"},tl={class:"tooltip-container","data-tooltip-container":"aspect_ratio"},nl={class:"current-ratio"},ol=["onClick"],ll={key:0,class:"tooltip-container","data-tooltip-container":"app_link"},sl={class:"custom-tooltip","data-tooltip":"app_link"},il={key:1,class:"tooltip-container","data-tooltip-container":"copy_link"},al={class:"custom-tooltip","data-tooltip":"copy_link"},rl={key:2,class:"tooltip-container","data-tooltip-container":"overlay"},ul={class:"material-icons"},dl={key:0,class:"desktop-list-buttons"},cl={class:"tooltip-container"},vl={class:"material-icons"},ml={class:"custom-tooltip"},fl={class:"tooltip-container"},pl={class:"material-icons"},gl={class:"custom-tooltip"},yl={class:"tooltip-container"},kl={class:"custom-tooltip"},hl={class:"tooltip-container"},bl={class:"material-icons"},wl={class:"custom-tooltip"},Cl={class:"tooltip-container"},_l={class:"material-icons"},El={class:"custom-tooltip"},Ml={__name:"PlayerComponent",props:{kpId:String,movieInfo:{type:Object,default:()=>({})}},emits:["update:selectedPlayer","update:movieInfo"],setup(r,{emit:t}){const v=Xt(),n=po(),T=pn(),A=Dn(),y=Qt(),h=p(A.params.kp_id),M=r,R=t,l=p([]),m=p(null),L=p(!0),b=p(!1),$=p(!1),I=p(null),j=p(null),N=p(!1),_=p(""),P=p(null),B=p(window.innerHeight*.9),J=F(()=>"".concat(B.value,"px")),Y=F(()=>v.isMobile),S=F(()=>!!window.electronAPI),D=p(null),ve=p(!1);let pe=null;const Pe=p(null),et=p(null),q=p(null),ge=p(null),le=p(!1),ae=p(!1),xe=p(null),rt=p(null),ct=p(0),he=p(null),ye=p(null),Se=p(null),Ge=p(null),Ye=p(null),Ae=p(null),ne=F({get:()=>n.videoOverlayEnabled,set:u=>n.updateVideoOverlay(u)}),Ve=F({get:()=>n.overlaySettings,set:u=>n.updateOverlaySettings(u)}),Be=p(0),yt=p(0),vt=p([]),W=p(null),ut=p(null),De=p(!1),kt=u=>{const s=document.querySelector('[data-tooltip-container="'.concat(u,'"]')),f=document.querySelector('[data-tooltip="'.concat(u,'"]'));if(!s||!f)return;const w=s.getBoundingClientRect(),C=f.getBoundingClientRect(),H=window.innerHeight;w.bottom+C.height>H?(f.style.top="auto",f.style.bottom="100%",f.style.marginTop="0",f.style.marginBottom="12px",f.style.transform="translateX(-50%)"):(f.style.top="100%",f.style.bottom="auto",f.style.marginTop="12px",f.style.marginBottom="0",f.style.transform="translateX(-50%)")},ke=u=>{D.value=u,ve.value=!1,clearTimeout(pe),Je(()=>{kt(u)})},Ze=()=>{ve.value||(pe=setTimeout(()=>{D.value=null},300))},x=()=>{ve.value=!0,clearTimeout(pe)},Q=()=>{ve.value=!1,D.value=null},Ie=F({get:()=>n.aspectRatio,set:u=>n.updateAspectRatio(u)}),_e=F({get:()=>n.isCentered,set:u=>n.updateCentering(u)}),Dt=F(()=>{var u,s,f,w,C,H,V,se,ue,G;return((s=(u=M.movieInfo)==null?void 0:u.lists)==null?void 0:s.isFavorite)||((w=(f=M.movieInfo)==null?void 0:f.lists)==null?void 0:w.isWatching)||((H=(C=M.movieInfo)==null?void 0:C.lists)==null?void 0:H.isLater)||((se=(V=M.movieInfo)==null?void 0:V.lists)==null?void 0:se.isCompleted)||((G=(ue=M.movieInfo)==null?void 0:ue.lists)==null?void 0:G.isAbandoned)}),Nt=F(()=>n.preferredPlayer),Ot=p(0),mt=u=>u.toUpperCase(),tt=()=>{if(b.value||!j.value)return;const[u,s]=Ie.value.split(":").map(Number);B.value=window.innerHeight*.9,Ot.value=Math.min(j.value.clientWidth*(s/u),B.value)},Et=F(()=>{if(b.value)return{};const[u,s]=Ie.value.split(":").map(Number),f=B.value*(u/s);return{width:"100%",maxWidth:"".concat(f,"px"),maxHeight:J.value,margin:"0 auto",overflow:"hidden"}}),U=F(()=>{const[u,s]=Ie.value.split(":").map(Number);return{position:"relative",width:"100%",paddingTop:"".concat(s/u*100,"%")}}),X=()=>{j.value&&setTimeout(()=>{Je(()=>{j.value.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})},500)},$e=async()=>{try{_.value="",P.value=null;const u=await Wn(M.kpId);if(l.value=Object.entries(u).map(([s,f])=>({key:s.toUpperCase(),...f})),l.value.length>0){if(Nt.value){const s=mt(Nt.value),f=l.value.find(w=>mt(w.key)===s);m.value=f||l.value[0]}else m.value=l.value[0];R("update:selectedPlayer",m.value)}}catch(u){const{message:s,code:f}=wt(u);_.value=s,P.value=f,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–ª–µ–µ—Ä–æ–≤:",u)}},Ue=()=>{N.value=!0},re=()=>{N.value=!1},Ne=()=>{try{return he.value||(he.value=new(window.AudioContext||window.webkitAudioContext)),ye.value||(ye.value=he.value.createDynamicsCompressor(),ye.value.threshold.value=-50,ye.value.knee.value=40,ye.value.ratio.value=12,ye.value.attack.value=0,ye.value.release.value=.25,Ge.value=he.value.createGain(),Ye.value=he.value.createGain(),Ge.value.gain.value=0,Ye.value.gain.value=1,ye.value.connect(Ge.value),Ge.value.connect(he.value.destination),Ye.value.connect(he.value.destination)),!0}catch(u){return console.log("Error initializing audio context:",u),!1}},nt=async u=>{try{if(!he.value||Ae.value===u)return!0;const s=I.value,f=(s==null?void 0:s.src)||"";if(f.includes("videoframe")||f.includes("kinoserial.net")||f.includes("allarknow"))return console.log("Player detected as unsupported for compressor:",f),Ae.value=u,Se.value=null,ae.value=!1,S.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –ø–ª–µ–µ—Ä–æ–º"),!1;if(Se.value)try{Se.value.disconnect()}catch(C){}const w=async(C=0)=>{C>0&&await new Promise(H=>setTimeout(H,C));try{return Se.value=he.value.createMediaElementSource(u),Ae.value=u,Se.value.connect(ye.value),Se.value.connect(Ye.value),console.log("Video audio setup completed (attempt with ".concat(C,"ms delay)")),!0}catch(H){if(H.name==="InvalidStateError"&&H.message.includes("already connected"))return console.log("MediaElementSource already connected (".concat(C,"ms delay attempt)")),!1;throw H}};return await w(0)||await w(100)||await w(300)||await w(800)?!0:(console.log("Video element has internal audio processing, compressor not available for this player"),Ae.value=u,Se.value=null,ae.value=!1,S.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –ø–ª–µ–µ—Ä–æ–º"),!1)}catch(s){return console.log("Error setting up video audio:",s),!1}},ot=async u=>{if(I.value)try{const s=I.value,f=s.contentDocument||s.contentWindow.document;if(!f)return;const w=f.querySelectorAll("video");if(w.length===0)return;const C=w[0];if(!Ne())return;if(!await nt(C)||!Se.value){console.log("Compressor not available for this player");return}u&&!ae.value?(Ge.value.gain.setValueAtTime(1,he.value.currentTime),Ye.value.gain.setValueAtTime(0,he.value.currentTime),ae.value=!0,S.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –≤–∫–ª—é—á—ë–Ω"),console.log("Compressor enabled")):!u&&ae.value&&(Ge.value.gain.setValueAtTime(0,he.value.currentTime),Ye.value.gain.setValueAtTime(1,he.value.currentTime),ae.value=!1,S.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –æ—Ç–∫–ª—é—á—ë–Ω"),console.log("Compressor disabled"))}catch(s){console.log("Compressor error:",s),S.value&&window.electronAPI.showToast("–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä–∞")}},Xe=()=>{S.value?window.electronAPI.sendHotKey("F2"):(Ut("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},ht=()=>{S.value?(Mt.value=!Mt.value,ot(Mt.value)):(Ut("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},Fe=()=>{S.value?(xt.value=!xt.value,on(xt.value)):(Ut("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},Qe=()=>{b.value=!b.value,b.value?(window.addEventListener("mousemove",dt),document.addEventListener("keydown",jt),document.body.classList.add("no-scroll")):(window.removeEventListener("mousemove",dt),document.removeEventListener("keydown",jt),document.body.classList.remove("no-scroll")),$.value=b.value,Je(()=>X())},ft=p(null),dt=()=>{ft.value=setTimeout(()=>{clearTimeout(ft.value),$.value=!1},4e3),$.value=!0},ze=F(()=>v.dimmingEnabled),nn=()=>{b.value||v.toggleDimming()},Mt=F({get:()=>n.compressorEnabled,set:u=>n.updateCompressor(u)}),xt=F({get:()=>n.mirrorEnabled,set:u=>n.updateMirror(u)}),on=u=>{if(I.value)try{const s=I.value,f=s.contentDocument||s.contentWindow.document;if(!f)return;const w=f.querySelectorAll("video");if(w.length>0&&(w.forEach(C=>{u?C.style.transform="scaleX(-1)":C.style.transform="scaleX(1)"}),le.value=u,S.value)){const C=u?"–ó–µ—Ä–∫–∞–ª–æ –≤–∫–ª—é—á–µ–Ω–æ":"–ó–µ—Ä–∫–∞–ª–æ –æ—Ç–∫–ª—é—á–µ–Ω–æ";window.electronAPI.showToast(C)}}catch(s){}},ln=()=>{ge.value&&clearInterval(ge.value),ge.value=setInterval(()=>{if(I.value)try{const u=I.value,s=u.contentDocument||u.contentWindow.document;if(!s)return;const f=s.querySelectorAll("video");if(f.length>0){const w=f[0],H=w.style.transform==="scaleX(-1)";xt.value&&!H?(w.style.transform="scaleX(-1)",le.value=!0):!xt.value&&H&&(w.style.transform="scaleX(1)",le.value=!1),Ae.value!==w?(Ae.value=null,ae.value=!1,Mt.value&&setTimeout(()=>{ot(!0)},500)):Mt.value!==ae.value&&Se.value&&(console.log("Compressor state mismatch, reapplying"),ot(Mt.value))}}catch(u){}},1e3)},sn=(u=!1)=>{if(!S.value)return;xe.value&&clearInterval(xe.value);let s=!1,f=[];function w(){var C;if(f=[],window.selectedNudityTimings&&Array.isArray(window.selectedNudityTimings)&&((C=M.movieInfo)!=null&&C.nudity_timings)){for(const H of M.movieInfo.nudity_timings)if(window.selectedNudityTimings.includes(H.id)){const V=Ht(H.timing_text);V&&V.length>0&&f.push(...V)}}}w(),xe.value=setInterval(()=>{var C;if(I.value){w();try{const H=I.value,V=H.contentDocument||H.contentWindow.document;if(!V)return;const se=V.querySelectorAll("video");if(se.length>0){const ue=se[0];if(Be.value=ue.currentTime||0,yt.value=ue.duration||0,S.value&&ne.value&&!W.value&&!De.value&&Date.now()-(window.iframeLoadTime||0)>=3e3)try{fe(V,ue)}catch(me){console.log("Error creating overlay:",me),De.value=!1}if(S.value&&!ne.value&&W.value&&setTimeout(()=>{!ne.value&&W.value&&je()},100),S.value&&((C=M.movieInfo)!=null&&C.nudity_timings)){const G=ue.currentTime,me=[],Ee=[],Me=f.length>0;if(window.overlayNudityTimings&&Array.isArray(window.overlayNudityTimings)&&window.overlayNudityTimings.length>0){for(const be of M.movieInfo.nudity_timings)if(window.overlayNudityTimings.includes(be.id)){const de=Ht(be.timing_text);if(de&&de.length>0){const c=[];if(Me)for(const[oe,we]of de)c.push({text:"[".concat(Oe(oe),"-").concat(Oe(we),"]"),status:"normal"});else for(const[oe,we]of de){let Re="normal";G>=oe&&G<=we?(Re="active",Ee.push(be.id)):oe>G&&oe-G<=20&&(Re="upcoming"),c.push({text:"[".concat(Oe(oe),"-").concat(Oe(we),"]"),status:Re})}me.push({id:be.id,intervals:c})}}}vt.value=me}if(S.value&&W.value&&ne.value&&it(),!ue.paused){const G=ue.currentTime,me=ue.duration,Ee=me>0?G/me*100:0;if(u&&(console.log("Video position: ".concat(G.toFixed(2),"s / ").concat(me.toFixed(2),"s (").concat(Ee.toFixed(1),"%)")),f.length>0)){const be=f.map(([de,c])=>"".concat(Oe(de)," - ").concat(Oe(c))).join(", ");console.log("Active blur intervals: [".concat(be,"]"))}let Me=!1;for(const[be,de]of f)if(G>=be&&G<=de){Me=!0;break}Me&&!s&&S.value?(window.electronAPI.sendHotKey("F2"),s=!0,console.log("Blur applied at",G.toFixed(2),"seconds")):!Me&&s&&(window.electronAPI.sendHotKey("F2"),s=!1,console.log("Blur removed at",G.toFixed(2),"seconds"))}}}catch(H){console.log("Error monitoring video position:",H)}}},100)},an=()=>{L.value=!1,window.iframeLoadTime=Date.now(),ln(),sn(),S.value&&ne.value&&!W.value&&setTimeout(()=>{try{const u=I.value,s=u.contentDocument||u.contentWindow.document;if(s){const f=s.querySelector("video");f&&fe(s,f)}}catch(u){console.log("Error creating overlay on iframe load:",u),De.value=!1}},3e3)},jt=u=>{(u.key==="Escape"&&b.value||u.altKey&&u.keyCode===84)&&Qe()},Vt=u=>{Ie.value=u,setTimeout(()=>{_e.value&&X()},310)},lt=()=>{const u="reyohoho://#".concat(h.value);try{window.location.href=u}catch(s){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Å—ã–ª–∫–∏:",s)}},rn=()=>{const u=window.location.href;navigator.clipboard.writeText(u).then(()=>{}),Pe.value.showNotification("–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∏–ª—å–º —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞")};function St(u){return u.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"HDRezka - ").replace(/KODIK>/,"Kodik - ").trim()}const un=()=>{try{Se.value&&(Se.value.disconnect(),Se.value=null),he.value&&(he.value.close(),he.value=null),ye.value=null,Ge.value=null,Ye.value=null,Ae.value=null,ae.value=!1}catch(u){console.log("Error cleaning up audio context:",u)}},dn=u=>{var s;if(((s=m.value)==null?void 0:s.key)===u.key){re();return}m.value=u,L.value=!0,le.value=!1,ae.value=!1,Ae.value=null,W.value&&je(),ge.value&&(clearInterval(ge.value),ge.value=null),xe.value&&(clearInterval(xe.value),xe.value=null),u.key.toLowerCase().includes("torrents")||n.updatePreferredPlayer(mt(u.key)),R("update:selectedPlayer",u)};We(m,u=>{u&&(L.value=!0,le.value=!1,ae.value=!1,Ae.value=null,W.value&&je(),ge.value&&(clearInterval(ge.value),ge.value=null),xe.value&&(clearInterval(xe.value),xe.value=null),u.key.toLowerCase().includes("torrents")||n.updatePreferredPlayer(mt(u.key)),R("update:selectedPlayer",u))}),We(()=>A.params.kp_id,async u=>{u&&u!==h.value&&(h.value=u,le.value=!1,ae.value=!1,Ae.value=null,W.value&&je(),ge.value&&(clearInterval(ge.value),ge.value=null),xe.value&&(clearInterval(xe.value),xe.value=null),ct.value=0,_e.value&&X())},{immediate:!0}),We(ne,u=>{if(S.value)if(u&&!W.value){const s=()=>{if(I.value)try{const f=I.value,w=f.contentDocument||f.contentWindow.document;if(w){const C=w.querySelector("video");if(C){const H=Date.now()-(window.iframeLoadTime||0);H>=3e3?fe(w,C):setTimeout(s,3e3-H)}}}catch(f){console.log("Error creating overlay via watcher:",f),De.value=!1}};s()}else!u&&W.value&&je()}),We(vt,(u,s)=>{if(!S.value)return;const f=s&&s.length>0,w=u&&u.length>0;!f&&w&&(ne.value||(ne.value=!0,window.electronAPI&&window.electronAPI.showToast("–û–≤–µ—Ä–ª–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á—ë–Ω - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ç–∞–π–º–∏–Ω–≥–∏")))},{deep:!0});const Bt=["16:9","12:5","4:3"],cn=()=>{const s=(Bt.indexOf(Ie.value)+1)%Bt.length;Vt(Bt[s])},Jt=u=>{var f,w,C,H,V,se,ue,G,me,Ee,Me,be,de;return(de={[K.FAVORITE]:((w=(f=M.movieInfo)==null?void 0:f.lists)==null?void 0:w.isFavorite)||!1,[K.HISTORY]:((H=(C=M.movieInfo)==null?void 0:C.lists)==null?void 0:H.isHistory)||!1,[K.LATER]:((se=(V=M.movieInfo)==null?void 0:V.lists)==null?void 0:se.isLater)||!1,[K.COMPLETED]:((G=(ue=M.movieInfo)==null?void 0:ue.lists)==null?void 0:G.isCompleted)||!1,[K.ABANDONED]:((Ee=(me=M.movieInfo)==null?void 0:me.lists)==null?void 0:Ee.isAbandoned)||!1,[K.WATCHING]:((be=(Me=M.movieInfo)==null?void 0:Me.lists)==null?void 0:be.isWatching)||!1}[u])!=null?de:!1},st=async u=>{if(!T.token){Pe.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:vn});return}try{const s={[K.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[K.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[K.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[K.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[K.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[K.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};Jt(u)?(await Vn(h.value,u),Pe.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(s[u]))):(await mn(h.value,u),Pe.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(s[u])))}catch(s){const{message:f,code:w}=wt(s);Pe.value.showNotification("".concat(f," ").concat(w))}R("update:movieInfo")},vn=()=>{y.push("/login")},At=F(()=>n.showFavoriteTooltip),Ft=()=>{y.push("/settings"),Q()},d=async()=>{if(!S.value){Ut("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank");return}if(I.value)try{const u=I.value,s=u.contentDocument||u.contentWindow.document;if(!s)return;const f=s.querySelector("video");if(!f)return;document.pictureInPictureElement?await document.exitPictureInPicture():document.pictureInPictureEnabled?await f.requestPictureInPicture():Ut('–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–∂–∏–º "–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ"')}catch(u){console.error("Error toggling PiP:",u),Ut('–ù–µ —É–¥–∞–ª–æ—Å—å –≤–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º "–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ"')}},o=()=>{if(ne.value=!ne.value,!ne.value)je();else{const u=()=>{if(!W.value&&I.value)try{const s=I.value,f=s.contentDocument||s.contentWindow.document;if(f){const w=f.querySelector("video");if(w){const C=Date.now()-(window.iframeLoadTime||0);C>=3e3?fe(f,w):setTimeout(u,3e3-C)}}}catch(s){console.log("Error creating overlay:",s),De.value=!1}};u()}},O=()=>{if(!S.value)return;const u=I.value,s=u.contentDocument||u.contentWindow.document;if(!s||s.getElementById("overlay-settings-modal"))return;const f=Ve.value,w=s.createElement("div");w.id="overlay-settings-modal",w.style.cssText="\n    position: fixed !important;\n    top: 0 !important;\n    left: 0 !important;\n    width: 100% !important;\n    height: 100% !important;\n    background: rgba(0, 0, 0, 0.8) !important;\n    display: flex !important;\n    align-items: center !important;\n    justify-content: center !important;\n    z-index: 9999 !important;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n  ";const C=s.createElement("div");C.style.cssText="\n    background: rgba(30, 30, 30, 0.95) !important;\n    backdrop-filter: blur(20px) !important;\n    border-radius: 16px !important;\n    padding: 32px !important;\n    max-width: 400px !important;\n    width: 90% !important;\n    border: 1px solid rgba(255, 255, 255, 0.1) !important;\n    box-shadow: 0 8px 40px rgba(0, 0, 0, 0.5) !important;\n  ",C.innerHTML='\n    <h3 style="color: #ff6b35; margin: 0 0 24px 0; font-size: 20px; font-weight: 600; text-align: center;">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–≤–µ—Ä–ª–µ—è</h3>\n    \n    <div style="display: flex; flex-direction: column; gap: 16px;">\n      <label style="display: flex; align-items: center; gap: 12px; color: white; cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(255, 255, 255, 0.05);">\n        <input type="checkbox" id="showTitle" '.concat(f.showTitle?"checked":"",' style="width: 18px; height: 18px; accent-color: #ff6b35;">\n        <span style="font-size: 16px;">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞</span>\n      </label>\n      \n      <label style="display: flex; align-items: center; gap: 12px; color: white; cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(255, 255, 255, 0.05);">\n        <input type="checkbox" id="showDuration" ').concat(f.showDuration?"checked":"",' style="width: 18px; height: 18px; accent-color: #ff6b35;">\n        <span style="font-size: 16px;">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</span>\n      </label>\n      \n\n    </div>\n    \n    <div style="display: flex; gap: 12px; margin-top: 24px; justify-content: center;">\n      <button id="saveSettings" style="background: #ff6b35; color: white; border: none; border-radius: 8px; padding: 10px 20px; cursor: pointer; font-size: 16px; font-weight: 500; transition: all 0.3s ease;">\n        –°–æ—Ö—Ä–∞–Ω–∏—Ç—å\n      </button>\n      <button id="cancelSettings" style="background: rgba(255, 255, 255, 0.1); color: rgba(255, 255, 255, 0.8); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; padding: 10px 16px; cursor: pointer; font-size: 14px; transition: all 0.3s ease;">\n        –û—Ç–º–µ–Ω–∞\n      </button>\n    </div>\n  '),w.appendChild(C),w.addEventListener("click",V=>{V.target===w&&w.remove()}),C.querySelector("#saveSettings").addEventListener("click",()=>{var se;const V={showTitle:C.querySelector("#showTitle").checked,showDuration:C.querySelector("#showDuration").checked};Ve.value=V,(se=window.electronAPI)==null||se.showToast("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–≤–µ—Ä–ª–µ—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã"),w.remove()}),C.querySelector("#cancelSettings").addEventListener("click",()=>{w.remove()}),C.querySelectorAll("button").forEach(V=>{V.addEventListener("mouseenter",()=>{V.id==="saveSettings"?(V.style.background="#e55a2b",V.style.transform="translateY(-1px)"):V.style.background="rgba(255, 255, 255, 0.15)"}),V.addEventListener("mouseleave",()=>{V.id==="saveSettings"?(V.style.background="#ff6b35",V.style.transform="translateY(0)"):V.style.background="rgba(255, 255, 255, 0.1)"})}),s.body.appendChild(w)},fe=(u,s)=>{if(!ne.value||W.value||De.value)return;De.value=!0;const f=u.createElement("div");f.id="reyohoho-video-overlay";let w=()=>{f.style.cssText="\n      position: absolute !important;\n      top: 0 !important;\n      left: 0 !important;\n      width: 100% !important;\n      height: 100% !important;\n      pointer-events: none !important;\n      z-index: 999999999 !important;\n      display: flex !important;\n      flex-direction: column !important;\n      justify-content: space-between !important;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n      visibility: visible !important;\n      opacity: 1 !important;\n    "};const C=u.createElement("div");C.style.cssText="\n    background: linear-gradient(180deg, rgba(0, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0.4) 70%, transparent 100%) !important;\n    color: white !important;\n    padding: 20px !important;\n    text-align: left !important;\n    pointer-events: none !important;\n  ";const H=u.createElement("div");H.style.cssText="\n    font-size: 20px !important;\n    font-weight: 600 !important;\n    margin-bottom: 8px !important;\n    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8) !important;\n    line-height: 1.2 !important;\n    background: rgba(0, 0, 0, 0.6) !important;\n    padding: 8px 12px !important;\n    border-radius: 6px !important;\n    display: inline-block !important;\n    color: rgba(255, 255, 255, 0.6) !important;\n  ";const V=u.createElement("div");V.style.cssText="\n    font-size: 18px !important;\n    font-weight: 500 !important;\n    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8) !important;\n    display: flex !important;\n    align-items: center !important;\n    gap: 8px !important;\n    flex-wrap: wrap !important;\n    color: rgba(255, 255, 255, 0.6) !important;\n  ";const se=u.createElement("div");se.style.cssText="\n    position: absolute !important;\n    top: 20px !important;\n    right: 110px !important;\n    backdrop-filter: blur(10px) !important;\n    border-radius: 12px !important;\n    padding: 16px !important;\n    min-width: 280px !important;\n    max-width: 400px !important;\n    pointer-events: none !important;\n    display: none !important;\n  ";const ue=u.createElement("div");ue.style.cssText="\n    font-size: 14px !important;\n    color: rgba(255, 255, 255, 0.6) !important;\n    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8) !important;\n    line-height: 1.4 !important;\n    word-wrap: break-word !important;\n  ";const G=u.createElement("div");G.style.cssText="\n    position: absolute !important;\n    top: 20px !important;\n    right: 20px !important;\n    display: flex !important;\n    gap: 8px !important;\n    pointer-events: all !important;\n  ";const me=u.createElement("button");me.style.cssText="\n    background: rgba(0, 0, 0, 0.8) !important;\n    backdrop-filter: blur(10px) !important;\n    color: white !important;\n    border: 1px solid rgba(255, 255, 255, 0.2) !important;\n    border-radius: 50% !important;\n    width: 40px !important;\n    height: 40px !important;\n    display: flex !important;\n    align-items: center !important;\n    justify-content: center !important;\n    cursor: pointer !important;\n    transition: all 0.3s ease !important;\n    font-size: 18px !important;\n  ",me.innerHTML="‚öôÔ∏è",me.title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–≤–µ—Ä–ª–µ—è";const Ee=u.createElement("button");Ee.style.cssText="\n    background: rgba(0, 0, 0, 0.8) !important;\n    backdrop-filter: blur(10px) !important;\n    color: white !important;\n    border: 1px solid rgba(255, 255, 255, 0.2) !important;\n    border-radius: 50% !important;\n    width: 40px !important;\n    height: 40px !important;\n    display: flex !important;\n    align-items: center !important;\n    justify-content: center !important;\n    cursor: pointer !important;\n    transition: all 0.3s ease !important;\n    font-size: 18px !important;\n  ",Ee.innerHTML="üëÅÔ∏è",Ee.title="–û—Ç–∫–ª—é—á–∏—Ç—å –æ–≤–µ—Ä–ª–µ–π",Ee.addEventListener("click",()=>{ne.value=!1}),me.addEventListener("click",()=>{O()}),[me,Ee].forEach(ee=>{ee.addEventListener("mouseenter",()=>{ee.style.background="#ff6b35",ee.style.borderColor="#ff6b35",ee.style.transform="scale(1.1)"}),ee.addEventListener("mouseleave",()=>{ee.style.background="rgba(0, 0, 0, 0.8)",ee.style.borderColor="rgba(255, 255, 255, 0.2)",ee.style.transform="scale(1)"})}),G.appendChild(me),G.appendChild(Ee),se.appendChild(ue),C.appendChild(H),C.appendChild(V),f.appendChild(C),f.appendChild(se),f.appendChild(G),G.style.transition="opacity 0.3s ease",G.style.opacity="0.8",G.style.visibility="visible",C.style.transition="opacity 0.3s ease";let Me=null;const be=()=>{G.style.opacity="1",C.style.opacity="0",clearTimeout(ut.value),clearTimeout(Me),ut.value=setTimeout(()=>{G.style.opacity="0.8"},3e3),Me=setTimeout(()=>{C.style.opacity="1"},2e3)};u.addEventListener("mousemove",be),f.addEventListener("mouseenter",()=>{G.style.opacity="1",C.style.opacity="0",clearTimeout(Me)}),f.addEventListener("mouseleave",()=>{clearTimeout(ut.value),clearTimeout(Me),G.style.opacity="0.8",C.style.opacity="1"}),f._mouseHandler=be;const c=(ee=>{let He=ee.parentNode,qe=0;const pt=5;for(;He&&qe<pt;){const Lt=u.defaultView.getComputedStyle(He),It=He.getBoundingClientRect();if(It.width>0&&It.height>0&&(Lt.position==="relative"||Lt.position==="absolute"||Lt.position==="fixed"||He.tagName==="BODY"))return He;He=He.parentNode,qe++}return ee.parentNode})(s);f._targetContainer=c,f._videoElement=s,w=()=>{const ee=f._videoElement.getBoundingClientRect(),He=f._targetContainer.getBoundingClientRect(),qe=ee.top-He.top,pt=ee.left-He.left;f.style.cssText="\n      position: absolute !important;\n      top: ".concat(qe,"px !important;\n      left: ").concat(pt,"px !important;\n      width: ").concat(ee.width,"px !important;\n      height: ").concat(ee.height,"px !important;\n      pointer-events: none !important;\n      z-index: 999999999 !important;\n      display: flex !important;\n      flex-direction: column !important;\n      justify-content: space-between !important;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n      visibility: visible !important;\n      opacity: 1 !important;\n      box-sizing: border-box !important;\n    ")},s.style.position="relative",(c.style.position===""||c.style.position==="static")&&(c.style.position="relative"),c.appendChild(f),w(),W.value=f,De.value=!1;const we=setInterval(()=>{if(!W.value||!ne.value){clearInterval(we);return}if(!u.body.contains(f))try{const qe=u.querySelectorAll("video");if(qe.length>0){const pt=qe[0];f._videoElement=pt;const It=(zt=>{let bt=zt.parentNode,qt=0;const en=5;for(;bt&&qt<en;){const $t=u.defaultView.getComputedStyle(bt),Wt=bt.getBoundingClientRect();if(Wt.width>0&&Wt.height>0&&($t.position==="relative"||$t.position==="absolute"||$t.position==="fixed"||bt.tagName==="BODY"))return bt;bt=bt.parentNode,qt++}return zt.parentNode})(pt);f._targetContainer=It,It.appendChild(f),w(),f._mouseHandler&&(u.removeEventListener("mousemove",f._mouseHandler),u.addEventListener("mousemove",f._mouseHandler))}}catch(qe){console.log("Error re-adding overlay to DOM:",qe)}const ee=u.defaultView.getComputedStyle(f);if((ee.visibility==="hidden"||ee.display==="none"||ee.opacity==="0")&&w(),(parseInt(ee.zIndex)||0)<999999999&&w(),f._videoElement&&f._targetContainer){const qe=f._videoElement.getBoundingClientRect(),pt=parseInt(ee.width)||0,Lt=parseInt(ee.height)||0;(Math.abs(pt-qe.width)>5||Math.abs(Lt-qe.height)>5)&&w()}},1e3),Re=new window.MutationObserver(ee=>{ee.forEach(He=>{He.type==="attributes"&&He.target===f&&He.attributeName==="style"&&setTimeout(()=>{W.value&&ne.value&&w()},100)})});Re.observe(f,{attributes:!0,attributeFilter:["style","class"]});const Rt=()=>{W.value&&ne.value&&w()};u.defaultView.addEventListener("resize",Rt),f._monitorInterval=we,f._mutationObserver=Re,f._resizeHandler=Rt,f._iframeDoc=u;const at=setInterval(()=>{if(!W.value||!ne.value){clearInterval(at);return}w()},500);setTimeout(()=>{clearInterval(at)},1e4)},it=()=>{var G,me,Ee,Me,be;if(!W.value||!ne.value)return;const u=I.value;if(!u)return;const s=u.contentDocument||u.contentWindow.document;if(!s)return;const f=W.value,w=f.children[0],C=f.children[1],H=s.defaultView.getComputedStyle(f);(H.display==="none"||H.visibility==="hidden")&&(f.style.display="flex !important",f.style.visibility="visible !important");const V=w.children[0];if(Ve.value.showTitle){V.style.display="block";const de=((G=M.movieInfo)==null?void 0:G.title)||((me=M.movieInfo)==null?void 0:me.name_ru)||((Ee=M.movieInfo)==null?void 0:Ee.name_en)||((Me=M.movieInfo)==null?void 0:Me.name_original)||"–ó–∞–≥—Ä—É–∑–∫–∞...",c=(be=M.movieInfo)!=null&&be.year?" (".concat(M.movieInfo.year,")"):"";V.textContent=de+c}else V.style.display="none";const se=w.children[1];let ue="";if(Ve.value.showDuration){const de=Oe(Be.value),c=Oe(yt.value);ue="\n      <span style=\"font-family: 'Courier New', monospace; background: rgba(0, 0, 0, 0.6); padding: 2px 8px; border-radius: 4px; color: rgba(255, 255, 255, 0.6);\">".concat(de,'</span>\n      <span style="opacity: 0.6;">/</span>\n      <span style="font-family: \'Courier New\', monospace; background: rgba(0, 0, 0, 0.6); padding: 2px 8px; border-radius: 4px; color: rgba(255, 255, 255, 0.6);">').concat(c,"</span>\n    ")}if(ue?(se.style.display="flex",se.innerHTML=ue):se.style.display="none",vt.value.length>0){const de=C.children[0];de.innerHTML="";const c=s.createElement("span");c.textContent="–¢–∞–π–º–∏–Ω–≥–∏: ",c.style.color="rgba(255, 255, 255, 0.6)",de.appendChild(c),vt.value.forEach((oe,we)=>{if(we>0){const Re=s.createElement("span");Re.textContent=", ",Re.style.color="rgba(255, 255, 255, 0.6)",de.appendChild(Re)}oe.intervals.forEach((Re,Rt)=>{if(Rt>0){const ee=s.createElement("span");ee.textContent=", ",ee.style.color="rgba(255, 255, 255, 0.6)",de.appendChild(ee)}const at=s.createElement("span");at.textContent=Re.text,Re.status==="active"?(at.style.color="#ff4444",at.style.fontWeight="bold"):Re.status==="upcoming"?(at.style.color="#ff6b35",at.style.fontWeight="500"):at.style.color="rgba(255, 255, 255, 0.6)",de.appendChild(at)})}),C.style.display="block"}else C.style.display="none"},je=()=>{if(W.value){try{W.value._monitorInterval&&clearInterval(W.value._monitorInterval),W.value._mutationObserver&&W.value._mutationObserver.disconnect(),W.value._resizeHandler&&W.value._iframeDoc&&W.value._iframeDoc.defaultView.removeEventListener("resize",W.value._resizeHandler),W.value._mouseHandler&&W.value._iframeDoc&&W.value._iframeDoc.removeEventListener("mousemove",W.value._mouseHandler),W.value.remove()}catch(u){console.log("Error removing overlay:",u)}W.value=null}De.value=!1,ut.value&&(clearTimeout(ut.value),ut.value=null)};return Tt(()=>{if(L.value=!0,$e(),Y.value&&(Ie.value="4:3"),tt(),window.addEventListener("resize",tt),window.addEventListener("resize",kt),_e.value&&X(),window.toggleCompressor=ht,window.toggleMirror=Fe,S.value&&(rt.value=setInterval(()=>{const u=window.overlayNudityTimings?window.overlayNudityTimings.length:0;u>ct.value?(ct.value=u,ne.value||(ne.value=!0,window.electronAPI&&window.electronAPI.showToast("–û–≤–µ—Ä–ª–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á—ë–Ω - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ç–∞–π–º–∏–Ω–≥–∏"))):ct.value=u},1e3)),S.value&&ne.value){const u=()=>{if(I.value&&!W.value)try{const s=I.value,f=s.contentDocument||s.contentWindow.document;if(f){const w=f.querySelector("video");if(w){const C=Date.now()-(window.iframeLoadTime||0);C>=3e3?fe(f,w):setTimeout(u,3e3-C)}else{const C=setInterval(()=>{try{const H=f.querySelector("video");if(H){clearInterval(C);const V=Date.now()-(window.iframeLoadTime||0);V>=3e3?fe(f,H):setTimeout(()=>fe(f,H),3e3-V)}}catch(H){console.log("Waiting for video element...",H)}},1e3);setTimeout(()=>clearInterval(C),15e3)}}}catch(s){console.log("Error initializing overlay on mount:",s),De.value=!1}};setTimeout(u,1e3)}}),gn(()=>{window.removeEventListener("resize",tt),window.removeEventListener("resize",kt),window.removeEventListener("mousemove",dt),document.removeEventListener("keydown",jt),document.body.classList.remove("no-scroll"),ge.value&&clearInterval(ge.value),xe.value&&clearInterval(xe.value),rt.value&&clearInterval(rt.value),je(),un(),delete window.toggleCompressor,delete window.toggleMirror}),(u,s)=>{var f,w,C,H,V,se,ue,G,me,Ee,Me,be,de,c,oe,we,Re,Rt,at,ee,He,qe,pt,Lt,It,zt,bt,qt,en,$t,Wt,wn,Cn,_n,En,Mn,Ln,xn,In,Tn,Sn,An;return _.value?(i(),Ct(On,{key:0,message:_.value,code:P.value},null,8,["message","code"])):(i(),a(ce,{key:1},[e("div",Ro,[s[43]||(s[43]=e("span",null,"–ü–ª–µ–µ—Ä:",-1)),e("button",{class:"player-btn",onClick:Ue},g(m.value?St(m.value.translate).toUpperCase():"–ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–µ–µ—Ä–æ–≤..."),1)]),N.value?(i(),Ct(Ao,{key:0,players:l.value,"selected-player":m.value,onClose:re,onSelect:dn},null,8,["players","selected-player"])):k("",!0),e("div",{ref_key:"containerRef",ref:j,class:E(["player-container",{"theater-mode":b.value}]),style:Yt(b.value?{}:Et.value)},[e("div",{class:"iframe-wrapper",style:Yt(b.value?{}:U.value)},[ie(e("iframe",{ref_key:"playerIframe",ref:I,src:(f=m.value)==null?void 0:f.iframe,frameborder:"0",allowfullscreen:"",webkitallowfullscreen:"",class:E(["responsive-iframe",{"theater-mode-unlock":$.value,"theater-mode-lock":b.value,dimmed:ze.value}]),onLoad:an},null,42,Po),[[Ce,!L.value&&((w=m.value)==null?void 0:w.iframe)]]),L.value?(i(),Ct(qn,{key:0,text:"–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–ª–µ–µ—Ä: ".concat(m.value?St(m.value.translate):"–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ –ø–ª–µ–µ—Ä–æ–≤","\n–ï—Å–ª–∏ –ø–ª–µ–µ—Ä –Ω–µ –≥—Ä—É–∑–∏—Ç—Å—è, —Ç–æ —Å–º–µ–Ω–∏—Ç–µ –ø–ª–µ–µ—Ä –≤—ã—à–µ –∏–ª–∏ –≤–∫–ª—é—á–∏—Ç–µ VPN"),style:{"white-space":"pre-line"}},null,8,["text"])):k("",!0)],4),b.value?(i(),a("button",{key:0,class:E(["close-theater-btn",{visible:$.value}]),onClick:Qe}," ‚úñ ",2)):k("",!0)],6),b.value?k("",!0):(i(),a("div",No,[e("div",jo,[Y.value?k("",!0):(i(),a("div",{key:0,ref_key:"tooltipContainer",ref:et,class:"tooltip-container list-buttons-container","data-tooltip-container":"favorite"},[At.value?(i(),a("button",{key:0,class:E(["favorite-btn",{active:(H=(C=r.movieInfo)==null?void 0:C.lists)==null?void 0:H.isFavorite}]),onMouseenter:s[0]||(s[0]=z=>ke("favorite")),onMouseleave:Ze,onClick:s[1]||(s[1]=z=>st(Z(K).FAVORITE))},[e("span",Bo,g((se=(V=r.movieInfo)==null?void 0:V.lists)!=null&&se.isFavorite?"favorite":"favorite_border"),1),e("span",{class:E(["material-icons dropdown-arrow",{highlighted:Dt.value}])},"expand_more",2)],34)):k("",!0),ie(e("div",{ref_key:"tooltip",ref:q,class:"custom-tooltip advanced-tooltip list-buttons-dropdown","data-tooltip":"favorite",onMouseenter:x,onMouseleave:Q},[e("div",$o,[e("button",{class:E(["favorite-btn",{active:(G=(ue=r.movieInfo)==null?void 0:ue.lists)==null?void 0:G.isFavorite}]),onClick:s[2]||(s[2]=z=>st(Z(K).FAVORITE))},[e("span",Uo,g((Ee=(me=r.movieInfo)==null?void 0:me.lists)!=null&&Ee.isFavorite?"favorite":"favorite_border"),1),s[44]||(s[44]=e("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))],2)]),e("div",Ho,[e("button",{class:E(["watching-btn",{active:(be=(Me=r.movieInfo)==null?void 0:Me.lists)==null?void 0:be.isWatching}]),onClick:s[3]||(s[3]=z=>st(Z(K).WATCHING))},[e("span",Do,g((c=(de=r.movieInfo)==null?void 0:de.lists)!=null&&c.isWatching?"visibility":"visibility_off"),1),s[45]||(s[45]=e("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))],2)]),e("div",Oo,[e("button",{class:E(["later-btn",{active:(we=(oe=r.movieInfo)==null?void 0:oe.lists)==null?void 0:we.isLater}]),onClick:s[4]||(s[4]=z=>st(Z(K).LATER))},s[46]||(s[46]=[e("span",{class:"material-icons"},"watch_later",-1),e("span",{class:"button-label"},"–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ",-1)]),2)]),e("div",Vo,[e("button",{class:E(["completed-btn",{active:(Rt=(Re=r.movieInfo)==null?void 0:Re.lists)==null?void 0:Rt.isCompleted}]),onClick:s[5]||(s[5]=z=>st(Z(K).COMPLETED))},[e("span",Fo,g((ee=(at=r.movieInfo)==null?void 0:at.lists)!=null&&ee.isCompleted?"check_circle":"check_circle_outline"),1),s[47]||(s[47]=e("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))],2)]),e("div",zo,[e("button",{class:E(["abandoned-btn",{active:(qe=(He=r.movieInfo)==null?void 0:He.lists)==null?void 0:qe.isAbandoned}]),onClick:s[6]||(s[6]=z=>st(Z(K).ABANDONED))},[e("span",qo,g(((Lt=(pt=r.movieInfo)==null?void 0:pt.lists)!=null&&Lt.isAbandoned,"not_interested")),1),s[48]||(s[48]=e("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))],2)]),e("div",{class:"tooltip-hint"},[s[50]||(s[50]=e("span",{class:"material-icons"},"settings",-1)),e("span",null,[s[49]||(s[49]=te("–°—Ç–∏–ª—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ ")),e("a",{class:"settings-link",onClick:Ft},"–Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö")])])],544),[[Ce,D.value==="favorite"&&At.value]])],512)),Y.value?k("",!0):(i(),a(ce,{key:1},[e("div",Wo,[e("button",{class:E(["dimming-btn",{active:ze.value}]),onMouseenter:s[7]||(s[7]=z=>ke("dimming")),onMouseleave:s[8]||(s[8]=z=>D.value=null),onClick:nn},[e("span",Ko,g(ze.value?"light_mode":"dark_mode"),1)],34),ie(e("div",{class:"custom-tooltip","data-tooltip":"dimming"},g(ze.value?"–û—Ç–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ":"–í–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ"),513),[[Ce,D.value==="dimming"]])]),e("div",Go,[e("button",{class:E(["blur-btn",{"electron-only":!S.value}]),onMouseenter:s[9]||(s[9]=z=>ke("blur")),onMouseleave:s[10]||(s[10]=z=>D.value=null),onClick:Xe},s[51]||(s[51]=[e("span",{class:"material-icons"},"blur_on",-1)]),34),ie(e("div",{class:"custom-tooltip","data-tooltip":"blur"},g(S.value?"–ë–ª—é—Ä":"–ë–ª—é—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[Ce,D.value==="blur"]])]),e("div",Yo,[e("button",{class:E(["material-symbols-outlined",{active:Mt.value,"electron-only":!S.value}]),onMouseenter:s[11]||(s[11]=z=>ke("compressor")),onMouseleave:s[12]||(s[12]=z=>D.value=null),onClick:ht},s[52]||(s[52]=[e("span",{class:"material-icons"},"graphic_eq",-1)]),34),ie(e("div",{class:"custom-tooltip","data-tooltip":"compressor"},g(S.value?"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä":"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[Ce,D.value==="compressor"]])]),e("div",Zo,[e("button",{class:E(["mirror-btn",{active:xt.value,"electron-only":!S.value}]),onMouseenter:s[13]||(s[13]=z=>ke("mirror")),onMouseleave:s[14]||(s[14]=z=>D.value=null),onClick:Fe},s[53]||(s[53]=[e("span",{class:"material-icons"},"flip",-1)]),34),ie(e("div",{class:"custom-tooltip","data-tooltip":"mirror"},g(S.value?"–ó–µ—Ä–∫–∞–ª–æ":"–ó–µ—Ä–∫–∞–ª–æ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[Ce,D.value==="mirror"]])]),e("div",Xo,[e("button",{class:"theater-mode-btn",onMouseenter:s[15]||(s[15]=z=>ke("theater")),onMouseleave:s[16]||(s[16]=z=>D.value=null),onClick:Qe},[e("span",Qo,g(b.value?"fullscreen_exit":"aspect_ratio"),1)],32),ie(e("div",Jo,[te(g(b.value?"–í—ã–π—Ç–∏ –∏–∑ —Ç–µ–∞—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞":"–¢–µ–∞—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º")+" ",1),s[54]||(s[54]=e("span",{class:"shortcut-hint"},"Alt+T",-1))],512),[[Ce,D.value==="theater"]])]),e("div",el,[e("button",{class:E(["pip-btn",{"electron-only":!S.value}]),onMouseenter:s[17]||(s[17]=z=>ke("pip")),onMouseleave:s[18]||(s[18]=z=>D.value=null),onClick:d},s[55]||(s[55]=[e("span",{class:"material-icons"},"picture_in_picture_alt",-1)]),34),ie(e("div",{class:"custom-tooltip","data-tooltip":"pip"},g(S.value?"–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ":"–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[Ce,D.value==="pip"]])]),e("div",tl,[e("button",{class:"aspect-ratio-dropdown-btn",onMouseenter:s[19]||(s[19]=z=>ke("aspect_ratio")),onMouseleave:Ze,onClick:cn},[e("span",nl,g(Ie.value),1)],32),ie(e("div",{class:"custom-tooltip advanced-tooltip aspect-ratio-dropdown","data-tooltip":"aspect_ratio",onMouseenter:x,onMouseleave:Q},[(i(),a(ce,null,Te(Bt,z=>e("div",{key:z,class:E(["aspect-ratio-option",{active:Ie.value===z}]),onClick:$u=>Vt(z)},g(z),11,ol)),64))],544),[[Ce,D.value==="aspect_ratio"]])]),e("div",{class:"tooltip-container","data-tooltip-container":"centering",onMouseenter:s[21]||(s[21]=z=>ke("centering")),onMouseleave:Ze},[e("button",{class:"center-btn",onClick:X},s[56]||(s[56]=[e("span",{class:"material-icons"},"center_focus_strong",-1)])),ie(e("div",{class:"custom-tooltip advanced-tooltip","data-tooltip":"centering",onMouseenter:x,onMouseleave:Q},[s[57]||(s[57]=te(" –û—Ç—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–ª–µ–µ—Ä ")),Le(go,{modelValue:_e.value,"onUpdate:modelValue":s[20]||(s[20]=z=>_e.value=z),title:"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞"},null,8,["modelValue"]),s[58]||(s[58]=e("span",{class:"tooltip-title"},"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞",-1))],544),[[Ce,D.value==="centering"]])],32),S.value?k("",!0):(i(),a("div",ll,[e("button",{class:"app-link-btn",onMouseenter:s[22]||(s[22]=z=>ke("app_link")),onMouseleave:s[23]||(s[23]=z=>D.value=null),onClick:lt},s[59]||(s[59]=[e("span",{class:"material-icons"},"open_in_new",-1)]),32),ie(e("div",sl," –û—Ç–∫—Ä—ã—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ",512),[[Ce,D.value==="app_link"]])])),S.value?(i(),a("div",il,[e("button",{class:"copy-link-btn",onMouseenter:s[24]||(s[24]=z=>ke("copy_link")),onMouseleave:s[25]||(s[25]=z=>D.value=null),onClick:rn},s[60]||(s[60]=[e("span",{class:"material-icons"},"content_copy",-1)]),32),ie(e("div",al," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É ",512),[[Ce,D.value==="copy_link"]])])):k("",!0),S.value?(i(),a("div",rl,[e("button",{class:E(["overlay-btn",{active:ne.value}]),onMouseenter:s[26]||(s[26]=z=>ke("overlay")),onMouseleave:s[27]||(s[27]=z=>D.value=null),onClick:o},[e("span",ul,g(ne.value?"layers":"layers_clear"),1)],34),ie(e("div",{class:"custom-tooltip","data-tooltip":"overlay"},g(ne.value?"–°–∫—Ä—ã—Ç—å –æ–≤–µ—Ä–ª–µ–π –≤–∏–¥–µ–æ":"–ü–æ–∫–∞–∑–∞—Ç—å –æ–≤–µ—Ä–ª–µ–π –≤–∏–¥–µ–æ"),513),[[Ce,D.value==="overlay"]])])):k("",!0)],64))]),!Y.value&&!At.value?(i(),a("div",dl,[e("div",cl,[e("button",{class:E(["favorite-btn",{active:(zt=(It=r.movieInfo)==null?void 0:It.lists)==null?void 0:zt.isFavorite}]),onMouseenter:s[28]||(s[28]=z=>ke("favorite")),onMouseleave:s[29]||(s[29]=z=>D.value=null),onClick:s[30]||(s[30]=z=>st(Z(K).FAVORITE))},[e("span",vl,g((qt=(bt=r.movieInfo)==null?void 0:bt.lists)!=null&&qt.isFavorite?"favorite":"favorite_border"),1)],34),ie(e("div",ml,g("–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"),512),[[Ce,D.value==="favorite"]])]),e("div",fl,[e("button",{class:E(["watching-btn",{active:($t=(en=r.movieInfo)==null?void 0:en.lists)==null?void 0:$t.isWatching}]),onMouseenter:s[31]||(s[31]=z=>ke("watching")),onMouseleave:s[32]||(s[32]=z=>D.value=null),onClick:s[33]||(s[33]=z=>st(Z(K).WATCHING))},[e("span",pl,g((wn=(Wt=r.movieInfo)==null?void 0:Wt.lists)!=null&&wn.isWatching?"visibility":"visibility_off"),1)],34),ie(e("div",gl,g("–°–º–æ—Ç—Ä—é"),512),[[Ce,D.value==="watching"]])]),e("div",yl,[e("button",{class:E(["later-btn",{active:(_n=(Cn=r.movieInfo)==null?void 0:Cn.lists)==null?void 0:_n.isLater}]),onMouseenter:s[34]||(s[34]=z=>ke("later")),onMouseleave:s[35]||(s[35]=z=>D.value=null),onClick:s[36]||(s[36]=z=>st(Z(K).LATER))},s[61]||(s[61]=[e("span",{class:"material-icons"},"watch_later",-1)]),34),ie(e("div",kl,g("–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"),512),[[Ce,D.value==="later"]])]),e("div",hl,[e("button",{class:E(["completed-btn",{active:(Mn=(En=r.movieInfo)==null?void 0:En.lists)==null?void 0:Mn.isCompleted}]),onMouseenter:s[37]||(s[37]=z=>ke("completed")),onMouseleave:s[38]||(s[38]=z=>D.value=null),onClick:s[39]||(s[39]=z=>st(Z(K).COMPLETED))},[e("span",bl,g((xn=(Ln=r.movieInfo)==null?void 0:Ln.lists)!=null&&xn.isCompleted?"check_circle":"check_circle_outline"),1)],34),ie(e("div",wl,g("–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"),512),[[Ce,D.value==="completed"]])]),e("div",Cl,[e("button",{class:E(["abandoned-btn",{active:(Tn=(In=r.movieInfo)==null?void 0:In.lists)==null?void 0:Tn.isAbandoned}]),onMouseenter:s[40]||(s[40]=z=>ke("abandoned")),onMouseleave:s[41]||(s[41]=z=>D.value=null),onClick:s[42]||(s[42]=z=>st(Z(K).ABANDONED))},[e("span",_l,g(((An=(Sn=r.movieInfo)==null?void 0:Sn.lists)!=null&&An.isAbandoned,"not_interested")),1)],34),ie(e("div",El,g("–ë—Ä–æ—à–µ–Ω–æ"),512),[[Ce,D.value==="abandoned"]])])])):k("",!0)])),Le(tn,{ref_key:"notificationRef",ref:Pe},null,512)],64))}}},Hn=gt(Ml,[["__scopeId","data-v-e0727568"]]),Ll={key:0,class:"carousel-container"},xl={class:"carousel-wrapper"},Il=["onClick"],Tl=["src","alt"],Sl={class:"video-name"},Al={key:0,class:"video-player"},Rl=["src"],Pl={__name:"TrailerCarousel",props:{videos:{type:Array,required:!0},activeVideoIndex:{type:Number,default:null}},emits:["select"],setup(r,{emit:t}){const v=Xt(),n=F(()=>v.isMobile),T=r,A=t,y=p(T.activeVideoIndex),h=p(null),M=p(!1),R=p(!1),l=()=>{if(!h.value)return;const{scrollLeft:j,scrollWidth:N,clientWidth:_}=h.value;M.value=j>0,R.value=j<N-_-1},m=j=>{if(!h.value)return;const N=h.value.querySelector(".carousel-item");if(!N)return;const _=N.clientWidth+16;h.value.scrollBy({left:_*j,behavior:"smooth"})},L=j=>{y.value=j,A("select",T.videos[j])},b=()=>l(),$=p([]),I=async j=>{try{return(await fetch("https://img.youtube.com/vi/".concat(j,"/0.jpg"))).ok}catch(N){return!1}};return Tt(async()=>{const j=T.videos.map(async _=>await I(_.videoId)?_:null),N=await Promise.all(j);$.value=N.filter(Boolean),l(),window.addEventListener("resize",b)}),We(()=>T.videos,async j=>{const N=j.map(async P=>await I(P.videoId)?P:null),_=await Promise.all(N);$.value=_.filter(Boolean)}),We(()=>T.activeVideoIndex,j=>{y.value=j}),gn(()=>{window.removeEventListener("resize",b)}),(j,N)=>$.value.length?(i(),a("div",Ll,[N[4]||(N[4]=e("h2",null,"–¢—Ä–µ–π–ª–µ—Ä—ã (YouTube)",-1)),e("div",xl,[ie(e("button",{class:"scroll-button left",onClick:N[0]||(N[0]=_=>m(-1))},N[2]||(N[2]=[e("span",{class:"material-symbols-outlined"},"arrow_back_ios",-1)]),512),[[Ce,!n.value&&M.value]]),e("div",{ref_key:"carousel",ref:h,class:"carousel",onScroll:l},[(i(!0),a(ce,null,Te($.value,(_,P)=>(i(),a("div",{key:P,class:"carousel-item",onClick:B=>L(P)},[e("img",{src:"https://img.youtube.com/vi/".concat(_.videoId,"/0.jpg"),alt:_.name},null,8,Tl),e("div",Sl,g(_.name),1)],8,Il))),128))],544),ie(e("button",{class:"scroll-button right",onClick:N[1]||(N[1]=_=>m(1))},N[3]||(N[3]=[e("span",{class:"material-symbols-outlined"},"arrow_forward_ios",-1)]),512),[[Ce,!n.value&&R.value]])]),y.value!==null?(i(),a("div",Al,[e("iframe",{src:r.videos[y.value].iframeUrl,frameborder:"0",allowfullscreen:""},null,8,Rl)])):k("",!0)])):k("",!0)}},Nl=gt(Pl,[["__scopeId","data-v-4a5806b3"]]),jl={class:"rating-container"},Bl={class:"rating-display"},$l={class:"rating-numbers"},Ul=["onClick","onMouseenter"],Hl={key:0,class:"tooltip-footer"},Dl={class:"rating-numbers mobile-rating-numbers"},Ol=["onClick"],Vl={key:0,class:"mobile-modal-footer"},Fl={__name:"MovieRating",props:{kpId:{type:String,required:!0},showDash:{type:Boolean,default:!1}},setup(r){const t=Xt(),v=Qt(),n=r,T=p(null),A=p(null),y=p(null),h=p(null),M=p(0),R=p(!1),l=p(!1);let m=null;const L=B=>B?B.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",b=()=>{m=setTimeout(()=>{R.value=!1,t.isMobile||(l.value=!1)},100)},$=()=>{m&&(clearTimeout(m),m=null),R.value=!0},I=()=>{t.isMobile&&(l.value=!l.value)},j=()=>{v.push("/login")},N=async()=>{try{const B=await Kn(n.kpId);A.value=B.user_rating,y.value=B.average_rating,h.value=L(B.vote_count)}catch(B){console.error("Error loading rating:",B)}},_=async B=>{var J;try{B===A.value?(await Rn(n.kpId,null),A.value=null,T.value.showNotification("–û—Ü–µ–Ω–∫–∞ —É–¥–∞–ª–µ–Ω–∞")):(await Rn(n.kpId,B),A.value=B,T.value.showNotification("–û—Ü–µ–Ω–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞")),t.isMobile&&(l.value=!1),N()}catch(Y){console.error("Error setting rating:",Y),((J=Y.response)==null?void 0:J.status)===401?T.value.showNotification('–î–ª—è –æ—Ü–µ–Ω–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:j}):T.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ü–µ–Ω–∫–∏"),t.isMobile&&(l.value=!1)}},P=()=>{l.value=!1};return Tt(()=>{N()}),(B,J)=>(i(),a("div",jl,[e("div",Bl,[e("a",{href:"#",class:E(["rating-link",{"has-rating":A.value}]),onMouseenter:J[0]||(J[0]=Y=>R.value=!0),onMouseleave:b,onClick:_t(I,["prevent"])},[J[3]||(J[3]=e("img",{src:mo,alt:"ReYohoho",class:"rating-logo"},null,-1)),e("span",{class:E(["average-rating",Z(Gt)(y.value)])},g(y.value?y.value.toFixed(1).replace(/\.0$/,""):"‚Äî"),3)],34),ie(e("div",{class:"rating-tooltip",onMouseenter:$,onMouseleave:b},[e("div",$l,[(i(),a(ce,null,Te(10,Y=>e("button",{key:Y,class:E(["number-btn",{active:Y===A.value,hover:Y===M.value,"average-highlight":y.value&&Y<=Math.round(y.value)}]),onClick:S=>_(Y),onMouseenter:S=>M.value=Y,onMouseleave:J[1]||(J[1]=S=>M.value=0)},g(Y),43,Ul)),64))]),h.value?(i(),a("div",Hl,"–û—Ü–µ–Ω–æ–∫: "+g(h.value),1)):k("",!0)],544),[[Ce,(R.value||l.value)&&!Z(t).isMobile]])]),Le(tn,{ref_key:"notificationRef",ref:T},null,512),Z(t).isMobile&&l.value?(i(),a("div",{key:0,class:"mobile-modal-overlay",onClick:P},[e("div",{class:"mobile-modal",onClick:J[2]||(J[2]=_t(()=>{},["stop"]))},[e("div",{class:"mobile-modal-header"},[J[4]||(J[4]=e("h3",null,"–û—Ü–µ–Ω–∏—Ç—å —Ñ–∏–ª—å–º",-1)),e("button",{class:"close-button",onClick:P},"√ó")]),e("div",Dl,[(i(),a(ce,null,Te(10,Y=>e("button",{key:Y,class:E(["number-btn",{active:Y===A.value,"average-highlight":y.value&&Y<=Math.round(y.value)}]),onClick:S=>_(Y)},g(Y),11,Ol)),64))]),h.value?(i(),a("div",Vl,"–û—Ü–µ–Ω–æ–∫: "+g(h.value),1)):k("",!0)])])):k("",!0)]))}},zl=gt(Fl,[["__scopeId","data-v-2df64bd5"]]),ql={name:"EmojiPicker",props:{isVisible:{type:Boolean,default:!1}},emits:["emoji-selected","mouse-enter","mouse-leave","close"],data(){return{activeCategory:"smileys",categories:[{name:"smileys",icon:"üòÄ",emojis:["üòÄ","üòÉ","üòÑ","üòÅ","üòÜ","üòÖ","üòÇ","ü§£","üòä","üòá","üôÇ","üôÉ","üòâ","üòå","üòç","ü•∞","üòò","üòó","üòô","üòö","üòã","üòõ","üòù","üòú","ü§™","ü§®","üßê","ü§ì","üòé","ü§©","ü•≥"]},{name:"emotions",icon:"üò¢",emojis:["üò•","üò¢","üò≠","üò§","üò†","üò°","ü§¨","ü§Ø","üò≥","ü•µ","ü•∂","üò±","üò®","üò∞","üò•","üòì","ü§ó","ü§î","ü§≠","ü§´","ü§•","üò∂","üòê","üòë","üò¨","üôÑ","üòØ","üò¶","üòß","üòÆ","üò≤"]},{name:"gestures",icon:"üëç",emojis:["üëç","üëé","üëå","ü§å","ü§è","‚úåÔ∏è","ü§û","ü§ü","ü§ò","ü§ô","üëà","üëâ","üëÜ","üñï","üëá","‚òùÔ∏è","üëè","üôå","üëê","ü§≤","ü§ù","üôè","‚úçÔ∏è","üí™","ü¶æ","ü¶ø","ü¶µ","ü¶∂","üëÇ","ü¶ª","üëÉ"]},{name:"hearts",icon:"‚ù§Ô∏è",emojis:["‚ù§Ô∏è","üß°","üíõ","üíö","üíô","üíú","ü§é","üñ§","ü§ç","üíî","‚ù£Ô∏è","üíï","üíû","üíì","üíó","üíñ","üíò","üíù","üíü","‚ô•Ô∏è","üíØ","üí¢","üí•","üí´","üí¶","üí®","üï≥Ô∏è","üí£","üí¨","üëÅÔ∏è‚Äçüó®Ô∏è","üó®Ô∏è"]},{name:"objects",icon:"üéâ",emojis:["üéâ","üéä","üéà","üéÅ","üéÄ","üéÇ","üç∞","üßÅ","üç≠","üç¨","üç´","üç©","üç™","üçï","üçî","üçü","üå≠","ü•™","üåÆ","üåØ","ü•ô","ü•ö","üç≥","ü•ò","üç≤","ü•ó","üçø","üßà","üßÄ","ü•®","ü•Ø"]}]}},computed:{currentEmojis(){const r=this.categories.find(t=>t.name===this.activeCategory);return r?r.emojis:[]}},methods:{selectEmoji(r){this.$emit("emoji-selected",r)}}},Wl={class:"emoji-categories"},Kl=["onClick"],Gl={class:"emoji-grid"},Yl=["onClick"];function Zl(r,t,v,n,T,A){return v.isVisible?(i(),a("div",{key:0,class:"emoji-picker",onMouseenter:t[1]||(t[1]=y=>r.$emit("mouse-enter")),onMouseleave:t[2]||(t[2]=y=>r.$emit("mouse-leave"))},[e("button",{class:"close-btn mobile-only",onClick:t[0]||(t[0]=y=>r.$emit("close"))},t[3]||(t[3]=[e("i",{class:"fas fa-times"},null,-1)])),e("div",Wl,[(i(!0),a(ce,null,Te(T.categories,y=>(i(),a("button",{key:y.name,onClick:h=>T.activeCategory=y.name,class:E([{active:T.activeCategory===y.name},"category-btn"]),type:"button"},g(y.icon),11,Kl))),128))]),e("div",Gl,[(i(!0),a(ce,null,Te(A.currentEmojis,y=>(i(),a("button",{key:y,onClick:h=>A.selectEmoji(y),class:"emoji-btn",type:"button"},g(y),9,Yl))),128))])],32)):k("",!0)}const yn=gt(ql,[["render",Zl],["__scopeId","data-v-209132f3"]]),Xl=async r=>{const t=await Gn();return await r(t)},Ql=async r=>{const{data:t}=await Xl(v=>v.get("/search_emotes/".concat(r)));return t.emotes||[]},Jl={name:"ImagePicker",props:{isVisible:{type:Boolean,required:!0},currentUser:{type:Object,default:null}},emits:["image-selected","mouse-enter","mouse-leave","close","login-required"],setup(r,{emit:t}){const v=p(""),n=p([]),T=p(null),A=p(!1),h=Yn(async m=>{if(!r.currentUser){console.warn("–ü–æ–ø—ã—Ç–∫–∞ –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏");return}if(!m.trim()){n.value=[],A.value=!1;return}A.value=!0;try{n.value=await Ql(m)}catch(L){console.error("Error searching images:",L),n.value=[]}finally{A.value=!1}},300),M=()=>{if(!r.currentUser){t("login-required");return}v.value.trim()&&(A.value=!0),h(v.value)},R=m=>{if(!r.currentUser){t("login-required");return}t("image-selected",m),t("close")},l=()=>{setTimeout(()=>{r.isVisible&&t("mouse-leave")},100)};return We(()=>r.isVisible,m=>{m&&(v.value="",n.value=[],A.value=!1)}),{searchQuery:v,images:n,searchInput:T,isLoading:A,handleSearch:M,selectImage:R,handleInputBlur:l}}},es={key:0,class:"auth-required"},ts={class:"auth-message"},ns={key:1},os={class:"image-picker-header"},ls={class:"image-content"},ss={key:0,class:"loading-spinner"},is={key:1,class:"image-grid"},as=["onClick"],rs=["src","alt"],us={key:2,class:"no-images"},ds={key:3,class:"no-search"};function cs(r,t,v,n,T,A){return v.isVisible?(i(),a("div",{key:0,class:"image-picker",onMouseenter:t[7]||(t[7]=y=>r.$emit("mouse-enter")),onMouseleave:t[8]||(t[8]=y=>r.$emit("mouse-leave")),onClick:t[9]||(t[9]=_t(()=>{},["stop"]))},[e("button",{class:"close-btn mobile-only",onClick:t[0]||(t[0]=y=>r.$emit("close"))},t[10]||(t[10]=[e("i",{class:"fas fa-times"},null,-1)])),v.currentUser?(i(),a("div",ns,[e("div",os,[ie(e("input",{ref:"searchInput",type:"text","onUpdate:modelValue":t[2]||(t[2]=y=>n.searchQuery=y),placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–º–∞–π–ª–∞ 7tv",class:"image-search-input",onInput:t[3]||(t[3]=(...y)=>n.handleSearch&&n.handleSearch(...y)),onClick:t[4]||(t[4]=_t(()=>{},["stop"])),onFocus:t[5]||(t[5]=y=>r.$emit("mouse-enter")),onBlur:t[6]||(t[6]=(...y)=>n.handleInputBlur&&n.handleInputBlur(...y))},null,544),[[Pt,n.searchQuery]])]),e("div",ls,[n.isLoading?(i(),a("div",ss,t[14]||(t[14]=[e("div",{class:"spinner"},null,-1),e("p",null,"–ü–æ–∏—Å–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...",-1)]))):n.images.length>0?(i(),a("div",is,[(i(!0),a(ce,null,Te(n.images,(y,h)=>(i(),a("div",{key:h,class:"image-item",onClick:M=>n.selectImage(y)},[e("img",{src:y,alt:"Image "+(h+1)},null,8,rs)],8,as))),128))])):n.searchQuery.trim()?(i(),a("div",us,t[15]||(t[15]=[e("p",null,"–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤",-1)]))):(i(),a("div",ds,t[16]||(t[16]=[e("p",null,"–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞",-1)])))])])):(i(),a("div",es,[e("div",ts,[t[11]||(t[11]=e("i",{class:"fas fa-lock"},null,-1)),t[12]||(t[12]=e("h3",null,"–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è",-1)),t[13]||(t[13]=e("p",null,"–î–ª—è –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç",-1)),e("button",{class:"login-button",onClick:t[1]||(t[1]=y=>r.$emit("login-required"))},"–í–æ–π—Ç–∏")])]))],32)):k("",!0)}const kn=gt(Jl,[["render",cs],["__scopeId","data-v-f33eb3f6"]]),vs={name:"LinkModal",props:{isVisible:{type:Boolean,default:!1},selectedText:{type:String,default:""}},emits:["close","submit"],setup(r,{emit:t}){const v=p(""),n=p(""),T=p(null),A=p(null),y=F(()=>/^https?:\/\/.+/.test(v.value.trim())&&n.value.trim()),h=()=>{t("close"),R()},M=()=>{y.value&&(t("submit",{url:v.value.trim(),title:n.value.trim()}),h())},R=()=>{v.value="",n.value=""},l=m=>{var L;m.key==="Enter"?(m.preventDefault(),y.value?M():m.target===T.value&&v.value.trim()&&((L=A.value)==null||L.focus())):m.key==="Escape"&&h()};return We(()=>r.isVisible,m=>{m&&(r.selectedText.trim()&&(n.value=r.selectedText.trim()),Je(()=>{var L;(L=T.value)==null||L.focus()}))}),{linkUrl:v,linkTitle:n,urlInput:T,titleInput:A,isValidLink:y,closeModal:h,submitLink:M,handleKeydown:l}}},ms={class:"link-modal-header"},fs={class:"link-modal-content"},ps={class:"form-group"},gs={class:"form-group"},ys={class:"link-modal-footer"},ks=["disabled"];function hs(r,t,v,n,T,A){return v.isVisible?(i(),a("div",{key:0,class:"link-modal-overlay",onClick:t[8]||(t[8]=(...y)=>n.closeModal&&n.closeModal(...y))},[e("div",{class:"link-modal",onClick:t[7]||(t[7]=_t(()=>{},["stop"]))},[e("div",ms,[t[10]||(t[10]=e("h3",null,"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É",-1)),e("button",{class:"close-button",onClick:t[0]||(t[0]=(...y)=>n.closeModal&&n.closeModal(...y))},t[9]||(t[9]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",fs,[e("div",ps,[t[11]||(t[11]=e("label",{for:"link-url"},"URL —Å—Å—ã–ª–∫–∏:",-1)),ie(e("input",{id:"link-url",ref:"urlInput","onUpdate:modelValue":t[1]||(t[1]=y=>n.linkUrl=y),type:"url",placeholder:"https://example.com",class:"link-input",onKeydown:t[2]||(t[2]=(...y)=>n.handleKeydown&&n.handleKeydown(...y))},null,544),[[Pt,n.linkUrl]])]),e("div",gs,[t[12]||(t[12]=e("label",{for:"link-title"},"–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏:",-1)),ie(e("input",{id:"link-title",ref:"titleInput","onUpdate:modelValue":t[3]||(t[3]=y=>n.linkTitle=y),type:"text",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è",class:"link-input",onKeydown:t[4]||(t[4]=(...y)=>n.handleKeydown&&n.handleKeydown(...y))},null,544),[[Pt,n.linkTitle]])])]),e("div",ys,[e("button",{class:"cancel-button",onClick:t[5]||(t[5]=(...y)=>n.closeModal&&n.closeModal(...y))},"–û—Ç–º–µ–Ω–∞"),e("button",{class:"submit-button",disabled:!n.isValidLink,onClick:t[6]||(t[6]=(...y)=>n.submitLink&&n.submitLink(...y))},"–î–æ–±–∞–≤–∏—Ç—å",8,ks)])])])):k("",!0)}const hn=gt(vs,[["render",hs],["__scopeId","data-v-a794d83f"]]);function bs(){const r=p(!1),t=p(!1),v=p(!1),n=()=>{t.value=!0},T=()=>{t.value=!1,setTimeout(()=>{!t.value&&!v.value&&(r.value=!1)},300)},A=()=>{v.value=!0,r.value=!0},y=()=>{v.value=!1,setTimeout(()=>{!t.value&&!v.value&&(r.value=!1)},300)},h=()=>{r.value=!1};return{showEmojiPicker:r,isEmojiHovered:t,isButtonHovered:v,handleEmojiMouseEnter:n,handleEmojiMouseLeave:T,handleButtonMouseEnter:A,handleButtonMouseLeave:y,closeEmojiPicker:h,insertEmoji:(l,m,L,b)=>{const $=m.value;if($){const I=$.selectionStart,j=$.selectionEnd,N=L.value.substring(0,I),_=L.value.substring(j),P=N+l+_;b(P),Je(()=>{$.focus(),$.setSelectionRange(I+l.length,I+l.length),$.style.height&&($.style.height="auto",$.style.height="".concat(Math.min($.scrollHeight,200),"px"))})}else b(L.value+l)},handleGlobalClick:l=>{!l.target.closest(".emoji-picker")&&!l.target.closest(".emoji-button-inline")&&h()}}}function ws(){const r=p(!1),t=p(!1),v=p(!1),n=()=>{t.value=!0},T=()=>{t.value=!1,setTimeout(()=>{!t.value&&!v.value&&(r.value=!1)},300)},A=()=>{v.value=!0,r.value=!0},y=()=>{v.value=!1,setTimeout(()=>{!t.value&&!v.value&&(r.value=!1)},300)},h=()=>{r.value=!1};return{showImagePicker:r,isImageHovered:t,isButtonHovered:v,handleImageMouseEnter:n,handleImageMouseLeave:T,handleImageButtonMouseEnter:A,handleButtonMouseLeave:y,closeImagePicker:h,insertImage:(l,m,L,b)=>{const $=m.value;if($){const I=$.selectionStart,j=$.selectionEnd,N="[img]".concat(l,"[/img]"),_=L.value.slice(0,I)+N+L.value.slice(j);b(_),Je(()=>{$.focus(),$.setSelectionRange(I+N.length,I+N.length),$.style.height&&($.style.height="auto",$.style.height="".concat(Math.min($.scrollHeight,200),"px"))})}else{const I="[img]".concat(l,"[/img]");b(L.value+I)}},handleGlobalClick:l=>{!l.target.closest(".image-picker")&&!l.target.closest(".emoji-button-inline")&&h()}}}function Cs(){const r=p(!1),t=p("");return{showLinkModal:r,selectedTextForLink:t,insertLink:(y,h)=>{const M=y.value;if(M){const R=M.selectionStart,l=M.selectionEnd,m=h.value.slice(R,l);t.value=m.trim()||""}r.value=!0},insertLinkFromModal:(y,h,M,R)=>{const l=h.value;if(l){const m=l.selectionStart,L=l.selectionEnd,b="[link=".concat(y.url,"]").concat(y.title,"[/link]"),$=M.value.slice(0,m)+b+M.value.slice(L);R($),Je(()=>{l.focus(),l.setSelectionRange(m+b.length,m+b.length),l.style.height&&(l.style.height="auto",l.style.height="".concat(Math.min(l.scrollHeight,200),"px"))})}},closeLinkModal:()=>{r.value=!1},insertSpoiler:(y,h,M)=>{const R=y.value;if(R){const l=R.selectionStart,m=R.selectionEnd,L=h.value.slice(l,m);let b;L.trim()?b="[spoiler]".concat(L,"[/spoiler]"):b="[spoiler][/spoiler]";const $=h.value.slice(0,l)+b+h.value.slice(m);M($),Je(()=>{if(R.focus(),L.trim())R.setSelectionRange(l+b.length,l+b.length);else{const I=l+9;R.setSelectionRange(I,I)}R.style.height&&(R.style.height="auto",R.style.height="".concat(Math.min(R.scrollHeight,200),"px"))})}}}}function _s(){return{autoResize:v=>{const n=v==null?void 0:v.target;n&&(n.style.height="auto",n.style.height="".concat(Math.min(n.scrollHeight,200),"px"))},autoResizeElement:v=>{v&&(v.style.height="auto",v.style.height="".concat(Math.min(v.scrollHeight,200),"px"))}}}function bn(){const r=bs(),t=ws(),v=Cs(),{autoResize:n,autoResizeElement:T}=_s(),A=()=>{r.isButtonHovered.value=!0,t.isButtonHovered.value=!0,r.showEmojiPicker.value=!0,t.showImagePicker.value=!1},y=()=>{r.isButtonHovered.value=!0,t.isButtonHovered.value=!0,t.showImagePicker.value=!0,r.showEmojiPicker.value=!1},h=()=>{r.isButtonHovered.value=!1,t.isButtonHovered.value=!1,setTimeout(()=>{!r.isEmojiHovered.value&&!t.isImageHovered.value&&!r.isButtonHovered.value&&!t.isButtonHovered.value&&(r.showEmojiPicker.value=!1,t.showImagePicker.value=!1)},300)},M=()=>{r.showEmojiPicker.value=!1,t.showImagePicker.value=!1},R=I=>{!I.target.closest(".emoji-picker")&&!I.target.closest(".image-picker")&&!I.target.closest(".emoji-button-inline")&&M()},l=(I,j,N,_)=>{r.insertEmoji(I,j,N,_)},m=(I,j,N,_)=>{t.insertImage(I,j,N,_)},L=(I,j,N)=>{v.insertLink(I,j,N)},b=(I,j,N,_)=>{v.insertLinkFromModal(I,j,N,_)},$=(I,j,N)=>{v.insertSpoiler(I,j,N)};return Tt(()=>{document.addEventListener("click",R)}),gn(()=>{document.removeEventListener("click",R)}),{showEmojiPicker:r.showEmojiPicker,handleEmojiMouseEnter:r.handleEmojiMouseEnter,handleEmojiMouseLeave:r.handleEmojiMouseLeave,closeEmojiPicker:r.closeEmojiPicker,showImagePicker:t.showImagePicker,handleImageMouseEnter:t.handleImageMouseEnter,handleImageMouseLeave:t.handleImageMouseLeave,closeImagePicker:t.closeImagePicker,showLinkModal:v.showLinkModal,selectedTextForLink:v.selectedTextForLink,closeLinkModal:v.closeLinkModal,handleButtonMouseEnter:A,handleImageButtonMouseEnter:y,handleButtonMouseLeave:h,closeAllPickers:M,insertEmojiUniversal:l,insertImageUniversal:m,insertLinkUniversal:L,insertLinkFromModalUniversal:b,insertSpoilerUniversal:$,autoResize:n,autoResizeElement:T}}const Es=r=>r===1?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π":r>=2&&r<=4?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è":"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤",Ms=r=>{if(!r)return"?";const t=r.split(" ");return t.length===1?r.slice(0,2).toUpperCase():(t[0][0]+t[t.length-1][0]).toUpperCase()},Ls={name:"CommentItem",components:{EmojiPicker:yn,ImagePicker:kn,LinkModal:hn},props:{comment:{type:Object,required:!0,default:()=>({username:"–ê–Ω–æ–Ω–∏–º",user_avatar:null,content:"",created_at:new Date().toISOString(),rating:0,replies:[]})},currentUser:{type:Object,required:!0,default:()=>({})},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate"],setup(r,{emit:t}){var ke,Ze;const v=Qt(),n=F(()=>{var x;return r.editingCommentId===((x=r.comment)==null?void 0:x.id)}),T=p(((ke=r.comment)==null?void 0:ke.content)||""),A=p(((Ze=r.comment)==null?void 0:Ze.user_rating)||0),y=p(null),h=p(null),{showEmojiPicker:M,showImagePicker:R,showLinkModal:l,selectedTextForLink:m,handleEmojiMouseEnter:L,handleEmojiMouseLeave:b,handleImageMouseEnter:$,handleImageMouseLeave:I,handleButtonMouseEnter:j,handleImageButtonMouseEnter:N,handleButtonMouseLeave:_,closeEmojiPicker:P,closeImagePicker:B,closeLinkModal:J,insertEmojiUniversal:Y,insertImageUniversal:S,insertLinkUniversal:D,insertLinkFromModalUniversal:ve,insertSpoilerUniversal:pe,autoResize:Pe}=bn(),{formatContentWithTruncation:et}=Fn();Tt(async()=>{var x;if((x=r.comment)!=null&&x.user_avatar){const Q=await Zn();y.value="".concat(Q).concat(r.comment.user_avatar)}});const q=F(()=>{var x;return r.currentUser&&((x=r.comment)==null?void 0:x.user_id)===r.currentUser.id}),ge=F(()=>{var x;return r.currentUser&&((x=r.comment)==null?void 0:x.user_id)===r.currentUser.id||r.currentUser&&r.currentUser.is_admin===1}),le=F(()=>{var x,Q,Ie;return((x=r.comment)==null?void 0:x.updated_at)&&((Q=r.comment)==null?void 0:Q.updated_at)!==((Ie=r.comment)==null?void 0:Ie.created_at)}),ae=F(()=>{var x,Q;return(x=r.comment)!=null&&x.is_deleted?!1:(((Q=r.comment)==null?void 0:Q.rating)||0)<=-3}),xe=F(()=>ae.value),rt=p(!1),ct=F(()=>{var x,Q;return(x=r.comment)!=null&&x.is_deleted?null:(((Q=r.comment)==null?void 0:Q.rating)||0)<=-3?"lowRating":null}),he=()=>{var x,Q;t("start-edit",(x=r.comment)==null?void 0:x.id),T.value=((Q=r.comment)==null?void 0:Q.content)||"",Je(()=>{h.value&&(h.value.focus(),Pe({target:h.value}))})},ye=()=>{var x;t("cancel-edit"),T.value=((x=r.comment)==null?void 0:x.content)||""},Se=()=>{var x;T.value.trim()&&t("edit",(x=r.comment)==null?void 0:x.id,T.value.trim())},Ge=()=>{var x;confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π?")&&t("delete",(x=r.comment)==null?void 0:x.id)},Ye=x=>{var Q,Ie;A.value===x?(A.value=0,t("rate",(Q=r.comment)==null?void 0:Q.id,x)):(A.value=x,t("rate",(Ie=r.comment)==null?void 0:Ie.id,x))},Ae=x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),Se())},ne=F(()=>{var x;return et((x=r.comment)==null?void 0:x.content)}),Ve=()=>{console.log("Avatar load error, falling back to initials"),y.value=null,Je(()=>{const x=document.querySelector(".avatar-placeholder");x&&(x.style.display="flex")})},Be=()=>{v.push("/login")},yt=x=>{Y(x,h,T,Q=>{T.value=Q})},vt=x=>{S(x,h,T,Q=>{T.value=Q})},W=()=>{pe(h,T,x=>{T.value=x})},ut=()=>{D(h,T,x=>{T.value=x})},De=x=>{ve(x,h,T,Q=>{T.value=Q})},kt=x=>{Pe(x)};return We(T,()=>{n.value&&h.value&&Je(()=>{kt({target:h.value})})}),{isEditing:n,editContent:T,userRating:A,isCommentOwner:q,canDeleteComment:ge,isCommentEdited:le,formatDate:zn,formatRelativeTime:fo,startEdit:he,cancelEdit:ye,saveEdit:Se,confirmDelete:Ge,rateComment:Ye,avatarUrl:y,getInitials:Ms,handleEditKeydown:Ae,isCommentHidden:xe,showHiddenComment:rt,hiddenCommentReason:ct,formattedContent:ne,autoResizeEdit:kt,editTextarea:h,showEmojiPicker:M,showImagePicker:R,insertEmojiEdit:yt,insertImageEdit:vt,insertSpoilerEdit:W,insertLinkEdit:ut,handleEmojiMouseEnter:L,handleEmojiMouseLeave:b,handleImageMouseEnter:$,handleImageMouseLeave:I,closeEmojiPicker:P,closeImagePicker:B,handleButtonMouseEnter:j,handleButtonMouseLeave:_,handleImageButtonMouseEnter:N,handleAvatarError:Ve,openLogin:Be,showLinkModal:l,selectedTextForLink:m,insertLinkFromModal:De,closeLinkModal:J}}},xs=["data-comment-id"],Is={class:"comment-header"},Ts={class:"user-info"},Ss={class:"user-avatar"},As=["src","alt"],Rs={class:"user-details"},Ps={class:"username"},Ns={key:0,class:"user-rating"},js=["title"],Bs=["title"],$s={class:"comment-content"},Us={key:0,class:"hidden-comment-warning"},Hs={key:1},Ds={key:0,class:"deleted-comment"},Os={key:1},Vs={key:0,class:"edit-form"},Fs={class:"edit-textarea-container"},zs={class:"edit-footer"},qs={class:"edit-actions"},Ws=["disabled"],Ks={class:"character-counter-container"},Gs={key:1,class:"comment-text-container"},Ys=["innerHTML"],Zs={class:"comment-footer"},Xs={class:"comment-actions"},Qs={class:"rating-buttons"},Js={class:"action-buttons"};function ei(r,t,v,n,T,A){var l,m,L,b,$,I,j,N,_,P,B,J,Y,S,D,ve,pe,Pe,et;const y=Ke("router-link"),h=Ke("EmojiPicker"),M=Ke("ImagePicker"),R=Ke("LinkModal");return i(),a("div",{class:"comment-item","data-comment-id":(l=v.comment)==null?void 0:l.id},[e("div",Is,[e("div",Ts,[Le(y,{to:{path:"/lists/".concat((m=v.comment)==null?void 0:m.user_id)},target:"_blank",rel:"noopener noreferrer",class:"user-avatar-link"},{default:fn(()=>{var q,ge;return[e("div",Ss,[n.avatarUrl?(i(),a("img",{key:0,src:n.avatarUrl,alt:((q=v.comment)==null?void 0:q.username)||"–ê–Ω–æ–Ω–∏–º",onError:t[0]||(t[0]=(...le)=>n.handleAvatarError&&n.handleAvatarError(...le)),onerror:"this.onerror=null; this.style.display='none'; this.nextElementSibling.style.display='flex';"},null,40,As)):(i(),a("div",{key:1,class:"avatar-placeholder",style:Yt({display:n.avatarUrl?"none":"flex"})},g(n.getInitials(((ge=v.comment)==null?void 0:ge.username)||"–ê–Ω–æ–Ω–∏–º")),5))])]}),_:1},8,["to"]),e("div",Rs,[Le(y,{to:{path:"/lists/".concat((L=v.comment)==null?void 0:L.user_id)},target:"_blank",rel:"noopener noreferrer",class:"username-link"},{default:fn(()=>{var q;return[e("span",Ps,g(((q=v.comment)==null?void 0:q.username)||"–ê–Ω–æ–Ω–∏–º"),1)]}),_:1},8,["to"]),(b=v.comment)!=null&&b.user_movie_rating?(i(),a("span",Ns,[t[18]||(t[18]=e("i",{class:"fas fa-star"},null,-1)),te(" "+g(v.comment.user_movie_rating),1)])):k("",!0),e("span",{class:"date",title:n.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate(($=v.comment)==null?void 0:$.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(n.formatDate((I=v.comment)==null?void 0:I.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((j=v.comment)==null?void 0:j.created_at))},[te(g(n.formatRelativeTime((N=v.comment)==null?void 0:N.created_at))+" ",1),n.isCommentEdited?(i(),a("i",{key:0,class:"fas fa-pencil-alt edit-icon",title:n.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((_=v.comment)==null?void 0:_.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(n.formatDate((P=v.comment)==null?void 0:P.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((B=v.comment)==null?void 0:B.created_at))},null,8,Bs)):k("",!0)],8,js)])])]),e("div",$s,[!((J=v.comment)!=null&&J.is_deleted)&&n.isCommentHidden&&!n.showHiddenComment?(i(),a("div",Us,[n.hiddenCommentReason==="lowRating"?(i(),a("p",{key:0,class:"warning-text",onClick:t[1]||(t[1]=q=>n.showHiddenComment=!0)},t[19]||(t[19]=[e("i",{class:"fas fa-eye-slash"},null,-1),te(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–∫—Ä—ã—Ç –∏–∑-–∑–∞ –Ω–∏–∑–∫–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å. ")]))):k("",!0)])):(i(),a("div",Hs,[(Y=v.comment)!=null&&Y.is_deleted?(i(),a("div",Ds,t[20]||(t[20]=[e("p",{class:"deleted-message"},[e("i",{class:"fas fa-trash"}),te(" –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —É–¥–∞–ª—ë–Ω ")],-1)]))):(i(),a("div",Os,[n.isEditing?(i(),a("div",Vs,[e("div",Fs,[ie(e("textarea",{ref:"editTextarea","onUpdate:modelValue":t[2]||(t[2]=q=>n.editContent=q),class:"edit-textarea",rows:"3",maxlength:"1500",onKeydown:t[3]||(t[3]=(...q)=>n.handleEditKeydown&&n.handleEditKeydown(...q)),onInput:t[4]||(t[4]=(...q)=>n.autoResizeEdit&&n.autoResizeEdit(...q))},null,544),[[Pt,n.editContent]])]),e("div",zs,[e("div",qs,[e("button",{onClick:t[5]||(t[5]=(...q)=>n.cancelEdit&&n.cancelEdit(...q)),class:"cancel-button"},"–û—Ç–º–µ–Ω–∞"),e("button",{onClick:t[6]||(t[6]=(...q)=>n.saveEdit&&n.saveEdit(...q)),class:"save-button",disabled:!n.editContent.trim()||n.editContent.length>1500}," –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ",8,Ws)]),e("div",Ks,[e("div",{class:E(["character-counter-inline",{"near-limit":n.editContent.length>1400,"at-limit":n.editContent.length>=1500}])},g(n.editContent.length)+"/1500 ",3),e("button",{type:"button",class:E(["emoji-button-inline",{active:n.showEmojiPicker}]),onMouseenter:t[7]||(t[7]=(...q)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...q)),onMouseleave:t[8]||(t[8]=(...q)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...q))}," üòä ",34),e("button",{type:"button",class:E(["emoji-button-inline",{active:n.showImagePicker}]),onMouseenter:t[9]||(t[9]=(...q)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...q)),onMouseleave:t[10]||(t[10]=(...q)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...q))},t[21]||(t[21]=[Zt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-f1c85dfc><g id="logo" data-v-f1c85dfc><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-f1c85dfc></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-f1c85dfc></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-f1c85dfc></path></g></svg>',1)]),34),e("button",{type:"button",class:"emoji-button-inline spoiler-button",onClick:t[11]||(t[11]=(...q)=>n.insertSpoilerEdit&&n.insertSpoilerEdit(...q)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},t[22]||(t[22]=[e("i",{class:"fas fa-eye-slash"},null,-1)])),e("button",{type:"button",class:"emoji-button-inline link-button",onClick:t[12]||(t[12]=(...q)=>n.insertLinkEdit&&n.insertLinkEdit(...q)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},t[23]||(t[23]=[e("i",{class:"fas fa-link"},null,-1)])),Le(h,{"is-visible":n.showEmojiPicker,onEmojiSelected:n.insertEmojiEdit,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),Le(M,{"is-visible":n.showImagePicker,"current-user":v.currentUser,onImageSelected:n.insertImageEdit,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:n.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),Le(R,{"is-visible":n.showLinkModal,"selected-text":n.selectedTextForLink,onClose:n.closeLinkModal,onSubmit:n.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):(i(),a("div",Gs,[e("p",{class:"comment-text",innerHTML:n.formattedContent},null,8,Ys)]))]))]))]),e("div",Zs,[e("div",Xs,[e("div",Qs,[!n.isCommentOwner&&!((S=v.comment)!=null&&S.is_deleted)?(i(),a("button",{key:0,onClick:t[13]||(t[13]=q=>n.rateComment(1)),class:E(["rating-button",{"rated-up":n.userRating===1}])},t[24]||(t[24]=[e("i",{class:"fas fa-thumbs-up"},null,-1)]),2)):k("",!0),e("span",{class:E(["rating-count",{"rating-positive":n.userRating===1,"rating-negative":n.userRating===-1}])},g(((D=v.comment)==null?void 0:D.rating)||0),3),!n.isCommentOwner&&!((ve=v.comment)!=null&&ve.is_deleted)?(i(),a("button",{key:1,onClick:t[14]||(t[14]=q=>n.rateComment(-1)),class:E(["rating-button",{"rated-down":n.userRating===-1}])},t[25]||(t[25]=[e("i",{class:"fas fa-thumbs-down"},null,-1)]),2)):k("",!0)]),e("div",Js,[!v.currentUser||v.currentUser.allow_comments===1?(i(),a("button",{key:0,onClick:t[15]||(t[15]=q=>r.$emit("reply",v.comment)),class:"action-button reply-button"},t[26]||(t[26]=[e("i",{class:"fas fa-reply"},null,-1)]))):k("",!0),n.isCommentOwner&&!((pe=v.comment)!=null&&pe.is_deleted)&&!n.isEditing&&((Pe=v.currentUser)==null?void 0:Pe.allow_comments)===1?(i(),a("button",{key:1,onClick:t[16]||(t[16]=(...q)=>n.startEdit&&n.startEdit(...q)),class:"action-button edit-button"},t[27]||(t[27]=[e("i",{class:"fas fa-edit"},null,-1)]))):k("",!0),n.canDeleteComment&&!((et=v.comment)!=null&&et.is_deleted)?(i(),a("button",{key:2,onClick:t[17]||(t[17]=(...q)=>n.confirmDelete&&n.confirmDelete(...q)),class:"action-button delete-button"},t[28]||(t[28]=[e("i",{class:"fas fa-trash"},null,-1)]))):k("",!0)])])])],8,xs)}const ti=gt(Ls,[["render",ei],["__scopeId","data-v-f1c85dfc"]]),ni={name:"CommentThread",components:{CommentItem:ti,EmojiPicker:yn,ImagePicker:kn,LinkModal:hn},props:{comment:{type:Object,required:!0},currentUser:{type:Object,required:!0},replyTo:{type:Object,default:null},replyContent:{type:String,default:""},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate","submit-reply","cancel-reply","update-reply-content","reply-keydown"],setup(r,{emit:t}){const v=p(null),n=p(!0),{showEmojiPicker:T,showImagePicker:A,showLinkModal:y,selectedTextForLink:h,handleEmojiMouseEnter:M,handleEmojiMouseLeave:R,handleImageMouseEnter:l,handleImageMouseLeave:m,handleButtonMouseEnter:L,handleImageButtonMouseEnter:b,handleButtonMouseLeave:$,closeEmojiPicker:I,closeImagePicker:j,closeLinkModal:N,insertEmojiUniversal:_,insertImageUniversal:P,insertLinkUniversal:B,insertLinkFromModalUniversal:J,insertSpoilerUniversal:Y}=bn(),S=le=>{t("update-reply-content",le.target.value);const ae=le.target;ae&&(ae.style.height="auto",ae.style.height="".concat(Math.min(ae.scrollHeight,200),"px"))},D={get value(){return r.replyContent},set value(le){t("update-reply-content",le)}};return{replyTextarea:v,showEmojiPicker:T,showImagePicker:A,isCollapsed:n,insertEmoji:le=>{_(le,v,D,ae=>{t("update-reply-content",ae)})},insertImage:le=>{P(le,v,D,ae=>{t("update-reply-content",ae)})},insertSpoiler:()=>{Y(v,D,le=>{t("update-reply-content",le)})},handleEmojiMouseEnter:M,handleEmojiMouseLeave:R,handleImageMouseEnter:l,handleImageMouseLeave:m,handleButtonMouseEnter:L,handleButtonMouseLeave:$,closeEmojiPicker:I,closeImagePicker:j,handleImageButtonMouseEnter:b,handleReplyInput:S,toggleCollapsed:()=>{n.value=!n.value},showLinkModal:y,selectedTextForLink:h,insertLink:()=>{B(v,D,le=>{t("update-reply-content",le)})},closeLinkModal:N,insertLinkFromModal:le=>{J(le,v,D,ae=>{t("update-reply-content",ae)})}}},computed:{canReply(){return this.currentUser?this.currentUser.allow_comments===1:!0},getReplyPlaceholder(){return this.currentUser?this.currentUser.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç..."},formattedContent(){const{formatContent:r}=Fn();return r(this.comment.content)}}},oi={class:"comment-thread"},li={key:0,class:"reply-form"},si={class:"textarea-container"},ii=["value","placeholder","disabled"],ai={class:"reply-footer"},ri={class:"reply-actions"},ui=["disabled"],di={class:"character-counter-container"},ci=["disabled"],vi={key:1,class:"replies-container"},mi=["title"],fi={class:"replies-count"},pi=["title"],gi={key:0,class:"replies-content"};function yi(r,t,v,n,T,A){const y=Ke("CommentItem"),h=Ke("EmojiPicker"),M=Ke("ImagePicker"),R=Ke("LinkModal"),l=Ke("CommentThread",!0);return i(),a("div",oi,[Le(y,{comment:v.comment,"current-user":v.currentUser,"editing-comment-id":v.editingCommentId,onReply:t[0]||(t[0]=m=>r.$emit("reply",m)),onStartEdit:t[1]||(t[1]=m=>r.$emit("start-edit",m)),onCancelEdit:t[2]||(t[2]=m=>r.$emit("cancel-edit")),onEdit:t[3]||(t[3]=(m,L)=>r.$emit("edit",m,L)),onDelete:t[4]||(t[4]=m=>r.$emit("delete",m)),onRate:t[5]||(t[5]=(m,L)=>r.$emit("rate",m,L))},null,8,["comment","current-user","editing-comment-id"]),v.replyTo&&v.replyTo.id===v.comment.id?(i(),a("div",li,[e("div",si,[e("textarea",{ref:"replyTextarea",class:"comment-textarea",value:v.replyContent,placeholder:A.getReplyPlaceholder,disabled:v.currentUser&&v.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:t[6]||(t[6]=(...m)=>n.handleReplyInput&&n.handleReplyInput(...m)),onKeydown:t[7]||(t[7]=m=>r.$emit("reply-keydown",m))},null,40,ii)]),e("div",ai,[e("div",ri,[e("button",{class:"cancel-reply",onClick:t[8]||(t[8]=m=>r.$emit("cancel-reply"))},"–û—Ç–º–µ–Ω–∞"),e("button",{class:"submit-button",disabled:!v.replyContent.trim()||v.replyContent.length>1500||v.currentUser&&v.currentUser.allow_comments!==1,onClick:t[9]||(t[9]=m=>r.$emit("submit-reply"))}," –û—Ç–≤–µ—Ç–∏—Ç—å ",8,ui)]),e("div",di,[e("div",{class:E(["character-counter-inline",{"near-limit":v.replyContent.length>1400,"at-limit":v.replyContent.length>=1500}])},g(v.replyContent.length)+"/1500 ",3),e("button",{type:"button",class:E(["emoji-button-inline",{active:n.showEmojiPicker}]),onMouseenter:t[10]||(t[10]=(...m)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...m)),onMouseleave:t[11]||(t[11]=(...m)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...m))}," üòä ",34),e("button",{type:"button",class:E(["emoji-button-inline",{active:n.showImagePicker}]),onMouseenter:t[12]||(t[12]=(...m)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...m)),onMouseleave:t[13]||(t[13]=(...m)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...m))},t[29]||(t[29]=[Zt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-6c0fc347><g id="logo" data-v-6c0fc347><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-6c0fc347></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-6c0fc347></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-6c0fc347></path></g></svg>',1)]),34),e("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:v.currentUser&&v.currentUser.allow_comments!==1,onClick:t[14]||(t[14]=(...m)=>n.insertSpoiler&&n.insertSpoiler(...m)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},t[30]||(t[30]=[e("i",{class:"fas fa-eye-slash"},null,-1)]),8,ci),e("button",{type:"button",class:"emoji-button-inline link-button",onClick:t[15]||(t[15]=(...m)=>n.insertLink&&n.insertLink(...m)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},t[31]||(t[31]=[e("i",{class:"fas fa-link"},null,-1)])),Le(h,{"is-visible":n.showEmojiPicker,onEmojiSelected:n.insertEmoji,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),Le(M,{"is-visible":n.showImagePicker,"current-user":v.currentUser,onImageSelected:n.insertImage,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:t[16]||(t[16]=()=>r.$router.push("/login"))},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose"]),Le(R,{"is-visible":n.showLinkModal,"selected-text":n.selectedTextForLink,onClose:n.closeLinkModal,onSubmit:n.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):k("",!0),v.comment.replies&&v.comment.replies.length>0?(i(),a("div",vi,[e("button",{class:"collapse-toggle",title:n.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:t[17]||(t[17]=(...m)=>n.toggleCollapsed&&n.toggleCollapsed(...m))},[e("span",{class:E(["collapse-icon",{expanded:!n.isCollapsed}])},t[32]||(t[32]=[e("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},[e("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1)]),2),e("span",fi,g(v.comment.replies.length)+" "+g(v.comment.replies.length===1?"–æ—Ç–≤–µ—Ç":"–æ—Ç–≤–µ—Ç–æ–≤"),1)],8,mi),e("div",{class:"vertical-line-clickable",title:n.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:t[18]||(t[18]=(...m)=>n.toggleCollapsed&&n.toggleCollapsed(...m))},[e("div",{class:E(["vertical-line-visual",{collapsed:n.isCollapsed}])},null,2)],8,pi),n.isCollapsed?k("",!0):(i(),a("div",gi,[(i(!0),a(ce,null,Te(v.comment.replies,m=>(i(),Ct(l,{key:m.id,comment:m,"current-user":v.currentUser,"reply-to":v.replyTo,"reply-content":v.replyContent,"editing-comment-id":v.editingCommentId,onReply:t[19]||(t[19]=L=>r.$emit("reply",L)),onStartEdit:t[20]||(t[20]=L=>r.$emit("start-edit",L)),onCancelEdit:t[21]||(t[21]=L=>r.$emit("cancel-edit")),onEdit:t[22]||(t[22]=(L,b)=>r.$emit("edit",L,b)),onDelete:t[23]||(t[23]=L=>r.$emit("delete",L)),onRate:t[24]||(t[24]=(L,b)=>r.$emit("rate",L,b)),onSubmitReply:t[25]||(t[25]=L=>r.$emit("submit-reply")),onCancelReply:t[26]||(t[26]=L=>r.$emit("cancel-reply")),onUpdateReplyContent:t[27]||(t[27]=L=>r.$emit("update-reply-content",L)),onReplyKeydown:t[28]||(t[28]=L=>r.$emit("reply-keydown",L))},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id"]))),128))]))])):k("",!0)])}const ki=gt(ni,[["render",yi],["__scopeId","data-v-6c0fc347"]]),hi={name:"Comments",components:{CommentThread:ki,Notification:tn,EmojiPicker:yn,ImagePicker:kn,LinkModal:hn},props:{movieId:{type:[String,Number],required:!0}},setup(r){const t=pn(),v=Qt(),n=Xt(),T=p([]),A=p(""),y=p(null),h=p(""),M=p(null),R=p(t.user),l=p(null),m=p(null),L=p(n.isAutoShowComments),b=p(!1),$=p(3),I=p(n.commentsSortBy),j=p(I.value==="date"?"asc":"desc"),{showEmojiPicker:N,showImagePicker:_,showLinkModal:P,selectedTextForLink:B,handleEmojiMouseEnter:J,handleEmojiMouseLeave:Y,handleImageMouseEnter:S,handleImageMouseLeave:D,handleButtonMouseEnter:ve,handleImageButtonMouseEnter:pe,handleButtonMouseLeave:Pe,closeEmojiPicker:et,closeImagePicker:q,closeLinkModal:ge,insertEmojiUniversal:le,insertImageUniversal:ae,insertLinkUniversal:xe,insertLinkFromModalUniversal:rt,insertSpoilerUniversal:ct,autoResize:he}=bn(),ye=F(()=>{const U=(X=null)=>{const $e=T.value.filter(re=>re.parent_id===X).filter(re=>!re.is_deleted||re.replies&&re.replies.length>0);let Ue;return X===null?Ue=$e.sort((re,Ne)=>{if(I.value==="rating"){const nt=re.rating||0,ot=Ne.rating||0;return nt!==ot?j.value==="asc"?nt-ot:ot-nt:re.id-Ne.id}return j.value==="asc"?re.id-Ne.id:Ne.id-re.id}):Ue=$e.sort((re,Ne)=>re.id-Ne.id),Ue.map(re=>({...re,replies:U(re.id)}))};return U()}),Se=F(()=>{const U=X=>X.reduce(($e,Ue)=>$e+1+U(Ue.replies||[]),0);return U(ye.value)}),Ge=F(()=>ye.value.slice(0,$.value)),Ye=F(()=>ye.value.length>$.value),Ae=F(()=>ye.value.length-$.value),ne=()=>{$.value=ye.value.length},Ve=U=>{I.value===U?j.value=j.value==="asc"?"desc":"asc":(I.value=U,j.value=U==="date"?"asc":"desc",n.setCommentsSortBy(U))},Be=async()=>{try{const U=await Xn(r.movieId);T.value=U}catch(U){console.error("Failed to load comments:",U),l.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.")}},yt=async()=>{if(b.value)return;if(!t.token){l.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:x});return}if(R.value&&R.value.allow_comments!==1){l.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!A.value.replace(/\[spoiler\]\s*\[\/spoiler\]/g,"").replace(/\[img\]\s*\[\/img\]/g,"").replace(/\[link=[^\]]+\]\s*\[\/link\]/g,"").trim()){l.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º");return}if(A.value.length>1500){l.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await Pn(r.movieId,A.value.trim()),A.value="",await Be(),L.value=!0,Je(()=>{m.value&&(m.value.focus(),m.value.style.height="auto"),setTimeout(()=>{const X=document.querySelectorAll(".comment-item[data-comment-id]");if(X.length>0){const $e=Array.from(X).map(Ue=>parseInt(Ue.getAttribute("data-comment-id"))).filter(Ue=>!isNaN(Ue));if($e.length>0){const Ue=Math.max(...$e),re=document.querySelector('[data-comment-id="'.concat(Ue,'"]'));re&&re.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}},300)})}catch(X){console.error("Failed to create comment:",X),l.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},vt=U=>{if(!t.token){l.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:x});return}M.value=null,y.value=U,h.value="",Je(()=>{const X=document.querySelector(".reply-form");X&&X.scrollIntoView({behavior:"smooth",block:"center"})})},W=async()=>{if(!t.token){l.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:x});return}if(R.value&&R.value.allow_comments!==1){l.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!(!h.value.trim()||!y.value)){if(h.value.length>1500){l.value.showNotification("–û—Ç–≤–µ—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await Pn(r.movieId,h.value.trim(),y.value.id);const U=y.value.id;await Be(),h.value="",y.value=null,Je(()=>{setTimeout(()=>{const X=document.querySelector('[data-comment-id="'.concat(U,'"]'));if(X){const $e=X.querySelector(".replies-content");if($e){const Ue=$e.querySelectorAll(".comment-item[data-comment-id]");if(Ue.length>0){const re=Array.from(Ue).map(Ne=>parseInt(Ne.getAttribute("data-comment-id"))).filter(Ne=>!isNaN(Ne));if(re.length>0){const Ne=Math.max(...re),nt=document.querySelector('[data-comment-id="'.concat(Ne,'"]'));nt&&nt.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}}}},300)})}catch(U){console.error("Error submitting reply:",U),l.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}}},ut=async(U,X)=>{if(!t.token){l.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:x});return}if(R.value&&R.value.allow_comments!==1){l.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(X.length>1500){l.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await eo(U,X.trim()),await Be(),M.value=null}catch($e){console.error("Failed to update comment:",$e),l.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},De=async U=>{if(!t.token){l.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:x});return}try{await Jn(U),await Be()}catch(X){console.error("Failed to delete comment:",X),l.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},kt=async(U,X)=>{if(!t.token){l.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:x});return}try{await Qn(U,X),await Be()}catch($e){console.error("Failed to rate comment:",$e),l.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ü–µ–Ω–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},ke=U=>{b.value||N.value||U.key==="Enter"&&!U.shiftKey&&(U.preventDefault(),yt())},Ze=U=>{U.key==="Enter"&&!U.shiftKey&&(U.preventDefault(),W())},x=()=>{v.push("/login")},Q=U=>{b.value=!0,le(U,m,A,X=>{A.value=X}),setTimeout(()=>{b.value=!1},100)},Ie=U=>{ae(U,m,A,X=>{A.value=X})},_e=()=>{ct(m,A,U=>{A.value=U})},Dt=()=>{xe(m,A,U=>{A.value=U})},Nt=U=>{rt(U,m,A,X=>{A.value=X})},Ot=F(()=>R.value?R.value.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."),mt=F(()=>R.value?R.value.allow_comments===1:!0),tt=U=>{y.value=null,h.value="",M.value=U},Et=()=>{M.value=null};return Tt(()=>{Be()}),{comments:T,groupedComments:ye,displayedComments:Ge,hasMoreComments:Ye,remainingCommentsCount:Ae,showMoreComments:ne,sortBy:I,setSortBy:Ve,sortDirection:j,newComment:A,replyTo:y,replyContent:h,editingCommentId:M,currentUser:R,notificationRef:l,commentTextarea:m,showComments:L,submitComment:yt,handleReply:vt,submitReply:W,handleEdit:ut,handleDelete:De,handleRate:kt,handleCommentKeydown:ke,handleReplyKeydown:Ze,autoResize:he,totalCommentsCount:Se,getCommentWordForm:Es,showEmojiPicker:N,showImagePicker:_,showLinkModal:P,selectedTextForLink:B,insertEmoji:Q,insertImage:Ie,handleEmojiMouseEnter:J,handleEmojiMouseLeave:Y,handleImageMouseEnter:S,handleImageMouseLeave:D,closeEmojiPicker:et,closeImagePicker:q,handleButtonMouseLeave:Pe,handleButtonMouseEnter:ve,handleImageButtonMouseEnter:pe,getCommentPlaceholder:Ot,canComment:mt,handleStartEdit:tt,handleCancelEdit:Et,insertSpoiler:_e,insertLink:Dt,insertLinkFromModal:Nt,closeLinkModal:ge}}},bi={class:"comments-section"},wi={class:"spoiler-content"},Ci={key:1,class:"comments-container"},_i={class:"comments-header"},Ei={class:"comments-controls"},Mi={class:"textarea-container"},Li=["placeholder","disabled"],xi={class:"comment-footer"},Ii={class:"comment-actions"},Ti=["disabled"],Si={class:"character-counter-container"},Ai=["disabled"],Ri=["disabled"],Pi=["disabled"],Ni={class:"comments-list"},ji={key:0,class:"show-more-comments"};function Bi(r,t,v,n,T,A){const y=Ke("EmojiPicker"),h=Ke("ImagePicker"),M=Ke("LinkModal"),R=Ke("CommentThread"),l=Ke("Notification");return i(),a("div",bi,[n.showComments?(i(),a("div",Ci,[e("div",_i,[e("div",Ei,[e("button",{class:E(["sort-button",{active:n.sortBy==="date"}]),onClick:t[1]||(t[1]=m=>n.setSortBy("date")),title:"–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –¥–∞—Ç–µ"},[t[20]||(t[20]=e("i",{class:"fas fa-clock"},null,-1)),t[21]||(t[21]=te(" –ü–æ –¥–∞—Ç–µ ")),n.sortBy==="date"?(i(),a("i",{key:0,class:E(["fas",n.sortDirection==="asc"?"fa-arrow-up":"fa-arrow-down"])},null,2)):k("",!0)],2),e("button",{class:E(["sort-button",{active:n.sortBy==="rating"}]),onClick:t[2]||(t[2]=m=>n.setSortBy("rating")),title:"–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É"},[t[22]||(t[22]=e("i",{class:"fas fa-thumbs-up"},null,-1)),t[23]||(t[23]=te(" –ü–æ —Ä–µ–π—Ç–∏–Ω–≥—É ")),n.sortBy==="rating"?(i(),a("i",{key:0,class:E(["fas",n.sortDirection==="asc"?"fa-arrow-up":"fa-arrow-down"])},null,2)):k("",!0)],2)]),e("button",{class:"hide-comments-btn",onClick:t[3]||(t[3]=m=>n.showComments=!1)},t[24]||(t[24]=[e("i",{class:"fas fa-eye-slash"},null,-1),te(" –°–∫—Ä—ã—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ")]))]),e("form",{class:"comment-form",onSubmit:t[13]||(t[13]=_t((...m)=>n.submitComment&&n.submitComment(...m),["prevent"]))},[e("div",Mi,[ie(e("textarea",{ref:"commentTextarea","onUpdate:modelValue":t[4]||(t[4]=m=>n.newComment=m),class:"comment-textarea",placeholder:n.getCommentPlaceholder,disabled:n.currentUser&&n.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:t[5]||(t[5]=(...m)=>n.autoResize&&n.autoResize(...m)),onKeydown:t[6]||(t[6]=(...m)=>n.handleCommentKeydown&&n.handleCommentKeydown(...m))},null,40,Li),[[Pt,n.newComment]])]),e("div",xi,[e("div",Ii,[e("button",{class:"submit-button",type:"submit",disabled:!n.newComment.trim()||n.newComment.length>1500||n.currentUser&&n.currentUser.allow_comments!==1}," –û—Ç–ø—Ä–∞–≤–∏—Ç—å ",8,Ti)]),e("div",Si,[e("div",{class:E(["character-counter-inline",{"near-limit":n.newComment.length>1400,"at-limit":n.newComment.length>=1500}])},g(n.newComment.length)+"/1500 ",3),e("button",{type:"button",class:E(["emoji-button-inline",{active:n.showEmojiPicker}]),disabled:n.currentUser&&n.currentUser.allow_comments!==1,onMouseenter:t[7]||(t[7]=(...m)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...m)),onMouseleave:t[8]||(t[8]=(...m)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...m))}," üòä ",42,Ai),e("button",{type:"button",class:E(["emoji-button-inline",{active:n.showImagePicker}]),disabled:n.currentUser&&n.currentUser.allow_comments!==1,onMouseenter:t[9]||(t[9]=(...m)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...m)),onMouseleave:t[10]||(t[10]=(...m)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...m))},t[25]||(t[25]=[Zt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-e82be516><g id="logo" data-v-e82be516><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-e82be516></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-e82be516></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-e82be516></path></g></svg>',1)]),42,Ri),e("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:n.currentUser&&n.currentUser.allow_comments!==1,onClick:t[11]||(t[11]=(...m)=>n.insertSpoiler&&n.insertSpoiler(...m)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},t[26]||(t[26]=[e("i",{class:"fas fa-eye-slash"},null,-1)]),8,Pi),e("button",{type:"button",class:"emoji-button-inline link-button",onClick:t[12]||(t[12]=(...m)=>n.insertLink&&n.insertLink(...m)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},t[27]||(t[27]=[e("i",{class:"fas fa-link"},null,-1)])),Le(y,{"is-visible":n.showEmojiPicker&&n.canComment,onEmojiSelected:n.insertEmoji,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),Le(h,{"is-visible":n.showImagePicker&&n.canComment,"current-user":n.currentUser,onImageSelected:n.insertImage,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:r.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),Le(M,{"is-visible":n.showLinkModal,"selected-text":n.selectedTextForLink,onClose:n.closeLinkModal,onSubmit:n.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])],32),e("div",Ni,[(i(!0),a(ce,null,Te(n.displayedComments,m=>(i(),Ct(R,{key:m.id,comment:m,"current-user":n.currentUser,"reply-to":n.replyTo,"reply-content":n.replyContent,"editing-comment-id":n.editingCommentId,"is-first-comment":!1,onReply:n.handleReply,onStartEdit:n.handleStartEdit,onCancelEdit:n.handleCancelEdit,onEdit:n.handleEdit,onDelete:n.handleDelete,onRate:n.handleRate,onSubmitReply:n.submitReply,onCancelReply:t[14]||(t[14]=L=>n.replyTo=null),onUpdateReplyContent:t[15]||(t[15]=L=>n.replyContent=L),onReplyKeydown:n.handleReplyKeydown},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id","onReply","onStartEdit","onCancelEdit","onEdit","onDelete","onRate","onSubmitReply","onReplyKeydown"]))),128)),n.hasMoreComments?(i(),a("div",ji,[e("button",{class:"show-more-btn",onClick:t[16]||(t[16]=(...m)=>n.showMoreComments&&n.showMoreComments(...m))}," –ü–æ–∫–∞–∑–∞—Ç—å –µ—â–µ "+g(n.remainingCommentsCount)+" "+g(n.getCommentWordForm(n.remainingCommentsCount)),1)])):k("",!0)])])):(i(),a("div",{key:0,class:"spoiler-warning",onClick:t[0]||(t[0]=m=>n.showComments=!0)},[e("div",wi,[t[17]||(t[17]=e("i",{class:"fas fa-eye-slash"},null,-1)),t[18]||(t[18]=e("h3",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–∫—Ä—ã—Ç—ã",-1)),t[19]||(t[19]=e("p",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä—ã. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å.",-1)),e("div",{class:E(["comments-count",{"no-comments":n.totalCommentsCount===0}])},[n.totalCommentsCount===0?(i(),a(ce,{key:0},[te(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç ")],64)):(i(),a(ce,{key:1},[te(g(n.totalCommentsCount)+" "+g(n.getCommentWordForm(n.totalCommentsCount)),1)],64))],2)])])),Le(l,{ref:"notificationRef"},null,512)])}const $i=gt(hi,[["render",Bi],["__scopeId","data-v-e82be516"]]),Ui={class:"movie-info"},Hi={class:"content"},Di={key:0,class:"content-card"},Oi={class:"movie-skeleton"},Vi={class:"movie-skeleton__player"},Fi={key:2,class:"content-card"},zi={key:3,class:"content-card"},qi={class:"content-header"},Wi=["src"],Ki={class:"content-title"},Gi={key:0,class:"ratings-links"},Yi={key:1},Zi=["href","title"],Xi={key:2},Qi=["href","title"],Ji={key:3},ea=["href","title"],ta={key:4},na=["href","title"],oa={key:5},la=["href"],sa=["title"],ia={key:0,class:"fa-regular fa-face-grin-wink"},aa={key:1,class:"fas fa-spinner fa-spin"},ra=["title"],ua={key:1,class:"mobile-list-dropdown"},da={class:"mobile-list-content"},ca=["content"],va=["content"],ma={class:"additional-info"},fa={class:"info-content"},pa={key:0,class:"movie-poster-container desktop-only"},ga=["href"],ya=["src"],ka={class:"details-container"},ha={class:"info-list"},ba={key:0},wa={key:1},Ca={key:2},_a={key:3},Ea={key:4},Ma={key:5},La={key:6},xa={key:7},Ia={key:8},Ta={key:9,class:"rating-boxes"},Sa={key:0,class:"rating-box mpaa"},Aa={key:1,class:"rating-box age"},Ra={class:"content-info"},Pa={key:0,class:"content-description-text"},Na={key:3,class:"comments-section"},ja={key:4,class:"staff-section"},Ba={class:"staff-categories"},$a={key:0,class:"staff-category"},Ua={class:"staff-list"},Ha=["href","title"],Da=["src","alt"],Oa={class:"staff-name"},Va={key:0,class:"staff-role"},Fa=["href","title"],za={key:1,class:"staff-category"},qa={class:"staff-names-container"},Wa={class:"staff-names-list"},Ka=["href"],Ga=["href","title"],Ya={key:2,class:"staff-category"},Za={class:"staff-names-container"},Xa={class:"staff-names-list"},Qa=["href"],Ja=["href","title"],er={key:5,class:"yt-video-container"},tr={key:6,class:"related-movies"},nr=["title"],or={key:7,class:"related-movies"},lr=["title"],sr={key:0,class:"nudity-info-popup"},ir={class:"nudity-info-content"},ar={key:0,class:"nudity-info-loading"},rr={key:1},ur={class:"nudity-info-actions"},dr=["href"],cr={key:1,class:"nudity-info-popup"},vr={class:"nudity-info-content"},mr={class:"timings-text"},fr={key:0,class:"timing-entries"},pr={class:"timing-content"},gr={class:"timing-header-row",style:{display:"flex","align-items":"center",gap:"8px"}},yr={key:0,class:"pending-badge"},kr={key:1,class:"clean-text-badge"},hr={key:0,class:"timing-actions-row",style:{display:"flex","align-items":"center",gap:"8px","margin-top":"8px"}},br=["onClick"],wr=["onClick"],Cr=["onClick"],_r=["onClick"],Er=["onClick"],Mr={class:"timing-text"},Lr={class:"timing-author"},xr={key:1,style:{color:"#fff","font-size":"13px",margin:"4px 0 0 0"}},Ir={key:0},Tr={key:1},Sr={key:1},Ar={key:0,class:"general-parser-result",style:{"margin-top":"15px",padding:"15px",background:"rgba(255, 255, 255, 0.05)","border-radius":"8px"}},Rr={style:{margin:"0 0 10px 0",color:"#fff"}},Pr={style:{color:"#fff","font-size":"13px"}},Nr={key:0},jr={key:1},Br={key:1,class:"overlay-parser-result",style:{"margin-top":"15px",padding:"15px",background:"rgba(255, 255, 255, 0.05)","border-radius":"8px"}},$r={style:{margin:"0 0 10px 0",color:"#fff"}},Ur={style:{color:"#fff","font-size":"13px"}},Hr={key:0},Dr={key:1},Or={class:"nudity-info-actions"},Vr={key:2,class:"timing-modal"},Fr={class:"timing-modal-content"},zr={class:"timing-modal-header"},qr={class:"timing-submission-form"},Wr={key:0,class:"timing-preview"},Kr={class:"timing-preview-content"},Gr={class:"timing-preview-range"},Yr={class:"timing-preview-duration"},Zr={class:"timing-form-actions"},Xr=["disabled"],Qr={key:0,class:"fas fa-spinner fa-spin"},Jr={key:1},eu={class:"modal-header"},tu={class:"modal-header-controls"},nu={class:"modal-body"},ou=["disabled"],lu={key:0,class:"fas fa-spinner fa-spin"},su={key:1,class:"fas fa-list"},iu={class:"top-submitters-list"},au={class:"submitter-info"},ru={class:"submitter-name"},uu=["href"],du={class:"submitter-count"},cu={class:"submitter-contribution"},vu={class:"modal-header"},mu={class:"modal-body"},fu={key:0,class:"timing-filters"},pu={key:1,class:"loading-spinner"},gu={key:2,class:"no-timings"},yu={key:3,class:"no-timings"},ku={key:4,class:"all-timings-list"},hu={class:"timing-header"},bu={class:"timing-meta"},wu={class:"timing-author"},Cu={class:"timing-date"},_u={class:"timing-movie-info"},Eu={key:0,class:"admin-controls"},Mu=["onClick","disabled"],Lu={key:0,class:"fas fa-spinner fa-spin"},xu={key:1,class:"fas fa-check"},Iu=["onClick","disabled"],Tu={key:0,class:"fas fa-spinner fa-spin"},Su={key:1,class:"fas fa-times"},Au=["onClick","disabled"],Ru={key:0,class:"fas fa-spinner fa-spin"},Pu={key:1,class:"fas fa-eye-slash"},Nu={class:"timing-content"},ju={class:"timing-text"},Bu={__name:"MovieInfo",setup(r){const t=p(!0),v=Xt(),n=pn(),T=to(),A=Dn(),y=Qt(),h=p(A.params.kp_id),M=p(""),R=p(null),l=p(null),m=no(),L=yo(),b=p(null),$=F(()=>L.areTrailersActive),I=p(null),j=p(!1),N=p(!1),_=p(10),P=p(null),B=p(!1),J=p(null),Y=p(!1),S=p(void 0),D=p(null),ve=p(new Set),pe=p(new Set),Pe=p(!1),et=p(!1),q=F(()=>{var d;return((d=l.value)==null?void 0:d.nudity_timings.length)>0}),ge=F(()=>{var d;return((d=l.value)==null?void 0:d.nudity_timings.length)>0&&v.isStreamerMode&&!v.isMobile}),le=F(()=>{var d,o,O,fe,it,je,u,s,f,w;return((o=(d=l.value)==null?void 0:d.lists)==null?void 0:o.isFavorite)||((fe=(O=l.value)==null?void 0:O.lists)==null?void 0:fe.isWatching)||((je=(it=l.value)==null?void 0:it.lists)==null?void 0:je.isLater)||((s=(u=l.value)==null?void 0:u.lists)==null?void 0:s.isCompleted)||((w=(f=l.value)==null?void 0:f.lists)==null?void 0:w.isAbandoned)}),ae=F(()=>v.isCommentsEnabled),xe=()=>{if(l.value){const d=l.value.name_ru||l.value.name_en||l.value.name_original||"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å–º–µ";document.title=d}},rt=d=>d?d.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",ct=d=>(d||[]).map(o=>({kp_id:o.film_id,poster:o.poster_url_preview||o.poster_url,title:o.name_ru||o.name_en||o.name_original})),he=d=>{if(typeof d!="number")return;const o=Math.floor(d/60),O=d%60;return"".concat(o," —á. ").concat(O," –º–∏–Ω.")},ye=p(!1),Se=p({top:"0px",left:"0px"}),Ge=d=>{ye.value=!0,Se.value={top:"".concat(d.pageY+10,"px"),left:"".concat(d.pageX-70,"px")}},Ye=async()=>{try{const d=[l.value.name_ru||l.value.name_en||l.value.name_original,...l.value.year?[l.value.year]:[],...l.value.film_length?[he(l.value.film_length)]:[]];await navigator.clipboard.writeText(d.join(", ")),b.value.showNotification("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ")}catch(d){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",d)}},Ae=async(d=!0)=>{var o,O,fe,it,je,u,s,f;try{let w;if(h.value.startsWith("shiki")?w=await oo(h.value):w=await lo(h.value,n.token),Array.isArray(w)&&w.length===0)throw new Error("–î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–∏—Å–∫.");l.value=w,h.value.startsWith("shiki")?l.value={...l.value,title:l.value.name_ru||l.value.name_en,name_original:l.value.name_en,short_description:l.value.slogan}:l.value={...l.value,title:l.value.name_ru||l.value.name_en||l.value.name_original,kinopoisk_id:h.value},m.setHeaderContent({text:l.value.title,imageUrl:l.value.logo_url}),xe();const C={kp_id:h.value,title:((o=l.value)==null?void 0:o.name_ru)||((O=l.value)==null?void 0:O.name_en)||((fe=l.value)==null?void 0:fe.name_original),poster:((it=l.value)==null?void 0:it.poster_url)||((je=l.value)==null?void 0:je.cover_url)||((u=l.value)==null?void 0:u.screenshots[0]),year:(s=l.value)==null?void 0:s.year,type:(f=l.value)==null?void 0:f.type};if(h.value.startsWith("shiki"))if(l.value.screenshots&&l.value.screenshots.length>0){const V=Math.floor(Math.random()*l.value.screenshots.length),se=l.value.screenshots[V];T.updateMoviePoster(se)}else C.poster&&T.updateMoviePoster(C.poster);else C.poster&&T.updateMoviePoster(C.poster);if(F(()=>v.isHistoryAllowed).value&&C.kp_id&&C.title&&d)if(n.token)try{await mn(C.kp_id,K.HISTORY)}catch(V){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é:",V)}else v.addToHistory({...C})}catch(w){const{message:C,code:H}=wt(w);M.value=C,R.value=H,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–ª—å–º–∞—Ö:",w)}},ne=F(()=>{var d;return(d=l.value)==null?void 0:d.videos}),Ve=F(()=>{var d;return ct((d=l.value)==null?void 0:d.sequels_and_prequels)}),Be=F(()=>{var d;return ct((d=l.value)==null?void 0:d.similars)}),yt=()=>{var fe;const d=((fe=document.querySelector(".related-movies"))==null?void 0:fe.clientWidth)||0,O=Math.floor(d/160)||10;_.value=Math.max(1,O)},vt=()=>{yt()},W=d=>{if(d.altKey&&d.keyCode===84&&document.querySelector(".player-container")){const O=document.querySelector(".theater-mode-btn");O&&O.click()}},ut=d=>{d.button===1&&(d.preventDefault(),De(d))},De=async d=>{if(P.value!==null){P.value=null,B.value=!1;return}S.value=void 0,J.value=d.currentTarget,P.value="",B.value=!0;try{const o=await so(l.value.imdb_id);P.value=o.nudity_info}catch(o){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö:",o),P.value="–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ Parents Guide –Ω–∞ IMDb –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏."}finally{B.value=!1}},kt=d=>{var o,O;if(P.value=null,S.value!==void 0){S.value=void 0;return}D.value=d.currentTarget,S.value=((o=l.value)==null?void 0:o.nudity_timings)===null?"":((O=l.value)==null?void 0:O.nudity_timings)||""},ke=d=>{var O,fe,it,je,u,s,f,w,C,H,V,se,ue;return(ue={[K.FAVORITE]:((fe=(O=l.value)==null?void 0:O.lists)==null?void 0:fe.isFavorite)||!1,[K.HISTORY]:((je=(it=l.value)==null?void 0:it.lists)==null?void 0:je.isHistory)||!1,[K.LATER]:((s=(u=l.value)==null?void 0:u.lists)==null?void 0:s.isLater)||!1,[K.COMPLETED]:((w=(f=l.value)==null?void 0:f.lists)==null?void 0:w.isCompleted)||!1,[K.ABANDONED]:((H=(C=l.value)==null?void 0:C.lists)==null?void 0:H.isAbandoned)||!1,[K.WATCHING]:((se=(V=l.value)==null?void 0:V.lists)==null?void 0:se.isWatching)||!1}[d])!=null?ue:!1},Ze=async d=>{if(!n.token){b.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:()=>y.push("/login")});return}try{const o={[K.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[K.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[K.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[K.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[K.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[K.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};ke(d)?(await Vn(h.value,d),b.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(o[d]))):(await mn(h.value,d),b.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(o[d]))),await Ae(!1),Y.value=!1}catch(o){const{message:O,code:fe}=wt(o);b.value.showNotification("".concat(O," ").concat(fe))}},x=d=>{const o=document.querySelector(".mobile-list-dropdown");o&&!o.contains(d.target)&&(Y.value=!1)},Q=d=>{const o=document.querySelector(".nudity-info-popup");o&&!o.contains(d.target)&&J.value&&!J.value.contains(d.target)&&(P.value=null)},Ie=d=>{const o=document.querySelector(".nudity-info-popup");o&&!o.contains(d.target)&&D.value&&!D.value.contains(d.target)&&(S.value=void 0)};Tt(async()=>{await Ae(),t.value=!1,document.addEventListener("keydown",W),window.addEventListener("resize",vt),setTimeout(yt,100),document.addEventListener("click",x),document.addEventListener("click",Q,!0),document.addEventListener("click",Ie,!0),window.selectedNudityTimings=Array.from(ve.value),window.overlayNudityTimings=Array.from(pe.value)}),Nn(async()=>{m.clearHeaderContent(),document.removeEventListener("keydown",W),window.removeEventListener("resize",vt),document.removeEventListener("click",x),document.removeEventListener("click",Q,!0),document.removeEventListener("click",Ie,!0),delete window.selectedNudityTimings,delete window.overlayNudityTimings}),We(()=>A.params.kp_id,async d=>{d&&d!==h.value&&(m.clearHeaderContent(),h.value=d,I.value=null,await Ae(),t.value=!1)},{immediate:!0}),We(l,()=>{xe()},{deep:!0}),We(P,d=>{d?document.addEventListener("click",Q,!0):document.removeEventListener("click",Q,!0)},{deep:!0}),We(S,d=>{d?document.addEventListener("click",Ie,!0):document.removeEventListener("click",Ie,!0)},{deep:!0}),We(ve,()=>{window.selectedNudityTimings=Array.from(ve.value)},{deep:!0}),We(pe,()=>{window.overlayNudityTimings=Array.from(pe.value)},{deep:!0}),Tt(()=>{window.selectedNudityTimings=Array.from(ve.value),window.overlayNudityTimings=Array.from(pe.value)}),Nn(()=>{delete window.selectedNudityTimings,delete window.overlayNudityTimings});const _e=d=>{var o,O;return((O=(o=l.value)==null?void 0:o.staff)==null?void 0:O.filter(fe=>fe.profession_key===d))||[]},Dt=async()=>{try{await navigator.clipboard.writeText(P.value),b.value.showNotification("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω")}catch(d){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",d),b.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞")}finally{P.value=null}},Nt=async()=>{if(S.value.length!==0)try{const d=S.value.map(o=>"".concat(o.timing_text," (by @").concat(o.username,")")).join("\n").concat("\nReYohoho\n");await navigator.clipboard.writeText(d),b.value.showNotification("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω")}catch(d){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",d),b.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞")}finally{S.value=void 0}},Ot=()=>{const d=encodeURIComponent(P.value);window.open("https://translate.google.com/?sl=en&tl=ru&text=".concat(d),"_blank"),P.value=null},mt=F({get:()=>v.submitterUsername,set:d=>v.setSubmitterUsername(d)}),tt=p(""),Et=p(!1),U=F(()=>{if(!tt.value.trim())return[];try{return Ht(tt.value,!0)||[]}catch(d){return console.error("Error parsing timing text:",d),[]}}),X=F(()=>mt.value.trim()&&tt.value.trim()),$e=async()=>{if(!(!X.value||Et.value))try{Et.value=!0,await ao(h.value,mt.value.trim(),tt.value),b.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é, —Å–ø–∞—Å–∏–±–æ!"),tt.value="",re.value=!1}catch(d){const{message:o}=wt(d);b.value.showNotification(o,5e3)}finally{Et.value=!1}},Ue=async()=>{try{const{submissions:d}=await io();Ne.value=d,nt.value=!0}catch(d){const{message:o}=wt(d);b.value.showNotification(o)}},re=p(!1),Ne=p([]),nt=p(!1),ot=p(!1),Xe=p([]),ht=p(!1),Fe=p(!1),Qe=p(null),ft=p(!1),dt=p(!1),ze=p("all"),nn=async d=>{if(!Fe.value)try{Fe.value=!0,Qe.value=d,ft.value=!0,dt.value=!1,await uo(d);const o=Xe.value.find(O=>O.id===d);o&&(o.status="approved"),b.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ–¥–æ–±—Ä–µ–Ω")}catch(o){const{message:O}=wt(o);b.value.showNotification("–û—à–∏–±–∫–∞: ".concat(O))}finally{Fe.value=!1,Qe.value=null,ft.value=!1,dt.value=!1}},Mt=async d=>{if(!Fe.value)try{Fe.value=!0,Qe.value=d,ft.value=!1,dt.value=!1,await co(d);const o=Xe.value.find(O=>O.id===d);o&&(o.status="rejected"),b.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ—Ç–∫–ª–æ–Ω–µ–Ω")}catch(o){const{message:O}=wt(o);b.value.showNotification("–û—à–∏–±–∫–∞: ".concat(O))}finally{Fe.value=!1,Qe.value=null,ft.value=!1,dt.value=!1}},xt=async d=>{if(!Fe.value)try{Fe.value=!0,Qe.value=d,ft.value=!1,dt.value=!0,await vo(d);const o=Xe.value.find(O=>O.id===d);o&&(o.status="clean_text"),b.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ—Ç–º–µ—á–µ–Ω –∫–∞–∫ clean_text")}catch(o){const{message:O}=wt(o);b.value.showNotification("–û—à–∏–±–∫–∞: ".concat(O))}finally{Fe.value=!1,Qe.value=null,ft.value=!1,dt.value=!1}},on=async()=>{if(!ht.value)try{ht.value=!0,ot.value=!0;const{timings:d}=await ro();Xe.value=d}catch(d){const{message:o}=wt(d);b.value.showNotification(o),ot.value=!1}finally{ht.value=!1}},ln=d=>({pending:"–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏",approved:"–û–¥–æ–±—Ä–µ–Ω–æ",rejected:"–û—Ç–∫–ª–æ–Ω–µ–Ω–æ",clean_text:"–ù–µ –º–æ–¥–µ—Ä–∏—Ä—É–µ—Ç—Å—è"})[d]||d,sn=(d,o)=>{const O=[2,0,1,1,1,2];return o[d%100>4&&d%100<20?2:O[Math.min(d%10,5)]]},an=d=>{if(!Ne.value.length)return 0;const o=Math.max(...Ne.value.map(O=>O.approved_submissions_count));return d/o*100},jt=F(()=>ze.value==="all"?Xe.value:Xe.value.filter(d=>d.status===ze.value)),Vt=d=>{ve.value.has(d)?ve.value.delete(d):ve.value.add(d)},lt=p({});function rn(d){if(lt.value[d.id])lt.value={...lt.value,[d.id]:!1};else{const o=Ht(d.timing_text,!0);lt.value={...lt.value,[d.id]:o}}}const St=F(()=>!!window.electronAPI);function un(d){if(!St.value){b.value?b.value.showNotification("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"):alert("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏");return}Vt(d)}function dn(d){if(!St.value){b.value?b.value.showNotification("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"):alert("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏");return}Vt(d)}function Bt(d){if(!St.value){b.value?b.value.showNotification("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"):alert("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏");return}Jt(d)}function cn(d){if(!St.value){b.value?b.value.showNotification("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"):alert("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏");return}Jt(d)}const Jt=d=>{pe.value.has(d)?pe.value.delete(d):pe.value.add(d)};function st(){Pe.value=!Pe.value}function vn(){et.value=!et.value}function At(){const d=[];if(S.value&&Array.isArray(S.value)){for(const o of S.value)if(ve.value.has(o.id)){const O=Ht(o.timing_text,!0);O&&O.length>0&&d.push(...O)}}return d}function Ft(){const d=[];if(S.value&&Array.isArray(S.value)&&S.value.length>0){for(const o of S.value)if(pe.value.has(o.id)){const O=Ht(o.timing_text,!0);O&&O.length>0&&d.push(...O)}}return d}return(d,o)=>{var fe,it,je,u,s,f,w,C,H,V,se,ue,G,me,Ee,Me,be,de;const O=Ke("router-link");return i(),a(ce,null,[e("div",Ui,[e("div",Hi,[(t.value||!l.value)&&!M.value?(i(),a("div",Di,[e("div",Oi,[o[27]||(o[27]=Zt('<div class="movie-skeleton__header" data-v-5baa72cd><div class="movie-skeleton__title" data-v-5baa72cd></div></div><div class="movie-skeleton__ratings" data-v-5baa72cd><div class="movie-skeleton__rating-item" data-v-5baa72cd></div><div class="movie-skeleton__rating-item" data-v-5baa72cd></div><div class="movie-skeleton__rating-item" data-v-5baa72cd></div></div>',2)),e("div",Vi,[Le(qn)]),o[28]||(o[28]=Zt('<div class="movie-skeleton__additional-info" data-v-5baa72cd><div class="movie-skeleton__section-title" data-v-5baa72cd></div><div class="movie-skeleton__info-list" data-v-5baa72cd><div class="movie-skeleton__info-item" data-v-5baa72cd></div><div class="movie-skeleton__info-item" data-v-5baa72cd></div><div class="movie-skeleton__info-item" data-v-5baa72cd></div><div class="movie-skeleton__info-item" data-v-5baa72cd></div><div class="movie-skeleton__info-item" data-v-5baa72cd></div></div></div><div class="movie-skeleton__description" data-v-5baa72cd><div class="movie-skeleton__description-line" data-v-5baa72cd></div><div class="movie-skeleton__description-line" data-v-5baa72cd></div><div class="movie-skeleton__description-line" data-v-5baa72cd></div><div class="movie-skeleton__description-line" data-v-5baa72cd></div></div>',2))])])):k("",!0),M.value?(i(),Ct(On,{key:1,message:M.value,code:R.value},null,8,["message","code"])):k("",!0),M.value?(i(),a("div",Fi,[(i(),Ct(Hn,{key:h.value,"kp-id":h.value,"movie-info":l.value,"onUpdate:movieInfo":Ae},null,8,["kp-id","movie-info"]))])):k("",!0),l.value&&!t.value?(i(),a("div",zi,[e("div",qi,[l.value.logo_url?(i(),a("div",{key:0,class:"content-logo",onMousemove:Ge,onMouseleave:o[0]||(o[0]=c=>ye.value=!1),onClick:Ye},[e("img",{src:l.value.logo_url,alt:"–õ–æ–≥–æ—Ç–∏–ø —Ñ–∏–ª—å–º–∞",class:"content-logo"},null,8,Wi)],32)):(i(),a("div",{key:1,onMousemove:Ge,onMouseleave:o[1]||(o[1]=c=>ye.value=!1),onClick:Ye},[e("h1",Ki,g(l.value.title),1)],32)),ie(e("div",{class:"title-copy-tooltip",style:Yt(Se.value)}," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ",4),[[Ce,ye.value]])]),l.value.kinopoisk_id||l.value.title||l.value.imdb_id||l.value.rating_imdb||l.value.shikimori_id?(i(),a("div",Gi,[l.value.kinopoisk_id?(i(),Ct(zl,{key:l.value.kinopoisk_id,"kp-id":l.value.kinopoisk_id,"show-dash":!0},null,8,["kp-id"])):k("",!0),l.value.kinopoisk_id?(i(),a("div",Yi,[e("a",{href:"https://www.kinopoisk.ru/film/".concat(l.value.kinopoisk_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:l.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(rt(l.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[o[29]||(o[29]=e("img",{src:Bn,alt:"–ö–ü",class:"rating-logo"},null,-1)),e("span",{class:E(["rating-value",Z(Gt)(l.value.rating_kinopoisk)])},g(l.value.rating_kinopoisk?l.value.rating_kinopoisk:"‚Äî"),3),o[30]||(o[30]=e("img",{src:Kt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Zi)])):k("",!0),!l.value.kinopoisk_id&&l.value.title?(i(),a("div",Xi,[e("a",{href:"https://www.kinopoisk.ru/index.php?kp_query=".concat(encodeURIComponent(l.value.title+(l.value.year?" "+l.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:l.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(rt(l.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[o[31]||(o[31]=e("img",{src:Bn,alt:"–ö–ü",class:"rating-logo"},null,-1)),e("span",{class:E(["rating-value",Z(Gt)(l.value.rating_kinopoisk)])},g(l.value.rating_kinopoisk?l.value.rating_kinopoisk:"‚Äî"),3),o[32]||(o[32]=e("img",{src:Kt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Qi)])):k("",!0),l.value.imdb_id?(i(),a("div",Ji,[e("a",{href:"https://www.imdb.com/title/".concat(l.value.imdb_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:l.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(rt(l.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[o[33]||(o[33]=e("img",{src:$n,alt:"IMDb",class:"rating-logo"},null,-1)),e("span",{class:E(["rating-value",Z(Gt)(l.value.rating_imdb)])},g(l.value.rating_imdb?l.value.rating_imdb:"‚Äî"),3),o[34]||(o[34]=e("img",{src:Kt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,ea)])):k("",!0),!l.value.imdb_id&&l.value.title?(i(),a("div",ta,[e("a",{href:"https://www.imdb.com/find/?q=".concat(encodeURIComponent(l.value.title+(l.value.year?" "+l.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:l.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(rt(l.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[o[35]||(o[35]=e("img",{src:$n,alt:"IMDb",class:"rating-logo"},null,-1)),e("span",{class:E(["rating-value",Z(Gt)(l.value.rating_imdb)])},g(l.value.rating_imdb?l.value.rating_imdb:"‚Äî"),3),o[36]||(o[36]=e("img",{src:Kt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,na)])):k("",!0),l.value.shikimori_id?(i(),a("div",oa,[e("a",{href:"https://shikimori.one/animes/".concat(l.value.shikimori_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},o[37]||(o[37]=[e("img",{src:ko,alt:"Shiki",class:"rating-logo"},null,-1),e("img",{src:Kt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,la)])):k("",!0),l.value.imdb_id?(i(),a("button",{key:6,class:"nudity-info-btn parents-guide-btn",onClick:o[2]||(o[2]=c=>De(c)),onMousedown:o[3]||(o[3]=c=>ut(c)),title:P.value?"–°–∫—Ä—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é":"–ü–æ–∫–∞–∑–∞—Ç—å Parents Guide –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ü–µ–Ω–∞—Ö"},[o[38]||(o[38]=e("span",{class:"desktop-text"},"Parents Guide",-1)),o[39]||(o[39]=e("span",{class:"mobile-text"},"PG",-1)),B.value?(i(),a("i",aa)):(i(),a("i",ia))],40,sa)):k("",!0),e("button",{class:"nudity-info-btn",onClick:o[4]||(o[4]=c=>kt(c)),title:S.value!==void 0?"–°–∫—Ä—ã—Ç—å —Ç–∞–π–º–∏–Ω–≥–∏":"–ü–æ–∫–∞–∑–∞—Ç—å —Ç–∞–π–º–∏–Ω–≥–∏ —Å—Ü–µ–Ω 18+(–¥–ª—è —Ç–≤–∏—á–∞, –º–∏–≥–∞–Ω–∏–µ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö)"},[e("i",{class:E(["fa-regular fa-clock",{"text-red":q.value,"text-red-blink":ge.value}])},null,2)],8,ra)])):k("",!0),(i(),Ct(Hn,{key:h.value,"kp-id":h.value,"movie-info":l.value,"onUpdate:movieInfo":Ae},null,8,["kp-id","movie-info"])),Z(v).isMobile?(i(),a("div",ua,[e("button",{class:E(["mobile-list-toggle",{}]),onClick:o[5]||(o[5]=c=>Y.value=!Y.value)},[e("span",{class:E(["material-icons",{active:le.value}])},g(le.value?"bookmark_added":"bookmark_border"),3),o[40]||(o[40]=e("span",{class:"button-label"},"–î–æ–±–∞–≤–∏—Ç—å –≤ —Å–ø–∏—Å–æ–∫",-1)),e("span",{class:E(["material-icons dropdown-arrow",{expanded:Y.value}])},"expand_more",2)]),ie(e("div",da,[e("button",{class:E(["mobile-list-btn",{}]),onClick:o[6]||(o[6]=c=>Ze(Z(K).FAVORITE))},[e("span",{class:E(["material-icons",{active:(it=(fe=l.value)==null?void 0:fe.lists)==null?void 0:it.isFavorite}])},g((u=(je=l.value)==null?void 0:je.lists)!=null&&u.isFavorite?"favorite":"favorite_border"),3),o[41]||(o[41]=e("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))]),e("button",{class:E(["mobile-list-btn",{}]),onClick:o[7]||(o[7]=c=>Ze(Z(K).WATCHING))},[e("span",{class:E(["material-icons",{active:(f=(s=l.value)==null?void 0:s.lists)==null?void 0:f.isWatching}])},g((C=(w=l.value)==null?void 0:w.lists)!=null&&C.isWatching?"visibility":"visibility_off"),3),o[42]||(o[42]=e("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))]),e("button",{class:E(["mobile-list-btn",{}]),onClick:o[8]||(o[8]=c=>Ze(Z(K).LATER))},[e("span",{class:E(["material-icons",{active:(V=(H=l.value)==null?void 0:H.lists)==null?void 0:V.isLater}])},"watch_later",2),o[43]||(o[43]=e("span",{class:"button-label"},"–ü–æ–∑–∂–µ",-1))]),e("button",{class:E(["mobile-list-btn",{}]),onClick:o[9]||(o[9]=c=>Ze(Z(K).COMPLETED))},[e("span",{class:E(["material-icons",{active:(ue=(se=l.value)==null?void 0:se.lists)==null?void 0:ue.isCompleted}])},g((me=(G=l.value)==null?void 0:G.lists)!=null&&me.isCompleted?"check_circle":"check_circle_outline"),3),o[44]||(o[44]=e("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))]),e("button",{class:E(["mobile-list-btn",{}]),onClick:o[10]||(o[10]=c=>Ze(Z(K).ABANDONED))},[e("span",{class:E(["material-icons",{active:(Me=(Ee=l.value)==null?void 0:Ee.lists)==null?void 0:Me.isAbandoned}])},"not_interested",2),o[45]||(o[45]=e("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))])],512),[[Ce,Y.value]])])):k("",!0),e("meta",{name:"title-and-year",content:l.value.type==="FILM"&&l.value.year?"".concat(l.value.title," (").concat(l.value.year,")"):l.value.title},null,8,ca),l.value.name_original?(i(),a("meta",{key:2,name:"original-title",content:l.value.name_original},null,8,va)):k("",!0),e("div",ma,[o[56]||(o[56]=e("h2",{class:"additional-info-title"},"–ü–æ–¥—Ä–æ–±–Ω–µ–µ",-1)),e("div",fa,[l.value.poster_url?(i(),a("div",pa,[e("a",{href:l.value.poster_url,target:"_blank",rel:"noopener noreferrer"},[e("img",{src:l.value.poster_url,alt:"–ü–æ—Å—Ç–µ—Ä —Ñ–∏–ª—å–º–∞",class:"movie-poster"},null,8,ya)],8,ga)])):k("",!0),e("div",ka,[e("ul",ha,[l.value.type&&Z(jn)[l.value.type]?(i(),a("li",ba,[o[46]||(o[46]=e("strong",null,"–¢–∏–ø:",-1)),te(" "+g(Z(jn)[l.value.type]),1)])):k("",!0),l.value.year?(i(),a("li",wa,[o[47]||(o[47]=e("strong",null,"–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞:",-1)),te(" "+g(l.value.year),1)])):k("",!0),l.value.title?(i(),a("li",Ca,[o[48]||(o[48]=e("strong",null,"–ù–∞–∑–≤–∞–Ω–∏–µ:",-1)),te(" "+g(l.value.title),1)])):k("",!0),l.value.name_original?(i(),a("li",_a,[o[49]||(o[49]=e("strong",null,"–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:",-1)),te(" "+g(l.value.name_original),1)])):k("",!0),l.value.slogan?(i(),a("li",Ea,[o[50]||(o[50]=e("strong",null,"–°–ª–æ–≥–∞–Ω:",-1)),te(" "+g(l.value.slogan),1)])):k("",!0),l.value.production_companies?(i(),a("li",Ma,[o[51]||(o[51]=e("strong",null,"–ü—Ä–æ–¥–∞–∫—à–Ω:",-1)),te(" "+g(l.value.production_companies),1)])):k("",!0),(be=l.value.countries)!=null&&be.length?(i(),a("li",La,[o[52]||(o[52]=e("strong",null,"–°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞:",-1)),te(" "+g(l.value.countries.map(c=>c.country).join(", ")),1)])):k("",!0),(de=l.value.genres)!=null&&de.length?(i(),a("li",xa,[o[53]||(o[53]=e("strong",null,"–ñ–∞–Ω—Ä—ã:",-1)),te(" "+g(l.value.genres.map(c=>c.genre).join(", ")),1)])):k("",!0),l.value.film_length?(i(),a("li",Ia,[o[54]||(o[54]=e("strong",null,"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:",-1)),te(" "+g(he(l.value.film_length)),1)])):k("",!0),l.value.rating_mpaa||l.value.rating_age_limits?(i(),a("li",Ta,[l.value.rating_mpaa?(i(),a("div",Sa,[o[55]||(o[55]=e("strong",null,"MPAA",-1)),e("span",null,g(l.value.rating_mpaa.toUpperCase()),1)])):k("",!0),l.value.rating_age_limits?(i(),a("div",Aa,[e("strong",null,g(l.value.rating_age_limits.replace("age",""))+"+",1)])):k("",!0)])):k("",!0)]),e("div",Ra,[l.value.description?(i(),a("p",Pa,g(l.value.description),1)):k("",!0)])])])]),ae.value?(i(),a("div",Na,[(i(),Ct($i,{"movie-id":h.value,key:h.value},null,8,["movie-id"]))])):k("",!0),l.value.staff?(i(),a("div",ja,[e("div",Ba,[_e("ACTOR").length?(i(),a("div",$a,[o[57]||(o[57]=e("h3",{class:"additional-info-title"},"–ê–∫—Ç—ë—Ä—ã",-1)),e("div",Ua,[(i(!0),a(ce,null,Te(_e("ACTOR").slice(0,12),c=>(i(),a("div",{key:c.staff_id,class:"staff-item"},[e("a",{href:"https://www.kinopoisk.ru/name/".concat(c.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-link",title:c.description||""},[e("img",{src:c.poster_url,alt:c.name_ru,class:"staff-photo"},null,8,Da),e("span",Oa,g(c.name_ru||c.name_en),1),c.description?(i(),a("span",Va,g(c.description),1)):k("",!0)],8,Ha)]))),128)),e("a",{class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(h.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(_e("ACTOR").length," –∞–∫—Ç–µ—Ä–æ–≤")}," +"+g(_e("ACTOR").length-12),9,Fa)])])):k("",!0),_e("DIRECTOR").length?(i(),a("div",za,[o[58]||(o[58]=e("h3",{class:"additional-info-title"},"–†–µ–∂–∏—Å—Å—ë—Ä—ã",-1)),e("div",qa,[e("div",Wa,[(i(!0),a(ce,null,Te(_e("DIRECTOR").slice(0,5),c=>(i(),a("a",{key:c.staff_id,href:"https://www.kinopoisk.ru/name/".concat(c.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},g(c.name_ru||c.name_en),9,Ka))),128)),_e("DIRECTOR").length>5?(i(),a("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(h.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(_e("DIRECTOR").length," —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–≤")}," +"+g(_e("DIRECTOR").length-5),9,Ga)):k("",!0)])])])):k("",!0),_e("PRODUCER").length?(i(),a("div",Ya,[o[59]||(o[59]=e("h3",{class:"additional-info-title"},"–ü—Ä–æ–¥—é—Å–µ—Ä—ã",-1)),e("div",Za,[e("div",Xa,[(i(!0),a(ce,null,Te(_e("PRODUCER").slice(0,5),c=>(i(),a("a",{key:c.staff_id,href:"https://www.kinopoisk.ru/name/".concat(c.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},g(c.name_ru||c.name_en),9,Qa))),128)),_e("PRODUCER").length>5?(i(),a("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(h.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(_e("PRODUCER").length," –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤")}," +"+g(_e("PRODUCER").length-5),9,Ja)):k("",!0)])])])):k("",!0)])])):k("",!0),ne.value.length&&$.value?(i(),a("div",er,[Le(Nl,{videos:ne.value,"active-video-index":I.value,onSelect:d.playTrailer},null,8,["videos","active-video-index","onSelect"])])):k("",!0),Ve.value.length?(i(),a("div",tr,[o[60]||(o[60]=e("h2",null,"–°–∏–∫–≤–µ–ª—ã –∏ –ø—Ä–∏–∫–≤–µ–ª—ã",-1)),Le(Z(Un),{"movies-list":j.value?Ve.value:Ve.value.slice(0,_.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),Ve.value.length>_.value?(i(),a("a",{key:0,class:"expand-circle-button",onClick:o[11]||(o[11]=c=>j.value=!j.value),title:"".concat(j.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(Ve.value.length,")")},g(j.value?"‚àí":"+".concat(Ve.value.length-_.value)),9,nr)):k("",!0)])):k("",!0),Be.value.length?(i(),a("div",or,[o[61]||(o[61]=e("h2",null,"–ü–æ—Ö–æ–∂–∏–µ",-1)),Le(Z(Un),{"movies-list":N.value?Be.value:Be.value.slice(0,_.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),Be.value.length>_.value?(i(),a("a",{key:0,class:"expand-circle-button",onClick:o[12]||(o[12]=c=>N.value=!N.value),title:"".concat(N.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(Be.value.length,")")},g(N.value?"‚àí":"+".concat(Be.value.length-_.value)),9,lr)):k("",!0)])):k("",!0)])):k("",!0)])]),Le(tn,{ref_key:"notificationRef",ref:b},null,512),P.value!==null?(i(),a("div",sr,[e("div",ir,[B.value?(i(),a("div",ar,o[62]||(o[62]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),e("span",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏...",-1)]))):(i(),a("div",rr,g(P.value),1))]),e("div",ur,[e("a",{href:"https://www.imdb.com/title/".concat(l.value.imdb_id,"/parentalguide"),target:"_blank",rel:"noopener noreferrer",class:"nudity-info-button"},o[63]||(o[63]=[e("i",{class:"fas fa-external-link-alt"},null,-1),e("span",null,"Parents Guide",-1)]),8,dr),e("button",{class:"nudity-info-button",onClick:Dt},o[64]||(o[64]=[e("i",{class:"fas fa-copy"},null,-1),e("span",null,"Copy",-1)])),e("button",{class:"nudity-info-button",onClick:Ot},o[65]||(o[65]=[e("i",{class:"fas fa-language"},null,-1),e("span",null,"Translate",-1)]))])])):k("",!0),S.value!==void 0?(i(),a("div",cr,[e("div",vr,[e("div",{class:"acknowledgment-table"},[o[68]||(o[68]=e("div",{class:"acknowledgment-header"},[e("i",{class:"fa-solid fa-heart"}),e("span",null,"–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏")],-1)),e("div",{class:"acknowledgment-content"},[o[67]||(o[67]=e("div",{class:"acknowledgment-row"},[e("a",{href:"https://www.twitch.tv/tanyabelkova",target:"_blank",rel:"noopener noreferrer",class:"twitch-link"},[e("i",{class:"fa-brands fa-twitch"}),e("span",null,"TanyaBelkova")]),e("span",{class:"acknowledgment-text"},"‚Äî –∑–∞ –æ—Å–Ω–æ–≤—É –±–∞–∑—ã —Ç–∞–π–º–∏–Ω–≥–æ–≤")],-1)),e("div",{class:"acknowledgment-row clickable",onClick:Ue},o[66]||(o[66]=[e("div",{class:"community-link"},[e("i",{class:"fa-solid fa-users"}),e("span",null,"–°–æ–æ–±—â–µ—Å—Ç–≤–æ")],-1),e("span",{class:"acknowledgment-text"},"‚Äî –∑–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–∏–Ω–≥–æ–≤",-1)]))])]),e("div",{class:E(["timings-content",{"no-border":!S.value}])},[e("div",mr,[S.value.length>0?(i(),a("div",fr,[(i(!0),a(ce,null,Te(S.value,c=>{var oe;return i(),a("div",{key:c.id,class:E(["timing-entry",{pending:c.status==="pending","clean-text":c.status==="clean_text",selected:ve.value.has(c.id)}])},[e("div",pr,[e("div",gr,[c.status==="pending"?(i(),a("div",yr,"–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏")):k("",!0),c.status==="clean_text"?(i(),a("div",kr," –¢–∞–π–º–∏–Ω–≥–∏ —Ç–∞–∫–æ–≥–æ —Ç–∏–ø–∞ –Ω–µ –º–æ–¥–µ—Ä–∏—Ä—É—é—Ç—Å—è, –¥–ª—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Å–≤–µ—Ä—è–π—Ç–µ—Å—å —Å ParentsGuide ")):k("",!0)]),c.status!=="clean_text"&&((oe=l.value)==null?void 0:oe.type)==="FILM"?(i(),a("div",hr,[e("button",{class:"nudity-info-button",onClick:we=>rn(c)},g(lt.value[c.id]?"–°–∫—Ä—ã—Ç—å –ø–∞—Ä—Å–µ—Ä":"–ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä—Å–µ—Ä"),9,br),ve.value.has(c.id)?(i(),a("button",{key:0,class:"nudity-info-button",onClick:we=>dn(c.id),title:"–£–¥–∞–ª–∏—Ç—å –∏–∑ –∞–≤—Ç–æ–±–ª—é—Ä–∞"},o[69]||(o[69]=[e("i",{class:"fas fa-minus"},null,-1),e("span",null,"–£–¥–∞–ª–∏—Ç—å –∏–∑ –∞–≤—Ç–æ–±–ª—é—Ä–∞",-1)]),8,wr)):(i(),a("button",{key:1,class:"nudity-info-button",onClick:we=>un(c.id),title:"–î–æ–±–∞–≤–∏—Ç—å –≤ –∞–≤—Ç–æ–±–ª—é—Ä"},o[70]||(o[70]=[e("i",{class:"fas fa-plus"},null,-1),e("span",null,"–î–æ–±–∞–≤–∏—Ç—å –≤ –∞–≤—Ç–æ–±–ª—é—Ä",-1)]),8,Cr)),pe.value.has(c.id)?(i(),a("button",{key:2,class:"nudity-info-button overlay-button",onClick:we=>cn(c.id),title:"–£–¥–∞–ª–∏—Ç—å –∏–∑ –æ–≤–µ—Ä–ª–µ—è"},o[71]||(o[71]=[e("i",{class:"fas fa-eye-slash"},null,-1),e("span",null,"–£–¥–∞–ª–∏—Ç—å –∏–∑ –æ–≤–µ—Ä–ª–µ—è",-1)]),8,_r)):(i(),a("button",{key:3,class:"nudity-info-button overlay-button",onClick:we=>Bt(c.id),title:"–î–æ–±–∞–≤–∏—Ç—å –≤ –æ–≤–µ—Ä–ª–µ–π"},o[72]||(o[72]=[e("i",{class:"fas fa-eye"},null,-1),e("span",null,"–î–æ–±–∞–≤–∏—Ç—å –≤ –æ–≤–µ—Ä–ª–µ–π",-1)]),8,Er))])):k("",!0),e("div",{class:E(["timing-hover-container",{blurred:c.status==="pending"}])},[e("span",Mr,g(c.timing_text),1),o[73]||(o[73]=e("br",null,null,-1)),e("span",Lr,"by "+g(c.username),1)],2),lt.value[c.id]&&Array.isArray(lt.value[c.id])?(i(),a("div",xr,[o[74]||(o[74]=e("b",null,"–ü–∞—Ä—Å–µ—Ä(–∫ —Ç–∞–π–º–∏–Ω–≥–∞–º –¥–æ–±–∞–≤–∏—Ç—Å—è -1 –∏ +1 —Å–µ–∫—É–Ω–¥ –ø–æ –∫—Ä–∞—è–º —Ç–∞–π–º–∏–Ω–≥–∞ –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏, –Ω–æ –≤ –ø—Ä–µ–≤—å—é –ø–∞—Ä—Å–µ—Ä–∞ –∏—Ö –Ω–µ—Ç –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏):",-1)),lt.value[c.id].length===0?(i(),a("span",Ir,"–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å")):(i(),a("span",Tr,[(i(!0),a(ce,null,Te(lt.value[c.id],(we,Re)=>(i(),a("span",{key:Re}," ["+g(Z(Oe)(we[0]))+" - "+g(Z(Oe)(we[1]))+"]"+g(Re<lt.value[c.id].length-1?", ":""),1))),128))]))])):k("",!0)])],2)}),128))])):(i(),a("div",Sr,g("–ó–∞–ø–∏—Å–µ–π –æ —Ç–∞–π–º–∏–Ω–≥–∞—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")))]),Pe.value&&ve.value.size>0?(i(),a("div",Ar,[e("h4",Rr," –û–±—â–∏–π –ø–∞—Ä—Å–µ—Ä ("+g(ve.value.size)+" —Ç–∞–π–º–∏–Ω–≥–æ–≤): ",1),e("div",Pr,[At().length===0?(i(),a("span",Nr,"–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ç–∞–π–º–∏–Ω–≥–∏")):(i(),a("span",jr,[(i(!0),a(ce,null,Te(At(),(c,oe)=>(i(),a("span",{key:oe}," ["+g(Z(Oe)(c[0]))+" - "+g(Z(Oe)(c[1]))+"]"+g(oe<At().length-1?", ":""),1))),128))]))])])):k("",!0),et.value&&pe.value.size>0?(i(),a("div",Br,[e("h4",$r," –ü–∞—Ä—Å–µ—Ä –æ–≤–µ—Ä–ª–µ—è ("+g(pe.value.size)+" —Ç–∞–π–º–∏–Ω–≥–æ–≤): ",1),e("div",Ur,[Ft().length===0?(i(),a("span",Hr,"–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ç–∞–π–º–∏–Ω–≥–∏")):(i(),a("span",Dr,[(i(!0),a(ce,null,Te(Ft(),(c,oe)=>(i(),a("span",{key:oe}," ["+g(Z(Oe)(c[0]))+" - "+g(Z(Oe)(c[1]))+"]"+g(oe<Ft().length-1?", ":""),1))),128))]))])])):k("",!0),e("div",Or,[S.value.length>0?(i(),a("button",{key:0,class:"nudity-info-button",onClick:Nt},o[75]||(o[75]=[e("i",{class:"fas fa-copy"},null,-1),e("span",null,"–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å",-1)]))):k("",!0),ve.value.size>0?(i(),a("button",{key:1,class:"nudity-info-button",onClick:st},[o[76]||(o[76]=e("i",{class:"fas fa-eye"},null,-1)),e("span",null,"–û–±—â–∏–π –ø–∞—Ä—Å–µ—Ä ("+g(ve.value.size)+")",1)])):k("",!0),pe.value.size>0?(i(),a("button",{key:2,class:"nudity-info-button overlay-button",onClick:vn},[o[77]||(o[77]=e("i",{class:"fas fa-layer-group"},null,-1)),e("span",null,"–ü–∞—Ä—Å–µ—Ä –æ–≤–µ—Ä–ª–µ—è ("+g(pe.value.size)+")",1)])):k("",!0),e("button",{class:"nudity-info-button",onClick:o[13]||(o[13]=c=>re.value=!0)},o[78]||(o[78]=[e("i",{class:"fas fa-plus"},null,-1),e("span",null,"–î–æ–±–∞–≤–∏—Ç—å/–¥–æ–ø–æ–ª–Ω–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥",-1)]))])],2)])])):k("",!0),re.value?(i(),a("div",Vr,[e("div",Fr,[e("div",zr,[o[80]||(o[80]=e("h3",null,"–î–æ–±–∞–≤–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥",-1)),e("button",{class:"close-modal-btn",onClick:o[14]||(o[14]=c=>re.value=!1)},o[79]||(o[79]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",qr,[ie(e("input",{"onUpdate:modelValue":o[15]||(o[15]=c=>mt.value=c),placeholder:"–í–∞—à –Ω–∏–∫",class:"timing-input",maxlength:"50"},null,512),[[Pt,mt.value]]),ie(e("textarea",{"onUpdate:modelValue":o[16]||(o[16]=c=>tt.value=c),placeholder:"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ñ–∏–ª—å–º–∞(–≤ [] —Å–∫–æ–±–∫–∞—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä [01:36] –∏–ª–∏ [01:36:55]), –∫ –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã –ø—Ä–∏–ª–∞–≥–∞–µ—Ç–µ —Ç–∞–π–º–∏–Ω–≥\n–¢–∫ –∂–µ –¥–ª—è –∞–≤—Ç–æ–±–ª—é—Ä–∞ –ø—Ä–æ—à—É –≤—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏ —É–∫–∞–∑—ã–≤–∞—Ç—å –∫–∞–∫ –¥–∏–∞–ø–æ–∑–æ–Ω, –∞ –Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –≤—Ä–µ–º—è, –Ω–∞–ø—Ä–∏–º–µ—Ä 00:12:31-00:13:04 - —Ç–µ–∫—Å—Ç, –∞ –Ω–µ 00:12:31\n–î–ª—è —Å–µ—Ä–∏–∞–ª–æ–≤ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ —Å–µ–∑–æ–Ω –∏ –Ω–æ–º–µ—Ä —ç–ø–∏–∑–æ–¥–∞\n",class:"timing-textarea"},null,512),[[Pt,tt.value]]),U.value&&U.value.length>0?(i(),a("div",Wr,[o[81]||(o[81]=e("div",{class:"timing-preview-header"},[e("i",{class:"fas fa-eye"}),e("span",null,"–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –ø–∞—Ä—Å–µ—Ä–∞")],-1)),e("div",Kr,[(i(!0),a(ce,null,Te(U.value,(c,oe)=>(i(),a("div",{key:oe,class:"timing-preview-item"},[e("span",Gr,g(Z(Oe)(c[0]))+" - "+g(Z(Oe)(c[1])),1),e("span",Yr," ("+g(Math.round(c[1]-c[0]))+"—Å) ",1)]))),128))])])):k("",!0),e("div",Zr,[e("button",{class:"submit-timing-btn",onClick:$e,disabled:!X.value||Et.value},[Et.value?(i(),a("i",Qr)):(i(),a("span",Jr,"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é"))],8,Xr)])])])])):k("",!0),nt.value?(i(),a("div",{key:3,class:"modal-overlay",onClick:o[19]||(o[19]=c=>nt.value=!1)},[e("div",{class:"modal-content",onClick:o[18]||(o[18]=_t(()=>{},["stop"]))},[e("div",eu,[o[83]||(o[83]=e("h3",null,[te(" –¢–æ–ø –∞–≤—Ç–æ—Ä–æ–≤ —Ç–∞–π–º–∏–Ω–≥–æ–≤ "),e("span",{class:"hint-text"},[te("(–•–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —Å–≤–æ–π —Å—Ç—Ä–∏–º/—Å–æ—Ü—Å–µ—Ç–∏? –ù–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º –≤ "),e("a",{href:"https://t.me/reyohoho_sup",target:"_blank",rel:"noopener noreferrer"},"—Ç–µ–ª–µ–≥—Ä–∞–º"),te(")")])],-1)),e("div",tu,[e("button",{class:"close-modal-btn",onClick:o[17]||(o[17]=c=>nt.value=!1)},o[82]||(o[82]=[e("i",{class:"fas fa-times"},null,-1)]))])]),e("div",nu,[e("button",{class:"show-all-timings-btn",onClick:on,disabled:ht.value},[ht.value?(i(),a("i",lu)):(i(),a("i",su)),o[84]||(o[84]=e("span",null,"–í—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏",-1))],8,ou),e("div",iu,[(i(!0),a(ce,null,Te(Ne.value,(c,oe)=>(i(),a("div",{key:c.username,class:"top-submitter-item"},[e("div",{class:E(["submitter-rank",{gold:oe===0,silver:oe===1,bronze:oe===2}])},g(oe+1),3),e("div",au,[e("div",ru,[c.stream_link?(i(),a("a",{key:0,href:c.stream_link,target:"_blank",rel:"noopener noreferrer"},[te(g(c.username)+" ",1),o[85]||(o[85]=e("i",{class:"fa-brands fa-twitch"},null,-1))],8,uu)):(i(),a(ce,{key:1},[te(g(c.username),1)],64))]),e("div",du,g(c.approved_submissions_count)+" "+g(sn(c.approved_submissions_count,["—Ñ–∏–ª—å–º","—Ñ–∏–ª—å–º–∞","—Ñ–∏–ª—å–º–æ–≤"])),1)]),e("div",cu,[e("div",{class:"contribution-bar",style:Yt({width:an(c.approved_submissions_count)+"%"})},null,4)])]))),128))])])])])):k("",!0),ot.value?(i(),a("div",{key:4,class:"modal-overlay",onClick:o[26]||(o[26]=c=>ot.value=!1)},[e("div",{class:"modal-content all-timings-modal",onClick:o[25]||(o[25]=_t(()=>{},["stop"]))},[e("div",vu,[o[87]||(o[87]=e("h3",null,"–í—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏",-1)),e("button",{class:"close-modal-btn",onClick:o[20]||(o[20]=c=>ot.value=!1)},o[86]||(o[86]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",mu,[!ht.value&&Xe.value.length>0?(i(),a("div",fu,[e("button",{class:E(["timing-filter-btn",{active:ze.value==="all"}]),onClick:o[21]||(o[21]=c=>ze.value="all")}," –í—Å–µ ("+g(Xe.value.length)+") ",3),e("button",{class:E(["timing-filter-btn",{active:ze.value==="approved"}]),onClick:o[22]||(o[22]=c=>ze.value="approved")}," –û–¥–æ–±—Ä–µ–Ω–Ω—ã–µ ("+g(Xe.value.filter(c=>c.status==="approved").length)+") ",3),e("button",{class:E(["timing-filter-btn",{active:ze.value==="pending"}]),onClick:o[23]||(o[23]=c=>ze.value="pending")}," –ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ ("+g(Xe.value.filter(c=>c.status==="pending").length)+") ",3),e("button",{class:E(["timing-filter-btn",{active:ze.value==="clean_text"}]),onClick:o[24]||(o[24]=c=>ze.value="clean_text")}," –ù–µ –º–æ–¥–µ—Ä–∏—Ä—É—é—Ç—Å—è ("+g(Xe.value.filter(c=>c.status==="clean_text").length)+") ",3)])):k("",!0),ht.value?(i(),a("div",pu,o[88]||(o[88]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),e("span",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö —Ç–∞–π–º–∏–Ω–≥–æ–≤...",-1)]))):Xe.value.length===0?(i(),a("div",gu,o[89]||(o[89]=[e("p",null,"–¢–∞–π–º–∏–Ω–≥–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",-1)]))):jt.value.length===0?(i(),a("div",yu,o[90]||(o[90]=[e("p",null,"–¢–∞–π–º–∏–Ω–≥–∏ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —Ñ–∏–ª—å—Ç—Ä—É –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",-1)]))):(i(),a("div",ku,[(i(!0),a(ce,null,Te(jt.value,c=>{var oe;return i(),a("div",{key:c.id,class:E(["timing-item",{pending:c.status==="pending",approved:c.status==="approved",rejected:c.status==="rejected","clean-text":c.status==="clean_text"}])},[e("div",hu,[e("div",bu,[e("span",{class:E(["timing-status",c.status])},g(ln(c.status)),3),e("span",wu,g(c.username),1),e("span",Cu,g(Z(zn)(c.submitted_at)),1)]),e("div",_u,[Le(O,{to:"/movie/".concat(c.kp_id),class:"timing-kp-id clickable",title:"–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ñ–∏–ª—å–º—É ".concat(c.kp_id)},{default:fn(()=>[te(" KP: "+g(c.kp_id),1)]),_:2},1032,["to","title"]),(oe=Z(n).user)!=null&&oe.is_admin&&c.status==="pending"?(i(),a("div",Eu,[c.status==="pending"?(i(),a("button",{key:0,class:"approve-btn",onClick:we=>nn(c.id),disabled:Fe.value,title:"–û–¥–æ–±—Ä–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥"},[Qe.value===c.id&&ft.value?(i(),a("i",Lu)):(i(),a("i",xu))],8,Mu)):k("",!0),c.status==="pending"?(i(),a("button",{key:1,class:"reject-btn",onClick:we=>Mt(c.id),disabled:Fe.value,title:"–û—Ç–∫–ª–æ–Ω–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥"},[Qe.value===c.id&&!ft.value&&!dt.value?(i(),a("i",Tu)):(i(),a("i",Su))],8,Iu)):k("",!0),c.status==="pending"?(i(),a("button",{key:2,class:"clean-text-btn",onClick:we=>xt(c.id),disabled:Fe.value,title:"–û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ clean_text"},[Qe.value===c.id&&dt.value?(i(),a("i",Ru)):(i(),a("i",Pu))],8,Au)):k("",!0)])):k("",!0)])]),e("div",Nu,[e("pre",ju,g(c.timing_text),1)])],2)}),128))]))])])])):k("",!0)],64)}}},zu=gt(Bu,[["__scopeId","data-v-5baa72cd"]]);export{zu as default};
