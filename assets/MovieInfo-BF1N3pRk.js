import{_ as Ge,r as v,c as D,b as r,d as i,e,s as J,t as k,L as le,g as p,M as ge,n as _,q as Qe,u as ht,i as St,K as hn,z as wt,l as We,o as vt,P as xt,x as Ze,E as wn,f as re,Q as dt,m as ee,R as ae,y as Z,U as V,S as Ln,D as et,V as Se,W as Cn,X as Pt,Y as pt,Z as In,$ as mn,a0 as Tn,k as Rn,v as ct,a1 as Pn,a2 as Le,w as At,a3 as bt,a4 as An,a5 as Sn,a6 as xn,a7 as jn,a8 as fn,a9 as Un,aa as Nn,a as $n,ab as gn,ac as Bn,ad as Hn,ae as Dn,af as Vn,ag as On,ah as Fn,ai as qn,aj as Kn}from"./index-CIO6lHeC.js";import{_ as zn,a as kn,b as yn,M as pn}from"./MovieList-BI6Xdx1e.js";import{u as _n,f as Wn,a as En}from"./useCommentFormatting-BSvzCv0J.js";import{S as Mn}from"./SpinnerLoading-D0OHF9WY.js";import{N as Lt}from"./ToastMessage--Bhryt02.js";import{u as Gn,S as Yn,a as Xn}from"./trailer-BzMBrijh.js";const yt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVR4nO2ZQUoDMRSGR7eewHoFsVS0HkUUXNXqASqK2EURBPFIVRe6c+UN1CvUXWvbT4KvMAwzNnnJdCrmg1BKad7/v7y0b5IkiUQiCwGoAx3gQjEugZ0qxTeAIX6MKjMBnBOGS62AVWAPOHVYdlMu9YArYOhphLeBT+ALmOKGEd2QubaAK+B2zngFxt4GgDXgGZjgR8ch5oEkCi8DkvlnRcYLV0Apfqw10M7JvPkV6AN3FmVwK+WyZRnvMEe8ef/ibECyb2o+zRuwnpQAxeLNivQ0BvYyE46qEJ/8fK4ycJKp/X4V4n0MdDNfukkqEO9jwP1LDgD7BeKPgmgp04CL+KUz4Cp+qQxoxC+NAdsNm4c0hWkukkUa8BGfegiadbFDq3/2UAZ8xc+QVvzMtqcKYkBaZ5/MN5xEl2DgLGDZ1KswsC09FPJqXTZoNm5oA6kyMGI2FxqfkluJ0uMTDfhBXAHiHvCCWEL8/RLqlv1MPCf+TSZ+13WC7KnEfWlqcwAeU7GNjnbiQsG5UC1ZAEAt1UMhOpquk6zknMy9l20C2AA+MnEHRo9msuOCs9EH4Fp5TVQ0rqVs0plH4re02Qh1Oq1lCjypsp+5H3gKcD/gykTirqnFZ/ZDy+OGxpapzD+QePrM/2KkKfcGPcv7AdvRkz23G1x4JPIP+AY3r/ywUk/2JAAAAABJRU5ErkJggg==",Zn="/reyohoho/assets/icon-shikimori-DGvXK9Jc.svg",gt=a=>{const t=document.createElement("div");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.backgroundColor="rgba(0, 0, 0, 0.8)",t.style.color="white",t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",t.style.fontSize="2rem",t.style.zIndex="99000",t.textContent=a,document.body.appendChild(t),setTimeout(()=>{document.body.removeChild(t)},2e3)},Qn={key:0},Jn={key:1},eo={class:"players-list"},to=["onClick"],no={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},oo={key:0},so={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},lo={key:1},io={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},ao=["onClick"],ro={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},uo={__name:"PlayerModal",props:{players:{type:Array,required:!0},selectedPlayer:{type:Object,default:null}},emits:["close","select"],setup(a,{emit:t}){const u=a,n=t,E=v(null),M=D(()=>u.players.filter(h=>!L(h)&&!I(h))),f=D(()=>u.players.some(h=>L(h))),g=D(()=>u.players.some(h=>I(h))),L=h=>h.key.toUpperCase().includes("HDREZKA"),I=h=>h.key.toUpperCase().includes("KODIK"),o=h=>h.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"").replace(/KODIK>/,"").trim(),d=h=>{n("select",h),n("close")},C=h=>u.selectedPlayer&&u.selectedPlayer.key===h.key,w=h=>u.selectedPlayer?h==="hdrezka"&&L(u.selectedPlayer)||h==="kodik"&&I(u.selectedPlayer):!1,U=h=>{E.value=h},S=()=>{E.value=null},x=h=>{let R=u.players.filter(j=>h==="hdrezka"&&L(j)||h==="kodik"&&I(j));return h==="kodik"?R.sort((j,Y)=>o(j.translate).localeCompare(o(Y.translate))):R},P=h=>x(h).some(R=>R.warning);return(h,R)=>(i(),r("div",{class:"modal",onClick:R[4]||(R[4]=Qe(j=>h.$emit("close"),["self"]))},[e("div",{class:"modal-content",onClick:R[3]||(R[3]=Qe(()=>{},["stop"]))},[e("button",{class:"close",onClick:R[0]||(R[0]=j=>h.$emit("close"))},"√ó"),E.value?(i(),r("h2",Jn,[e("button",{class:"back-btn",onClick:S},"‚Üê –ù–∞–∑–∞–¥"),J(" "+k(E.value==="hdrezka"?"ReYohoho - HDrezka":"Kodik"),1)])):(i(),r("h2",Qn,"–í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–µ–µ—Ä")),e("ul",eo,[E.value?(i(!0),r(le,{key:1},ge(x(E.value),j=>(i(),r("li",{key:j.key},[e("button",{class:_(["player-item",{active:C(j)}]),onClick:Y=>d(j)},[J(k(o(j.translate))+" ",1),j.warning?(i(),r("span",ro,"warning")):p("",!0)],10,ao)]))),128)):(i(),r(le,{key:0},[(i(!0),r(le,null,ge(M.value,j=>(i(),r("li",{key:j.key},[e("button",{class:_(["player-item",{active:C(j)}]),onClick:Y=>d(j)},[J(k(o(j.translate))+" ",1),j.warning?(i(),r("span",no,"warning")):p("",!0)],10,to)]))),128)),f.value?(i(),r("li",oo,[e("button",{class:_(["group-item",{active:w("hdrezka")}]),onClick:R[1]||(R[1]=j=>U("hdrezka"))},[R[5]||(R[5]=e("span",{class:"material-icons group-icon"},"folder",-1)),R[6]||(R[6]=J(" ReYohoho - HDrezka ")),P("hdrezka")?(i(),r("span",so,"warning")):p("",!0)],2)])):p("",!0),g.value?(i(),r("li",lo,[e("button",{class:_(["group-item",{active:w("kodik")}]),onClick:R[2]||(R[2]=j=>U("kodik"))},[R[7]||(R[7]=e("span",{class:"material-icons group-icon"},"folder",-1)),R[8]||(R[8]=J(" Kodik ")),P("kodik")?(i(),r("span",io,"warning")):p("",!0)],2)])):p("",!0)],64))])])]))}},co=Ge(uo,[["__scopeId","data-v-8b8d2b67"]]),vo={class:"players-list"},mo=["src"],fo={key:1,class:"controls"},go={class:"main-controls"},ko={class:"material-icons"},yo={class:"list-button-item"},po={class:"material-icons"},bo={class:"list-button-item"},ho={class:"material-icons"},wo={class:"list-button-item"},Co={class:"list-button-item"},_o={class:"material-icons"},Eo={class:"list-button-item"},Mo={class:"material-icons"},Lo={class:"tooltip-container","data-tooltip-container":"dimming"},Io={class:"material-icons"},To={class:"tooltip-container","data-tooltip-container":"blur"},Ro={class:"tooltip-container","data-tooltip-container":"compressor"},Po={class:"tooltip-container","data-tooltip-container":"mirror"},Ao={class:"tooltip-container","data-tooltip-container":"theater"},So={class:"material-symbols-outlined"},xo={class:"custom-tooltip","data-tooltip":"theater"},jo={class:"tooltip-container","data-tooltip-container":"pip"},Uo={class:"tooltip-container","data-tooltip-container":"aspect_ratio"},No={class:"current-ratio"},$o=["onClick"],Bo={key:0,class:"tooltip-container","data-tooltip-container":"app_link"},Ho={class:"custom-tooltip","data-tooltip":"app_link"},Do={key:1,class:"tooltip-container","data-tooltip-container":"copy_link"},Vo={class:"custom-tooltip","data-tooltip":"copy_link"},Oo={key:0,class:"desktop-list-buttons"},Fo={class:"tooltip-container"},qo={class:"material-icons"},Ko={class:"custom-tooltip"},zo={class:"tooltip-container"},Wo={class:"material-icons"},Go={class:"custom-tooltip"},Yo={class:"tooltip-container"},Xo={class:"custom-tooltip"},Zo={class:"tooltip-container"},Qo={class:"material-icons"},Jo={class:"custom-tooltip"},es={class:"tooltip-container"},ts={class:"material-icons"},ns={class:"custom-tooltip"},os={__name:"PlayerComponent",props:{kpId:String,movieInfo:{type:Object,default:()=>({})}},emits:["update:selectedPlayer","update:movieInfo"],setup(a,{emit:t}){const u=ht(),n=Gn(),E=St(),M=hn(),f=wt(),g=v(M.params.kp_id),L=a,I=t,o=v([]),d=v(null),C=v(!0),w=v(!1),U=v(!1),S=v(null),x=v(null),P=v(!1),h=v(""),R=v(null),j=v(window.innerHeight*.9),Y=D(()=>"".concat(j.value,"px")),q=D(()=>u.isMobile),O=D(()=>!!window.electronAPI),A=v(null),be=v(!1);let ke=null;const fe=v(null),$e=v(null),B=v(null),se=v(null),W=v(!1),Q=v(!1),ie=v(null),ce=v(null),ve=v(null),me=v(null),Ie=v(null),ue=v(null),Ye=m=>{const l=document.querySelector('[data-tooltip-container="'.concat(m,'"]')),T=document.querySelector('[data-tooltip="'.concat(m,'"]'));if(!l||!T)return;const F=l.getBoundingClientRect(),K=T.getBoundingClientRect(),ne=window.innerHeight;F.bottom+K.height>ne?(T.style.top="auto",T.style.bottom="100%",T.style.marginTop="0",T.style.marginBottom="12px",T.style.transform="translateX(-50%)"):(T.style.top="100%",T.style.bottom="auto",T.style.marginTop="12px",T.style.marginBottom="0",T.style.transform="translateX(-50%)")},oe=m=>{A.value=m,be.value=!1,clearTimeout(ke),Se(()=>{Ye(m)})},Te=()=>{be.value||(ke=setTimeout(()=>{A.value=null},300))},he=()=>{be.value=!0,clearTimeout(ke)},Be=()=>{be.value=!1,A.value=null},we=D({get:()=>n.aspectRatio,set:m=>n.updateAspectRatio(m)}),He=D({get:()=>n.isCentered,set:m=>n.updateCentering(m)}),tt=D(()=>{var m,l,T,F,K,ne,Ae,qe,Ke,ze;return((l=(m=L.movieInfo)==null?void 0:m.lists)==null?void 0:l.isFavorite)||((F=(T=L.movieInfo)==null?void 0:T.lists)==null?void 0:F.isWatching)||((ne=(K=L.movieInfo)==null?void 0:K.lists)==null?void 0:ne.isLater)||((qe=(Ae=L.movieInfo)==null?void 0:Ae.lists)==null?void 0:qe.isCompleted)||((ze=(Ke=L.movieInfo)==null?void 0:Ke.lists)==null?void 0:ze.isAbandoned)}),nt=D(()=>n.preferredPlayer),ut=v(0),Re=m=>m.toUpperCase(),De=()=>{if(w.value||!x.value)return;const[m,l]=we.value.split(":").map(Number);j.value=window.innerHeight*.9,ut.value=Math.min(x.value.clientWidth*(l/m),j.value)},ye=D(()=>{if(w.value)return{};const[m,l]=we.value.split(":").map(Number),T=j.value*(m/l);return{width:"100%",maxWidth:"".concat(T,"px"),maxHeight:Y.value,margin:"0 auto",overflow:"hidden"}}),Ve=D(()=>{const[m,l]=we.value.split(":").map(Number);return{position:"relative",width:"100%",paddingTop:"".concat(l/m*100,"%")}}),b=()=>{x.value&&setTimeout(()=>{Se(()=>{x.value.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})},500)},te=async()=>{try{h.value="",R.value=null;const m=await Ln(L.kpId);if(o.value=Object.entries(m).map(([l,T])=>({key:l.toUpperCase(),...T})),o.value.length>0){if(nt.value){const l=Re(nt.value),T=o.value.find(F=>Re(F.key)===l);d.value=T||o.value[0]}else d.value=o.value[0];I("update:selectedPlayer",d.value)}}catch(m){const{message:l,code:T}=et(m);h.value=l,R.value=T,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–ª–µ–µ—Ä–æ–≤:",m)}},Oe=()=>{P.value=!0},mt=()=>{P.value=!1},ot=()=>{try{return ie.value||(ie.value=new(window.AudioContext||window.webkitAudioContext)),ce.value||(ce.value=ie.value.createDynamicsCompressor(),ce.value.threshold.value=-50,ce.value.knee.value=40,ce.value.ratio.value=12,ce.value.attack.value=0,ce.value.release.value=.25,me.value=ie.value.createGain(),Ie.value=ie.value.createGain(),me.value.gain.value=0,Ie.value.gain.value=1,ce.value.connect(me.value),me.value.connect(ie.value.destination),Ie.value.connect(ie.value.destination)),!0}catch(m){return console.log("Error initializing audio context:",m),!1}},Je=async m=>{try{if(!ie.value||ue.value===m)return!0;const l=S.value,T=(l==null?void 0:l.src)||"";if(T.includes("videoframe")||T.includes("kinoserial.net")||T.includes("allarknow"))return console.log("Player detected as unsupported for compressor:",T),ue.value=m,ve.value=null,Q.value=!1,O.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –ø–ª–µ–µ—Ä–æ–º"),!1;if(ve.value)try{ve.value.disconnect()}catch(K){}const F=async(K=0)=>{K>0&&await new Promise(ne=>setTimeout(ne,K));try{return ve.value=ie.value.createMediaElementSource(m),ue.value=m,ve.value.connect(ce.value),ve.value.connect(Ie.value),console.log("Video audio setup completed (attempt with ".concat(K,"ms delay)")),!0}catch(ne){if(ne.name==="InvalidStateError"&&ne.message.includes("already connected"))return console.log("MediaElementSource already connected (".concat(K,"ms delay attempt)")),!1;throw ne}};return await F(0)||await F(100)||await F(300)||await F(800)?!0:(console.log("Video element has internal audio processing, compressor not available for this player"),ue.value=m,ve.value=null,Q.value=!1,O.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –ø–ª–µ–µ—Ä–æ–º"),!1)}catch(l){return console.log("Error setting up video audio:",l),!1}},Fe=async m=>{if(S.value)try{const l=S.value,T=l.contentDocument||l.contentWindow.document;if(!T)return;const F=T.querySelectorAll("video");if(F.length===0)return;const K=F[0];if(!ot())return;if(!await Je(K)||!ve.value){console.log("Compressor not available for this player");return}m&&!Q.value?(me.value.gain.setValueAtTime(1,ie.value.currentTime),Ie.value.gain.setValueAtTime(0,ie.value.currentTime),Q.value=!0,O.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –≤–∫–ª—é—á—ë–Ω"),console.log("Compressor enabled")):!m&&Q.value&&(me.value.gain.setValueAtTime(0,ie.value.currentTime),Ie.value.gain.setValueAtTime(1,ie.value.currentTime),Q.value=!1,O.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –æ—Ç–∫–ª—é—á—ë–Ω"),console.log("Compressor disabled"))}catch(l){console.log("Compressor error:",l),O.value&&window.electronAPI.showToast("–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä–∞")}},ft=()=>{O.value?window.electronAPI.sendHotKey("F2"):(gt("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},N=()=>{O.value?(_e.value=!_e.value,Fe(_e.value)):(gt("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},X=()=>{O.value?(Ee.value=!Ee.value,st(Ee.value)):(gt("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},G=()=>{w.value=!w.value,w.value?(window.addEventListener("mousemove",Pe),document.addEventListener("keydown",kt),document.body.classList.add("no-scroll")):(window.removeEventListener("mousemove",Pe),document.removeEventListener("keydown",kt),document.body.classList.remove("no-scroll")),U.value=w.value,Se(()=>b())},de=v(null),Pe=()=>{de.value=setTimeout(()=>{clearTimeout(de.value),U.value=!1},4e3),U.value=!0},pe=D(()=>u.dimmingEnabled),Ce=()=>{w.value||u.toggleDimming()},_e=D({get:()=>n.compressorEnabled,set:m=>n.updateCompressor(m)}),Ee=D({get:()=>n.mirrorEnabled,set:m=>n.updateMirror(m)}),st=m=>{if(S.value)try{const l=S.value,T=l.contentDocument||l.contentWindow.document;if(!T)return;const F=T.querySelectorAll("video");if(F.length>0&&(F.forEach(K=>{m?K.style.transform="scaleX(-1)":K.style.transform="scaleX(1)"}),W.value=m,O.value)){const K=m?"–ó–µ—Ä–∫–∞–ª–æ –≤–∫–ª—é—á–µ–Ω–æ":"–ó–µ—Ä–∫–∞–ª–æ –æ—Ç–∫–ª—é—á–µ–Ω–æ";window.electronAPI.showToast(K)}}catch(l){}},lt=()=>{se.value&&clearInterval(se.value),se.value=setInterval(()=>{if(S.value)try{const m=S.value,l=m.contentDocument||m.contentWindow.document;if(!l)return;const T=l.querySelectorAll("video");if(T.length>0){const F=T[0],ne=F.style.transform==="scaleX(-1)";Ee.value&&!ne?(F.style.transform="scaleX(-1)",W.value=!0):!Ee.value&&ne&&(F.style.transform="scaleX(1)",W.value=!1),ue.value!==F?(console.log("Video element changed, reinitializing compressor"),ue.value=null,Q.value=!1,_e.value&&setTimeout(()=>{Fe(!0)},500)):_e.value!==Q.value&&ve.value&&(console.log("Compressor state mismatch, reapplying"),Fe(_e.value))}}catch(m){}},1e3)},Xe=()=>{C.value=!1,lt()},kt=m=>{(m.key==="Escape"&&w.value||m.altKey&&m.keyCode===84)&&G()},Ct=m=>{we.value=m,setTimeout(()=>{He.value&&b()},310)},It=()=>{const m="reyohoho://#".concat(g.value);try{window.location.href=m}catch(l){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Å—ã–ª–∫–∏:",l)}},Tt=()=>{const m=window.location.href;navigator.clipboard.writeText(m).then(()=>{}),fe.value.showNotification("–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∏–ª—å–º —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞")};function _t(m){return m.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"HDRezka - ").replace(/KODIK>/,"Kodik - ").trim()}const Rt=()=>{try{ve.value&&(ve.value.disconnect(),ve.value=null),ie.value&&(ie.value.close(),ie.value=null),ce.value=null,me.value=null,Ie.value=null,ue.value=null,Q.value=!1}catch(m){console.log("Error cleaning up audio context:",m)}},Et=m=>{var l;if(((l=d.value)==null?void 0:l.key)===m.key){mt();return}d.value=m,C.value=!0,W.value=!1,Q.value=!1,ue.value=null,se.value&&(clearInterval(se.value),se.value=null),n.updatePreferredPlayer(Re(m.key)),I("update:selectedPlayer",m)};We(d,m=>{m&&(C.value=!0,W.value=!1,Q.value=!1,ue.value=null,se.value&&(clearInterval(se.value),se.value=null),n.updatePreferredPlayer(Re(m.key)),I("update:selectedPlayer",m))}),We(()=>M.params.kp_id,async m=>{m&&m!==g.value&&(g.value=m,W.value=!1,Q.value=!1,ue.value=null,se.value&&(clearInterval(se.value),se.value=null),He.value&&b())},{immediate:!0});const c=["16:9","12:5","4:3"],s=()=>{const l=(c.indexOf(we.value)+1)%c.length;Ct(c[l])},H=m=>{var T,F,K,ne,Ae,qe,Ke,ze,it,at,rt,y,Ne;return(Ne={[V.FAVORITE]:((F=(T=L.movieInfo)==null?void 0:T.lists)==null?void 0:F.isFavorite)||!1,[V.HISTORY]:((ne=(K=L.movieInfo)==null?void 0:K.lists)==null?void 0:ne.isHistory)||!1,[V.LATER]:((qe=(Ae=L.movieInfo)==null?void 0:Ae.lists)==null?void 0:qe.isLater)||!1,[V.COMPLETED]:((ze=(Ke=L.movieInfo)==null?void 0:Ke.lists)==null?void 0:ze.isCompleted)||!1,[V.ABANDONED]:((at=(it=L.movieInfo)==null?void 0:it.lists)==null?void 0:at.isAbandoned)||!1,[V.WATCHING]:((y=(rt=L.movieInfo)==null?void 0:rt.lists)==null?void 0:y.isWatching)||!1}[m])!=null?Ne:!1},z=async m=>{if(!E.token){fe.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:xe});return}try{const l={[V.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[V.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[V.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[V.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[V.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[V.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};H(m)?(await Cn(g.value,m),fe.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(l[m]))):(await Pt(g.value,m),fe.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(l[m])))}catch(l){const{message:T,code:F}=et(l);fe.value.showNotification("".concat(T," ").concat(F))}I("update:movieInfo")},xe=()=>{f.push("/login")},Me=D(()=>n.showFavoriteTooltip),je=()=>{f.push("/settings"),Be()},Ue=async()=>{if(!O.value){gt("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank");return}if(S.value)try{const m=S.value,l=m.contentDocument||m.contentWindow.document;if(!l)return;const T=l.querySelector("video");if(!T)return;document.pictureInPictureElement?await document.exitPictureInPicture():document.pictureInPictureEnabled?await T.requestPictureInPicture():gt('–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–∂–∏–º "–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ"')}catch(m){console.error("Error toggling PiP:",m),gt('–ù–µ —É–¥–∞–ª–æ—Å—å –≤–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º "–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ"')}};return vt(()=>{C.value=!0,te(),q.value&&(we.value="4:3"),De(),window.addEventListener("resize",De),window.addEventListener("resize",Ye),He.value&&b()}),xt(()=>{window.removeEventListener("resize",De),window.removeEventListener("resize",Ye),window.removeEventListener("mousemove",Pe),document.removeEventListener("keydown",kt),document.body.classList.remove("no-scroll"),se.value&&clearInterval(se.value),Rt()}),(m,l)=>{var T,F,K,ne,Ae,qe,Ke,ze,it,at,rt,y,Ne,Mt,Bt,Ht,Dt,Vt,Ot,Ft,qt,Kt,zt,Wt,Gt,Yt,Xt,Zt,Qt,Jt,en,tn,nn,on,sn,ln,an,rn,un,dn,cn,vn;return h.value?(i(),Ze(wn,{key:0,message:h.value,code:R.value},null,8,["message","code"])):(i(),r(le,{key:1},[e("div",vo,[l[41]||(l[41]=e("span",null,"–ü–ª–µ–µ—Ä:",-1)),e("button",{class:"player-btn",onClick:Oe},k(d.value?_t(d.value.translate).toUpperCase():"–ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–µ–µ—Ä–æ–≤..."),1)]),P.value?(i(),Ze(co,{key:0,players:o.value,"selected-player":d.value,onClose:mt,onSelect:Et},null,8,["players","selected-player"])):p("",!0),e("div",{ref_key:"containerRef",ref:x,class:_(["player-container",{"theater-mode":w.value}]),style:dt(w.value?{}:ye.value)},[e("div",{class:"iframe-wrapper",style:dt(w.value?{}:Ve.value)},[ee(e("iframe",{ref_key:"playerIframe",ref:S,src:(T=d.value)==null?void 0:T.iframe,frameborder:"0",allowfullscreen:"",webkitallowfullscreen:"",class:_(["responsive-iframe",{"theater-mode-unlock":U.value,"theater-mode-lock":w.value,dimmed:pe.value}]),onLoad:Xe},null,42,mo),[[ae,!C.value&&((F=d.value)==null?void 0:F.iframe)]]),C.value?(i(),Ze(Mn,{key:0,text:"–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–ª–µ–µ—Ä: ".concat(d.value?_t(d.value.translate):"–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ –ø–ª–µ–µ—Ä–æ–≤","\n–ï—Å–ª–∏ –ø–ª–µ–µ—Ä –Ω–µ –≥—Ä—É–∑–∏—Ç—Å—è, —Ç–æ —Å–º–µ–Ω–∏—Ç–µ –ø–ª–µ–µ—Ä –≤—ã—à–µ –∏–ª–∏ –≤–∫–ª—é—á–∏—Ç–µ VPN"),style:{"white-space":"pre-line"}},null,8,["text"])):p("",!0)],4),w.value?(i(),r("button",{key:0,class:_(["close-theater-btn",{visible:U.value}]),onClick:G}," ‚úñ ",2)):p("",!0)],6),w.value?p("",!0):(i(),r("div",fo,[e("div",go,[q.value?p("",!0):(i(),r("div",{key:0,ref_key:"tooltipContainer",ref:$e,class:"tooltip-container list-buttons-container","data-tooltip-container":"favorite"},[Me.value?(i(),r("button",{key:0,class:_(["favorite-btn",{active:(ne=(K=a.movieInfo)==null?void 0:K.lists)==null?void 0:ne.isFavorite}]),onMouseenter:l[0]||(l[0]=$=>oe("favorite")),onMouseleave:Te,onClick:l[1]||(l[1]=$=>z(Z(V).FAVORITE))},[e("span",ko,k((qe=(Ae=a.movieInfo)==null?void 0:Ae.lists)!=null&&qe.isFavorite?"favorite":"favorite_border"),1),e("span",{class:_(["material-icons dropdown-arrow",{highlighted:tt.value}])},"expand_more",2)],34)):p("",!0),ee(e("div",{ref_key:"tooltip",ref:B,class:"custom-tooltip advanced-tooltip list-buttons-dropdown","data-tooltip":"favorite",onMouseenter:he,onMouseleave:Be},[e("div",yo,[e("button",{class:_(["favorite-btn",{active:(ze=(Ke=a.movieInfo)==null?void 0:Ke.lists)==null?void 0:ze.isFavorite}]),onClick:l[2]||(l[2]=$=>z(Z(V).FAVORITE))},[e("span",po,k((at=(it=a.movieInfo)==null?void 0:it.lists)!=null&&at.isFavorite?"favorite":"favorite_border"),1),l[42]||(l[42]=e("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))],2)]),e("div",bo,[e("button",{class:_(["watching-btn",{active:(y=(rt=a.movieInfo)==null?void 0:rt.lists)==null?void 0:y.isWatching}]),onClick:l[3]||(l[3]=$=>z(Z(V).WATCHING))},[e("span",ho,k((Mt=(Ne=a.movieInfo)==null?void 0:Ne.lists)!=null&&Mt.isWatching?"visibility":"visibility_off"),1),l[43]||(l[43]=e("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))],2)]),e("div",wo,[e("button",{class:_(["later-btn",{active:(Ht=(Bt=a.movieInfo)==null?void 0:Bt.lists)==null?void 0:Ht.isLater}]),onClick:l[4]||(l[4]=$=>z(Z(V).LATER))},l[44]||(l[44]=[e("span",{class:"material-icons"},"watch_later",-1),e("span",{class:"button-label"},"–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ",-1)]),2)]),e("div",Co,[e("button",{class:_(["completed-btn",{active:(Vt=(Dt=a.movieInfo)==null?void 0:Dt.lists)==null?void 0:Vt.isCompleted}]),onClick:l[5]||(l[5]=$=>z(Z(V).COMPLETED))},[e("span",_o,k((Ft=(Ot=a.movieInfo)==null?void 0:Ot.lists)!=null&&Ft.isCompleted?"check_circle":"check_circle_outline"),1),l[45]||(l[45]=e("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))],2)]),e("div",Eo,[e("button",{class:_(["abandoned-btn",{active:(Kt=(qt=a.movieInfo)==null?void 0:qt.lists)==null?void 0:Kt.isAbandoned}]),onClick:l[6]||(l[6]=$=>z(Z(V).ABANDONED))},[e("span",Mo,k(((Wt=(zt=a.movieInfo)==null?void 0:zt.lists)!=null&&Wt.isAbandoned,"not_interested")),1),l[46]||(l[46]=e("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))],2)]),e("div",{class:"tooltip-hint"},[l[48]||(l[48]=e("span",{class:"material-icons"},"settings",-1)),e("span",null,[l[47]||(l[47]=J("–°—Ç–∏–ª—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ ")),e("a",{class:"settings-link",onClick:je},"–Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö")])])],544),[[ae,A.value==="favorite"&&Me.value]])],512)),q.value?p("",!0):(i(),r(le,{key:1},[e("div",Lo,[e("button",{class:_(["dimming-btn",{active:pe.value}]),onMouseenter:l[7]||(l[7]=$=>oe("dimming")),onMouseleave:l[8]||(l[8]=$=>A.value=null),onClick:Ce},[e("span",Io,k(pe.value?"light_mode":"dark_mode"),1)],34),ee(e("div",{class:"custom-tooltip","data-tooltip":"dimming"},k(pe.value?"–û—Ç–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ":"–í–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ"),513),[[ae,A.value==="dimming"]])]),e("div",To,[e("button",{class:_(["blur-btn",{"electron-only":!O.value}]),onMouseenter:l[9]||(l[9]=$=>oe("blur")),onMouseleave:l[10]||(l[10]=$=>A.value=null),onClick:ft},l[49]||(l[49]=[e("span",{class:"material-icons"},"blur_on",-1)]),34),ee(e("div",{class:"custom-tooltip","data-tooltip":"blur"},k(O.value?"–ë–ª—é—Ä":"–ë–ª—é—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[ae,A.value==="blur"]])]),e("div",Ro,[e("button",{class:_(["material-symbols-outlined",{active:_e.value,"electron-only":!O.value}]),onMouseenter:l[11]||(l[11]=$=>oe("compressor")),onMouseleave:l[12]||(l[12]=$=>A.value=null),onClick:N},l[50]||(l[50]=[e("span",{class:"material-icons"},"graphic_eq",-1)]),34),ee(e("div",{class:"custom-tooltip","data-tooltip":"compressor"},k(O.value?"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä":"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[ae,A.value==="compressor"]])]),e("div",Po,[e("button",{class:_(["mirror-btn",{active:Ee.value,"electron-only":!O.value}]),onMouseenter:l[13]||(l[13]=$=>oe("mirror")),onMouseleave:l[14]||(l[14]=$=>A.value=null),onClick:X},l[51]||(l[51]=[e("span",{class:"material-icons"},"flip",-1)]),34),ee(e("div",{class:"custom-tooltip","data-tooltip":"mirror"},k(O.value?"–ó–µ—Ä–∫–∞–ª–æ":"–ó–µ—Ä–∫–∞–ª–æ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[ae,A.value==="mirror"]])]),e("div",Ao,[e("button",{class:"theater-mode-btn",onMouseenter:l[15]||(l[15]=$=>oe("theater")),onMouseleave:l[16]||(l[16]=$=>A.value=null),onClick:G},[e("span",So,k(w.value?"fullscreen_exit":"aspect_ratio"),1)],32),ee(e("div",xo,[J(k(w.value?"–í—ã–π—Ç–∏ –∏–∑ —Ç–µ–∞—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞":"–¢–µ–∞—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º")+" ",1),l[52]||(l[52]=e("span",{class:"shortcut-hint"},"Alt+T",-1))],512),[[ae,A.value==="theater"]])]),e("div",jo,[e("button",{class:_(["pip-btn",{"electron-only":!O.value}]),onMouseenter:l[17]||(l[17]=$=>oe("pip")),onMouseleave:l[18]||(l[18]=$=>A.value=null),onClick:Ue},l[53]||(l[53]=[e("span",{class:"material-icons"},"picture_in_picture_alt",-1)]),34),ee(e("div",{class:"custom-tooltip","data-tooltip":"pip"},k(O.value?"–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ":"–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[ae,A.value==="pip"]])]),e("div",Uo,[e("button",{class:"aspect-ratio-dropdown-btn",onMouseenter:l[19]||(l[19]=$=>oe("aspect_ratio")),onMouseleave:Te,onClick:s},[e("span",No,k(we.value),1)],32),ee(e("div",{class:"custom-tooltip advanced-tooltip aspect-ratio-dropdown","data-tooltip":"aspect_ratio",onMouseenter:he,onMouseleave:Be},[(i(),r(le,null,ge(c,$=>e("div",{key:$,class:_(["aspect-ratio-option",{active:we.value===$}]),onClick:Br=>Ct($)},k($),11,$o)),64))],544),[[ae,A.value==="aspect_ratio"]])]),e("div",{class:"tooltip-container","data-tooltip-container":"centering",onMouseenter:l[21]||(l[21]=$=>oe("centering")),onMouseleave:Te},[e("button",{class:"center-btn",onClick:b},l[54]||(l[54]=[e("span",{class:"material-icons"},"center_focus_strong",-1)])),ee(e("div",{class:"custom-tooltip advanced-tooltip","data-tooltip":"centering",onMouseenter:he,onMouseleave:Be},[l[55]||(l[55]=J(" –û—Ç—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–ª–µ–µ—Ä ")),re(Yn,{modelValue:He.value,"onUpdate:modelValue":l[20]||(l[20]=$=>He.value=$),title:"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞"},null,8,["modelValue"]),l[56]||(l[56]=e("span",{class:"tooltip-title"},"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞",-1))],544),[[ae,A.value==="centering"]])],32),O.value?p("",!0):(i(),r("div",Bo,[e("button",{class:"app-link-btn",onMouseenter:l[22]||(l[22]=$=>oe("app_link")),onMouseleave:l[23]||(l[23]=$=>A.value=null),onClick:It},l[57]||(l[57]=[e("span",{class:"material-icons"},"open_in_new",-1)]),32),ee(e("div",Ho," –û—Ç–∫—Ä—ã—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ",512),[[ae,A.value==="app_link"]])])),O.value?(i(),r("div",Do,[e("button",{class:"copy-link-btn",onMouseenter:l[24]||(l[24]=$=>oe("copy_link")),onMouseleave:l[25]||(l[25]=$=>A.value=null),onClick:Tt},l[58]||(l[58]=[e("span",{class:"material-icons"},"content_copy",-1)]),32),ee(e("div",Vo," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É ",512),[[ae,A.value==="copy_link"]])])):p("",!0)],64))]),!q.value&&!Me.value?(i(),r("div",Oo,[e("div",Fo,[e("button",{class:_(["favorite-btn",{active:(Yt=(Gt=a.movieInfo)==null?void 0:Gt.lists)==null?void 0:Yt.isFavorite}]),onMouseenter:l[26]||(l[26]=$=>oe("favorite")),onMouseleave:l[27]||(l[27]=$=>A.value=null),onClick:l[28]||(l[28]=$=>z(Z(V).FAVORITE))},[e("span",qo,k((Zt=(Xt=a.movieInfo)==null?void 0:Xt.lists)!=null&&Zt.isFavorite?"favorite":"favorite_border"),1)],34),ee(e("div",Ko,k("–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"),512),[[ae,A.value==="favorite"]])]),e("div",zo,[e("button",{class:_(["watching-btn",{active:(Jt=(Qt=a.movieInfo)==null?void 0:Qt.lists)==null?void 0:Jt.isWatching}]),onMouseenter:l[29]||(l[29]=$=>oe("watching")),onMouseleave:l[30]||(l[30]=$=>A.value=null),onClick:l[31]||(l[31]=$=>z(Z(V).WATCHING))},[e("span",Wo,k((tn=(en=a.movieInfo)==null?void 0:en.lists)!=null&&tn.isWatching?"visibility":"visibility_off"),1)],34),ee(e("div",Go,k("–°–º–æ—Ç—Ä—é"),512),[[ae,A.value==="watching"]])]),e("div",Yo,[e("button",{class:_(["later-btn",{active:(on=(nn=a.movieInfo)==null?void 0:nn.lists)==null?void 0:on.isLater}]),onMouseenter:l[32]||(l[32]=$=>oe("later")),onMouseleave:l[33]||(l[33]=$=>A.value=null),onClick:l[34]||(l[34]=$=>z(Z(V).LATER))},l[59]||(l[59]=[e("span",{class:"material-icons"},"watch_later",-1)]),34),ee(e("div",Xo,k("–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"),512),[[ae,A.value==="later"]])]),e("div",Zo,[e("button",{class:_(["completed-btn",{active:(ln=(sn=a.movieInfo)==null?void 0:sn.lists)==null?void 0:ln.isCompleted}]),onMouseenter:l[35]||(l[35]=$=>oe("completed")),onMouseleave:l[36]||(l[36]=$=>A.value=null),onClick:l[37]||(l[37]=$=>z(Z(V).COMPLETED))},[e("span",Qo,k((rn=(an=a.movieInfo)==null?void 0:an.lists)!=null&&rn.isCompleted?"check_circle":"check_circle_outline"),1)],34),ee(e("div",Jo,k("–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"),512),[[ae,A.value==="completed"]])]),e("div",es,[e("button",{class:_(["abandoned-btn",{active:(dn=(un=a.movieInfo)==null?void 0:un.lists)==null?void 0:dn.isAbandoned}]),onMouseenter:l[38]||(l[38]=$=>oe("abandoned")),onMouseleave:l[39]||(l[39]=$=>A.value=null),onClick:l[40]||(l[40]=$=>z(Z(V).ABANDONED))},[e("span",ts,k(((vn=(cn=a.movieInfo)==null?void 0:cn.lists)!=null&&vn.isAbandoned,"not_interested")),1)],34),ee(e("div",ns,k("–ë—Ä–æ—à–µ–Ω–æ"),512),[[ae,A.value==="abandoned"]])])])):p("",!0)])),re(Lt,{ref_key:"notificationRef",ref:fe},null,512)],64))}}},bn=Ge(os,[["__scopeId","data-v-ebca1ddd"]]),ss={key:0,class:"carousel-container"},ls={class:"carousel-wrapper"},is=["onClick"],as=["src","alt"],rs={class:"video-name"},us={key:0,class:"video-player"},ds=["src"],cs={__name:"TrailerCarousel",props:{videos:{type:Array,required:!0},activeVideoIndex:{type:Number,default:null}},emits:["select"],setup(a,{emit:t}){const u=ht(),n=D(()=>u.isMobile),E=a,M=t,f=v(E.activeVideoIndex),g=v(null),L=v(!1),I=v(!1),o=()=>{if(!g.value)return;const{scrollLeft:x,scrollWidth:P,clientWidth:h}=g.value;L.value=x>0,I.value=x<P-h-1},d=x=>{if(!g.value)return;const P=g.value.querySelector(".carousel-item");if(!P)return;const h=P.clientWidth+16;g.value.scrollBy({left:h*x,behavior:"smooth"})},C=x=>{f.value=x,M("select",E.videos[x])},w=()=>o(),U=v([]),S=async x=>{try{return(await fetch("https://img.youtube.com/vi/".concat(x,"/0.jpg"))).ok}catch(P){return!1}};return vt(async()=>{const x=E.videos.map(async h=>await S(h.videoId)?h:null),P=await Promise.all(x);U.value=P.filter(Boolean),o(),window.addEventListener("resize",w)}),We(()=>E.videos,async x=>{const P=x.map(async R=>await S(R.videoId)?R:null),h=await Promise.all(P);U.value=h.filter(Boolean)}),We(()=>E.activeVideoIndex,x=>{f.value=x}),xt(()=>{window.removeEventListener("resize",w)}),(x,P)=>U.value.length?(i(),r("div",ss,[P[4]||(P[4]=e("h2",null,"–¢—Ä–µ–π–ª–µ—Ä—ã (YouTube)",-1)),e("div",ls,[ee(e("button",{class:"scroll-button left",onClick:P[0]||(P[0]=h=>d(-1))},P[2]||(P[2]=[e("span",{class:"material-symbols-outlined"},"arrow_back_ios",-1)]),512),[[ae,!n.value&&L.value]]),e("div",{ref_key:"carousel",ref:g,class:"carousel",onScroll:o},[(i(!0),r(le,null,ge(U.value,(h,R)=>(i(),r("div",{key:R,class:"carousel-item",onClick:j=>C(R)},[e("img",{src:"https://img.youtube.com/vi/".concat(h.videoId,"/0.jpg"),alt:h.name},null,8,as),e("div",rs,k(h.name),1)],8,is))),128))],544),ee(e("button",{class:"scroll-button right",onClick:P[1]||(P[1]=h=>d(1))},P[3]||(P[3]=[e("span",{class:"material-symbols-outlined"},"arrow_forward_ios",-1)]),512),[[ae,!n.value&&I.value]])]),f.value!==null?(i(),r("div",us,[e("iframe",{src:a.videos[f.value].iframeUrl,frameborder:"0",allowfullscreen:""},null,8,ds)])):p("",!0)])):p("",!0)}},vs=Ge(cs,[["__scopeId","data-v-4a5806b3"]]),ms={class:"rating-container"},fs={class:"rating-display"},gs={class:"rating-numbers"},ks=["onClick","onMouseenter"],ys={key:0,class:"tooltip-footer"},ps={class:"rating-numbers mobile-rating-numbers"},bs=["onClick"],hs={key:0,class:"mobile-modal-footer"},ws={__name:"MovieRating",props:{kpId:{type:String,required:!0},showDash:{type:Boolean,default:!1}},setup(a){const t=ht(),u=wt(),n=a,E=v(null),M=v(null),f=v(null),g=v(null),L=v(0),I=v(!1),o=v(!1);let d=null;const C=j=>j?j.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",w=()=>{d=setTimeout(()=>{I.value=!1,t.isMobile||(o.value=!1)},100)},U=()=>{d&&(clearTimeout(d),d=null),I.value=!0},S=()=>{t.isMobile&&(o.value=!o.value)},x=()=>{u.push("/login")},P=async()=>{try{const j=await In(n.kpId);M.value=j.user_rating,f.value=j.average_rating,g.value=C(j.vote_count)}catch(j){console.error("Error loading rating:",j)}},h=async j=>{var Y;try{j===M.value?(await mn(n.kpId,null),M.value=null,E.value.showNotification("–û—Ü–µ–Ω–∫–∞ —É–¥–∞–ª–µ–Ω–∞")):(await mn(n.kpId,j),M.value=j,E.value.showNotification("–û—Ü–µ–Ω–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞")),t.isMobile&&(o.value=!1),P()}catch(q){console.error("Error setting rating:",q),((Y=q.response)==null?void 0:Y.status)===401?E.value.showNotification('–î–ª—è –æ—Ü–µ–Ω–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:x}):E.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ü–µ–Ω–∫–∏"),t.isMobile&&(o.value=!1)}},R=()=>{o.value=!1};return vt(()=>{P()}),(j,Y)=>(i(),r("div",ms,[e("div",fs,[e("a",{href:"#",class:_(["rating-link",{"has-rating":M.value}]),onMouseenter:Y[0]||(Y[0]=q=>I.value=!0),onMouseleave:w,onClick:Qe(S,["prevent"])},[Y[3]||(Y[3]=e("img",{src:zn,alt:"ReYohoho",class:"rating-logo"},null,-1)),e("span",{class:_(["average-rating",Z(pt)(f.value)])},k(f.value?f.value.toFixed(1).replace(/\.0$/,""):"‚Äî"),3)],34),ee(e("div",{class:"rating-tooltip",onMouseenter:U,onMouseleave:w},[e("div",gs,[(i(),r(le,null,ge(10,q=>e("button",{key:q,class:_(["number-btn",{active:q===M.value,hover:q===L.value,"average-highlight":f.value&&q<=Math.round(f.value)}]),onClick:O=>h(q),onMouseenter:O=>L.value=q,onMouseleave:Y[1]||(Y[1]=O=>L.value=0)},k(q),43,ks)),64))]),g.value?(i(),r("div",ys,"–û—Ü–µ–Ω–æ–∫: "+k(g.value),1)):p("",!0)],544),[[ae,(I.value||o.value)&&!Z(t).isMobile]])]),re(Lt,{ref_key:"notificationRef",ref:E},null,512),Z(t).isMobile&&o.value?(i(),r("div",{key:0,class:"mobile-modal-overlay",onClick:R},[e("div",{class:"mobile-modal",onClick:Y[2]||(Y[2]=Qe(()=>{},["stop"]))},[e("div",{class:"mobile-modal-header"},[Y[4]||(Y[4]=e("h3",null,"–û—Ü–µ–Ω–∏—Ç—å —Ñ–∏–ª—å–º",-1)),e("button",{class:"close-button",onClick:R},"√ó")]),e("div",ps,[(i(),r(le,null,ge(10,q=>e("button",{key:q,class:_(["number-btn",{active:q===M.value,"average-highlight":f.value&&q<=Math.round(f.value)}]),onClick:O=>h(q)},k(q),11,bs)),64))]),g.value?(i(),r("div",hs,"–û—Ü–µ–Ω–æ–∫: "+k(g.value),1)):p("",!0)])])):p("",!0)]))}},Cs=Ge(ws,[["__scopeId","data-v-2df64bd5"]]),_s={name:"EmojiPicker",props:{isVisible:{type:Boolean,default:!1}},emits:["emoji-selected","mouse-enter","mouse-leave","close"],data(){return{activeCategory:"smileys",categories:[{name:"smileys",icon:"üòÄ",emojis:["üòÄ","üòÉ","üòÑ","üòÅ","üòÜ","üòÖ","üòÇ","ü§£","üòä","üòá","üôÇ","üôÉ","üòâ","üòå","üòç","ü•∞","üòò","üòó","üòô","üòö","üòã","üòõ","üòù","üòú","ü§™","ü§®","üßê","ü§ì","üòé","ü§©","ü•≥"]},{name:"emotions",icon:"üò¢",emojis:["üò•","üò¢","üò≠","üò§","üò†","üò°","ü§¨","ü§Ø","üò≥","ü•µ","ü•∂","üò±","üò®","üò∞","üò•","üòì","ü§ó","ü§î","ü§≠","ü§´","ü§•","üò∂","üòê","üòë","üò¨","üôÑ","üòØ","üò¶","üòß","üòÆ","üò≤"]},{name:"gestures",icon:"üëç",emojis:["üëç","üëé","üëå","ü§å","ü§è","‚úåÔ∏è","ü§û","ü§ü","ü§ò","ü§ô","üëà","üëâ","üëÜ","üñï","üëá","‚òùÔ∏è","üëè","üôå","üëê","ü§≤","ü§ù","üôè","‚úçÔ∏è","üí™","ü¶æ","ü¶ø","ü¶µ","ü¶∂","üëÇ","ü¶ª","üëÉ"]},{name:"hearts",icon:"‚ù§Ô∏è",emojis:["‚ù§Ô∏è","üß°","üíõ","üíö","üíô","üíú","ü§é","üñ§","ü§ç","üíî","‚ù£Ô∏è","üíï","üíû","üíì","üíó","üíñ","üíò","üíù","üíü","‚ô•Ô∏è","üíØ","üí¢","üí•","üí´","üí¶","üí®","üï≥Ô∏è","üí£","üí¨","üëÅÔ∏è‚Äçüó®Ô∏è","üó®Ô∏è"]},{name:"objects",icon:"üéâ",emojis:["üéâ","üéä","üéà","üéÅ","üéÄ","üéÇ","üç∞","üßÅ","üç≠","üç¨","üç´","üç©","üç™","üçï","üçî","üçü","üå≠","ü•™","üåÆ","üåØ","ü•ô","ü•ö","üç≥","ü•ò","üç≤","ü•ó","üçø","üßà","üßÄ","ü•®","ü•Ø"]}]}},computed:{currentEmojis(){const a=this.categories.find(t=>t.name===this.activeCategory);return a?a.emojis:[]}},methods:{selectEmoji(a){this.$emit("emoji-selected",a)}}},Es={class:"emoji-categories"},Ms=["onClick"],Ls={class:"emoji-grid"},Is=["onClick"];function Ts(a,t,u,n,E,M){return u.isVisible?(i(),r("div",{key:0,class:"emoji-picker",onMouseenter:t[1]||(t[1]=f=>a.$emit("mouse-enter")),onMouseleave:t[2]||(t[2]=f=>a.$emit("mouse-leave"))},[e("button",{class:"close-btn mobile-only",onClick:t[0]||(t[0]=f=>a.$emit("close"))},t[3]||(t[3]=[e("i",{class:"fas fa-times"},null,-1)])),e("div",Es,[(i(!0),r(le,null,ge(E.categories,f=>(i(),r("button",{key:f.name,onClick:g=>E.activeCategory=f.name,class:_([{active:E.activeCategory===f.name},"category-btn"]),type:"button"},k(f.icon),11,Ms))),128))]),e("div",Ls,[(i(!0),r(le,null,ge(M.currentEmojis,f=>(i(),r("button",{key:f,onClick:g=>M.selectEmoji(f),class:"emoji-btn",type:"button"},k(f),9,Is))),128))])],32)):p("",!0)}const jt=Ge(_s,[["render",Ts],["__scopeId","data-v-209132f3"]]),Rs=async a=>{const t=await Tn();return await a(t)},Ps=async a=>{const{data:t}=await Rs(u=>u.get("/search_emotes/".concat(a)));return t.emotes||[]},As={name:"ImagePicker",props:{isVisible:{type:Boolean,required:!0},currentUser:{type:Object,default:null}},emits:["image-selected","mouse-enter","mouse-leave","close","login-required"],setup(a,{emit:t}){const u=v(""),n=v([]),E=v(null),M=v(!1),g=Rn(async d=>{if(!a.currentUser){console.warn("–ü–æ–ø—ã—Ç–∫–∞ –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏");return}if(!d.trim()){n.value=[],M.value=!1;return}M.value=!0;try{n.value=await Ps(d)}catch(C){console.error("Error searching images:",C),n.value=[]}finally{M.value=!1}},300),L=()=>{if(!a.currentUser){t("login-required");return}u.value.trim()&&(M.value=!0),g(u.value)},I=d=>{if(!a.currentUser){t("login-required");return}t("image-selected",d),t("close")},o=()=>{setTimeout(()=>{a.isVisible&&t("mouse-leave")},100)};return We(()=>a.isVisible,d=>{d&&(u.value="",n.value=[],M.value=!1)}),{searchQuery:u,images:n,searchInput:E,isLoading:M,handleSearch:L,selectImage:I,handleInputBlur:o}}},Ss={key:0,class:"auth-required"},xs={class:"auth-message"},js={key:1},Us={class:"image-picker-header"},Ns={class:"image-content"},$s={key:0,class:"loading-spinner"},Bs={key:1,class:"image-grid"},Hs=["onClick"],Ds=["src","alt"],Vs={key:2,class:"no-images"},Os={key:3,class:"no-search"};function Fs(a,t,u,n,E,M){return u.isVisible?(i(),r("div",{key:0,class:"image-picker",onMouseenter:t[7]||(t[7]=f=>a.$emit("mouse-enter")),onMouseleave:t[8]||(t[8]=f=>a.$emit("mouse-leave")),onClick:t[9]||(t[9]=Qe(()=>{},["stop"]))},[e("button",{class:"close-btn mobile-only",onClick:t[0]||(t[0]=f=>a.$emit("close"))},t[10]||(t[10]=[e("i",{class:"fas fa-times"},null,-1)])),u.currentUser?(i(),r("div",js,[e("div",Us,[ee(e("input",{ref:"searchInput",type:"text","onUpdate:modelValue":t[2]||(t[2]=f=>n.searchQuery=f),placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–º–∞–π–ª–∞ 7tv",class:"image-search-input",onInput:t[3]||(t[3]=(...f)=>n.handleSearch&&n.handleSearch(...f)),onClick:t[4]||(t[4]=Qe(()=>{},["stop"])),onFocus:t[5]||(t[5]=f=>a.$emit("mouse-enter")),onBlur:t[6]||(t[6]=(...f)=>n.handleInputBlur&&n.handleInputBlur(...f))},null,544),[[ct,n.searchQuery]])]),e("div",Ns,[n.isLoading?(i(),r("div",$s,t[14]||(t[14]=[e("div",{class:"spinner"},null,-1),e("p",null,"–ü–æ–∏—Å–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...",-1)]))):n.images.length>0?(i(),r("div",Bs,[(i(!0),r(le,null,ge(n.images,(f,g)=>(i(),r("div",{key:g,class:"image-item",onClick:L=>n.selectImage(f)},[e("img",{src:f,alt:"Image "+(g+1)},null,8,Ds)],8,Hs))),128))])):n.searchQuery.trim()?(i(),r("div",Vs,t[15]||(t[15]=[e("p",null,"–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤",-1)]))):(i(),r("div",Os,t[16]||(t[16]=[e("p",null,"–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞",-1)])))])])):(i(),r("div",Ss,[e("div",xs,[t[11]||(t[11]=e("i",{class:"fas fa-lock"},null,-1)),t[12]||(t[12]=e("h3",null,"–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è",-1)),t[13]||(t[13]=e("p",null,"–î–ª—è –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç",-1)),e("button",{class:"login-button",onClick:t[1]||(t[1]=f=>a.$emit("login-required"))},"–í–æ–π—Ç–∏")])]))],32)):p("",!0)}const Ut=Ge(As,[["render",Fs],["__scopeId","data-v-f33eb3f6"]]),qs={name:"LinkModal",props:{isVisible:{type:Boolean,default:!1},selectedText:{type:String,default:""}},emits:["close","submit"],setup(a,{emit:t}){const u=v(""),n=v(""),E=v(null),M=v(null),f=D(()=>/^https?:\/\/.+/.test(u.value.trim())&&n.value.trim()),g=()=>{t("close"),I()},L=()=>{f.value&&(t("submit",{url:u.value.trim(),title:n.value.trim()}),g())},I=()=>{u.value="",n.value=""},o=d=>{var C;d.key==="Enter"?(d.preventDefault(),f.value?L():d.target===E.value&&u.value.trim()&&((C=M.value)==null||C.focus())):d.key==="Escape"&&g()};return We(()=>a.isVisible,d=>{d&&(a.selectedText.trim()&&(n.value=a.selectedText.trim()),Se(()=>{var C;(C=E.value)==null||C.focus()}))}),{linkUrl:u,linkTitle:n,urlInput:E,titleInput:M,isValidLink:f,closeModal:g,submitLink:L,handleKeydown:o}}},Ks={class:"link-modal-header"},zs={class:"link-modal-content"},Ws={class:"form-group"},Gs={class:"form-group"},Ys={class:"link-modal-footer"},Xs=["disabled"];function Zs(a,t,u,n,E,M){return u.isVisible?(i(),r("div",{key:0,class:"link-modal-overlay",onClick:t[8]||(t[8]=(...f)=>n.closeModal&&n.closeModal(...f))},[e("div",{class:"link-modal",onClick:t[7]||(t[7]=Qe(()=>{},["stop"]))},[e("div",Ks,[t[10]||(t[10]=e("h3",null,"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É",-1)),e("button",{class:"close-button",onClick:t[0]||(t[0]=(...f)=>n.closeModal&&n.closeModal(...f))},t[9]||(t[9]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",zs,[e("div",Ws,[t[11]||(t[11]=e("label",{for:"link-url"},"URL —Å—Å—ã–ª–∫–∏:",-1)),ee(e("input",{id:"link-url",ref:"urlInput","onUpdate:modelValue":t[1]||(t[1]=f=>n.linkUrl=f),type:"url",placeholder:"https://example.com",class:"link-input",onKeydown:t[2]||(t[2]=(...f)=>n.handleKeydown&&n.handleKeydown(...f))},null,544),[[ct,n.linkUrl]])]),e("div",Gs,[t[12]||(t[12]=e("label",{for:"link-title"},"–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏:",-1)),ee(e("input",{id:"link-title",ref:"titleInput","onUpdate:modelValue":t[3]||(t[3]=f=>n.linkTitle=f),type:"text",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è",class:"link-input",onKeydown:t[4]||(t[4]=(...f)=>n.handleKeydown&&n.handleKeydown(...f))},null,544),[[ct,n.linkTitle]])])]),e("div",Ys,[e("button",{class:"cancel-button",onClick:t[5]||(t[5]=(...f)=>n.closeModal&&n.closeModal(...f))},"–û—Ç–º–µ–Ω–∞"),e("button",{class:"submit-button",disabled:!n.isValidLink,onClick:t[6]||(t[6]=(...f)=>n.submitLink&&n.submitLink(...f))},"–î–æ–±–∞–≤–∏—Ç—å",8,Xs)])])])):p("",!0)}const Nt=Ge(qs,[["render",Zs],["__scopeId","data-v-a794d83f"]]);function Qs(){const a=v(!1),t=v(!1),u=v(!1),n=()=>{t.value=!0},E=()=>{t.value=!1,setTimeout(()=>{!t.value&&!u.value&&(a.value=!1)},300)},M=()=>{u.value=!0,a.value=!0},f=()=>{u.value=!1,setTimeout(()=>{!t.value&&!u.value&&(a.value=!1)},300)},g=()=>{a.value=!1};return{showEmojiPicker:a,isEmojiHovered:t,isButtonHovered:u,handleEmojiMouseEnter:n,handleEmojiMouseLeave:E,handleButtonMouseEnter:M,handleButtonMouseLeave:f,closeEmojiPicker:g,insertEmoji:(o,d,C,w)=>{const U=d.value;if(U){const S=U.selectionStart,x=U.selectionEnd,P=C.value.substring(0,S),h=C.value.substring(x),R=P+o+h;w(R),Se(()=>{U.focus(),U.setSelectionRange(S+o.length,S+o.length),U.style.height&&(U.style.height="auto",U.style.height="".concat(Math.min(U.scrollHeight,200),"px"))})}else w(C.value+o)},handleGlobalClick:o=>{!o.target.closest(".emoji-picker")&&!o.target.closest(".emoji-button-inline")&&g()}}}function Js(){const a=v(!1),t=v(!1),u=v(!1),n=()=>{t.value=!0},E=()=>{t.value=!1,setTimeout(()=>{!t.value&&!u.value&&(a.value=!1)},300)},M=()=>{u.value=!0,a.value=!0},f=()=>{u.value=!1,setTimeout(()=>{!t.value&&!u.value&&(a.value=!1)},300)},g=()=>{a.value=!1};return{showImagePicker:a,isImageHovered:t,isButtonHovered:u,handleImageMouseEnter:n,handleImageMouseLeave:E,handleImageButtonMouseEnter:M,handleButtonMouseLeave:f,closeImagePicker:g,insertImage:(o,d,C,w)=>{const U=d.value;if(U){const S=U.selectionStart,x=U.selectionEnd,P="[img]".concat(o,"[/img]"),h=C.value.slice(0,S)+P+C.value.slice(x);w(h),Se(()=>{U.focus(),U.setSelectionRange(S+P.length,S+P.length),U.style.height&&(U.style.height="auto",U.style.height="".concat(Math.min(U.scrollHeight,200),"px"))})}else{const S="[img]".concat(o,"[/img]");w(C.value+S)}},handleGlobalClick:o=>{!o.target.closest(".image-picker")&&!o.target.closest(".emoji-button-inline")&&g()}}}function el(){const a=v(!1),t=v("");return{showLinkModal:a,selectedTextForLink:t,insertLink:(f,g)=>{const L=f.value;if(L){const I=L.selectionStart,o=L.selectionEnd,d=g.value.slice(I,o);t.value=d.trim()||""}a.value=!0},insertLinkFromModal:(f,g,L,I)=>{const o=g.value;if(o){const d=o.selectionStart,C=o.selectionEnd,w="[link=".concat(f.url,"]").concat(f.title,"[/link]"),U=L.value.slice(0,d)+w+L.value.slice(C);I(U),Se(()=>{o.focus(),o.setSelectionRange(d+w.length,d+w.length),o.style.height&&(o.style.height="auto",o.style.height="".concat(Math.min(o.scrollHeight,200),"px"))})}},closeLinkModal:()=>{a.value=!1},insertSpoiler:(f,g,L)=>{const I=f.value;if(I){const o=I.selectionStart,d=I.selectionEnd,C=g.value.slice(o,d);let w;C.trim()?w="[spoiler]".concat(C,"[/spoiler]"):w="[spoiler][/spoiler]";const U=g.value.slice(0,o)+w+g.value.slice(d);L(U),Se(()=>{if(I.focus(),C.trim())I.setSelectionRange(o+w.length,o+w.length);else{const S=o+9;I.setSelectionRange(S,S)}I.style.height&&(I.style.height="auto",I.style.height="".concat(Math.min(I.scrollHeight,200),"px"))})}}}}function tl(){return{autoResize:u=>{const n=u==null?void 0:u.target;n&&(n.style.height="auto",n.style.height="".concat(Math.min(n.scrollHeight,200),"px"))},autoResizeElement:u=>{u&&(u.style.height="auto",u.style.height="".concat(Math.min(u.scrollHeight,200),"px"))}}}function $t(){const a=Qs(),t=Js(),u=el(),{autoResize:n,autoResizeElement:E}=tl(),M=()=>{a.isButtonHovered.value=!0,t.isButtonHovered.value=!0,a.showEmojiPicker.value=!0,t.showImagePicker.value=!1},f=()=>{a.isButtonHovered.value=!0,t.isButtonHovered.value=!0,t.showImagePicker.value=!0,a.showEmojiPicker.value=!1},g=()=>{a.isButtonHovered.value=!1,t.isButtonHovered.value=!1,setTimeout(()=>{!a.isEmojiHovered.value&&!t.isImageHovered.value&&!a.isButtonHovered.value&&!t.isButtonHovered.value&&(a.showEmojiPicker.value=!1,t.showImagePicker.value=!1)},300)},L=()=>{a.showEmojiPicker.value=!1,t.showImagePicker.value=!1},I=S=>{!S.target.closest(".emoji-picker")&&!S.target.closest(".image-picker")&&!S.target.closest(".emoji-button-inline")&&L()},o=(S,x,P,h)=>{a.insertEmoji(S,x,P,h)},d=(S,x,P,h)=>{t.insertImage(S,x,P,h)},C=(S,x,P)=>{u.insertLink(S,x,P)},w=(S,x,P,h)=>{u.insertLinkFromModal(S,x,P,h)},U=(S,x,P)=>{u.insertSpoiler(S,x,P)};return vt(()=>{document.addEventListener("click",I)}),xt(()=>{document.removeEventListener("click",I)}),{showEmojiPicker:a.showEmojiPicker,handleEmojiMouseEnter:a.handleEmojiMouseEnter,handleEmojiMouseLeave:a.handleEmojiMouseLeave,closeEmojiPicker:a.closeEmojiPicker,showImagePicker:t.showImagePicker,handleImageMouseEnter:t.handleImageMouseEnter,handleImageMouseLeave:t.handleImageMouseLeave,closeImagePicker:t.closeImagePicker,showLinkModal:u.showLinkModal,selectedTextForLink:u.selectedTextForLink,closeLinkModal:u.closeLinkModal,handleButtonMouseEnter:M,handleImageButtonMouseEnter:f,handleButtonMouseLeave:g,closeAllPickers:L,insertEmojiUniversal:o,insertImageUniversal:d,insertLinkUniversal:C,insertLinkFromModalUniversal:w,insertSpoilerUniversal:U,autoResize:n,autoResizeElement:E}}const nl=a=>a===1?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π":a>=2&&a<=4?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è":"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤",ol=a=>{if(!a)return"?";const t=a.split(" ");return t.length===1?a.slice(0,2).toUpperCase():(t[0][0]+t[t.length-1][0]).toUpperCase()},sl={name:"CommentItem",components:{EmojiPicker:jt,ImagePicker:Ut,LinkModal:Nt},props:{comment:{type:Object,required:!0,default:()=>({username:"–ê–Ω–æ–Ω–∏–º",user_avatar:null,content:"",created_at:new Date().toISOString(),rating:0,replies:[]})},currentUser:{type:Object,required:!0,default:()=>({})},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate"],setup(a,{emit:t}){var ye,Ve;const u=wt(),n=D(()=>{var b;return a.editingCommentId===((b=a.comment)==null?void 0:b.id)}),E=v(((ye=a.comment)==null?void 0:ye.content)||""),M=v(((Ve=a.comment)==null?void 0:Ve.user_rating)||0),f=v(null),g=v(null),{showEmojiPicker:L,showImagePicker:I,showLinkModal:o,selectedTextForLink:d,handleEmojiMouseEnter:C,handleEmojiMouseLeave:w,handleImageMouseEnter:U,handleImageMouseLeave:S,handleButtonMouseEnter:x,handleImageButtonMouseEnter:P,handleButtonMouseLeave:h,closeEmojiPicker:R,closeImagePicker:j,closeLinkModal:Y,insertEmojiUniversal:q,insertImageUniversal:O,insertLinkUniversal:A,insertLinkFromModalUniversal:be,insertSpoilerUniversal:ke,autoResize:fe}=$t(),{formatContentWithTruncation:$e}=_n();vt(async()=>{var b;if((b=a.comment)!=null&&b.user_avatar){const te=await Pn();f.value="".concat(te).concat(a.comment.user_avatar)}});const B=D(()=>{var b;return a.currentUser&&((b=a.comment)==null?void 0:b.user_id)===a.currentUser.id}),se=D(()=>{var b;return a.currentUser&&((b=a.comment)==null?void 0:b.user_id)===a.currentUser.id||a.currentUser&&a.currentUser.is_admin===1}),W=D(()=>{var b,te,Oe;return((b=a.comment)==null?void 0:b.updated_at)&&((te=a.comment)==null?void 0:te.updated_at)!==((Oe=a.comment)==null?void 0:Oe.created_at)}),Q=D(()=>{var b,te;return(b=a.comment)!=null&&b.is_deleted?!1:(((te=a.comment)==null?void 0:te.rating)||0)<=-3}),ie=D(()=>Q.value),ce=v(!1),ve=D(()=>{var b,te;return(b=a.comment)!=null&&b.is_deleted?null:(((te=a.comment)==null?void 0:te.rating)||0)<=-3?"lowRating":null}),me=()=>{var b,te;t("start-edit",(b=a.comment)==null?void 0:b.id),E.value=((te=a.comment)==null?void 0:te.content)||"",Se(()=>{g.value&&(g.value.focus(),fe({target:g.value}))})},Ie=()=>{var b;t("cancel-edit"),E.value=((b=a.comment)==null?void 0:b.content)||""},ue=()=>{var b;E.value.trim()&&t("edit",(b=a.comment)==null?void 0:b.id,E.value.trim())},Ye=()=>{var b;confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π?")&&t("delete",(b=a.comment)==null?void 0:b.id)},oe=b=>{var te,Oe;M.value===b?(M.value=0,t("rate",(te=a.comment)==null?void 0:te.id,b)):(M.value=b,t("rate",(Oe=a.comment)==null?void 0:Oe.id,b))},Te=b=>{b.key==="Enter"&&!b.shiftKey&&(b.preventDefault(),ue())},he=D(()=>{var b;return $e((b=a.comment)==null?void 0:b.content)}),Be=()=>{console.log("Avatar load error, falling back to initials"),f.value=null,Se(()=>{const b=document.querySelector(".avatar-placeholder");b&&(b.style.display="flex")})},we=()=>{u.push("/login")},He=b=>{q(b,g,E,te=>{E.value=te})},tt=b=>{O(b,g,E,te=>{E.value=te})},nt=()=>{ke(g,E,b=>{E.value=b})},ut=()=>{A(g,E,b=>{E.value=b})},Re=b=>{be(b,g,E,te=>{E.value=te})},De=b=>{fe(b)};return We(E,()=>{n.value&&g.value&&Se(()=>{De({target:g.value})})}),{isEditing:n,editContent:E,userRating:M,isCommentOwner:B,canDeleteComment:se,isCommentEdited:W,formatDate:En,formatRelativeTime:Wn,startEdit:me,cancelEdit:Ie,saveEdit:ue,confirmDelete:Ye,rateComment:oe,avatarUrl:f,getInitials:ol,handleEditKeydown:Te,isCommentHidden:ie,showHiddenComment:ce,hiddenCommentReason:ve,formattedContent:he,autoResizeEdit:De,editTextarea:g,showEmojiPicker:L,showImagePicker:I,insertEmojiEdit:He,insertImageEdit:tt,insertSpoilerEdit:nt,insertLinkEdit:ut,handleEmojiMouseEnter:C,handleEmojiMouseLeave:w,handleImageMouseEnter:U,handleImageMouseLeave:S,closeEmojiPicker:R,closeImagePicker:j,handleButtonMouseEnter:x,handleButtonMouseLeave:h,handleImageButtonMouseEnter:P,handleAvatarError:Be,openLogin:we,showLinkModal:o,selectedTextForLink:d,insertLinkFromModal:Re,closeLinkModal:Y}}},ll=["data-comment-id"],il={class:"comment-header"},al={class:"user-info"},rl={class:"user-avatar"},ul=["src","alt"],dl={class:"user-details"},cl={class:"username"},vl={key:0,class:"user-rating"},ml=["title"],fl=["title"],gl={class:"comment-content"},kl={key:0,class:"hidden-comment-warning"},yl={key:1},pl={key:0,class:"deleted-comment"},bl={key:1},hl={key:0,class:"edit-form"},wl={class:"edit-textarea-container"},Cl={class:"edit-footer"},_l={class:"edit-actions"},El=["disabled"],Ml={class:"character-counter-container"},Ll={key:1,class:"comment-text-container"},Il=["innerHTML"],Tl={class:"comment-footer"},Rl={class:"comment-actions"},Pl={class:"rating-buttons"},Al={class:"action-buttons"};function Sl(a,t,u,n,E,M){var o,d,C,w,U,S,x,P,h,R,j,Y,q,O,A,be,ke,fe,$e;const f=Le("router-link"),g=Le("EmojiPicker"),L=Le("ImagePicker"),I=Le("LinkModal");return i(),r("div",{class:"comment-item","data-comment-id":(o=u.comment)==null?void 0:o.id},[e("div",il,[e("div",al,[re(f,{to:{path:"/lists/".concat((d=u.comment)==null?void 0:d.user_id)},target:"_blank",rel:"noopener noreferrer",class:"user-avatar-link"},{default:At(()=>{var B,se;return[e("div",rl,[n.avatarUrl?(i(),r("img",{key:0,src:n.avatarUrl,alt:((B=u.comment)==null?void 0:B.username)||"–ê–Ω–æ–Ω–∏–º",onError:t[0]||(t[0]=(...W)=>n.handleAvatarError&&n.handleAvatarError(...W)),onerror:"this.onerror=null; this.style.display='none'; this.nextElementSibling.style.display='flex';"},null,40,ul)):(i(),r("div",{key:1,class:"avatar-placeholder",style:dt({display:n.avatarUrl?"none":"flex"})},k(n.getInitials(((se=u.comment)==null?void 0:se.username)||"–ê–Ω–æ–Ω–∏–º")),5))])]}),_:1},8,["to"]),e("div",dl,[re(f,{to:{path:"/lists/".concat((C=u.comment)==null?void 0:C.user_id)},target:"_blank",rel:"noopener noreferrer",class:"username-link"},{default:At(()=>{var B;return[e("span",cl,k(((B=u.comment)==null?void 0:B.username)||"–ê–Ω–æ–Ω–∏–º"),1)]}),_:1},8,["to"]),(w=u.comment)!=null&&w.user_movie_rating?(i(),r("span",vl,[t[18]||(t[18]=e("i",{class:"fas fa-star"},null,-1)),J(" "+k(u.comment.user_movie_rating),1)])):p("",!0),e("span",{class:"date",title:n.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((U=u.comment)==null?void 0:U.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(n.formatDate((S=u.comment)==null?void 0:S.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((x=u.comment)==null?void 0:x.created_at))},[J(k(n.formatRelativeTime((P=u.comment)==null?void 0:P.created_at))+" ",1),n.isCommentEdited?(i(),r("i",{key:0,class:"fas fa-pencil-alt edit-icon",title:n.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((h=u.comment)==null?void 0:h.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(n.formatDate((R=u.comment)==null?void 0:R.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((j=u.comment)==null?void 0:j.created_at))},null,8,fl)):p("",!0)],8,ml)])])]),e("div",gl,[!((Y=u.comment)!=null&&Y.is_deleted)&&n.isCommentHidden&&!n.showHiddenComment?(i(),r("div",kl,[n.hiddenCommentReason==="lowRating"?(i(),r("p",{key:0,class:"warning-text",onClick:t[1]||(t[1]=B=>n.showHiddenComment=!0)},t[19]||(t[19]=[e("i",{class:"fas fa-eye-slash"},null,-1),J(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–∫—Ä—ã—Ç –∏–∑-–∑–∞ –Ω–∏–∑–∫–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å. ")]))):p("",!0)])):(i(),r("div",yl,[(q=u.comment)!=null&&q.is_deleted?(i(),r("div",pl,t[20]||(t[20]=[e("p",{class:"deleted-message"},[e("i",{class:"fas fa-trash"}),J(" –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —É–¥–∞–ª—ë–Ω ")],-1)]))):(i(),r("div",bl,[n.isEditing?(i(),r("div",hl,[e("div",wl,[ee(e("textarea",{ref:"editTextarea","onUpdate:modelValue":t[2]||(t[2]=B=>n.editContent=B),class:"edit-textarea",rows:"3",maxlength:"1500",onKeydown:t[3]||(t[3]=(...B)=>n.handleEditKeydown&&n.handleEditKeydown(...B)),onInput:t[4]||(t[4]=(...B)=>n.autoResizeEdit&&n.autoResizeEdit(...B))},null,544),[[ct,n.editContent]])]),e("div",Cl,[e("div",_l,[e("button",{onClick:t[5]||(t[5]=(...B)=>n.cancelEdit&&n.cancelEdit(...B)),class:"cancel-button"},"–û—Ç–º–µ–Ω–∞"),e("button",{onClick:t[6]||(t[6]=(...B)=>n.saveEdit&&n.saveEdit(...B)),class:"save-button",disabled:!n.editContent.trim()||n.editContent.length>1500}," –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ",8,El)]),e("div",Ml,[e("div",{class:_(["character-counter-inline",{"near-limit":n.editContent.length>1400,"at-limit":n.editContent.length>=1500}])},k(n.editContent.length)+"/1500 ",3),e("button",{type:"button",class:_(["emoji-button-inline",{active:n.showEmojiPicker}]),onMouseenter:t[7]||(t[7]=(...B)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...B)),onMouseleave:t[8]||(t[8]=(...B)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...B))}," üòä ",34),e("button",{type:"button",class:_(["emoji-button-inline",{active:n.showImagePicker}]),onMouseenter:t[9]||(t[9]=(...B)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...B)),onMouseleave:t[10]||(t[10]=(...B)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...B))},t[21]||(t[21]=[bt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-f1c85dfc><g id="logo" data-v-f1c85dfc><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-f1c85dfc></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-f1c85dfc></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-f1c85dfc></path></g></svg>',1)]),34),e("button",{type:"button",class:"emoji-button-inline spoiler-button",onClick:t[11]||(t[11]=(...B)=>n.insertSpoilerEdit&&n.insertSpoilerEdit(...B)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},t[22]||(t[22]=[e("i",{class:"fas fa-eye-slash"},null,-1)])),e("button",{type:"button",class:"emoji-button-inline link-button",onClick:t[12]||(t[12]=(...B)=>n.insertLinkEdit&&n.insertLinkEdit(...B)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},t[23]||(t[23]=[e("i",{class:"fas fa-link"},null,-1)])),re(g,{"is-visible":n.showEmojiPicker,onEmojiSelected:n.insertEmojiEdit,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),re(L,{"is-visible":n.showImagePicker,"current-user":u.currentUser,onImageSelected:n.insertImageEdit,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:n.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),re(I,{"is-visible":n.showLinkModal,"selected-text":n.selectedTextForLink,onClose:n.closeLinkModal,onSubmit:n.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):(i(),r("div",Ll,[e("p",{class:"comment-text",innerHTML:n.formattedContent},null,8,Il)]))]))]))]),e("div",Tl,[e("div",Rl,[e("div",Pl,[!n.isCommentOwner&&!((O=u.comment)!=null&&O.is_deleted)?(i(),r("button",{key:0,onClick:t[13]||(t[13]=B=>n.rateComment(1)),class:_(["rating-button",{"rated-up":n.userRating===1}])},t[24]||(t[24]=[e("i",{class:"fas fa-thumbs-up"},null,-1)]),2)):p("",!0),e("span",{class:_(["rating-count",{"rating-positive":n.userRating===1,"rating-negative":n.userRating===-1}])},k(((A=u.comment)==null?void 0:A.rating)||0),3),!n.isCommentOwner&&!((be=u.comment)!=null&&be.is_deleted)?(i(),r("button",{key:1,onClick:t[14]||(t[14]=B=>n.rateComment(-1)),class:_(["rating-button",{"rated-down":n.userRating===-1}])},t[25]||(t[25]=[e("i",{class:"fas fa-thumbs-down"},null,-1)]),2)):p("",!0)]),e("div",Al,[!u.currentUser||u.currentUser.allow_comments===1?(i(),r("button",{key:0,onClick:t[15]||(t[15]=B=>a.$emit("reply",u.comment)),class:"action-button reply-button"},t[26]||(t[26]=[e("i",{class:"fas fa-reply"},null,-1)]))):p("",!0),n.isCommentOwner&&!((ke=u.comment)!=null&&ke.is_deleted)&&!n.isEditing&&((fe=u.currentUser)==null?void 0:fe.allow_comments)===1?(i(),r("button",{key:1,onClick:t[16]||(t[16]=(...B)=>n.startEdit&&n.startEdit(...B)),class:"action-button edit-button"},t[27]||(t[27]=[e("i",{class:"fas fa-edit"},null,-1)]))):p("",!0),n.canDeleteComment&&!(($e=u.comment)!=null&&$e.is_deleted)?(i(),r("button",{key:2,onClick:t[17]||(t[17]=(...B)=>n.confirmDelete&&n.confirmDelete(...B)),class:"action-button delete-button"},t[28]||(t[28]=[e("i",{class:"fas fa-trash"},null,-1)]))):p("",!0)])])])],8,ll)}const xl=Ge(sl,[["render",Sl],["__scopeId","data-v-f1c85dfc"]]),jl={name:"CommentThread",components:{CommentItem:xl,EmojiPicker:jt,ImagePicker:Ut,LinkModal:Nt},props:{comment:{type:Object,required:!0},currentUser:{type:Object,required:!0},replyTo:{type:Object,default:null},replyContent:{type:String,default:""},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate","submit-reply","cancel-reply","update-reply-content","reply-keydown"],setup(a,{emit:t}){const u=v(null),n=v(!0),{showEmojiPicker:E,showImagePicker:M,showLinkModal:f,selectedTextForLink:g,handleEmojiMouseEnter:L,handleEmojiMouseLeave:I,handleImageMouseEnter:o,handleImageMouseLeave:d,handleButtonMouseEnter:C,handleImageButtonMouseEnter:w,handleButtonMouseLeave:U,closeEmojiPicker:S,closeImagePicker:x,closeLinkModal:P,insertEmojiUniversal:h,insertImageUniversal:R,insertLinkUniversal:j,insertLinkFromModalUniversal:Y,insertSpoilerUniversal:q}=$t(),O=W=>{t("update-reply-content",W.target.value);const Q=W.target;Q&&(Q.style.height="auto",Q.style.height="".concat(Math.min(Q.scrollHeight,200),"px"))},A={get value(){return a.replyContent},set value(W){t("update-reply-content",W)}};return{replyTextarea:u,showEmojiPicker:E,showImagePicker:M,isCollapsed:n,insertEmoji:W=>{h(W,u,A,Q=>{t("update-reply-content",Q)})},insertImage:W=>{R(W,u,A,Q=>{t("update-reply-content",Q)})},insertSpoiler:()=>{q(u,A,W=>{t("update-reply-content",W)})},handleEmojiMouseEnter:L,handleEmojiMouseLeave:I,handleImageMouseEnter:o,handleImageMouseLeave:d,handleButtonMouseEnter:C,handleButtonMouseLeave:U,closeEmojiPicker:S,closeImagePicker:x,handleImageButtonMouseEnter:w,handleReplyInput:O,toggleCollapsed:()=>{n.value=!n.value},showLinkModal:f,selectedTextForLink:g,insertLink:()=>{j(u,A,W=>{t("update-reply-content",W)})},closeLinkModal:P,insertLinkFromModal:W=>{Y(W,u,A,Q=>{t("update-reply-content",Q)})}}},computed:{canReply(){return this.currentUser?this.currentUser.allow_comments===1:!0},getReplyPlaceholder(){return this.currentUser?this.currentUser.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç..."},formattedContent(){const{formatContent:a}=_n();return a(this.comment.content)}}},Ul={class:"comment-thread"},Nl={key:0,class:"reply-form"},$l={class:"textarea-container"},Bl=["value","placeholder","disabled"],Hl={class:"reply-footer"},Dl={class:"reply-actions"},Vl=["disabled"],Ol={class:"character-counter-container"},Fl=["disabled"],ql={key:1,class:"replies-container"},Kl=["title"],zl={class:"replies-count"},Wl=["title"],Gl={key:0,class:"replies-content"};function Yl(a,t,u,n,E,M){const f=Le("CommentItem"),g=Le("EmojiPicker"),L=Le("ImagePicker"),I=Le("LinkModal"),o=Le("CommentThread",!0);return i(),r("div",Ul,[re(f,{comment:u.comment,"current-user":u.currentUser,"editing-comment-id":u.editingCommentId,onReply:t[0]||(t[0]=d=>a.$emit("reply",d)),onStartEdit:t[1]||(t[1]=d=>a.$emit("start-edit",d)),onCancelEdit:t[2]||(t[2]=d=>a.$emit("cancel-edit")),onEdit:t[3]||(t[3]=(d,C)=>a.$emit("edit",d,C)),onDelete:t[4]||(t[4]=d=>a.$emit("delete",d)),onRate:t[5]||(t[5]=(d,C)=>a.$emit("rate",d,C))},null,8,["comment","current-user","editing-comment-id"]),u.replyTo&&u.replyTo.id===u.comment.id?(i(),r("div",Nl,[e("div",$l,[e("textarea",{ref:"replyTextarea",class:"comment-textarea",value:u.replyContent,placeholder:M.getReplyPlaceholder,disabled:u.currentUser&&u.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:t[6]||(t[6]=(...d)=>n.handleReplyInput&&n.handleReplyInput(...d)),onKeydown:t[7]||(t[7]=d=>a.$emit("reply-keydown",d))},null,40,Bl)]),e("div",Hl,[e("div",Dl,[e("button",{class:"cancel-reply",onClick:t[8]||(t[8]=d=>a.$emit("cancel-reply"))},"–û—Ç–º–µ–Ω–∞"),e("button",{class:"submit-button",disabled:!u.replyContent.trim()||u.replyContent.length>1500||u.currentUser&&u.currentUser.allow_comments!==1,onClick:t[9]||(t[9]=d=>a.$emit("submit-reply"))}," –û—Ç–≤–µ—Ç–∏—Ç—å ",8,Vl)]),e("div",Ol,[e("div",{class:_(["character-counter-inline",{"near-limit":u.replyContent.length>1400,"at-limit":u.replyContent.length>=1500}])},k(u.replyContent.length)+"/1500 ",3),e("button",{type:"button",class:_(["emoji-button-inline",{active:n.showEmojiPicker}]),onMouseenter:t[10]||(t[10]=(...d)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...d)),onMouseleave:t[11]||(t[11]=(...d)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...d))}," üòä ",34),e("button",{type:"button",class:_(["emoji-button-inline",{active:n.showImagePicker}]),onMouseenter:t[12]||(t[12]=(...d)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...d)),onMouseleave:t[13]||(t[13]=(...d)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...d))},t[29]||(t[29]=[bt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-6c0fc347><g id="logo" data-v-6c0fc347><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-6c0fc347></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-6c0fc347></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-6c0fc347></path></g></svg>',1)]),34),e("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:u.currentUser&&u.currentUser.allow_comments!==1,onClick:t[14]||(t[14]=(...d)=>n.insertSpoiler&&n.insertSpoiler(...d)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},t[30]||(t[30]=[e("i",{class:"fas fa-eye-slash"},null,-1)]),8,Fl),e("button",{type:"button",class:"emoji-button-inline link-button",onClick:t[15]||(t[15]=(...d)=>n.insertLink&&n.insertLink(...d)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},t[31]||(t[31]=[e("i",{class:"fas fa-link"},null,-1)])),re(g,{"is-visible":n.showEmojiPicker,onEmojiSelected:n.insertEmoji,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),re(L,{"is-visible":n.showImagePicker,"current-user":u.currentUser,onImageSelected:n.insertImage,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:t[16]||(t[16]=()=>a.$router.push("/login"))},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose"]),re(I,{"is-visible":n.showLinkModal,"selected-text":n.selectedTextForLink,onClose:n.closeLinkModal,onSubmit:n.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):p("",!0),u.comment.replies&&u.comment.replies.length>0?(i(),r("div",ql,[e("button",{class:"collapse-toggle",title:n.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:t[17]||(t[17]=(...d)=>n.toggleCollapsed&&n.toggleCollapsed(...d))},[e("span",{class:_(["collapse-icon",{expanded:!n.isCollapsed}])},t[32]||(t[32]=[e("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},[e("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1)]),2),e("span",zl,k(u.comment.replies.length)+" "+k(u.comment.replies.length===1?"–æ—Ç–≤–µ—Ç":"–æ—Ç–≤–µ—Ç–æ–≤"),1)],8,Kl),e("div",{class:"vertical-line-clickable",title:n.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:t[18]||(t[18]=(...d)=>n.toggleCollapsed&&n.toggleCollapsed(...d))},[e("div",{class:_(["vertical-line-visual",{collapsed:n.isCollapsed}])},null,2)],8,Wl),n.isCollapsed?p("",!0):(i(),r("div",Gl,[(i(!0),r(le,null,ge(u.comment.replies,d=>(i(),Ze(o,{key:d.id,comment:d,"current-user":u.currentUser,"reply-to":u.replyTo,"reply-content":u.replyContent,"editing-comment-id":u.editingCommentId,onReply:t[19]||(t[19]=C=>a.$emit("reply",C)),onStartEdit:t[20]||(t[20]=C=>a.$emit("start-edit",C)),onCancelEdit:t[21]||(t[21]=C=>a.$emit("cancel-edit")),onEdit:t[22]||(t[22]=(C,w)=>a.$emit("edit",C,w)),onDelete:t[23]||(t[23]=C=>a.$emit("delete",C)),onRate:t[24]||(t[24]=(C,w)=>a.$emit("rate",C,w)),onSubmitReply:t[25]||(t[25]=C=>a.$emit("submit-reply")),onCancelReply:t[26]||(t[26]=C=>a.$emit("cancel-reply")),onUpdateReplyContent:t[27]||(t[27]=C=>a.$emit("update-reply-content",C)),onReplyKeydown:t[28]||(t[28]=C=>a.$emit("reply-keydown",C))},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id"]))),128))]))])):p("",!0)])}const Xl=Ge(jl,[["render",Yl],["__scopeId","data-v-6c0fc347"]]),Zl={name:"Comments",components:{CommentThread:Xl,Notification:Lt,EmojiPicker:jt,ImagePicker:Ut,LinkModal:Nt},props:{movieId:{type:[String,Number],required:!0}},setup(a){const t=St(),u=wt(),n=ht(),E=v([]),M=v(""),f=v(null),g=v(""),L=v(null),I=v(t.user),o=v(null),d=v(null),C=v(n.isAutoShowComments),w=v(!1),U=v(3),S=v(3),{showEmojiPicker:x,showImagePicker:P,showLinkModal:h,selectedTextForLink:R,handleEmojiMouseEnter:j,handleEmojiMouseLeave:Y,handleImageMouseEnter:q,handleImageMouseLeave:O,handleButtonMouseEnter:A,handleImageButtonMouseEnter:be,handleButtonMouseLeave:ke,closeEmojiPicker:fe,closeImagePicker:$e,closeLinkModal:B,insertEmojiUniversal:se,insertImageUniversal:W,insertLinkUniversal:Q,insertLinkFromModalUniversal:ie,insertSpoilerUniversal:ce,autoResize:ve}=$t(),me=D(()=>{const N=(X=null)=>E.value.filter(G=>G.parent_id===X).sort((G,de)=>G.id-de.id).map(G=>({...G,replies:N(G.id)})).filter(G=>!G.is_deleted||G.replies&&G.replies.length>0);return N()}),Ie=D(()=>{const N=X=>X.reduce((G,de)=>G+1+N(de.replies||[]),0);return N(me.value)}),ue=D(()=>me.value.slice(0,S.value)),Ye=D(()=>me.value.length>S.value),oe=D(()=>me.value.length-S.value),Te=()=>{S.value+=U.value},he=async()=>{try{const N=await An(a.movieId);E.value=N}catch(N){console.error("Failed to load comments:",N),o.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.")}},Be=async()=>{if(w.value)return;if(!t.token){o.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:ye});return}if(I.value&&I.value.allow_comments!==1){o.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!M.value.replace(/\[spoiler\]\s*\[\/spoiler\]/g,"").replace(/\[img\]\s*\[\/img\]/g,"").replace(/\[link=[^\]]+\]\s*\[\/link\]/g,"").trim()){o.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º");return}if(M.value.length>1500){o.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await fn(a.movieId,M.value.trim()),M.value="",await he(),C.value=!0,Se(()=>{d.value&&(d.value.focus(),d.value.style.height="auto"),setTimeout(()=>{const X=document.querySelectorAll(".comment-item[data-comment-id]");if(X.length>0){const G=Array.from(X).map(de=>parseInt(de.getAttribute("data-comment-id"))).filter(de=>!isNaN(de));if(G.length>0){const de=Math.max(...G),Pe=document.querySelector('[data-comment-id="'.concat(de,'"]'));Pe&&Pe.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}},300)})}catch(X){console.error("Failed to create comment:",X),o.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},we=N=>{if(!t.token){o.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:ye});return}L.value=null,f.value=N,g.value="",Se(()=>{const X=document.querySelector(".reply-form");X&&X.scrollIntoView({behavior:"smooth",block:"center"})})},He=async()=>{if(!t.token){o.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:ye});return}if(I.value&&I.value.allow_comments!==1){o.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!(!g.value.trim()||!f.value)){if(g.value.length>1500){o.value.showNotification("–û—Ç–≤–µ—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await fn(a.movieId,g.value.trim(),f.value.id);const N=f.value.id;await he(),g.value="",f.value=null,Se(()=>{setTimeout(()=>{const X=document.querySelector('[data-comment-id="'.concat(N,'"]'));if(X){const G=X.querySelector(".replies-content");if(G){const de=G.querySelectorAll(".comment-item[data-comment-id]");if(de.length>0){const Pe=Array.from(de).map(pe=>parseInt(pe.getAttribute("data-comment-id"))).filter(pe=>!isNaN(pe));if(Pe.length>0){const pe=Math.max(...Pe),Ce=document.querySelector('[data-comment-id="'.concat(pe,'"]'));Ce&&Ce.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}}}},300)})}catch(N){console.error("Error submitting reply:",N),o.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}}},tt=async(N,X)=>{if(!t.token){o.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:ye});return}if(I.value&&I.value.allow_comments!==1){o.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(X.length>1500){o.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await jn(N,X.trim()),await he(),L.value=null}catch(G){console.error("Failed to update comment:",G),o.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},nt=async N=>{if(!t.token){o.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:ye});return}try{await xn(N),await he()}catch(X){console.error("Failed to delete comment:",X),o.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},ut=async(N,X)=>{if(!t.token){o.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:ye});return}try{await Sn(N,X),await he()}catch(G){console.error("Failed to rate comment:",G),o.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ü–µ–Ω–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},Re=N=>{w.value||x.value||N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),Be())},De=N=>{N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),He())},ye=()=>{u.push("/login")},Ve=N=>{w.value=!0,se(N,d,M,X=>{M.value=X}),setTimeout(()=>{w.value=!1},100)},b=N=>{W(N,d,M,X=>{M.value=X})},te=()=>{ce(d,M,N=>{M.value=N})},Oe=()=>{Q(d,M,N=>{M.value=N})},mt=N=>{ie(N,d,M,X=>{M.value=X})},ot=D(()=>I.value?I.value.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."),Je=D(()=>I.value?I.value.allow_comments===1:!0),Fe=N=>{f.value=null,g.value="",L.value=N},ft=()=>{L.value=null};return vt(()=>{he()}),{comments:E,groupedComments:me,displayedComments:ue,hasMoreComments:Ye,remainingCommentsCount:oe,showMoreComments:Te,newComment:M,replyTo:f,replyContent:g,editingCommentId:L,currentUser:I,notificationRef:o,commentTextarea:d,showComments:C,submitComment:Be,handleReply:we,submitReply:He,handleEdit:tt,handleDelete:nt,handleRate:ut,handleCommentKeydown:Re,handleReplyKeydown:De,autoResize:ve,totalCommentsCount:Ie,getCommentWordForm:nl,showEmojiPicker:x,showImagePicker:P,showLinkModal:h,selectedTextForLink:R,insertEmoji:Ve,insertImage:b,handleEmojiMouseEnter:j,handleEmojiMouseLeave:Y,handleImageMouseEnter:q,handleImageMouseLeave:O,closeEmojiPicker:fe,closeImagePicker:$e,handleButtonMouseLeave:ke,handleButtonMouseEnter:A,handleImageButtonMouseEnter:be,getCommentPlaceholder:ot,canComment:Je,handleStartEdit:Fe,handleCancelEdit:ft,insertSpoiler:te,insertLink:Oe,insertLinkFromModal:mt,closeLinkModal:B}}},Ql={class:"comments-section"},Jl={class:"spoiler-content"},ei={key:1,class:"comments-container"},ti={class:"comments-header"},ni={class:"textarea-container"},oi=["placeholder","disabled"],si={class:"comment-footer"},li={class:"comment-actions"},ii=["disabled"],ai={class:"character-counter-container"},ri=["disabled"],ui=["disabled"],di=["disabled"],ci={class:"comments-list"},vi={key:0,class:"show-more-comments"};function mi(a,t,u,n,E,M){const f=Le("EmojiPicker"),g=Le("ImagePicker"),L=Le("LinkModal"),I=Le("CommentThread"),o=Le("Notification");return i(),r("div",Ql,[n.showComments?(i(),r("div",ei,[e("div",ti,[e("button",{class:"hide-comments-btn",onClick:t[1]||(t[1]=d=>n.showComments=!1)},t[18]||(t[18]=[e("i",{class:"fas fa-eye-slash"},null,-1),J(" –°–∫—Ä—ã—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ")]))]),e("form",{class:"comment-form",onSubmit:t[11]||(t[11]=Qe((...d)=>n.submitComment&&n.submitComment(...d),["prevent"]))},[e("div",ni,[ee(e("textarea",{ref:"commentTextarea","onUpdate:modelValue":t[2]||(t[2]=d=>n.newComment=d),class:"comment-textarea",placeholder:n.getCommentPlaceholder,disabled:n.currentUser&&n.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:t[3]||(t[3]=(...d)=>n.autoResize&&n.autoResize(...d)),onKeydown:t[4]||(t[4]=(...d)=>n.handleCommentKeydown&&n.handleCommentKeydown(...d))},null,40,oi),[[ct,n.newComment]])]),e("div",si,[e("div",li,[e("button",{class:"submit-button",type:"submit",disabled:!n.newComment.trim()||n.newComment.length>1500||n.currentUser&&n.currentUser.allow_comments!==1}," –û—Ç–ø—Ä–∞–≤–∏—Ç—å ",8,ii)]),e("div",ai,[e("div",{class:_(["character-counter-inline",{"near-limit":n.newComment.length>1400,"at-limit":n.newComment.length>=1500}])},k(n.newComment.length)+"/1500 ",3),e("button",{type:"button",class:_(["emoji-button-inline",{active:n.showEmojiPicker}]),disabled:n.currentUser&&n.currentUser.allow_comments!==1,onMouseenter:t[5]||(t[5]=(...d)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...d)),onMouseleave:t[6]||(t[6]=(...d)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...d))}," üòä ",42,ri),e("button",{type:"button",class:_(["emoji-button-inline",{active:n.showImagePicker}]),disabled:n.currentUser&&n.currentUser.allow_comments!==1,onMouseenter:t[7]||(t[7]=(...d)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...d)),onMouseleave:t[8]||(t[8]=(...d)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...d))},t[19]||(t[19]=[bt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-79080d6f><g id="logo" data-v-79080d6f><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-79080d6f></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-79080d6f></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-79080d6f></path></g></svg>',1)]),42,ui),e("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:n.currentUser&&n.currentUser.allow_comments!==1,onClick:t[9]||(t[9]=(...d)=>n.insertSpoiler&&n.insertSpoiler(...d)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},t[20]||(t[20]=[e("i",{class:"fas fa-eye-slash"},null,-1)]),8,di),e("button",{type:"button",class:"emoji-button-inline link-button",onClick:t[10]||(t[10]=(...d)=>n.insertLink&&n.insertLink(...d)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},t[21]||(t[21]=[e("i",{class:"fas fa-link"},null,-1)])),re(f,{"is-visible":n.showEmojiPicker&&n.canComment,onEmojiSelected:n.insertEmoji,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),re(g,{"is-visible":n.showImagePicker&&n.canComment,"current-user":n.currentUser,onImageSelected:n.insertImage,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:a.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),re(L,{"is-visible":n.showLinkModal,"selected-text":n.selectedTextForLink,onClose:n.closeLinkModal,onSubmit:n.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])],32),e("div",ci,[(i(!0),r(le,null,ge(n.displayedComments,d=>(i(),Ze(I,{key:d.id,comment:d,"current-user":n.currentUser,"reply-to":n.replyTo,"reply-content":n.replyContent,"editing-comment-id":n.editingCommentId,"is-first-comment":!1,onReply:n.handleReply,onStartEdit:n.handleStartEdit,onCancelEdit:n.handleCancelEdit,onEdit:n.handleEdit,onDelete:n.handleDelete,onRate:n.handleRate,onSubmitReply:n.submitReply,onCancelReply:t[12]||(t[12]=C=>n.replyTo=null),onUpdateReplyContent:t[13]||(t[13]=C=>n.replyContent=C),onReplyKeydown:n.handleReplyKeydown},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id","onReply","onStartEdit","onCancelEdit","onEdit","onDelete","onRate","onSubmitReply","onReplyKeydown"]))),128)),n.hasMoreComments?(i(),r("div",vi,[e("button",{class:"show-more-btn",onClick:t[14]||(t[14]=(...d)=>n.showMoreComments&&n.showMoreComments(...d))}," –ü–æ–∫–∞–∑–∞—Ç—å –µ—â–µ "+k(n.remainingCommentsCount)+" "+k(n.getCommentWordForm(n.remainingCommentsCount)),1)])):p("",!0)])])):(i(),r("div",{key:0,class:"spoiler-warning",onClick:t[0]||(t[0]=d=>n.showComments=!0)},[e("div",Jl,[t[15]||(t[15]=e("i",{class:"fas fa-eye-slash"},null,-1)),t[16]||(t[16]=e("h3",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–∫—Ä—ã—Ç—ã",-1)),t[17]||(t[17]=e("p",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä—ã. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å.",-1)),e("div",{class:_(["comments-count",{"no-comments":n.totalCommentsCount===0}])},[n.totalCommentsCount===0?(i(),r(le,{key:0},[J(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç ")],64)):(i(),r(le,{key:1},[J(k(n.totalCommentsCount)+" "+k(n.getCommentWordForm(n.totalCommentsCount)),1)],64))],2)])])),re(o,{ref:"notificationRef"},null,512)])}const fi=Ge(Zl,[["render",mi],["__scopeId","data-v-79080d6f"]]),gi={class:"movie-info"},ki={class:"content"},yi={key:0,class:"content-card"},pi={class:"movie-skeleton"},bi={class:"movie-skeleton__player"},hi={key:2,class:"content-card"},wi={key:3,class:"content-card"},Ci={class:"content-header"},_i=["src"],Ei={class:"content-title"},Mi={key:0,class:"ratings-links"},Li={key:1},Ii=["href","title"],Ti={key:2},Ri=["href","title"],Pi={key:3},Ai=["href","title"],Si={key:4},xi=["href","title"],ji={key:5},Ui=["href"],Ni=["title"],$i={key:0,class:"fa-regular fa-face-grin-wink"},Bi={key:1,class:"fas fa-spinner fa-spin"},Hi=["title"],Di={key:1,class:"mobile-list-dropdown"},Vi={class:"mobile-list-content"},Oi=["content"],Fi=["content"],qi={class:"additional-info"},Ki={class:"info-content"},zi={key:0,class:"movie-poster-container desktop-only"},Wi=["href"],Gi=["src"],Yi={class:"details-container"},Xi={class:"info-list"},Zi={key:0},Qi={key:1},Ji={key:2},ea={key:3},ta={key:4},na={key:5},oa={key:6},sa={key:7},la={key:8},ia={key:9,class:"rating-boxes"},aa={key:0,class:"rating-box mpaa"},ra={key:1,class:"rating-box age"},ua={class:"content-info"},da={key:0,class:"content-description-text"},ca={key:3,class:"comments-section"},va={key:4,class:"staff-section"},ma={class:"staff-categories"},fa={key:0,class:"staff-category"},ga={class:"staff-list"},ka=["href","title"],ya=["src","alt"],pa={class:"staff-name"},ba={key:0,class:"staff-role"},ha=["href","title"],wa={key:1,class:"staff-category"},Ca={class:"staff-names-container"},_a={class:"staff-names-list"},Ea=["href"],Ma=["href","title"],La={key:2,class:"staff-category"},Ia={class:"staff-names-container"},Ta={class:"staff-names-list"},Ra=["href"],Pa=["href","title"],Aa={key:5,class:"yt-video-container"},Sa={key:6,class:"related-movies"},xa=["title"],ja={key:7,class:"related-movies"},Ua=["title"],Na={class:"nudity-info-content"},$a={key:0,class:"nudity-info-loading"},Ba={key:1},Ha={class:"nudity-info-actions"},Da=["href"],Va={class:"nudity-info-content"},Oa={class:"timings-text"},Fa={key:0,class:"timing-entries"},qa={class:"timing-content"},Ka={key:0,class:"pending-badge"},za={class:"timing-text"},Wa={class:"timing-author"},Ga={key:1},Ya={class:"nudity-info-actions"},Xa={key:2,class:"timing-modal"},Za={class:"timing-modal-content"},Qa={class:"timing-modal-header"},Ja={class:"timing-submission-form"},er={class:"timing-form-actions"},tr=["disabled"],nr={key:0,class:"fas fa-spinner fa-spin"},or={key:1},sr={class:"modal-header"},lr={class:"modal-header-controls"},ir={class:"modal-body"},ar=["disabled"],rr={key:0,class:"fas fa-spinner fa-spin"},ur={key:1,class:"fas fa-list"},dr={class:"top-submitters-list"},cr={class:"submitter-info"},vr={class:"submitter-name"},mr=["href"],fr={class:"submitter-count"},gr={class:"submitter-contribution"},kr={class:"modal-header"},yr={class:"modal-body"},pr={key:0,class:"timing-filters"},br={key:1,class:"loading-spinner"},hr={key:2,class:"no-timings"},wr={key:3,class:"no-timings"},Cr={key:4,class:"all-timings-list"},_r={class:"timing-header"},Er={class:"timing-meta"},Mr={class:"timing-author"},Lr={class:"timing-date"},Ir={class:"timing-movie-info"},Tr={key:0,class:"admin-controls"},Rr=["onClick","disabled"],Pr={key:0,class:"fas fa-spinner fa-spin"},Ar={key:1,class:"fas fa-check"},Sr=["onClick","disabled"],xr={key:0,class:"fas fa-spinner fa-spin"},jr={key:1,class:"fas fa-times"},Ur={class:"timing-content"},Nr={class:"timing-text"},$r={__name:"MovieInfo",setup(a){const t=v(!0),u=ht(),n=St(),E=Un(),M=hn(),f=wt(),g=v(M.params.kp_id),L=v(""),I=v(null),o=v(null),d=Nn(),C=Xn(),w=v(null),U=C.areTrailersActive,S=v(null),x=v(!1),P=v(!1),h=v(10),R=v(null),j=v(!1),Y=v({}),q=v(null),O=v(!1),A=v(void 0),be=v({}),ke=v(null),fe=D(()=>{var c;return((c=o.value)==null?void 0:c.nudity_timings.length)>0}),$e=D(()=>{var c,s,H,z,xe,Me,je,Ue,m,l;return((s=(c=o.value)==null?void 0:c.lists)==null?void 0:s.isFavorite)||((z=(H=o.value)==null?void 0:H.lists)==null?void 0:z.isWatching)||((Me=(xe=o.value)==null?void 0:xe.lists)==null?void 0:Me.isLater)||((Ue=(je=o.value)==null?void 0:je.lists)==null?void 0:Ue.isCompleted)||((l=(m=o.value)==null?void 0:m.lists)==null?void 0:l.isAbandoned)}),B=D(()=>u.isCommentsEnabled),se=()=>{if(o.value){const c=o.value.name_ru||o.value.name_en||o.value.name_original||"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å–º–µ";document.title=c}},W=c=>c?c.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",Q=c=>(c||[]).map(s=>({kp_id:s.film_id,poster:s.poster_url_preview||s.poster_url,title:s.name_ru||s.name_en||s.name_original})),ie=c=>{if(typeof c!="number")return;const s=Math.floor(c/60),H=c%60;return"".concat(s," —á. ").concat(H," –º–∏–Ω.")},ce=v(!1),ve=v({top:"0px",left:"0px"}),me=c=>{ce.value=!0,ve.value={top:"".concat(c.pageY+10,"px"),left:"".concat(c.pageX-70,"px")}},Ie=async()=>{try{const c=[o.value.name_ru||o.value.name_en||o.value.name_original,...o.value.year?[o.value.year]:[],...o.value.film_length?[ie(o.value.film_length)]:[]];await navigator.clipboard.writeText(c.join(", ")),w.value.showNotification("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ")}catch(c){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",c)}},ue=async(c=!0)=>{var s,H,z,xe,Me,je,Ue,m;try{let l;if(g.value.startsWith("shiki")?l=await Bn(g.value):l=await Hn(g.value,n.token),Array.isArray(l)&&l.length===0)throw new Error("–î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–∏—Å–∫.");o.value=l,g.value.startsWith("shiki")?o.value={...o.value,title:o.value.name_ru||o.value.name_en,name_original:o.value.name_en,short_description:o.value.slogan}:o.value={...o.value,title:o.value.name_ru||o.value.name_en||o.value.name_original,kinopoisk_id:g.value},d.setHeaderContent({text:o.value.title,imageUrl:o.value.logo_url}),se();const T={kp_id:g.value,title:((s=o.value)==null?void 0:s.name_ru)||((H=o.value)==null?void 0:H.name_en)||((z=o.value)==null?void 0:z.name_original),poster:((xe=o.value)==null?void 0:xe.poster_url)||((Me=o.value)==null?void 0:Me.cover_url)||((je=o.value)==null?void 0:je.screenshots[0]),year:(Ue=o.value)==null?void 0:Ue.year,type:(m=o.value)==null?void 0:m.type};if(g.value.startsWith("shiki"))if(o.value.screenshots&&o.value.screenshots.length>0){const K=Math.floor(Math.random()*o.value.screenshots.length),ne=o.value.screenshots[K];E.updateMoviePoster(ne)}else T.poster&&E.updateMoviePoster(T.poster);else T.poster&&E.updateMoviePoster(T.poster);if(D(()=>u.isHistoryAllowed).value&&T.kp_id&&T.title&&c)if(n.token)try{await Pt(T.kp_id,V.HISTORY)}catch(K){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é:",K)}else u.addToHistory({...T})}catch(l){const{message:T,code:F}=et(l);L.value=T,I.value=F,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–ª—å–º–∞—Ö:",l)}},Ye=D(()=>{var c,s;return console.log("–¢—Ä–µ–π–ª–µ—Ä—ã:",(c=o.value)==null?void 0:c.videos),(s=o.value)==null?void 0:s.videos}),oe=D(()=>{var c;return Q((c=o.value)==null?void 0:c.sequels_and_prequels)}),Te=D(()=>{var c;return Q((c=o.value)==null?void 0:c.similars)}),he=()=>{var z;const c=((z=document.querySelector(".related-movies"))==null?void 0:z.clientWidth)||0,H=Math.floor(c/160)||10;h.value=Math.max(1,H)},Be=()=>{he()},we=c=>{if(c.altKey&&c.keyCode===84&&document.querySelector(".player-container")){const H=document.querySelector(".theater-mode-btn");H&&H.click()}},He=c=>{c.button===1&&(c.preventDefault(),tt(c))},tt=async c=>{if(R.value!==null){R.value=null,j.value=!1;return}A.value=void 0,q.value=c.currentTarget;const s=q.value.getBoundingClientRect();Y.value={position:"absolute",top:"".concat(s.bottom+window.scrollY+10,"px"),left:"".concat(s.right+window.scrollX,"px"),transform:"translateX(-100%)"},R.value="",j.value=!0;try{const H=await Dn(o.value.imdb_id);R.value=H.nudity_info}catch(H){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö:",H),R.value="–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ Parents Guide –Ω–∞ IMDb –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏."}finally{j.value=!1}},nt=c=>{var H,z;if(R.value=null,A.value!==void 0){A.value=void 0;return}ke.value=c.currentTarget;const s=ke.value.getBoundingClientRect();be.value={position:"absolute",top:"".concat(s.bottom+window.scrollY+10,"px"),left:"".concat(s.right+window.scrollX,"px"),transform:"translateX(-100%)"},A.value=((H=o.value)==null?void 0:H.nudity_timings)===null?"":((z=o.value)==null?void 0:z.nudity_timings)||""},ut=c=>{var H,z,xe,Me,je,Ue,m,l,T,F,K,ne,Ae;return(Ae={[V.FAVORITE]:((z=(H=o.value)==null?void 0:H.lists)==null?void 0:z.isFavorite)||!1,[V.HISTORY]:((Me=(xe=o.value)==null?void 0:xe.lists)==null?void 0:Me.isHistory)||!1,[V.LATER]:((Ue=(je=o.value)==null?void 0:je.lists)==null?void 0:Ue.isLater)||!1,[V.COMPLETED]:((l=(m=o.value)==null?void 0:m.lists)==null?void 0:l.isCompleted)||!1,[V.ABANDONED]:((F=(T=o.value)==null?void 0:T.lists)==null?void 0:F.isAbandoned)||!1,[V.WATCHING]:((ne=(K=o.value)==null?void 0:K.lists)==null?void 0:ne.isWatching)||!1}[c])!=null?Ae:!1},Re=async c=>{if(!n.token){w.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:()=>f.push("/login")});return}try{const s={[V.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[V.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[V.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[V.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[V.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[V.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};ut(c)?(await Cn(g.value,c),w.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(s[c]))):(await Pt(g.value,c),w.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(s[c]))),await ue(!1),O.value=!1}catch(s){const{message:H,code:z}=et(s);w.value.showNotification("".concat(H," ").concat(z))}},De=c=>{const s=document.querySelector(".mobile-list-dropdown");s&&!s.contains(c.target)&&(O.value=!1)},ye=c=>{const s=document.querySelector(".nudity-info-popup");s&&!s.contains(c.target)&&q.value&&!q.value.contains(c.target)&&(R.value=null)},Ve=c=>{const s=document.querySelector(".nudity-info-popup");s&&!s.contains(c.target)&&ke.value&&!ke.value.contains(c.target)&&(A.value=void 0)};vt(async()=>{await ue(),t.value=!1,document.addEventListener("keydown",we),window.addEventListener("resize",Be),setTimeout(he,100),document.addEventListener("click",De),document.addEventListener("click",ye,!0),document.addEventListener("click",Ve,!0)}),$n(async()=>{d.clearHeaderContent(),document.removeEventListener("keydown",we),window.removeEventListener("resize",Be),document.removeEventListener("click",De),document.removeEventListener("click",ye,!0),document.removeEventListener("click",Ve,!0)}),We(()=>M.params.kp_id,async c=>{c&&c!==g.value&&(d.clearHeaderContent(),g.value=c,S.value=null,await ue(),t.value=!1)},{immediate:!0}),We(o,()=>{se()},{deep:!0}),We(R,c=>{c?document.addEventListener("click",ye,!0):document.removeEventListener("click",ye,!0)},{deep:!0}),We(A,c=>{c?document.addEventListener("click",Ve,!0):document.removeEventListener("click",Ve,!0)},{deep:!0});const b=c=>{var s,H;return((H=(s=o.value)==null?void 0:s.staff)==null?void 0:H.filter(z=>z.profession_key===c))||[]},te=async()=>{try{await navigator.clipboard.writeText(R.value),w.value.showNotification("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω")}catch(c){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",c),w.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞")}finally{R.value=null}},Oe=async()=>{if(A.value.length!==0)try{const c=A.value.map(s=>"".concat(s.timing_text," (by @").concat(s.username,")")).join("\n").concat("\nReYohoho\n");await navigator.clipboard.writeText(c),w.value.showNotification("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω")}catch(c){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",c),w.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞")}finally{A.value=void 0}},mt=()=>{const c=encodeURIComponent(R.value);window.open("https://translate.google.com/?sl=en&tl=ru&text=".concat(c),"_blank"),R.value=null},ot=D({get:()=>u.submitterUsername,set:c=>u.setSubmitterUsername(c)}),Je=v(""),Fe=v(!1),ft=D(()=>ot.value.trim()&&Je.value.trim()),N=async()=>{if(!(!ft.value||Fe.value))try{Fe.value=!0,await On(g.value,ot.value.trim(),Je.value),w.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é, —Å–ø–∞—Å–∏–±–æ!"),Je.value="",G.value=!1}catch(c){const{message:s}=et(c);w.value.showNotification(s,5e3)}finally{Fe.value=!1}},X=async()=>{try{const{submissions:c}=await Vn();de.value=c,Pe.value=!0}catch(c){const{message:s}=et(c);w.value.showNotification(s)}},G=v(!1),de=v([]),Pe=v(!1),pe=v(!1),Ce=v([]),_e=v(!1),Ee=v(!1),st=v(null),lt=v(!1),Xe=v("all"),kt=async c=>{if(!Ee.value)try{Ee.value=!0,st.value=c,lt.value=!0,await qn(c);const s=Ce.value.find(H=>H.id===c);s&&(s.status="approved"),w.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ–¥–æ–±—Ä–µ–Ω")}catch(s){const{message:H}=et(s);w.value.showNotification("–û—à–∏–±–∫–∞: ".concat(H))}finally{Ee.value=!1,st.value=null,lt.value=!1}},Ct=async c=>{if(!Ee.value)try{Ee.value=!0,st.value=c,lt.value=!1,await Kn(c);const s=Ce.value.find(H=>H.id===c);s&&(s.status="rejected"),w.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ—Ç–∫–ª–æ–Ω–µ–Ω")}catch(s){const{message:H}=et(s);w.value.showNotification("–û—à–∏–±–∫–∞: ".concat(H))}finally{Ee.value=!1,st.value=null,lt.value=!1}},It=async()=>{if(!_e.value)try{_e.value=!0,pe.value=!0;const{timings:c}=await Fn();Ce.value=c}catch(c){const{message:s}=et(c);w.value.showNotification(s),pe.value=!1}finally{_e.value=!1}},Tt=c=>({pending:"–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏",approved:"–û–¥–æ–±—Ä–µ–Ω–æ",rejected:"–û—Ç–∫–ª–æ–Ω–µ–Ω–æ"})[c]||c,_t=(c,s)=>{const H=[2,0,1,1,1,2];return s[c%100>4&&c%100<20?2:H[Math.min(c%10,5)]]},Rt=c=>{if(!de.value.length)return 0;const s=Math.max(...de.value.map(H=>H.approved_submissions_count));return c/s*100},Et=D(()=>Xe.value==="all"?Ce.value:Ce.value.filter(c=>c.status===Xe.value));return(c,s)=>{var z,xe,Me,je,Ue,m,l,T,F,K,ne,Ae,qe,Ke,ze,it,at,rt;const H=Le("router-link");return i(),r(le,null,[e("div",gi,[e("div",ki,[(t.value||!o.value)&&!L.value?(i(),r("div",yi,[e("div",pi,[s[26]||(s[26]=bt('<div class="movie-skeleton__header" data-v-7e41af2b><div class="movie-skeleton__title" data-v-7e41af2b></div></div><div class="movie-skeleton__ratings" data-v-7e41af2b><div class="movie-skeleton__rating-item" data-v-7e41af2b></div><div class="movie-skeleton__rating-item" data-v-7e41af2b></div><div class="movie-skeleton__rating-item" data-v-7e41af2b></div></div>',2)),e("div",bi,[re(Mn)]),s[27]||(s[27]=bt('<div class="movie-skeleton__additional-info" data-v-7e41af2b><div class="movie-skeleton__section-title" data-v-7e41af2b></div><div class="movie-skeleton__info-list" data-v-7e41af2b><div class="movie-skeleton__info-item" data-v-7e41af2b></div><div class="movie-skeleton__info-item" data-v-7e41af2b></div><div class="movie-skeleton__info-item" data-v-7e41af2b></div><div class="movie-skeleton__info-item" data-v-7e41af2b></div><div class="movie-skeleton__info-item" data-v-7e41af2b></div></div></div><div class="movie-skeleton__description" data-v-7e41af2b><div class="movie-skeleton__description-line" data-v-7e41af2b></div><div class="movie-skeleton__description-line" data-v-7e41af2b></div><div class="movie-skeleton__description-line" data-v-7e41af2b></div><div class="movie-skeleton__description-line" data-v-7e41af2b></div></div>',2))])])):p("",!0),L.value?(i(),Ze(wn,{key:1,message:L.value,code:I.value},null,8,["message","code"])):p("",!0),L.value?(i(),r("div",hi,[(i(),Ze(bn,{key:g.value,"kp-id":g.value,"movie-info":o.value,"onUpdate:movieInfo":ue},null,8,["kp-id","movie-info"]))])):p("",!0),o.value&&!t.value?(i(),r("div",wi,[e("div",Ci,[o.value.logo_url?(i(),r("div",{key:0,class:"content-logo",onMousemove:me,onMouseleave:s[0]||(s[0]=y=>ce.value=!1),onClick:Ie},[e("img",{src:o.value.logo_url,alt:"–õ–æ–≥–æ—Ç–∏–ø —Ñ–∏–ª—å–º–∞",class:"content-logo"},null,8,_i)],32)):(i(),r("div",{key:1,onMousemove:me,onMouseleave:s[1]||(s[1]=y=>ce.value=!1),onClick:Ie},[e("h1",Ei,k(o.value.title),1)],32)),ee(e("div",{class:"title-copy-tooltip",style:dt(ve.value)}," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ",4),[[ae,ce.value]])]),o.value.kinopoisk_id||o.value.title||o.value.imdb_id||o.value.rating_imdb||o.value.shikimori_id?(i(),r("div",Mi,[o.value.kinopoisk_id?(i(),Ze(Cs,{key:o.value.kinopoisk_id,"kp-id":o.value.kinopoisk_id,"show-dash":!0},null,8,["kp-id"])):p("",!0),o.value.kinopoisk_id?(i(),r("div",Li,[e("a",{href:"https://www.kinopoisk.ru/film/".concat(o.value.kinopoisk_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:o.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(W(o.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[s[28]||(s[28]=e("img",{src:kn,alt:"–ö–ü",class:"rating-logo"},null,-1)),e("span",{class:_(["rating-value",Z(pt)(o.value.rating_kinopoisk)])},k(o.value.rating_kinopoisk?o.value.rating_kinopoisk:"‚Äî"),3),s[29]||(s[29]=e("img",{src:yt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Ii)])):p("",!0),!o.value.kinopoisk_id&&o.value.title?(i(),r("div",Ti,[e("a",{href:"https://www.kinopoisk.ru/index.php?kp_query=".concat(encodeURIComponent(o.value.title+(o.value.year?" "+o.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:o.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(W(o.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[s[30]||(s[30]=e("img",{src:kn,alt:"–ö–ü",class:"rating-logo"},null,-1)),e("span",{class:_(["rating-value",Z(pt)(o.value.rating_kinopoisk)])},k(o.value.rating_kinopoisk?o.value.rating_kinopoisk:"‚Äî"),3),s[31]||(s[31]=e("img",{src:yt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Ri)])):p("",!0),o.value.imdb_id?(i(),r("div",Pi,[e("a",{href:"https://www.imdb.com/title/".concat(o.value.imdb_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:o.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(W(o.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[s[32]||(s[32]=e("img",{src:yn,alt:"IMDb",class:"rating-logo"},null,-1)),e("span",{class:_(["rating-value",Z(pt)(o.value.rating_imdb)])},k(o.value.rating_imdb?o.value.rating_imdb:"‚Äî"),3),s[33]||(s[33]=e("img",{src:yt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Ai)])):p("",!0),!o.value.imdb_id&&o.value.title?(i(),r("div",Si,[e("a",{href:"https://www.imdb.com/find/?q=".concat(encodeURIComponent(o.value.title+(o.value.year?" "+o.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:o.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(W(o.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[s[34]||(s[34]=e("img",{src:yn,alt:"IMDb",class:"rating-logo"},null,-1)),e("span",{class:_(["rating-value",Z(pt)(o.value.rating_imdb)])},k(o.value.rating_imdb?o.value.rating_imdb:"‚Äî"),3),s[35]||(s[35]=e("img",{src:yt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,xi)])):p("",!0),o.value.shikimori_id?(i(),r("div",ji,[e("a",{href:"https://shikimori.one/animes/".concat(o.value.shikimori_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},s[36]||(s[36]=[e("img",{src:Zn,alt:"Shiki",class:"rating-logo"},null,-1),e("img",{src:yt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,Ui)])):p("",!0),o.value.imdb_id?(i(),r("button",{key:6,class:"nudity-info-btn parents-guide-btn",onClick:s[2]||(s[2]=y=>tt(y)),onMousedown:s[3]||(s[3]=y=>He(y)),title:R.value?"–°–∫—Ä—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é":"–ü–æ–∫–∞–∑–∞—Ç—å Parents Guide –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ü–µ–Ω–∞—Ö"},[s[37]||(s[37]=e("span",{class:"desktop-text"},"Parents Guide",-1)),s[38]||(s[38]=e("span",{class:"mobile-text"},"PG",-1)),j.value?(i(),r("i",Bi)):(i(),r("i",$i))],40,Ni)):p("",!0),e("button",{class:"nudity-info-btn",onClick:s[4]||(s[4]=y=>nt(y)),title:A.value!==void 0?"–°–∫—Ä—ã—Ç—å —Ç–∞–π–º–∏–Ω–≥–∏":"–ü–æ–∫–∞–∑–∞—Ç—å —Ç–∞–π–º–∏–Ω–≥–∏ —Å—Ü–µ–Ω 18+(–¥–ª—è —Ç–≤–∏—á–∞)"},[e("i",{class:_(["fa-regular fa-clock",{"text-red":fe.value}])},null,2)],8,Hi)])):p("",!0),(i(),Ze(bn,{key:g.value,"kp-id":g.value,"movie-info":o.value,"onUpdate:movieInfo":ue},null,8,["kp-id","movie-info"])),Z(u).isMobile?(i(),r("div",Di,[e("button",{class:_(["mobile-list-toggle",{}]),onClick:s[5]||(s[5]=y=>O.value=!O.value)},[e("span",{class:_(["material-icons",{active:$e.value}])},k($e.value?"bookmark_added":"bookmark_border"),3),s[39]||(s[39]=e("span",{class:"button-label"},"–î–æ–±–∞–≤–∏—Ç—å –≤ —Å–ø–∏—Å–æ–∫",-1)),e("span",{class:_(["material-icons dropdown-arrow",{expanded:O.value}])},"expand_more",2)]),ee(e("div",Vi,[e("button",{class:_(["mobile-list-btn",{}]),onClick:s[6]||(s[6]=y=>Re(Z(V).FAVORITE))},[e("span",{class:_(["material-icons",{active:(xe=(z=o.value)==null?void 0:z.lists)==null?void 0:xe.isFavorite}])},k((je=(Me=o.value)==null?void 0:Me.lists)!=null&&je.isFavorite?"favorite":"favorite_border"),3),s[40]||(s[40]=e("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))]),e("button",{class:_(["mobile-list-btn",{}]),onClick:s[7]||(s[7]=y=>Re(Z(V).WATCHING))},[e("span",{class:_(["material-icons",{active:(m=(Ue=o.value)==null?void 0:Ue.lists)==null?void 0:m.isWatching}])},k((T=(l=o.value)==null?void 0:l.lists)!=null&&T.isWatching?"visibility":"visibility_off"),3),s[41]||(s[41]=e("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))]),e("button",{class:_(["mobile-list-btn",{}]),onClick:s[8]||(s[8]=y=>Re(Z(V).LATER))},[e("span",{class:_(["material-icons",{active:(K=(F=o.value)==null?void 0:F.lists)==null?void 0:K.isLater}])},"watch_later",2),s[42]||(s[42]=e("span",{class:"button-label"},"–ü–æ–∑–∂–µ",-1))]),e("button",{class:_(["mobile-list-btn",{}]),onClick:s[9]||(s[9]=y=>Re(Z(V).COMPLETED))},[e("span",{class:_(["material-icons",{active:(Ae=(ne=o.value)==null?void 0:ne.lists)==null?void 0:Ae.isCompleted}])},k((Ke=(qe=o.value)==null?void 0:qe.lists)!=null&&Ke.isCompleted?"check_circle":"check_circle_outline"),3),s[43]||(s[43]=e("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))]),e("button",{class:_(["mobile-list-btn",{}]),onClick:s[10]||(s[10]=y=>Re(Z(V).ABANDONED))},[e("span",{class:_(["material-icons",{active:(it=(ze=o.value)==null?void 0:ze.lists)==null?void 0:it.isAbandoned}])},"not_interested",2),s[44]||(s[44]=e("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))])],512),[[ae,O.value]])])):p("",!0),e("meta",{name:"title-and-year",content:o.value.type==="FILM"&&o.value.year?"".concat(o.value.title," (").concat(o.value.year,")"):o.value.title},null,8,Oi),o.value.name_original?(i(),r("meta",{key:2,name:"original-title",content:o.value.name_original},null,8,Fi)):p("",!0),e("div",qi,[s[55]||(s[55]=e("h2",{class:"additional-info-title"},"–ü–æ–¥—Ä–æ–±–Ω–µ–µ",-1)),e("div",Ki,[o.value.poster_url?(i(),r("div",zi,[e("a",{href:o.value.poster_url,target:"_blank",rel:"noopener noreferrer"},[e("img",{src:o.value.poster_url,alt:"–ü–æ—Å—Ç–µ—Ä —Ñ–∏–ª—å–º–∞",class:"movie-poster"},null,8,Gi)],8,Wi)])):p("",!0),e("div",Yi,[e("ul",Xi,[o.value.type&&Z(gn)[o.value.type]?(i(),r("li",Zi,[s[45]||(s[45]=e("strong",null,"–¢–∏–ø:",-1)),J(" "+k(Z(gn)[o.value.type]),1)])):p("",!0),o.value.year?(i(),r("li",Qi,[s[46]||(s[46]=e("strong",null,"–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞:",-1)),J(" "+k(o.value.year),1)])):p("",!0),o.value.title?(i(),r("li",Ji,[s[47]||(s[47]=e("strong",null,"–ù–∞–∑–≤–∞–Ω–∏–µ:",-1)),J(" "+k(o.value.title),1)])):p("",!0),o.value.name_original?(i(),r("li",ea,[s[48]||(s[48]=e("strong",null,"–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:",-1)),J(" "+k(o.value.name_original),1)])):p("",!0),o.value.slogan?(i(),r("li",ta,[s[49]||(s[49]=e("strong",null,"–°–ª–æ–≥–∞–Ω:",-1)),J(" "+k(o.value.slogan),1)])):p("",!0),o.value.production_companies?(i(),r("li",na,[s[50]||(s[50]=e("strong",null,"–ü—Ä–æ–¥–∞–∫—à–Ω:",-1)),J(" "+k(o.value.production_companies),1)])):p("",!0),(at=o.value.countries)!=null&&at.length?(i(),r("li",oa,[s[51]||(s[51]=e("strong",null,"–°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞:",-1)),J(" "+k(o.value.countries.map(y=>y.country).join(", ")),1)])):p("",!0),(rt=o.value.genres)!=null&&rt.length?(i(),r("li",sa,[s[52]||(s[52]=e("strong",null,"–ñ–∞–Ω—Ä—ã:",-1)),J(" "+k(o.value.genres.map(y=>y.genre).join(", ")),1)])):p("",!0),o.value.film_length?(i(),r("li",la,[s[53]||(s[53]=e("strong",null,"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:",-1)),J(" "+k(ie(o.value.film_length)),1)])):p("",!0),o.value.rating_mpaa||o.value.rating_age_limits?(i(),r("li",ia,[o.value.rating_mpaa?(i(),r("div",aa,[s[54]||(s[54]=e("strong",null,"MPAA",-1)),e("span",null,k(o.value.rating_mpaa.toUpperCase()),1)])):p("",!0),o.value.rating_age_limits?(i(),r("div",ra,[e("strong",null,k(o.value.rating_age_limits.replace("age",""))+"+",1)])):p("",!0)])):p("",!0)]),e("div",ua,[o.value.description?(i(),r("p",da,k(o.value.description),1)):p("",!0)])])])]),B.value?(i(),r("div",ca,[(i(),Ze(fi,{"movie-id":g.value,key:g.value},null,8,["movie-id"]))])):p("",!0),o.value.staff?(i(),r("div",va,[e("div",ma,[b("ACTOR").length?(i(),r("div",fa,[s[56]||(s[56]=e("h3",{class:"additional-info-title"},"–ê–∫—Ç—ë—Ä—ã",-1)),e("div",ga,[(i(!0),r(le,null,ge(b("ACTOR").slice(0,12),y=>(i(),r("div",{key:y.staff_id,class:"staff-item"},[e("a",{href:"https://www.kinopoisk.ru/name/".concat(y.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-link",title:y.description||""},[e("img",{src:y.poster_url,alt:y.name_ru,class:"staff-photo"},null,8,ya),e("span",pa,k(y.name_ru||y.name_en),1),y.description?(i(),r("span",ba,k(y.description),1)):p("",!0)],8,ka)]))),128)),e("a",{class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(g.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(b("ACTOR").length," –∞–∫—Ç–µ—Ä–æ–≤")}," +"+k(b("ACTOR").length-12),9,ha)])])):p("",!0),b("DIRECTOR").length?(i(),r("div",wa,[s[57]||(s[57]=e("h3",{class:"additional-info-title"},"–†–µ–∂–∏—Å—Å—ë—Ä—ã",-1)),e("div",Ca,[e("div",_a,[(i(!0),r(le,null,ge(b("DIRECTOR").slice(0,5),y=>(i(),r("a",{key:y.staff_id,href:"https://www.kinopoisk.ru/name/".concat(y.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},k(y.name_ru||y.name_en),9,Ea))),128)),b("DIRECTOR").length>5?(i(),r("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(g.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(b("DIRECTOR").length," —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–≤")}," +"+k(b("DIRECTOR").length-5),9,Ma)):p("",!0)])])])):p("",!0),b("PRODUCER").length?(i(),r("div",La,[s[58]||(s[58]=e("h3",{class:"additional-info-title"},"–ü—Ä–æ–¥—é—Å–µ—Ä—ã",-1)),e("div",Ia,[e("div",Ta,[(i(!0),r(le,null,ge(b("PRODUCER").slice(0,5),y=>(i(),r("a",{key:y.staff_id,href:"https://www.kinopoisk.ru/name/".concat(y.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},k(y.name_ru||y.name_en),9,Ra))),128)),b("PRODUCER").length>5?(i(),r("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(g.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(b("PRODUCER").length," –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤")}," +"+k(b("PRODUCER").length-5),9,Pa)):p("",!0)])])])):p("",!0)])])):p("",!0),Ye.value.length&&Z(U)?(i(),r("div",Aa,[re(vs,{videos:Ye.value,"active-video-index":S.value,onSelect:c.playTrailer},null,8,["videos","active-video-index","onSelect"])])):p("",!0),oe.value.length?(i(),r("div",Sa,[s[59]||(s[59]=e("h2",null,"–°–∏–∫–≤–µ–ª—ã –∏ –ø—Ä–∏–∫–≤–µ–ª—ã",-1)),re(Z(pn),{"movies-list":x.value?oe.value:oe.value.slice(0,h.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),oe.value.length>h.value?(i(),r("a",{key:0,class:"expand-circle-button",onClick:s[11]||(s[11]=y=>x.value=!x.value),title:"".concat(x.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(oe.value.length,")")},k(x.value?"‚àí":"+".concat(oe.value.length-h.value)),9,xa)):p("",!0)])):p("",!0),Te.value.length?(i(),r("div",ja,[s[60]||(s[60]=e("h2",null,"–ü–æ—Ö–æ–∂–∏–µ",-1)),re(Z(pn),{"movies-list":P.value?Te.value:Te.value.slice(0,h.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),Te.value.length>h.value?(i(),r("a",{key:0,class:"expand-circle-button",onClick:s[12]||(s[12]=y=>P.value=!P.value),title:"".concat(P.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(Te.value.length,")")},k(P.value?"‚àí":"+".concat(Te.value.length-h.value)),9,Ua)):p("",!0)])):p("",!0)])):p("",!0)])]),re(Lt,{ref_key:"notificationRef",ref:w},null,512),R.value!==null?(i(),r("div",{key:0,style:dt(Y.value),class:"nudity-info-popup"},[e("div",Na,[j.value?(i(),r("div",$a,s[61]||(s[61]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),e("span",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏...",-1)]))):(i(),r("div",Ba,k(R.value),1))]),e("div",Ha,[e("a",{href:"https://www.imdb.com/title/".concat(o.value.imdb_id,"/parentalguide"),target:"_blank",rel:"noopener noreferrer",class:"nudity-info-button"},s[62]||(s[62]=[e("i",{class:"fas fa-external-link-alt"},null,-1),e("span",null,"Parents Guide",-1)]),8,Da),e("button",{class:"nudity-info-button",onClick:te},s[63]||(s[63]=[e("i",{class:"fas fa-copy"},null,-1),e("span",null,"Copy",-1)])),e("button",{class:"nudity-info-button",onClick:mt},s[64]||(s[64]=[e("i",{class:"fas fa-language"},null,-1),e("span",null,"Translate",-1)]))])],4)):p("",!0),A.value!==void 0?(i(),r("div",{key:1,style:dt(be.value),class:"nudity-info-popup"},[e("div",Va,[e("div",{class:"acknowledgment-table"},[s[67]||(s[67]=e("div",{class:"acknowledgment-header"},[e("i",{class:"fa-solid fa-heart"}),e("span",null,"–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏")],-1)),e("div",{class:"acknowledgment-content"},[s[66]||(s[66]=e("div",{class:"acknowledgment-row"},[e("a",{href:"https://www.twitch.tv/tanyabelkova",target:"_blank",rel:"noopener noreferrer",class:"twitch-link"},[e("i",{class:"fa-brands fa-twitch"}),e("span",null,"TanyaBelkova")]),e("span",{class:"acknowledgment-text"},"‚Äî –∑–∞ –æ—Å–Ω–æ–≤—É –±–∞–∑—ã —Ç–∞–π–º–∏–Ω–≥–æ–≤")],-1)),e("div",{class:"acknowledgment-row clickable",onClick:X},s[65]||(s[65]=[e("div",{class:"community-link"},[e("i",{class:"fa-solid fa-users"}),e("span",null,"–°–æ–æ–±—â–µ—Å—Ç–≤–æ")],-1),e("span",{class:"acknowledgment-text"},"‚Äî –∑–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–∏–Ω–≥–æ–≤",-1)]))])]),e("div",{class:_(["timings-content",{"no-border":!A.value}])},[e("div",Oa,[A.value.length>0?(i(),r("div",Fa,[(i(!0),r(le,null,ge(A.value,y=>(i(),r("div",{key:y.id,class:_(["timing-entry",{pending:y.status==="pending"}])},[e("div",qa,[y.status==="pending"?(i(),r("div",Ka,"–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏")):p("",!0),e("div",{class:_(["timing-hover-container",{blurred:y.status==="pending"}])},[e("span",za,k(y.timing_text),1),s[68]||(s[68]=e("br",null,null,-1)),e("span",Wa,"by "+k(y.username),1)],2)])],2))),128))])):(i(),r("div",Ga,k("–ó–∞–ø–∏—Å–µ–π –æ —Ç–∞–π–º–∏–Ω–≥–∞—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")))]),e("div",Ya,[A.value.length>0?(i(),r("button",{key:0,class:"nudity-info-button",onClick:Oe},s[69]||(s[69]=[e("i",{class:"fas fa-copy"},null,-1),e("span",null,"–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å",-1)]))):p("",!0),e("button",{class:"nudity-info-button",onClick:s[13]||(s[13]=y=>G.value=!0)},s[70]||(s[70]=[e("i",{class:"fas fa-plus"},null,-1),e("span",null,"–î–æ–±–∞–≤–∏—Ç—å/–¥–æ–ø–æ–ª–Ω–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥",-1)]))])],2)])],4)):p("",!0),G.value?(i(),r("div",Xa,[e("div",Za,[e("div",Qa,[s[72]||(s[72]=e("h3",null,"–î–æ–±–∞–≤–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥",-1)),e("button",{class:"close-modal-btn",onClick:s[14]||(s[14]=y=>G.value=!1)},s[71]||(s[71]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",Ja,[ee(e("input",{"onUpdate:modelValue":s[15]||(s[15]=y=>ot.value=y),placeholder:"–í–∞—à –Ω–∏–∫",class:"timing-input",maxlength:"50"},null,512),[[ct,ot.value]]),ee(e("textarea",{"onUpdate:modelValue":s[16]||(s[16]=y=>Je.value=y),placeholder:"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ñ–∏–ª—å–º–∞, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã –ø—Ä–∏–ª–∞–≥–∞–µ—Ç–µ —Ç–∞–π–º–∏–Ω–≥\n          \n–î–ª—è —Å–µ—Ä–∏–∞–ª–æ–≤, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∑—ã–≤–∞–π—Ç–µ —Å–µ–∑–æ–Ω –∏ –Ω–æ–º–µ—Ä —ç–ø–∏–∑–æ–¥–∞",class:"timing-textarea"},null,512),[[ct,Je.value]]),e("div",er,[e("button",{class:"submit-timing-btn",onClick:N,disabled:!ft.value||Fe.value},[Fe.value?(i(),r("i",nr)):(i(),r("span",or,"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é"))],8,tr)])])])])):p("",!0),Pe.value?(i(),r("div",{key:3,class:"modal-overlay",onClick:s[19]||(s[19]=y=>Pe.value=!1)},[e("div",{class:"modal-content",onClick:s[18]||(s[18]=Qe(()=>{},["stop"]))},[e("div",sr,[s[74]||(s[74]=e("h3",null,[J(" –¢–æ–ø –∞–≤—Ç–æ—Ä–æ–≤ —Ç–∞–π–º–∏–Ω–≥–æ–≤ "),e("span",{class:"hint-text"},[J("(–•–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —Å–≤–æ–π —Å—Ç—Ä–∏–º/—Å–æ—Ü—Å–µ—Ç–∏? –ù–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º –≤ "),e("a",{href:"https://t.me/ReYohoho_support",target:"_blank",rel:"noopener noreferrer"},"—Ç–µ–ª–µ–≥—Ä–∞–º"),J(")")])],-1)),e("div",lr,[e("button",{class:"close-modal-btn",onClick:s[17]||(s[17]=y=>Pe.value=!1)},s[73]||(s[73]=[e("i",{class:"fas fa-times"},null,-1)]))])]),e("div",ir,[e("button",{class:"show-all-timings-btn",onClick:It,disabled:_e.value},[_e.value?(i(),r("i",rr)):(i(),r("i",ur)),s[75]||(s[75]=e("span",null,"–í—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏",-1))],8,ar),e("div",dr,[(i(!0),r(le,null,ge(de.value,(y,Ne)=>(i(),r("div",{key:y.username,class:"top-submitter-item"},[e("div",{class:_(["submitter-rank",{gold:Ne===0,silver:Ne===1,bronze:Ne===2}])},k(Ne+1),3),e("div",cr,[e("div",vr,[y.stream_link?(i(),r("a",{key:0,href:y.stream_link,target:"_blank",rel:"noopener noreferrer"},[J(k(y.username)+" ",1),s[76]||(s[76]=e("i",{class:"fa-brands fa-twitch"},null,-1))],8,mr)):(i(),r(le,{key:1},[J(k(y.username),1)],64))]),e("div",fr,k(y.approved_submissions_count)+" "+k(_t(y.approved_submissions_count,["—Ñ–∏–ª—å–º","—Ñ–∏–ª—å–º–∞","—Ñ–∏–ª—å–º–æ–≤"])),1)]),e("div",gr,[e("div",{class:"contribution-bar",style:dt({width:Rt(y.approved_submissions_count)+"%"})},null,4)])]))),128))])])])])):p("",!0),pe.value?(i(),r("div",{key:4,class:"modal-overlay",onClick:s[25]||(s[25]=y=>pe.value=!1)},[e("div",{class:"modal-content all-timings-modal",onClick:s[24]||(s[24]=Qe(()=>{},["stop"]))},[e("div",kr,[s[78]||(s[78]=e("h3",null,"–í—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏",-1)),e("button",{class:"close-modal-btn",onClick:s[20]||(s[20]=y=>pe.value=!1)},s[77]||(s[77]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",yr,[!_e.value&&Ce.value.length>0?(i(),r("div",pr,[e("button",{class:_(["timing-filter-btn",{active:Xe.value==="all"}]),onClick:s[21]||(s[21]=y=>Xe.value="all")}," –í—Å–µ ("+k(Ce.value.length)+") ",3),e("button",{class:_(["timing-filter-btn",{active:Xe.value==="approved"}]),onClick:s[22]||(s[22]=y=>Xe.value="approved")}," –û–¥–æ–±—Ä–µ–Ω–Ω—ã–µ ("+k(Ce.value.filter(y=>y.status==="approved").length)+") ",3),e("button",{class:_(["timing-filter-btn",{active:Xe.value==="pending"}]),onClick:s[23]||(s[23]=y=>Xe.value="pending")}," –ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ ("+k(Ce.value.filter(y=>y.status==="pending").length)+") ",3)])):p("",!0),_e.value?(i(),r("div",br,s[79]||(s[79]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),e("span",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö —Ç–∞–π–º–∏–Ω–≥–æ–≤...",-1)]))):Ce.value.length===0?(i(),r("div",hr,s[80]||(s[80]=[e("p",null,"–¢–∞–π–º–∏–Ω–≥–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",-1)]))):Et.value.length===0?(i(),r("div",wr,s[81]||(s[81]=[e("p",null,"–¢–∞–π–º–∏–Ω–≥–∏ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —Ñ–∏–ª—å—Ç—Ä—É –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",-1)]))):(i(),r("div",Cr,[(i(!0),r(le,null,ge(Et.value,y=>{var Ne;return i(),r("div",{key:y.id,class:_(["timing-item",{pending:y.status==="pending",approved:y.status==="approved",rejected:y.status==="rejected"}])},[e("div",_r,[e("div",Er,[e("span",{class:_(["timing-status",y.status])},k(Tt(y.status)),3),e("span",Mr,k(y.username),1),e("span",Lr,k(Z(En)(y.submitted_at)),1)]),e("div",Ir,[re(H,{to:"/movie/".concat(y.kp_id),class:"timing-kp-id clickable",title:"–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ñ–∏–ª—å–º—É ".concat(y.kp_id)},{default:At(()=>[J(" KP: "+k(y.kp_id),1)]),_:2},1032,["to","title"]),(Ne=Z(n).user)!=null&&Ne.is_admin&&y.status==="pending"?(i(),r("div",Tr,[e("button",{class:"approve-btn",onClick:Mt=>kt(y.id),disabled:Ee.value,title:"–û–¥–æ–±—Ä–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥"},[st.value===y.id&&lt.value?(i(),r("i",Pr)):(i(),r("i",Ar))],8,Rr),e("button",{class:"reject-btn",onClick:Mt=>Ct(y.id),disabled:Ee.value,title:"–û—Ç–∫–ª–æ–Ω–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥"},[st.value===y.id&&!lt.value?(i(),r("i",xr)):(i(),r("i",jr))],8,Sr)])):p("",!0)])]),e("div",Ur,[e("pre",Nr,k(y.timing_text),1)])],2)}),128))]))])])])):p("",!0)],64)}}},Kr=Ge($r,[["__scopeId","data-v-7e41af2b"]]);export{Kr as default};
