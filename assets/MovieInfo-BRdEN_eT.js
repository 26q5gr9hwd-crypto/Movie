import{_ as Ct,r as p,c as F,b as a,d as i,e,m as oe,t as g,O as de,g as k,P as Me,n as E,l as Lt,u as Jt,q as kn,N as Fn,B as en,x as qe,o as Nt,S as hn,k as xt,E as zn,f as Ce,V as Xt,p as ie,W as he,A as Q,U as Z,X as Yn,G as Mt,Y as et,Z as qn,$ as gn,a0 as Zt,a1 as Zn,a2 as jn,a3 as Xn,v as Qn,y as $t,a4 as Jn,i as We,w as yn,a5 as Qt,a6 as eo,a7 as to,a8 as no,a9 as oo,aa as Bn,ab as lo,ac as so,a as $n,ad as Un,ae as io,af as ao,ag as ro,ah as uo,ai as co,aj as vo,ak as mo,al as fo,am as po}from"./index-B9yk0Q8c.js";import{_ as go,a as Dn,b as Hn,M as On}from"./MovieList-a1fOz79o.js";import{p as Vt,f as Oe,u as Wn,a as yo,b as Kn}from"./useCommentFormatting-CS_lQxMh.js";import{S as Gn}from"./SpinnerLoading-BOzxStS5.js";import{N as an}from"./ToastMessage-SCiipEQe.js";import{u as ko,S as ho,a as bo}from"./trailer-DhJqK3qC.js";const Yt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVR4nO2ZQUoDMRSGR7eewHoFsVS0HkUUXNXqASqK2EURBPFIVRe6c+UN1CvUXWvbT4KvMAwzNnnJdCrmg1BKad7/v7y0b5IkiUQiCwGoAx3gQjEugZ0qxTeAIX6MKjMBnBOGS62AVWAPOHVYdlMu9YArYOhphLeBT+ALmOKGEd2QubaAK+B2zngFxt4GgDXgGZjgR8ch5oEkCi8DkvlnRcYLV0Apfqw10M7JvPkV6AN3FmVwK+WyZRnvMEe8ef/ibECyb2o+zRuwnpQAxeLNivQ0BvYyE46qEJ/8fK4ycJKp/X4V4n0MdDNfukkqEO9jwP1LDgD7BeKPgmgp04CL+KUz4Cp+qQxoxC+NAdsNm4c0hWkukkUa8BGfegiadbFDq3/2UAZ8xc+QVvzMtqcKYkBaZ5/MN5xEl2DgLGDZ1KswsC09FPJqXTZoNm5oA6kyMGI2FxqfkluJ0uMTDfhBXAHiHvCCWEL8/RLqlv1MPCf+TSZ+13WC7KnEfWlqcwAeU7GNjnbiQsG5UC1ZAEAt1UMhOpquk6zknMy9l20C2AA+MnEHRo9msuOCs9EH4Fp5TVQ0rqVs0plH4re02Qh1Oq1lCjypsp+5H3gKcD/gykTirqnFZ/ZDy+OGxpapzD+QePrM/2KkKfcGPcv7AdvRkz23G1x4JPIP+AY3r/ywUk/2JAAAAABJRU5ErkJggg==",wo="/reyohoho/assets/icon-shikimori-DGvXK9Jc.svg",Ot=u=>{const t=document.createElement("div");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.backgroundColor="rgba(0, 0, 0, 0.8)",t.style.color="white",t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",t.style.fontSize="2rem",t.style.zIndex="99000",t.textContent=u,document.body.appendChild(t),setTimeout(()=>{document.body.removeChild(t)},2e3)},Co={key:0},_o={key:1},Eo={class:"players-list"},Mo=["onClick"],xo={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Lo={key:0},To={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Io={key:1},So={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Ao=["onClick"],Ro={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Po={__name:"PlayerModal",props:{players:{type:Array,required:!0},selectedPlayer:{type:Object,default:null}},emits:["close","select"],setup(u,{emit:t}){const v=u,n=t,I=p(null),A=F(()=>v.players.filter(C=>!x(C)&&!R(C))),y=F(()=>v.players.some(C=>x(C))),h=F(()=>v.players.some(C=>R(C))),x=C=>C.key.toUpperCase().includes("HDREZKA"),R=C=>C.key.toUpperCase().includes("KODIK"),l=C=>C.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"").replace(/KODIK>/,"").trim(),m=C=>{n("select",C),n("close")},L=C=>v.selectedPlayer&&v.selectedPlayer.key===C.key,b=C=>v.selectedPlayer?C==="hdrezka"&&x(v.selectedPlayer)||C==="kodik"&&R(v.selectedPlayer):!1,$=C=>{I.value=C},T=()=>{I.value=null},j=C=>{let P=v.players.filter(B=>C==="hdrezka"&&x(B)||C==="kodik"&&R(B));return C==="kodik"?P.sort((B,te)=>l(B.translate).localeCompare(l(te.translate))):P},N=C=>j(C).some(P=>P.warning);return(C,P)=>(i(),a("div",{class:"modal",onClick:P[4]||(P[4]=Lt(B=>C.$emit("close"),["self"]))},[e("div",{class:"modal-content",onClick:P[3]||(P[3]=Lt(()=>{},["stop"]))},[e("button",{class:"close",onClick:P[0]||(P[0]=B=>C.$emit("close"))},"√ó"),I.value?(i(),a("h2",_o,[e("button",{class:"back-btn",onClick:T},"‚Üê –ù–∞–∑–∞–¥"),oe(" "+g(I.value==="hdrezka"?"ReYohoho - HDrezka":"Kodik"),1)])):(i(),a("h2",Co,"–í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–µ–µ—Ä")),e("ul",Eo,[I.value?(i(!0),a(de,{key:1},Me(j(I.value),B=>(i(),a("li",{key:B.key},[e("button",{class:E(["player-item",{active:L(B)}]),onClick:te=>m(B)},[oe(g(l(B.translate))+" ",1),B.warning?(i(),a("span",Ro,"warning")):k("",!0)],10,Ao)]))),128)):(i(),a(de,{key:0},[(i(!0),a(de,null,Me(A.value,B=>(i(),a("li",{key:B.key},[e("button",{class:E(["player-item",{active:L(B)}]),onClick:te=>m(B)},[oe(g(l(B.translate))+" ",1),B.warning?(i(),a("span",xo,"warning")):k("",!0)],10,Mo)]))),128)),y.value?(i(),a("li",Lo,[e("button",{class:E(["group-item",{active:b("hdrezka")}]),onClick:P[1]||(P[1]=B=>$("hdrezka"))},[P[5]||(P[5]=e("span",{class:"material-icons group-icon"},"folder",-1)),P[6]||(P[6]=oe(" ReYohoho - HDrezka ")),N("hdrezka")?(i(),a("span",To,"warning")):k("",!0)],2)])):k("",!0),h.value?(i(),a("li",Io,[e("button",{class:E(["group-item",{active:b("kodik")}]),onClick:P[2]||(P[2]=B=>$("kodik"))},[P[7]||(P[7]=e("span",{class:"material-icons group-icon"},"folder",-1)),P[8]||(P[8]=oe(" Kodik ")),N("kodik")?(i(),a("span",So,"warning")):k("",!0)],2)])):k("",!0)],64))])])]))}},No=Ct(Po,[["__scopeId","data-v-8b8d2b67"]]),jo={class:"players-list"},Bo=["src"],$o={key:1,class:"controls"},Uo={class:"main-controls"},Do={class:"material-icons"},Ho={class:"list-button-item"},Oo={class:"material-icons"},Vo={class:"list-button-item"},Fo={class:"material-icons"},zo={class:"list-button-item"},qo={class:"list-button-item"},Wo={class:"material-icons"},Ko={class:"list-button-item"},Go={class:"material-icons"},Yo={class:"tooltip-container","data-tooltip-container":"dimming"},Zo={class:"material-icons"},Xo={class:"tooltip-container","data-tooltip-container":"blur"},Qo={class:"tooltip-container","data-tooltip-container":"compressor"},Jo={class:"tooltip-container","data-tooltip-container":"mirror"},el={class:"tooltip-container","data-tooltip-container":"theater"},tl={class:"material-symbols-outlined"},nl={class:"custom-tooltip","data-tooltip":"theater"},ol={class:"tooltip-container","data-tooltip-container":"pip"},ll={class:"tooltip-container","data-tooltip-container":"aspect_ratio"},sl={class:"current-ratio"},il=["onClick"],al={key:0,class:"tooltip-container","data-tooltip-container":"app_link"},rl={class:"custom-tooltip","data-tooltip":"app_link"},ul={key:1,class:"tooltip-container","data-tooltip-container":"copy_link"},dl={class:"custom-tooltip","data-tooltip":"copy_link"},cl={key:2,class:"tooltip-container","data-tooltip-container":"overlay"},vl={class:"material-icons"},ml={key:0,class:"desktop-list-buttons"},fl={class:"tooltip-container"},pl={class:"material-icons"},gl={class:"custom-tooltip"},yl={class:"tooltip-container"},kl={class:"material-icons"},hl={class:"custom-tooltip"},bl={class:"tooltip-container"},wl={class:"custom-tooltip"},Cl={class:"tooltip-container"},_l={class:"material-icons"},El={class:"custom-tooltip"},Ml={class:"tooltip-container"},xl={class:"material-icons"},Ll={class:"custom-tooltip"},Tl={__name:"PlayerComponent",props:{kpId:String,movieInfo:{type:Object,default:()=>({})}},emits:["update:selectedPlayer","update:movieInfo"],setup(u,{emit:t}){const v=Jt(),n=ko(),I=kn(),A=Fn(),y=en(),h=p(A.params.kp_id),x=u,R=t,l=p([]),m=p(null),L=p(!0),b=p(!1),$=p(!1),T=p(null),j=p(null),N=p(!1),C=p(""),P=p(null),B=p(window.innerHeight*.9),te=F(()=>"".concat(B.value,"px")),X=F(()=>v.isMobile),S=F(()=>!!window.electronAPI),O=p(null),ce=p(!1);let fe=null;const Ie=p(null),tt=p(null),q=p(null),ge=p(null),se=p(!1),ae=p(!1),_e=p(null),ut=p(null),pt=p(0),ke=p(null),ye=p(null),xe=p(null),Ke=p(null),Ge=p(null),Le=p(null),le=F({get:()=>n.videoOverlayEnabled,set:r=>n.updateVideoOverlay(r)}),De=F({get:()=>n.overlaySettings,set:r=>n.updateOverlaySettings(r)}),Se=p(0),_t=p(0),gt=p([]),Ne=p(null),Ye=p(!1),K=p(null),nt=p(null),$e=p(!1),Ze=r=>{const s=document.querySelector('[data-tooltip-container="'.concat(r,'"]')),f=document.querySelector('[data-tooltip="'.concat(r,'"]'));if(!s||!f)return;const _=s.getBoundingClientRect(),M=f.getBoundingClientRect(),D=window.innerHeight;_.bottom+M.height>D?(f.style.top="auto",f.style.bottom="100%",f.style.marginTop="0",f.style.marginBottom="12px",f.style.transform="translateX(-50%)"):(f.style.top="100%",f.style.bottom="auto",f.style.marginTop="12px",f.style.marginBottom="0",f.style.transform="translateX(-50%)")},w=r=>{O.value=r,ce.value=!1,clearTimeout(fe),et(()=>{Ze(r)})},J=()=>{ce.value||(fe=setTimeout(()=>{O.value=null},300))},He=()=>{ce.value=!0,clearTimeout(fe)},Ee=()=>{ce.value=!1,O.value=null},dt=F({get:()=>n.aspectRatio,set:r=>n.updateAspectRatio(r)}),Tt=F({get:()=>n.isCentered,set:r=>n.updateCentering(r)}),Ft=F(()=>{var r,s,f,_,M,D,H,pe,re,Y;return((s=(r=x.movieInfo)==null?void 0:r.lists)==null?void 0:s.isFavorite)||((_=(f=x.movieInfo)==null?void 0:f.lists)==null?void 0:_.isWatching)||((D=(M=x.movieInfo)==null?void 0:M.lists)==null?void 0:D.isLater)||((pe=(H=x.movieInfo)==null?void 0:H.lists)==null?void 0:pe.isCompleted)||((Y=(re=x.movieInfo)==null?void 0:re.lists)==null?void 0:Y.isAbandoned)}),It=F(()=>n.preferredPlayer),yt=p(0),ct=r=>r.toUpperCase(),U=()=>{if(b.value||!j.value)return;const[r,s]=dt.value.split(":").map(Number);B.value=window.innerHeight*.9,yt.value=Math.min(j.value.clientWidth*(s/r),B.value)},ee=F(()=>{if(b.value)return{};const[r,s]=dt.value.split(":").map(Number),f=B.value*(r/s);return{width:"100%",maxWidth:"".concat(f,"px"),maxHeight:te.value,margin:"0 auto",overflow:"hidden"}}),je=F(()=>{const[r,s]=dt.value.split(":").map(Number);return{position:"relative",width:"100%",paddingTop:"".concat(s/r*100,"%")}}),be=()=>{j.value&&setTimeout(()=>{et(()=>{j.value.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})},500)},ue=async()=>{try{C.value="",P.value=null;const r=await Yn(x.kpId);if(l.value=Object.entries(r).map(([s,f])=>({key:s.toUpperCase(),...f})),l.value.length>0){if(It.value){const s=ct(It.value),f=l.value.find(_=>ct(_.key)===s);m.value=f||l.value[0]}else m.value=l.value[0];R("update:selectedPlayer",m.value)}}catch(r){const{message:s,code:f}=Mt(r);C.value=s,P.value=f,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–ª–µ–µ—Ä–æ–≤:",r)}},Ae=()=>{N.value=!0},Xe=()=>{N.value=!1},kt=()=>{try{return ke.value||(ke.value=new(window.AudioContext||window.webkitAudioContext)),ye.value||(ye.value=ke.value.createDynamicsCompressor(),ye.value.threshold.value=-50,ye.value.knee.value=40,ye.value.ratio.value=12,ye.value.attack.value=0,ye.value.release.value=.25,Ke.value=ke.value.createGain(),Ge.value=ke.value.createGain(),Ke.value.gain.value=0,Ge.value.gain.value=1,ye.value.connect(Ke.value),Ke.value.connect(ke.value.destination),Ge.value.connect(ke.value.destination)),!0}catch(r){return console.log("Error initializing audio context:",r),!1}},Qe=async r=>{try{if(!ke.value||Le.value===r)return!0;const s=T.value,f=(s==null?void 0:s.src)||"";if(f.includes("videoframe")||f.includes("kinoserial.net")||f.includes("allarknow"))return console.log("Player detected as unsupported for compressor:",f),Le.value=r,xe.value=null,ae.value=!1,S.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –ø–ª–µ–µ—Ä–æ–º"),!1;if(xe.value)try{xe.value.disconnect()}catch(M){}const _=async(M=0)=>{M>0&&await new Promise(D=>setTimeout(D,M));try{return xe.value=ke.value.createMediaElementSource(r),Le.value=r,xe.value.connect(ye.value),xe.value.connect(Ge.value),console.log("Video audio setup completed (attempt with ".concat(M,"ms delay)")),!0}catch(D){if(D.name==="InvalidStateError"&&D.message.includes("already connected"))return console.log("MediaElementSource already connected (".concat(M,"ms delay attempt)")),!1;throw D}};return await _(0)||await _(100)||await _(300)||await _(800)?!0:(console.log("Video element has internal audio processing, compressor not available for this player"),Le.value=r,xe.value=null,ae.value=!1,S.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –ø–ª–µ–µ—Ä–æ–º"),!1)}catch(s){return console.log("Error setting up video audio:",s),!1}},ht=async r=>{if(T.value)try{const s=T.value,f=s.contentDocument||s.contentWindow.document;if(!f)return;const _=f.querySelectorAll("video");if(_.length===0)return;const M=_[0];if(!kt())return;if(!await Qe(M)||!xe.value){console.log("Compressor not available for this player");return}r&&!ae.value?(Ke.value.gain.setValueAtTime(1,ke.value.currentTime),Ge.value.gain.setValueAtTime(0,ke.value.currentTime),ae.value=!0,S.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –≤–∫–ª—é—á—ë–Ω"),console.log("Compressor enabled")):!r&&ae.value&&(Ke.value.gain.setValueAtTime(0,ke.value.currentTime),Ge.value.gain.setValueAtTime(1,ke.value.currentTime),ae.value=!1,S.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –æ—Ç–∫–ª—é—á—ë–Ω"),console.log("Compressor disabled"))}catch(s){console.log("Compressor error:",s),S.value&&window.electronAPI.showToast("–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä–∞")}},Je=()=>{S.value?window.electronAPI.sendHotKey("F2"):(Ot("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},vt=()=>{S.value?(St.value=!St.value,ht(St.value)):(Ot("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},bt=()=>{S.value?(Rt.value=!Rt.value,un(Rt.value)):(Ot("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},ot=()=>{b.value=!b.value,b.value?(window.addEventListener("mousemove",zt),document.addEventListener("keydown",Ve),document.body.classList.add("no-scroll")):(window.removeEventListener("mousemove",zt),document.removeEventListener("keydown",Ve),document.body.classList.remove("no-scroll")),$.value=b.value,et(()=>be())},lt=p(null),zt=()=>{lt.value=setTimeout(()=>{clearTimeout(lt.value),$.value=!1},4e3),$.value=!0},Ut=F(()=>v.dimmingEnabled),rn=()=>{b.value||v.toggleDimming()},St=F({get:()=>n.compressorEnabled,set:r=>n.updateCompressor(r)}),Rt=F({get:()=>n.mirrorEnabled,set:r=>n.updateMirror(r)}),un=r=>{if(T.value)try{const s=T.value,f=s.contentDocument||s.contentWindow.document;if(!f)return;const _=f.querySelectorAll("video");if(_.length>0&&(_.forEach(M=>{r?M.style.transform="scaleX(-1)":M.style.transform="scaleX(1)"}),se.value=r,S.value)){const M=r?"–ó–µ—Ä–∫–∞–ª–æ –≤–∫–ª—é—á–µ–Ω–æ":"–ó–µ—Ä–∫–∞–ª–æ –æ—Ç–∫–ª—é—á–µ–Ω–æ";window.electronAPI.showToast(M)}}catch(s){}},dn=()=>{ge.value&&clearInterval(ge.value),ge.value=setInterval(()=>{if(T.value)try{const r=T.value,s=r.contentDocument||r.contentWindow.document;if(!s)return;const f=s.querySelectorAll("video");if(f.length>0){const _=f[0],D=_.style.transform==="scaleX(-1)";Rt.value&&!D?(_.style.transform="scaleX(-1)",se.value=!0):!Rt.value&&D&&(_.style.transform="scaleX(1)",se.value=!1),Le.value!==_?(Le.value=null,ae.value=!1,St.value&&setTimeout(()=>{ht(!0)},500)):St.value!==ae.value&&xe.value&&(console.log("Compressor state mismatch, reapplying"),ht(St.value))}}catch(r){}},1e3)},tn=(r=!1)=>{if(!S.value)return;_e.value&&clearInterval(_e.value);let s=!1,f=[];function _(){var M;if(f=[],window.selectedNudityTimings&&Array.isArray(window.selectedNudityTimings)&&((M=x.movieInfo)!=null&&M.nudity_timings)){for(const D of x.movieInfo.nudity_timings)if(window.selectedNudityTimings.includes(D.id)){const H=Vt(D.timing_text);H&&H.length>0&&f.push(...H)}}}_(),_e.value=setInterval(()=>{var M;if(T.value){_();try{const D=T.value,H=D.contentDocument||D.contentWindow.document;if(!H)return;const pe=H.querySelectorAll("video");if(pe.length>0){const re=pe[0];if(Se.value=re.currentTime||0,_t.value=re.duration||0,S.value&&le.value&&!K.value&&!$e.value&&Date.now()-(window.iframeLoadTime||0)>=3e3)try{Re(H,re)}catch(ve){console.log("Error creating overlay:",ve),$e.value=!1}if(S.value&&!le.value&&K.value&&setTimeout(()=>{!le.value&&K.value&&Pe()},100),S.value&&((M=x.movieInfo)!=null&&M.nudity_timings)){const Y=re.currentTime,ve=[],we=[],c=f.length>0;if(window.overlayNudityTimings&&Array.isArray(window.overlayNudityTimings)&&window.overlayNudityTimings.length>0){for(const W of x.movieInfo.nudity_timings)if(window.overlayNudityTimings.includes(W.id)){const G=Vt(W.timing_text);if(G&&G.length>0){const me=[];if(c)for(const[mt,ft]of G)me.push({text:"[".concat(Oe(mt),"-").concat(Oe(ft),"]"),status:"normal"});else for(const[mt,ft]of G){let Ue="normal";Y>=mt&&Y<=ft?(Ue="active",we.push(W.id)):mt>Y&&mt-Y<=20&&(Ue="upcoming"),me.push({text:"[".concat(Oe(mt),"-").concat(Oe(ft),"]"),status:Ue})}ve.push({id:W.id,intervals:me})}}}gt.value=ve}if(S.value&&K.value&&le.value&&at(),!re.paused){const Y=re.currentTime,ve=re.duration,we=ve>0?Y/ve*100:0;if(!Ye.value&&Y>=5){if(!Ne.value){const W=Date.now()-Y*1e3,G=Date.now(),me=24*60*60*1e3;W>G-me&&W<=G?Ne.value=W:Ne.value=G}Ye.value=!0}if(r&&(console.log("Video position: ".concat(Y.toFixed(2),"s / ").concat(ve.toFixed(2),"s (").concat(we.toFixed(1),"%)")),f.length>0)){const W=f.map(([G,me])=>"".concat(Oe(G)," - ").concat(Oe(me))).join(", ");console.log("Active blur intervals: [".concat(W,"]"))}let c=!1;for(const[W,G]of f)if(Y>=W&&Y<=G){c=!0;break}c&&!s&&S.value?(window.electronAPI.sendHotKey("F2"),s=!0,console.log("Blur applied at",Y.toFixed(2),"seconds")):!c&&s&&(window.electronAPI.sendHotKey("F2"),s=!1,console.log("Blur removed at",Y.toFixed(2),"seconds"))}}}catch(D){console.log("Error monitoring video position:",D)}}},100)},nn=()=>{L.value=!1,window.iframeLoadTime=Date.now(),Ne.value=null,Ye.value=!1,dn(),tn(),S.value&&le.value&&!K.value&&setTimeout(()=>{try{const r=T.value,s=r.contentDocument||r.contentWindow.document;if(s){const f=s.querySelector("video");f&&Re(s,f)}}catch(r){console.log("Error creating overlay on iframe load:",r),$e.value=!1}},3e3)},Ve=r=>{(r.key==="Escape"&&b.value||r.altKey&&r.keyCode===84)&&ot()},on=r=>{dt.value=r,setTimeout(()=>{Tt.value&&be()},310)},Dt=()=>{const r="reyohoho://#".concat(h.value);try{window.location.href=r}catch(s){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Å—ã–ª–∫–∏:",s)}},cn=()=>{const r=window.location.href;navigator.clipboard.writeText(r).then(()=>{}),Ie.value.showNotification("–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∏–ª—å–º —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞")};function ln(r){return r.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"HDRezka - ").replace(/KODIK>/,"Kodik - ").trim()}const vn=()=>{try{xe.value&&(xe.value.disconnect(),xe.value=null),ke.value&&(ke.value.close(),ke.value=null),ye.value=null,Ke.value=null,Ge.value=null,Le.value=null,ae.value=!1}catch(r){console.log("Error cleaning up audio context:",r)}},mn=r=>{var s;if(((s=m.value)==null?void 0:s.key)===r.key){Xe();return}m.value=r,L.value=!0,se.value=!1,ae.value=!1,Le.value=null,Ne.value=null,Ye.value=!1,K.value&&Pe(),ge.value&&(clearInterval(ge.value),ge.value=null),_e.value&&(clearInterval(_e.value),_e.value=null),r.key.toLowerCase().includes("torrents")||n.updatePreferredPlayer(ct(r.key)),R("update:selectedPlayer",r)};qe(m,r=>{r&&(L.value=!0,se.value=!1,ae.value=!1,Le.value=null,Ne.value=null,Ye.value=!1,K.value&&Pe(),ge.value&&(clearInterval(ge.value),ge.value=null),_e.value&&(clearInterval(_e.value),_e.value=null),r.key.toLowerCase().includes("torrents")||n.updatePreferredPlayer(ct(r.key)),R("update:selectedPlayer",r))}),qe(()=>A.params.kp_id,async r=>{r&&r!==h.value&&(h.value=r,se.value=!1,ae.value=!1,Le.value=null,Ne.value=null,Ye.value=!1,K.value&&Pe(),ge.value&&(clearInterval(ge.value),ge.value=null),_e.value&&(clearInterval(_e.value),_e.value=null),pt.value=0,Tt.value&&be())},{immediate:!0}),qe(le,r=>{if(S.value)if(r&&!K.value){const s=()=>{if(T.value)try{const f=T.value,_=f.contentDocument||f.contentWindow.document;if(_){const M=_.querySelector("video");if(M){const D=Date.now()-(window.iframeLoadTime||0);D>=3e3?Re(_,M):setTimeout(s,3e3-D)}}}catch(f){console.log("Error creating overlay via watcher:",f),$e.value=!1}};s()}else!r&&K.value&&Pe()}),qe(gt,(r,s)=>{if(!S.value)return;const f=s&&s.length>0,_=r&&r.length>0;!f&&_&&(le.value||(le.value=!0,window.electronAPI&&window.electronAPI.showToast("–û–≤–µ—Ä–ª–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á—ë–Ω - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ç–∞–π–º–∏–Ω–≥–∏")))},{deep:!0});const jt=["16:9","12:5","4:3"],fn=()=>{const s=(jt.indexOf(dt.value)+1)%jt.length;on(jt[s])},pn=r=>{var f,_,M,D,H,pe,re,Y,ve,we,c,W,G;return(G={[Z.FAVORITE]:((_=(f=x.movieInfo)==null?void 0:f.lists)==null?void 0:_.isFavorite)||!1,[Z.HISTORY]:((D=(M=x.movieInfo)==null?void 0:M.lists)==null?void 0:D.isHistory)||!1,[Z.LATER]:((pe=(H=x.movieInfo)==null?void 0:H.lists)==null?void 0:pe.isLater)||!1,[Z.COMPLETED]:((Y=(re=x.movieInfo)==null?void 0:re.lists)==null?void 0:Y.isCompleted)||!1,[Z.ABANDONED]:((we=(ve=x.movieInfo)==null?void 0:ve.lists)==null?void 0:we.isAbandoned)||!1,[Z.WATCHING]:((W=(c=x.movieInfo)==null?void 0:c.lists)==null?void 0:W.isWatching)||!1}[r])!=null?G:!1},Fe=async r=>{if(!I.token){Ie.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:qt});return}try{const s={[Z.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[Z.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[Z.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[Z.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[Z.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[Z.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};pn(r)?(await qn(h.value,r),Ie.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(s[r]))):(await gn(h.value,r),Ie.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(s[r])))}catch(s){const{message:f,code:_}=Mt(s);Ie.value.showNotification("".concat(f," ").concat(_))}R("update:movieInfo")},qt=()=>{y.push("/login")},d=F(()=>n.showFavoriteTooltip),o=()=>{y.push("/settings"),Ee()},V=async()=>{if(!S.value){Ot("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank");return}if(T.value)try{const r=T.value,s=r.contentDocument||r.contentWindow.document;if(!s)return;const f=s.querySelector("video");if(!f)return;document.pictureInPictureElement?await document.exitPictureInPicture():document.pictureInPictureEnabled?await f.requestPictureInPicture():Ot('–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–∂–∏–º "–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ"')}catch(r){console.error("Error toggling PiP:",r),Ot('–ù–µ —É–¥–∞–ª–æ—Å—å –≤–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º "–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ"')}},Te=()=>{if(le.value=!le.value,!le.value)Pe();else{const r=()=>{if(!K.value&&T.value)try{const s=T.value,f=s.contentDocument||s.contentWindow.document;if(f){const _=f.querySelector("video");if(_){const M=Date.now()-(window.iframeLoadTime||0);M>=3e3?Re(f,_):setTimeout(r,3e3-M)}}}catch(s){console.log("Error creating overlay:",s),$e.value=!1}};r()}},st=()=>{if(!S.value)return;const r=T.value,s=r.contentDocument||r.contentWindow.document;if(!s||s.getElementById("overlay-settings-modal"))return;const f=De.value,_=s.createElement("div");_.id="overlay-settings-modal",_.style.cssText="\n    position: fixed !important;\n    top: 0 !important;\n    left: 0 !important;\n    width: 100% !important;\n    height: 100% !important;\n    background: rgba(0, 0, 0, 0.8) !important;\n    display: flex !important;\n    align-items: center !important;\n    justify-content: center !important;\n    z-index: 9999 !important;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n  ";const M=s.createElement("div");M.style.cssText="\n    background: rgba(30, 30, 30, 0.95) !important;\n    backdrop-filter: blur(20px) !important;\n    border-radius: 16px !important;\n    padding: 32px !important;\n    max-width: 400px !important;\n    width: 90% !important;\n    border: 1px solid rgba(255, 255, 255, 0.1) !important;\n    box-shadow: 0 8px 40px rgba(0, 0, 0, 0.5) !important;\n  ",M.innerHTML='\n    <h3 style="color: #ff6b35; margin: 0 0 24px 0; font-size: 20px; font-weight: 600; text-align: center;">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–≤–µ—Ä–ª–µ—è</h3>\n    \n    <div style="display: flex; flex-direction: column; gap: 16px;">\n      <label style="display: flex; align-items: center; gap: 12px; color: white; cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(255, 255, 255, 0.05);">\n        <input type="checkbox" id="showTitle" '.concat(f.showTitle?"checked":"",' style="width: 18px; height: 18px; accent-color: #ff6b35;">\n        <span style="font-size: 16px;">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞</span>\n      </label>\n      \n      <label style="display: flex; align-items: center; gap: 12px; color: white; cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(255, 255, 255, 0.05);">\n        <input type="checkbox" id="showDuration" ').concat(f.showDuration?"checked":"",' style="width: 18px; height: 18px; accent-color: #ff6b35;">\n        <span style="font-size: 16px;">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</span>\n      </label>\n      \n      <label style="display: flex; align-items: center; gap: 12px; color: white; cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(255, 255, 255, 0.05);">\n        <input type="checkbox" id="showStartTime" ').concat(f.showStartTime?"checked":"",' style="width: 18px; height: 18px; accent-color: #ff6b35;">\n        <span style="font-size: 16px;">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞</span>\n      </label>\n    </div>\n    \n    <div style="display: flex; gap: 12px; margin-top: 24px; justify-content: center;">\n      <button id="resetStartTime" style="background: rgba(255, 107, 53, 0.2); color: #ff6b35; border: 1px solid #ff6b35; border-radius: 8px; padding: 10px 16px; cursor: pointer; font-size: 14px; transition: all 0.3s ease;">\n        –û–±–Ω–æ–≤–∏—Ç—å –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞\n      </button>\n      <button id="saveSettings" style="background: #ff6b35; color: white; border: none; border-radius: 8px; padding: 10px 20px; cursor: pointer; font-size: 16px; font-weight: 500; transition: all 0.3s ease;">\n        –°–æ—Ö—Ä–∞–Ω–∏—Ç—å\n      </button>\n      <button id="cancelSettings" style="background: rgba(255, 255, 255, 0.1); color: rgba(255, 255, 255, 0.8); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; padding: 10px 16px; cursor: pointer; font-size: 14px; transition: all 0.3s ease;">\n        –û—Ç–º–µ–Ω–∞\n      </button>\n    </div>\n  '),_.appendChild(M),_.addEventListener("click",H=>{H.target===_&&_.remove()}),M.querySelector("#resetStartTime").addEventListener("click",()=>{var H;Ne.value=Date.now()-Se.value*1e3,Ye.value=!0,(H=window.electronAPI)==null||H.showToast("–í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–æ")}),M.querySelector("#saveSettings").addEventListener("click",()=>{var pe;const H={showTitle:M.querySelector("#showTitle").checked,showDuration:M.querySelector("#showDuration").checked,showStartTime:M.querySelector("#showStartTime").checked};De.value=H,(pe=window.electronAPI)==null||pe.showToast("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–≤–µ—Ä–ª–µ—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã"),_.remove()}),M.querySelector("#cancelSettings").addEventListener("click",()=>{_.remove()}),M.querySelectorAll("button").forEach(H=>{H.addEventListener("mouseenter",()=>{H.id==="saveSettings"?(H.style.background="#e55a2b",H.style.transform="translateY(-1px)"):H.id==="resetStartTime"?H.style.background="rgba(255, 107, 53, 0.3)":H.style.background="rgba(255, 255, 255, 0.15)"}),H.addEventListener("mouseleave",()=>{H.id==="saveSettings"?(H.style.background="#ff6b35",H.style.transform="translateY(0)"):H.id==="resetStartTime"?H.style.background="rgba(255, 107, 53, 0.2)":H.style.background="rgba(255, 255, 255, 0.1)"})}),s.body.appendChild(_)},it=r=>{const s=new Date,f=new Date(r),_=new Date(s.getFullYear(),s.getMonth(),s.getDate()),M=new Date(f.getFullYear(),f.getMonth(),f.getDate()),D=f.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"});if(M.getTime()===_.getTime())return D;{const H=f.toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit"});return"".concat(H," ").concat(D)}},Re=(r,s)=>{if(!le.value||K.value||$e.value)return;$e.value=!0;const f=r.createElement("div");f.id="reyohoho-video-overlay";let _=()=>{f.style.cssText="\n      position: absolute !important;\n      top: 0 !important;\n      left: 0 !important;\n      width: 100% !important;\n      height: 100% !important;\n      pointer-events: none !important;\n      z-index: 999999999 !important;\n      display: flex !important;\n      flex-direction: column !important;\n      justify-content: space-between !important;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n      visibility: visible !important;\n      opacity: 1 !important;\n    "};const M=r.createElement("div");M.style.cssText="\n    background: linear-gradient(180deg, rgba(0, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0.4) 70%, transparent 100%) !important;\n    color: white !important;\n    padding: 20px !important;\n    text-align: left !important;\n    pointer-events: none !important;\n  ";const D=r.createElement("div");D.style.cssText="\n    font-size: 20px !important;\n    font-weight: 600 !important;\n    margin-bottom: 8px !important;\n    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8) !important;\n    line-height: 1.2 !important;\n    background: rgba(0, 0, 0, 0.6) !important;\n    padding: 8px 12px !important;\n    border-radius: 6px !important;\n    display: inline-block !important;\n    color: rgba(255, 255, 255, 0.6) !important;\n  ";const H=r.createElement("div");H.style.cssText="\n    font-size: 18px !important;\n    font-weight: 500 !important;\n    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8) !important;\n    display: flex !important;\n    align-items: center !important;\n    gap: 8px !important;\n    flex-wrap: wrap !important;\n    color: rgba(255, 255, 255, 0.6) !important;\n  ";const pe=r.createElement("div");pe.style.cssText="\n    position: absolute !important;\n    top: 20px !important;\n    right: 110px !important;\n    backdrop-filter: blur(10px) !important;\n    border-radius: 12px !important;\n    padding: 16px !important;\n    min-width: 280px !important;\n    max-width: 400px !important;\n    pointer-events: none !important;\n    display: none !important;\n  ";const re=r.createElement("div");re.style.cssText="\n    font-size: 14px !important;\n    color: rgba(255, 255, 255, 0.6) !important;\n    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8) !important;\n    line-height: 1.4 !important;\n    word-wrap: break-word !important;\n  ";const Y=r.createElement("div");Y.style.cssText="\n    position: absolute !important;\n    top: 20px !important;\n    right: 20px !important;\n    display: flex !important;\n    gap: 8px !important;\n    pointer-events: all !important;\n  ";const ve=r.createElement("button");ve.style.cssText="\n    background: rgba(0, 0, 0, 0.8) !important;\n    backdrop-filter: blur(10px) !important;\n    color: white !important;\n    border: 1px solid rgba(255, 255, 255, 0.2) !important;\n    border-radius: 50% !important;\n    width: 40px !important;\n    height: 40px !important;\n    display: flex !important;\n    align-items: center !important;\n    justify-content: center !important;\n    cursor: pointer !important;\n    transition: all 0.3s ease !important;\n    font-size: 18px !important;\n  ",ve.innerHTML="‚öôÔ∏è",ve.title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–≤–µ—Ä–ª–µ—è";const we=r.createElement("button");we.style.cssText="\n    background: rgba(0, 0, 0, 0.8) !important;\n    backdrop-filter: blur(10px) !important;\n    color: white !important;\n    border: 1px solid rgba(255, 255, 255, 0.2) !important;\n    border-radius: 50% !important;\n    width: 40px !important;\n    height: 40px !important;\n    display: flex !important;\n    align-items: center !important;\n    justify-content: center !important;\n    cursor: pointer !important;\n    transition: all 0.3s ease !important;\n    font-size: 18px !important;\n  ",we.innerHTML="üëÅÔ∏è",we.title="–û—Ç–∫–ª—é—á–∏—Ç—å –æ–≤–µ—Ä–ª–µ–π",we.addEventListener("click",()=>{le.value=!1}),ve.addEventListener("click",()=>{st()}),[ve,we].forEach(ne=>{ne.addEventListener("mouseenter",()=>{ne.style.background="#ff6b35",ne.style.borderColor="#ff6b35",ne.style.transform="scale(1.1)"}),ne.addEventListener("mouseleave",()=>{ne.style.background="rgba(0, 0, 0, 0.8)",ne.style.borderColor="rgba(255, 255, 255, 0.2)",ne.style.transform="scale(1)"})}),Y.appendChild(ve),Y.appendChild(we),pe.appendChild(re),M.appendChild(D),M.appendChild(H),f.appendChild(M),f.appendChild(pe),f.appendChild(Y),Y.style.transition="opacity 0.3s ease",Y.style.opacity="0.8",Y.style.visibility="visible",M.style.transition="opacity 0.3s ease";let c=null;const W=()=>{Y.style.opacity="1",M.style.opacity="0",clearTimeout(nt.value),clearTimeout(c),nt.value=setTimeout(()=>{Y.style.opacity="0.8"},3e3),c=setTimeout(()=>{M.style.opacity="1"},2e3)};r.addEventListener("mousemove",W),f.addEventListener("mouseenter",()=>{Y.style.opacity="1",M.style.opacity="0",clearTimeout(c)}),f.addEventListener("mouseleave",()=>{clearTimeout(nt.value),clearTimeout(c),Y.style.opacity="0.8",M.style.opacity="1"}),f._mouseHandler=W;const me=(ne=>{let Be=ne.parentNode,ze=0;const wt=5;for(;Be&&ze<wt;){const At=r.defaultView.getComputedStyle(Be),Pt=Be.getBoundingClientRect();if(Pt.width>0&&Pt.height>0&&(At.position==="relative"||At.position==="absolute"||At.position==="fixed"||Be.tagName==="BODY"))return Be;Be=Be.parentNode,ze++}return ne.parentNode})(s);f._targetContainer=me,f._videoElement=s,_=()=>{const ne=f._videoElement.getBoundingClientRect(),Be=f._targetContainer.getBoundingClientRect(),ze=ne.top-Be.top,wt=ne.left-Be.left;f.style.cssText="\n      position: absolute !important;\n      top: ".concat(ze,"px !important;\n      left: ").concat(wt,"px !important;\n      width: ").concat(ne.width,"px !important;\n      height: ").concat(ne.height,"px !important;\n      pointer-events: none !important;\n      z-index: 999999999 !important;\n      display: flex !important;\n      flex-direction: column !important;\n      justify-content: space-between !important;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n      visibility: visible !important;\n      opacity: 1 !important;\n      box-sizing: border-box !important;\n    ")},s.style.position="relative",(me.style.position===""||me.style.position==="static")&&(me.style.position="relative"),me.appendChild(f),_(),K.value=f,$e.value=!1;const ft=setInterval(()=>{if(!K.value||!le.value){clearInterval(ft);return}if(!r.body.contains(f))try{const ze=r.querySelectorAll("video");if(ze.length>0){const wt=ze[0];f._videoElement=wt;const Pt=(Wt=>{let Et=Wt.parentNode,Kt=0;const sn=5;for(;Et&&Kt<sn;){const Ht=r.defaultView.getComputedStyle(Et),Gt=Et.getBoundingClientRect();if(Gt.width>0&&Gt.height>0&&(Ht.position==="relative"||Ht.position==="absolute"||Ht.position==="fixed"||Et.tagName==="BODY"))return Et;Et=Et.parentNode,Kt++}return Wt.parentNode})(wt);f._targetContainer=Pt,Pt.appendChild(f),_(),f._mouseHandler&&(r.removeEventListener("mousemove",f._mouseHandler),r.addEventListener("mousemove",f._mouseHandler))}}catch(ze){console.log("Error re-adding overlay to DOM:",ze)}const ne=r.defaultView.getComputedStyle(f);if((ne.visibility==="hidden"||ne.display==="none"||ne.opacity==="0")&&_(),(parseInt(ne.zIndex)||0)<999999999&&_(),f._videoElement&&f._targetContainer){const ze=f._videoElement.getBoundingClientRect(),wt=parseInt(ne.width)||0,At=parseInt(ne.height)||0;(Math.abs(wt-ze.width)>5||Math.abs(At-ze.height)>5)&&_()}},1e3),Ue=new window.MutationObserver(ne=>{ne.forEach(Be=>{Be.type==="attributes"&&Be.target===f&&Be.attributeName==="style"&&setTimeout(()=>{K.value&&le.value&&_()},100)})});Ue.observe(f,{attributes:!0,attributeFilter:["style","class"]});const Bt=()=>{K.value&&le.value&&_()};r.defaultView.addEventListener("resize",Bt),f._monitorInterval=ft,f._mutationObserver=Ue,f._resizeHandler=Bt,f._iframeDoc=r;const rt=setInterval(()=>{if(!K.value||!le.value){clearInterval(rt);return}_()},500);setTimeout(()=>{clearInterval(rt)},1e4)},at=()=>{var Y,ve,we,c,W;if(!K.value||!le.value)return;const r=T.value;if(!r)return;const s=r.contentDocument||r.contentWindow.document;if(!s)return;const f=K.value,_=f.children[0],M=f.children[1],D=s.defaultView.getComputedStyle(f);(D.display==="none"||D.visibility==="hidden")&&(f.style.display="flex !important",f.style.visibility="visible !important");const H=_.children[0];if(De.value.showTitle){H.style.display="block";const G=((Y=x.movieInfo)==null?void 0:Y.title)||((ve=x.movieInfo)==null?void 0:ve.name_ru)||((we=x.movieInfo)==null?void 0:we.name_en)||((c=x.movieInfo)==null?void 0:c.name_original)||"–ó–∞–≥—Ä—É–∑–∫–∞...",me=(W=x.movieInfo)!=null&&W.year?" (".concat(x.movieInfo.year,")"):"";H.textContent=G+me}else H.style.display="none";const pe=_.children[1];let re="";if(De.value.showDuration){const G=Oe(Se.value),me=Oe(_t.value);re="\n      <span style=\"font-family: 'Courier New', monospace; background: rgba(0, 0, 0, 0.6); padding: 2px 8px; border-radius: 4px; color: rgba(255, 255, 255, 0.6);\">".concat(G,'</span>\n      <span style="opacity: 0.6;">/</span>\n      <span style="font-family: \'Courier New\', monospace; background: rgba(0, 0, 0, 0.6); padding: 2px 8px; border-radius: 4px; color: rgba(255, 255, 255, 0.6);">').concat(me,"</span>\n    ")}if(De.value.showStartTime&&Ne.value&&Ye.value){re&&(re+='\n      <span style="opacity: 0.6; margin: 0 4px;">‚Ä¢</span>\n      ');const G=it(Ne.value);re+='\n      <span style="color: rgba(255, 255, 255, 0.6); font-size: 16px; line-height: 1; vertical-align: middle;">–ù–∞—á–∞–ª–æ:</span>\n      <span style="font-family: \'Courier New\', monospace; background: rgba(0, 0, 0, 0.6); padding: 2px 8px; border-radius: 4px; color: rgba(255, 255, 255, 0.6); font-size: 16px; line-height: 1; vertical-align: middle;">'.concat(G,"</span>\n    ")}if(re?(pe.style.display="flex",pe.innerHTML=re):pe.style.display="none",gt.value.length>0){const G=M.children[0];G.innerHTML="";const me=s.createElement("span");me.textContent="–¢–∞–π–º–∏–Ω–≥–∏: ",me.style.color="rgba(255, 255, 255, 0.6)",G.appendChild(me),gt.value.forEach((mt,ft)=>{if(ft>0){const Ue=s.createElement("span");Ue.textContent=", ",Ue.style.color="rgba(255, 255, 255, 0.6)",G.appendChild(Ue)}mt.intervals.forEach((Ue,Bt)=>{if(Bt>0){const ne=s.createElement("span");ne.textContent=", ",ne.style.color="rgba(255, 255, 255, 0.6)",G.appendChild(ne)}const rt=s.createElement("span");rt.textContent=Ue.text,Ue.status==="active"?(rt.style.color="#ff4444",rt.style.fontWeight="bold"):Ue.status==="upcoming"?(rt.style.color="#ff6b35",rt.style.fontWeight="500"):rt.style.color="rgba(255, 255, 255, 0.6)",G.appendChild(rt)})}),M.style.display="block"}else M.style.display="none"},Pe=()=>{if(K.value){try{K.value._monitorInterval&&clearInterval(K.value._monitorInterval),K.value._mutationObserver&&K.value._mutationObserver.disconnect(),K.value._resizeHandler&&K.value._iframeDoc&&K.value._iframeDoc.defaultView.removeEventListener("resize",K.value._resizeHandler),K.value._mouseHandler&&K.value._iframeDoc&&K.value._iframeDoc.removeEventListener("mousemove",K.value._mouseHandler),K.value.remove()}catch(r){console.log("Error removing overlay:",r)}K.value=null}$e.value=!1,nt.value&&(clearTimeout(nt.value),nt.value=null)};return Nt(()=>{if(L.value=!0,ue(),X.value&&(dt.value="4:3"),U(),window.addEventListener("resize",U),window.addEventListener("resize",Ze),Tt.value&&be(),window.toggleCompressor=vt,window.toggleMirror=bt,S.value&&(ut.value=setInterval(()=>{const r=window.overlayNudityTimings?window.overlayNudityTimings.length:0;r>pt.value?(pt.value=r,le.value||(le.value=!0,window.electronAPI&&window.electronAPI.showToast("–û–≤–µ—Ä–ª–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á—ë–Ω - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ç–∞–π–º–∏–Ω–≥–∏"))):pt.value=r},1e3)),S.value&&le.value){const r=()=>{if(T.value&&!K.value)try{const s=T.value,f=s.contentDocument||s.contentWindow.document;if(f){const _=f.querySelector("video");if(_){const M=Date.now()-(window.iframeLoadTime||0);M>=3e3?Re(f,_):setTimeout(r,3e3-M)}else{const M=setInterval(()=>{try{const D=f.querySelector("video");if(D){clearInterval(M);const H=Date.now()-(window.iframeLoadTime||0);H>=3e3?Re(f,D):setTimeout(()=>Re(f,D),3e3-H)}}catch(D){console.log("Waiting for video element...",D)}},1e3);setTimeout(()=>clearInterval(M),15e3)}}}catch(s){console.log("Error initializing overlay on mount:",s),$e.value=!1}};setTimeout(r,1e3)}}),hn(()=>{window.removeEventListener("resize",U),window.removeEventListener("resize",Ze),window.removeEventListener("mousemove",zt),document.removeEventListener("keydown",Ve),document.body.classList.remove("no-scroll"),ge.value&&clearInterval(ge.value),_e.value&&clearInterval(_e.value),ut.value&&clearInterval(ut.value),Pe(),vn(),delete window.toggleCompressor,delete window.toggleMirror}),(r,s)=>{var f,_,M,D,H,pe,re,Y,ve,we,c,W,G,me,mt,ft,Ue,Bt,rt,ne,Be,ze,wt,At,Pt,Wt,Et,Kt,sn,Ht,Gt,En,Mn,xn,Ln,Tn,In,Sn,An,Rn,Pn,Nn;return C.value?(i(),xt(zn,{key:0,message:C.value,code:P.value},null,8,["message","code"])):(i(),a(de,{key:1},[e("div",jo,[s[43]||(s[43]=e("span",null,"–ü–ª–µ–µ—Ä:",-1)),e("button",{class:"player-btn",onClick:Ae},g(m.value?ln(m.value.translate).toUpperCase():"–ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–µ–µ—Ä–æ–≤..."),1)]),N.value?(i(),xt(No,{key:0,players:l.value,"selected-player":m.value,onClose:Xe,onSelect:mn},null,8,["players","selected-player"])):k("",!0),e("div",{ref_key:"containerRef",ref:j,class:E(["player-container",{"theater-mode":b.value}]),style:Xt(b.value?{}:ee.value)},[e("div",{class:"iframe-wrapper",style:Xt(b.value?{}:je.value)},[ie(e("iframe",{ref_key:"playerIframe",ref:T,src:(f=m.value)==null?void 0:f.iframe,frameborder:"0",allowfullscreen:"",webkitallowfullscreen:"",class:E(["responsive-iframe",{"theater-mode-unlock":$.value,"theater-mode-lock":b.value,dimmed:Ut.value}]),onLoad:nn},null,42,Bo),[[he,!L.value&&((_=m.value)==null?void 0:_.iframe)]]),L.value?(i(),xt(Gn,{key:0,text:"–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–ª–µ–µ—Ä: ".concat(m.value?ln(m.value.translate):"–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ –ø–ª–µ–µ—Ä–æ–≤","\n–ï—Å–ª–∏ –ø–ª–µ–µ—Ä –Ω–µ –≥—Ä—É–∑–∏—Ç—Å—è, —Ç–æ —Å–º–µ–Ω–∏—Ç–µ –ø–ª–µ–µ—Ä –≤—ã—à–µ –∏–ª–∏ –≤–∫–ª—é—á–∏—Ç–µ VPN"),style:{"white-space":"pre-line"}},null,8,["text"])):k("",!0)],4),b.value?(i(),a("button",{key:0,class:E(["close-theater-btn",{visible:$.value}]),onClick:ot}," ‚úñ ",2)):k("",!0)],6),b.value?k("",!0):(i(),a("div",$o,[e("div",Uo,[X.value?k("",!0):(i(),a("div",{key:0,ref_key:"tooltipContainer",ref:tt,class:"tooltip-container list-buttons-container","data-tooltip-container":"favorite"},[d.value?(i(),a("button",{key:0,class:E(["favorite-btn",{active:(D=(M=u.movieInfo)==null?void 0:M.lists)==null?void 0:D.isFavorite}]),onMouseenter:s[0]||(s[0]=z=>w("favorite")),onMouseleave:J,onClick:s[1]||(s[1]=z=>Fe(Q(Z).FAVORITE))},[e("span",Do,g((pe=(H=u.movieInfo)==null?void 0:H.lists)!=null&&pe.isFavorite?"favorite":"favorite_border"),1),e("span",{class:E(["material-icons dropdown-arrow",{highlighted:Ft.value}])},"expand_more",2)],34)):k("",!0),ie(e("div",{ref_key:"tooltip",ref:q,class:"custom-tooltip advanced-tooltip list-buttons-dropdown","data-tooltip":"favorite",onMouseenter:He,onMouseleave:Ee},[e("div",Ho,[e("button",{class:E(["favorite-btn",{active:(Y=(re=u.movieInfo)==null?void 0:re.lists)==null?void 0:Y.isFavorite}]),onClick:s[2]||(s[2]=z=>Fe(Q(Z).FAVORITE))},[e("span",Oo,g((we=(ve=u.movieInfo)==null?void 0:ve.lists)!=null&&we.isFavorite?"favorite":"favorite_border"),1),s[44]||(s[44]=e("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))],2)]),e("div",Vo,[e("button",{class:E(["watching-btn",{active:(W=(c=u.movieInfo)==null?void 0:c.lists)==null?void 0:W.isWatching}]),onClick:s[3]||(s[3]=z=>Fe(Q(Z).WATCHING))},[e("span",Fo,g((me=(G=u.movieInfo)==null?void 0:G.lists)!=null&&me.isWatching?"visibility":"visibility_off"),1),s[45]||(s[45]=e("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))],2)]),e("div",zo,[e("button",{class:E(["later-btn",{active:(ft=(mt=u.movieInfo)==null?void 0:mt.lists)==null?void 0:ft.isLater}]),onClick:s[4]||(s[4]=z=>Fe(Q(Z).LATER))},s[46]||(s[46]=[e("span",{class:"material-icons"},"watch_later",-1),e("span",{class:"button-label"},"–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ",-1)]),2)]),e("div",qo,[e("button",{class:E(["completed-btn",{active:(Bt=(Ue=u.movieInfo)==null?void 0:Ue.lists)==null?void 0:Bt.isCompleted}]),onClick:s[5]||(s[5]=z=>Fe(Q(Z).COMPLETED))},[e("span",Wo,g((ne=(rt=u.movieInfo)==null?void 0:rt.lists)!=null&&ne.isCompleted?"check_circle":"check_circle_outline"),1),s[47]||(s[47]=e("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))],2)]),e("div",Ko,[e("button",{class:E(["abandoned-btn",{active:(ze=(Be=u.movieInfo)==null?void 0:Be.lists)==null?void 0:ze.isAbandoned}]),onClick:s[6]||(s[6]=z=>Fe(Q(Z).ABANDONED))},[e("span",Go,g(((At=(wt=u.movieInfo)==null?void 0:wt.lists)!=null&&At.isAbandoned,"not_interested")),1),s[48]||(s[48]=e("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))],2)]),e("div",{class:"tooltip-hint"},[s[50]||(s[50]=e("span",{class:"material-icons"},"settings",-1)),e("span",null,[s[49]||(s[49]=oe("–°—Ç–∏–ª—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ ")),e("a",{class:"settings-link",onClick:o},"–Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö")])])],544),[[he,O.value==="favorite"&&d.value]])],512)),X.value?k("",!0):(i(),a(de,{key:1},[e("div",Yo,[e("button",{class:E(["dimming-btn",{active:Ut.value}]),onMouseenter:s[7]||(s[7]=z=>w("dimming")),onMouseleave:s[8]||(s[8]=z=>O.value=null),onClick:rn},[e("span",Zo,g(Ut.value?"light_mode":"dark_mode"),1)],34),ie(e("div",{class:"custom-tooltip","data-tooltip":"dimming"},g(Ut.value?"–û—Ç–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ":"–í–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ"),513),[[he,O.value==="dimming"]])]),e("div",Xo,[e("button",{class:E(["blur-btn",{"electron-only":!S.value}]),onMouseenter:s[9]||(s[9]=z=>w("blur")),onMouseleave:s[10]||(s[10]=z=>O.value=null),onClick:Je},s[51]||(s[51]=[e("span",{class:"material-icons"},"blur_on",-1)]),34),ie(e("div",{class:"custom-tooltip","data-tooltip":"blur"},g(S.value?"–ë–ª—é—Ä":"–ë–ª—é—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[he,O.value==="blur"]])]),e("div",Qo,[e("button",{class:E(["material-symbols-outlined",{active:St.value,"electron-only":!S.value}]),onMouseenter:s[11]||(s[11]=z=>w("compressor")),onMouseleave:s[12]||(s[12]=z=>O.value=null),onClick:vt},s[52]||(s[52]=[e("span",{class:"material-icons"},"graphic_eq",-1)]),34),ie(e("div",{class:"custom-tooltip","data-tooltip":"compressor"},g(S.value?"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä":"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[he,O.value==="compressor"]])]),e("div",Jo,[e("button",{class:E(["mirror-btn",{active:Rt.value,"electron-only":!S.value}]),onMouseenter:s[13]||(s[13]=z=>w("mirror")),onMouseleave:s[14]||(s[14]=z=>O.value=null),onClick:bt},s[53]||(s[53]=[e("span",{class:"material-icons"},"flip",-1)]),34),ie(e("div",{class:"custom-tooltip","data-tooltip":"mirror"},g(S.value?"–ó–µ—Ä–∫–∞–ª–æ":"–ó–µ—Ä–∫–∞–ª–æ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[he,O.value==="mirror"]])]),e("div",el,[e("button",{class:"theater-mode-btn",onMouseenter:s[15]||(s[15]=z=>w("theater")),onMouseleave:s[16]||(s[16]=z=>O.value=null),onClick:ot},[e("span",tl,g(b.value?"fullscreen_exit":"aspect_ratio"),1)],32),ie(e("div",nl,[oe(g(b.value?"–í—ã–π—Ç–∏ –∏–∑ —Ç–µ–∞—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞":"–¢–µ–∞—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º")+" ",1),s[54]||(s[54]=e("span",{class:"shortcut-hint"},"Alt+T",-1))],512),[[he,O.value==="theater"]])]),e("div",ol,[e("button",{class:E(["pip-btn",{"electron-only":!S.value}]),onMouseenter:s[17]||(s[17]=z=>w("pip")),onMouseleave:s[18]||(s[18]=z=>O.value=null),onClick:V},s[55]||(s[55]=[e("span",{class:"material-icons"},"picture_in_picture_alt",-1)]),34),ie(e("div",{class:"custom-tooltip","data-tooltip":"pip"},g(S.value?"–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ":"–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[he,O.value==="pip"]])]),e("div",ll,[e("button",{class:"aspect-ratio-dropdown-btn",onMouseenter:s[19]||(s[19]=z=>w("aspect_ratio")),onMouseleave:J,onClick:fn},[e("span",sl,g(dt.value),1)],32),ie(e("div",{class:"custom-tooltip advanced-tooltip aspect-ratio-dropdown","data-tooltip":"aspect_ratio",onMouseenter:He,onMouseleave:Ee},[(i(),a(de,null,Me(jt,z=>e("div",{key:z,class:E(["aspect-ratio-option",{active:dt.value===z}]),onClick:Hu=>on(z)},g(z),11,il)),64))],544),[[he,O.value==="aspect_ratio"]])]),e("div",{class:"tooltip-container","data-tooltip-container":"centering",onMouseenter:s[21]||(s[21]=z=>w("centering")),onMouseleave:J},[e("button",{class:"center-btn",onClick:be},s[56]||(s[56]=[e("span",{class:"material-icons"},"center_focus_strong",-1)])),ie(e("div",{class:"custom-tooltip advanced-tooltip","data-tooltip":"centering",onMouseenter:He,onMouseleave:Ee},[s[57]||(s[57]=oe(" –û—Ç—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–ª–µ–µ—Ä ")),Ce(ho,{modelValue:Tt.value,"onUpdate:modelValue":s[20]||(s[20]=z=>Tt.value=z),title:"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞"},null,8,["modelValue"]),s[58]||(s[58]=e("span",{class:"tooltip-title"},"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞",-1))],544),[[he,O.value==="centering"]])],32),S.value?k("",!0):(i(),a("div",al,[e("button",{class:"app-link-btn",onMouseenter:s[22]||(s[22]=z=>w("app_link")),onMouseleave:s[23]||(s[23]=z=>O.value=null),onClick:Dt},s[59]||(s[59]=[e("span",{class:"material-icons"},"open_in_new",-1)]),32),ie(e("div",rl," –û—Ç–∫—Ä—ã—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ",512),[[he,O.value==="app_link"]])])),S.value?(i(),a("div",ul,[e("button",{class:"copy-link-btn",onMouseenter:s[24]||(s[24]=z=>w("copy_link")),onMouseleave:s[25]||(s[25]=z=>O.value=null),onClick:cn},s[60]||(s[60]=[e("span",{class:"material-icons"},"content_copy",-1)]),32),ie(e("div",dl," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É ",512),[[he,O.value==="copy_link"]])])):k("",!0),S.value?(i(),a("div",cl,[e("button",{class:E(["overlay-btn",{active:le.value}]),onMouseenter:s[26]||(s[26]=z=>w("overlay")),onMouseleave:s[27]||(s[27]=z=>O.value=null),onClick:Te},[e("span",vl,g(le.value?"layers":"layers_clear"),1)],34),ie(e("div",{class:"custom-tooltip","data-tooltip":"overlay"},g(le.value?"–°–∫—Ä—ã—Ç—å –æ–≤–µ—Ä–ª–µ–π –≤–∏–¥–µ–æ":"–ü–æ–∫–∞–∑–∞—Ç—å –æ–≤–µ—Ä–ª–µ–π –≤–∏–¥–µ–æ"),513),[[he,O.value==="overlay"]])])):k("",!0)],64))]),!X.value&&!d.value?(i(),a("div",ml,[e("div",fl,[e("button",{class:E(["favorite-btn",{active:(Wt=(Pt=u.movieInfo)==null?void 0:Pt.lists)==null?void 0:Wt.isFavorite}]),onMouseenter:s[28]||(s[28]=z=>w("favorite")),onMouseleave:s[29]||(s[29]=z=>O.value=null),onClick:s[30]||(s[30]=z=>Fe(Q(Z).FAVORITE))},[e("span",pl,g((Kt=(Et=u.movieInfo)==null?void 0:Et.lists)!=null&&Kt.isFavorite?"favorite":"favorite_border"),1)],34),ie(e("div",gl,g("–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"),512),[[he,O.value==="favorite"]])]),e("div",yl,[e("button",{class:E(["watching-btn",{active:(Ht=(sn=u.movieInfo)==null?void 0:sn.lists)==null?void 0:Ht.isWatching}]),onMouseenter:s[31]||(s[31]=z=>w("watching")),onMouseleave:s[32]||(s[32]=z=>O.value=null),onClick:s[33]||(s[33]=z=>Fe(Q(Z).WATCHING))},[e("span",kl,g((En=(Gt=u.movieInfo)==null?void 0:Gt.lists)!=null&&En.isWatching?"visibility":"visibility_off"),1)],34),ie(e("div",hl,g("–°–º–æ—Ç—Ä—é"),512),[[he,O.value==="watching"]])]),e("div",bl,[e("button",{class:E(["later-btn",{active:(xn=(Mn=u.movieInfo)==null?void 0:Mn.lists)==null?void 0:xn.isLater}]),onMouseenter:s[34]||(s[34]=z=>w("later")),onMouseleave:s[35]||(s[35]=z=>O.value=null),onClick:s[36]||(s[36]=z=>Fe(Q(Z).LATER))},s[61]||(s[61]=[e("span",{class:"material-icons"},"watch_later",-1)]),34),ie(e("div",wl,g("–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"),512),[[he,O.value==="later"]])]),e("div",Cl,[e("button",{class:E(["completed-btn",{active:(Tn=(Ln=u.movieInfo)==null?void 0:Ln.lists)==null?void 0:Tn.isCompleted}]),onMouseenter:s[37]||(s[37]=z=>w("completed")),onMouseleave:s[38]||(s[38]=z=>O.value=null),onClick:s[39]||(s[39]=z=>Fe(Q(Z).COMPLETED))},[e("span",_l,g((Sn=(In=u.movieInfo)==null?void 0:In.lists)!=null&&Sn.isCompleted?"check_circle":"check_circle_outline"),1)],34),ie(e("div",El,g("–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"),512),[[he,O.value==="completed"]])]),e("div",Ml,[e("button",{class:E(["abandoned-btn",{active:(Rn=(An=u.movieInfo)==null?void 0:An.lists)==null?void 0:Rn.isAbandoned}]),onMouseenter:s[40]||(s[40]=z=>w("abandoned")),onMouseleave:s[41]||(s[41]=z=>O.value=null),onClick:s[42]||(s[42]=z=>Fe(Q(Z).ABANDONED))},[e("span",xl,g(((Nn=(Pn=u.movieInfo)==null?void 0:Pn.lists)!=null&&Nn.isAbandoned,"not_interested")),1)],34),ie(e("div",Ll,g("–ë—Ä–æ—à–µ–Ω–æ"),512),[[he,O.value==="abandoned"]])])])):k("",!0)])),Ce(an,{ref_key:"notificationRef",ref:Ie},null,512)],64))}}},Vn=Ct(Tl,[["__scopeId","data-v-c601eedf"]]),Il={key:0,class:"carousel-container"},Sl={class:"carousel-wrapper"},Al=["onClick"],Rl=["src","alt"],Pl={class:"video-name"},Nl={key:0,class:"video-player"},jl=["src"],Bl={__name:"TrailerCarousel",props:{videos:{type:Array,required:!0},activeVideoIndex:{type:Number,default:null}},emits:["select"],setup(u,{emit:t}){const v=Jt(),n=F(()=>v.isMobile),I=u,A=t,y=p(I.activeVideoIndex),h=p(null),x=p(!1),R=p(!1),l=()=>{if(!h.value)return;const{scrollLeft:j,scrollWidth:N,clientWidth:C}=h.value;x.value=j>0,R.value=j<N-C-1},m=j=>{if(!h.value)return;const N=h.value.querySelector(".carousel-item");if(!N)return;const C=N.clientWidth+16;h.value.scrollBy({left:C*j,behavior:"smooth"})},L=j=>{y.value=j,A("select",I.videos[j])},b=()=>l(),$=p([]),T=async j=>{try{return(await fetch("https://img.youtube.com/vi/".concat(j,"/0.jpg"))).ok}catch(N){return!1}};return Nt(async()=>{const j=I.videos.map(async C=>await T(C.videoId)?C:null),N=await Promise.all(j);$.value=N.filter(Boolean),l(),window.addEventListener("resize",b)}),qe(()=>I.videos,async j=>{const N=j.map(async P=>await T(P.videoId)?P:null),C=await Promise.all(N);$.value=C.filter(Boolean)}),qe(()=>I.activeVideoIndex,j=>{y.value=j}),hn(()=>{window.removeEventListener("resize",b)}),(j,N)=>$.value.length?(i(),a("div",Il,[N[4]||(N[4]=e("h2",null,"–¢—Ä–µ–π–ª–µ—Ä—ã (YouTube)",-1)),e("div",Sl,[ie(e("button",{class:"scroll-button left",onClick:N[0]||(N[0]=C=>m(-1))},N[2]||(N[2]=[e("span",{class:"material-symbols-outlined"},"arrow_back_ios",-1)]),512),[[he,!n.value&&x.value]]),e("div",{ref_key:"carousel",ref:h,class:"carousel",onScroll:l},[(i(!0),a(de,null,Me($.value,(C,P)=>(i(),a("div",{key:P,class:"carousel-item",onClick:B=>L(P)},[e("img",{src:"https://img.youtube.com/vi/".concat(C.videoId,"/0.jpg"),alt:C.name},null,8,Rl),e("div",Pl,g(C.name),1)],8,Al))),128))],544),ie(e("button",{class:"scroll-button right",onClick:N[1]||(N[1]=C=>m(1))},N[3]||(N[3]=[e("span",{class:"material-symbols-outlined"},"arrow_forward_ios",-1)]),512),[[he,!n.value&&R.value]])]),y.value!==null?(i(),a("div",Nl,[e("iframe",{src:u.videos[y.value].iframeUrl,frameborder:"0",allowfullscreen:""},null,8,jl)])):k("",!0)])):k("",!0)}},$l=Ct(Bl,[["__scopeId","data-v-4a5806b3"]]),Ul={class:"rating-container"},Dl={class:"rating-display"},Hl={class:"rating-numbers"},Ol=["onClick","onMouseenter"],Vl={key:0,class:"tooltip-footer"},Fl={class:"rating-numbers mobile-rating-numbers"},zl=["onClick"],ql={key:0,class:"mobile-modal-footer"},Wl={__name:"MovieRating",props:{kpId:{type:String,required:!0},showDash:{type:Boolean,default:!1}},setup(u){const t=Jt(),v=en(),n=u,I=p(null),A=p(null),y=p(null),h=p(null),x=p(0),R=p(!1),l=p(!1);let m=null;const L=B=>B?B.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",b=()=>{m=setTimeout(()=>{R.value=!1,t.isMobile||(l.value=!1)},100)},$=()=>{m&&(clearTimeout(m),m=null),R.value=!0},T=()=>{t.isMobile&&(l.value=!l.value)},j=()=>{v.push("/login")},N=async()=>{try{const B=await Zn(n.kpId);A.value=B.user_rating,y.value=B.average_rating,h.value=L(B.vote_count)}catch(B){console.error("Error loading rating:",B)}},C=async B=>{var te;try{B===A.value?(await jn(n.kpId,null),A.value=null,I.value.showNotification("–û—Ü–µ–Ω–∫–∞ —É–¥–∞–ª–µ–Ω–∞")):(await jn(n.kpId,B),A.value=B,I.value.showNotification("–û—Ü–µ–Ω–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞")),t.isMobile&&(l.value=!1),N()}catch(X){console.error("Error setting rating:",X),((te=X.response)==null?void 0:te.status)===401?I.value.showNotification('–î–ª—è –æ—Ü–µ–Ω–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:j}):I.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ü–µ–Ω–∫–∏"),t.isMobile&&(l.value=!1)}},P=()=>{l.value=!1};return Nt(()=>{N()}),(B,te)=>(i(),a("div",Ul,[e("div",Dl,[e("a",{href:"#",class:E(["rating-link",{"has-rating":A.value}]),onMouseenter:te[0]||(te[0]=X=>R.value=!0),onMouseleave:b,onClick:Lt(T,["prevent"])},[te[3]||(te[3]=e("img",{src:go,alt:"ReYohoho",class:"rating-logo"},null,-1)),e("span",{class:E(["average-rating",Q(Zt)(y.value)])},g(y.value?y.value.toFixed(1).replace(/\.0$/,""):"‚Äî"),3)],34),ie(e("div",{class:"rating-tooltip",onMouseenter:$,onMouseleave:b},[e("div",Hl,[(i(),a(de,null,Me(10,X=>e("button",{key:X,class:E(["number-btn",{active:X===A.value,hover:X===x.value,"average-highlight":y.value&&X<=Math.round(y.value)}]),onClick:S=>C(X),onMouseenter:S=>x.value=X,onMouseleave:te[1]||(te[1]=S=>x.value=0)},g(X),43,Ol)),64))]),h.value?(i(),a("div",Vl,"–û—Ü–µ–Ω–æ–∫: "+g(h.value),1)):k("",!0)],544),[[he,(R.value||l.value)&&!Q(t).isMobile]])]),Ce(an,{ref_key:"notificationRef",ref:I},null,512),Q(t).isMobile&&l.value?(i(),a("div",{key:0,class:"mobile-modal-overlay",onClick:P},[e("div",{class:"mobile-modal",onClick:te[2]||(te[2]=Lt(()=>{},["stop"]))},[e("div",{class:"mobile-modal-header"},[te[4]||(te[4]=e("h3",null,"–û—Ü–µ–Ω–∏—Ç—å —Ñ–∏–ª—å–º",-1)),e("button",{class:"close-button",onClick:P},"√ó")]),e("div",Fl,[(i(),a(de,null,Me(10,X=>e("button",{key:X,class:E(["number-btn",{active:X===A.value,"average-highlight":y.value&&X<=Math.round(y.value)}]),onClick:S=>C(X)},g(X),11,zl)),64))]),h.value?(i(),a("div",ql,"–û—Ü–µ–Ω–æ–∫: "+g(h.value),1)):k("",!0)])])):k("",!0)]))}},Kl=Ct(Wl,[["__scopeId","data-v-2df64bd5"]]),Gl={name:"EmojiPicker",props:{isVisible:{type:Boolean,default:!1}},emits:["emoji-selected","mouse-enter","mouse-leave","close"],data(){return{activeCategory:"smileys",categories:[{name:"smileys",icon:"üòÄ",emojis:["üòÄ","üòÉ","üòÑ","üòÅ","üòÜ","üòÖ","üòÇ","ü§£","üòä","üòá","üôÇ","üôÉ","üòâ","üòå","üòç","ü•∞","üòò","üòó","üòô","üòö","üòã","üòõ","üòù","üòú","ü§™","ü§®","üßê","ü§ì","üòé","ü§©","ü•≥"]},{name:"emotions",icon:"üò¢",emojis:["üò•","üò¢","üò≠","üò§","üò†","üò°","ü§¨","ü§Ø","üò≥","ü•µ","ü•∂","üò±","üò®","üò∞","üò•","üòì","ü§ó","ü§î","ü§≠","ü§´","ü§•","üò∂","üòê","üòë","üò¨","üôÑ","üòØ","üò¶","üòß","üòÆ","üò≤"]},{name:"gestures",icon:"üëç",emojis:["üëç","üëé","üëå","ü§å","ü§è","‚úåÔ∏è","ü§û","ü§ü","ü§ò","ü§ô","üëà","üëâ","üëÜ","üñï","üëá","‚òùÔ∏è","üëè","üôå","üëê","ü§≤","ü§ù","üôè","‚úçÔ∏è","üí™","ü¶æ","ü¶ø","ü¶µ","ü¶∂","üëÇ","ü¶ª","üëÉ"]},{name:"hearts",icon:"‚ù§Ô∏è",emojis:["‚ù§Ô∏è","üß°","üíõ","üíö","üíô","üíú","ü§é","üñ§","ü§ç","üíî","‚ù£Ô∏è","üíï","üíû","üíì","üíó","üíñ","üíò","üíù","üíü","‚ô•Ô∏è","üíØ","üí¢","üí•","üí´","üí¶","üí®","üï≥Ô∏è","üí£","üí¨","üëÅÔ∏è‚Äçüó®Ô∏è","üó®Ô∏è"]},{name:"objects",icon:"üéâ",emojis:["üéâ","üéä","üéà","üéÅ","üéÄ","üéÇ","üç∞","üßÅ","üç≠","üç¨","üç´","üç©","üç™","üçï","üçî","üçü","üå≠","ü•™","üåÆ","üåØ","ü•ô","ü•ö","üç≥","ü•ò","üç≤","ü•ó","üçø","üßà","üßÄ","ü•®","ü•Ø"]}]}},computed:{currentEmojis(){const u=this.categories.find(t=>t.name===this.activeCategory);return u?u.emojis:[]}},methods:{selectEmoji(u){this.$emit("emoji-selected",u)}}},Yl={class:"emoji-categories"},Zl=["onClick"],Xl={class:"emoji-grid"},Ql=["onClick"];function Jl(u,t,v,n,I,A){return v.isVisible?(i(),a("div",{key:0,class:"emoji-picker",onMouseenter:t[1]||(t[1]=y=>u.$emit("mouse-enter")),onMouseleave:t[2]||(t[2]=y=>u.$emit("mouse-leave"))},[e("button",{class:"close-btn mobile-only",onClick:t[0]||(t[0]=y=>u.$emit("close"))},t[3]||(t[3]=[e("i",{class:"fas fa-times"},null,-1)])),e("div",Yl,[(i(!0),a(de,null,Me(I.categories,y=>(i(),a("button",{key:y.name,onClick:h=>I.activeCategory=y.name,class:E([{active:I.activeCategory===y.name},"category-btn"]),type:"button"},g(y.icon),11,Zl))),128))]),e("div",Xl,[(i(!0),a(de,null,Me(A.currentEmojis,y=>(i(),a("button",{key:y,onClick:h=>A.selectEmoji(y),class:"emoji-btn",type:"button"},g(y),9,Ql))),128))])],32)):k("",!0)}const bn=Ct(Gl,[["render",Jl],["__scopeId","data-v-209132f3"]]),es=async u=>{const t=await Xn();return await u(t)},ts=async u=>{const{data:t}=await es(v=>v.get("/search_emotes/".concat(u)));return t.emotes||[]},ns={name:"ImagePicker",props:{isVisible:{type:Boolean,required:!0},currentUser:{type:Object,default:null}},emits:["image-selected","mouse-enter","mouse-leave","close","login-required"],setup(u,{emit:t}){const v=p(""),n=p([]),I=p(null),A=p(!1),h=Qn(async m=>{if(!u.currentUser){console.warn("–ü–æ–ø—ã—Ç–∫–∞ –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏");return}if(!m.trim()){n.value=[],A.value=!1;return}A.value=!0;try{n.value=await ts(m)}catch(L){console.error("Error searching images:",L),n.value=[]}finally{A.value=!1}},300),x=()=>{if(!u.currentUser){t("login-required");return}v.value.trim()&&(A.value=!0),h(v.value)},R=m=>{if(!u.currentUser){t("login-required");return}t("image-selected",m),t("close")},l=()=>{setTimeout(()=>{u.isVisible&&t("mouse-leave")},100)};return qe(()=>u.isVisible,m=>{m&&(v.value="",n.value=[],A.value=!1)}),{searchQuery:v,images:n,searchInput:I,isLoading:A,handleSearch:x,selectImage:R,handleInputBlur:l}}},os={key:0,class:"auth-required"},ls={class:"auth-message"},ss={key:1},is={class:"image-picker-header"},as={class:"image-content"},rs={key:0,class:"loading-spinner"},us={key:1,class:"image-grid"},ds=["onClick"],cs=["src","alt"],vs={key:2,class:"no-images"},ms={key:3,class:"no-search"};function fs(u,t,v,n,I,A){return v.isVisible?(i(),a("div",{key:0,class:"image-picker",onMouseenter:t[7]||(t[7]=y=>u.$emit("mouse-enter")),onMouseleave:t[8]||(t[8]=y=>u.$emit("mouse-leave")),onClick:t[9]||(t[9]=Lt(()=>{},["stop"]))},[e("button",{class:"close-btn mobile-only",onClick:t[0]||(t[0]=y=>u.$emit("close"))},t[10]||(t[10]=[e("i",{class:"fas fa-times"},null,-1)])),v.currentUser?(i(),a("div",ss,[e("div",is,[ie(e("input",{ref:"searchInput",type:"text","onUpdate:modelValue":t[2]||(t[2]=y=>n.searchQuery=y),placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–º–∞–π–ª–∞ 7tv",class:"image-search-input",onInput:t[3]||(t[3]=(...y)=>n.handleSearch&&n.handleSearch(...y)),onClick:t[4]||(t[4]=Lt(()=>{},["stop"])),onFocus:t[5]||(t[5]=y=>u.$emit("mouse-enter")),onBlur:t[6]||(t[6]=(...y)=>n.handleInputBlur&&n.handleInputBlur(...y))},null,544),[[$t,n.searchQuery]])]),e("div",as,[n.isLoading?(i(),a("div",rs,t[14]||(t[14]=[e("div",{class:"spinner"},null,-1),e("p",null,"–ü–æ–∏—Å–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...",-1)]))):n.images.length>0?(i(),a("div",us,[(i(!0),a(de,null,Me(n.images,(y,h)=>(i(),a("div",{key:h,class:"image-item",onClick:x=>n.selectImage(y)},[e("img",{src:y,alt:"Image "+(h+1)},null,8,cs)],8,ds))),128))])):n.searchQuery.trim()?(i(),a("div",vs,t[15]||(t[15]=[e("p",null,"–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤",-1)]))):(i(),a("div",ms,t[16]||(t[16]=[e("p",null,"–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞",-1)])))])])):(i(),a("div",os,[e("div",ls,[t[11]||(t[11]=e("i",{class:"fas fa-lock"},null,-1)),t[12]||(t[12]=e("h3",null,"–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è",-1)),t[13]||(t[13]=e("p",null,"–î–ª—è –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç",-1)),e("button",{class:"login-button",onClick:t[1]||(t[1]=y=>u.$emit("login-required"))},"–í–æ–π—Ç–∏")])]))],32)):k("",!0)}const wn=Ct(ns,[["render",fs],["__scopeId","data-v-f33eb3f6"]]),ps={name:"LinkModal",props:{isVisible:{type:Boolean,default:!1},selectedText:{type:String,default:""}},emits:["close","submit"],setup(u,{emit:t}){const v=p(""),n=p(""),I=p(null),A=p(null),y=F(()=>/^https?:\/\/.+/.test(v.value.trim())&&n.value.trim()),h=()=>{t("close"),R()},x=()=>{y.value&&(t("submit",{url:v.value.trim(),title:n.value.trim()}),h())},R=()=>{v.value="",n.value=""},l=m=>{var L;m.key==="Enter"?(m.preventDefault(),y.value?x():m.target===I.value&&v.value.trim()&&((L=A.value)==null||L.focus())):m.key==="Escape"&&h()};return qe(()=>u.isVisible,m=>{m&&(u.selectedText.trim()&&(n.value=u.selectedText.trim()),et(()=>{var L;(L=I.value)==null||L.focus()}))}),{linkUrl:v,linkTitle:n,urlInput:I,titleInput:A,isValidLink:y,closeModal:h,submitLink:x,handleKeydown:l}}},gs={class:"link-modal-header"},ys={class:"link-modal-content"},ks={class:"form-group"},hs={class:"form-group"},bs={class:"link-modal-footer"},ws=["disabled"];function Cs(u,t,v,n,I,A){return v.isVisible?(i(),a("div",{key:0,class:"link-modal-overlay",onClick:t[8]||(t[8]=(...y)=>n.closeModal&&n.closeModal(...y))},[e("div",{class:"link-modal",onClick:t[7]||(t[7]=Lt(()=>{},["stop"]))},[e("div",gs,[t[10]||(t[10]=e("h3",null,"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É",-1)),e("button",{class:"close-button",onClick:t[0]||(t[0]=(...y)=>n.closeModal&&n.closeModal(...y))},t[9]||(t[9]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",ys,[e("div",ks,[t[11]||(t[11]=e("label",{for:"link-url"},"URL —Å—Å—ã–ª–∫–∏:",-1)),ie(e("input",{id:"link-url",ref:"urlInput","onUpdate:modelValue":t[1]||(t[1]=y=>n.linkUrl=y),type:"url",placeholder:"https://example.com",class:"link-input",onKeydown:t[2]||(t[2]=(...y)=>n.handleKeydown&&n.handleKeydown(...y))},null,544),[[$t,n.linkUrl]])]),e("div",hs,[t[12]||(t[12]=e("label",{for:"link-title"},"–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏:",-1)),ie(e("input",{id:"link-title",ref:"titleInput","onUpdate:modelValue":t[3]||(t[3]=y=>n.linkTitle=y),type:"text",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è",class:"link-input",onKeydown:t[4]||(t[4]=(...y)=>n.handleKeydown&&n.handleKeydown(...y))},null,544),[[$t,n.linkTitle]])])]),e("div",bs,[e("button",{class:"cancel-button",onClick:t[5]||(t[5]=(...y)=>n.closeModal&&n.closeModal(...y))},"–û—Ç–º–µ–Ω–∞"),e("button",{class:"submit-button",disabled:!n.isValidLink,onClick:t[6]||(t[6]=(...y)=>n.submitLink&&n.submitLink(...y))},"–î–æ–±–∞–≤–∏—Ç—å",8,ws)])])])):k("",!0)}const Cn=Ct(ps,[["render",Cs],["__scopeId","data-v-a794d83f"]]);function _s(){const u=p(!1),t=p(!1),v=p(!1),n=()=>{t.value=!0},I=()=>{t.value=!1,setTimeout(()=>{!t.value&&!v.value&&(u.value=!1)},300)},A=()=>{v.value=!0,u.value=!0},y=()=>{v.value=!1,setTimeout(()=>{!t.value&&!v.value&&(u.value=!1)},300)},h=()=>{u.value=!1};return{showEmojiPicker:u,isEmojiHovered:t,isButtonHovered:v,handleEmojiMouseEnter:n,handleEmojiMouseLeave:I,handleButtonMouseEnter:A,handleButtonMouseLeave:y,closeEmojiPicker:h,insertEmoji:(l,m,L,b)=>{const $=m.value;if($){const T=$.selectionStart,j=$.selectionEnd,N=L.value.substring(0,T),C=L.value.substring(j),P=N+l+C;b(P),et(()=>{$.focus(),$.setSelectionRange(T+l.length,T+l.length),$.style.height&&($.style.height="auto",$.style.height="".concat(Math.min($.scrollHeight,200),"px"))})}else b(L.value+l)},handleGlobalClick:l=>{!l.target.closest(".emoji-picker")&&!l.target.closest(".emoji-button-inline")&&h()}}}function Es(){const u=p(!1),t=p(!1),v=p(!1),n=()=>{t.value=!0},I=()=>{t.value=!1,setTimeout(()=>{!t.value&&!v.value&&(u.value=!1)},300)},A=()=>{v.value=!0,u.value=!0},y=()=>{v.value=!1,setTimeout(()=>{!t.value&&!v.value&&(u.value=!1)},300)},h=()=>{u.value=!1};return{showImagePicker:u,isImageHovered:t,isButtonHovered:v,handleImageMouseEnter:n,handleImageMouseLeave:I,handleImageButtonMouseEnter:A,handleButtonMouseLeave:y,closeImagePicker:h,insertImage:(l,m,L,b)=>{const $=m.value;if($){const T=$.selectionStart,j=$.selectionEnd,N="[img]".concat(l,"[/img]"),C=L.value.slice(0,T)+N+L.value.slice(j);b(C),et(()=>{$.focus(),$.setSelectionRange(T+N.length,T+N.length),$.style.height&&($.style.height="auto",$.style.height="".concat(Math.min($.scrollHeight,200),"px"))})}else{const T="[img]".concat(l,"[/img]");b(L.value+T)}},handleGlobalClick:l=>{!l.target.closest(".image-picker")&&!l.target.closest(".emoji-button-inline")&&h()}}}function Ms(){const u=p(!1),t=p("");return{showLinkModal:u,selectedTextForLink:t,insertLink:(y,h)=>{const x=y.value;if(x){const R=x.selectionStart,l=x.selectionEnd,m=h.value.slice(R,l);t.value=m.trim()||""}u.value=!0},insertLinkFromModal:(y,h,x,R)=>{const l=h.value;if(l){const m=l.selectionStart,L=l.selectionEnd,b="[link=".concat(y.url,"]").concat(y.title,"[/link]"),$=x.value.slice(0,m)+b+x.value.slice(L);R($),et(()=>{l.focus(),l.setSelectionRange(m+b.length,m+b.length),l.style.height&&(l.style.height="auto",l.style.height="".concat(Math.min(l.scrollHeight,200),"px"))})}},closeLinkModal:()=>{u.value=!1},insertSpoiler:(y,h,x)=>{const R=y.value;if(R){const l=R.selectionStart,m=R.selectionEnd,L=h.value.slice(l,m);let b;L.trim()?b="[spoiler]".concat(L,"[/spoiler]"):b="[spoiler][/spoiler]";const $=h.value.slice(0,l)+b+h.value.slice(m);x($),et(()=>{if(R.focus(),L.trim())R.setSelectionRange(l+b.length,l+b.length);else{const T=l+9;R.setSelectionRange(T,T)}R.style.height&&(R.style.height="auto",R.style.height="".concat(Math.min(R.scrollHeight,200),"px"))})}}}}function xs(){return{autoResize:v=>{const n=v==null?void 0:v.target;n&&(n.style.height="auto",n.style.height="".concat(Math.min(n.scrollHeight,200),"px"))},autoResizeElement:v=>{v&&(v.style.height="auto",v.style.height="".concat(Math.min(v.scrollHeight,200),"px"))}}}function _n(){const u=_s(),t=Es(),v=Ms(),{autoResize:n,autoResizeElement:I}=xs(),A=()=>{u.isButtonHovered.value=!0,t.isButtonHovered.value=!0,u.showEmojiPicker.value=!0,t.showImagePicker.value=!1},y=()=>{u.isButtonHovered.value=!0,t.isButtonHovered.value=!0,t.showImagePicker.value=!0,u.showEmojiPicker.value=!1},h=()=>{u.isButtonHovered.value=!1,t.isButtonHovered.value=!1,setTimeout(()=>{!u.isEmojiHovered.value&&!t.isImageHovered.value&&!u.isButtonHovered.value&&!t.isButtonHovered.value&&(u.showEmojiPicker.value=!1,t.showImagePicker.value=!1)},300)},x=()=>{u.showEmojiPicker.value=!1,t.showImagePicker.value=!1},R=T=>{!T.target.closest(".emoji-picker")&&!T.target.closest(".image-picker")&&!T.target.closest(".emoji-button-inline")&&x()},l=(T,j,N,C)=>{u.insertEmoji(T,j,N,C)},m=(T,j,N,C)=>{t.insertImage(T,j,N,C)},L=(T,j,N)=>{v.insertLink(T,j,N)},b=(T,j,N,C)=>{v.insertLinkFromModal(T,j,N,C)},$=(T,j,N)=>{v.insertSpoiler(T,j,N)};return Nt(()=>{document.addEventListener("click",R)}),hn(()=>{document.removeEventListener("click",R)}),{showEmojiPicker:u.showEmojiPicker,handleEmojiMouseEnter:u.handleEmojiMouseEnter,handleEmojiMouseLeave:u.handleEmojiMouseLeave,closeEmojiPicker:u.closeEmojiPicker,showImagePicker:t.showImagePicker,handleImageMouseEnter:t.handleImageMouseEnter,handleImageMouseLeave:t.handleImageMouseLeave,closeImagePicker:t.closeImagePicker,showLinkModal:v.showLinkModal,selectedTextForLink:v.selectedTextForLink,closeLinkModal:v.closeLinkModal,handleButtonMouseEnter:A,handleImageButtonMouseEnter:y,handleButtonMouseLeave:h,closeAllPickers:x,insertEmojiUniversal:l,insertImageUniversal:m,insertLinkUniversal:L,insertLinkFromModalUniversal:b,insertSpoilerUniversal:$,autoResize:n,autoResizeElement:I}}const Ls=u=>u===1?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π":u>=2&&u<=4?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è":"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤",Ts=u=>{if(!u)return"?";const t=u.split(" ");return t.length===1?u.slice(0,2).toUpperCase():(t[0][0]+t[t.length-1][0]).toUpperCase()},Is={name:"CommentItem",components:{EmojiPicker:bn,ImagePicker:wn,LinkModal:Cn},props:{comment:{type:Object,required:!0,default:()=>({username:"–ê–Ω–æ–Ω–∏–º",user_avatar:null,content:"",created_at:new Date().toISOString(),rating:0,replies:[]})},currentUser:{type:Object,required:!0,default:()=>({})},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate"],setup(u,{emit:t}){var $e,Ze;const v=en(),n=F(()=>{var w;return u.editingCommentId===((w=u.comment)==null?void 0:w.id)}),I=p((($e=u.comment)==null?void 0:$e.content)||""),A=p(((Ze=u.comment)==null?void 0:Ze.user_rating)||0),y=p(null),h=p(null),{showEmojiPicker:x,showImagePicker:R,showLinkModal:l,selectedTextForLink:m,handleEmojiMouseEnter:L,handleEmojiMouseLeave:b,handleImageMouseEnter:$,handleImageMouseLeave:T,handleButtonMouseEnter:j,handleImageButtonMouseEnter:N,handleButtonMouseLeave:C,closeEmojiPicker:P,closeImagePicker:B,closeLinkModal:te,insertEmojiUniversal:X,insertImageUniversal:S,insertLinkUniversal:O,insertLinkFromModalUniversal:ce,insertSpoilerUniversal:fe,autoResize:Ie}=_n(),{formatContentWithTruncation:tt}=Wn();Nt(async()=>{var w;if((w=u.comment)!=null&&w.user_avatar){const J=await Jn();y.value="".concat(J).concat(u.comment.user_avatar)}});const q=F(()=>{var w;return u.currentUser&&((w=u.comment)==null?void 0:w.user_id)===u.currentUser.id}),ge=F(()=>{var w;return u.currentUser&&((w=u.comment)==null?void 0:w.user_id)===u.currentUser.id||u.currentUser&&u.currentUser.is_admin===1}),se=F(()=>{var w,J,He;return((w=u.comment)==null?void 0:w.updated_at)&&((J=u.comment)==null?void 0:J.updated_at)!==((He=u.comment)==null?void 0:He.created_at)}),ae=F(()=>{var w,J;return(w=u.comment)!=null&&w.is_deleted?!1:(((J=u.comment)==null?void 0:J.rating)||0)<=-3}),_e=F(()=>ae.value),ut=p(!1),pt=F(()=>{var w,J;return(w=u.comment)!=null&&w.is_deleted?null:(((J=u.comment)==null?void 0:J.rating)||0)<=-3?"lowRating":null}),ke=()=>{var w,J;t("start-edit",(w=u.comment)==null?void 0:w.id),I.value=((J=u.comment)==null?void 0:J.content)||"",et(()=>{h.value&&(h.value.focus(),Ie({target:h.value}))})},ye=()=>{var w;t("cancel-edit"),I.value=((w=u.comment)==null?void 0:w.content)||""},xe=()=>{var w;I.value.trim()&&t("edit",(w=u.comment)==null?void 0:w.id,I.value.trim())},Ke=()=>{var w;confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π?")&&t("delete",(w=u.comment)==null?void 0:w.id)},Ge=w=>{var J,He;A.value===w?(A.value=0,t("rate",(J=u.comment)==null?void 0:J.id,w)):(A.value=w,t("rate",(He=u.comment)==null?void 0:He.id,w))},Le=w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),xe())},le=F(()=>{var w;return tt((w=u.comment)==null?void 0:w.content)}),De=()=>{console.log("Avatar load error, falling back to initials"),y.value=null,et(()=>{const w=document.querySelector(".avatar-placeholder");w&&(w.style.display="flex")})},Se=()=>{v.push("/login")},_t=w=>{X(w,h,I,J=>{I.value=J})},gt=w=>{S(w,h,I,J=>{I.value=J})},Ne=()=>{fe(h,I,w=>{I.value=w})},Ye=()=>{O(h,I,w=>{I.value=w})},K=w=>{ce(w,h,I,J=>{I.value=J})},nt=w=>{Ie(w)};return qe(I,()=>{n.value&&h.value&&et(()=>{nt({target:h.value})})}),{isEditing:n,editContent:I,userRating:A,isCommentOwner:q,canDeleteComment:ge,isCommentEdited:se,formatDate:Kn,formatRelativeTime:yo,startEdit:ke,cancelEdit:ye,saveEdit:xe,confirmDelete:Ke,rateComment:Ge,avatarUrl:y,getInitials:Ts,handleEditKeydown:Le,isCommentHidden:_e,showHiddenComment:ut,hiddenCommentReason:pt,formattedContent:le,autoResizeEdit:nt,editTextarea:h,showEmojiPicker:x,showImagePicker:R,insertEmojiEdit:_t,insertImageEdit:gt,insertSpoilerEdit:Ne,insertLinkEdit:Ye,handleEmojiMouseEnter:L,handleEmojiMouseLeave:b,handleImageMouseEnter:$,handleImageMouseLeave:T,closeEmojiPicker:P,closeImagePicker:B,handleButtonMouseEnter:j,handleButtonMouseLeave:C,handleImageButtonMouseEnter:N,handleAvatarError:De,openLogin:Se,showLinkModal:l,selectedTextForLink:m,insertLinkFromModal:K,closeLinkModal:te}}},Ss=["data-comment-id"],As={class:"comment-header"},Rs={class:"user-info"},Ps={class:"user-avatar"},Ns=["src","alt"],js={class:"user-details"},Bs={class:"username"},$s={key:0,class:"user-rating"},Us=["title"],Ds=["title"],Hs={class:"comment-content"},Os={key:0,class:"hidden-comment-warning"},Vs={key:1},Fs={key:0,class:"deleted-comment"},zs={key:1},qs={key:0,class:"edit-form"},Ws={class:"edit-textarea-container"},Ks={class:"edit-footer"},Gs={class:"edit-actions"},Ys=["disabled"],Zs={class:"character-counter-container"},Xs={key:1,class:"comment-text-container"},Qs=["innerHTML"],Js={class:"comment-footer"},ei={class:"comment-actions"},ti={class:"rating-buttons"},ni={class:"action-buttons"};function oi(u,t,v,n,I,A){var l,m,L,b,$,T,j,N,C,P,B,te,X,S,O,ce,fe,Ie,tt;const y=We("router-link"),h=We("EmojiPicker"),x=We("ImagePicker"),R=We("LinkModal");return i(),a("div",{class:"comment-item","data-comment-id":(l=v.comment)==null?void 0:l.id},[e("div",As,[e("div",Rs,[Ce(y,{to:{path:"/lists/".concat((m=v.comment)==null?void 0:m.user_id)},target:"_blank",rel:"noopener noreferrer",class:"user-avatar-link"},{default:yn(()=>{var q,ge;return[e("div",Ps,[n.avatarUrl?(i(),a("img",{key:0,src:n.avatarUrl,alt:((q=v.comment)==null?void 0:q.username)||"–ê–Ω–æ–Ω–∏–º",onError:t[0]||(t[0]=(...se)=>n.handleAvatarError&&n.handleAvatarError(...se)),onerror:"this.onerror=null; this.style.display='none'; this.nextElementSibling.style.display='flex';"},null,40,Ns)):(i(),a("div",{key:1,class:"avatar-placeholder",style:Xt({display:n.avatarUrl?"none":"flex"})},g(n.getInitials(((ge=v.comment)==null?void 0:ge.username)||"–ê–Ω–æ–Ω–∏–º")),5))])]}),_:1},8,["to"]),e("div",js,[Ce(y,{to:{path:"/lists/".concat((L=v.comment)==null?void 0:L.user_id)},target:"_blank",rel:"noopener noreferrer",class:"username-link"},{default:yn(()=>{var q;return[e("span",Bs,g(((q=v.comment)==null?void 0:q.username)||"–ê–Ω–æ–Ω–∏–º"),1)]}),_:1},8,["to"]),(b=v.comment)!=null&&b.user_movie_rating?(i(),a("span",$s,[t[18]||(t[18]=e("i",{class:"fas fa-star"},null,-1)),oe(" "+g(v.comment.user_movie_rating),1)])):k("",!0),e("span",{class:"date",title:n.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate(($=v.comment)==null?void 0:$.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(n.formatDate((T=v.comment)==null?void 0:T.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((j=v.comment)==null?void 0:j.created_at))},[oe(g(n.formatRelativeTime((N=v.comment)==null?void 0:N.created_at))+" ",1),n.isCommentEdited?(i(),a("i",{key:0,class:"fas fa-pencil-alt edit-icon",title:n.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((C=v.comment)==null?void 0:C.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(n.formatDate((P=v.comment)==null?void 0:P.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((B=v.comment)==null?void 0:B.created_at))},null,8,Ds)):k("",!0)],8,Us)])])]),e("div",Hs,[!((te=v.comment)!=null&&te.is_deleted)&&n.isCommentHidden&&!n.showHiddenComment?(i(),a("div",Os,[n.hiddenCommentReason==="lowRating"?(i(),a("p",{key:0,class:"warning-text",onClick:t[1]||(t[1]=q=>n.showHiddenComment=!0)},t[19]||(t[19]=[e("i",{class:"fas fa-eye-slash"},null,-1),oe(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–∫—Ä—ã—Ç –∏–∑-–∑–∞ –Ω–∏–∑–∫–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å. ")]))):k("",!0)])):(i(),a("div",Vs,[(X=v.comment)!=null&&X.is_deleted?(i(),a("div",Fs,t[20]||(t[20]=[e("p",{class:"deleted-message"},[e("i",{class:"fas fa-trash"}),oe(" –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —É–¥–∞–ª—ë–Ω ")],-1)]))):(i(),a("div",zs,[n.isEditing?(i(),a("div",qs,[e("div",Ws,[ie(e("textarea",{ref:"editTextarea","onUpdate:modelValue":t[2]||(t[2]=q=>n.editContent=q),class:"edit-textarea",rows:"3",maxlength:"1500",onKeydown:t[3]||(t[3]=(...q)=>n.handleEditKeydown&&n.handleEditKeydown(...q)),onInput:t[4]||(t[4]=(...q)=>n.autoResizeEdit&&n.autoResizeEdit(...q))},null,544),[[$t,n.editContent]])]),e("div",Ks,[e("div",Gs,[e("button",{onClick:t[5]||(t[5]=(...q)=>n.cancelEdit&&n.cancelEdit(...q)),class:"cancel-button"},"–û—Ç–º–µ–Ω–∞"),e("button",{onClick:t[6]||(t[6]=(...q)=>n.saveEdit&&n.saveEdit(...q)),class:"save-button",disabled:!n.editContent.trim()||n.editContent.length>1500}," –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ",8,Ys)]),e("div",Zs,[e("div",{class:E(["character-counter-inline",{"near-limit":n.editContent.length>1400,"at-limit":n.editContent.length>=1500}])},g(n.editContent.length)+"/1500 ",3),e("button",{type:"button",class:E(["emoji-button-inline",{active:n.showEmojiPicker}]),onMouseenter:t[7]||(t[7]=(...q)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...q)),onMouseleave:t[8]||(t[8]=(...q)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...q))}," üòä ",34),e("button",{type:"button",class:E(["emoji-button-inline",{active:n.showImagePicker}]),onMouseenter:t[9]||(t[9]=(...q)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...q)),onMouseleave:t[10]||(t[10]=(...q)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...q))},t[21]||(t[21]=[Qt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-f1c85dfc><g id="logo" data-v-f1c85dfc><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-f1c85dfc></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-f1c85dfc></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-f1c85dfc></path></g></svg>',1)]),34),e("button",{type:"button",class:"emoji-button-inline spoiler-button",onClick:t[11]||(t[11]=(...q)=>n.insertSpoilerEdit&&n.insertSpoilerEdit(...q)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},t[22]||(t[22]=[e("i",{class:"fas fa-eye-slash"},null,-1)])),e("button",{type:"button",class:"emoji-button-inline link-button",onClick:t[12]||(t[12]=(...q)=>n.insertLinkEdit&&n.insertLinkEdit(...q)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},t[23]||(t[23]=[e("i",{class:"fas fa-link"},null,-1)])),Ce(h,{"is-visible":n.showEmojiPicker,onEmojiSelected:n.insertEmojiEdit,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),Ce(x,{"is-visible":n.showImagePicker,"current-user":v.currentUser,onImageSelected:n.insertImageEdit,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:n.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),Ce(R,{"is-visible":n.showLinkModal,"selected-text":n.selectedTextForLink,onClose:n.closeLinkModal,onSubmit:n.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):(i(),a("div",Xs,[e("p",{class:"comment-text",innerHTML:n.formattedContent},null,8,Qs)]))]))]))]),e("div",Js,[e("div",ei,[e("div",ti,[!n.isCommentOwner&&!((S=v.comment)!=null&&S.is_deleted)?(i(),a("button",{key:0,onClick:t[13]||(t[13]=q=>n.rateComment(1)),class:E(["rating-button",{"rated-up":n.userRating===1}])},t[24]||(t[24]=[e("i",{class:"fas fa-thumbs-up"},null,-1)]),2)):k("",!0),e("span",{class:E(["rating-count",{"rating-positive":n.userRating===1,"rating-negative":n.userRating===-1}])},g(((O=v.comment)==null?void 0:O.rating)||0),3),!n.isCommentOwner&&!((ce=v.comment)!=null&&ce.is_deleted)?(i(),a("button",{key:1,onClick:t[14]||(t[14]=q=>n.rateComment(-1)),class:E(["rating-button",{"rated-down":n.userRating===-1}])},t[25]||(t[25]=[e("i",{class:"fas fa-thumbs-down"},null,-1)]),2)):k("",!0)]),e("div",ni,[!v.currentUser||v.currentUser.allow_comments===1?(i(),a("button",{key:0,onClick:t[15]||(t[15]=q=>u.$emit("reply",v.comment)),class:"action-button reply-button"},t[26]||(t[26]=[e("i",{class:"fas fa-reply"},null,-1)]))):k("",!0),n.isCommentOwner&&!((fe=v.comment)!=null&&fe.is_deleted)&&!n.isEditing&&((Ie=v.currentUser)==null?void 0:Ie.allow_comments)===1?(i(),a("button",{key:1,onClick:t[16]||(t[16]=(...q)=>n.startEdit&&n.startEdit(...q)),class:"action-button edit-button"},t[27]||(t[27]=[e("i",{class:"fas fa-edit"},null,-1)]))):k("",!0),n.canDeleteComment&&!((tt=v.comment)!=null&&tt.is_deleted)?(i(),a("button",{key:2,onClick:t[17]||(t[17]=(...q)=>n.confirmDelete&&n.confirmDelete(...q)),class:"action-button delete-button"},t[28]||(t[28]=[e("i",{class:"fas fa-trash"},null,-1)]))):k("",!0)])])])],8,Ss)}const li=Ct(Is,[["render",oi],["__scopeId","data-v-f1c85dfc"]]),si={name:"CommentThread",components:{CommentItem:li,EmojiPicker:bn,ImagePicker:wn,LinkModal:Cn},props:{comment:{type:Object,required:!0},currentUser:{type:Object,required:!0},replyTo:{type:Object,default:null},replyContent:{type:String,default:""},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate","submit-reply","cancel-reply","update-reply-content","reply-keydown"],setup(u,{emit:t}){const v=p(null),n=p(!0),{showEmojiPicker:I,showImagePicker:A,showLinkModal:y,selectedTextForLink:h,handleEmojiMouseEnter:x,handleEmojiMouseLeave:R,handleImageMouseEnter:l,handleImageMouseLeave:m,handleButtonMouseEnter:L,handleImageButtonMouseEnter:b,handleButtonMouseLeave:$,closeEmojiPicker:T,closeImagePicker:j,closeLinkModal:N,insertEmojiUniversal:C,insertImageUniversal:P,insertLinkUniversal:B,insertLinkFromModalUniversal:te,insertSpoilerUniversal:X}=_n(),S=se=>{t("update-reply-content",se.target.value);const ae=se.target;ae&&(ae.style.height="auto",ae.style.height="".concat(Math.min(ae.scrollHeight,200),"px"))},O={get value(){return u.replyContent},set value(se){t("update-reply-content",se)}};return{replyTextarea:v,showEmojiPicker:I,showImagePicker:A,isCollapsed:n,insertEmoji:se=>{C(se,v,O,ae=>{t("update-reply-content",ae)})},insertImage:se=>{P(se,v,O,ae=>{t("update-reply-content",ae)})},insertSpoiler:()=>{X(v,O,se=>{t("update-reply-content",se)})},handleEmojiMouseEnter:x,handleEmojiMouseLeave:R,handleImageMouseEnter:l,handleImageMouseLeave:m,handleButtonMouseEnter:L,handleButtonMouseLeave:$,closeEmojiPicker:T,closeImagePicker:j,handleImageButtonMouseEnter:b,handleReplyInput:S,toggleCollapsed:()=>{n.value=!n.value},showLinkModal:y,selectedTextForLink:h,insertLink:()=>{B(v,O,se=>{t("update-reply-content",se)})},closeLinkModal:N,insertLinkFromModal:se=>{te(se,v,O,ae=>{t("update-reply-content",ae)})}}},computed:{canReply(){return this.currentUser?this.currentUser.allow_comments===1:!0},getReplyPlaceholder(){return this.currentUser?this.currentUser.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç..."},formattedContent(){const{formatContent:u}=Wn();return u(this.comment.content)}}},ii={class:"comment-thread"},ai={key:0,class:"reply-form"},ri={class:"textarea-container"},ui=["value","placeholder","disabled"],di={class:"reply-footer"},ci={class:"reply-actions"},vi=["disabled"],mi={class:"character-counter-container"},fi=["disabled"],pi={key:1,class:"replies-container"},gi=["title"],yi={class:"replies-count"},ki=["title"],hi={key:0,class:"replies-content"};function bi(u,t,v,n,I,A){const y=We("CommentItem"),h=We("EmojiPicker"),x=We("ImagePicker"),R=We("LinkModal"),l=We("CommentThread",!0);return i(),a("div",ii,[Ce(y,{comment:v.comment,"current-user":v.currentUser,"editing-comment-id":v.editingCommentId,onReply:t[0]||(t[0]=m=>u.$emit("reply",m)),onStartEdit:t[1]||(t[1]=m=>u.$emit("start-edit",m)),onCancelEdit:t[2]||(t[2]=m=>u.$emit("cancel-edit")),onEdit:t[3]||(t[3]=(m,L)=>u.$emit("edit",m,L)),onDelete:t[4]||(t[4]=m=>u.$emit("delete",m)),onRate:t[5]||(t[5]=(m,L)=>u.$emit("rate",m,L))},null,8,["comment","current-user","editing-comment-id"]),v.replyTo&&v.replyTo.id===v.comment.id?(i(),a("div",ai,[e("div",ri,[e("textarea",{ref:"replyTextarea",class:"comment-textarea",value:v.replyContent,placeholder:A.getReplyPlaceholder,disabled:v.currentUser&&v.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:t[6]||(t[6]=(...m)=>n.handleReplyInput&&n.handleReplyInput(...m)),onKeydown:t[7]||(t[7]=m=>u.$emit("reply-keydown",m))},null,40,ui)]),e("div",di,[e("div",ci,[e("button",{class:"cancel-reply",onClick:t[8]||(t[8]=m=>u.$emit("cancel-reply"))},"–û—Ç–º–µ–Ω–∞"),e("button",{class:"submit-button",disabled:!v.replyContent.trim()||v.replyContent.length>1500||v.currentUser&&v.currentUser.allow_comments!==1,onClick:t[9]||(t[9]=m=>u.$emit("submit-reply"))}," –û—Ç–≤–µ—Ç–∏—Ç—å ",8,vi)]),e("div",mi,[e("div",{class:E(["character-counter-inline",{"near-limit":v.replyContent.length>1400,"at-limit":v.replyContent.length>=1500}])},g(v.replyContent.length)+"/1500 ",3),e("button",{type:"button",class:E(["emoji-button-inline",{active:n.showEmojiPicker}]),onMouseenter:t[10]||(t[10]=(...m)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...m)),onMouseleave:t[11]||(t[11]=(...m)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...m))}," üòä ",34),e("button",{type:"button",class:E(["emoji-button-inline",{active:n.showImagePicker}]),onMouseenter:t[12]||(t[12]=(...m)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...m)),onMouseleave:t[13]||(t[13]=(...m)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...m))},t[29]||(t[29]=[Qt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-6c0fc347><g id="logo" data-v-6c0fc347><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-6c0fc347></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-6c0fc347></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-6c0fc347></path></g></svg>',1)]),34),e("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:v.currentUser&&v.currentUser.allow_comments!==1,onClick:t[14]||(t[14]=(...m)=>n.insertSpoiler&&n.insertSpoiler(...m)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},t[30]||(t[30]=[e("i",{class:"fas fa-eye-slash"},null,-1)]),8,fi),e("button",{type:"button",class:"emoji-button-inline link-button",onClick:t[15]||(t[15]=(...m)=>n.insertLink&&n.insertLink(...m)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},t[31]||(t[31]=[e("i",{class:"fas fa-link"},null,-1)])),Ce(h,{"is-visible":n.showEmojiPicker,onEmojiSelected:n.insertEmoji,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),Ce(x,{"is-visible":n.showImagePicker,"current-user":v.currentUser,onImageSelected:n.insertImage,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:t[16]||(t[16]=()=>u.$router.push("/login"))},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose"]),Ce(R,{"is-visible":n.showLinkModal,"selected-text":n.selectedTextForLink,onClose:n.closeLinkModal,onSubmit:n.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):k("",!0),v.comment.replies&&v.comment.replies.length>0?(i(),a("div",pi,[e("button",{class:"collapse-toggle",title:n.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:t[17]||(t[17]=(...m)=>n.toggleCollapsed&&n.toggleCollapsed(...m))},[e("span",{class:E(["collapse-icon",{expanded:!n.isCollapsed}])},t[32]||(t[32]=[e("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},[e("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1)]),2),e("span",yi,g(v.comment.replies.length)+" "+g(v.comment.replies.length===1?"–æ—Ç–≤–µ—Ç":"–æ—Ç–≤–µ—Ç–æ–≤"),1)],8,gi),e("div",{class:"vertical-line-clickable",title:n.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:t[18]||(t[18]=(...m)=>n.toggleCollapsed&&n.toggleCollapsed(...m))},[e("div",{class:E(["vertical-line-visual",{collapsed:n.isCollapsed}])},null,2)],8,ki),n.isCollapsed?k("",!0):(i(),a("div",hi,[(i(!0),a(de,null,Me(v.comment.replies,m=>(i(),xt(l,{key:m.id,comment:m,"current-user":v.currentUser,"reply-to":v.replyTo,"reply-content":v.replyContent,"editing-comment-id":v.editingCommentId,onReply:t[19]||(t[19]=L=>u.$emit("reply",L)),onStartEdit:t[20]||(t[20]=L=>u.$emit("start-edit",L)),onCancelEdit:t[21]||(t[21]=L=>u.$emit("cancel-edit")),onEdit:t[22]||(t[22]=(L,b)=>u.$emit("edit",L,b)),onDelete:t[23]||(t[23]=L=>u.$emit("delete",L)),onRate:t[24]||(t[24]=(L,b)=>u.$emit("rate",L,b)),onSubmitReply:t[25]||(t[25]=L=>u.$emit("submit-reply")),onCancelReply:t[26]||(t[26]=L=>u.$emit("cancel-reply")),onUpdateReplyContent:t[27]||(t[27]=L=>u.$emit("update-reply-content",L)),onReplyKeydown:t[28]||(t[28]=L=>u.$emit("reply-keydown",L))},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id"]))),128))]))])):k("",!0)])}const wi=Ct(si,[["render",bi],["__scopeId","data-v-6c0fc347"]]),Ci={name:"Comments",components:{CommentThread:wi,Notification:an,EmojiPicker:bn,ImagePicker:wn,LinkModal:Cn},props:{movieId:{type:[String,Number],required:!0}},setup(u){const t=kn(),v=en(),n=Jt(),I=p([]),A=p(""),y=p(null),h=p(""),x=p(null),R=p(t.user),l=p(null),m=p(null),L=p(n.isAutoShowComments),b=p(!1),$=p(3),T=p(n.commentsSortBy),j=p(T.value==="date"?"asc":"desc"),{showEmojiPicker:N,showImagePicker:C,showLinkModal:P,selectedTextForLink:B,handleEmojiMouseEnter:te,handleEmojiMouseLeave:X,handleImageMouseEnter:S,handleImageMouseLeave:O,handleButtonMouseEnter:ce,handleImageButtonMouseEnter:fe,handleButtonMouseLeave:Ie,closeEmojiPicker:tt,closeImagePicker:q,closeLinkModal:ge,insertEmojiUniversal:se,insertImageUniversal:ae,insertLinkUniversal:_e,insertLinkFromModalUniversal:ut,insertSpoilerUniversal:pt,autoResize:ke}=_n(),ye=F(()=>{const U=(ee=null)=>{const je=I.value.filter(ue=>ue.parent_id===ee).filter(ue=>!ue.is_deleted||ue.replies&&ue.replies.length>0);let be;return ee===null?be=je.sort((ue,Ae)=>{if(T.value==="rating"){const Xe=ue.rating||0,kt=Ae.rating||0;return Xe!==kt?j.value==="asc"?Xe-kt:kt-Xe:ue.id-Ae.id}return j.value==="asc"?ue.id-Ae.id:Ae.id-ue.id}):be=je.sort((ue,Ae)=>ue.id-Ae.id),be.map(ue=>({...ue,replies:U(ue.id)}))};return U()}),xe=F(()=>{const U=ee=>ee.reduce((je,be)=>je+1+U(be.replies||[]),0);return U(ye.value)}),Ke=F(()=>ye.value.slice(0,$.value)),Ge=F(()=>ye.value.length>$.value),Le=F(()=>ye.value.length-$.value),le=()=>{$.value=ye.value.length},De=U=>{T.value===U?j.value=j.value==="asc"?"desc":"asc":(T.value=U,j.value=U==="date"?"asc":"desc",n.setCommentsSortBy(U))},Se=async()=>{try{const U=await eo(u.movieId);I.value=U}catch(U){console.error("Failed to load comments:",U),l.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.")}},_t=async()=>{if(b.value)return;if(!t.token){l.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:w});return}if(R.value&&R.value.allow_comments!==1){l.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!A.value.replace(/\[spoiler\]\s*\[\/spoiler\]/g,"").replace(/\[img\]\s*\[\/img\]/g,"").replace(/\[link=[^\]]+\]\s*\[\/link\]/g,"").trim()){l.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º");return}if(A.value.length>1500){l.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await Bn(u.movieId,A.value.trim()),A.value="",await Se(),L.value=!0,et(()=>{m.value&&(m.value.focus(),m.value.style.height="auto"),setTimeout(()=>{const ee=document.querySelectorAll(".comment-item[data-comment-id]");if(ee.length>0){const je=Array.from(ee).map(be=>parseInt(be.getAttribute("data-comment-id"))).filter(be=>!isNaN(be));if(je.length>0){const be=Math.max(...je),ue=document.querySelector('[data-comment-id="'.concat(be,'"]'));ue&&ue.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}},300)})}catch(ee){console.error("Failed to create comment:",ee),l.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},gt=U=>{if(!t.token){l.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:w});return}x.value=null,y.value=U,h.value="",et(()=>{const ee=document.querySelector(".reply-form");ee&&ee.scrollIntoView({behavior:"smooth",block:"center"})})},Ne=async()=>{if(!t.token){l.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:w});return}if(R.value&&R.value.allow_comments!==1){l.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!(!h.value.trim()||!y.value)){if(h.value.length>1500){l.value.showNotification("–û—Ç–≤–µ—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await Bn(u.movieId,h.value.trim(),y.value.id);const U=y.value.id;await Se(),h.value="",y.value=null,et(()=>{setTimeout(()=>{const ee=document.querySelector('[data-comment-id="'.concat(U,'"]'));if(ee){const je=ee.querySelector(".replies-content");if(je){const be=je.querySelectorAll(".comment-item[data-comment-id]");if(be.length>0){const ue=Array.from(be).map(Ae=>parseInt(Ae.getAttribute("data-comment-id"))).filter(Ae=>!isNaN(Ae));if(ue.length>0){const Ae=Math.max(...ue),Xe=document.querySelector('[data-comment-id="'.concat(Ae,'"]'));Xe&&Xe.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}}}},300)})}catch(U){console.error("Error submitting reply:",U),l.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}}},Ye=async(U,ee)=>{if(!t.token){l.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:w});return}if(R.value&&R.value.allow_comments!==1){l.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(ee.length>1500){l.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await oo(U,ee.trim()),await Se(),x.value=null}catch(je){console.error("Failed to update comment:",je),l.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},K=async U=>{if(!t.token){l.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:w});return}try{await no(U),await Se()}catch(ee){console.error("Failed to delete comment:",ee),l.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},nt=async(U,ee)=>{if(!t.token){l.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:w});return}try{await to(U,ee),await Se()}catch(je){console.error("Failed to rate comment:",je),l.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ü–µ–Ω–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},$e=U=>{b.value||N.value||U.key==="Enter"&&!U.shiftKey&&(U.preventDefault(),_t())},Ze=U=>{U.key==="Enter"&&!U.shiftKey&&(U.preventDefault(),Ne())},w=()=>{v.push("/login")},J=U=>{b.value=!0,se(U,m,A,ee=>{A.value=ee}),setTimeout(()=>{b.value=!1},100)},He=U=>{ae(U,m,A,ee=>{A.value=ee})},Ee=()=>{pt(m,A,U=>{A.value=U})},dt=()=>{_e(m,A,U=>{A.value=U})},Tt=U=>{ut(U,m,A,ee=>{A.value=ee})},Ft=F(()=>R.value?R.value.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."),It=F(()=>R.value?R.value.allow_comments===1:!0),yt=U=>{y.value=null,h.value="",x.value=U},ct=()=>{x.value=null};return Nt(()=>{Se()}),{comments:I,groupedComments:ye,displayedComments:Ke,hasMoreComments:Ge,remainingCommentsCount:Le,showMoreComments:le,sortBy:T,setSortBy:De,sortDirection:j,newComment:A,replyTo:y,replyContent:h,editingCommentId:x,currentUser:R,notificationRef:l,commentTextarea:m,showComments:L,submitComment:_t,handleReply:gt,submitReply:Ne,handleEdit:Ye,handleDelete:K,handleRate:nt,handleCommentKeydown:$e,handleReplyKeydown:Ze,autoResize:ke,totalCommentsCount:xe,getCommentWordForm:Ls,showEmojiPicker:N,showImagePicker:C,showLinkModal:P,selectedTextForLink:B,insertEmoji:J,insertImage:He,handleEmojiMouseEnter:te,handleEmojiMouseLeave:X,handleImageMouseEnter:S,handleImageMouseLeave:O,closeEmojiPicker:tt,closeImagePicker:q,handleButtonMouseLeave:Ie,handleButtonMouseEnter:ce,handleImageButtonMouseEnter:fe,getCommentPlaceholder:Ft,canComment:It,handleStartEdit:yt,handleCancelEdit:ct,insertSpoiler:Ee,insertLink:dt,insertLinkFromModal:Tt,closeLinkModal:ge}}},_i={class:"comments-section"},Ei={class:"spoiler-content"},Mi={key:1,class:"comments-container"},xi={class:"comments-header"},Li={class:"comments-controls"},Ti={class:"textarea-container"},Ii=["placeholder","disabled"],Si={class:"comment-footer"},Ai={class:"comment-actions"},Ri=["disabled"],Pi={class:"character-counter-container"},Ni=["disabled"],ji=["disabled"],Bi=["disabled"],$i={class:"comments-list"},Ui={key:0,class:"show-more-comments"};function Di(u,t,v,n,I,A){const y=We("EmojiPicker"),h=We("ImagePicker"),x=We("LinkModal"),R=We("CommentThread"),l=We("Notification");return i(),a("div",_i,[n.showComments?(i(),a("div",Mi,[e("div",xi,[e("div",Li,[e("button",{class:E(["sort-button",{active:n.sortBy==="date"}]),onClick:t[1]||(t[1]=m=>n.setSortBy("date")),title:"–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –¥–∞—Ç–µ"},[t[20]||(t[20]=e("i",{class:"fas fa-clock"},null,-1)),t[21]||(t[21]=oe(" –ü–æ –¥–∞—Ç–µ ")),n.sortBy==="date"?(i(),a("i",{key:0,class:E(["fas",n.sortDirection==="asc"?"fa-arrow-up":"fa-arrow-down"])},null,2)):k("",!0)],2),e("button",{class:E(["sort-button",{active:n.sortBy==="rating"}]),onClick:t[2]||(t[2]=m=>n.setSortBy("rating")),title:"–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É"},[t[22]||(t[22]=e("i",{class:"fas fa-thumbs-up"},null,-1)),t[23]||(t[23]=oe(" –ü–æ —Ä–µ–π—Ç–∏–Ω–≥—É ")),n.sortBy==="rating"?(i(),a("i",{key:0,class:E(["fas",n.sortDirection==="asc"?"fa-arrow-up":"fa-arrow-down"])},null,2)):k("",!0)],2)]),e("button",{class:"hide-comments-btn",onClick:t[3]||(t[3]=m=>n.showComments=!1)},t[24]||(t[24]=[e("i",{class:"fas fa-eye-slash"},null,-1),oe(" –°–∫—Ä—ã—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ")]))]),e("form",{class:"comment-form",onSubmit:t[13]||(t[13]=Lt((...m)=>n.submitComment&&n.submitComment(...m),["prevent"]))},[e("div",Ti,[ie(e("textarea",{ref:"commentTextarea","onUpdate:modelValue":t[4]||(t[4]=m=>n.newComment=m),class:"comment-textarea",placeholder:n.getCommentPlaceholder,disabled:n.currentUser&&n.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:t[5]||(t[5]=(...m)=>n.autoResize&&n.autoResize(...m)),onKeydown:t[6]||(t[6]=(...m)=>n.handleCommentKeydown&&n.handleCommentKeydown(...m))},null,40,Ii),[[$t,n.newComment]])]),e("div",Si,[e("div",Ai,[e("button",{class:"submit-button",type:"submit",disabled:!n.newComment.trim()||n.newComment.length>1500||n.currentUser&&n.currentUser.allow_comments!==1}," –û—Ç–ø—Ä–∞–≤–∏—Ç—å ",8,Ri)]),e("div",Pi,[e("div",{class:E(["character-counter-inline",{"near-limit":n.newComment.length>1400,"at-limit":n.newComment.length>=1500}])},g(n.newComment.length)+"/1500 ",3),e("button",{type:"button",class:E(["emoji-button-inline",{active:n.showEmojiPicker}]),disabled:n.currentUser&&n.currentUser.allow_comments!==1,onMouseenter:t[7]||(t[7]=(...m)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...m)),onMouseleave:t[8]||(t[8]=(...m)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...m))}," üòä ",42,Ni),e("button",{type:"button",class:E(["emoji-button-inline",{active:n.showImagePicker}]),disabled:n.currentUser&&n.currentUser.allow_comments!==1,onMouseenter:t[9]||(t[9]=(...m)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...m)),onMouseleave:t[10]||(t[10]=(...m)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...m))},t[25]||(t[25]=[Qt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-e82be516><g id="logo" data-v-e82be516><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-e82be516></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-e82be516></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-e82be516></path></g></svg>',1)]),42,ji),e("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:n.currentUser&&n.currentUser.allow_comments!==1,onClick:t[11]||(t[11]=(...m)=>n.insertSpoiler&&n.insertSpoiler(...m)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},t[26]||(t[26]=[e("i",{class:"fas fa-eye-slash"},null,-1)]),8,Bi),e("button",{type:"button",class:"emoji-button-inline link-button",onClick:t[12]||(t[12]=(...m)=>n.insertLink&&n.insertLink(...m)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},t[27]||(t[27]=[e("i",{class:"fas fa-link"},null,-1)])),Ce(y,{"is-visible":n.showEmojiPicker&&n.canComment,onEmojiSelected:n.insertEmoji,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),Ce(h,{"is-visible":n.showImagePicker&&n.canComment,"current-user":n.currentUser,onImageSelected:n.insertImage,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:u.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),Ce(x,{"is-visible":n.showLinkModal,"selected-text":n.selectedTextForLink,onClose:n.closeLinkModal,onSubmit:n.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])],32),e("div",$i,[(i(!0),a(de,null,Me(n.displayedComments,m=>(i(),xt(R,{key:m.id,comment:m,"current-user":n.currentUser,"reply-to":n.replyTo,"reply-content":n.replyContent,"editing-comment-id":n.editingCommentId,"is-first-comment":!1,onReply:n.handleReply,onStartEdit:n.handleStartEdit,onCancelEdit:n.handleCancelEdit,onEdit:n.handleEdit,onDelete:n.handleDelete,onRate:n.handleRate,onSubmitReply:n.submitReply,onCancelReply:t[14]||(t[14]=L=>n.replyTo=null),onUpdateReplyContent:t[15]||(t[15]=L=>n.replyContent=L),onReplyKeydown:n.handleReplyKeydown},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id","onReply","onStartEdit","onCancelEdit","onEdit","onDelete","onRate","onSubmitReply","onReplyKeydown"]))),128)),n.hasMoreComments?(i(),a("div",Ui,[e("button",{class:"show-more-btn",onClick:t[16]||(t[16]=(...m)=>n.showMoreComments&&n.showMoreComments(...m))}," –ü–æ–∫–∞–∑–∞—Ç—å –µ—â–µ "+g(n.remainingCommentsCount)+" "+g(n.getCommentWordForm(n.remainingCommentsCount)),1)])):k("",!0)])])):(i(),a("div",{key:0,class:"spoiler-warning",onClick:t[0]||(t[0]=m=>n.showComments=!0)},[e("div",Ei,[t[17]||(t[17]=e("i",{class:"fas fa-eye-slash"},null,-1)),t[18]||(t[18]=e("h3",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–∫—Ä—ã—Ç—ã",-1)),t[19]||(t[19]=e("p",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä—ã. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å.",-1)),e("div",{class:E(["comments-count",{"no-comments":n.totalCommentsCount===0}])},[n.totalCommentsCount===0?(i(),a(de,{key:0},[oe(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç ")],64)):(i(),a(de,{key:1},[oe(g(n.totalCommentsCount)+" "+g(n.getCommentWordForm(n.totalCommentsCount)),1)],64))],2)])])),Ce(l,{ref:"notificationRef"},null,512)])}const Hi=Ct(Ci,[["render",Di],["__scopeId","data-v-e82be516"]]),Oi={class:"movie-info"},Vi={class:"content"},Fi={key:0,class:"content-card"},zi={class:"movie-skeleton"},qi={class:"movie-skeleton__player"},Wi={key:2,class:"content-card"},Ki={key:3,class:"content-card"},Gi={class:"content-header"},Yi=["src"],Zi={class:"content-title"},Xi={key:0,class:"ratings-links"},Qi={key:1},Ji=["href","title"],ea={key:2},ta=["href","title"],na={key:3},oa=["href","title"],la={key:4},sa=["href","title"],ia={key:5},aa=["href"],ra=["title"],ua={key:0,class:"fa-regular fa-face-grin-wink"},da={key:1,class:"fas fa-spinner fa-spin"},ca=["title"],va={key:1,class:"mobile-list-dropdown"},ma={class:"mobile-list-content"},fa=["content"],pa=["content"],ga={class:"additional-info"},ya={class:"info-content"},ka={key:0,class:"movie-poster-container desktop-only"},ha=["href"],ba=["src"],wa={class:"details-container"},Ca={class:"info-list"},_a={key:0},Ea={key:1},Ma={key:2},xa={key:3},La={key:4},Ta={key:5},Ia={key:6},Sa={key:7},Aa={key:8},Ra={key:9,class:"rating-boxes"},Pa={key:0,class:"rating-box mpaa"},Na={key:1,class:"rating-box age"},ja={class:"content-info"},Ba={key:0,class:"content-description-text"},$a={key:3,class:"comments-section"},Ua={key:4,class:"staff-section"},Da={class:"staff-categories"},Ha={key:0,class:"staff-category"},Oa={class:"staff-list"},Va=["href","title"],Fa=["src","alt"],za={class:"staff-name"},qa={key:0,class:"staff-role"},Wa=["href","title"],Ka={key:1,class:"staff-category"},Ga={class:"staff-names-container"},Ya={class:"staff-names-list"},Za=["href"],Xa=["href","title"],Qa={key:2,class:"staff-category"},Ja={class:"staff-names-container"},er={class:"staff-names-list"},tr=["href"],nr=["href","title"],or={key:5,class:"yt-video-container"},lr={key:6,class:"related-movies"},sr=["title"],ir={key:7,class:"related-movies"},ar=["title"],rr={key:0,class:"nudity-info-popup"},ur={class:"nudity-info-content"},dr={key:0,class:"nudity-info-loading"},cr={key:1},vr={class:"nudity-info-actions"},mr=["href"],fr={key:1,class:"nudity-info-popup"},pr={class:"nudity-info-content"},gr={class:"timings-text"},yr={key:0,class:"timing-entries"},kr={class:"timing-content"},hr={class:"timing-header-row",style:{display:"flex","align-items":"center",gap:"8px"}},br={key:0,class:"pending-badge"},wr={key:1,class:"clean-text-badge"},Cr={key:0,class:"timing-actions-row",style:{display:"flex","align-items":"center",gap:"8px","margin-top":"8px"}},_r=["onClick"],Er=["onClick"],Mr=["onClick"],xr=["onClick"],Lr=["onClick"],Tr={class:"timing-text"},Ir={class:"timing-author"},Sr={key:1,style:{color:"#fff","font-size":"13px",margin:"4px 0 0 0"}},Ar={key:0},Rr={key:1},Pr={key:1},Nr={key:0,class:"general-parser-result",style:{"margin-top":"15px",padding:"15px",background:"rgba(255, 255, 255, 0.05)","border-radius":"8px"}},jr={style:{margin:"0 0 10px 0",color:"#fff"}},Br={style:{color:"#fff","font-size":"13px"}},$r={key:0},Ur={key:1},Dr={key:1,class:"overlay-parser-result",style:{"margin-top":"15px",padding:"15px",background:"rgba(255, 255, 255, 0.05)","border-radius":"8px"}},Hr={style:{margin:"0 0 10px 0",color:"#fff"}},Or={style:{color:"#fff","font-size":"13px"}},Vr={key:0},Fr={key:1},zr={class:"nudity-info-actions"},qr={key:2,class:"timing-modal"},Wr={class:"timing-modal-content"},Kr={class:"timing-modal-header"},Gr={class:"timing-submission-form"},Yr={key:0,class:"timing-preview"},Zr={class:"timing-preview-content"},Xr={class:"timing-preview-range"},Qr={class:"timing-preview-duration"},Jr={class:"timing-form-actions"},eu=["disabled"],tu={key:0,class:"fas fa-spinner fa-spin"},nu={key:1},ou={class:"modal-header"},lu={class:"modal-header-controls"},su={class:"modal-body"},iu=["disabled"],au={key:0,class:"fas fa-spinner fa-spin"},ru={key:1,class:"fas fa-list"},uu={class:"top-submitters-list"},du={class:"submitter-info"},cu={class:"submitter-name"},vu=["href"],mu={class:"submitter-count"},fu={class:"submitter-contribution"},pu={class:"modal-header"},gu={class:"modal-body"},yu={key:0,class:"timing-filters"},ku={key:1,class:"loading-spinner"},hu={key:2,class:"no-timings"},bu={key:3,class:"no-timings"},wu={key:4,class:"all-timings-list"},Cu={class:"timing-header"},_u={class:"timing-meta"},Eu={class:"timing-author"},Mu={class:"timing-date"},xu={class:"timing-movie-info"},Lu={key:0,class:"admin-controls"},Tu=["onClick","disabled"],Iu={key:0,class:"fas fa-spinner fa-spin"},Su={key:1,class:"fas fa-check"},Au=["onClick","disabled"],Ru={key:0,class:"fas fa-spinner fa-spin"},Pu={key:1,class:"fas fa-times"},Nu=["onClick","disabled"],ju={key:0,class:"fas fa-spinner fa-spin"},Bu={key:1,class:"fas fa-eye-slash"},$u={class:"timing-content"},Uu={class:"timing-text"},Du={__name:"MovieInfo",setup(u){const t=p(!0),v=Jt(),n=kn(),I=lo(),A=Fn(),y=en(),h=p(A.params.kp_id),x=p(""),R=p(null),l=p(null),m=so(),L=bo(),b=p(null),$=F(()=>L.areTrailersActive),T=p(null),j=p(!1),N=p(!1),C=p(10),P=p(null),B=p(!1),te=p(null),X=p(!1),S=p(void 0),O=p(null),ce=p(new Set),fe=p(new Set),Ie=p(!1),tt=p(!1),q=F(()=>{var d;return((d=l.value)==null?void 0:d.nudity_timings.length)>0}),ge=F(()=>{var d;return((d=l.value)==null?void 0:d.nudity_timings.length)>0&&v.isStreamerMode&&!v.isMobile}),se=F(()=>{var d,o,V,Te,st,it,Re,at,Pe,r;return((o=(d=l.value)==null?void 0:d.lists)==null?void 0:o.isFavorite)||((Te=(V=l.value)==null?void 0:V.lists)==null?void 0:Te.isWatching)||((it=(st=l.value)==null?void 0:st.lists)==null?void 0:it.isLater)||((at=(Re=l.value)==null?void 0:Re.lists)==null?void 0:at.isCompleted)||((r=(Pe=l.value)==null?void 0:Pe.lists)==null?void 0:r.isAbandoned)}),ae=F(()=>v.isCommentsEnabled),_e=()=>{if(l.value){const d=l.value.name_ru||l.value.name_en||l.value.name_original||"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å–º–µ";document.title=d}},ut=d=>d?d.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",pt=d=>(d||[]).map(o=>({kp_id:o.film_id,poster:o.poster_url_preview||o.poster_url,title:o.name_ru||o.name_en||o.name_original})),ke=d=>{if(typeof d!="number")return;const o=Math.floor(d/60),V=d%60;return"".concat(o," —á. ").concat(V," –º–∏–Ω.")},ye=p(!1),xe=p({top:"0px",left:"0px"}),Ke=d=>{ye.value=!0,xe.value={top:"".concat(d.pageY+10,"px"),left:"".concat(d.pageX-70,"px")}},Ge=async()=>{try{const d=[l.value.name_ru||l.value.name_en||l.value.name_original,...l.value.year?[l.value.year]:[],...l.value.film_length?[ke(l.value.film_length)]:[]];await navigator.clipboard.writeText(d.join(", ")),b.value.showNotification("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ")}catch(d){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",d)}},Le=async(d=!0)=>{var o,V,Te,st,it,Re,at,Pe;try{let r;if(h.value.startsWith("shiki")?r=await io(h.value):r=await ao(h.value,n.token),Array.isArray(r)&&r.length===0)throw new Error("–î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–∏—Å–∫.");l.value=r,h.value.startsWith("shiki")?l.value={...l.value,title:l.value.name_ru||l.value.name_en,name_original:l.value.name_en,short_description:l.value.slogan}:l.value={...l.value,title:l.value.name_ru||l.value.name_en||l.value.name_original,kinopoisk_id:h.value},m.setHeaderContent({text:l.value.title,imageUrl:l.value.logo_url}),_e();const s={kp_id:h.value,title:((o=l.value)==null?void 0:o.name_ru)||((V=l.value)==null?void 0:V.name_en)||((Te=l.value)==null?void 0:Te.name_original),poster:((st=l.value)==null?void 0:st.poster_url)||((it=l.value)==null?void 0:it.cover_url)||((Re=l.value)==null?void 0:Re.screenshots[0]),year:(at=l.value)==null?void 0:at.year,type:(Pe=l.value)==null?void 0:Pe.type};if(h.value.startsWith("shiki"))if(l.value.screenshots&&l.value.screenshots.length>0){const _=Math.floor(Math.random()*l.value.screenshots.length),M=l.value.screenshots[_];I.updateMoviePoster(M)}else s.poster&&I.updateMoviePoster(s.poster);else s.poster&&I.updateMoviePoster(s.poster);if(F(()=>v.isHistoryAllowed).value&&s.kp_id&&s.title&&d)if(n.token)try{await gn(s.kp_id,Z.HISTORY)}catch(_){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é:",_)}else v.addToHistory({...s})}catch(r){const{message:s,code:f}=Mt(r);x.value=s,R.value=f,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–ª—å–º–∞—Ö:",r)}},le=F(()=>{var d;return(d=l.value)==null?void 0:d.videos}),De=F(()=>{var d;return pt((d=l.value)==null?void 0:d.sequels_and_prequels)}),Se=F(()=>{var d;return pt((d=l.value)==null?void 0:d.similars)}),_t=()=>{var Te;const d=((Te=document.querySelector(".related-movies"))==null?void 0:Te.clientWidth)||0,V=Math.floor(d/160)||10;C.value=Math.max(1,V)},gt=()=>{_t()},Ne=d=>{if(d.altKey&&d.keyCode===84&&document.querySelector(".player-container")){const V=document.querySelector(".theater-mode-btn");V&&V.click()}},Ye=d=>{d.button===1&&(d.preventDefault(),K(d))},K=async d=>{if(P.value!==null){P.value=null,B.value=!1;return}S.value=void 0,te.value=d.currentTarget,P.value="",B.value=!0;try{const o=await ro(l.value.imdb_id);P.value=o.nudity_info}catch(o){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö:",o),P.value="–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ Parents Guide –Ω–∞ IMDb –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏."}finally{B.value=!1}},nt=d=>{var o,V;if(P.value=null,S.value!==void 0){S.value=void 0;return}O.value=d.currentTarget,S.value=((o=l.value)==null?void 0:o.nudity_timings)===null?"":((V=l.value)==null?void 0:V.nudity_timings)||""},$e=d=>{var V,Te,st,it,Re,at,Pe,r,s,f,_,M,D;return(D={[Z.FAVORITE]:((Te=(V=l.value)==null?void 0:V.lists)==null?void 0:Te.isFavorite)||!1,[Z.HISTORY]:((it=(st=l.value)==null?void 0:st.lists)==null?void 0:it.isHistory)||!1,[Z.LATER]:((at=(Re=l.value)==null?void 0:Re.lists)==null?void 0:at.isLater)||!1,[Z.COMPLETED]:((r=(Pe=l.value)==null?void 0:Pe.lists)==null?void 0:r.isCompleted)||!1,[Z.ABANDONED]:((f=(s=l.value)==null?void 0:s.lists)==null?void 0:f.isAbandoned)||!1,[Z.WATCHING]:((M=(_=l.value)==null?void 0:_.lists)==null?void 0:M.isWatching)||!1}[d])!=null?D:!1},Ze=async d=>{if(!n.token){b.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:()=>y.push("/login")});return}try{const o={[Z.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[Z.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[Z.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[Z.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[Z.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[Z.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};$e(d)?(await qn(h.value,d),b.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(o[d]))):(await gn(h.value,d),b.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(o[d]))),await Le(!1),X.value=!1}catch(o){const{message:V,code:Te}=Mt(o);b.value.showNotification("".concat(V," ").concat(Te))}},w=d=>{const o=document.querySelector(".mobile-list-dropdown");o&&!o.contains(d.target)&&(X.value=!1)},J=d=>{const o=document.querySelector(".nudity-info-popup");o&&!o.contains(d.target)&&te.value&&!te.value.contains(d.target)&&(P.value=null)},He=d=>{const o=document.querySelector(".nudity-info-popup");o&&!o.contains(d.target)&&O.value&&!O.value.contains(d.target)&&(S.value=void 0)};Nt(async()=>{await Le(),t.value=!1,document.addEventListener("keydown",Ne),window.addEventListener("resize",gt),setTimeout(_t,100),document.addEventListener("click",w),document.addEventListener("click",J,!0),document.addEventListener("click",He,!0),window.selectedNudityTimings=Array.from(ce.value),window.overlayNudityTimings=Array.from(fe.value)}),$n(async()=>{m.clearHeaderContent(),document.removeEventListener("keydown",Ne),window.removeEventListener("resize",gt),document.removeEventListener("click",w),document.removeEventListener("click",J,!0),document.removeEventListener("click",He,!0),delete window.selectedNudityTimings,delete window.overlayNudityTimings}),qe(()=>A.params.kp_id,async d=>{d&&d!==h.value&&(m.clearHeaderContent(),h.value=d,T.value=null,await Le(),t.value=!1)},{immediate:!0}),qe(l,()=>{_e()},{deep:!0}),qe(P,d=>{d?document.addEventListener("click",J,!0):document.removeEventListener("click",J,!0)},{deep:!0}),qe(S,d=>{d?document.addEventListener("click",He,!0):document.removeEventListener("click",He,!0)},{deep:!0}),qe(ce,()=>{window.selectedNudityTimings=Array.from(ce.value)},{deep:!0}),qe(fe,()=>{window.overlayNudityTimings=Array.from(fe.value)},{deep:!0}),Nt(()=>{window.selectedNudityTimings=Array.from(ce.value),window.overlayNudityTimings=Array.from(fe.value)}),$n(()=>{delete window.selectedNudityTimings,delete window.overlayNudityTimings});const Ee=d=>{var o,V;return((V=(o=l.value)==null?void 0:o.staff)==null?void 0:V.filter(Te=>Te.profession_key===d))||[]},dt=async()=>{try{await navigator.clipboard.writeText(P.value),b.value.showNotification("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω")}catch(d){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",d),b.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞")}finally{P.value=null}},Tt=async()=>{if(S.value.length!==0)try{const d=S.value.map(o=>"".concat(o.timing_text," (by @").concat(o.username,")")).join("\n").concat("\nReYohoho\n");await navigator.clipboard.writeText(d),b.value.showNotification("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω")}catch(d){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",d),b.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞")}finally{S.value=void 0}},Ft=()=>{const d=encodeURIComponent(P.value);window.open("https://translate.google.com/?sl=en&tl=ru&text=".concat(d),"_blank"),P.value=null},It=F({get:()=>v.submitterUsername,set:d=>v.setSubmitterUsername(d)}),yt=p(""),ct=p(!1),U=F(()=>{if(!yt.value.trim())return[];try{return Vt(yt.value,!0)||[]}catch(d){return console.error("Error parsing timing text:",d),[]}}),ee=F(()=>It.value.trim()&&yt.value.trim()),je=async()=>{if(!(!ee.value||ct.value))try{ct.value=!0,await co(h.value,It.value.trim(),yt.value),b.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é, —Å–ø–∞—Å–∏–±–æ!"),yt.value="",ue.value=!1}catch(d){const{message:o}=Mt(d);b.value.showNotification(o,5e3)}finally{ct.value=!1}},be=async()=>{try{const{submissions:d}=await uo();Ae.value=d,Xe.value=!0}catch(d){const{message:o}=Mt(d);b.value.showNotification(o)}},ue=p(!1),Ae=p([]),Xe=p(!1),kt=p(!1),Qe=p([]),ht=p(!1),Je=p(!1),vt=p(null),bt=p(!1),ot=p(!1),lt=p("all"),zt=async d=>{if(!Je.value)try{Je.value=!0,vt.value=d,bt.value=!0,ot.value=!1,await mo(d);const o=Qe.value.find(V=>V.id===d);o&&(o.status="approved"),b.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ–¥–æ–±—Ä–µ–Ω")}catch(o){const{message:V}=Mt(o);b.value.showNotification("–û—à–∏–±–∫–∞: ".concat(V))}finally{Je.value=!1,vt.value=null,bt.value=!1,ot.value=!1}},Ut=async d=>{if(!Je.value)try{Je.value=!0,vt.value=d,bt.value=!1,ot.value=!1,await fo(d);const o=Qe.value.find(V=>V.id===d);o&&(o.status="rejected"),b.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ—Ç–∫–ª–æ–Ω–µ–Ω")}catch(o){const{message:V}=Mt(o);b.value.showNotification("–û—à–∏–±–∫–∞: ".concat(V))}finally{Je.value=!1,vt.value=null,bt.value=!1,ot.value=!1}},rn=async d=>{if(!Je.value)try{Je.value=!0,vt.value=d,bt.value=!1,ot.value=!0,await po(d);const o=Qe.value.find(V=>V.id===d);o&&(o.status="clean_text"),b.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ—Ç–º–µ—á–µ–Ω –∫–∞–∫ clean_text")}catch(o){const{message:V}=Mt(o);b.value.showNotification("–û—à–∏–±–∫–∞: ".concat(V))}finally{Je.value=!1,vt.value=null,bt.value=!1,ot.value=!1}},St=async()=>{if(!ht.value)try{ht.value=!0,kt.value=!0;const{timings:d}=await vo();Qe.value=d}catch(d){const{message:o}=Mt(d);b.value.showNotification(o),kt.value=!1}finally{ht.value=!1}},Rt=d=>({pending:"–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏",approved:"–û–¥–æ–±—Ä–µ–Ω–æ",rejected:"–û—Ç–∫–ª–æ–Ω–µ–Ω–æ",clean_text:"–ù–µ –º–æ–¥–µ—Ä–∏—Ä—É–µ—Ç—Å—è"})[d]||d,un=(d,o)=>{const V=[2,0,1,1,1,2];return o[d%100>4&&d%100<20?2:V[Math.min(d%10,5)]]},dn=d=>{if(!Ae.value.length)return 0;const o=Math.max(...Ae.value.map(V=>V.approved_submissions_count));return d/o*100},tn=F(()=>lt.value==="all"?Qe.value:Qe.value.filter(d=>d.status===lt.value)),nn=d=>{ce.value.has(d)?ce.value.delete(d):ce.value.add(d)},Ve=p({});function on(d){if(Ve.value[d.id])Ve.value={...Ve.value,[d.id]:!1};else{const o=Vt(d.timing_text,!0);Ve.value={...Ve.value,[d.id]:o}}}const Dt=F(()=>!!window.electronAPI);function cn(d){if(!Dt.value){b.value?b.value.showNotification("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"):alert("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏");return}nn(d)}function ln(d){if(!Dt.value){b.value?b.value.showNotification("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"):alert("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏");return}nn(d)}function vn(d){if(!Dt.value){b.value?b.value.showNotification("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"):alert("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏");return}jt(d)}function mn(d){if(!Dt.value){b.value?b.value.showNotification("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"):alert("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏");return}jt(d)}const jt=d=>{fe.value.has(d)?fe.value.delete(d):fe.value.add(d)};function fn(){Ie.value=!Ie.value}function pn(){tt.value=!tt.value}function Fe(){const d=[];if(S.value&&Array.isArray(S.value)){for(const o of S.value)if(ce.value.has(o.id)){const V=Vt(o.timing_text,!0);V&&V.length>0&&d.push(...V)}}return d}function qt(){const d=[];if(S.value&&Array.isArray(S.value)&&S.value.length>0){for(const o of S.value)if(fe.value.has(o.id)){const V=Vt(o.timing_text,!0);V&&V.length>0&&d.push(...V)}}return d}return(d,o)=>{var Te,st,it,Re,at,Pe,r,s,f,_,M,D,H,pe,re,Y,ve,we;const V=We("router-link");return i(),a(de,null,[e("div",Oi,[e("div",Vi,[(t.value||!l.value)&&!x.value?(i(),a("div",Fi,[e("div",zi,[o[27]||(o[27]=Qt('<div class="movie-skeleton__header" data-v-5baa72cd><div class="movie-skeleton__title" data-v-5baa72cd></div></div><div class="movie-skeleton__ratings" data-v-5baa72cd><div class="movie-skeleton__rating-item" data-v-5baa72cd></div><div class="movie-skeleton__rating-item" data-v-5baa72cd></div><div class="movie-skeleton__rating-item" data-v-5baa72cd></div></div>',2)),e("div",qi,[Ce(Gn)]),o[28]||(o[28]=Qt('<div class="movie-skeleton__additional-info" data-v-5baa72cd><div class="movie-skeleton__section-title" data-v-5baa72cd></div><div class="movie-skeleton__info-list" data-v-5baa72cd><div class="movie-skeleton__info-item" data-v-5baa72cd></div><div class="movie-skeleton__info-item" data-v-5baa72cd></div><div class="movie-skeleton__info-item" data-v-5baa72cd></div><div class="movie-skeleton__info-item" data-v-5baa72cd></div><div class="movie-skeleton__info-item" data-v-5baa72cd></div></div></div><div class="movie-skeleton__description" data-v-5baa72cd><div class="movie-skeleton__description-line" data-v-5baa72cd></div><div class="movie-skeleton__description-line" data-v-5baa72cd></div><div class="movie-skeleton__description-line" data-v-5baa72cd></div><div class="movie-skeleton__description-line" data-v-5baa72cd></div></div>',2))])])):k("",!0),x.value?(i(),xt(zn,{key:1,message:x.value,code:R.value},null,8,["message","code"])):k("",!0),x.value?(i(),a("div",Wi,[(i(),xt(Vn,{key:h.value,"kp-id":h.value,"movie-info":l.value,"onUpdate:movieInfo":Le},null,8,["kp-id","movie-info"]))])):k("",!0),l.value&&!t.value?(i(),a("div",Ki,[e("div",Gi,[l.value.logo_url?(i(),a("div",{key:0,class:"content-logo",onMousemove:Ke,onMouseleave:o[0]||(o[0]=c=>ye.value=!1),onClick:Ge},[e("img",{src:l.value.logo_url,alt:"–õ–æ–≥–æ—Ç–∏–ø —Ñ–∏–ª—å–º–∞",class:"content-logo"},null,8,Yi)],32)):(i(),a("div",{key:1,onMousemove:Ke,onMouseleave:o[1]||(o[1]=c=>ye.value=!1),onClick:Ge},[e("h1",Zi,g(l.value.title),1)],32)),ie(e("div",{class:"title-copy-tooltip",style:Xt(xe.value)}," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ",4),[[he,ye.value]])]),l.value.kinopoisk_id||l.value.title||l.value.imdb_id||l.value.rating_imdb||l.value.shikimori_id?(i(),a("div",Xi,[l.value.kinopoisk_id?(i(),xt(Kl,{key:l.value.kinopoisk_id,"kp-id":l.value.kinopoisk_id,"show-dash":!0},null,8,["kp-id"])):k("",!0),l.value.kinopoisk_id?(i(),a("div",Qi,[e("a",{href:"https://www.kinopoisk.ru/film/".concat(l.value.kinopoisk_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:l.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(ut(l.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[o[29]||(o[29]=e("img",{src:Dn,alt:"–ö–ü",class:"rating-logo"},null,-1)),e("span",{class:E(["rating-value",Q(Zt)(l.value.rating_kinopoisk)])},g(l.value.rating_kinopoisk?l.value.rating_kinopoisk:"‚Äî"),3),o[30]||(o[30]=e("img",{src:Yt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Ji)])):k("",!0),!l.value.kinopoisk_id&&l.value.title?(i(),a("div",ea,[e("a",{href:"https://www.kinopoisk.ru/index.php?kp_query=".concat(encodeURIComponent(l.value.title+(l.value.year?" "+l.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:l.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(ut(l.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[o[31]||(o[31]=e("img",{src:Dn,alt:"–ö–ü",class:"rating-logo"},null,-1)),e("span",{class:E(["rating-value",Q(Zt)(l.value.rating_kinopoisk)])},g(l.value.rating_kinopoisk?l.value.rating_kinopoisk:"‚Äî"),3),o[32]||(o[32]=e("img",{src:Yt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,ta)])):k("",!0),l.value.imdb_id?(i(),a("div",na,[e("a",{href:"https://www.imdb.com/title/".concat(l.value.imdb_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:l.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(ut(l.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[o[33]||(o[33]=e("img",{src:Hn,alt:"IMDb",class:"rating-logo"},null,-1)),e("span",{class:E(["rating-value",Q(Zt)(l.value.rating_imdb)])},g(l.value.rating_imdb?l.value.rating_imdb:"‚Äî"),3),o[34]||(o[34]=e("img",{src:Yt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,oa)])):k("",!0),!l.value.imdb_id&&l.value.title?(i(),a("div",la,[e("a",{href:"https://www.imdb.com/find/?q=".concat(encodeURIComponent(l.value.title+(l.value.year?" "+l.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:l.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(ut(l.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[o[35]||(o[35]=e("img",{src:Hn,alt:"IMDb",class:"rating-logo"},null,-1)),e("span",{class:E(["rating-value",Q(Zt)(l.value.rating_imdb)])},g(l.value.rating_imdb?l.value.rating_imdb:"‚Äî"),3),o[36]||(o[36]=e("img",{src:Yt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,sa)])):k("",!0),l.value.shikimori_id?(i(),a("div",ia,[e("a",{href:"https://shikimori.one/animes/".concat(l.value.shikimori_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},o[37]||(o[37]=[e("img",{src:wo,alt:"Shiki",class:"rating-logo"},null,-1),e("img",{src:Yt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,aa)])):k("",!0),l.value.imdb_id?(i(),a("button",{key:6,class:"nudity-info-btn parents-guide-btn",onClick:o[2]||(o[2]=c=>K(c)),onMousedown:o[3]||(o[3]=c=>Ye(c)),title:P.value?"–°–∫—Ä—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é":"–ü–æ–∫–∞–∑–∞—Ç—å Parents Guide –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ü–µ–Ω–∞—Ö"},[o[38]||(o[38]=e("span",{class:"desktop-text"},"Parents Guide",-1)),o[39]||(o[39]=e("span",{class:"mobile-text"},"PG",-1)),B.value?(i(),a("i",da)):(i(),a("i",ua))],40,ra)):k("",!0),e("button",{class:"nudity-info-btn",onClick:o[4]||(o[4]=c=>nt(c)),title:S.value!==void 0?"–°–∫—Ä—ã—Ç—å —Ç–∞–π–º–∏–Ω–≥–∏":"–ü–æ–∫–∞–∑–∞—Ç—å —Ç–∞–π–º–∏–Ω–≥–∏ —Å—Ü–µ–Ω 18+(–¥–ª—è —Ç–≤–∏—á–∞, –º–∏–≥–∞–Ω–∏–µ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö)"},[e("i",{class:E(["fa-regular fa-clock",{"text-red":q.value,"text-red-blink":ge.value}])},null,2)],8,ca)])):k("",!0),(i(),xt(Vn,{key:h.value,"kp-id":h.value,"movie-info":l.value,"onUpdate:movieInfo":Le},null,8,["kp-id","movie-info"])),Q(v).isMobile?(i(),a("div",va,[e("button",{class:E(["mobile-list-toggle",{}]),onClick:o[5]||(o[5]=c=>X.value=!X.value)},[e("span",{class:E(["material-icons",{active:se.value}])},g(se.value?"bookmark_added":"bookmark_border"),3),o[40]||(o[40]=e("span",{class:"button-label"},"–î–æ–±–∞–≤–∏—Ç—å –≤ —Å–ø–∏—Å–æ–∫",-1)),e("span",{class:E(["material-icons dropdown-arrow",{expanded:X.value}])},"expand_more",2)]),ie(e("div",ma,[e("button",{class:E(["mobile-list-btn",{}]),onClick:o[6]||(o[6]=c=>Ze(Q(Z).FAVORITE))},[e("span",{class:E(["material-icons",{active:(st=(Te=l.value)==null?void 0:Te.lists)==null?void 0:st.isFavorite}])},g((Re=(it=l.value)==null?void 0:it.lists)!=null&&Re.isFavorite?"favorite":"favorite_border"),3),o[41]||(o[41]=e("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))]),e("button",{class:E(["mobile-list-btn",{}]),onClick:o[7]||(o[7]=c=>Ze(Q(Z).WATCHING))},[e("span",{class:E(["material-icons",{active:(Pe=(at=l.value)==null?void 0:at.lists)==null?void 0:Pe.isWatching}])},g((s=(r=l.value)==null?void 0:r.lists)!=null&&s.isWatching?"visibility":"visibility_off"),3),o[42]||(o[42]=e("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))]),e("button",{class:E(["mobile-list-btn",{}]),onClick:o[8]||(o[8]=c=>Ze(Q(Z).LATER))},[e("span",{class:E(["material-icons",{active:(_=(f=l.value)==null?void 0:f.lists)==null?void 0:_.isLater}])},"watch_later",2),o[43]||(o[43]=e("span",{class:"button-label"},"–ü–æ–∑–∂–µ",-1))]),e("button",{class:E(["mobile-list-btn",{}]),onClick:o[9]||(o[9]=c=>Ze(Q(Z).COMPLETED))},[e("span",{class:E(["material-icons",{active:(D=(M=l.value)==null?void 0:M.lists)==null?void 0:D.isCompleted}])},g((pe=(H=l.value)==null?void 0:H.lists)!=null&&pe.isCompleted?"check_circle":"check_circle_outline"),3),o[44]||(o[44]=e("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))]),e("button",{class:E(["mobile-list-btn",{}]),onClick:o[10]||(o[10]=c=>Ze(Q(Z).ABANDONED))},[e("span",{class:E(["material-icons",{active:(Y=(re=l.value)==null?void 0:re.lists)==null?void 0:Y.isAbandoned}])},"not_interested",2),o[45]||(o[45]=e("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))])],512),[[he,X.value]])])):k("",!0),e("meta",{name:"title-and-year",content:l.value.type==="FILM"&&l.value.year?"".concat(l.value.title," (").concat(l.value.year,")"):l.value.title},null,8,fa),l.value.name_original?(i(),a("meta",{key:2,name:"original-title",content:l.value.name_original},null,8,pa)):k("",!0),e("div",ga,[o[56]||(o[56]=e("h2",{class:"additional-info-title"},"–ü–æ–¥—Ä–æ–±–Ω–µ–µ",-1)),e("div",ya,[l.value.poster_url?(i(),a("div",ka,[e("a",{href:l.value.poster_url,target:"_blank",rel:"noopener noreferrer"},[e("img",{src:l.value.poster_url,alt:"–ü–æ—Å—Ç–µ—Ä —Ñ–∏–ª—å–º–∞",class:"movie-poster"},null,8,ba)],8,ha)])):k("",!0),e("div",wa,[e("ul",Ca,[l.value.type&&Q(Un)[l.value.type]?(i(),a("li",_a,[o[46]||(o[46]=e("strong",null,"–¢–∏–ø:",-1)),oe(" "+g(Q(Un)[l.value.type]),1)])):k("",!0),l.value.year?(i(),a("li",Ea,[o[47]||(o[47]=e("strong",null,"–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞:",-1)),oe(" "+g(l.value.year),1)])):k("",!0),l.value.title?(i(),a("li",Ma,[o[48]||(o[48]=e("strong",null,"–ù–∞–∑–≤–∞–Ω–∏–µ:",-1)),oe(" "+g(l.value.title),1)])):k("",!0),l.value.name_original?(i(),a("li",xa,[o[49]||(o[49]=e("strong",null,"–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:",-1)),oe(" "+g(l.value.name_original),1)])):k("",!0),l.value.slogan?(i(),a("li",La,[o[50]||(o[50]=e("strong",null,"–°–ª–æ–≥–∞–Ω:",-1)),oe(" "+g(l.value.slogan),1)])):k("",!0),l.value.production_companies?(i(),a("li",Ta,[o[51]||(o[51]=e("strong",null,"–ü—Ä–æ–¥–∞–∫—à–Ω:",-1)),oe(" "+g(l.value.production_companies),1)])):k("",!0),(ve=l.value.countries)!=null&&ve.length?(i(),a("li",Ia,[o[52]||(o[52]=e("strong",null,"–°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞:",-1)),oe(" "+g(l.value.countries.map(c=>c.country).join(", ")),1)])):k("",!0),(we=l.value.genres)!=null&&we.length?(i(),a("li",Sa,[o[53]||(o[53]=e("strong",null,"–ñ–∞–Ω—Ä—ã:",-1)),oe(" "+g(l.value.genres.map(c=>c.genre).join(", ")),1)])):k("",!0),l.value.film_length?(i(),a("li",Aa,[o[54]||(o[54]=e("strong",null,"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:",-1)),oe(" "+g(ke(l.value.film_length)),1)])):k("",!0),l.value.rating_mpaa||l.value.rating_age_limits?(i(),a("li",Ra,[l.value.rating_mpaa?(i(),a("div",Pa,[o[55]||(o[55]=e("strong",null,"MPAA",-1)),e("span",null,g(l.value.rating_mpaa.toUpperCase()),1)])):k("",!0),l.value.rating_age_limits?(i(),a("div",Na,[e("strong",null,g(l.value.rating_age_limits.replace("age",""))+"+",1)])):k("",!0)])):k("",!0)]),e("div",ja,[l.value.description?(i(),a("p",Ba,g(l.value.description),1)):k("",!0)])])])]),ae.value?(i(),a("div",$a,[(i(),xt(Hi,{"movie-id":h.value,key:h.value},null,8,["movie-id"]))])):k("",!0),l.value.staff?(i(),a("div",Ua,[e("div",Da,[Ee("ACTOR").length?(i(),a("div",Ha,[o[57]||(o[57]=e("h3",{class:"additional-info-title"},"–ê–∫—Ç—ë—Ä—ã",-1)),e("div",Oa,[(i(!0),a(de,null,Me(Ee("ACTOR").slice(0,12),c=>(i(),a("div",{key:c.staff_id,class:"staff-item"},[e("a",{href:"https://www.kinopoisk.ru/name/".concat(c.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-link",title:c.description||""},[e("img",{src:c.poster_url,alt:c.name_ru,class:"staff-photo"},null,8,Fa),e("span",za,g(c.name_ru||c.name_en),1),c.description?(i(),a("span",qa,g(c.description),1)):k("",!0)],8,Va)]))),128)),e("a",{class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(h.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(Ee("ACTOR").length," –∞–∫—Ç–µ—Ä–æ–≤")}," +"+g(Ee("ACTOR").length-12),9,Wa)])])):k("",!0),Ee("DIRECTOR").length?(i(),a("div",Ka,[o[58]||(o[58]=e("h3",{class:"additional-info-title"},"–†–µ–∂–∏—Å—Å—ë—Ä—ã",-1)),e("div",Ga,[e("div",Ya,[(i(!0),a(de,null,Me(Ee("DIRECTOR").slice(0,5),c=>(i(),a("a",{key:c.staff_id,href:"https://www.kinopoisk.ru/name/".concat(c.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},g(c.name_ru||c.name_en),9,Za))),128)),Ee("DIRECTOR").length>5?(i(),a("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(h.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(Ee("DIRECTOR").length," —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–≤")}," +"+g(Ee("DIRECTOR").length-5),9,Xa)):k("",!0)])])])):k("",!0),Ee("PRODUCER").length?(i(),a("div",Qa,[o[59]||(o[59]=e("h3",{class:"additional-info-title"},"–ü—Ä–æ–¥—é—Å–µ—Ä—ã",-1)),e("div",Ja,[e("div",er,[(i(!0),a(de,null,Me(Ee("PRODUCER").slice(0,5),c=>(i(),a("a",{key:c.staff_id,href:"https://www.kinopoisk.ru/name/".concat(c.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},g(c.name_ru||c.name_en),9,tr))),128)),Ee("PRODUCER").length>5?(i(),a("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(h.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(Ee("PRODUCER").length," –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤")}," +"+g(Ee("PRODUCER").length-5),9,nr)):k("",!0)])])])):k("",!0)])])):k("",!0),le.value.length&&$.value?(i(),a("div",or,[Ce($l,{videos:le.value,"active-video-index":T.value,onSelect:d.playTrailer},null,8,["videos","active-video-index","onSelect"])])):k("",!0),De.value.length?(i(),a("div",lr,[o[60]||(o[60]=e("h2",null,"–°–∏–∫–≤–µ–ª—ã –∏ –ø—Ä–∏–∫–≤–µ–ª—ã",-1)),Ce(Q(On),{"movies-list":j.value?De.value:De.value.slice(0,C.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),De.value.length>C.value?(i(),a("a",{key:0,class:"expand-circle-button",onClick:o[11]||(o[11]=c=>j.value=!j.value),title:"".concat(j.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(De.value.length,")")},g(j.value?"‚àí":"+".concat(De.value.length-C.value)),9,sr)):k("",!0)])):k("",!0),Se.value.length?(i(),a("div",ir,[o[61]||(o[61]=e("h2",null,"–ü–æ—Ö–æ–∂–∏–µ",-1)),Ce(Q(On),{"movies-list":N.value?Se.value:Se.value.slice(0,C.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),Se.value.length>C.value?(i(),a("a",{key:0,class:"expand-circle-button",onClick:o[12]||(o[12]=c=>N.value=!N.value),title:"".concat(N.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(Se.value.length,")")},g(N.value?"‚àí":"+".concat(Se.value.length-C.value)),9,ar)):k("",!0)])):k("",!0)])):k("",!0)])]),Ce(an,{ref_key:"notificationRef",ref:b},null,512),P.value!==null?(i(),a("div",rr,[e("div",ur,[B.value?(i(),a("div",dr,o[62]||(o[62]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),e("span",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏...",-1)]))):(i(),a("div",cr,g(P.value),1))]),e("div",vr,[e("a",{href:"https://www.imdb.com/title/".concat(l.value.imdb_id,"/parentalguide"),target:"_blank",rel:"noopener noreferrer",class:"nudity-info-button"},o[63]||(o[63]=[e("i",{class:"fas fa-external-link-alt"},null,-1),e("span",null,"Parents Guide",-1)]),8,mr),e("button",{class:"nudity-info-button",onClick:dt},o[64]||(o[64]=[e("i",{class:"fas fa-copy"},null,-1),e("span",null,"Copy",-1)])),e("button",{class:"nudity-info-button",onClick:Ft},o[65]||(o[65]=[e("i",{class:"fas fa-language"},null,-1),e("span",null,"Translate",-1)]))])])):k("",!0),S.value!==void 0?(i(),a("div",fr,[e("div",pr,[e("div",{class:"acknowledgment-table"},[o[68]||(o[68]=e("div",{class:"acknowledgment-header"},[e("i",{class:"fa-solid fa-heart"}),e("span",null,"–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏")],-1)),e("div",{class:"acknowledgment-content"},[o[67]||(o[67]=e("div",{class:"acknowledgment-row"},[e("a",{href:"https://www.twitch.tv/tanyabelkova",target:"_blank",rel:"noopener noreferrer",class:"twitch-link"},[e("i",{class:"fa-brands fa-twitch"}),e("span",null,"TanyaBelkova")]),e("span",{class:"acknowledgment-text"},"‚Äî –∑–∞ –æ—Å–Ω–æ–≤—É –±–∞–∑—ã —Ç–∞–π–º–∏–Ω–≥–æ–≤")],-1)),e("div",{class:"acknowledgment-row clickable",onClick:be},o[66]||(o[66]=[e("div",{class:"community-link"},[e("i",{class:"fa-solid fa-users"}),e("span",null,"–°–æ–æ–±—â–µ—Å—Ç–≤–æ")],-1),e("span",{class:"acknowledgment-text"},"‚Äî –∑–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–∏–Ω–≥–æ–≤",-1)]))])]),e("div",{class:E(["timings-content",{"no-border":!S.value}])},[e("div",gr,[S.value.length>0?(i(),a("div",yr,[(i(!0),a(de,null,Me(S.value,c=>{var W;return i(),a("div",{key:c.id,class:E(["timing-entry",{pending:c.status==="pending","clean-text":c.status==="clean_text",selected:ce.value.has(c.id)}])},[e("div",kr,[e("div",hr,[c.status==="pending"?(i(),a("div",br,"–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏")):k("",!0),c.status==="clean_text"?(i(),a("div",wr," –¢–∞–π–º–∏–Ω–≥–∏ —Ç–∞–∫–æ–≥–æ —Ç–∏–ø–∞ –Ω–µ –º–æ–¥–µ—Ä–∏—Ä—É—é—Ç—Å—è, –¥–ª—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Å–≤–µ—Ä—è–π—Ç–µ—Å—å —Å ParentsGuide ")):k("",!0)]),c.status!=="clean_text"&&((W=l.value)==null?void 0:W.type)==="FILM"?(i(),a("div",Cr,[e("button",{class:"nudity-info-button",onClick:G=>on(c)},g(Ve.value[c.id]?"–°–∫—Ä—ã—Ç—å –ø–∞—Ä—Å–µ—Ä":"–ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä—Å–µ—Ä"),9,_r),ce.value.has(c.id)?(i(),a("button",{key:0,class:"nudity-info-button",onClick:G=>ln(c.id),title:"–£–¥–∞–ª–∏—Ç—å –∏–∑ –∞–≤—Ç–æ–±–ª—é—Ä–∞"},o[69]||(o[69]=[e("i",{class:"fas fa-minus"},null,-1),e("span",null,"–£–¥–∞–ª–∏—Ç—å –∏–∑ –∞–≤—Ç–æ–±–ª—é—Ä–∞",-1)]),8,Er)):(i(),a("button",{key:1,class:"nudity-info-button",onClick:G=>cn(c.id),title:"–î–æ–±–∞–≤–∏—Ç—å –≤ –∞–≤—Ç–æ–±–ª—é—Ä"},o[70]||(o[70]=[e("i",{class:"fas fa-plus"},null,-1),e("span",null,"–î–æ–±–∞–≤–∏—Ç—å –≤ –∞–≤—Ç–æ–±–ª—é—Ä",-1)]),8,Mr)),fe.value.has(c.id)?(i(),a("button",{key:2,class:"nudity-info-button overlay-button",onClick:G=>mn(c.id),title:"–£–¥–∞–ª–∏—Ç—å –∏–∑ –æ–≤–µ—Ä–ª–µ—è"},o[71]||(o[71]=[e("i",{class:"fas fa-eye-slash"},null,-1),e("span",null,"–£–¥–∞–ª–∏—Ç—å –∏–∑ –æ–≤–µ—Ä–ª–µ—è",-1)]),8,xr)):(i(),a("button",{key:3,class:"nudity-info-button overlay-button",onClick:G=>vn(c.id),title:"–î–æ–±–∞–≤–∏—Ç—å –≤ –æ–≤–µ—Ä–ª–µ–π"},o[72]||(o[72]=[e("i",{class:"fas fa-eye"},null,-1),e("span",null,"–î–æ–±–∞–≤–∏—Ç—å –≤ –æ–≤–µ—Ä–ª–µ–π",-1)]),8,Lr))])):k("",!0),e("div",{class:E(["timing-hover-container",{blurred:c.status==="pending"}])},[e("span",Tr,g(c.timing_text),1),o[73]||(o[73]=e("br",null,null,-1)),e("span",Ir,"by "+g(c.username),1)],2),Ve.value[c.id]&&Array.isArray(Ve.value[c.id])?(i(),a("div",Sr,[o[74]||(o[74]=e("b",null,"–ü–∞—Ä—Å–µ—Ä(–∫ —Ç–∞–π–º–∏–Ω–≥–∞–º –¥–æ–±–∞–≤–∏—Ç—Å—è -1 –∏ +1 —Å–µ–∫—É–Ω–¥ –ø–æ –∫—Ä–∞—è–º —Ç–∞–π–º–∏–Ω–≥–∞ –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏, –Ω–æ –≤ –ø—Ä–µ–≤—å—é –ø–∞—Ä—Å–µ—Ä–∞ –∏—Ö –Ω–µ—Ç –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏):",-1)),Ve.value[c.id].length===0?(i(),a("span",Ar,"–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å")):(i(),a("span",Rr,[(i(!0),a(de,null,Me(Ve.value[c.id],(G,me)=>(i(),a("span",{key:me}," ["+g(Q(Oe)(G[0]))+" - "+g(Q(Oe)(G[1]))+"]"+g(me<Ve.value[c.id].length-1?", ":""),1))),128))]))])):k("",!0)])],2)}),128))])):(i(),a("div",Pr,g("–ó–∞–ø–∏—Å–µ–π –æ —Ç–∞–π–º–∏–Ω–≥–∞—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")))]),Ie.value&&ce.value.size>0?(i(),a("div",Nr,[e("h4",jr," –û–±—â–∏–π –ø–∞—Ä—Å–µ—Ä ("+g(ce.value.size)+" —Ç–∞–π–º–∏–Ω–≥–æ–≤): ",1),e("div",Br,[Fe().length===0?(i(),a("span",$r,"–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ç–∞–π–º–∏–Ω–≥–∏")):(i(),a("span",Ur,[(i(!0),a(de,null,Me(Fe(),(c,W)=>(i(),a("span",{key:W}," ["+g(Q(Oe)(c[0]))+" - "+g(Q(Oe)(c[1]))+"]"+g(W<Fe().length-1?", ":""),1))),128))]))])])):k("",!0),tt.value&&fe.value.size>0?(i(),a("div",Dr,[e("h4",Hr," –ü–∞—Ä—Å–µ—Ä –æ–≤–µ—Ä–ª–µ—è ("+g(fe.value.size)+" —Ç–∞–π–º–∏–Ω–≥–æ–≤): ",1),e("div",Or,[qt().length===0?(i(),a("span",Vr,"–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ç–∞–π–º–∏–Ω–≥–∏")):(i(),a("span",Fr,[(i(!0),a(de,null,Me(qt(),(c,W)=>(i(),a("span",{key:W}," ["+g(Q(Oe)(c[0]))+" - "+g(Q(Oe)(c[1]))+"]"+g(W<qt().length-1?", ":""),1))),128))]))])])):k("",!0),e("div",zr,[S.value.length>0?(i(),a("button",{key:0,class:"nudity-info-button",onClick:Tt},o[75]||(o[75]=[e("i",{class:"fas fa-copy"},null,-1),e("span",null,"–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å",-1)]))):k("",!0),ce.value.size>0?(i(),a("button",{key:1,class:"nudity-info-button",onClick:fn},[o[76]||(o[76]=e("i",{class:"fas fa-eye"},null,-1)),e("span",null,"–û–±—â–∏–π –ø–∞—Ä—Å–µ—Ä ("+g(ce.value.size)+")",1)])):k("",!0),fe.value.size>0?(i(),a("button",{key:2,class:"nudity-info-button overlay-button",onClick:pn},[o[77]||(o[77]=e("i",{class:"fas fa-layer-group"},null,-1)),e("span",null,"–ü–∞—Ä—Å–µ—Ä –æ–≤–µ—Ä–ª–µ—è ("+g(fe.value.size)+")",1)])):k("",!0),e("button",{class:"nudity-info-button",onClick:o[13]||(o[13]=c=>ue.value=!0)},o[78]||(o[78]=[e("i",{class:"fas fa-plus"},null,-1),e("span",null,"–î–æ–±–∞–≤–∏—Ç—å/–¥–æ–ø–æ–ª–Ω–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥",-1)]))])],2)])])):k("",!0),ue.value?(i(),a("div",qr,[e("div",Wr,[e("div",Kr,[o[80]||(o[80]=e("h3",null,"–î–æ–±–∞–≤–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥",-1)),e("button",{class:"close-modal-btn",onClick:o[14]||(o[14]=c=>ue.value=!1)},o[79]||(o[79]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",Gr,[ie(e("input",{"onUpdate:modelValue":o[15]||(o[15]=c=>It.value=c),placeholder:"–í–∞—à –Ω–∏–∫",class:"timing-input",maxlength:"50"},null,512),[[$t,It.value]]),ie(e("textarea",{"onUpdate:modelValue":o[16]||(o[16]=c=>yt.value=c),placeholder:"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ñ–∏–ª—å–º–∞(–≤ [] —Å–∫–æ–±–∫–∞—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä [01:36] –∏–ª–∏ [01:36:55]), –∫ –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã –ø—Ä–∏–ª–∞–≥–∞–µ—Ç–µ —Ç–∞–π–º–∏–Ω–≥\n–¢–∫ –∂–µ –¥–ª—è –∞–≤—Ç–æ–±–ª—é—Ä–∞ –ø—Ä–æ—à—É –≤—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏ —É–∫–∞–∑—ã–≤–∞—Ç—å –∫–∞–∫ –¥–∏–∞–ø–æ–∑–æ–Ω, –∞ –Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –≤—Ä–µ–º—è, –Ω–∞–ø—Ä–∏–º–µ—Ä 00:12:31-00:13:04 - —Ç–µ–∫—Å—Ç, –∞ –Ω–µ 00:12:31\n–î–ª—è —Å–µ—Ä–∏–∞–ª–æ–≤ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ —Å–µ–∑–æ–Ω –∏ –Ω–æ–º–µ—Ä —ç–ø–∏–∑–æ–¥–∞\n",class:"timing-textarea"},null,512),[[$t,yt.value]]),U.value&&U.value.length>0?(i(),a("div",Yr,[o[81]||(o[81]=e("div",{class:"timing-preview-header"},[e("i",{class:"fas fa-eye"}),e("span",null,"–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –ø–∞—Ä—Å–µ—Ä–∞")],-1)),e("div",Zr,[(i(!0),a(de,null,Me(U.value,(c,W)=>(i(),a("div",{key:W,class:"timing-preview-item"},[e("span",Xr,g(Q(Oe)(c[0]))+" - "+g(Q(Oe)(c[1])),1),e("span",Qr," ("+g(Math.round(c[1]-c[0]))+"—Å) ",1)]))),128))])])):k("",!0),e("div",Jr,[e("button",{class:"submit-timing-btn",onClick:je,disabled:!ee.value||ct.value},[ct.value?(i(),a("i",tu)):(i(),a("span",nu,"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é"))],8,eu)])])])])):k("",!0),Xe.value?(i(),a("div",{key:3,class:"modal-overlay",onClick:o[19]||(o[19]=c=>Xe.value=!1)},[e("div",{class:"modal-content",onClick:o[18]||(o[18]=Lt(()=>{},["stop"]))},[e("div",ou,[o[83]||(o[83]=e("h3",null,[oe(" –¢–æ–ø –∞–≤—Ç–æ—Ä–æ–≤ —Ç–∞–π–º–∏–Ω–≥–æ–≤ "),e("span",{class:"hint-text"},[oe("(–•–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —Å–≤–æ–π —Å—Ç—Ä–∏–º/—Å–æ—Ü—Å–µ—Ç–∏? –ù–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º –≤ "),e("a",{href:"https://t.me/reyohoho_sup",target:"_blank",rel:"noopener noreferrer"},"—Ç–µ–ª–µ–≥—Ä–∞–º"),oe(")")])],-1)),e("div",lu,[e("button",{class:"close-modal-btn",onClick:o[17]||(o[17]=c=>Xe.value=!1)},o[82]||(o[82]=[e("i",{class:"fas fa-times"},null,-1)]))])]),e("div",su,[e("button",{class:"show-all-timings-btn",onClick:St,disabled:ht.value},[ht.value?(i(),a("i",au)):(i(),a("i",ru)),o[84]||(o[84]=e("span",null,"–í—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏",-1))],8,iu),e("div",uu,[(i(!0),a(de,null,Me(Ae.value,(c,W)=>(i(),a("div",{key:c.username,class:"top-submitter-item"},[e("div",{class:E(["submitter-rank",{gold:W===0,silver:W===1,bronze:W===2}])},g(W+1),3),e("div",du,[e("div",cu,[c.stream_link?(i(),a("a",{key:0,href:c.stream_link,target:"_blank",rel:"noopener noreferrer"},[oe(g(c.username)+" ",1),o[85]||(o[85]=e("i",{class:"fa-brands fa-twitch"},null,-1))],8,vu)):(i(),a(de,{key:1},[oe(g(c.username),1)],64))]),e("div",mu,g(c.approved_submissions_count)+" "+g(un(c.approved_submissions_count,["—Ñ–∏–ª—å–º","—Ñ–∏–ª—å–º–∞","—Ñ–∏–ª—å–º–æ–≤"])),1)]),e("div",fu,[e("div",{class:"contribution-bar",style:Xt({width:dn(c.approved_submissions_count)+"%"})},null,4)])]))),128))])])])])):k("",!0),kt.value?(i(),a("div",{key:4,class:"modal-overlay",onClick:o[26]||(o[26]=c=>kt.value=!1)},[e("div",{class:"modal-content all-timings-modal",onClick:o[25]||(o[25]=Lt(()=>{},["stop"]))},[e("div",pu,[o[87]||(o[87]=e("h3",null,"–í—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏",-1)),e("button",{class:"close-modal-btn",onClick:o[20]||(o[20]=c=>kt.value=!1)},o[86]||(o[86]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",gu,[!ht.value&&Qe.value.length>0?(i(),a("div",yu,[e("button",{class:E(["timing-filter-btn",{active:lt.value==="all"}]),onClick:o[21]||(o[21]=c=>lt.value="all")}," –í—Å–µ ("+g(Qe.value.length)+") ",3),e("button",{class:E(["timing-filter-btn",{active:lt.value==="approved"}]),onClick:o[22]||(o[22]=c=>lt.value="approved")}," –û–¥–æ–±—Ä–µ–Ω–Ω—ã–µ ("+g(Qe.value.filter(c=>c.status==="approved").length)+") ",3),e("button",{class:E(["timing-filter-btn",{active:lt.value==="pending"}]),onClick:o[23]||(o[23]=c=>lt.value="pending")}," –ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ ("+g(Qe.value.filter(c=>c.status==="pending").length)+") ",3),e("button",{class:E(["timing-filter-btn",{active:lt.value==="clean_text"}]),onClick:o[24]||(o[24]=c=>lt.value="clean_text")}," –ù–µ –º–æ–¥–µ—Ä–∏—Ä—É—é—Ç—Å—è ("+g(Qe.value.filter(c=>c.status==="clean_text").length)+") ",3)])):k("",!0),ht.value?(i(),a("div",ku,o[88]||(o[88]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),e("span",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö —Ç–∞–π–º–∏–Ω–≥–æ–≤...",-1)]))):Qe.value.length===0?(i(),a("div",hu,o[89]||(o[89]=[e("p",null,"–¢–∞–π–º–∏–Ω–≥–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",-1)]))):tn.value.length===0?(i(),a("div",bu,o[90]||(o[90]=[e("p",null,"–¢–∞–π–º–∏–Ω–≥–∏ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —Ñ–∏–ª—å—Ç—Ä—É –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",-1)]))):(i(),a("div",wu,[(i(!0),a(de,null,Me(tn.value,c=>{var W;return i(),a("div",{key:c.id,class:E(["timing-item",{pending:c.status==="pending",approved:c.status==="approved",rejected:c.status==="rejected","clean-text":c.status==="clean_text"}])},[e("div",Cu,[e("div",_u,[e("span",{class:E(["timing-status",c.status])},g(Rt(c.status)),3),e("span",Eu,g(c.username),1),e("span",Mu,g(Q(Kn)(c.submitted_at)),1)]),e("div",xu,[Ce(V,{to:"/movie/".concat(c.kp_id),class:"timing-kp-id clickable",title:"–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ñ–∏–ª—å–º—É ".concat(c.kp_id)},{default:yn(()=>[oe(" KP: "+g(c.kp_id),1)]),_:2},1032,["to","title"]),(W=Q(n).user)!=null&&W.is_admin&&c.status==="pending"?(i(),a("div",Lu,[c.status==="pending"?(i(),a("button",{key:0,class:"approve-btn",onClick:G=>zt(c.id),disabled:Je.value,title:"–û–¥–æ–±—Ä–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥"},[vt.value===c.id&&bt.value?(i(),a("i",Iu)):(i(),a("i",Su))],8,Tu)):k("",!0),c.status==="pending"?(i(),a("button",{key:1,class:"reject-btn",onClick:G=>Ut(c.id),disabled:Je.value,title:"–û—Ç–∫–ª–æ–Ω–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥"},[vt.value===c.id&&!bt.value&&!ot.value?(i(),a("i",Ru)):(i(),a("i",Pu))],8,Au)):k("",!0),c.status==="pending"?(i(),a("button",{key:2,class:"clean-text-btn",onClick:G=>rn(c.id),disabled:Je.value,title:"–û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ clean_text"},[vt.value===c.id&&ot.value?(i(),a("i",ju)):(i(),a("i",Bu))],8,Nu)):k("",!0)])):k("",!0)])]),e("div",$u,[e("pre",Uu,g(c.timing_text),1)])],2)}),128))]))])])])):k("",!0)],64)}}},Ku=Ct(Du,[["__scopeId","data-v-5baa72cd"]]);export{Ku as default};
