{"version":3,"file":"User-D7R2GQ0t.js","sources":["../../src/components/User.vue"],"sourcesContent":["<template>\r\n  <div class=\"profile-container\">\r\n    <div class=\"profile-header\">\r\n      <h1>Профиль</h1>\r\n    </div>\r\n\r\n    <div class=\"profile-content\" v-if=\"user\">\r\n      <div class=\"profile-photo\">\r\n        <img v-lazy=\"photoURL\" alt=\"Profile Photo\" v-if=\"user.photo && photoURL\" />\r\n        <div class=\"photo-placeholder\" v-else>\r\n          {{ String.fromCodePoint(user.name.codePointAt(0)).toLocaleUpperCase() }}\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"profile-info\">\r\n        <div class=\"info-item\">\r\n          <label>Имя:</label>\r\n          <span>{{ user.name }}</span>\r\n        </div>\r\n\r\n        <div class=\"info-item\">\r\n          <label>Никнейм:</label>\r\n          <span>{{ user.username ?? 'Не указан' }}</span>\r\n        </div>\r\n      </div>\r\n\r\n      <button class=\"logout-btn\" @click=\"confirmLogout\">Выйти</button>\r\n    </div>\r\n\r\n    <div class=\"loading\" v-else>Загрузка профиля...</div>\r\n\r\n    <div class=\"dialog-overlay\" v-if=\"showDialog\">\r\n      <div class=\"dialog modern-dark-dialog\">\r\n        <div class=\"dialog-header\">\r\n          <h3>Выход</h3>\r\n        </div>\r\n        <div class=\"dialog-body\">\r\n          <p>Вы уверены?</p>\r\n        </div>\r\n        <div class=\"dialog-footer\">\r\n          <button class=\"modern-dark-btn\" @click=\"showDialog = false\">Отмена</button>\r\n          <button class=\"modern-dark-btn danger\" @click=\"logout\">Выйти</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted } from 'vue'\r\nimport { useAuthStore } from '@/store/auth'\r\nimport { useRouter } from 'vue-router'\r\nimport { getBaseURL } from '@/api/axios'\r\n\r\nexport default {\r\n  name: 'ProfilePage',\r\n\r\n  setup() {\r\n    const showDialog = ref(false)\r\n    const authStore = useAuthStore()\r\n    const router = useRouter()\r\n    const user = ref(authStore.user)\r\n    const photoURL = ref(null)\r\n\r\n    const confirmLogout = () => {\r\n      showDialog.value = true\r\n    }\r\n\r\n    const logout = async (openLogin = false) => {\r\n      showDialog.value = false\r\n      authStore.logout()\r\n      if (openLogin) {\r\n        await router.push('/')\r\n      } else {\r\n        await router.push('/login')\r\n      }\r\n      router.go(0)\r\n    }\r\n\r\n    onMounted(async () => {\r\n      if (!user.value) {\r\n        logout(true)\r\n      }\r\n\r\n      if (user.value.photo) {\r\n        const baseURL = await getBaseURL()\r\n        photoURL.value = `${baseURL}${user.value.photo}`\r\n      }\r\n    })\r\n\r\n    return {\r\n      user,\r\n      showDialog,\r\n      confirmLogout,\r\n      logout,\r\n      photoURL\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.profile-container {\r\n  max-width: 600px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n  font-family: Arial, sans-serif;\r\n}\r\n\r\n.profile-header {\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.profile-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 20px;\r\n}\r\n\r\n.profile-photo {\r\n  width: 150px;\r\n  height: 150px;\r\n  border-radius: 50%;\r\n  overflow: hidden;\r\n  background-color: #f0f0f0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.profile-photo img {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n.photo-placeholder {\r\n  font-size: 60px;\r\n  color: #666;\r\n}\r\n\r\n.profile-info {\r\n  width: 100%;\r\n  max-width: 300px;\r\n}\r\n\r\n.info-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 10px 0;\r\n  border-bottom: 1px solid #eee;\r\n}\r\n\r\n.info-item label {\r\n  font-weight: bold;\r\n  color: #555;\r\n}\r\n\r\n.logout-btn {\r\n  margin-top: 30px;\r\n  padding: 10px 20px;\r\n  background-color: #ff4444;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.logout-btn:hover {\r\n  background-color: #cc0000;\r\n}\r\n\r\n.loading {\r\n  text-align: center;\r\n  padding: 50px;\r\n  color: #666;\r\n}\r\n\r\n.dialog-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n}\r\n\r\n.dialog {\r\n  background-color: white;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  max-width: 400px;\r\n  width: 100%;\r\n}\r\n/* Modern Dark Dialog */\r\n.modern-dark-dialog {\r\n  background-color: #1d1d1d;\r\n  color: #e2e8f0;\r\n  border-radius: 12px;\r\n  overflow: hidden;\r\n  width: 320px;\r\n  box-shadow:\r\n    0 10px 15px -3px rgba(0, 0, 0, 0.3),\r\n    0 4px 6px -2px rgba(0, 0, 0, 0.25);\r\n}\r\n\r\n.dialog-header {\r\n  padding: 16px 20px;\r\n  border-bottom: 1px solid #4caf50;\r\n}\r\n\r\n.dialog-header h3 {\r\n  margin: 0;\r\n  font-size: 1.1rem;\r\n  font-weight: 600;\r\n}\r\n\r\n.dialog-body {\r\n  padding: 20px;\r\n}\r\n\r\n.dialog-body p {\r\n  margin: 0;\r\n  line-height: 1.5;\r\n}\r\n\r\n.dialog-footer {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 12px;\r\n  padding: 16px 20px;\r\n}\r\n\r\n.modern-dark-btn {\r\n  padding: 8px 16px;\r\n  border-radius: 6px;\r\n  border: none;\r\n  background-color: #242424;\r\n  color: #e2e8f0;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.modern-dark-btn:hover {\r\n  background-color: #2b2b2b;\r\n}\r\n\r\n.modern-dark-btn.danger {\r\n  background-color: #7f1d1d;\r\n  color: #fecaca;\r\n}\r\n\r\n.modern-dark-btn.danger:hover {\r\n  background-color: #991b1b;\r\n}\r\n</style>\r\n"],"names":["_sfc_main","showDialog","ref","authStore","useAuthStore","router","useRouter","user","photoURL","confirmLogout","logout","openLogin","onMounted","baseURL","getBaseURL","_hoisted_1","_hoisted_3","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_11","_hoisted_12","_openBlock","_createElementBlock","_createElementVNode","$setup","_hoisted_2","_withDirectives","_hoisted_4","_hoisted_5","_toDisplayString","_cache","_a","args","_hoisted_9","_hoisted_10","_createCommentVNode"],"mappings":"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"}