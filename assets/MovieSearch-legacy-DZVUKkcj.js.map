{"version":3,"file":"MovieSearch-legacy-DZVUKkcj.js","sources":["../../src/components/FooterDonaters.vue","../../src/components/MovieSearch.vue"],"sourcesContent":["<template>\n  <footer>\n    <div class=\"donaters-wrapper\">\n      <transition name=\"fade\" mode=\"out-in\">\n        <span v-if=\"currentDonater\" :key=\"currentIndex\" class=\"donater\">\n          {{ currentDonater }}\n        </span>\n      </transition>\n    </div>\n  </footer>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, onUnmounted } from 'vue'\nimport { getDons } from '@/api/movies'\n\nconst donaters = ref([])\nconst currentIndex = ref(-1)\nconst CACHE_KEY_DONATERS = 'donatersCache'\nlet intervalId = null\n\nconst currentDonater = computed(() => {\n  if (currentIndex.value === -1 || !donaters.value.length) return ''\n  return donaters.value[currentIndex.value]\n})\n\nconst fetchDonaters = async () => {\n  const today = new Date().toISOString().split('T')[0]\n  const cached = localStorage.getItem(CACHE_KEY_DONATERS)\n\n  if (cached) {\n    try {\n      const { date, data } = JSON.parse(cached)\n      if (date === today) {\n        donaters.value = data\n        return\n      }\n    } catch (e) {\n      console.error('Ошибка кэша донатеров:', e)\n    }\n  }\n\n  try {\n    const dons = await getDons()\n    donaters.value = dons\n      .split('\\n')\n      .map((line) => line.trim())\n      .filter((line) => line)\n    localStorage.setItem(\n      CACHE_KEY_DONATERS,\n      JSON.stringify({\n        date: today,\n        data: donaters.value\n      })\n    )\n  } catch (error) {\n    console.error('Ошибка загрузки донатеров:', error)\n  }\n}\n\nfunction updateCurrentDonater() {\n  if (!donaters.value.length) return\n  const newIndex = Math.floor(Math.random() * donaters.value.length)\n  currentIndex.value = newIndex\n}\n\nfunction startShowingDonaters() {\n  if (donaters.value.length === 0) return\n  updateCurrentDonater()\n  intervalId = setInterval(updateCurrentDonater, 4000)\n}\n\nonMounted(async () => {\n  await fetchDonaters()\n  startShowingDonaters()\n})\n\nonUnmounted(() => {\n  if (intervalId) clearInterval(intervalId)\n})\n</script>\n\n<style scoped>\n.donaters-wrapper {\n  width: 100%;\n  height: 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding-bottom: 10px;\n}\n\n.donater {\n  font-family: Neucha, sans-serif;\n  font-weight: bold;\n  color: rgba(255, 255, 255, 0.945);\n}\n\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 1s ease;\n}\n\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n</style>\n","<template>\n  <div class=\"wrapper\">\n    <div class=\"mainpage\">\n      <!-- Кнопки выбора типа поиска -->\n      <div class=\"search-type-buttons\">\n        <button :class=\"{ active: searchType === 'title' }\" @click=\"setSearchType('title')\">\n          Название\n        </button>\n        <button :class=\"{ active: searchType === 'kinopoisk' }\" @click=\"setSearchType('kinopoisk')\">\n          ID Кинопоиск\n        </button>\n        <button :class=\"{ active: searchType === 'shikimori' }\" @click=\"setSearchType('shikimori')\">\n          ID Shikimori\n        </button>\n        <button :class=\"{ active: searchType === 'imdb' }\" @click=\"setSearchType('imdb')\">\n          ID IMDB\n        </button>\n      </div>\n\n      <!-- Поиск -->\n      <div class=\"search-container\">\n        <div class=\"input-wrapper\">\n          <input\n            ref=\"searchInput\"\n            v-model=\"searchTerm\"\n            :placeholder=\"getPlaceholder()\"\n            class=\"search-input\"\n            :class=\"{ 'wrong-layout': showLayoutWarning }\"\n            :inputmode=\"searchType === 'title' ? 'text' : 'numeric'\"\n            @keydown.enter=\"search\"\n            @keydown.tab.prevent=\"handleTabKey\"\n            @input=\"handleInput\"\n          />\n          <div class=\"icons\">\n            <button v-if=\"searchTerm\" class=\"reset-button\" @click=\"resetSearch\">\n              <i class=\"fas fa-times\"></i>\n            </button>\n            <button class=\"search-button\" @click=\"search\">\n              <i class=\"fas fa-search\"></i>\n            </button>\n          </div>\n          <div v-if=\"showLayoutWarning\" class=\"layout-warning\" :class=\"{ 'show': showLayoutWarning }\">\n            <i class=\"fas fa-keyboard\"></i>\n            Возможно, вы используете неправильную раскладку. Нажмите Tab для переключения на {{ suggestedLayout }} раскладку\n          </div>\n        </div>\n      </div>\n\n      <!-- Контейнер для истории и результатов -->\n      <div class=\"content-container\">\n        <!-- История просмотра -->\n        <div v-if=\"!searchTerm\">\n          <h2>\n            История просмотра\n            <span v-if=\"history.length > 0\">\n              <DeleteButton @click=\"showModal = true\" />\n              <BaseModal\n                :is-open=\"showModal\"\n                message=\"Вы уверены, что хотите очистить историю?\"\n                @confirm=\"clearAllHistory\"\n                @close=\"showModal = false\"\n              />\n            </span>\n          </h2>\n          <div v-if=\"loading\" class=\"loading-container\">\n            <SpinnerLoading />\n          </div>\n          <div v-else-if=\"history.length === 0\" class=\"empty-history\">\n            <span class=\"material-icons\">movie</span>\n            <p>Здесь пока пусто</p>\n          </div>\n          <MovieList\n            v-else\n            :movies-list=\"history\"\n            :is-history=\"true\"\n            :loading=\"false\"\n            @item-deleted=\"handleItemDeleted\"\n          />\n        </div>\n        <ErrorMessage v-if=\"!searchTerm && errorMessage\" :message=\"errorMessage\" :code=\"errorCode\" />\n\n        <!-- Результаты поиска -->\n        <div v-if=\"searchPerformed\">\n          <h2>Результаты поиска</h2>\n          <MovieList :movies-list=\"movies\" :is-history=\"false\" :loading=\"loading\" />\n          <div v-if=\"movies.length === 0 && !loading && !errorMessage\" class=\"no-results\">\n            Ничего не найдено\n          </div>\n          <ErrorMessage v-if=\"errorMessage\" :message=\"errorMessage\" :code=\"errorCode\" />\n        </div>\n\n        <!-- Подсказка, когда ничего не введено в поиске -->\n        <div\n          v-if=\"searchTerm && !searchPerformed && !loading && !errorMessage\"\n          class=\"search-prompt\"\n        >\n          Нажмите кнопку \"Поиск\" или Enter для поиска\n        </div>\n      </div>\n    </div>\n    <FooterDonaters />\n  </div>\n</template>\n\n<script setup>\nimport { apiSearch, getKpIDfromIMDB, getKpIDfromSHIKI } from '@/api/movies'\nimport { handleApiError } from '@/constants'\nimport { getMyLists, delAllFromList } from '@/api/user'\nimport BaseModal from '@/components/BaseModal.vue'\nimport DeleteButton from '@/components/buttons/DeleteButton.vue'\nimport ErrorMessage from '@/components/ErrorMessage.vue'\nimport FooterDonaters from '@/components/FooterDonaters.vue'\nimport { MovieList } from '@/components/MovieList/'\nimport { useMainStore } from '@/store/main'\nimport { useAuthStore } from '@/store/auth'\nimport { USER_LIST_TYPES_ENUM } from '@/constants'\nimport { hasConsecutiveConsonants, suggestLayout, convertLayout } from '@/utils/keyboardLayout'\nimport debounce from 'lodash/debounce'\nimport { watchEffect, onMounted, ref, watch } from 'vue'\nimport { useRouter } from 'vue-router'\nimport SpinnerLoading from '@/components/SpinnerLoading.vue'\n\nconst mainStore = useMainStore()\nconst authStore = useAuthStore()\nconst router = useRouter()\n\nconst searchType = ref('title')\nconst searchTerm = ref('')\nconst movies = ref([])\nconst loading = ref(false)\nconst searchPerformed = ref(false)\nconst showModal = ref(false)\nconst errorMessage = ref('')\nconst errorCode = ref(null)\n\nconst history = ref([])\n\nconst showLayoutWarning = ref(false)\nconst suggestedLayout = ref('')\n\nwatchEffect(async () => {\n  if (authStore.token) {\n    loading.value = true\n    try {\n      history.value = await getMyLists(USER_LIST_TYPES_ENUM.HISTORY)\n    } catch (error) {\n      const { message, code } = handleApiError(error)\n      errorMessage.value = message\n      errorCode.value = code\n      console.error('Ошибка загрузки истории:', error)\n      if (code === 401) {\n        authStore.logout()\n        await router.push('/login')\n        router.go(0)\n      }\n    } finally {\n      loading.value = false\n    }\n  } else {\n    history.value = mainStore.history\n  }\n})\n\nfunction handleItemDeleted(deletedItemId) {\n  history.value = history.value.filter((item) => item.kp_id !== deletedItemId)\n}\n\n// Установка типа поиска\nconst setSearchType = (type) => {\n  searchType.value = type\n  resetSearch()\n  showLayoutWarning.value = false\n}\n\nconst handleInput = (event) => {\n  if (searchType.value === 'title') {\n    searchTerm.value = event.target.value\n    showLayoutWarning.value = hasConsecutiveConsonants(searchTerm.value)\n    if (showLayoutWarning.value) {\n      suggestedLayout.value = suggestLayout(searchTerm.value)\n    }\n  } else {\n    searchTerm.value = event.target.value.replace(/\\D+/g, '')\n  }\n}\n\nconst handleTabKey = () => {\n  if (showLayoutWarning.value) {\n    searchTerm.value = convertLayout(searchTerm.value)\n    showLayoutWarning.value = false\n  }\n}\n\n// Получение placeholder для input\nconst getPlaceholder = () => {\n  return (\n    {\n      title: 'Введите название фильма',\n      kinopoisk: 'Пример: 301 (Матрица)',\n      shikimori: 'Пример: 28171 (Повар-боец Сома)',\n      imdb: 'Пример: 0198781 (Корпорация монстров)'\n    }[searchType.value] || 'Введите название фильма'\n  )\n}\n\n// Очистка поиска\nconst resetSearch = () => {\n  searchTerm.value = ''\n  movies.value = []\n  searchPerformed.value = false\n}\n\nconst search = () => {\n  debouncedPerformSearch.cancel()\n  if (searchTerm.value) {\n    performSearch()\n  } else {\n    alert('Введите запрос для поиска')\n  }\n}\n\nconst performSearch = async () => {\n  loading.value = true\n  searchPerformed.value = true\n  movies.value = []\n\n  try {\n    if (searchType.value === 'kinopoisk') {\n      if (!/^\\d+$/.test(searchTerm.value)) {\n        searchTerm.value = searchTerm.value.replace(/\\D/g, '')\n      }\n      router.push({ name: 'movie-info', params: { kp_id: searchTerm.value } })\n      return\n    }\n\n    if (searchType.value === 'imdb') {\n      if (!/^\\d+$/.test(searchTerm.value)) {\n        searchTerm.value = searchTerm.value.replace(/\\D/g, '')\n      }\n      const response = await getKpIDfromIMDB(searchTerm.value)\n      if (response.id_kp) {\n        router.push({ name: 'movie-info', params: { kp_id: `${response.id_kp}` } })\n      } else {\n        throw new Error('Не найдено')\n      }\n      return\n    }\n\n    if (searchType.value === 'shikimori') {\n      if (!/^\\d+$/.test(searchTerm.value)) {\n        searchTerm.value = searchTerm.value.replace(/\\D/g, '')\n      }\n      const response = await getKpIDfromSHIKI(searchTerm.value)\n      if (response.id_kp) {\n        router.push({ name: 'movie-info', params: { kp_id: `${response.id_kp}` } })\n      } else {\n        throw new Error('Не найдено')\n      }\n      return\n    }\n    if (searchType.value === 'title') {\n      const response = await apiSearch(searchTerm.value)\n      movies.value = response.map((movie) => ({\n        ...movie,\n        kp_id: movie.id.toString(),\n        rating_kp: movie.raw_data?.rating !== 'null' ? movie.raw_data?.rating : null,\n        type: movie.raw_data?.type\n      }))\n    }\n  } catch (error) {\n    const { message, code } = handleApiError(error)\n    errorMessage.value = message\n    errorCode.value = code\n    console.error('Ошибка при поиске:', error)\n  } finally {\n    loading.value = false\n  }\n}\n\nconst clearAllHistory = async () => {\n  loading.value = true\n  if (authStore.token) {\n    try {\n      await delAllFromList(USER_LIST_TYPES_ENUM.HISTORY)\n      history.value = []\n      loading.value = false\n      showModal.value = false\n    } catch (error) {\n      const { message, code } = handleApiError(error)\n      errorMessage.value = message\n      errorCode.value = code\n      console.error('Ошибка загрузки истории:', error)\n      if (code === 401) {\n        authStore.logout()\n        await router.push('/login')\n        router.go(0)\n      }\n      loading.value = false\n      showModal.value = false\n    }\n  } else {\n    mainStore.clearAllHistory()\n    loading.value = false\n    showModal.value = false\n  }\n}\n\nconst debouncedPerformSearch = debounce(() => {\n  if (searchTerm.value.length >= 2) {\n    performSearch()\n  } else if (searchTerm.value.length < 2) {\n    movies.value = []\n    searchPerformed.value = false\n  }\n}, 700)\n\nonMounted(() => {\n  const hash = window.location.hash\n  if (hash.startsWith('#search=')) {\n    const searchQuery = decodeURIComponent(hash.replace('#search=', ''))\n    searchTerm.value = searchQuery\n    performSearch()\n  } else if (hash.startsWith('#imdb=')) {\n    const imdbId = decodeURIComponent(hash.replace('#imdb=', ''))\n    setSearchType('imdb')\n    searchTerm.value = imdbId\n    performSearch()\n  } else if (hash.startsWith('#shiki')) {\n    const shikiId = decodeURIComponent(hash.replace('#shiki', ''))\n    setSearchType('shikimori')\n    searchTerm.value = shikiId\n    performSearch()\n  }\n})\n\n// Автопоиск с задержкой (только для поиска по названию)\nwatch(searchTerm, () => {\n  if (searchType.value !== 'title') {\n    return\n  }\n  debouncedPerformSearch()\n})\n</script>\n\n<style scoped>\n.wrapper {\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n}\n\n.mainpage {\n  flex: 1;\n  padding-top: 20px;\n  padding-bottom: 40px;\n}\n\n/* Общие стили */\n.search-type-buttons {\n  display: flex;\n  justify-content: center;\n  gap: 20px;\n  padding-top: 10px;\n  margin-bottom: 5px;\n  flex-wrap: wrap;\n}\n\n.search-type-buttons button {\n  padding: 5px 10px;\n  font-size: 16px;\n  border: none;\n  background: none;\n  color: #fff;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  position: relative;\n}\n\n.search-type-buttons button::after {\n  content: '';\n  position: absolute;\n  left: 0;\n  bottom: -2px;\n  width: 100%;\n  height: 2px;\n  background-color: transparent;\n  transition: background-color 0.3s ease;\n}\n\n.search-type-buttons button.active::after {\n  background-color: #ffffff;\n}\n\n.search-type-buttons button:hover {\n  color: #ffffff;\n}\n\n.search-container {\n  display: flex;\n  justify-content: center;\n  padding: 20px;\n}\n\n.input-wrapper {\n  position: relative;\n  width: 100%;\n  max-width: 800px;\n}\n\n.search-input {\n  box-sizing: border-box;\n  width: 100%;\n  padding: 10px;\n  font-size: 16px;\n  border: 1px solid #ccc;\n  border-radius: 10px;\n  background: rgba(30, 30, 30, 0.8);\n  color: #fff;\n  transition: border-color 0.3s ease;\n}\n\n.search-input.wrong-layout {\n  border-color: #ff8c00;\n  box-shadow: 0 0 5px rgba(255, 140, 0, 0.2);\n}\n\n.icons {\n  position: absolute;\n  right: 10px;\n  top: 50%;\n  transform: translateY(-50%);\n  display: flex;\n  gap: 8px;\n  align-items: center;\n}\n\n.reset-button,\n.search-button {\n  background: none;\n  border: none;\n  color: #fff;\n  cursor: pointer;\n  padding: 2px;\n  opacity: 0.7;\n  transition: opacity 0.2s ease;\n}\n\n.reset-button:hover,\n.search-button:hover {\n  opacity: 1;\n}\n\n.reset-button i,\n.search-button i {\n  font-size: 18px;\n  display: block;\n  width: 20px;\n  height: 20px;\n}\n\nh2 {\n  display: flex;\n  font-size: 20px;\n  margin-bottom: 20px;\n  justify-content: center;\n  align-items: center;\n  gap: 10px;\n}\n\n/* Сообщение \"Ничего не найдено\" */\n.no-results {\n  width: 100%;\n  text-align: center;\n  color: #fff;\n  font-size: 18px;\n  margin-top: 20px;\n}\n\n/* Подсказка для поиска */\n.search-prompt {\n  text-align: center;\n  color: #fff;\n  font-size: 18px;\n  margin-top: 20px;\n}\n\n.layout-warning {\n  position: absolute;\n  bottom: -40px;\n  left: 0;\n  right: 0;\n  text-align: center;\n  color: #ff8c00;\n  font-size: 14px;\n  background: rgba(255, 140, 0, 0.15);\n  padding: 8px 12px;\n  border-radius: 5px;\n  pointer-events: none;\n  border: 1px solid rgba(255, 140, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  opacity: 0;\n  transform: translateY(-10px);\n  transition: all 0.3s ease;\n  z-index: 1;\n  backdrop-filter: blur(5px);\n}\n\n.layout-warning.show {\n  opacity: 1;\n  transform: translateY(0);\n}\n\n.layout-warning i {\n  font-size: 16px;\n  color: #ff8c00;\n}\n\n.layout-warning {\n  color: #ff8c00;\n}\n\n.loading-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 200px;\n  width: 100%;\n}\n\n.empty-history {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-height: 200px;\n  color: #888;\n  gap: 15px;\n}\n\n.empty-history .material-icons {\n  font-size: 64px;\n  color: #888;\n  opacity: 0.7;\n}\n\n.empty-history p {\n  font-size: 18px;\n  margin: 0;\n  color: #888;\n}\n\n@media (max-width: 600px) {\n  .mainpage {\n    padding-top: 0;\n    height: calc(100vh - 30px - 63px);\n  }\n\n  .search-container,\n  .search-type-buttons {\n    padding: 0;\n  }\n}\n</style>\n"],"names":["CACHE_KEY_DONATERS","donaters","ref","currentIndex","intervalId","currentDonater","computed","value","length","fetchDonaters","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","today","cached","_JSON$parse","date","data","dons","wrap","_callee$","_context","prev","next","Date","toISOString","split","localStorage","getItem","JSON","parse","abrupt","t0","console","error","getDons","sent","map","line","trim","filter","setItem","stringify","t1","stop","apply","this","arguments","updateCurrentDonater","newIndex","Math","floor","random","onMounted","_callee2","_context2","setInterval","onUnmounted","clearInterval","mainStore","useMainStore","authStore","useAuthStore","router","useRouter","searchType","searchTerm","movies","loading","searchPerformed","showModal","errorMessage","errorCode","history","showLayoutWarning","suggestedLayout","handleItemDeleted","deletedItemId","item","kp_id","watchEffect","_callee3","_handleApiError","message","code","_context3","token","getMyLists","USER_LIST_TYPES_ENUM","HISTORY","handleApiError","logout","push","go","finish","setSearchType","type","resetSearch","handleInput","event","target","hasConsecutiveConsonants","suggestLayout","replace","handleTabKey","convertLayout","search","debouncedPerformSearch","cancel","performSearch","alert","_ref4","_callee4","response","_response","_response2","_handleApiError2","_context4","test","name","params","getKpIDfromIMDB","id_kp","Error","getKpIDfromSHIKI","apiSearch","movie","_movie$raw_data","_movie$raw_data2","_movie$raw_data3","_objectSpread","id","toString","rating_kp","raw_data","rating","clearAllHistory","_ref5","_callee5","_handleApiError3","_context5","delAllFromList","debounce","hash","window","location","startsWith","searchQuery","decodeURIComponent","imdbId","shikiId","watch","title","kinopoisk","shikimori","imdb"],"mappings":"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"}