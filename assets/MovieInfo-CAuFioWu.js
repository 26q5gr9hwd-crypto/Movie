import{_ as Ae,u as Ht,c as j,r as f,o as rt,x as Ce,S as hn,b as a,h as v,d as e,p as te,V as Tt,O as K,P as ee,t as c,f as i,n as x,W as Kn,v as Gn,y as Me,l as ut,X as Ee,B as Ft,Y as Yn,e as Z,w as At,j as ae,m as U,Z as pt,$ as Ot,i as Ke,q as bn,a0 as Zn,a1 as Qn,a2 as Xn,a3 as Jn,a4 as dn,a5 as $n,N as eo,a6 as to,a as Ut,E as no,A as q,a7 as St,U as X,a8 as cn,a9 as mn,aa as oo,ab as so,ac as lo,ad as vn,G as we,ae as io,af as ao,ag as ro,ah as uo,ai as co,aj as mo,ak as vo,al as fo,am as go,an as ko,ao as yo}from"./index-BSbE3XI9.js";import{a as fn,b as gn}from"./icon-imdb-logo-5qtstUwS.js";import{P as kn,M as ho,_ as bt,a as bo}from"./MovieRating-CNTd7XYA.js";import{f as po,a as pn,p as It,b as Ue}from"./dateUtils-BWepax9P.js";import{M as yn}from"./MovieList-cIGouEQ4.js";import{S as _o}from"./SpinnerLoading-CkfANdW7.js";import{u as wo}from"./player-B9qwiCYq.js";import{N as _n}from"./ToastMessage-DeKJ45Zs.js";import{u as Co}from"./trailer-CAa9zPcw.js";import{u as wn}from"./useCommentFormatting-PC7jYMXg.js";import{B as Eo}from"./BaseModal-BUIKwVS-.js";const Lo={key:0,class:"carousel-container"},Mo={class:"carousel-wrapper"},So=["onClick"],Io=["src","alt"],To={class:"video-name"},xo={key:0,class:"video-player"},Ro=["src"],Po={__name:"TrailerCarousel",props:{videos:{type:Array,required:!0},activeVideoIndex:{type:Number,default:null}},emits:["select"],setup(r,{emit:t}){const d=Ht(),o=j(()=>d.isMobile),w=r,h=t,m=f(w.activeVideoIndex),b=f(null),_=f(!1),C=f(!1),k=()=>{if(!b.value)return;const{scrollLeft:S,scrollWidth:L,clientWidth:P}=b.value;_.value=S>0,C.value=S<L-P-1},s=S=>{if(!b.value)return;const L=b.value.querySelector(".carousel-item");if(!L)return;const P=L.clientWidth+16;b.value.scrollBy({left:P*S,behavior:"smooth"})},p=S=>{m.value=S,h("select",w.videos[S])},B=()=>k(),g=f([]),I=async S=>{try{return(await fetch("https://img.youtube.com/vi/".concat(S,"/0.jpg"))).ok}catch(L){return!1}};return rt(async()=>{const S=w.videos.map(async P=>await I(P.videoId)?P:null),L=await Promise.all(S);g.value=L.filter(Boolean),k(),window.addEventListener("resize",B)}),Ce(()=>w.videos,async S=>{const L=S.map(async H=>await I(H.videoId)?H:null),P=await Promise.all(L);g.value=P.filter(Boolean)}),Ce(()=>w.activeVideoIndex,S=>{m.value=S}),hn(()=>{window.removeEventListener("resize",B)}),(S,L)=>g.value.length?(i(),a("div",Lo,[L[4]||(L[4]=e("h2",null,"–¢—Ä–µ–π–ª–µ—Ä—ã (YouTube)",-1)),e("div",Mo,[te(e("button",{class:"scroll-button left",onClick:L[0]||(L[0]=P=>s(-1))},L[2]||(L[2]=[e("span",{class:"material-symbols-outlined"},"arrow_back_ios",-1)]),512),[[Tt,!o.value&&_.value]]),e("div",{ref_key:"carousel",ref:b,class:"carousel",onScroll:k},[(i(!0),a(K,null,ee(g.value,(P,H)=>(i(),a("div",{key:H,class:"carousel-item",onClick:O=>p(H)},[e("img",{src:"https://img.youtube.com/vi/".concat(P.videoId,"/0.jpg"),alt:P.name},null,8,Io),e("div",To,c(P.name),1)],8,So))),128))],544),te(e("button",{class:"scroll-button right",onClick:L[1]||(L[1]=P=>s(1))},L[3]||(L[3]=[e("span",{class:"material-symbols-outlined"},"arrow_forward_ios",-1)]),512),[[Tt,!o.value&&C.value]])]),m.value!==null?(i(),a("div",xo,[e("iframe",{src:r.videos[m.value].iframeUrl,frameborder:"0",allowfullscreen:""},null,8,Ro)])):v("",!0)])):v("",!0)}},jo=Ae(Po,[["__scopeId","data-v-4a5806b3"]]),Bo={name:"EmojiPicker",props:{isVisible:{type:Boolean,default:!1}},emits:["emoji-selected","mouse-enter","mouse-leave","close"],data(){return{activeCategory:"smileys",categories:[{name:"smileys",icon:"üòÄ",emojis:["üòÄ","üòÉ","üòÑ","üòÅ","üòÜ","üòÖ","üòÇ","ü§£","üòä","üòá","üôÇ","üôÉ","üòâ","üòå","üòç","ü•∞","üòò","üòó","üòô","üòö","üòã","üòõ","üòù","üòú","ü§™","ü§®","üßê","ü§ì","üòé","ü§©","ü•≥"]},{name:"emotions",icon:"üò¢",emojis:["üò•","üò¢","üò≠","üò§","üò†","üò°","ü§¨","ü§Ø","üò≥","ü•µ","ü•∂","üò±","üò®","üò∞","üò•","üòì","ü§ó","ü§î","ü§≠","ü§´","ü§•","üò∂","üòê","üòë","üò¨","üôÑ","üòØ","üò¶","üòß","üòÆ","üò≤"]},{name:"gestures",icon:"üëç",emojis:["üëç","üëé","üëå","ü§å","ü§è","‚úåÔ∏è","ü§û","ü§ü","ü§ò","ü§ô","üëà","üëâ","üëÜ","üñï","üëá","‚òùÔ∏è","üëè","üôå","üëê","ü§≤","ü§ù","üôè","‚úçÔ∏è","üí™","ü¶æ","ü¶ø","ü¶µ","ü¶∂","üëÇ","ü¶ª","üëÉ"]},{name:"hearts",icon:"‚ù§Ô∏è",emojis:["‚ù§Ô∏è","üß°","üíõ","üíö","üíô","üíú","ü§é","üñ§","ü§ç","üíî","‚ù£Ô∏è","üíï","üíû","üíì","üíó","üíñ","üíò","üíù","üíü","‚ô•Ô∏è","üíØ","üí¢","üí•","üí´","üí¶","üí®","üï≥Ô∏è","üí£","üí¨","üëÅÔ∏è‚Äçüó®Ô∏è","üó®Ô∏è"]},{name:"objects",icon:"üéâ",emojis:["üéâ","üéä","üéà","üéÅ","üéÄ","üéÇ","üç∞","üßÅ","üç≠","üç¨","üç´","üç©","üç™","üçï","üçî","üçü","üå≠","ü•™","üåÆ","üåØ","ü•ô","ü•ö","üç≥","ü•ò","üç≤","ü•ó","üçø","üßà","üßÄ","ü•®","ü•Ø"]}]}},computed:{currentEmojis(){const r=this.categories.find(t=>t.name===this.activeCategory);return r?r.emojis:[]}},methods:{selectEmoji(r){this.$emit("emoji-selected",r)}}},No={class:"emoji-categories"},Uo=["onClick"],Ao={class:"emoji-grid"},Oo=["onClick"];function Ho(r,t,d,o,w,h){return d.isVisible?(i(),a("div",{key:0,class:"emoji-picker",onMouseenter:t[1]||(t[1]=m=>r.$emit("mouse-enter")),onMouseleave:t[2]||(t[2]=m=>r.$emit("mouse-leave"))},[e("button",{class:"close-btn mobile-only",onClick:t[0]||(t[0]=m=>r.$emit("close"))},t[3]||(t[3]=[e("i",{class:"fas fa-times"},null,-1)])),e("div",No,[(i(!0),a(K,null,ee(w.categories,m=>(i(),a("button",{key:m.name,onClick:b=>w.activeCategory=m.name,class:x([{active:w.activeCategory===m.name},"category-btn"]),type:"button"},c(m.icon),11,Uo))),128))]),e("div",Ao,[(i(!0),a(K,null,ee(h.currentEmojis,m=>(i(),a("button",{key:m,onClick:b=>h.selectEmoji(m),class:"emoji-btn",type:"button"},c(m),9,Oo))),128))])],32)):v("",!0)}const Vt=Ae(Bo,[["render",Ho],["__scopeId","data-v-209132f3"]]),Fo=async r=>{const t=await Kn();return await r(t)},Vo=async r=>{const{data:t}=await Fo(d=>d.get("/search_emotes/".concat(r)));return t.emotes||[]},Do={name:"ImagePicker",props:{isVisible:{type:Boolean,required:!0},currentUser:{type:Object,default:null}},emits:["image-selected","mouse-enter","mouse-leave","close","login-required"],setup(r,{emit:t}){const d=f(""),o=f([]),w=f(null),h=f(!1),b=Gn(async s=>{if(!r.currentUser){console.warn("–ü–æ–ø—ã—Ç–∫–∞ –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏");return}if(!s.trim()){o.value=[],h.value=!1;return}h.value=!0;try{o.value=await Vo(s)}catch(p){console.error("Error searching images:",p),o.value=[]}finally{h.value=!1}},300),_=()=>{if(!r.currentUser){t("login-required");return}d.value.trim()&&(h.value=!0),b(d.value)},C=s=>{if(!r.currentUser){t("login-required");return}t("image-selected",s),t("close")},k=()=>{setTimeout(()=>{r.isVisible&&t("mouse-leave")},100)};return Ce(()=>r.isVisible,s=>{s&&(d.value="",o.value=[],h.value=!1)}),{searchQuery:d,images:o,searchInput:w,isLoading:h,handleSearch:_,selectImage:C,handleInputBlur:k}}},qo={key:0,class:"auth-required"},zo={class:"auth-message"},Wo={key:1},Ko={class:"image-picker-header"},Go={class:"image-content"},Yo={key:0,class:"loading-spinner"},Zo={key:1,class:"image-grid"},Qo=["onClick"],Xo=["src","alt"],Jo={key:2,class:"no-images"},$o={key:3,class:"no-search"};function es(r,t,d,o,w,h){return d.isVisible?(i(),a("div",{key:0,class:"image-picker",onMouseenter:t[7]||(t[7]=m=>r.$emit("mouse-enter")),onMouseleave:t[8]||(t[8]=m=>r.$emit("mouse-leave")),onClick:t[9]||(t[9]=ut(()=>{},["stop"]))},[e("button",{class:"close-btn mobile-only",onClick:t[0]||(t[0]=m=>r.$emit("close"))},t[10]||(t[10]=[e("i",{class:"fas fa-times"},null,-1)])),d.currentUser?(i(),a("div",Wo,[e("div",Ko,[te(e("input",{ref:"searchInput",type:"text","onUpdate:modelValue":t[2]||(t[2]=m=>o.searchQuery=m),placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–º–∞–π–ª–∞ 7tv",class:"image-search-input",onInput:t[3]||(t[3]=(...m)=>o.handleSearch&&o.handleSearch(...m)),onClick:t[4]||(t[4]=ut(()=>{},["stop"])),onFocus:t[5]||(t[5]=m=>r.$emit("mouse-enter")),onBlur:t[6]||(t[6]=(...m)=>o.handleInputBlur&&o.handleInputBlur(...m))},null,544),[[Me,o.searchQuery]])]),e("div",Go,[o.isLoading?(i(),a("div",Yo,t[14]||(t[14]=[e("div",{class:"spinner"},null,-1),e("p",null,"–ü–æ–∏—Å–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...",-1)]))):o.images.length>0?(i(),a("div",Zo,[(i(!0),a(K,null,ee(o.images,(m,b)=>(i(),a("div",{key:b,class:"image-item",onClick:_=>o.selectImage(m)},[e("img",{src:m,alt:"Image "+(b+1)},null,8,Xo)],8,Qo))),128))])):o.searchQuery.trim()?(i(),a("div",Jo,t[15]||(t[15]=[e("p",null,"–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤",-1)]))):(i(),a("div",$o,t[16]||(t[16]=[e("p",null,"–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞",-1)])))])])):(i(),a("div",qo,[e("div",zo,[t[11]||(t[11]=e("i",{class:"fas fa-lock"},null,-1)),t[12]||(t[12]=e("h3",null,"–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è",-1)),t[13]||(t[13]=e("p",null,"–î–ª—è –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç",-1)),e("button",{class:"login-button",onClick:t[1]||(t[1]=m=>r.$emit("login-required"))},"–í–æ–π—Ç–∏")])]))],32)):v("",!0)}const Dt=Ae(Do,[["render",es],["__scopeId","data-v-f33eb3f6"]]),ts={name:"LinkModal",props:{isVisible:{type:Boolean,default:!1},selectedText:{type:String,default:""}},emits:["close","submit"],setup(r,{emit:t}){const d=f(""),o=f(""),w=f(null),h=f(null),m=j(()=>/^https?:\/\/.+/.test(d.value.trim())&&o.value.trim()),b=()=>{t("close"),C()},_=()=>{m.value&&(t("submit",{url:d.value.trim(),title:o.value.trim()}),b())},C=()=>{d.value="",o.value=""},k=s=>{var p;s.key==="Enter"?(s.preventDefault(),m.value?_():s.target===w.value&&d.value.trim()&&((p=h.value)==null||p.focus())):s.key==="Escape"&&b()};return Ce(()=>r.isVisible,s=>{s&&(r.selectedText.trim()&&(o.value=r.selectedText.trim()),Ee(()=>{var p;(p=w.value)==null||p.focus()}))}),{linkUrl:d,linkTitle:o,urlInput:w,titleInput:h,isValidLink:m,closeModal:b,submitLink:_,handleKeydown:k}}},ns={class:"link-modal-header"},os={class:"link-modal-content"},ss={class:"form-group"},ls={class:"form-group"},is={class:"link-modal-footer"},as=["disabled"];function rs(r,t,d,o,w,h){return d.isVisible?(i(),a("div",{key:0,class:"link-modal-overlay",onClick:t[8]||(t[8]=(...m)=>o.closeModal&&o.closeModal(...m))},[e("div",{class:"link-modal",onClick:t[7]||(t[7]=ut(()=>{},["stop"]))},[e("div",ns,[t[10]||(t[10]=e("h3",null,"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É",-1)),e("button",{class:"close-button",onClick:t[0]||(t[0]=(...m)=>o.closeModal&&o.closeModal(...m))},t[9]||(t[9]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",os,[e("div",ss,[t[11]||(t[11]=e("label",{for:"link-url"},"URL —Å—Å—ã–ª–∫–∏:",-1)),te(e("input",{id:"link-url",ref:"urlInput","onUpdate:modelValue":t[1]||(t[1]=m=>o.linkUrl=m),type:"url",placeholder:"https://example.com",class:"link-input",onKeydown:t[2]||(t[2]=(...m)=>o.handleKeydown&&o.handleKeydown(...m))},null,544),[[Me,o.linkUrl]])]),e("div",ls,[t[12]||(t[12]=e("label",{for:"link-title"},"–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏:",-1)),te(e("input",{id:"link-title",ref:"titleInput","onUpdate:modelValue":t[3]||(t[3]=m=>o.linkTitle=m),type:"text",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è",class:"link-input",onKeydown:t[4]||(t[4]=(...m)=>o.handleKeydown&&o.handleKeydown(...m))},null,544),[[Me,o.linkTitle]])])]),e("div",is,[e("button",{class:"cancel-button",onClick:t[5]||(t[5]=(...m)=>o.closeModal&&o.closeModal(...m))},"–û—Ç–º–µ–Ω–∞"),e("button",{class:"submit-button",disabled:!o.isValidLink,onClick:t[6]||(t[6]=(...m)=>o.submitLink&&o.submitLink(...m))},"–î–æ–±–∞–≤–∏—Ç—å",8,as)])])])):v("",!0)}const qt=Ae(ts,[["render",rs],["__scopeId","data-v-a794d83f"]]);function us(){const r=f(!1),t=f(!1),d=f(!1),o=()=>{t.value=!0},w=()=>{t.value=!1,setTimeout(()=>{!t.value&&!d.value&&(r.value=!1)},300)},h=()=>{d.value=!0,r.value=!0},m=()=>{d.value=!1,setTimeout(()=>{!t.value&&!d.value&&(r.value=!1)},300)},b=()=>{r.value=!1};return{showEmojiPicker:r,isEmojiHovered:t,isButtonHovered:d,handleEmojiMouseEnter:o,handleEmojiMouseLeave:w,handleButtonMouseEnter:h,handleButtonMouseLeave:m,closeEmojiPicker:b,insertEmoji:(k,s,p,B)=>{const g=s.value;if(g){const I=g.selectionStart,S=g.selectionEnd,L=p.value.substring(0,I),P=p.value.substring(S),H=L+k+P;B(H),Ee(()=>{g.focus(),g.setSelectionRange(I+k.length,I+k.length),g.style.height&&(g.style.height="auto",g.style.height="".concat(Math.min(g.scrollHeight,200),"px"))})}else B(p.value+k)},handleGlobalClick:k=>{!k.target.closest(".emoji-picker")&&!k.target.closest(".emoji-button-inline")&&b()}}}function ds(){const r=f(!1),t=f(!1),d=f(!1),o=()=>{t.value=!0},w=()=>{t.value=!1,setTimeout(()=>{!t.value&&!d.value&&(r.value=!1)},300)},h=()=>{d.value=!0,r.value=!0},m=()=>{d.value=!1,setTimeout(()=>{!t.value&&!d.value&&(r.value=!1)},300)},b=()=>{r.value=!1};return{showImagePicker:r,isImageHovered:t,isButtonHovered:d,handleImageMouseEnter:o,handleImageMouseLeave:w,handleImageButtonMouseEnter:h,handleButtonMouseLeave:m,closeImagePicker:b,insertImage:(k,s,p,B)=>{const g=s.value;if(g){const I=g.selectionStart,S=g.selectionEnd,L="[img]".concat(k,"[/img]"),P=p.value.slice(0,I)+L+p.value.slice(S);B(P),Ee(()=>{g.focus(),g.setSelectionRange(I+L.length,I+L.length),g.style.height&&(g.style.height="auto",g.style.height="".concat(Math.min(g.scrollHeight,200),"px"))})}else{const I="[img]".concat(k,"[/img]");B(p.value+I)}},handleGlobalClick:k=>{!k.target.closest(".image-picker")&&!k.target.closest(".emoji-button-inline")&&b()}}}function cs(){const r=f(!1),t=f("");return{showLinkModal:r,selectedTextForLink:t,insertLink:(m,b)=>{const _=m.value;if(_){const C=_.selectionStart,k=_.selectionEnd,s=b.value.slice(C,k);t.value=s.trim()||""}r.value=!0},insertLinkFromModal:(m,b,_,C)=>{const k=b.value;if(k){const s=k.selectionStart,p=k.selectionEnd,B="[link=".concat(m.url,"]").concat(m.title,"[/link]"),g=_.value.slice(0,s)+B+_.value.slice(p);C(g),Ee(()=>{k.focus(),k.setSelectionRange(s+B.length,s+B.length),k.style.height&&(k.style.height="auto",k.style.height="".concat(Math.min(k.scrollHeight,200),"px"))})}},closeLinkModal:()=>{r.value=!1},insertSpoiler:(m,b,_)=>{const C=m.value;if(C){const k=C.selectionStart,s=C.selectionEnd,p=b.value.slice(k,s);let B;p.trim()?B="[spoiler]".concat(p,"[/spoiler]"):B="[spoiler][/spoiler]";const g=b.value.slice(0,k)+B+b.value.slice(s);_(g),Ee(()=>{if(C.focus(),p.trim())C.setSelectionRange(k+B.length,k+B.length);else{const I=k+9;C.setSelectionRange(I,I)}C.style.height&&(C.style.height="auto",C.style.height="".concat(Math.min(C.scrollHeight,200),"px"))})}}}}function ms(){return{autoResize:d=>{const o=d==null?void 0:d.target;o&&(o.style.height="auto",o.style.height="".concat(Math.min(o.scrollHeight,200),"px"))},autoResizeElement:d=>{d&&(d.style.height="auto",d.style.height="".concat(Math.min(d.scrollHeight,200),"px"))}}}function zt(){const r=us(),t=ds(),d=cs(),{autoResize:o,autoResizeElement:w}=ms(),h=()=>{r.isButtonHovered.value=!0,t.isButtonHovered.value=!0,r.showEmojiPicker.value=!0,t.showImagePicker.value=!1},m=()=>{r.isButtonHovered.value=!0,t.isButtonHovered.value=!0,t.showImagePicker.value=!0,r.showEmojiPicker.value=!1},b=()=>{r.isButtonHovered.value=!1,t.isButtonHovered.value=!1,setTimeout(()=>{!r.isEmojiHovered.value&&!t.isImageHovered.value&&!r.isButtonHovered.value&&!t.isButtonHovered.value&&(r.showEmojiPicker.value=!1,t.showImagePicker.value=!1)},300)},_=()=>{r.showEmojiPicker.value=!1,t.showImagePicker.value=!1},C=I=>{!I.target.closest(".emoji-picker")&&!I.target.closest(".image-picker")&&!I.target.closest(".emoji-button-inline")&&_()},k=(I,S,L,P)=>{r.insertEmoji(I,S,L,P)},s=(I,S,L,P)=>{t.insertImage(I,S,L,P)},p=(I,S,L)=>{d.insertLink(I,S,L)},B=(I,S,L,P)=>{d.insertLinkFromModal(I,S,L,P)},g=(I,S,L)=>{d.insertSpoiler(I,S,L)};return rt(()=>{document.addEventListener("click",C)}),hn(()=>{document.removeEventListener("click",C)}),{showEmojiPicker:r.showEmojiPicker,handleEmojiMouseEnter:r.handleEmojiMouseEnter,handleEmojiMouseLeave:r.handleEmojiMouseLeave,closeEmojiPicker:r.closeEmojiPicker,showImagePicker:t.showImagePicker,handleImageMouseEnter:t.handleImageMouseEnter,handleImageMouseLeave:t.handleImageMouseLeave,closeImagePicker:t.closeImagePicker,showLinkModal:d.showLinkModal,selectedTextForLink:d.selectedTextForLink,closeLinkModal:d.closeLinkModal,handleButtonMouseEnter:h,handleImageButtonMouseEnter:m,handleButtonMouseLeave:b,closeAllPickers:_,insertEmojiUniversal:k,insertImageUniversal:s,insertLinkUniversal:p,insertLinkFromModalUniversal:B,insertSpoilerUniversal:g,autoResize:o,autoResizeElement:w}}const vs=r=>r===1?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π":r>=2&&r<=4?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è":"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤",fs=r=>{if(!r)return"?";const t=r.split(" ");return t.length===1?r.slice(0,2).toUpperCase():(t[0][0]+t[t.length-1][0]).toUpperCase()},gs={name:"CommentItem",components:{EmojiPicker:Vt,ImagePicker:Dt,LinkModal:qt},props:{comment:{type:Object,required:!0,default:()=>({name:"–ê–Ω–æ–Ω–∏–º",user_avatar:null,content:"",created_at:new Date().toISOString(),rating:0,replies:[]})},currentUser:{type:Object,required:!0,default:()=>({})},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate"],setup(r,{emit:t}){var tt,Ve;const d=Ft(),o=j(()=>{var y;return r.editingCommentId===((y=r.comment)==null?void 0:y.id)}),w=f(((tt=r.comment)==null?void 0:tt.content)||""),h=f(((Ve=r.comment)==null?void 0:Ve.user_rating)||0),m=f(null),b=f(null),{showEmojiPicker:_,showImagePicker:C,showLinkModal:k,selectedTextForLink:s,handleEmojiMouseEnter:p,handleEmojiMouseLeave:B,handleImageMouseEnter:g,handleImageMouseLeave:I,handleButtonMouseEnter:S,handleImageButtonMouseEnter:L,handleButtonMouseLeave:P,closeEmojiPicker:H,closeImagePicker:O,closeLinkModal:re,insertEmojiUniversal:de,insertImageUniversal:le,insertLinkUniversal:N,insertLinkFromModalUniversal:me,insertSpoilerUniversal:G,autoResize:W}=zt(),{formatContentWithTruncation:ve}=wn();rt(async()=>{var y;if((y=r.comment)!=null&&y.user_avatar){const A=await Yn();m.value="".concat(A).concat(r.comment.user_avatar)}});const T=j(()=>{var y;return r.currentUser&&((y=r.comment)==null?void 0:y.user_id)===r.currentUser.id}),fe=j(()=>{var y;return r.currentUser&&((y=r.comment)==null?void 0:y.user_id)===r.currentUser.id||r.currentUser&&r.currentUser.is_admin===1}),V=j(()=>{var y,A,Se;return((y=r.comment)==null?void 0:y.updated_at)&&((A=r.comment)==null?void 0:A.updated_at)!==((Se=r.comment)==null?void 0:Se.created_at)}),ne=j(()=>{var y,A;return(y=r.comment)!=null&&y.is_deleted?!1:(((A=r.comment)==null?void 0:A.rating)||0)<=-3}),dt=j(()=>ne.value),Ge=f(!1),ct=j(()=>{var y,A;return(y=r.comment)!=null&&y.is_deleted?null:(((A=r.comment)==null?void 0:A.rating)||0)<=-3?"lowRating":null}),Ye=()=>{var y,A;t("start-edit",(y=r.comment)==null?void 0:y.id),w.value=((A=r.comment)==null?void 0:A.content)||"",Ee(()=>{b.value&&(b.value.focus(),W({target:b.value}))})},ue=()=>{var y;t("cancel-edit"),w.value=((y=r.comment)==null?void 0:y.content)||""},Oe=()=>{var y;w.value.trim()&&t("edit",(y=r.comment)==null?void 0:y.id,w.value.trim())},Ze=()=>{var y;confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π?")&&t("delete",(y=r.comment)==null?void 0:y.id)},xe=y=>{var A,Se;h.value===y?(h.value=0,t("rate",(A=r.comment)==null?void 0:A.id,y)):(h.value=y,t("rate",(Se=r.comment)==null?void 0:Se.id,y))},Qe=y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),Oe())},Xe=j(()=>{var y;return ve((y=r.comment)==null?void 0:y.content)}),Je=()=>{console.log("Avatar load error, falling back to initials"),m.value=null,Ee(()=>{const y=document.querySelector(".avatar-placeholder");y&&(y.style.display="flex")})},J=()=>{d.push("/login")},He=y=>{de(y,b,w,A=>{w.value=A})},Le=y=>{le(y,b,w,A=>{w.value=A})},ge=()=>{G(b,w,y=>{w.value=y})},$e=()=>{N(b,w,y=>{w.value=y})},et=y=>{me(y,b,w,A=>{w.value=A})},Fe=y=>{W(y)};return Ce(w,()=>{o.value&&b.value&&Ee(()=>{Fe({target:b.value})})}),{isEditing:o,editContent:w,userRating:h,isCommentOwner:T,canDeleteComment:fe,isCommentEdited:V,formatDate:pn,formatRelativeTime:po,startEdit:Ye,cancelEdit:ue,saveEdit:Oe,confirmDelete:Ze,rateComment:xe,avatarUrl:m,getInitials:fs,handleEditKeydown:Qe,isCommentHidden:dt,showHiddenComment:Ge,hiddenCommentReason:ct,formattedContent:Xe,autoResizeEdit:Fe,editTextarea:b,showEmojiPicker:_,showImagePicker:C,insertEmojiEdit:He,insertImageEdit:Le,insertSpoilerEdit:ge,insertLinkEdit:$e,handleEmojiMouseEnter:p,handleEmojiMouseLeave:B,handleImageMouseEnter:g,handleImageMouseLeave:I,closeEmojiPicker:H,closeImagePicker:O,handleButtonMouseEnter:S,handleButtonMouseLeave:P,handleImageButtonMouseEnter:L,handleAvatarError:Je,openLogin:J,showLinkModal:k,selectedTextForLink:s,insertLinkFromModal:et,closeLinkModal:re}}},ks=["data-comment-id"],ys={class:"comment-header"},hs={class:"user-info"},bs={class:"user-avatar"},ps=["src","alt"],_s={class:"user-details"},ws={class:"username"},Cs={key:0,class:"user-rating"},Es=["title"],Ls=["title"],Ms={class:"comment-content"},Ss={key:0,class:"hidden-comment-warning"},Is={key:1},Ts={key:0,class:"deleted-comment"},xs={key:1},Rs={key:0,class:"edit-form"},Ps={class:"edit-textarea-container"},js={class:"edit-footer"},Bs={class:"edit-actions"},Ns=["disabled"],Us={class:"character-counter-container"},As={key:1,class:"comment-text-container"},Os=["innerHTML"],Hs={class:"comment-footer"},Fs={class:"comment-actions"},Vs={class:"rating-buttons"},Ds={class:"action-buttons"};function qs(r,t,d,o,w,h){var k,s,p,B,g,I,S,L,P,H,O,re,de,le,N,me,G,W,ve;const m=ae("router-link"),b=ae("EmojiPicker"),_=ae("ImagePicker"),C=ae("LinkModal");return i(),a("div",{class:"comment-item","data-comment-id":(k=d.comment)==null?void 0:k.id},[e("div",ys,[e("div",hs,[Z(m,{to:{path:"/lists/".concat((s=d.comment)==null?void 0:s.user_id)},target:"_blank",rel:"noopener noreferrer",class:"user-avatar-link"},{default:At(()=>{var T,fe;return[e("div",bs,[o.avatarUrl?(i(),a("img",{key:0,src:o.avatarUrl,alt:((T=d.comment)==null?void 0:T.name)||"–ê–Ω–æ–Ω–∏–º",onerror:"this.onerror=null; this.style.display='none'; this.nextElementSibling.style.display='flex';",onError:t[0]||(t[0]=(...V)=>o.handleAvatarError&&o.handleAvatarError(...V))},null,40,ps)):(i(),a("div",{key:1,class:"avatar-placeholder",style:Ot({display:o.avatarUrl?"none":"flex"})},c(o.getInitials(((fe=d.comment)==null?void 0:fe.name)||"–ê–Ω–æ–Ω–∏–º")),5))])]}),_:1},8,["to"]),e("div",_s,[Z(m,{to:{path:"/lists/".concat((p=d.comment)==null?void 0:p.user_id)},target:"_blank",rel:"noopener noreferrer",class:"username-link"},{default:At(()=>{var T;return[e("span",ws,c(((T=d.comment)==null?void 0:T.name)||"–ê–Ω–æ–Ω–∏–º"),1)]}),_:1},8,["to"]),(B=d.comment)!=null&&B.user_movie_rating?(i(),a("span",Cs,[t[18]||(t[18]=e("i",{class:"fas fa-star"},null,-1)),U(" "+c(d.comment.user_movie_rating),1)])):v("",!0),e("span",{class:"date",title:o.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(o.formatDate((g=d.comment)==null?void 0:g.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(o.formatDate((I=d.comment)==null?void 0:I.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(o.formatDate((S=d.comment)==null?void 0:S.created_at))},[U(c(o.formatRelativeTime((L=d.comment)==null?void 0:L.created_at))+" ",1),o.isCommentEdited?(i(),a("i",{key:0,class:"fas fa-pencil-alt edit-icon",title:o.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(o.formatDate((P=d.comment)==null?void 0:P.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(o.formatDate((H=d.comment)==null?void 0:H.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(o.formatDate((O=d.comment)==null?void 0:O.created_at))},null,8,Ls)):v("",!0)],8,Es)])])]),e("div",Ms,[!((re=d.comment)!=null&&re.is_deleted)&&o.isCommentHidden&&!o.showHiddenComment?(i(),a("div",Ss,[o.hiddenCommentReason==="lowRating"?(i(),a("p",{key:0,class:"warning-text",onClick:t[1]||(t[1]=T=>o.showHiddenComment=!0)},t[19]||(t[19]=[e("i",{class:"fas fa-eye-slash"},null,-1),U(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–∫—Ä—ã—Ç –∏–∑-–∑–∞ –Ω–∏–∑–∫–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å. ")]))):v("",!0)])):(i(),a("div",Is,[(de=d.comment)!=null&&de.is_deleted?(i(),a("div",Ts,t[20]||(t[20]=[e("p",{class:"deleted-message"},[e("i",{class:"fas fa-trash"}),U(" –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —É–¥–∞–ª—ë–Ω ")],-1)]))):(i(),a("div",xs,[o.isEditing?(i(),a("div",Rs,[e("div",Ps,[te(e("textarea",{ref:"editTextarea","onUpdate:modelValue":t[2]||(t[2]=T=>o.editContent=T),class:"edit-textarea",rows:"3",maxlength:"1500",onKeydown:t[3]||(t[3]=(...T)=>o.handleEditKeydown&&o.handleEditKeydown(...T)),onInput:t[4]||(t[4]=(...T)=>o.autoResizeEdit&&o.autoResizeEdit(...T))},null,544),[[Me,o.editContent]])]),e("div",js,[e("div",Bs,[e("button",{class:"cancel-button",onClick:t[5]||(t[5]=(...T)=>o.cancelEdit&&o.cancelEdit(...T))},"–û—Ç–º–µ–Ω–∞"),e("button",{class:"save-button",disabled:!o.editContent.trim()||o.editContent.length>1500,onClick:t[6]||(t[6]=(...T)=>o.saveEdit&&o.saveEdit(...T))}," –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ",8,Ns)]),e("div",Us,[e("div",{class:x(["character-counter-inline",{"near-limit":o.editContent.length>1400,"at-limit":o.editContent.length>=1500}])},c(o.editContent.length)+"/1500 ",3),e("button",{type:"button",class:x(["emoji-button-inline",{active:o.showEmojiPicker}]),onMouseenter:t[7]||(t[7]=(...T)=>o.handleButtonMouseEnter&&o.handleButtonMouseEnter(...T)),onMouseleave:t[8]||(t[8]=(...T)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...T))}," üòä ",34),e("button",{type:"button",class:x(["emoji-button-inline",{active:o.showImagePicker}]),onMouseenter:t[9]||(t[9]=(...T)=>o.handleImageButtonMouseEnter&&o.handleImageButtonMouseEnter(...T)),onMouseleave:t[10]||(t[10]=(...T)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...T))},t[21]||(t[21]=[pt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-c9b760f4><g id="logo" data-v-c9b760f4><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-c9b760f4></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-c9b760f4></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-c9b760f4></path></g></svg>',1)]),34),e("button",{type:"button",title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä",class:"emoji-button-inline spoiler-button",onClick:t[11]||(t[11]=(...T)=>o.insertSpoilerEdit&&o.insertSpoilerEdit(...T))},t[22]||(t[22]=[e("i",{class:"fas fa-eye-slash"},null,-1)])),e("button",{type:"button",class:"emoji-button-inline link-button",title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É",onClick:t[12]||(t[12]=(...T)=>o.insertLinkEdit&&o.insertLinkEdit(...T))},t[23]||(t[23]=[e("i",{class:"fas fa-link"},null,-1)])),Z(b,{"is-visible":o.showEmojiPicker,onEmojiSelected:o.insertEmojiEdit,onMouseEnter:o.handleEmojiMouseEnter,onMouseLeave:o.handleEmojiMouseLeave,onClose:o.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),Z(_,{"is-visible":o.showImagePicker,"current-user":d.currentUser,onImageSelected:o.insertImageEdit,onMouseEnter:o.handleImageMouseEnter,onMouseLeave:o.handleImageMouseLeave,onClose:o.closeImagePicker,onLoginRequired:o.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),Z(C,{"is-visible":o.showLinkModal,"selected-text":o.selectedTextForLink,onClose:o.closeLinkModal,onSubmit:o.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):(i(),a("div",As,[e("p",{class:"comment-text",innerHTML:o.formattedContent},null,8,Os)]))]))]))]),e("div",Hs,[e("div",Fs,[e("div",Vs,[!o.isCommentOwner&&!((le=d.comment)!=null&&le.is_deleted)?(i(),a("button",{key:0,class:x(["rating-button",{"rated-up":o.userRating===1}]),onClick:t[13]||(t[13]=T=>o.rateComment(1))},t[24]||(t[24]=[e("i",{class:"fas fa-thumbs-up"},null,-1)]),2)):v("",!0),e("span",{class:x(["rating-count",{"rating-positive":o.userRating===1,"rating-negative":o.userRating===-1}])},c(((N=d.comment)==null?void 0:N.rating)||0),3),!o.isCommentOwner&&!((me=d.comment)!=null&&me.is_deleted)?(i(),a("button",{key:1,class:x(["rating-button",{"rated-down":o.userRating===-1}]),onClick:t[14]||(t[14]=T=>o.rateComment(-1))},t[25]||(t[25]=[e("i",{class:"fas fa-thumbs-down"},null,-1)]),2)):v("",!0)]),e("div",Ds,[!d.currentUser||d.currentUser.allow_comments===1?(i(),a("button",{key:0,class:"action-button reply-button",onClick:t[15]||(t[15]=T=>r.$emit("reply",d.comment))},t[26]||(t[26]=[e("i",{class:"fas fa-reply"},null,-1)]))):v("",!0),o.isCommentOwner&&!((G=d.comment)!=null&&G.is_deleted)&&!o.isEditing&&((W=d.currentUser)==null?void 0:W.allow_comments)===1?(i(),a("button",{key:1,class:"action-button edit-button",onClick:t[16]||(t[16]=(...T)=>o.startEdit&&o.startEdit(...T))},t[27]||(t[27]=[e("i",{class:"fas fa-edit"},null,-1)]))):v("",!0),o.canDeleteComment&&!((ve=d.comment)!=null&&ve.is_deleted)?(i(),a("button",{key:2,class:"action-button delete-button",onClick:t[17]||(t[17]=(...T)=>o.confirmDelete&&o.confirmDelete(...T))},t[28]||(t[28]=[e("i",{class:"fas fa-trash"},null,-1)]))):v("",!0)])])])],8,ks)}const zs=Ae(gs,[["render",qs],["__scopeId","data-v-c9b760f4"]]),Ws={name:"CommentThread",components:{CommentItem:zs,EmojiPicker:Vt,ImagePicker:Dt,LinkModal:qt},props:{comment:{type:Object,required:!0},currentUser:{type:Object,required:!0},replyTo:{type:Object,default:null},replyContent:{type:String,default:""},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate","submit-reply","cancel-reply","update-reply-content","reply-keydown"],setup(r,{emit:t}){const d=f(null),o=f(!0),{showEmojiPicker:w,showImagePicker:h,showLinkModal:m,selectedTextForLink:b,handleEmojiMouseEnter:_,handleEmojiMouseLeave:C,handleImageMouseEnter:k,handleImageMouseLeave:s,handleButtonMouseEnter:p,handleImageButtonMouseEnter:B,handleButtonMouseLeave:g,closeEmojiPicker:I,closeImagePicker:S,closeLinkModal:L,insertEmojiUniversal:P,insertImageUniversal:H,insertLinkUniversal:O,insertLinkFromModalUniversal:re,insertSpoilerUniversal:de}=zt(),le=V=>{t("update-reply-content",V.target.value);const ne=V.target;ne&&(ne.style.height="auto",ne.style.height="".concat(Math.min(ne.scrollHeight,200),"px"))},N={get value(){return r.replyContent},set value(V){t("update-reply-content",V)}};return{replyTextarea:d,showEmojiPicker:w,showImagePicker:h,isCollapsed:o,insertEmoji:V=>{P(V,d,N,ne=>{t("update-reply-content",ne)})},insertImage:V=>{H(V,d,N,ne=>{t("update-reply-content",ne)})},insertSpoiler:()=>{de(d,N,V=>{t("update-reply-content",V)})},handleEmojiMouseEnter:_,handleEmojiMouseLeave:C,handleImageMouseEnter:k,handleImageMouseLeave:s,handleButtonMouseEnter:p,handleButtonMouseLeave:g,closeEmojiPicker:I,closeImagePicker:S,handleImageButtonMouseEnter:B,handleReplyInput:le,toggleCollapsed:()=>{o.value=!o.value},showLinkModal:m,selectedTextForLink:b,insertLink:()=>{O(d,N,V=>{t("update-reply-content",V)})},closeLinkModal:L,insertLinkFromModal:V=>{re(V,d,N,ne=>{t("update-reply-content",ne)})}}},computed:{canReply(){return this.currentUser?this.currentUser.allow_comments===1:!0},getReplyPlaceholder(){return this.currentUser?this.currentUser.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç..."},formattedContent(){const{formatContent:r}=wn();return r(this.comment.content)}}},Ks={class:"comment-thread"},Gs={key:0,class:"reply-form"},Ys={class:"textarea-container"},Zs=["value","placeholder","disabled"],Qs={class:"reply-footer"},Xs={class:"reply-actions"},Js=["disabled"],$s={class:"character-counter-container"},el=["disabled"],tl={key:1,class:"replies-container"},nl=["title"],ol={class:"replies-count"},sl=["title"],ll={key:0,class:"replies-content"};function il(r,t,d,o,w,h){const m=ae("CommentItem"),b=ae("EmojiPicker"),_=ae("ImagePicker"),C=ae("LinkModal"),k=ae("CommentThread",!0);return i(),a("div",Ks,[Z(m,{comment:d.comment,"current-user":d.currentUser,"editing-comment-id":d.editingCommentId,onReply:t[0]||(t[0]=s=>r.$emit("reply",s)),onStartEdit:t[1]||(t[1]=s=>r.$emit("start-edit",s)),onCancelEdit:t[2]||(t[2]=s=>r.$emit("cancel-edit")),onEdit:t[3]||(t[3]=(s,p)=>r.$emit("edit",s,p)),onDelete:t[4]||(t[4]=s=>r.$emit("delete",s)),onRate:t[5]||(t[5]=(s,p)=>r.$emit("rate",s,p))},null,8,["comment","current-user","editing-comment-id"]),d.replyTo&&d.replyTo.id===d.comment.id?(i(),a("div",Gs,[e("div",Ys,[e("textarea",{ref:"replyTextarea",class:"comment-textarea",value:d.replyContent,placeholder:h.getReplyPlaceholder,disabled:d.currentUser&&d.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:t[6]||(t[6]=(...s)=>o.handleReplyInput&&o.handleReplyInput(...s)),onKeydown:t[7]||(t[7]=s=>r.$emit("reply-keydown",s))},null,40,Zs)]),e("div",Qs,[e("div",Xs,[e("button",{class:"cancel-reply",onClick:t[8]||(t[8]=s=>r.$emit("cancel-reply"))},"–û—Ç–º–µ–Ω–∞"),e("button",{class:"submit-button",disabled:!d.replyContent.trim()||d.replyContent.length>1500||d.currentUser&&d.currentUser.allow_comments!==1,onClick:t[9]||(t[9]=s=>r.$emit("submit-reply"))}," –û—Ç–≤–µ—Ç–∏—Ç—å ",8,Js)]),e("div",$s,[e("div",{class:x(["character-counter-inline",{"near-limit":d.replyContent.length>1400,"at-limit":d.replyContent.length>=1500}])},c(d.replyContent.length)+"/1500 ",3),e("button",{type:"button",class:x(["emoji-button-inline",{active:o.showEmojiPicker}]),onMouseenter:t[10]||(t[10]=(...s)=>o.handleButtonMouseEnter&&o.handleButtonMouseEnter(...s)),onMouseleave:t[11]||(t[11]=(...s)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...s))}," üòä ",34),e("button",{type:"button",class:x(["emoji-button-inline",{active:o.showImagePicker}]),onMouseenter:t[12]||(t[12]=(...s)=>o.handleImageButtonMouseEnter&&o.handleImageButtonMouseEnter(...s)),onMouseleave:t[13]||(t[13]=(...s)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...s))},t[29]||(t[29]=[pt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-6c0fc347><g id="logo" data-v-6c0fc347><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-6c0fc347></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-6c0fc347></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-6c0fc347></path></g></svg>',1)]),34),e("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:d.currentUser&&d.currentUser.allow_comments!==1,onClick:t[14]||(t[14]=(...s)=>o.insertSpoiler&&o.insertSpoiler(...s)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},t[30]||(t[30]=[e("i",{class:"fas fa-eye-slash"},null,-1)]),8,el),e("button",{type:"button",class:"emoji-button-inline link-button",onClick:t[15]||(t[15]=(...s)=>o.insertLink&&o.insertLink(...s)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},t[31]||(t[31]=[e("i",{class:"fas fa-link"},null,-1)])),Z(b,{"is-visible":o.showEmojiPicker,onEmojiSelected:o.insertEmoji,onMouseEnter:o.handleEmojiMouseEnter,onMouseLeave:o.handleEmojiMouseLeave,onClose:o.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),Z(_,{"is-visible":o.showImagePicker,"current-user":d.currentUser,onImageSelected:o.insertImage,onMouseEnter:o.handleImageMouseEnter,onMouseLeave:o.handleImageMouseLeave,onClose:o.closeImagePicker,onLoginRequired:t[16]||(t[16]=()=>r.$router.push("/login"))},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose"]),Z(C,{"is-visible":o.showLinkModal,"selected-text":o.selectedTextForLink,onClose:o.closeLinkModal,onSubmit:o.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):v("",!0),d.comment.replies&&d.comment.replies.length>0?(i(),a("div",tl,[e("button",{class:"collapse-toggle",title:o.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:t[17]||(t[17]=(...s)=>o.toggleCollapsed&&o.toggleCollapsed(...s))},[e("span",{class:x(["collapse-icon",{expanded:!o.isCollapsed}])},t[32]||(t[32]=[e("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},[e("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1)]),2),e("span",ol,c(d.comment.replies.length)+" "+c(d.comment.replies.length===1?"–æ—Ç–≤–µ—Ç":"–æ—Ç–≤–µ—Ç–æ–≤"),1)],8,nl),e("div",{class:"vertical-line-clickable",title:o.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:t[18]||(t[18]=(...s)=>o.toggleCollapsed&&o.toggleCollapsed(...s))},[e("div",{class:x(["vertical-line-visual",{collapsed:o.isCollapsed}])},null,2)],8,sl),o.isCollapsed?v("",!0):(i(),a("div",ll,[(i(!0),a(K,null,ee(d.comment.replies,s=>(i(),Ke(k,{key:s.id,comment:s,"current-user":d.currentUser,"reply-to":d.replyTo,"reply-content":d.replyContent,"editing-comment-id":d.editingCommentId,onReply:t[19]||(t[19]=p=>r.$emit("reply",p)),onStartEdit:t[20]||(t[20]=p=>r.$emit("start-edit",p)),onCancelEdit:t[21]||(t[21]=p=>r.$emit("cancel-edit")),onEdit:t[22]||(t[22]=(p,B)=>r.$emit("edit",p,B)),onDelete:t[23]||(t[23]=p=>r.$emit("delete",p)),onRate:t[24]||(t[24]=(p,B)=>r.$emit("rate",p,B)),onSubmitReply:t[25]||(t[25]=p=>r.$emit("submit-reply")),onCancelReply:t[26]||(t[26]=p=>r.$emit("cancel-reply")),onUpdateReplyContent:t[27]||(t[27]=p=>r.$emit("update-reply-content",p)),onReplyKeydown:t[28]||(t[28]=p=>r.$emit("reply-keydown",p))},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id"]))),128))]))])):v("",!0)])}const al=Ae(Ws,[["render",il],["__scopeId","data-v-6c0fc347"]]),rl={name:"Comments",components:{CommentThread:al,Notification:_n,EmojiPicker:Vt,ImagePicker:Dt,LinkModal:qt},props:{movieId:{type:[String,Number],required:!0}},setup(r){const t=bn(),d=Ft(),o=Ht(),w=f([]),h=f(""),m=f(null),b=f(""),_=f(null),C=f(t.user),k=f(null),s=f(null),p=f(o.isAutoShowComments),B=f(!1),g=f(3),I=f(o.commentsSortBy),S=f(I.value==="date"?"asc":"desc"),{showEmojiPicker:L,showImagePicker:P,showLinkModal:H,selectedTextForLink:O,handleEmojiMouseEnter:re,handleEmojiMouseLeave:de,handleImageMouseEnter:le,handleImageMouseLeave:N,handleButtonMouseEnter:me,handleImageButtonMouseEnter:G,handleButtonMouseLeave:W,closeEmojiPicker:ve,closeImagePicker:T,closeLinkModal:fe,insertEmojiUniversal:V,insertImageUniversal:ne,insertLinkUniversal:dt,insertLinkFromModalUniversal:Ge,insertSpoilerUniversal:ct,autoResize:Ye}=zt(),ue=j(()=>{const M=(R=null)=>{const z=w.value.filter(F=>F.parent_id===R).filter(F=>!F.is_deleted||F.replies&&F.replies.length>0);let Q;return R===null?Q=z.sort((F,ie)=>{if(I.value==="rating"){const Re=F.rating||0,mt=ie.rating||0;return Re!==mt?S.value==="asc"?Re-mt:mt-Re:F.id-ie.id}return S.value==="asc"?F.id-ie.id:ie.id-F.id}):Q=z.sort((F,ie)=>F.id-ie.id),Q.map(F=>({...F,replies:M(F.id)}))};return M()}),Oe=j(()=>{const M=R=>R.reduce((z,Q)=>z+1+M(Q.replies||[]),0);return M(ue.value)}),Ze=j(()=>ue.value.slice(0,g.value)),xe=j(()=>ue.value.length>g.value),Qe=j(()=>ue.value.length-g.value),Xe=()=>{g.value=ue.value.length},Je=M=>{I.value===M?S.value=S.value==="asc"?"desc":"asc":(I.value=M,S.value=M==="date"?"asc":"desc",o.setCommentsSortBy(M))},J=async()=>{try{const M=await Zn(r.movieId);w.value=M}catch(M){console.error("Failed to load comments:",M),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.")}},He=async()=>{if(B.value)return;if(!t.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:y});return}if(C.value&&C.value.allow_comments!==1){k.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!h.value.replace(/\[spoiler\]\s*\[\/spoiler\]/g,"").replace(/\[img\]\s*\[\/img\]/g,"").replace(/\[link=[^\]]+\]\s*\[\/link\]/g,"").trim()){k.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º");return}if(h.value.length>1500){k.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await dn(r.movieId,h.value.trim()),h.value="",await J(),p.value=!0,Ee(()=>{s.value&&(s.value.focus(),s.value.style.height="auto"),setTimeout(()=>{const R=document.querySelectorAll(".comment-item[data-comment-id]");if(R.length>0){const z=Array.from(R).map(Q=>parseInt(Q.getAttribute("data-comment-id"))).filter(Q=>!isNaN(Q));if(z.length>0){const Q=Math.max(...z),F=document.querySelector('[data-comment-id="'.concat(Q,'"]'));F&&F.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}},300)})}catch(R){console.error("Failed to create comment:",R),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},Le=M=>{if(!t.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:y});return}_.value=null,m.value=M,b.value="",Ee(()=>{const R=document.querySelector(".reply-form");R&&R.scrollIntoView({behavior:"smooth",block:"center"})})},ge=async()=>{if(!t.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:y});return}if(C.value&&C.value.allow_comments!==1){k.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!(!b.value.trim()||!m.value)){if(b.value.length>1500){k.value.showNotification("–û—Ç–≤–µ—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await dn(r.movieId,b.value.trim(),m.value.id);const M=m.value.id;await J(),b.value="",m.value=null,Ee(()=>{setTimeout(()=>{const R=document.querySelector('[data-comment-id="'.concat(M,'"]'));if(R){const z=R.querySelector(".replies-content");if(z){const Q=z.querySelectorAll(".comment-item[data-comment-id]");if(Q.length>0){const F=Array.from(Q).map(ie=>parseInt(ie.getAttribute("data-comment-id"))).filter(ie=>!isNaN(ie));if(F.length>0){const ie=Math.max(...F),Re=document.querySelector('[data-comment-id="'.concat(ie,'"]'));Re&&Re.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}}}},300)})}catch(M){console.error("Error submitting reply:",M),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}}},$e=async(M,R)=>{if(!t.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:y});return}if(C.value&&C.value.allow_comments!==1){k.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(R.length>1500){k.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await Jn(M,R.trim()),await J(),_.value=null}catch(z){console.error("Failed to update comment:",z),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},et=async M=>{if(!t.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:y});return}try{await Xn(M),await J()}catch(R){console.error("Failed to delete comment:",R),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},Fe=async(M,R)=>{if(!t.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:y});return}try{await Qn(M,R),await J()}catch(z){console.error("Failed to rate comment:",z),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ü–µ–Ω–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},tt=M=>{B.value||L.value||M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),He())},Ve=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),ge())},y=()=>{d.push("/login")},A=M=>{B.value=!0,V(M,s,h,R=>{h.value=R}),setTimeout(()=>{B.value=!1},100)},Se=M=>{ne(M,s,h,R=>{h.value=R})},De=()=>{ct(s,h,M=>{h.value=M})},_t=()=>{dt(s,h,M=>{h.value=M})},nt=M=>{Ge(M,s,h,R=>{h.value=R})},ot=j(()=>C.value?C.value.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."),oe=j(()=>C.value?C.value.allow_comments===1:!0),xt=M=>{m.value=null,b.value="",_.value=M},Rt=()=>{_.value=null};return rt(()=>{J()}),{comments:w,groupedComments:ue,displayedComments:Ze,hasMoreComments:xe,remainingCommentsCount:Qe,showMoreComments:Xe,sortBy:I,setSortBy:Je,sortDirection:S,newComment:h,replyTo:m,replyContent:b,editingCommentId:_,currentUser:C,notificationRef:k,commentTextarea:s,showComments:p,submitComment:He,handleReply:Le,submitReply:ge,handleEdit:$e,handleDelete:et,handleRate:Fe,handleCommentKeydown:tt,handleReplyKeydown:Ve,autoResize:Ye,totalCommentsCount:Oe,getCommentWordForm:vs,showEmojiPicker:L,showImagePicker:P,showLinkModal:H,selectedTextForLink:O,insertEmoji:A,insertImage:Se,handleEmojiMouseEnter:re,handleEmojiMouseLeave:de,handleImageMouseEnter:le,handleImageMouseLeave:N,closeEmojiPicker:ve,closeImagePicker:T,handleButtonMouseLeave:W,handleButtonMouseEnter:me,handleImageButtonMouseEnter:G,getCommentPlaceholder:ot,canComment:oe,handleStartEdit:xt,handleCancelEdit:Rt,insertSpoiler:De,insertLink:_t,insertLinkFromModal:nt,closeLinkModal:fe}}},ul={class:"comments-section"},dl={class:"spoiler-content"},cl={key:1,class:"comments-container"},ml={class:"comments-header"},vl={class:"comments-controls"},fl={class:"textarea-container"},gl=["placeholder","disabled"],kl={class:"comment-footer"},yl={class:"comment-actions"},hl=["disabled"],bl={class:"character-counter-container"},pl=["disabled"],_l=["disabled"],wl=["disabled"],Cl={class:"comments-list"},El={key:0,class:"show-more-comments"};function Ll(r,t,d,o,w,h){const m=ae("EmojiPicker"),b=ae("ImagePicker"),_=ae("LinkModal"),C=ae("CommentThread"),k=ae("Notification");return i(),a("div",ul,[o.showComments?(i(),a("div",cl,[e("div",ml,[e("div",vl,[e("button",{class:x(["sort-button",{active:o.sortBy==="date"}]),title:"–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –¥–∞—Ç–µ",onClick:t[1]||(t[1]=s=>o.setSortBy("date"))},[t[20]||(t[20]=e("i",{class:"fas fa-clock"},null,-1)),t[21]||(t[21]=U(" –ü–æ –¥–∞—Ç–µ ")),o.sortBy==="date"?(i(),a("i",{key:0,class:x(["fas",o.sortDirection==="asc"?"fa-arrow-up":"fa-arrow-down"])},null,2)):v("",!0)],2),e("button",{class:x(["sort-button",{active:o.sortBy==="rating"}]),title:"–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É",onClick:t[2]||(t[2]=s=>o.setSortBy("rating"))},[t[22]||(t[22]=e("i",{class:"fas fa-thumbs-up"},null,-1)),t[23]||(t[23]=U(" –ü–æ —Ä–µ–π—Ç–∏–Ω–≥—É ")),o.sortBy==="rating"?(i(),a("i",{key:0,class:x(["fas",o.sortDirection==="asc"?"fa-arrow-up":"fa-arrow-down"])},null,2)):v("",!0)],2)]),e("button",{class:"hide-comments-btn",onClick:t[3]||(t[3]=s=>o.showComments=!1)},t[24]||(t[24]=[e("i",{class:"fas fa-eye-slash"},null,-1),U(" –°–∫—Ä—ã—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ")]))]),e("form",{class:"comment-form",onSubmit:t[13]||(t[13]=ut((...s)=>o.submitComment&&o.submitComment(...s),["prevent"]))},[e("div",fl,[te(e("textarea",{ref:"commentTextarea","onUpdate:modelValue":t[4]||(t[4]=s=>o.newComment=s),class:"comment-textarea",placeholder:o.getCommentPlaceholder,disabled:o.currentUser&&o.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:t[5]||(t[5]=(...s)=>o.autoResize&&o.autoResize(...s)),onKeydown:t[6]||(t[6]=(...s)=>o.handleCommentKeydown&&o.handleCommentKeydown(...s))},null,40,gl),[[Me,o.newComment]])]),e("div",kl,[e("div",yl,[e("button",{class:"submit-button",type:"submit",disabled:!o.newComment.trim()||o.newComment.length>1500||o.currentUser&&o.currentUser.allow_comments!==1}," –û—Ç–ø—Ä–∞–≤–∏—Ç—å ",8,hl)]),e("div",bl,[e("div",{class:x(["character-counter-inline",{"near-limit":o.newComment.length>1400,"at-limit":o.newComment.length>=1500}])},c(o.newComment.length)+"/1500 ",3),e("button",{type:"button",class:x(["emoji-button-inline",{active:o.showEmojiPicker}]),disabled:o.currentUser&&o.currentUser.allow_comments!==1,onMouseenter:t[7]||(t[7]=(...s)=>o.handleButtonMouseEnter&&o.handleButtonMouseEnter(...s)),onMouseleave:t[8]||(t[8]=(...s)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...s))}," üòä ",42,pl),e("button",{type:"button",class:x(["emoji-button-inline",{active:o.showImagePicker}]),disabled:o.currentUser&&o.currentUser.allow_comments!==1,onMouseenter:t[9]||(t[9]=(...s)=>o.handleImageButtonMouseEnter&&o.handleImageButtonMouseEnter(...s)),onMouseleave:t[10]||(t[10]=(...s)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...s))},t[25]||(t[25]=[pt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-14ea7e4b><g id="logo" data-v-14ea7e4b><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-14ea7e4b></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-14ea7e4b></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-14ea7e4b></path></g></svg>',1)]),42,_l),e("button",{type:"button",title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä",class:"emoji-button-inline spoiler-button",disabled:o.currentUser&&o.currentUser.allow_comments!==1,onClick:t[11]||(t[11]=(...s)=>o.insertSpoiler&&o.insertSpoiler(...s))},t[26]||(t[26]=[e("i",{class:"fas fa-eye-slash"},null,-1)]),8,wl),e("button",{type:"button",title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É",class:"emoji-button-inline link-button",onClick:t[12]||(t[12]=(...s)=>o.insertLink&&o.insertLink(...s))},t[27]||(t[27]=[e("i",{class:"fas fa-link"},null,-1)])),Z(m,{"is-visible":o.showEmojiPicker&&o.canComment,onEmojiSelected:o.insertEmoji,onMouseEnter:o.handleEmojiMouseEnter,onMouseLeave:o.handleEmojiMouseLeave,onClose:o.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),Z(b,{"is-visible":o.showImagePicker&&o.canComment,"current-user":o.currentUser,onImageSelected:o.insertImage,onMouseEnter:o.handleImageMouseEnter,onMouseLeave:o.handleImageMouseLeave,onClose:o.closeImagePicker,onLoginRequired:r.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),Z(_,{"is-visible":o.showLinkModal,"selected-text":o.selectedTextForLink,onClose:o.closeLinkModal,onSubmit:o.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])],32),e("div",Cl,[(i(!0),a(K,null,ee(o.displayedComments,s=>(i(),Ke(C,{key:s.id,comment:s,"current-user":o.currentUser,"reply-to":o.replyTo,"reply-content":o.replyContent,"editing-comment-id":o.editingCommentId,"is-first-comment":!1,onReply:o.handleReply,onStartEdit:o.handleStartEdit,onCancelEdit:o.handleCancelEdit,onEdit:o.handleEdit,onDelete:o.handleDelete,onRate:o.handleRate,onSubmitReply:o.submitReply,onCancelReply:t[14]||(t[14]=p=>o.replyTo=null),onUpdateReplyContent:t[15]||(t[15]=p=>o.replyContent=p),onReplyKeydown:o.handleReplyKeydown},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id","onReply","onStartEdit","onCancelEdit","onEdit","onDelete","onRate","onSubmitReply","onReplyKeydown"]))),128)),o.hasMoreComments?(i(),a("div",El,[e("button",{class:"show-more-btn",onClick:t[16]||(t[16]=(...s)=>o.showMoreComments&&o.showMoreComments(...s))}," –ü–æ–∫–∞–∑–∞—Ç—å –µ—â–µ "+c(o.remainingCommentsCount)+" "+c(o.getCommentWordForm(o.remainingCommentsCount)),1)])):v("",!0)])])):(i(),a("div",{key:0,class:"spoiler-warning",onClick:t[0]||(t[0]=s=>o.showComments=!0)},[e("div",dl,[t[17]||(t[17]=e("i",{class:"fas fa-eye-slash"},null,-1)),t[18]||(t[18]=e("h3",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–∫—Ä—ã—Ç—ã",-1)),t[19]||(t[19]=e("p",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä—ã. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å.",-1)),e("div",{class:x(["comments-count",{"no-comments":o.totalCommentsCount===0}])},[o.totalCommentsCount===0?(i(),a(K,{key:0},[U(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç ")],64)):(i(),a(K,{key:1},[U(c(o.totalCommentsCount)+" "+c(o.getCommentWordForm(o.totalCommentsCount)),1)],64))],2)])])),Z(k,{ref:"notificationRef"},null,512)])}const Ml=Ae(rl,[["render",Ll],["__scopeId","data-v-14ea7e4b"]]),Sl={class:"movie-info"},Il={class:"content"},Tl={key:0,class:"content-card"},xl={class:"movie-skeleton"},Rl={class:"movie-skeleton__player"},Pl={key:2,class:"content-card"},jl={key:3,class:"content-card"},Bl={class:"content-header"},Nl=["src"],Ul={class:"content-title"},Al={key:0,class:"ratings-links"},Ol={key:1},Hl=["href","title"],Fl={key:2},Vl=["href","title"],Dl={key:3},ql=["href","title"],zl={key:4},Wl=["href","title"],Kl={key:5},Gl=["href"],Yl=["title"],Zl={key:0,class:"fa-regular fa-face-grin-wink"},Ql={key:1,class:"fas fa-spinner fa-spin"},Xl=["title"],Jl={key:1,class:"mobile-list-dropdown"},$l={class:"mobile-list-content"},ei=["content"],ti=["content"],ni={class:"additional-info"},oi={class:"info-content"},si={key:0,class:"movie-poster-container desktop-only"},li=["href"],ii=["src"],ai={class:"details-container"},ri={class:"info-list"},ui={key:0},di={key:1},ci={key:2},mi={key:3},vi={key:4},fi={key:5},gi={key:6},ki={key:7},yi={key:8},hi={key:9,class:"rating-boxes"},bi={key:0,class:"rating-box mpaa"},pi={key:1,class:"rating-box age"},_i={class:"content-info"},wi={key:0,class:"content-description-text"},Ci={key:3,class:"comments-section"},Ei={key:4,class:"staff-section"},Li={class:"staff-categories"},Mi={key:0,class:"staff-category"},Si={class:"staff-list"},Ii=["href","title"],Ti=["src","alt"],xi={class:"staff-name"},Ri={key:0,class:"staff-role"},Pi=["href","title"],ji={key:1,class:"staff-category"},Bi={class:"staff-names-container"},Ni={class:"staff-names-list"},Ui=["href"],Ai=["href","title"],Oi={key:2,class:"staff-category"},Hi={class:"staff-names-container"},Fi={class:"staff-names-list"},Vi=["href"],Di=["href","title"],qi={key:5,class:"yt-video-container"},zi={key:6,class:"related-movies"},Wi=["title"],Ki={key:7,class:"related-movies"},Gi=["title"],Yi={key:0,class:"nudity-info-popup"},Zi={class:"nudity-info-content"},Qi={key:0,class:"nudity-info-loading"},Xi={key:1},Ji={class:"nudity-info-actions"},$i=["href"],ea={key:1,class:"nudity-info-popup"},ta={class:"nudity-info-content"},na={class:"timings-text"},oa={key:0,class:"timing-entries"},sa={class:"timing-content"},la={class:"timing-header-row",style:{display:"flex","align-items":"center",gap:"8px"}},ia={key:0,class:"pending-badge"},aa={key:1,class:"clean-text-badge"},ra={class:"timing-actions-row",style:{display:"flex","align-items":"center",gap:"8px","margin-top":"8px"}},ua=["onClick"],da=["onClick"],ca=["onClick"],ma=["onClick"],va=["onClick"],fa=["onClick"],ga={class:"timing-text"},ka={class:"timing-author"},ya=["title"],ha={key:0,style:{color:"#fff","font-size":"13px",margin:"4px 0 0 0"}},ba={key:0},pa={key:1},_a={key:1},wa={key:0,class:"general-parser-result",style:{"margin-top":"15px",padding:"15px",background:"rgba(255, 255, 255, 0.05)","border-radius":"8px"}},Ca={style:{margin:"0 0 10px 0",color:"#fff"}},Ea={style:{color:"#fff","font-size":"13px"}},La={key:0},Ma={key:1},Sa={key:1,class:"overlay-parser-result",style:{"margin-top":"15px",padding:"15px",background:"rgba(255, 255, 255, 0.05)","border-radius":"8px"}},Ia={style:{margin:"0 0 10px 0",color:"#fff"}},Ta={style:{color:"#fff","font-size":"13px"}},xa={key:0},Ra={key:1},Pa={class:"nudity-info-actions"},ja={key:2,class:"timing-modal"},Ba={class:"timing-modal-content"},Na={class:"timing-modal-header"},Ua={class:"timing-submission-form"},Aa={key:0,class:"timing-preview"},Oa={class:"timing-preview-content"},Ha={class:"timing-preview-range"},Fa={class:"timing-preview-duration"},Va={class:"timing-form-actions"},Da=["disabled"],qa={key:0,class:"fas fa-spinner fa-spin"},za={key:1},Wa={key:3,class:"timing-modal"},Ka={class:"timing-modal-content"},Ga={class:"timing-submission-form"},Ya={class:"timing-form-actions"},Za=["disabled"],Qa={key:0,class:"fas fa-spinner fa-spin"},Xa={key:1},Ja={class:"modal-header"},$a={class:"modal-header-controls"},er={class:"modal-body"},tr=["disabled"],nr={key:0,class:"fas fa-spinner fa-spin"},or={key:1,class:"fas fa-list"},sr={class:"top-submitters-list"},lr={class:"submitter-info"},ir={class:"submitter-name"},ar=["href"],rr={class:"submitter-count"},ur={class:"submitter-contribution"},dr={class:"modal-header"},cr={class:"modal-body"},mr={key:0,class:"loading-spinner"},vr={key:1,class:"no-timings"},fr={key:2,class:"no-timings"},gr={key:3,class:"all-timings-list"},kr={class:"timing-header"},yr={class:"timing-meta"},hr={class:"timing-author"},br={class:"timing-date"},pr={class:"timing-movie-info"},_r={key:0,class:"admin-controls"},wr=["onClick","disabled"],Cr={key:0,class:"fas fa-spinner fa-spin"},Er={key:1,class:"fas fa-check"},Lr=["onClick","disabled"],Mr={key:0,class:"fas fa-spinner fa-spin"},Sr={key:1,class:"fas fa-times"},Ir=["onClick","disabled"],Tr={key:0,class:"fas fa-spinner fa-spin"},xr={key:1,class:"fas fa-eye-slash"},Rr={class:"timing-content"},Pr={class:"timing-text"},jr={key:6,class:"timing-modal obs-modal"},Br={class:"timing-modal-content obs-modal-content"},Nr={class:"timing-modal-header"},Ur={class:"obs-settings-form"},Ar={class:"obs-setting-group"},Or={class:"obs-checkbox-label"},Hr={key:0,class:"obs-connection-settings"},Fr={class:"obs-setting-group"},Vr={class:"obs-setting-group"},Dr={class:"obs-setting-group"},qr={key:0,class:"obs-setting-group"},zr={key:0,class:"obs-warning"},Wr={key:1,class:"obs-filter-selection"},Kr=["value"],Gr={key:0,class:"selected-filter-info"},Yr={class:"filter-details"},Zr={class:"obs-info"},Qr={class:"obs-setting-group"},Xr={class:"obs-checkbox-label"},Jr={class:"obs-actions"},$r=["disabled"],eu={key:0,class:"fas fa-spinner fa-spin"},tu={key:1,class:"fas fa-plug"},nu=["disabled"],ou=["disabled"],su={__name:"MovieInfo",setup(r){const t=f(!0),d=Ht(),o=bn(),w=$n(),h=wo(),m=eo(),b=Ft(),_=f(m.params.kp_id),C=f(""),k=f(null),s=f(null),p=to(),B=Co(),g=f(null),I=j(()=>B.areTrailersActive),S=f(null),L=f(!1),P=f(!1),H=f(10),O=f(null),re=f(!1),de=f(null),le=f(!1),N=f(void 0),me=f(null),G=f(new Set),W=f(new Set),ve=f(!1),T=f(!1),fe=f(null),V=f(!1),ne=j(()=>{var l;return((l=s.value)==null?void 0:l.nudity_timings.length)>0}),dt=j(()=>{var l;return((l=s.value)==null?void 0:l.nudity_timings.length)>0&&d.isStreamerMode&&!d.isMobile}),Ge=j(()=>{var l,n,E,Y,ye,he,be,pe,_e,$;return((n=(l=s.value)==null?void 0:l.lists)==null?void 0:n.isFavorite)||((Y=(E=s.value)==null?void 0:E.lists)==null?void 0:Y.isWatching)||((he=(ye=s.value)==null?void 0:ye.lists)==null?void 0:he.isLater)||((pe=(be=s.value)==null?void 0:be.lists)==null?void 0:pe.isCompleted)||(($=(_e=s.value)==null?void 0:_e.lists)==null?void 0:$.isAbandoned)}),ct=j(()=>d.isCommentsEnabled),Ye=()=>{if(s.value){const l=s.value.name_ru||s.value.name_en||s.value.name_original||"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å–º–µ";document.title=l}},ue=l=>l?l.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",Oe=l=>(l||[]).map(n=>({kp_id:n.film_id,poster:n.poster_url_preview||n.poster_url,title:n.name_ru||n.name_en||n.name_original})),Ze=l=>{if(typeof l!="number")return;const n=Math.floor(l/60),E=l%60;return"".concat(n," —á. ").concat(E," –º–∏–Ω.")},xe=f(!1),Qe=f({top:"0px",left:"0px"}),Xe=l=>{xe.value=!0,Qe.value={top:"".concat(l.pageY+10,"px"),left:"".concat(l.pageX-70,"px")}},Je=async()=>{try{const l=[s.value.name_ru||s.value.name_en||s.value.name_original,...s.value.year?[s.value.year]:[],...s.value.film_length?[Ze(s.value.film_length)]:[]];await navigator.clipboard.writeText(l.join(", ")),g.value.showNotification("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ")}catch(l){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",l)}},J=async(l=!0)=>{var n,E,Y,ye,he,be,pe,_e;try{let $;if(_.value.startsWith("shiki")?$=await so(_.value):$=await lo(_.value,o.token),Array.isArray($)&&$.length===0)throw new Error("–î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–∏—Å–∫.");s.value=$,_.value.startsWith("shiki")?s.value={...s.value,title:s.value.name_ru||s.value.name_en,name_original:s.value.name_en,short_description:s.value.slogan}:s.value={...s.value,title:s.value.name_ru||s.value.name_en||s.value.name_original,kinopoisk_id:_.value},p.setHeaderContent({text:s.value.title,imageUrl:s.value.logo_url}),Ye();const se={kp_id:_.value,title:((n=s.value)==null?void 0:n.name_ru)||((E=s.value)==null?void 0:E.name_en)||((Y=s.value)==null?void 0:Y.name_original),poster:((ye=s.value)==null?void 0:ye.poster_url)||((he=s.value)==null?void 0:he.cover_url)||((be=s.value)==null?void 0:be.screenshots[0]),year:(pe=s.value)==null?void 0:pe.year,type:(_e=s.value)==null?void 0:_e.type};if(_.value.startsWith("shiki"))if(s.value.screenshots&&s.value.screenshots.length>0){const Te=Math.floor(Math.random()*s.value.screenshots.length),We=s.value.screenshots[Te];w.updateMoviePoster(We)}else se.poster&&w.updateMoviePoster(se.poster);else se.poster&&w.updateMoviePoster(se.poster);if(j(()=>d.isHistoryAllowed).value&&se.kp_id&&se.title&&l)if(o.token)try{await vn(se.kp_id,X.HISTORY)}catch(Te){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é:",Te)}else d.addToHistory({...se})}catch($){const{message:se,code:Ne}=we($);C.value=se,k.value=Ne,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–ª—å–º–∞—Ö:",$)}},He=j(()=>{var l;return(l=s.value)==null?void 0:l.videos}),Le=j(()=>{var l;return Oe((l=s.value)==null?void 0:l.sequels_and_prequels)}),ge=j(()=>{var l;return Oe((l=s.value)==null?void 0:l.similars)}),$e=()=>{var Y;const l=((Y=document.querySelector(".related-movies"))==null?void 0:Y.clientWidth)||0,E=Math.floor(l/160)||10;H.value=Math.max(1,E)},et=()=>{$e()},Fe=l=>{if(l.altKey&&l.keyCode===84&&document.querySelector(".player-container")){const E=document.querySelector(".theater-mode-btn");E&&E.click()}},tt=l=>{l.button===1&&(l.preventDefault(),Ve(l))},Ve=async l=>{if(O.value!==null){O.value=null,re.value=!1;return}N.value=void 0,de.value=l.currentTarget,O.value="",re.value=!0;try{const n=await io(s.value.imdb_id);O.value=n.nudity_info}catch(n){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö:",n),O.value="–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ Parents Guide –Ω–∞ IMDb –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏."}finally{re.value=!1}},y=l=>{var n,E;if(O.value=null,N.value!==void 0){N.value=void 0;return}me.value=l.currentTarget,N.value=((n=s.value)==null?void 0:n.nudity_timings)===null?"":((E=s.value)==null?void 0:E.nudity_timings)||""},A=()=>{var l,n;O.value=null,N.value=((l=s.value)==null?void 0:l.nudity_timings)===null?"":((n=s.value)==null?void 0:n.nudity_timings)||""},Se=l=>{var E,Y,ye,he,be,pe,_e,$,se,Ne,Te,We,yt;return(yt={[X.FAVORITE]:((Y=(E=s.value)==null?void 0:E.lists)==null?void 0:Y.isFavorite)||!1,[X.HISTORY]:((he=(ye=s.value)==null?void 0:ye.lists)==null?void 0:he.isHistory)||!1,[X.LATER]:((pe=(be=s.value)==null?void 0:be.lists)==null?void 0:pe.isLater)||!1,[X.COMPLETED]:(($=(_e=s.value)==null?void 0:_e.lists)==null?void 0:$.isCompleted)||!1,[X.ABANDONED]:((Ne=(se=s.value)==null?void 0:se.lists)==null?void 0:Ne.isAbandoned)||!1,[X.WATCHING]:((We=(Te=s.value)==null?void 0:Te.lists)==null?void 0:We.isWatching)||!1}[l])!=null?yt:!1},De=async l=>{if(!o.token){g.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:()=>b.push("/login")});return}try{const n={[X.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[X.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[X.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[X.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[X.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[X.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};Se(l)?(await ao(_.value,l),g.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(n[l]))):(await vn(_.value,l),g.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(n[l]))),await J(!1),le.value=!1}catch(n){const{message:E,code:Y}=we(n);g.value.showNotification("".concat(E," ").concat(Y))}},_t=l=>{const n=document.querySelector(".mobile-list-dropdown");n&&!n.contains(l.target)&&(le.value=!1)},nt=l=>{const n=document.querySelector(".nudity-info-popup");n&&!n.contains(l.target)&&de.value&&!de.value.contains(l.target)&&(O.value=null)},ot=l=>{const n=document.querySelector(".nudity-info-popup");n&&!n.contains(l.target)&&me.value&&!me.value.contains(l.target)&&(N.value=void 0)};rt(async()=>{await J(),t.value=!1,document.addEventListener("keydown",Fe),window.addEventListener("resize",et),setTimeout($e,100),document.addEventListener("click",_t),document.addEventListener("click",nt,!0),document.addEventListener("click",ot,!0),window.selectedNudityTimings=Array.from(G.value),window.overlayNudityTimings=Array.from(W.value)}),Ut(async()=>{p.clearHeaderContent(),document.removeEventListener("keydown",Fe),window.removeEventListener("resize",et),document.removeEventListener("click",_t),document.removeEventListener("click",nt,!0),document.removeEventListener("click",ot,!0),delete window.selectedNudityTimings,delete window.overlayNudityTimings}),Ce(()=>m.params.kp_id,async l=>{l&&l!==_.value&&(p.clearHeaderContent(),_.value=l,S.value=null,await J(),t.value=!1)},{immediate:!0}),Ce(s,()=>{Ye()},{deep:!0}),Ce(O,l=>{l?document.addEventListener("click",nt,!0):document.removeEventListener("click",nt,!0)},{deep:!0}),Ce(N,l=>{l?document.addEventListener("click",ot,!0):document.removeEventListener("click",ot,!0)},{deep:!0}),Ce(G,()=>{window.selectedNudityTimings=Array.from(G.value)},{deep:!0}),Ce(W,()=>{window.overlayNudityTimings=Array.from(W.value)},{deep:!0}),rt(()=>{window.selectedNudityTimings=Array.from(G.value),window.overlayNudityTimings=Array.from(W.value);const l=setInterval(()=>{if(window.obsSources&&Array.isArray(window.obsSources)&&(Qt.value=window.obsSources),window.getOBSFiltersInfo){const n=window.getOBSFiltersInfo();n&&Array.isArray(n)&&h.updateObsSettings({filtersFound:n})}},1e3);Ut(()=>{clearInterval(l)})}),Ut(()=>{delete window.selectedNudityTimings,delete window.overlayNudityTimings});const oe=l=>{var n,E;return((E=(n=s.value)==null?void 0:n.staff)==null?void 0:E.filter(Y=>Y.profession_key===l))||[]},xt=async()=>{try{await navigator.clipboard.writeText(O.value),g.value.showNotification("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω")}catch(l){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",l),g.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞")}finally{O.value=null}},Rt=async()=>{if(N.value.length!==0)try{const l=N.value.map(n=>"".concat(n.timing_text," (by @").concat(n.username,")")).join("\n").concat("\nReYohoho\n");await navigator.clipboard.writeText(l),g.value.showNotification("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω")}catch(l){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",l),g.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞")}finally{N.value=void 0}},M=()=>{const l=encodeURIComponent(O.value);window.open("https://translate.google.com/?sl=en&tl=ru&text=".concat(l),"_blank"),O.value=null},R=f(""),z=f(!1),Q=j(()=>{if(!R.value.trim())return[];try{return It(R.value,!0)||[]}catch(l){return console.error("Error parsing timing text:",l),[]}}),F=j(()=>R.value.trim()),ie=l=>o.user&&l.user_id&&l.user_id===o.user.id,Re=()=>{if(!o.token){g.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a> –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–∞–π–º–∏–Ω–≥–æ–≤',5e3,{onClick:()=>b.push("/login")});return}Pe.value=null,R.value="",wt.value=!0},mt=l=>{Pe.value=l,R.value=l.timing_text,wt.value=!0},Pt=()=>{wt.value=!1,Pe.value=null,R.value=""},Cn=async()=>{if(!(!F.value||z.value))try{z.value=!0,await co(_.value,R.value),g.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –¥–æ–±–∞–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ!"),R.value="",Pt(),await J(!1),A()}catch(l){const{message:n}=we(l);g.value.showNotification(n,5e3)}finally{z.value=!1}},En=async()=>{if(!(!F.value||z.value||!Pe.value))try{z.value=!0,await uo(Pe.value.id,R.value),g.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ–±–Ω–æ–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ!"),Pt(),await J(!1),A()}catch(l){const{message:n}=we(l);g.value.showNotification(n,5e3)}finally{z.value=!1}},Ln=async l=>{if(confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ç–∞–π–º–∏–Ω–≥?"))try{await fo(l),g.value.showNotification("–¢–∞–π–º–∏–Ω–≥ —É–¥–∞–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ!"),await J(!1),A()}catch(n){const{message:E}=we(n);g.value.showNotification(E,5e3)}},Mn=l=>{Ct.value=l,qe.value="",jt.value=!0},Wt=()=>{jt.value=!1,qe.value="",Ct.value=null},Sn=async()=>{if(!(!qe.value.trim()||vt.value||!Ct.value))try{vt.value=!0,await mo(Ct.value,qe.value),g.value.showNotification("–ñ–∞–ª–æ–±–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!"),Wt()}catch(l){const{message:n}=we(l);g.value.showNotification(n,5e3)}finally{vt.value=!1}},In=async()=>{try{const{submissions:l}=await ro();Et.value=l,Lt.value=!0}catch(l){const{message:n}=we(l);g.value.showNotification(n)}},wt=f(!1),Pe=f(null),jt=f(!1),qe=f(""),Ct=f(null),vt=f(!1),Et=f([]),Lt=f(!1),ft=f(!1),st=f([]),lt=f(!1),ce=f(!1),Ie=f(null),je=f(!1),Be=f(!1),Kt=f(!1),gt=f(!1),Mt=j({get:()=>h.obsSettings.enabled,set:l=>h.updateObsSettings({enabled:l})}),Gt=j({get:()=>h.obsSettings.host,set:l=>h.updateObsSettings({host:l})}),Yt=j({get:()=>h.obsSettings.port,set:l=>h.updateObsSettings({port:l})}),Zt=j({get:()=>h.obsSettings.password,set:l=>h.updateObsSettings({password:l})}),it=j(()=>h.obsSettings.connected),Qt=f([]),kt=j(()=>h.obsSettings.filtersFound),ze=j({get:()=>h.obsSettings.selectedFilterId,set:l=>h.setObsSelectedFilter(l)}),at=j(()=>ze.value?kt.value.find(l=>l.id===ze.value):null),Xt=j({get:()=>h.obsSettings.showObsInOverlay,set:l=>h.updateObsSettings({showObsInOverlay:l})}),Tn=async l=>{if(!ce.value)try{ce.value=!0,Ie.value=l,je.value=!0,Be.value=!1,await go(l);const n=st.value.find(E=>E.id===l);n&&(n.status="approved"),g.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ–¥–æ–±—Ä–µ–Ω")}catch(n){const{message:E}=we(n);g.value.showNotification("–û—à–∏–±–∫–∞: ".concat(E))}finally{ce.value=!1,Ie.value=null,je.value=!1,Be.value=!1}},xn=async l=>{if(!ce.value)try{ce.value=!0,Ie.value=l,je.value=!1,Be.value=!1,await ko(l);const n=st.value.find(E=>E.id===l);n&&(n.status="rejected"),g.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ—Ç–∫–ª–æ–Ω–µ–Ω")}catch(n){const{message:E}=we(n);g.value.showNotification("–û—à–∏–±–∫–∞: ".concat(E))}finally{ce.value=!1,Ie.value=null,je.value=!1,Be.value=!1}},Rn=async l=>{if(!ce.value)try{ce.value=!0,Ie.value=l,je.value=!1,Be.value=!0,await yo(l);const n=st.value.find(E=>E.id===l);n&&(n.status="clean_text"),g.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ—Ç–º–µ—á–µ–Ω –∫–∞–∫ clean_text")}catch(n){const{message:E}=we(n);g.value.showNotification("–û—à–∏–±–∫–∞: ".concat(E))}finally{ce.value=!1,Ie.value=null,je.value=!1,Be.value=!1}},Pn=async()=>{if(!lt.value)try{lt.value=!0,ft.value=!0;const{timings:l}=await vo();st.value=l}catch(l){const{message:n}=we(l);g.value.showNotification(n),ft.value=!1}finally{lt.value=!1}},jn=(l,n)=>{const E=[2,0,1,1,1,2];return n[l%100>4&&l%100<20?2:E[Math.min(l%10,5)]]},Bn=l=>{if(!Et.value.length)return 0;const n=Math.max(...Et.value.map(E=>E.approved_submissions_count));return l/n*100},Jt=j(()=>st.value),Nn=l=>{G.value.has(l)?G.value.delete(l):G.value.add(l)},ke=f({});function Un(l){if(ke.value[l.id])ke.value={...ke.value,[l.id]:!1};else{const n=It(l.timing_text);ke.value={...ke.value,[l.id]:n}}}const $t=j(()=>!!window.electronAPI);function An(){fe.value!==null&&Nn(fe.value),en()}function en(){var l,n;T.value=!1,fe.value=null,N.value=((l=s.value)==null?void 0:l.nudity_timings)===null?"":((n=s.value)==null?void 0:n.nudity_timings)||""}function On(l){if(!$t.value){g.value?g.value.showNotification("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"):alert("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏");return}T.value=!0,tn(l)}function Hn(l){if(!$t.value){g.value?g.value.showNotification("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"):alert("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏");return}tn(l)}const tn=l=>{W.value.has(l)?W.value.delete(l):W.value.add(l)};function Fn(){ve.value=!ve.value}function Vn(){V.value=!V.value}function Bt(){const l=[];if(N.value&&Array.isArray(N.value)){for(const n of N.value)if(G.value.has(n.id)){const E=It(n.timing_text);E&&E.length>0&&l.push(...E)}}return l}function Nt(){const l=[];if(N.value&&Array.isArray(N.value)&&N.value.length>0){for(const n of N.value)if(W.value.has(n.id)){const E=It(n.timing_text);E&&E.length>0&&l.push(...E)}}return l}const Dn=()=>{Mt.value&&nn()},nn=async()=>{var l,n,E;if(!gt.value){gt.value=!0;try{window.connectToOBS?(await window.connectToOBS(),setTimeout(()=>{window.obsSources&&(Qt.value=window.obsSources)},1e3),(l=g.value)==null||l.showNotification("–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ OBS...")):(n=g.value)==null||n.showNotification("–ü–ª–µ–µ—Ä –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω")}catch(Y){console.error("Error connecting to OBS:",Y),(E=g.value)==null||E.showNotification("–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ OBS")}finally{gt.value=!1}}},qn=()=>{var l,n;if(!ze.value){(l=g.value)==null||l.showNotification("–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∏–ª—å—Ç—Ä –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è");return}window.testOBSBlur?window.testOBSBlur(ze.value):(n=g.value)==null||n.showNotification("OBS —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã")},zn=()=>{var l,n;window.refreshOBSFilters?(window.refreshOBSFilters(),(l=g.value)==null||l.showNotification("–ü–æ–∏—Å–∫ —Ñ–∏–ª—å—Ç—Ä–æ–≤...")):(n=g.value)==null||n.showNotification("OBS —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã")},Wn=()=>{var l,n;ze.value&&((n=g.value)==null||n.showNotification("–í—ã–±—Ä–∞–Ω —Ñ–∏–ª—å—Ç—Ä: ".concat((l=at.value)==null?void 0:l.sourceName)))};return(l,n)=>{var Y,ye,he,be,pe,_e,$,se,Ne,Te,We,yt,on,sn,ln,an,rn,un;const E=ae("router-link");return i(),a(K,null,[e("div",Sl,[e("div",Il,[(t.value||!s.value)&&!C.value?(i(),a("div",Tl,[e("div",xl,[n[29]||(n[29]=pt('<div class="movie-skeleton__header" data-v-00e397a8><div class="movie-skeleton__title" data-v-00e397a8></div></div><div class="movie-skeleton__ratings" data-v-00e397a8><div class="movie-skeleton__rating-item" data-v-00e397a8></div><div class="movie-skeleton__rating-item" data-v-00e397a8></div><div class="movie-skeleton__rating-item" data-v-00e397a8></div></div>',2)),e("div",Rl,[Z(_o)]),n[30]||(n[30]=pt('<div class="movie-skeleton__additional-info" data-v-00e397a8><div class="movie-skeleton__section-title" data-v-00e397a8></div><div class="movie-skeleton__info-list" data-v-00e397a8><div class="movie-skeleton__info-item" data-v-00e397a8></div><div class="movie-skeleton__info-item" data-v-00e397a8></div><div class="movie-skeleton__info-item" data-v-00e397a8></div><div class="movie-skeleton__info-item" data-v-00e397a8></div><div class="movie-skeleton__info-item" data-v-00e397a8></div></div></div><div class="movie-skeleton__description" data-v-00e397a8><div class="movie-skeleton__description-line" data-v-00e397a8></div><div class="movie-skeleton__description-line" data-v-00e397a8></div><div class="movie-skeleton__description-line" data-v-00e397a8></div><div class="movie-skeleton__description-line" data-v-00e397a8></div></div>',2))])])):v("",!0),C.value?(i(),Ke(no,{key:1,message:C.value,code:k.value},null,8,["message","code"])):v("",!0),C.value?(i(),a("div",Pl,[(i(),Ke(kn,{key:_.value,"kp-id":_.value,"movie-info":s.value,"onUpdate:movieInfo":J},null,8,["kp-id","movie-info"]))])):v("",!0),s.value&&!t.value?(i(),a("div",jl,[e("div",Bl,[s.value.logo_url?(i(),a("div",{key:0,class:"content-logo",onMousemove:Xe,onMouseleave:n[0]||(n[0]=u=>xe.value=!1),onClick:Je},[e("img",{src:s.value.logo_url,alt:"–õ–æ–≥–æ—Ç–∏–ø —Ñ–∏–ª—å–º–∞",class:"content-logo"},null,8,Nl)],32)):(i(),a("div",{key:1,onMousemove:Xe,onMouseleave:n[1]||(n[1]=u=>xe.value=!1),onClick:Je},[e("h1",Ul,c(s.value.title),1)],32)),te(e("div",{class:"title-copy-tooltip",style:Ot(Qe.value)}," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ",4),[[Tt,xe.value]])]),s.value.kinopoisk_id||s.value.title||s.value.imdb_id||s.value.rating_imdb||s.value.shikimori_id?(i(),a("div",Al,[s.value.kinopoisk_id?(i(),Ke(ho,{key:s.value.kinopoisk_id,"kp-id":s.value.kinopoisk_id,"show-dash":!0},null,8,["kp-id"])):v("",!0),s.value.kinopoisk_id?(i(),a("div",Ol,[e("a",{href:"https://www.kinopoisk.ru/film/".concat(s.value.kinopoisk_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:s.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(ue(s.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[n[31]||(n[31]=e("img",{src:fn,alt:"–ö–ü",class:"rating-logo"},null,-1)),e("span",{class:x(["rating-value",q(St)(s.value.rating_kinopoisk)])},c(s.value.rating_kinopoisk?s.value.rating_kinopoisk:"‚Äî"),3),n[32]||(n[32]=e("img",{src:bt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Hl)])):v("",!0),!s.value.kinopoisk_id&&s.value.title?(i(),a("div",Fl,[e("a",{href:"https://www.kinopoisk.ru/index.php?kp_query=".concat(encodeURIComponent(s.value.title+(s.value.year?" "+s.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:s.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(ue(s.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[n[33]||(n[33]=e("img",{src:fn,alt:"–ö–ü",class:"rating-logo"},null,-1)),e("span",{class:x(["rating-value",q(St)(s.value.rating_kinopoisk)])},c(s.value.rating_kinopoisk?s.value.rating_kinopoisk:"‚Äî"),3),n[34]||(n[34]=e("img",{src:bt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Vl)])):v("",!0),s.value.imdb_id?(i(),a("div",Dl,[e("a",{href:"https://www.imdb.com/title/".concat(s.value.imdb_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:s.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(ue(s.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[n[35]||(n[35]=e("img",{src:gn,alt:"IMDb",class:"rating-logo"},null,-1)),e("span",{class:x(["rating-value",q(St)(s.value.rating_imdb)])},c(s.value.rating_imdb?s.value.rating_imdb:"‚Äî"),3),n[36]||(n[36]=e("img",{src:bt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,ql)])):v("",!0),!s.value.imdb_id&&s.value.title?(i(),a("div",zl,[e("a",{href:"https://www.imdb.com/find/?q=".concat(encodeURIComponent(s.value.title+(s.value.year?" "+s.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:s.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(ue(s.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[n[37]||(n[37]=e("img",{src:gn,alt:"IMDb",class:"rating-logo"},null,-1)),e("span",{class:x(["rating-value",q(St)(s.value.rating_imdb)])},c(s.value.rating_imdb?s.value.rating_imdb:"‚Äî"),3),n[38]||(n[38]=e("img",{src:bt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Wl)])):v("",!0),s.value.shikimori_id?(i(),a("div",Kl,[e("a",{href:"https://shikimori.one/animes/".concat(s.value.shikimori_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},n[39]||(n[39]=[e("img",{src:bo,alt:"Shiki",class:"rating-logo"},null,-1),e("img",{src:bt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,Gl)])):v("",!0),s.value.imdb_id?(i(),a("button",{key:6,class:"nudity-info-btn parents-guide-btn",onClick:n[2]||(n[2]=u=>Ve(u)),onMousedown:n[3]||(n[3]=u=>tt(u)),title:O.value?"–°–∫—Ä—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é":"–ü–æ–∫–∞–∑–∞—Ç—å Parents Guide –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ü–µ–Ω–∞—Ö"},[n[40]||(n[40]=e("span",{class:"desktop-text"},"Parents Guide",-1)),n[41]||(n[41]=e("span",{class:"mobile-text"},"PG",-1)),re.value?(i(),a("i",Ql)):(i(),a("i",Zl))],40,Yl)):v("",!0),e("button",{class:"nudity-info-btn",onClick:n[4]||(n[4]=u=>y(u)),title:N.value!==void 0?"–°–∫—Ä—ã—Ç—å —Ç–∞–π–º–∏–Ω–≥–∏":"–ü–æ–∫–∞–∑–∞—Ç—å —Ç–∞–π–º–∏–Ω–≥–∏ —Å—Ü–µ–Ω 18+(–¥–ª—è —Ç–≤–∏—á–∞, –º–∏–≥–∞–Ω–∏–µ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö)"},[e("i",{class:x(["fa-regular fa-clock",{"text-red":ne.value,"text-red-blink":dt.value}])},null,2)],8,Xl)])):v("",!0),(i(),Ke(kn,{key:_.value,"kp-id":_.value,"movie-info":s.value,"onUpdate:movieInfo":J},null,8,["kp-id","movie-info"])),q(d).isMobile?(i(),a("div",Jl,[e("button",{class:x(["mobile-list-toggle",{}]),onClick:n[5]||(n[5]=u=>le.value=!le.value)},[e("span",{class:x(["material-icons",{active:Ge.value}])},c(Ge.value?"bookmark_added":"bookmark_border"),3),n[42]||(n[42]=e("span",{class:"button-label"},"–î–æ–±–∞–≤–∏—Ç—å –≤ —Å–ø–∏—Å–æ–∫",-1)),e("span",{class:x(["material-icons dropdown-arrow",{expanded:le.value}])},"expand_more",2)]),te(e("div",$l,[e("button",{class:x(["mobile-list-btn",{}]),onClick:n[6]||(n[6]=u=>De(q(X).FAVORITE))},[e("span",{class:x(["material-icons",{active:(ye=(Y=s.value)==null?void 0:Y.lists)==null?void 0:ye.isFavorite}])},c((be=(he=s.value)==null?void 0:he.lists)!=null&&be.isFavorite?"favorite":"favorite_border"),3),n[43]||(n[43]=e("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))]),e("button",{class:x(["mobile-list-btn",{}]),onClick:n[7]||(n[7]=u=>De(q(X).WATCHING))},[e("span",{class:x(["material-icons",{active:(_e=(pe=s.value)==null?void 0:pe.lists)==null?void 0:_e.isWatching}])},c((se=($=s.value)==null?void 0:$.lists)!=null&&se.isWatching?"visibility":"visibility_off"),3),n[44]||(n[44]=e("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))]),e("button",{class:x(["mobile-list-btn",{}]),onClick:n[8]||(n[8]=u=>De(q(X).LATER))},[e("span",{class:x(["material-icons",{active:(Te=(Ne=s.value)==null?void 0:Ne.lists)==null?void 0:Te.isLater}])},"watch_later",2),n[45]||(n[45]=e("span",{class:"button-label"},"–ü–æ–∑–∂–µ",-1))]),e("button",{class:x(["mobile-list-btn",{}]),onClick:n[9]||(n[9]=u=>De(q(X).COMPLETED))},[e("span",{class:x(["material-icons",{active:(yt=(We=s.value)==null?void 0:We.lists)==null?void 0:yt.isCompleted}])},c((sn=(on=s.value)==null?void 0:on.lists)!=null&&sn.isCompleted?"check_circle":"check_circle_outline"),3),n[46]||(n[46]=e("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))]),e("button",{class:x(["mobile-list-btn",{}]),onClick:n[10]||(n[10]=u=>De(q(X).ABANDONED))},[e("span",{class:x(["material-icons",{active:(an=(ln=s.value)==null?void 0:ln.lists)==null?void 0:an.isAbandoned}])},"not_interested",2),n[47]||(n[47]=e("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))])],512),[[Tt,le.value]])])):v("",!0),e("meta",{name:"title-and-year",content:s.value.type==="FILM"&&s.value.year?"".concat(s.value.title," (").concat(s.value.year,")"):s.value.title},null,8,ei),s.value.name_original?(i(),a("meta",{key:2,name:"original-title",content:s.value.name_original},null,8,ti)):v("",!0),e("div",ni,[n[58]||(n[58]=e("h2",{class:"additional-info-title"},"–ü–æ–¥—Ä–æ–±–Ω–µ–µ",-1)),e("div",oi,[s.value.poster_url?(i(),a("div",si,[e("a",{href:s.value.poster_url,target:"_blank",rel:"noopener noreferrer"},[e("img",{src:s.value.poster_url,alt:"–ü–æ—Å—Ç–µ—Ä —Ñ–∏–ª—å–º–∞",class:"movie-poster"},null,8,ii)],8,li)])):v("",!0),e("div",ai,[e("ul",ri,[s.value.type&&q(cn)[s.value.type]?(i(),a("li",ui,[n[48]||(n[48]=e("strong",null,"–¢–∏–ø:",-1)),U(" "+c(q(cn)[s.value.type]),1)])):v("",!0),s.value.year?(i(),a("li",di,[n[49]||(n[49]=e("strong",null,"–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞:",-1)),U(" "+c(s.value.year),1)])):v("",!0),s.value.title?(i(),a("li",ci,[n[50]||(n[50]=e("strong",null,"–ù–∞–∑–≤–∞–Ω–∏–µ:",-1)),U(" "+c(s.value.title),1)])):v("",!0),s.value.name_original?(i(),a("li",mi,[n[51]||(n[51]=e("strong",null,"–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:",-1)),U(" "+c(s.value.name_original),1)])):v("",!0),s.value.slogan?(i(),a("li",vi,[n[52]||(n[52]=e("strong",null,"–°–ª–æ–≥–∞–Ω:",-1)),U(" "+c(s.value.slogan),1)])):v("",!0),s.value.production_companies?(i(),a("li",fi,[n[53]||(n[53]=e("strong",null,"–ü—Ä–æ–¥–∞–∫—à–Ω:",-1)),U(" "+c(s.value.production_companies),1)])):v("",!0),(rn=s.value.countries)!=null&&rn.length?(i(),a("li",gi,[n[54]||(n[54]=e("strong",null,"–°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞:",-1)),U(" "+c(s.value.countries.map(u=>u.country).join(", ")),1)])):v("",!0),(un=s.value.genres)!=null&&un.length?(i(),a("li",ki,[n[55]||(n[55]=e("strong",null,"–ñ–∞–Ω—Ä—ã:",-1)),U(" "+c(s.value.genres.map(u=>u.genre).join(", ")),1)])):v("",!0),s.value.film_length?(i(),a("li",yi,[n[56]||(n[56]=e("strong",null,"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:",-1)),U(" "+c(Ze(s.value.film_length)),1)])):v("",!0),s.value.rating_mpaa||s.value.rating_age_limits?(i(),a("li",hi,[s.value.rating_mpaa?(i(),a("div",bi,[n[57]||(n[57]=e("strong",null,"MPAA",-1)),e("span",null,c(s.value.rating_mpaa.toUpperCase()),1)])):v("",!0),s.value.rating_age_limits?(i(),a("div",pi,[e("strong",null,c(s.value.rating_age_limits.replace("age",""))+"+",1)])):v("",!0)])):v("",!0)]),e("div",_i,[s.value.description?(i(),a("p",wi,c(s.value.description),1)):v("",!0)])])])]),ct.value?(i(),a("div",Ci,[(i(),Ke(Ml,{"movie-id":_.value,key:_.value},null,8,["movie-id"]))])):v("",!0),s.value.staff?(i(),a("div",Ei,[e("div",Li,[oe("ACTOR").length?(i(),a("div",Mi,[n[59]||(n[59]=e("h3",{class:"additional-info-title"},"–ê–∫—Ç—ë—Ä—ã",-1)),e("div",Si,[(i(!0),a(K,null,ee(oe("ACTOR").slice(0,12),u=>(i(),a("div",{key:u.staff_id,class:"staff-item"},[e("a",{href:"https://www.kinopoisk.ru/name/".concat(u.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-link",title:u.description||""},[e("img",{src:u.poster_url,alt:u.name_ru,class:"staff-photo"},null,8,Ti),e("span",xi,c(u.name_ru||u.name_en),1),u.description?(i(),a("span",Ri,c(u.description),1)):v("",!0)],8,Ii)]))),128)),e("a",{class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(_.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(oe("ACTOR").length," –∞–∫—Ç–µ—Ä–æ–≤")}," +"+c(oe("ACTOR").length-12),9,Pi)])])):v("",!0),oe("DIRECTOR").length?(i(),a("div",ji,[n[60]||(n[60]=e("h3",{class:"additional-info-title"},"–†–µ–∂–∏—Å—Å—ë—Ä—ã",-1)),e("div",Bi,[e("div",Ni,[(i(!0),a(K,null,ee(oe("DIRECTOR").slice(0,5),u=>(i(),a("a",{key:u.staff_id,href:"https://www.kinopoisk.ru/name/".concat(u.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},c(u.name_ru||u.name_en),9,Ui))),128)),oe("DIRECTOR").length>5?(i(),a("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(_.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(oe("DIRECTOR").length," —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–≤")}," +"+c(oe("DIRECTOR").length-5),9,Ai)):v("",!0)])])])):v("",!0),oe("PRODUCER").length?(i(),a("div",Oi,[n[61]||(n[61]=e("h3",{class:"additional-info-title"},"–ü—Ä–æ–¥—é—Å–µ—Ä—ã",-1)),e("div",Hi,[e("div",Fi,[(i(!0),a(K,null,ee(oe("PRODUCER").slice(0,5),u=>(i(),a("a",{key:u.staff_id,href:"https://www.kinopoisk.ru/name/".concat(u.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},c(u.name_ru||u.name_en),9,Vi))),128)),oe("PRODUCER").length>5?(i(),a("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(_.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(oe("PRODUCER").length," –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤")}," +"+c(oe("PRODUCER").length-5),9,Di)):v("",!0)])])])):v("",!0)])])):v("",!0),He.value.length&&I.value?(i(),a("div",qi,[Z(jo,{videos:He.value,"active-video-index":S.value,onSelect:l.playTrailer},null,8,["videos","active-video-index","onSelect"])])):v("",!0),Le.value.length?(i(),a("div",zi,[n[62]||(n[62]=e("h2",null,"–°–∏–∫–≤–µ–ª—ã –∏ –ø—Ä–∏–∫–≤–µ–ª—ã",-1)),Z(q(yn),{"movies-list":L.value?Le.value:Le.value.slice(0,H.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),Le.value.length>H.value?(i(),a("a",{key:0,class:"expand-circle-button",onClick:n[11]||(n[11]=u=>L.value=!L.value),title:"".concat(L.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(Le.value.length,")")},c(L.value?"‚àí":"+".concat(Le.value.length-H.value)),9,Wi)):v("",!0)])):v("",!0),ge.value.length?(i(),a("div",Ki,[n[63]||(n[63]=e("h2",null,"–ü–æ—Ö–æ–∂–∏–µ",-1)),Z(q(yn),{"movies-list":P.value?ge.value:ge.value.slice(0,H.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),ge.value.length>H.value?(i(),a("a",{key:0,class:"expand-circle-button",onClick:n[12]||(n[12]=u=>P.value=!P.value),title:"".concat(P.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(ge.value.length,")")},c(P.value?"‚àí":"+".concat(ge.value.length-H.value)),9,Gi)):v("",!0)])):v("",!0)])):v("",!0)])]),Z(_n,{ref_key:"notificationRef",ref:g},null,512),O.value!==null?(i(),a("div",Yi,[e("div",Zi,[re.value?(i(),a("div",Qi,n[64]||(n[64]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),e("span",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏...",-1)]))):(i(),a("div",Xi,c(O.value),1))]),e("div",Ji,[e("a",{href:"https://www.imdb.com/title/".concat(s.value.imdb_id,"/parentalguide"),target:"_blank",rel:"noopener noreferrer",class:"nudity-info-button"},n[65]||(n[65]=[e("i",{class:"fas fa-external-link-alt"},null,-1),e("span",null,"Parents Guide",-1)]),8,$i),e("button",{class:"nudity-info-button",onClick:xt},n[66]||(n[66]=[e("i",{class:"fas fa-copy"},null,-1),e("span",null,"Copy",-1)])),e("button",{class:"nudity-info-button",onClick:M},n[67]||(n[67]=[e("i",{class:"fas fa-language"},null,-1),e("span",null,"Translate",-1)]))])])):v("",!0),N.value!==void 0?(i(),a("div",ea,[e("div",ta,[e("div",{class:"acknowledgment-table"},[n[70]||(n[70]=e("div",{class:"acknowledgment-header"},[e("i",{class:"fa-solid fa-heart"}),e("span",null,"–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏")],-1)),e("div",{class:"acknowledgment-content"},[n[69]||(n[69]=e("div",{class:"acknowledgment-row"},[e("a",{href:"https://www.twitch.tv/tanyabelkova",target:"_blank",rel:"noopener noreferrer",class:"twitch-link"},[e("i",{class:"fa-brands fa-twitch"}),e("span",null,"TanyaBelkova")]),e("span",{class:"acknowledgment-text"},"‚Äî –∑–∞ –æ—Å–Ω–æ–≤—É –±–∞–∑—ã —Ç–∞–π–º–∏–Ω–≥–æ–≤")],-1)),e("div",{class:"acknowledgment-row clickable",onClick:In},n[68]||(n[68]=[e("div",{class:"community-link"},[e("i",{class:"fa-solid fa-users"}),e("span",null,"–°–æ–æ–±—â–µ—Å—Ç–≤–æ")],-1),e("span",{class:"acknowledgment-text"},"‚Äî –∑–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–∏–Ω–≥–æ–≤",-1)]))])]),e("div",{class:x(["timings-content",{"no-border":!N.value}])},[n[82]||(n[82]=e("div",{class:"timings-warning"},[e("i",{class:"fas fa-exclamation-triangle"}),e("span",null,"–¢–∞–π–º–∏–Ω–≥–∏ –Ω–µ –º–æ–¥–µ—Ä–∏—Ä—É—é—Ç—Å—è - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–¥ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º")],-1)),e("div",na,[N.value.length>0?(i(),a("div",oa,[(i(!0),a(K,null,ee(N.value,u=>(i(),a("div",{key:u.id,class:x(["timing-entry",{pending:u.status==="pending","clean-text":u.status==="clean_text",selected:G.value.has(u.id)}])},[e("div",sa,[e("div",la,[u.status==="pending"?(i(),a("div",ia,"–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏")):v("",!0),u.status==="clean_text"?(i(),a("div",aa," –¢–∞–π–º–∏–Ω–≥–∏ —Ç–∞–∫–æ–≥–æ —Ç–∏–ø–∞ –Ω–µ –º–æ–¥–µ—Ä–∏—Ä—É—é—Ç—Å—è, –¥–ª—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Å–≤–µ—Ä—è–π—Ç–µ—Å—å —Å ParentsGuide ")):v("",!0)]),e("div",ra,[e("button",{class:"nudity-info-button",onClick:D=>Un(u)},c(ke.value[u.id]?"–°–∫—Ä—ã—Ç—å –ø–∞—Ä—Å–µ—Ä":"–ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä—Å–µ—Ä"),9,ua),W.value.has(u.id)?(i(),a("button",{key:0,class:"nudity-info-button overlay-button",onClick:D=>Hn(u.id),title:"–£–¥–∞–ª–∏—Ç—å –∏–∑ –æ–≤–µ—Ä–ª–µ—è"},n[71]||(n[71]=[e("i",{class:"fas fa-eye-slash"},null,-1),e("span",null,"–£–¥–∞–ª–∏—Ç—å –∏–∑ –æ–≤–µ—Ä–ª–µ—è",-1)]),8,da)):(i(),a("button",{key:1,class:"nudity-info-button overlay-button",onClick:D=>On(u.id),title:"–î–æ–±–∞–≤–∏—Ç—å –≤ –æ–≤–µ—Ä–ª–µ–π"},n[72]||(n[72]=[e("i",{class:"fas fa-eye"},null,-1),e("span",null,"–î–æ–±–∞–≤–∏—Ç—å –≤ –æ–≤–µ—Ä–ª–µ–π",-1)]),8,ca)),ie(u)?(i(),a(K,{key:2},[e("button",{class:"nudity-info-button edit-button",onClick:D=>mt(u),title:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–π–º–∏–Ω–≥"},n[73]||(n[73]=[e("i",{class:"fas fa-edit"},null,-1),e("span",null,"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å",-1)]),8,ma),e("button",{class:"nudity-info-button delete-button",onClick:D=>Ln(u.id),title:"–£–¥–∞–ª–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥"},n[74]||(n[74]=[e("i",{class:"fas fa-trash"},null,-1),e("span",null,"–£–¥–∞–ª–∏—Ç—å",-1)]),8,va)],64)):v("",!0),ie(u)?v("",!0):(i(),a("button",{key:3,class:"nudity-info-button report-button",onClick:D=>Mn(u.id),title:"–ü–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è –Ω–∞ —Ç–∞–π–º–∏–Ω–≥"},n[75]||(n[75]=[e("i",{class:"fas fa-flag"},null,-1),e("span",null,"–ü–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è",-1)]),8,fa))]),e("div",{class:x(["timing-hover-container",{blurred:u.status==="pending"}])},[e("span",ga,c(u.timing_text),1),n[76]||(n[76]=e("br",null,null,-1)),e("span",ka,[U(" by "+c(u.username)+" ",1),u.user_id&&u.user_id!==0&&u.user_timing_count>0?(i(),a("span",{key:0,class:"timing-count",title:"–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (".concat(u.user_timing_count," —Ç–∞–π–º–∏–Ω–≥–æ–≤)")}," ("+c(u.user_timing_count)+") ",9,ya)):v("",!0)])],2),ke.value[u.id]&&Array.isArray(ke.value[u.id])?(i(),a("div",ha,[n[77]||(n[77]=e("b",null,"–ü–∞—Ä—Å–µ—Ä:",-1)),ke.value[u.id].length===0?(i(),a("span",ba,"–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å")):(i(),a("span",pa,[(i(!0),a(K,null,ee(ke.value[u.id],(D,ht)=>(i(),a("span",{key:ht}," ["+c(q(Ue)(D[0]))+" - "+c(q(Ue)(D[1]))+"]"+c(ht<ke.value[u.id].length-1?", ":""),1))),128))]))])):v("",!0)])],2))),128))])):(i(),a("div",_a,c("–ó–∞–ø–∏—Å–µ–π –æ —Ç–∞–π–º–∏–Ω–≥–∞—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")))]),ve.value&&G.value.size>0?(i(),a("div",wa,[e("h4",Ca," –û–±—â–∏–π –ø–∞—Ä—Å–µ—Ä ("+c(G.value.size)+" —Ç–∞–π–º–∏–Ω–≥–æ–≤): ",1),e("div",Ea,[Bt().length===0?(i(),a("span",La,"–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ç–∞–π–º–∏–Ω–≥–∏")):(i(),a("span",Ma,[(i(!0),a(K,null,ee(Bt(),(u,D)=>(i(),a("span",{key:D}," ["+c(q(Ue)(u[0]))+" - "+c(q(Ue)(u[1]))+"]"+c(D<Bt().length-1?", ":""),1))),128))]))])])):v("",!0),V.value&&W.value.size>0?(i(),a("div",Sa,[e("h4",Ia," –ü–∞—Ä—Å–µ—Ä –æ–≤–µ—Ä–ª–µ—è ("+c(W.value.size)+" —Ç–∞–π–º–∏–Ω–≥–æ–≤): ",1),e("div",Ta,[Nt().length===0?(i(),a("span",xa,"–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ç–∞–π–º–∏–Ω–≥–∏")):(i(),a("span",Ra,[(i(!0),a(K,null,ee(Nt(),(u,D)=>(i(),a("span",{key:D}," ["+c(q(Ue)(u[0]))+" - "+c(q(Ue)(u[1]))+"]"+c(D<Nt().length-1?", ":""),1))),128))]))])])):v("",!0),e("div",Pa,[N.value.length>0?(i(),a("button",{key:0,class:"nudity-info-button",onClick:Rt},n[78]||(n[78]=[e("i",{class:"fas fa-copy"},null,-1),e("span",null,"–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å",-1)]))):v("",!0),G.value.size>0?(i(),a("button",{key:1,class:"nudity-info-button",onClick:Fn},[n[79]||(n[79]=e("i",{class:"fas fa-eye"},null,-1)),e("span",null,"–û–±—â–∏–π –ø–∞—Ä—Å–µ—Ä ("+c(G.value.size)+")",1)])):v("",!0),W.value.size>0?(i(),a("button",{key:2,class:"nudity-info-button overlay-button",onClick:Vn},[n[80]||(n[80]=e("i",{class:"fas fa-layer-group"},null,-1)),e("span",null,"–ü–∞—Ä—Å–µ—Ä –æ–≤–µ—Ä–ª–µ—è ("+c(W.value.size)+")",1)])):v("",!0),e("button",{class:"nudity-info-button",onClick:Re},n[81]||(n[81]=[e("i",{class:"fas fa-plus"},null,-1),e("span",null,"–î–æ–±–∞–≤–∏—Ç—å/–¥–æ–ø–æ–ª–Ω–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥",-1)]))])],2)])])):v("",!0),wt.value?(i(),a("div",ja,[e("div",Ba,[e("div",Na,[e("h3",null,c(Pe.value?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–π–º–∏–Ω–≥":"–î–æ–±–∞–≤–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥"),1),e("button",{class:"close-modal-btn",onClick:Pt},n[83]||(n[83]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",Ua,[te(e("textarea",{"onUpdate:modelValue":n[13]||(n[13]=u=>R.value=u),placeholder:"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ñ–∏–ª—å–º–∞(–≤ [] —Å–∫–æ–±–∫–∞—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä [01:36] –∏–ª–∏ [01:36:55]), –∫ –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã –ø—Ä–∏–ª–∞–≥–∞–µ—Ç–µ —Ç–∞–π–º–∏–Ω–≥\n–¢–∫ –∂–µ –¥–ª—è –∞–≤—Ç–æ–±–ª—é—Ä–∞ –ø—Ä–æ—à—É –≤—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏ —É–∫–∞–∑—ã–≤–∞—Ç—å –∫–∞–∫ –¥–∏–∞–ø–æ–∑–æ–Ω, –∞ –Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –≤—Ä–µ–º—è, –Ω–∞–ø—Ä–∏–º–µ—Ä 00:12:31-00:13:04 - —Ç–µ–∫—Å—Ç, –∞ –Ω–µ 00:12:31\n–î–ª—è —Å–µ—Ä–∏–∞–ª–æ–≤ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ —Å–µ–∑–æ–Ω –∏ –Ω–æ–º–µ—Ä —ç–ø–∏–∑–æ–¥–∞\n",class:"timing-textarea"},null,512),[[Me,R.value]]),Q.value&&Q.value.length>0?(i(),a("div",Aa,[n[84]||(n[84]=e("div",{class:"timing-preview-header"},[e("i",{class:"fas fa-eye"}),e("span",null,"–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –ø–∞—Ä—Å–µ—Ä–∞")],-1)),e("div",Oa,[(i(!0),a(K,null,ee(Q.value,(u,D)=>(i(),a("div",{key:D,class:"timing-preview-item"},[e("span",Ha,c(q(Ue)(u[0]))+" - "+c(q(Ue)(u[1])),1),e("span",Fa," ("+c(Math.round(u[1]-u[0]))+"—Å) ",1)]))),128))])])):v("",!0),e("div",Va,[e("button",{class:"submit-timing-btn",onClick:n[14]||(n[14]=u=>Pe.value?En():Cn()),disabled:!F.value||z.value},[z.value?(i(),a("i",qa)):(i(),a("span",za,c(Pe.value?"–û–±–Ω–æ–≤–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥":"–î–æ–±–∞–≤–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥"),1))],8,Da)])])])])):v("",!0),jt.value?(i(),a("div",Wa,[e("div",Ka,[e("div",{class:"timing-modal-header"},[n[86]||(n[86]=e("h3",null,"–ü–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è –Ω–∞ —Ç–∞–π–º–∏–Ω–≥",-1)),e("button",{class:"close-modal-btn",onClick:Wt},n[85]||(n[85]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",Ga,[te(e("textarea",{"onUpdate:modelValue":n[15]||(n[15]=u=>qe.value=u),placeholder:"–û–ø–∏—à–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É –∂–∞–ª–æ–±—ã...",class:"timing-textarea",rows:"4"},null,512),[[Me,qe.value]]),e("div",Ya,[e("button",{class:"submit-timing-btn",onClick:Sn,disabled:!qe.value.trim()||vt.value},[vt.value?(i(),a("i",Qa)):(i(),a("span",Xa,"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∂–∞–ª–æ–±—É"))],8,Za)])])])])):v("",!0),Lt.value?(i(),a("div",{key:4,class:"modal-overlay",onClick:n[18]||(n[18]=u=>Lt.value=!1)},[e("div",{class:"modal-content",onClick:n[17]||(n[17]=ut(()=>{},["stop"]))},[e("div",Ja,[n[88]||(n[88]=e("h3",null,[U(" –¢–æ–ø –∞–≤—Ç–æ—Ä–æ–≤ —Ç–∞–π–º–∏–Ω–≥–æ–≤ "),e("span",{class:"hint-text"},[U("(–•–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —Å–≤–æ–π —Å—Ç—Ä–∏–º/—Å–æ—Ü—Å–µ—Ç–∏? –ù–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º –≤ "),e("a",{href:"https://t.me/reyohoho_sup",target:"_blank",rel:"noopener noreferrer"},"—Ç–µ–ª–µ–≥—Ä–∞–º"),U(")")])],-1)),e("div",$a,[e("button",{class:"close-modal-btn",onClick:n[16]||(n[16]=u=>Lt.value=!1)},n[87]||(n[87]=[e("i",{class:"fas fa-times"},null,-1)]))])]),e("div",er,[e("button",{class:"show-all-timings-btn",onClick:Pn,disabled:lt.value},[lt.value?(i(),a("i",nr)):(i(),a("i",or)),n[89]||(n[89]=e("span",null,"–í—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏",-1))],8,tr),e("div",sr,[(i(!0),a(K,null,ee(Et.value,(u,D)=>(i(),a("div",{key:u.username,class:"top-submitter-item"},[e("div",{class:x(["submitter-rank",{gold:D===0,silver:D===1,bronze:D===2}])},c(D+1),3),e("div",lr,[e("div",ir,[u.stream_link?(i(),a("a",{key:0,href:u.stream_link,target:"_blank",rel:"noopener noreferrer"},[U(c(u.username)+" ",1),n[90]||(n[90]=e("i",{class:"fa-brands fa-twitch"},null,-1))],8,ar)):(i(),a(K,{key:1},[U(c(u.username),1)],64))]),e("div",rr,c(u.approved_submissions_count)+" "+c(jn(u.approved_submissions_count,["—Ñ–∏–ª—å–º","—Ñ–∏–ª—å–º–∞","—Ñ–∏–ª—å–º–æ–≤"])),1)]),e("div",ur,[e("div",{class:"contribution-bar",style:Ot({width:Bn(u.approved_submissions_count)+"%"})},null,4)])]))),128))])])])])):v("",!0),ft.value?(i(),a("div",{key:5,class:"modal-overlay",onClick:n[21]||(n[21]=u=>ft.value=!1)},[e("div",{class:"modal-content all-timings-modal",onClick:n[20]||(n[20]=ut(()=>{},["stop"]))},[e("div",dr,[n[92]||(n[92]=e("h3",null,"–í—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏",-1)),e("button",{class:"close-modal-btn",onClick:n[19]||(n[19]=u=>ft.value=!1)},n[91]||(n[91]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",cr,[lt.value?(i(),a("div",mr,n[93]||(n[93]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),e("span",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö —Ç–∞–π–º–∏–Ω–≥–æ–≤...",-1)]))):st.value.length===0?(i(),a("div",vr,n[94]||(n[94]=[e("p",null,"–¢–∞–π–º–∏–Ω–≥–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",-1)]))):Jt.value.length===0?(i(),a("div",fr,n[95]||(n[95]=[e("p",null,"–¢–∞–π–º–∏–Ω–≥–∏ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —Ñ–∏–ª—å—Ç—Ä—É –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",-1)]))):(i(),a("div",gr,[(i(!0),a(K,null,ee(Jt.value,u=>{var D;return i(),a("div",{key:u.id,class:"timing-item"},[e("div",kr,[e("div",yr,[e("span",hr,c(u.username),1),e("span",br,c(q(pn)(u.submitted_at)),1)]),e("div",pr,[Z(E,{to:"/movie/".concat(u.kp_id),class:"timing-kp-id clickable",title:"–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ñ–∏–ª—å–º—É ".concat(u.kp_id)},{default:At(()=>[U(" KP: "+c(u.kp_id),1)]),_:2},1032,["to","title"]),(D=q(o).user)!=null&&D.is_admin&&u.status==="pending"?(i(),a("div",_r,[u.status==="pending"?(i(),a("button",{key:0,class:"approve-btn",onClick:ht=>Tn(u.id),disabled:ce.value,title:"–û–¥–æ–±—Ä–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥"},[Ie.value===u.id&&je.value?(i(),a("i",Cr)):(i(),a("i",Er))],8,wr)):v("",!0),u.status==="pending"?(i(),a("button",{key:1,class:"reject-btn",onClick:ht=>xn(u.id),disabled:ce.value,title:"–û—Ç–∫–ª–æ–Ω–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥"},[Ie.value===u.id&&!je.value&&!Be.value?(i(),a("i",Mr)):(i(),a("i",Sr))],8,Lr)):v("",!0),u.status==="pending"?(i(),a("button",{key:2,class:"clean-text-btn",onClick:ht=>Rn(u.id),disabled:ce.value,title:"–û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ clean_text"},[Ie.value===u.id&&Be.value?(i(),a("i",Tr)):(i(),a("i",xr))],8,Ir)):v("",!0)])):v("",!0)])]),e("div",Rr,[e("pre",Pr,c(u.timing_text),1)])])}),128))]))])])])):v("",!0),Kt.value?(i(),a("div",jr,[e("div",Br,[e("div",Nr,[n[97]||(n[97]=e("h3",null,"–ù–∞—Å—Ç—Ä–æ–π–∫–∏ OBS WebSocket",-1)),e("button",{class:"close-modal-btn",onClick:n[22]||(n[22]=u=>Kt.value=!1)},n[96]||(n[96]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",Ur,[e("div",Ar,[e("label",Or,[te(e("input",{type:"checkbox","onUpdate:modelValue":n[23]||(n[23]=u=>Mt.value=u),onChange:Dn},null,544),[[mn,Mt.value]]),n[98]||(n[98]=e("span",null,"–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–±–ª—é—Ä –≤ OBS",-1))]),n[99]||(n[99]=e("div",{class:"obs-setting-description"}," –ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ, –∞–≤—Ç–æ–±–ª—é—Ä –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è —á–µ—Ä–µ–∑ OBS WebSocket –≤–º–µ—Å—Ç–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –±–ª—é—Ä–∞ ",-1))]),Mt.value?(i(),a("div",Hr,[e("div",Fr,[n[100]||(n[100]=e("label",null,"–•–æ—Å—Ç OBS WebSocket:",-1)),te(e("input",{type:"text","onUpdate:modelValue":n[24]||(n[24]=u=>Gt.value=u),placeholder:"localhost",class:"obs-input"},null,512),[[Me,Gt.value]])]),e("div",Vr,[n[101]||(n[101]=e("label",null,"–ü–æ—Ä—Ç OBS WebSocket:",-1)),te(e("input",{type:"number","onUpdate:modelValue":n[25]||(n[25]=u=>Yt.value=u),placeholder:"4455",class:"obs-input"},null,512),[[Me,Yt.value]])]),e("div",Dr,[n[102]||(n[102]=e("label",null,"–ü–∞—Ä–æ–ª—å (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω):",-1)),te(e("input",{type:"password","onUpdate:modelValue":n[26]||(n[26]=u=>Zt.value=u),placeholder:"–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –µ—Å–ª–∏ –ø–∞—Ä–æ–ª—å –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω",class:"obs-input"},null,512),[[Me,Zt.value]])]),it.value?(i(),a("div",qr,[n[105]||(n[105]=e("label",null,"–í—ã–±–æ—Ä —Ñ–∏–ª—å—Ç—Ä–∞ –¥–ª—è –±–ª—é—Ä–∞:",-1)),kt.value.length===0?(i(),a("div",zr," ‚ö†Ô∏è –§–∏–ª—å—Ç—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤ OBS. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–∞—Ö –µ—Å—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã. ")):(i(),a("div",Wr,[te(e("select",{"onUpdate:modelValue":n[27]||(n[27]=u=>ze.value=u),onChange:Wn,class:"obs-filter-select"},[n[103]||(n[103]=e("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∏–ª—å—Ç—Ä",-1)),(i(!0),a(K,null,ee(kt.value,u=>(i(),a("option",{key:u.id,value:u.id},c(u.sourceName)+" - "+c(u.filterName)+" ("+c(u.sceneName)+") ",9,Kr))),128))],544),[[oo,ze.value]]),at.value?(i(),a("div",Gr,[e("div",Yr,[e("strong",null,c(at.value.filterName),1),n[104]||(n[104]=U(" –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ ")),e("strong",null,c(at.value.sourceName),1)]),e("span",{class:x(["filter-status",{enabled:at.value.enabled}])}," –°—Ç–∞—Ç—É—Å: "+c(at.value.enabled?"‚úÖ –í–∫–ª—é—á–µ–Ω":"‚≠ï –û—Ç–∫–ª—é—á–µ–Ω"),3)])):v("",!0),e("div",Zr," üí° –ù–∞–π–¥–µ–Ω–æ "+c(kt.value.length)+" —Ñ–∏–ª—å—Ç—Ä–æ–≤. –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∏–ª—å—Ç—Ä –±–ª—é—Ä–∞. ",1)]))])):v("",!0),e("div",Qr,[e("label",Xr,[te(e("input",{type:"checkbox","onUpdate:modelValue":n[28]||(n[28]=u=>Xt.value=u)},null,512),[[mn,Xt.value]]),n[106]||(n[106]=e("span",null,"–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å OBS –≤ –≤–∏–¥–µ–æ –æ–≤–µ—Ä–ª–µ–µ",-1))])]),e("div",{class:x(["obs-status",{connected:it.value}])},c(it.value?"–ü–æ–¥–∫–ª—é—á–µ–Ω –∫ OBS":"–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ OBS"),3),e("div",Jr,[e("button",{class:"obs-action-btn connect-btn",onClick:nn,disabled:gt.value},[gt.value?(i(),a("i",eu)):(i(),a("i",tu)),U(" "+c(it.value?"–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è":"–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è"),1)],8,$r),e("button",{class:"obs-action-btn test-btn",onClick:qn,disabled:!it.value||kt.value.length===0},n[107]||(n[107]=[e("i",{class:"fas fa-eye"},null,-1),U(" –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–ª—é—Ä ")]),8,nu),e("button",{class:"obs-action-btn refresh-btn",onClick:zn,disabled:!it.value},n[108]||(n[108]=[e("i",{class:"fas fa-sync"},null,-1),U(" –û–±–Ω–æ–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã ")]),8,ou)])])):v("",!0)])])])):v("",!0),Z(Eo,{"is-open":T.value,message:"<span style='color: orange; font-weight: bold;'>–ê–≤—Ç–æ–±–ª—é—Ä —É–¥–∞–ª–µ–Ω –∏–∑-–∑–∞ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏(–ø–æ–∫–∞?)<br>–î–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –æ–≤–µ—Ä–ª–µ–π</span><br><br>–ü–µ—Ä–µ–¥ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ç–∞–π–º–∏–Ω–≥–∏ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ñ–∏–ª—å–º—É –≤ –ø–ª–µ–µ—Ä–µ! –ú—ã –Ω–µ –Ω–µ—Å—ë–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –≤ —Ç–∞–π–º–∏–Ω–≥–∞—Ö, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Ö –Ω–∞ —Å–≤–æ–π —Å—Ç—Ä–∞—Ö –∏ —Ä–∏—Å–∫ –∏ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏ —Ñ–∏–ª—å–º–∞!<br>–í –ø–ª–µ–µ—Ä–µ alloha –µ—Å–ª–∏ —Å–º–µ–Ω–∏—Ç–µ –æ–∑–≤—É—á–∫—É, —Ç–æ –≤—ã–∫–ª—é—á–∏—Ç–µ –∏ –≤–∫–ª—é—á–∏—Ç–µ –æ–≤–µ—Ä–ª–µ–π(—Å–Ω–∏–∑—É —Å–ø—Ä–∞–≤–∞ –ø–æ–¥ –ø–ª–µ–µ—Ä–æ–º), –∏–Ω–∞—á–µ –≤ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å!",onConfirm:An,onClose:en},null,8,["is-open"])],64)}}},ku=Ae(su,[["__scopeId","data-v-00e397a8"]]);export{ku as default};
