import{_ as W,b as n,d as i,e as s,m as b,v as le,L as j,M as G,Q as oe,n as T,g as h,q as ae,al as ne,r as U,u as ie,a9 as re,am as ue,c as p,l as de,o as ve,an as y,s as d,f as m,w as C,t as A,ao as pe}from"./index-DNzFDnhk.js";import{u as me,a as ce,S as k}from"./trailer-OwReaokk.js";import{B as ge}from"./BaseModal-CkOAXm3P.js";const fe={name:"ThemeSelector",setup(){const V=ne(),o=U("#ffffff");return{themeStore:V,customColorValue:o,selectColor:g=>{V.setAccentColor(g)},addCustomColor:()=>{V.addCustomColor(o.value)},removeCustomColor:g=>{V.removeCustomColor(g)}}}},Ce={class:"theme-selector"},ke={class:"color-picker-section"},be={class:"color-picker-wrapper"},ye={class:"theme-selector__colors"},Ve=["title","onClick"],Se={key:0,class:"material-icons"},he=["onClick"];function _e(V,o,c,u,_,g){return i(),n("div",Ce,[o[4]||(o[4]=s("div",{class:"theme-selector__header"},[s("i",{class:"material-icons"},"palette"),s("span",null,"Цвет акцента:")],-1)),s("div",ke,[s("div",be,[b(s("input",{type:"color","onUpdate:modelValue":o[0]||(o[0]=r=>u.customColorValue=r),class:"color-picker",onChange:o[1]||(o[1]=(...r)=>u.addCustomColor&&u.addCustomColor(...r))},null,544),[[le,u.customColorValue]]),o[2]||(o[2]=s("span",{class:"color-picker-label"},"Добавить цвет",-1))])]),s("div",ye,[(i(!0),n(j,null,G(u.themeStore.allColors,r=>(i(),n("button",{key:r.value,class:T(["color-option",{active:u.themeStore.accentColor===r.value}]),style:oe({backgroundColor:r.value}),title:r.name,onClick:H=>u.selectColor(r.value)},[u.themeStore.accentColor===r.value?(i(),n("i",Se,"check")):h("",!0),r.isCustom?(i(),n("button",{key:1,class:"remove-color",onClick:ae(H=>u.removeCustomColor(r.value),["stop"]),title:"Удалить цвет"},o[3]||(o[3]=[s("i",{class:"material-icons"},"close",-1)]),8,he)):h("",!0)],14,Ve))),128))])])}const Ae=W(fe,[["render",_e],["__scopeId","data-v-7f4fe94e"]]),Ue={class:"settings-page"},we={class:"settings-container"},Te={class:"settings-group"},He={class:"radio-group"},Ee={class:"radio"},Be={class:"radio"},Me={class:"radio"},Ie={class:"radio"},$e={class:"settings-group"},Fe={class:"settings-group"},xe={class:"settings-group"},ze={class:"card-size-group"},De={class:"radio-group"},Pe={class:"radio"},Ne={class:"radio"},Le={class:"radio"},Re={class:"settings-group"},qe={class:"settings-group"},Qe={class:"settings-actions"},We={class:"settings-group"},je={class:"settings-group"},Ge={class:"settings-group"},Je={class:"settings-group"},Ke={class:"api-info"},Oe={class:"api-item"},Xe={class:"api-url"},Ye={key:0,class:"api-item"},Ze={key:1,class:"api-item"},es={class:"endpoints-list"},ss={class:"server-item"},ts={key:0,class:"fas fa-check endpoint-active"},ls=["disabled"],os={key:0,class:"fas fa-spinner fa-spin"},as={key:1,class:"fas fa-heartbeat"},ns=["onClick"],is={class:"endpoint-info"},rs={class:"endpoint-description"},us={class:"endpoint-url"},ds={key:0,class:"fas fa-check endpoint-active"},vs=["onClick","disabled","title"],ps={key:0,class:"fas fa-spinner fa-spin"},ms={key:1,class:"fas fa-check"},cs={key:2,class:"fas fa-times"},gs={key:3,class:"fas fa-heartbeat"},fs={class:"settings-group"},Cs={__name:"Settings",setup(V){const o=ie(),c=re(),u=me(),_=ce(),g=ue(),r=U(!1),H=U("1.0.29_01_07_2025_05:31:44_UTC"),a=U({checking_all:!1}),J=()=>{o.clearAllHistory(),r.value=!1},f=p({get:()=>c.backgroundType,set:l=>c.updateBackgroundType(l)}),K=p(()=>f.value==="stars"||f.value==="disable");de(K,l=>{l&&c.toggleBlur(!1)});const B=p({get:()=>u.isCentered,set:l=>u.updateCentering(l)}),M=p({get:()=>c.isCardBorder,set:l=>c.toggleCardBorder(l)}),I=p({get:()=>c.isCardHoverDisabled,set:l=>c.toggleCardHover(l)}),$=p({get:()=>o.isHistoryAllowed,set:l=>o.setHistoryAllowed(l)}),F=p({get:()=>_.areTrailersActive,set:l=>{l?_.activateTrailers():_.deactivateTrailers()}}),x=p({get:()=>o.isCtrlFEnabled,set:()=>o.toggleCtrlF()}),E=p({get:()=>u.showFavoriteTooltip,set:l=>u.setFavoriteTooltip(l)}),z=p({get:()=>o.isCommentsEnabled,set:l=>o.setCommentsEnabled(l)}),D=p({get:()=>o.isAutoShowComments,set:l=>o.setAutoShowComments(l)}),S=p({get:()=>o.cardSize,set:l=>o.updateCardSize(l)}),P=p({get:()=>o.isStreamerMode,set:l=>o.setStreamerMode(l)}),O=()=>{c.resetBackground()},v=U({url:"",description:"",isCheckingHealth:!1,lastCheckedAt:null,availableEndpoints:[]}),w=()=>{const l=pe();v.value={...l}},X=async l=>{g.setUserSelectedApiUrl(l),w()},Y=async()=>{g.resetUserSelection();const l=g.availableEndpoints;l.length>0&&await g.selectWorkingEndpoint(l),w()},N=async l=>{a.value[l]||(a.value[l]={}),a.value[l].checking=!0,a.value[l].status=null;try{const e=await g.checkEndpointHealth(l);a.value[l].status=e?"healthy":"unhealthy",a.value[l].lastChecked=Date.now()}catch(e){a.value[l].status="unhealthy",console.error("Health check failed:",e)}finally{a.value[l].checking=!1}},Z=async()=>{a.value.checking_all=!0;const l=v.value.availableEndpoints.map(e=>N(e.url));await Promise.all(l),a.value.checking_all=!1},ee=l=>{const e=a.value[l];return e?e.status==="healthy"?"health-success":e.status==="unhealthy"?"health-error":"":""},se=l=>{const e=a.value[l];return e?e.checking?"Проверка...":e.status==="healthy"?"Сервер доступен":e.status==="unhealthy"?"Сервер недоступен":"Проверить сервер":"Проверить сервер"};return ve(()=>{w();const l=setInterval(w,1e3);return()=>{clearInterval(l)}}),(l,e)=>(i(),n("div",Ue,[e[54]||(e[54]=s("h1",null,"Настройки",-1)),s("div",we,[s("div",Te,[e[24]||(e[24]=s("h2",null,"Фон",-1)),s("div",He,[s("label",Ee,[b(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>f.value=t),type:"radio",value:"dynamic"},null,512),[[y,f.value]]),e[19]||(e[19]=s("span",{class:"radio-label"},"Динамический фон",-1))]),s("label",Be,[b(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>f.value=t),type:"radio",value:"stars"},null,512),[[y,f.value]]),e[20]||(e[20]=s("span",{class:"radio-label"},"Звездный фон",-1))]),s("label",Me,[b(s("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>f.value=t),type:"radio",value:"lava-lamp"},null,512),[[y,f.value]]),e[21]||(e[21]=s("span",{class:"radio-label"},"Лава-лампа",-1))]),s("label",Ie,[b(s("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>f.value=t),type:"radio",value:"disabled"},null,512),[[y,f.value]]),e[22]||(e[22]=s("span",{class:"radio-label"},"Отключить фон",-1))])]),s("div",{class:"settings-actions"},[s("button",{class:"reset-button",onClick:O},e[23]||(e[23]=[s("i",{class:"fa-solid fa-arrow-rotate-left"},null,-1),d(" Сбросить фон ")]))])]),s("div",$e,[e[25]||(e[25]=s("h2",null,"Тема",-1)),m(Ae)]),s("div",Fe,[e[29]||(e[29]=s("h2",null,"Плеер",-1)),m(k,{modelValue:B.value,"onUpdate:modelValue":e[4]||(e[4]=t=>B.value=t)},{default:C(()=>e[26]||(e[26]=[d("Автоцентрирование плеера")])),_:1},8,["modelValue"]),m(k,{modelValue:M.value,"onUpdate:modelValue":e[5]||(e[5]=t=>M.value=t)},{default:C(()=>e[27]||(e[27]=[d("Окантовка вокруг карточек")])),_:1},8,["modelValue"]),m(k,{modelValue:I.value,"onUpdate:modelValue":e[6]||(e[6]=t=>I.value=t)},{default:C(()=>e[28]||(e[28]=[d("Отключить подъем карточек при наведении")])),_:1},8,["modelValue"]),m(k,{modelValue:E.value,"onUpdate:modelValue":e[7]||(e[7]=t=>E.value=t)},{default:C(()=>[d("Стиль отображения кнопок избранного: "+A(E.value?"Тултип":"Все кнопки"),1)]),_:1},8,["modelValue"])]),s("div",xe,[e[34]||(e[34]=s("h2",null,"Карточки",-1)),s("div",ze,[e[33]||(e[33]=s("label",null,"Размер карточек:",-1)),s("div",De,[s("label",Pe,[b(s("input",{"onUpdate:modelValue":e[8]||(e[8]=t=>S.value=t),type:"radio",value:"small"},null,512),[[y,S.value]]),e[30]||(e[30]=s("span",{class:"radio-label"},"Маленький",-1))]),s("label",Ne,[b(s("input",{"onUpdate:modelValue":e[9]||(e[9]=t=>S.value=t),type:"radio",value:"medium"},null,512),[[y,S.value]]),e[31]||(e[31]=s("span",{class:"radio-label"},"Средний",-1))]),s("label",Le,[b(s("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>S.value=t),type:"radio",value:"large"},null,512),[[y,S.value]]),e[32]||(e[32]=s("span",{class:"radio-label"},"Большой",-1))])])])]),s("div",Re,[e[36]||(e[36]=s("h2",null,"Трейлеры",-1)),m(k,{modelValue:F.value,"onUpdate:modelValue":e[11]||(e[11]=t=>F.value=t)},{default:C(()=>e[35]||(e[35]=[d("Активировать трейлеры")])),_:1},8,["modelValue"])]),s("div",qe,[e[39]||(e[39]=s("h2",null,"История",-1)),m(k,{modelValue:$.value,"onUpdate:modelValue":e[12]||(e[12]=t=>$.value=t)},{default:C(()=>e[37]||(e[37]=[d(" Сохранять историю просмотра")])),_:1},8,["modelValue"]),s("div",Qe,[s("button",{class:"reset-button",onClick:e[13]||(e[13]=t=>r.value=!0)},e[38]||(e[38]=[s("i",{class:"fa-solid fa-trash-can"},null,-1),d(" Очистить историю просмотра ")])),m(ge,{"is-open":r.value,message:"Вы уверены, что хотите очистить историю?",onConfirm:J,onClose:e[14]||(e[14]=t=>r.value=!1)},null,8,["is-open"])])]),s("div",We,[e[41]||(e[41]=s("h2",null,"Горячие клавиши",-1)),m(k,{modelValue:x.value,"onUpdate:modelValue":e[15]||(e[15]=t=>x.value=t)},{default:C(()=>e[40]||(e[40]=[d("Перехватывать Ctrl+F для поиска")])),_:1},8,["modelValue"])]),s("div",je,[e[44]||(e[44]=s("h2",null,"Комментарии",-1)),m(k,{modelValue:z.value,"onUpdate:modelValue":e[16]||(e[16]=t=>z.value=t)},{default:C(()=>e[42]||(e[42]=[d("Показывать блок комментариев")])),_:1},8,["modelValue"]),m(k,{modelValue:D.value,"onUpdate:modelValue":e[17]||(e[17]=t=>D.value=t)},{default:C(()=>e[43]||(e[43]=[d("Автоматически показывать комментарии")])),_:1},8,["modelValue"])]),s("div",Ge,[e[46]||(e[46]=s("h2",null,"Режим стримера",-1)),m(k,{modelValue:P.value,"onUpdate:modelValue":e[18]||(e[18]=t=>P.value=t)},{default:C(()=>e[45]||(e[45]=[d("Мигание кнопки таймингов для привлечения внимания")])),_:1},8,["modelValue"])]),s("div",Je,[e[51]||(e[51]=s("h2",null,"API сервер",-1)),e[52]||(e[52]=s("p",null,"После смены сервера обновите страницу",-1)),s("div",Ke,[s("div",Oe,[e[47]||(e[47]=s("strong",null,"Текущий API:",-1)),s("span",Xe,A(v.value.url),1)]),v.value.isCheckingHealth?(i(),n("div",Ye,e[48]||(e[48]=[s("span",{class:"checking-health"},[s("i",{class:"fas fa-spinner fa-spin"}),d(" Проверка доступности серверов... ")],-1)]))):h("",!0),v.value.availableEndpoints.length>1?(i(),n("div",Ze,[e[50]||(e[50]=s("strong",null,"Выбор сервера:",-1)),s("ul",es,[s("li",ss,[s("div",{class:T(["server-option",{"selected-endpoint":!v.value.userSelectedApiUrl,"current-endpoint":!v.value.userSelectedApiUrl&&v.value.url}]),onClick:Y},[e[49]||(e[49]=s("div",{class:"endpoint-info"},[s("span",{class:"endpoint-description"},"Автоматический выбор"),s("span",{class:"endpoint-url"},"Система выберет лучший доступный сервер")],-1)),v.value.userSelectedApiUrl?h("",!0):(i(),n("i",ts))],2),s("button",{class:"health-check-btn",onClick:Z,disabled:a.value.checking_all,title:"Проверить все серверы"},[a.value.checking_all?(i(),n("i",os)):(i(),n("i",as))],8,ls)]),(i(!0),n(j,null,G(v.value.availableEndpoints,t=>{var L,R,q,Q;return i(),n("li",{key:t.url,class:"server-item"},[s("div",{class:T(["server-option",{"selected-endpoint":v.value.userSelectedApiUrl===t.url,"current-endpoint":t.url===v.value.url}]),onClick:te=>X(t.url)},[s("div",is,[s("span",rs,A(t.description),1),s("span",us,A(t.url),1)]),v.value.userSelectedApiUrl===t.url?(i(),n("i",ds)):h("",!0)],10,ns),s("button",{class:T(["health-check-btn",ee(t.url)]),onClick:te=>N(t.url),disabled:(L=a.value[t.url])==null?void 0:L.checking,title:se(t.url)},[(R=a.value[t.url])!=null&&R.checking?(i(),n("i",ps)):((q=a.value[t.url])==null?void 0:q.status)==="healthy"?(i(),n("i",ms)):((Q=a.value[t.url])==null?void 0:Q.status)==="unhealthy"?(i(),n("i",cs)):(i(),n("i",gs))],10,vs)])}),128))])])):h("",!0)])]),s("div",fs,[e[53]||(e[53]=s("h2",null,"Версия сайта",-1)),d(" "+A(H.value),1)])])]))}},Vs=W(Cs,[["__scopeId","data-v-59bdd95e"]]);export{Vs as default};
