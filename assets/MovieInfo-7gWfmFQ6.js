import{_ as Ve,r as v,c as D,b as d,d as a,e,s as ne,t as p,K as de,g as y,L as Ie,n as L,q as Je,u as ht,i as Tt,O as pn,z as bt,l as Oe,o as st,P as Rt,x as qe,E as hn,f as re,Q as dt,m as X,R as se,y as Z,U as V,S as Ln,D as pt,V as Te,W as bn,X as It,Y as yt,Z as In,$ as dn,a0 as Tn,k as Rn,v as lt,a1 as Pn,a2 as Le,w as cn,a3 as ct,a4 as Sn,a5 as An,a6 as xn,a7 as Un,a8 as vn,a9 as jn,aa as Nn,a as Bn,ab as mn,ac as Hn,ad as Dn,ae as $n,af as On}from"./index-putIIQ19.js";import{_ as Vn,a as fn,b as gn,M as kn}from"./MovieList-B9wXfICD.js";import{S as wn}from"./SpinnerLoading-Ug1L_mkZ.js";import{N as Mt}from"./ToastMessage-0r9jyh5a.js";import{u as Fn,S as qn,a as Kn}from"./trailer-BVvh8fpT.js";import{u as Cn,f as zn,a as Wn}from"./dateUtils-CENfeTWN.js";const rt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVR4nO2ZQUoDMRSGR7eewHoFsVS0HkUUXNXqASqK2EURBPFIVRe6c+UN1CvUXWvbT4KvMAwzNnnJdCrmg1BKad7/v7y0b5IkiUQiCwGoAx3gQjEugZ0qxTeAIX6MKjMBnBOGS62AVWAPOHVYdlMu9YArYOhphLeBT+ALmOKGEd2QubaAK+B2zngFxt4GgDXgGZjgR8ch5oEkCi8DkvlnRcYLV0Apfqw10M7JvPkV6AN3FmVwK+WyZRnvMEe8ef/ibECyb2o+zRuwnpQAxeLNivQ0BvYyE46qEJ/8fK4ycJKp/X4V4n0MdDNfukkqEO9jwP1LDgD7BeKPgmgp04CL+KUz4Cp+qQxoxC+NAdsNm4c0hWkukkUa8BGfegiadbFDq3/2UAZ8xc+QVvzMtqcKYkBaZ5/MN5xEl2DgLGDZ1KswsC09FPJqXTZoNm5oA6kyMGI2FxqfkluJ0uMTDfhBXAHiHvCCWEL8/RLqlv1MPCf+TSZ+13WC7KnEfWlqcwAeU7GNjnbiQsG5UC1ZAEAt1UMhOpquk6zknMy9l20C2AA+MnEHRo9msuOCs9EH4Fp5TVQ0rqVs0plH4re02Qh1Oq1lCjypsp+5H3gKcD/gykTirqnFZ/ZDy+OGxpapzD+QePrM/2KkKfcGPcv7AdvRkz23G1x4JPIP+AY3r/ywUk/2JAAAAABJRU5ErkJggg==",Gn="/reyohoho/assets/icon-shikimori-DGvXK9Jc.svg",ut=i=>{const t=document.createElement("div");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.backgroundColor="rgba(0, 0, 0, 0.8)",t.style.color="white",t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",t.style.fontSize="2rem",t.style.zIndex="99000",t.textContent=i,document.body.appendChild(t),setTimeout(()=>{document.body.removeChild(t)},2e3)},Yn={key:0},Xn={key:1},Zn={class:"players-list"},Qn=["onClick"],Jn={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},eo={key:0},to={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},no={key:1},oo={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},lo=["onClick"],so={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},io={__name:"PlayerModal",props:{players:{type:Array,required:!0},selectedPlayer:{type:Object,default:null}},emits:["close","select"],setup(i,{emit:t}){const r=i,n=t,C=v(null),_=D(()=>r.players.filter(h=>!E(h)&&!M(h))),c=D(()=>r.players.some(h=>E(h))),f=D(()=>r.players.some(h=>M(h))),E=h=>h.key.toUpperCase().includes("HDREZKA"),M=h=>h.key.toUpperCase().includes("KODIK"),o=h=>h.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"").replace(/KODIK>/,"").trim(),u=h=>{n("select",h),n("close")},w=h=>r.selectedPlayer&&r.selectedPlayer.key===h.key,b=h=>r.selectedPlayer?h==="hdrezka"&&E(r.selectedPlayer)||h==="kodik"&&M(r.selectedPlayer):!1,j=h=>{C.value=h},P=()=>{C.value=null},S=h=>{let T=r.players.filter(x=>h==="hdrezka"&&E(x)||h==="kodik"&&M(x));return h==="kodik"?T.sort((x,z)=>o(x.translate).localeCompare(o(z.translate))):T},I=h=>S(h).some(T=>T.warning);return(h,T)=>(a(),d("div",{class:"modal",onClick:T[4]||(T[4]=Je(x=>h.$emit("close"),["self"]))},[e("div",{class:"modal-content",onClick:T[3]||(T[3]=Je(()=>{},["stop"]))},[e("button",{class:"close",onClick:T[0]||(T[0]=x=>h.$emit("close"))},"√ó"),C.value?(a(),d("h2",Xn,[e("button",{class:"back-btn",onClick:P},"‚Üê –ù–∞–∑–∞–¥"),ne(" "+p(C.value==="hdrezka"?"ReYohoho - HDrezka":"Kodik"),1)])):(a(),d("h2",Yn,"–í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–µ–µ—Ä")),e("ul",Zn,[C.value?(a(!0),d(de,{key:1},Ie(S(C.value),x=>(a(),d("li",{key:x.key},[e("button",{class:L(["player-item",{active:w(x)}]),onClick:z=>u(x)},[ne(p(o(x.translate))+" ",1),x.warning?(a(),d("span",so,"warning")):y("",!0)],10,lo)]))),128)):(a(),d(de,{key:0},[(a(!0),d(de,null,Ie(_.value,x=>(a(),d("li",{key:x.key},[e("button",{class:L(["player-item",{active:w(x)}]),onClick:z=>u(x)},[ne(p(o(x.translate))+" ",1),x.warning?(a(),d("span",Jn,"warning")):y("",!0)],10,Qn)]))),128)),c.value?(a(),d("li",eo,[e("button",{class:L(["group-item",{active:b("hdrezka")}]),onClick:T[1]||(T[1]=x=>j("hdrezka"))},[T[5]||(T[5]=e("span",{class:"material-icons group-icon"},"folder",-1)),T[6]||(T[6]=ne(" ReYohoho - HDrezka ")),I("hdrezka")?(a(),d("span",to,"warning")):y("",!0)],2)])):y("",!0),f.value?(a(),d("li",no,[e("button",{class:L(["group-item",{active:b("kodik")}]),onClick:T[2]||(T[2]=x=>j("kodik"))},[T[7]||(T[7]=e("span",{class:"material-icons group-icon"},"folder",-1)),T[8]||(T[8]=ne(" Kodik ")),I("kodik")?(a(),d("span",oo,"warning")):y("",!0)],2)])):y("",!0)],64))])])]))}},ao=Ve(io,[["__scopeId","data-v-8b8d2b67"]]),ro={class:"players-list"},uo=["src"],co={key:1,class:"controls"},vo={class:"main-controls"},mo={class:"material-icons"},fo={class:"list-button-item"},go={class:"material-icons"},ko={class:"list-button-item"},yo={class:"material-icons"},po={class:"list-button-item"},ho={class:"list-button-item"},bo={class:"material-icons"},wo={class:"list-button-item"},Co={class:"material-icons"},_o={class:"tooltip-container","data-tooltip-container":"dimming"},Eo={class:"material-icons"},Mo={class:"tooltip-container","data-tooltip-container":"blur"},Lo={class:"tooltip-container","data-tooltip-container":"compressor"},Io={class:"tooltip-container","data-tooltip-container":"mirror"},To={class:"tooltip-container","data-tooltip-container":"theater"},Ro={class:"material-symbols-outlined"},Po={class:"custom-tooltip","data-tooltip":"theater"},So={class:"tooltip-container","data-tooltip-container":"pip"},Ao={class:"tooltip-container","data-tooltip-container":"aspect_ratio"},xo={class:"current-ratio"},Uo=["onClick"],jo={key:0,class:"tooltip-container","data-tooltip-container":"app_link"},No={class:"custom-tooltip","data-tooltip":"app_link"},Bo={key:1,class:"tooltip-container","data-tooltip-container":"copy_link"},Ho={class:"custom-tooltip","data-tooltip":"copy_link"},Do={key:0,class:"desktop-list-buttons"},$o={class:"tooltip-container"},Oo={class:"material-icons"},Vo={class:"custom-tooltip"},Fo={class:"tooltip-container"},qo={class:"material-icons"},Ko={class:"custom-tooltip"},zo={class:"tooltip-container"},Wo={class:"custom-tooltip"},Go={class:"tooltip-container"},Yo={class:"material-icons"},Xo={class:"custom-tooltip"},Zo={class:"tooltip-container"},Qo={class:"material-icons"},Jo={class:"custom-tooltip"},el={__name:"PlayerComponent",props:{kpId:String,movieInfo:{type:Object,default:()=>({})}},emits:["update:selectedPlayer","update:movieInfo"],setup(i,{emit:t}){const r=ht(),n=Fn(),C=Tt(),_=pn(),c=bt(),f=v(_.params.kp_id),E=i,M=t,o=v([]),u=v(null),w=v(!0),b=v(!1),j=v(!1),P=v(null),S=v(null),I=v(!1),h=v(""),T=v(null),x=v(window.innerHeight*.9),z=D(()=>"".concat(x.value,"px")),F=D(()=>r.isMobile),$=D(()=>!!window.electronAPI),R=v(null),we=v(!1);let he=null;const ye=v(null),je=v(null),H=v(null),ee=v(null),G=v(!1),q=v(!1),oe=v(null),pe=v(null),ie=v(null),fe=v(null),_e=v(null),ge=v(null),Re=g=>{const l=document.querySelector('[data-tooltip-container="'.concat(g,'"]')),U=document.querySelector('[data-tooltip="'.concat(g,'"]'));if(!l||!U)return;const Y=l.getBoundingClientRect(),te=U.getBoundingClientRect(),ue=window.innerHeight;Y.bottom+te.height>ue?(U.style.top="auto",U.style.bottom="100%",U.style.marginTop="0",U.style.marginBottom="12px",U.style.transform="translateX(-50%)"):(U.style.top="100%",U.style.bottom="auto",U.style.marginTop="12px",U.style.marginBottom="0",U.style.transform="translateX(-50%)")},le=g=>{R.value=g,we.value=!1,clearTimeout(he),Te(()=>{Re(g)})},Ee=()=>{we.value||(he=setTimeout(()=>{R.value=null},300))},ce=()=>{we.value=!0,clearTimeout(he)},Ue=()=>{we.value=!1,R.value=null},Ce=D({get:()=>n.aspectRatio,set:g=>n.updateAspectRatio(g)}),Pe=D({get:()=>n.isCentered,set:g=>n.updateCentering(g)}),et=D(()=>{var g,l,U,Y,te,ue,Ye,Xe,Ze,Qe;return((l=(g=E.movieInfo)==null?void 0:g.lists)==null?void 0:l.isFavorite)||((Y=(U=E.movieInfo)==null?void 0:U.lists)==null?void 0:Y.isWatching)||((ue=(te=E.movieInfo)==null?void 0:te.lists)==null?void 0:ue.isLater)||((Xe=(Ye=E.movieInfo)==null?void 0:Ye.lists)==null?void 0:Xe.isCompleted)||((Qe=(Ze=E.movieInfo)==null?void 0:Ze.lists)==null?void 0:Qe.isAbandoned)}),Ge=D(()=>n.preferredPlayer),tt=v(0),Me=g=>g.toUpperCase(),Ne=()=>{if(b.value||!S.value)return;const[g,l]=Ce.value.split(":").map(Number);x.value=window.innerHeight*.9,tt.value=Math.min(S.value.clientWidth*(l/g),x.value)},be=D(()=>{if(b.value)return{};const[g,l]=Ce.value.split(":").map(Number),U=x.value*(g/l);return{width:"100%",maxWidth:"".concat(U,"px"),maxHeight:z.value,margin:"0 auto",overflow:"hidden"}}),Be=D(()=>{const[g,l]=Ce.value.split(":").map(Number);return{position:"relative",width:"100%",paddingTop:"".concat(l/g*100,"%")}}),k=()=>{S.value&&setTimeout(()=>{Te(()=>{S.value.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})},500)},Q=async()=>{try{h.value="",T.value=null;const g=await Ln(E.kpId);if(o.value=Object.entries(g).map(([l,U])=>({key:l.toUpperCase(),...U})),o.value.length>0){if(Ge.value){const l=Me(Ge.value),U=o.value.find(Y=>Me(Y.key)===l);u.value=U||o.value[0]}else u.value=o.value[0];M("update:selectedPlayer",u.value)}}catch(g){const{message:l,code:U}=pt(g);h.value=l,T.value=U,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–ª–µ–µ—Ä–æ–≤:",g)}},He=()=>{I.value=!0},it=()=>{I.value=!1},Ke=()=>{try{return oe.value||(oe.value=new(window.AudioContext||window.webkitAudioContext)),pe.value||(pe.value=oe.value.createDynamicsCompressor(),pe.value.threshold.value=-50,pe.value.knee.value=40,pe.value.ratio.value=12,pe.value.attack.value=0,pe.value.release.value=.25,fe.value=oe.value.createGain(),_e.value=oe.value.createGain(),fe.value.gain.value=0,_e.value.gain.value=1,pe.value.connect(fe.value),fe.value.connect(oe.value.destination),_e.value.connect(oe.value.destination)),!0}catch(g){return console.log("Error initializing audio context:",g),!1}},ze=async g=>{try{if(!oe.value||ge.value===g)return!0;const l=P.value,U=(l==null?void 0:l.src)||"";if(U.includes("videoframe")||U.includes("kinoserial.net")||U.includes("allarknow"))return console.log("Player detected as unsupported for compressor:",U),ge.value=g,ie.value=null,q.value=!1,$.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –ø–ª–µ–µ—Ä–æ–º"),!1;if(ie.value)try{ie.value.disconnect()}catch(te){}const Y=async(te=0)=>{te>0&&await new Promise(ue=>setTimeout(ue,te));try{return ie.value=oe.value.createMediaElementSource(g),ge.value=g,ie.value.connect(pe.value),ie.value.connect(_e.value),console.log("Video audio setup completed (attempt with ".concat(te,"ms delay)")),!0}catch(ue){if(ue.name==="InvalidStateError"&&ue.message.includes("already connected"))return console.log("MediaElementSource already connected (".concat(te,"ms delay attempt)")),!1;throw ue}};return await Y(0)||await Y(100)||await Y(300)||await Y(800)?!0:(console.log("Video element has internal audio processing, compressor not available for this player"),ge.value=g,ie.value=null,q.value=!1,$.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –ø–ª–µ–µ—Ä–æ–º"),!1)}catch(l){return console.log("Error setting up video audio:",l),!1}},De=async g=>{if(P.value)try{const l=P.value,U=l.contentDocument||l.contentWindow.document;if(!U)return;const Y=U.querySelectorAll("video");if(Y.length===0)return;const te=Y[0];if(!Ke())return;if(!await ze(te)||!ie.value){console.log("Compressor not available for this player");return}g&&!q.value?(fe.value.gain.setValueAtTime(1,oe.value.currentTime),_e.value.gain.setValueAtTime(0,oe.value.currentTime),q.value=!0,$.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –≤–∫–ª—é—á—ë–Ω"),console.log("Compressor enabled")):!g&&q.value&&(fe.value.gain.setValueAtTime(0,oe.value.currentTime),_e.value.gain.setValueAtTime(1,oe.value.currentTime),q.value=!1,$.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –æ—Ç–∫–ª—é—á—ë–Ω"),console.log("Compressor disabled"))}catch(l){console.log("Compressor error:",l),$.value&&window.electronAPI.showToast("–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä–∞")}},at=()=>{$.value?window.electronAPI.sendHotKey("F2"):(ut("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},N=()=>{$.value?(ve.value=!ve.value,De(ve.value)):(ut("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},W=()=>{$.value?(ke.value=!ke.value,Se(ke.value)):(ut("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},K=()=>{b.value=!b.value,b.value?(window.addEventListener("mousemove",s),document.addEventListener("keydown",ae),document.body.classList.add("no-scroll")):(window.removeEventListener("mousemove",s),document.removeEventListener("keydown",ae),document.body.classList.remove("no-scroll")),j.value=b.value,Te(()=>k())},m=v(null),s=()=>{m.value=setTimeout(()=>{clearTimeout(m.value),j.value=!1},4e3),j.value=!0},O=D(()=>r.dimmingEnabled),J=()=>{b.value||r.toggleDimming()},ve=D({get:()=>n.compressorEnabled,set:g=>n.updateCompressor(g)}),ke=D({get:()=>n.mirrorEnabled,set:g=>n.updateMirror(g)}),Se=g=>{if(P.value)try{const l=P.value,U=l.contentDocument||l.contentWindow.document;if(!U)return;const Y=U.querySelectorAll("video");if(Y.length>0&&(Y.forEach(te=>{g?te.style.transform="scaleX(-1)":te.style.transform="scaleX(1)"}),G.value=g,$.value)){const te=g?"–ó–µ—Ä–∫–∞–ª–æ –≤–∫–ª—é—á–µ–Ω–æ":"–ó–µ—Ä–∫–∞–ª–æ –æ—Ç–∫–ª—é—á–µ–Ω–æ";window.electronAPI.showToast(te)}}catch(l){}},Ae=()=>{ee.value&&clearInterval(ee.value),ee.value=setInterval(()=>{if(P.value)try{const g=P.value,l=g.contentDocument||g.contentWindow.document;if(!l)return;const U=l.querySelectorAll("video");if(U.length>0){const Y=U[0],ue=Y.style.transform==="scaleX(-1)";ke.value&&!ue?(Y.style.transform="scaleX(-1)",G.value=!0):!ke.value&&ue&&(Y.style.transform="scaleX(1)",G.value=!1),ge.value!==Y?(console.log("Video element changed, reinitializing compressor"),ge.value=null,q.value=!1,ve.value&&setTimeout(()=>{De(!0)},500)):ve.value!==q.value&&ie.value&&(console.log("Compressor state mismatch, reapplying"),De(ve.value))}}catch(g){}},1e3)},xe=()=>{w.value=!1,Ae()},ae=g=>{(g.key==="Escape"&&b.value||g.altKey&&g.keyCode===84)&&K()},me=g=>{Ce.value=g,setTimeout(()=>{Pe.value&&k()},310)},Fe=()=>{const g="reyohoho://#".concat(f.value);try{window.location.href=g}catch(l){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Å—ã–ª–∫–∏:",l)}},$e=()=>{const g=window.location.href;navigator.clipboard.writeText(g).then(()=>{}),ye.value.showNotification("–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∏–ª—å–º —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞")};function We(g){return g.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"HDRezka - ").replace(/KODIK>/,"Kodik - ").trim()}const nt=D(()=>{var g,l;return $.value?!1:!((l=(g=u.value)==null?void 0:g.key)!=null&&l.toUpperCase().includes("TORRENTS"))}),wt=()=>{try{ie.value&&(ie.value.disconnect(),ie.value=null),oe.value&&(oe.value.close(),oe.value=null),pe.value=null,fe.value=null,_e.value=null,ge.value=null,q.value=!1}catch(g){console.log("Error cleaning up audio context:",g)}},Ct=g=>{var l;if(((l=u.value)==null?void 0:l.key)===g.key){it();return}u.value=g,w.value=!0,G.value=!1,q.value=!1,ge.value=null,ee.value&&(clearInterval(ee.value),ee.value=null),n.updatePreferredPlayer(Me(g.key)),M("update:selectedPlayer",g)};Oe(u,g=>{if(g)if(w.value=!0,G.value=!1,q.value=!1,ge.value=null,ee.value&&(clearInterval(ee.value),ee.value=null),n.updatePreferredPlayer(Me(g.key)),M("update:selectedPlayer",g),g.key.toUpperCase().includes("TORRENTS")){const l=document.querySelector(".rocketme_fon");l&&(l.style.display="none");const U=document.querySelector(".pm_preloader");U&&(U.style.display="none")}else{const l=document.querySelector(".rocketme_fon");l&&(l.style.display="");const U=document.querySelector(".pm_preloader");U&&(U.style.display="")}}),Oe(()=>_.params.kp_id,async g=>{g&&g!==f.value&&(f.value=g,G.value=!1,q.value=!1,ge.value=null,ee.value&&(clearInterval(ee.value),ee.value=null),Pe.value&&k())},{immediate:!0});const ot=["16:9","12:5","4:3"],_t=()=>{const l=(ot.indexOf(Ce.value)+1)%ot.length;me(ot[l])},Et=g=>{var U,Y,te,ue,Ye,Xe,Ze,Qe,vt,mt,ft,gt,kt;return(kt={[V.FAVORITE]:((Y=(U=E.movieInfo)==null?void 0:U.lists)==null?void 0:Y.isFavorite)||!1,[V.HISTORY]:((ue=(te=E.movieInfo)==null?void 0:te.lists)==null?void 0:ue.isHistory)||!1,[V.LATER]:((Xe=(Ye=E.movieInfo)==null?void 0:Ye.lists)==null?void 0:Xe.isLater)||!1,[V.COMPLETED]:((Qe=(Ze=E.movieInfo)==null?void 0:Ze.lists)==null?void 0:Qe.isCompleted)||!1,[V.ABANDONED]:((mt=(vt=E.movieInfo)==null?void 0:vt.lists)==null?void 0:mt.isAbandoned)||!1,[V.WATCHING]:((gt=(ft=E.movieInfo)==null?void 0:ft.lists)==null?void 0:gt.isWatching)||!1}[g])!=null?kt:!1},A=async g=>{if(!C.token){ye.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:_n});return}try{const l={[V.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[V.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[V.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[V.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[V.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[V.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};Et(g)?(await bn(f.value,g),ye.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(l[g]))):(await It(f.value,g),ye.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(l[g])))}catch(l){const{message:U,code:Y}=pt(l);ye.value.showNotification("".concat(U," ").concat(Y))}M("update:movieInfo")},_n=()=>{c.push("/login")},Lt=D(()=>n.showFavoriteTooltip),En=()=>{c.push("/settings"),Ue()},Mn=async()=>{if(!$.value){ut("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank");return}if(P.value)try{const g=P.value,l=g.contentDocument||g.contentWindow.document;if(!l)return;const U=l.querySelector("video");if(!U)return;document.pictureInPictureElement?await document.exitPictureInPicture():document.pictureInPictureEnabled?await U.requestPictureInPicture():ut('–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–∂–∏–º "–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ"')}catch(g){console.error("Error toggling PiP:",g),ut('–ù–µ —É–¥–∞–ª–æ—Å—å –≤–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º "–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ"')}};return st(()=>{w.value=!0,Q(),F.value&&(Ce.value="4:3"),Ne(),window.addEventListener("resize",Ne),window.addEventListener("resize",Re),Pe.value&&k()}),Rt(()=>{window.removeEventListener("resize",Ne),window.removeEventListener("resize",Re),window.removeEventListener("mousemove",s),document.removeEventListener("keydown",ae),document.body.classList.remove("no-scroll"),ee.value&&clearInterval(ee.value),wt()}),(g,l)=>{var U,Y,te,ue,Ye,Xe,Ze,Qe,vt,mt,ft,gt,kt,Ut,jt,Nt,Bt,Ht,Dt,$t,Ot,Vt,Ft,qt,Kt,zt,Wt,Gt,Yt,Xt,Zt,Qt,Jt,en,tn,nn,on,ln,sn,an,rn,un;return h.value?(a(),qe(hn,{key:0,message:h.value,code:T.value},null,8,["message","code"])):(a(),d(de,{key:1},[e("div",ro,[l[41]||(l[41]=e("span",null,"–ü–ª–µ–µ—Ä:",-1)),e("button",{class:"player-btn",onClick:He},p(u.value?We(u.value.translate).toUpperCase():"–ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–µ–µ—Ä–æ–≤..."),1)]),I.value?(a(),qe(ao,{key:0,players:o.value,"selected-player":u.value,onClose:it,onSelect:Ct},null,8,["players","selected-player"])):y("",!0),e("div",{ref_key:"containerRef",ref:S,class:L(["player-container",{"theater-mode":b.value}]),style:dt(b.value?{}:be.value)},[e("div",{class:L(["iframe-wrapper",{pm_video:nt.value}]),style:dt(b.value?{}:Be.value)},[X(e("iframe",{ref_key:"playerIframe",ref:P,src:(U=u.value)==null?void 0:U.iframe,frameborder:"0",allowfullscreen:"",webkitallowfullscreen:"",class:L(["responsive-iframe",{"theater-mode-unlock":j.value,"theater-mode-lock":b.value,dimmed:O.value}]),onLoad:xe},null,42,uo),[[se,!w.value&&((Y=u.value)==null?void 0:Y.iframe)]]),w.value?(a(),qe(wn,{key:0})):y("",!0)],6),b.value?(a(),d("button",{key:0,class:L(["close-theater-btn",{visible:j.value}]),onClick:K}," ‚úñ ",2)):y("",!0)],6),b.value?y("",!0):(a(),d("div",co,[e("div",vo,[F.value?y("",!0):(a(),d("div",{key:0,ref_key:"tooltipContainer",ref:je,class:"tooltip-container list-buttons-container","data-tooltip-container":"favorite"},[Lt.value?(a(),d("button",{key:0,class:L(["favorite-btn",{active:(ue=(te=i.movieInfo)==null?void 0:te.lists)==null?void 0:ue.isFavorite}]),onMouseenter:l[0]||(l[0]=B=>le("favorite")),onMouseleave:Ee,onClick:l[1]||(l[1]=B=>A(Z(V).FAVORITE))},[e("span",mo,p((Xe=(Ye=i.movieInfo)==null?void 0:Ye.lists)!=null&&Xe.isFavorite?"favorite":"favorite_border"),1),e("span",{class:L(["material-icons dropdown-arrow",{highlighted:et.value}])},"expand_more",2)],34)):y("",!0),X(e("div",{ref_key:"tooltip",ref:H,class:"custom-tooltip advanced-tooltip list-buttons-dropdown","data-tooltip":"favorite",onMouseenter:ce,onMouseleave:Ue},[e("div",fo,[e("button",{class:L(["favorite-btn",{active:(Qe=(Ze=i.movieInfo)==null?void 0:Ze.lists)==null?void 0:Qe.isFavorite}]),onClick:l[2]||(l[2]=B=>A(Z(V).FAVORITE))},[e("span",go,p((mt=(vt=i.movieInfo)==null?void 0:vt.lists)!=null&&mt.isFavorite?"favorite":"favorite_border"),1),l[42]||(l[42]=e("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))],2)]),e("div",ko,[e("button",{class:L(["watching-btn",{active:(gt=(ft=i.movieInfo)==null?void 0:ft.lists)==null?void 0:gt.isWatching}]),onClick:l[3]||(l[3]=B=>A(Z(V).WATCHING))},[e("span",yo,p((Ut=(kt=i.movieInfo)==null?void 0:kt.lists)!=null&&Ut.isWatching?"visibility":"visibility_off"),1),l[43]||(l[43]=e("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))],2)]),e("div",po,[e("button",{class:L(["later-btn",{active:(Nt=(jt=i.movieInfo)==null?void 0:jt.lists)==null?void 0:Nt.isLater}]),onClick:l[4]||(l[4]=B=>A(Z(V).LATER))},l[44]||(l[44]=[e("span",{class:"material-icons"},"watch_later",-1),e("span",{class:"button-label"},"–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ",-1)]),2)]),e("div",ho,[e("button",{class:L(["completed-btn",{active:(Ht=(Bt=i.movieInfo)==null?void 0:Bt.lists)==null?void 0:Ht.isCompleted}]),onClick:l[5]||(l[5]=B=>A(Z(V).COMPLETED))},[e("span",bo,p(($t=(Dt=i.movieInfo)==null?void 0:Dt.lists)!=null&&$t.isCompleted?"check_circle":"check_circle_outline"),1),l[45]||(l[45]=e("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))],2)]),e("div",wo,[e("button",{class:L(["abandoned-btn",{active:(Vt=(Ot=i.movieInfo)==null?void 0:Ot.lists)==null?void 0:Vt.isAbandoned}]),onClick:l[6]||(l[6]=B=>A(Z(V).ABANDONED))},[e("span",Co,p(((qt=(Ft=i.movieInfo)==null?void 0:Ft.lists)!=null&&qt.isAbandoned,"not_interested")),1),l[46]||(l[46]=e("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))],2)]),e("div",{class:"tooltip-hint"},[l[48]||(l[48]=e("span",{class:"material-icons"},"settings",-1)),e("span",null,[l[47]||(l[47]=ne("–°—Ç–∏–ª—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ ")),e("a",{class:"settings-link",onClick:En},"–Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö")])])],544),[[se,R.value==="favorite"&&Lt.value]])],512)),F.value?y("",!0):(a(),d(de,{key:1},[e("div",_o,[e("button",{class:L(["dimming-btn",{active:O.value}]),onMouseenter:l[7]||(l[7]=B=>le("dimming")),onMouseleave:l[8]||(l[8]=B=>R.value=null),onClick:J},[e("span",Eo,p(O.value?"light_mode":"dark_mode"),1)],34),X(e("div",{class:"custom-tooltip","data-tooltip":"dimming"},p(O.value?"–û—Ç–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ":"–í–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ"),513),[[se,R.value==="dimming"]])]),e("div",Mo,[e("button",{class:L(["blur-btn",{"electron-only":!$.value}]),onMouseenter:l[9]||(l[9]=B=>le("blur")),onMouseleave:l[10]||(l[10]=B=>R.value=null),onClick:at},l[49]||(l[49]=[e("span",{class:"material-icons"},"blur_on",-1)]),34),X(e("div",{class:"custom-tooltip","data-tooltip":"blur"},p($.value?"–ë–ª—é—Ä":"–ë–ª—é—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[se,R.value==="blur"]])]),e("div",Lo,[e("button",{class:L(["material-symbols-outlined",{active:ve.value,"electron-only":!$.value}]),onMouseenter:l[11]||(l[11]=B=>le("compressor")),onMouseleave:l[12]||(l[12]=B=>R.value=null),onClick:N},l[50]||(l[50]=[e("span",{class:"material-icons"},"graphic_eq",-1)]),34),X(e("div",{class:"custom-tooltip","data-tooltip":"compressor"},p($.value?"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä":"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[se,R.value==="compressor"]])]),e("div",Io,[e("button",{class:L(["mirror-btn",{active:ke.value,"electron-only":!$.value}]),onMouseenter:l[13]||(l[13]=B=>le("mirror")),onMouseleave:l[14]||(l[14]=B=>R.value=null),onClick:W},l[51]||(l[51]=[e("span",{class:"material-icons"},"flip",-1)]),34),X(e("div",{class:"custom-tooltip","data-tooltip":"mirror"},p($.value?"–ó–µ—Ä–∫–∞–ª–æ":"–ó–µ—Ä–∫–∞–ª–æ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[se,R.value==="mirror"]])]),e("div",To,[e("button",{class:"theater-mode-btn",onMouseenter:l[15]||(l[15]=B=>le("theater")),onMouseleave:l[16]||(l[16]=B=>R.value=null),onClick:K},[e("span",Ro,p(b.value?"fullscreen_exit":"aspect_ratio"),1)],32),X(e("div",Po,[ne(p(b.value?"–í—ã–π—Ç–∏ –∏–∑ —Ç–µ–∞—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞":"–¢–µ–∞—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º")+" ",1),l[52]||(l[52]=e("span",{class:"shortcut-hint"},"Alt+T",-1))],512),[[se,R.value==="theater"]])]),e("div",So,[e("button",{class:L(["pip-btn",{"electron-only":!$.value}]),onMouseenter:l[17]||(l[17]=B=>le("pip")),onMouseleave:l[18]||(l[18]=B=>R.value=null),onClick:Mn},l[53]||(l[53]=[e("span",{class:"material-icons"},"picture_in_picture_alt",-1)]),34),X(e("div",{class:"custom-tooltip","data-tooltip":"pip"},p($.value?"–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ":"–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[se,R.value==="pip"]])]),e("div",Ao,[e("button",{class:"aspect-ratio-dropdown-btn",onMouseenter:l[19]||(l[19]=B=>le("aspect_ratio")),onMouseleave:Ee,onClick:_t},[e("span",xo,p(Ce.value),1)],32),X(e("div",{class:"custom-tooltip advanced-tooltip aspect-ratio-dropdown","data-tooltip":"aspect_ratio",onMouseenter:ce,onMouseleave:Ue},[(a(),d(de,null,Ie(ot,B=>e("div",{key:B,class:L(["aspect-ratio-option",{active:Ce.value===B}]),onClick:Ya=>me(B)},p(B),11,Uo)),64))],544),[[se,R.value==="aspect_ratio"]])]),e("div",{class:"tooltip-container","data-tooltip-container":"centering",onMouseenter:l[21]||(l[21]=B=>le("centering")),onMouseleave:Ee},[e("button",{class:"center-btn",onClick:k},l[54]||(l[54]=[e("span",{class:"material-icons"},"center_focus_strong",-1)])),X(e("div",{class:"custom-tooltip advanced-tooltip","data-tooltip":"centering",onMouseenter:ce,onMouseleave:Ue},[l[55]||(l[55]=ne(" –û—Ç—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–ª–µ–µ—Ä ")),re(qn,{modelValue:Pe.value,"onUpdate:modelValue":l[20]||(l[20]=B=>Pe.value=B),title:"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞"},null,8,["modelValue"]),l[56]||(l[56]=e("span",{class:"tooltip-title"},"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞",-1))],544),[[se,R.value==="centering"]])],32),$.value?y("",!0):(a(),d("div",jo,[e("button",{class:"app-link-btn",onMouseenter:l[22]||(l[22]=B=>le("app_link")),onMouseleave:l[23]||(l[23]=B=>R.value=null),onClick:Fe},l[57]||(l[57]=[e("span",{class:"material-icons"},"open_in_new",-1)]),32),X(e("div",No," –û—Ç–∫—Ä—ã—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ",512),[[se,R.value==="app_link"]])])),$.value?(a(),d("div",Bo,[e("button",{class:"copy-link-btn",onMouseenter:l[24]||(l[24]=B=>le("copy_link")),onMouseleave:l[25]||(l[25]=B=>R.value=null),onClick:$e},l[58]||(l[58]=[e("span",{class:"material-icons"},"content_copy",-1)]),32),X(e("div",Ho," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É ",512),[[se,R.value==="copy_link"]])])):y("",!0)],64))]),!F.value&&!Lt.value?(a(),d("div",Do,[e("div",$o,[e("button",{class:L(["favorite-btn",{active:(zt=(Kt=i.movieInfo)==null?void 0:Kt.lists)==null?void 0:zt.isFavorite}]),onMouseenter:l[26]||(l[26]=B=>le("favorite")),onMouseleave:l[27]||(l[27]=B=>R.value=null),onClick:l[28]||(l[28]=B=>A(Z(V).FAVORITE))},[e("span",Oo,p((Gt=(Wt=i.movieInfo)==null?void 0:Wt.lists)!=null&&Gt.isFavorite?"favorite":"favorite_border"),1)],34),X(e("div",Vo,p("–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"),512),[[se,R.value==="favorite"]])]),e("div",Fo,[e("button",{class:L(["watching-btn",{active:(Xt=(Yt=i.movieInfo)==null?void 0:Yt.lists)==null?void 0:Xt.isWatching}]),onMouseenter:l[29]||(l[29]=B=>le("watching")),onMouseleave:l[30]||(l[30]=B=>R.value=null),onClick:l[31]||(l[31]=B=>A(Z(V).WATCHING))},[e("span",qo,p((Qt=(Zt=i.movieInfo)==null?void 0:Zt.lists)!=null&&Qt.isWatching?"visibility":"visibility_off"),1)],34),X(e("div",Ko,p("–°–º–æ—Ç—Ä—é"),512),[[se,R.value==="watching"]])]),e("div",zo,[e("button",{class:L(["later-btn",{active:(en=(Jt=i.movieInfo)==null?void 0:Jt.lists)==null?void 0:en.isLater}]),onMouseenter:l[32]||(l[32]=B=>le("later")),onMouseleave:l[33]||(l[33]=B=>R.value=null),onClick:l[34]||(l[34]=B=>A(Z(V).LATER))},l[59]||(l[59]=[e("span",{class:"material-icons"},"watch_later",-1)]),34),X(e("div",Wo,p("–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"),512),[[se,R.value==="later"]])]),e("div",Go,[e("button",{class:L(["completed-btn",{active:(nn=(tn=i.movieInfo)==null?void 0:tn.lists)==null?void 0:nn.isCompleted}]),onMouseenter:l[35]||(l[35]=B=>le("completed")),onMouseleave:l[36]||(l[36]=B=>R.value=null),onClick:l[37]||(l[37]=B=>A(Z(V).COMPLETED))},[e("span",Yo,p((ln=(on=i.movieInfo)==null?void 0:on.lists)!=null&&ln.isCompleted?"check_circle":"check_circle_outline"),1)],34),X(e("div",Xo,p("–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"),512),[[se,R.value==="completed"]])]),e("div",Zo,[e("button",{class:L(["abandoned-btn",{active:(an=(sn=i.movieInfo)==null?void 0:sn.lists)==null?void 0:an.isAbandoned}]),onMouseenter:l[38]||(l[38]=B=>le("abandoned")),onMouseleave:l[39]||(l[39]=B=>R.value=null),onClick:l[40]||(l[40]=B=>A(Z(V).ABANDONED))},[e("span",Qo,p(((un=(rn=i.movieInfo)==null?void 0:rn.lists)!=null&&un.isAbandoned,"not_interested")),1)],34),X(e("div",Jo,p("–ë—Ä–æ—à–µ–Ω–æ"),512),[[se,R.value==="abandoned"]])])])):y("",!0)])),re(Mt,{ref_key:"notificationRef",ref:ye},null,512)],64))}}},yn=Ve(el,[["__scopeId","data-v-0787d568"]]),tl={key:0,class:"carousel-container"},nl={class:"carousel-wrapper"},ol=["onClick"],ll=["src","alt"],sl={class:"video-name"},il={key:0,class:"video-player"},al=["src"],rl={__name:"TrailerCarousel",props:{videos:{type:Array,required:!0},activeVideoIndex:{type:Number,default:null}},emits:["select"],setup(i,{emit:t}){const r=ht(),n=D(()=>r.isMobile),C=i,_=t,c=v(C.activeVideoIndex),f=v(null),E=v(!1),M=v(!1),o=()=>{if(!f.value)return;const{scrollLeft:S,scrollWidth:I,clientWidth:h}=f.value;E.value=S>0,M.value=S<I-h-1},u=S=>{if(!f.value)return;const I=f.value.querySelector(".carousel-item");if(!I)return;const h=I.clientWidth+16;f.value.scrollBy({left:h*S,behavior:"smooth"})},w=S=>{c.value=S,_("select",C.videos[S])},b=()=>o(),j=v([]),P=async S=>{try{return(await fetch("https://img.youtube.com/vi/".concat(S,"/0.jpg"))).ok}catch(I){return!1}};return st(async()=>{const S=C.videos.map(async h=>await P(h.videoId)?h:null),I=await Promise.all(S);j.value=I.filter(Boolean),o(),window.addEventListener("resize",b)}),Oe(()=>C.videos,async S=>{const I=S.map(async T=>await P(T.videoId)?T:null),h=await Promise.all(I);j.value=h.filter(Boolean)}),Oe(()=>C.activeVideoIndex,S=>{c.value=S}),Rt(()=>{window.removeEventListener("resize",b)}),(S,I)=>j.value.length?(a(),d("div",tl,[I[4]||(I[4]=e("h2",null,"–¢—Ä–µ–π–ª–µ—Ä—ã (YouTube)",-1)),e("div",nl,[X(e("button",{class:"scroll-button left",onClick:I[0]||(I[0]=h=>u(-1))},I[2]||(I[2]=[e("span",{class:"material-symbols-outlined"},"arrow_back_ios",-1)]),512),[[se,!n.value&&E.value]]),e("div",{ref_key:"carousel",ref:f,class:"carousel",onScroll:o},[(a(!0),d(de,null,Ie(j.value,(h,T)=>(a(),d("div",{key:T,class:"carousel-item",onClick:x=>w(T)},[e("img",{src:"https://img.youtube.com/vi/".concat(h.videoId,"/0.jpg"),alt:h.name},null,8,ll),e("div",sl,p(h.name),1)],8,ol))),128))],544),X(e("button",{class:"scroll-button right",onClick:I[1]||(I[1]=h=>u(1))},I[3]||(I[3]=[e("span",{class:"material-symbols-outlined"},"arrow_forward_ios",-1)]),512),[[se,!n.value&&M.value]])]),c.value!==null?(a(),d("div",il,[e("iframe",{src:i.videos[c.value].iframeUrl,frameborder:"0",allowfullscreen:""},null,8,al)])):y("",!0)])):y("",!0)}},ul=Ve(rl,[["__scopeId","data-v-4a5806b3"]]),dl={class:"rating-container"},cl={class:"rating-display"},vl={class:"rating-numbers"},ml=["onClick","onMouseenter"],fl={key:0,class:"tooltip-footer"},gl={class:"rating-numbers mobile-rating-numbers"},kl=["onClick"],yl={key:0,class:"mobile-modal-footer"},pl={__name:"MovieRating",props:{kpId:{type:String,required:!0},showDash:{type:Boolean,default:!1}},setup(i){const t=ht(),r=bt(),n=i,C=v(null),_=v(null),c=v(null),f=v(null),E=v(0),M=v(!1),o=v(!1);let u=null;const w=x=>x?x.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",b=()=>{u=setTimeout(()=>{M.value=!1,t.isMobile||(o.value=!1)},100)},j=()=>{u&&(clearTimeout(u),u=null),M.value=!0},P=()=>{t.isMobile&&(o.value=!o.value)},S=()=>{r.push("/login")},I=async()=>{try{const x=await In(n.kpId);_.value=x.user_rating,c.value=x.average_rating,f.value=w(x.vote_count)}catch(x){console.error("Error loading rating:",x)}},h=async x=>{var z;try{x===_.value?(await dn(n.kpId,null),_.value=null,C.value.showNotification("–û—Ü–µ–Ω–∫–∞ —É–¥–∞–ª–µ–Ω–∞")):(await dn(n.kpId,x),_.value=x,C.value.showNotification("–û—Ü–µ–Ω–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞")),t.isMobile&&(o.value=!1),I()}catch(F){console.error("Error setting rating:",F),((z=F.response)==null?void 0:z.status)===401?C.value.showNotification('–î–ª—è –æ—Ü–µ–Ω–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:S}):C.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ü–µ–Ω–∫–∏"),t.isMobile&&(o.value=!1)}},T=()=>{o.value=!1};return st(()=>{I()}),(x,z)=>(a(),d("div",dl,[e("div",cl,[e("a",{href:"#",class:L(["rating-link",{"has-rating":_.value}]),onMouseenter:z[0]||(z[0]=F=>M.value=!0),onMouseleave:b,onClick:Je(P,["prevent"])},[z[3]||(z[3]=e("img",{src:Vn,alt:"ReYohoho",class:"rating-logo"},null,-1)),e("span",{class:L(["average-rating",Z(yt)(c.value)])},p(c.value?c.value.toFixed(1).replace(/\.0$/,""):"‚Äî"),3)],34),X(e("div",{class:"rating-tooltip",onMouseenter:j,onMouseleave:b},[e("div",vl,[(a(),d(de,null,Ie(10,F=>e("button",{key:F,class:L(["number-btn",{active:F===_.value,hover:F===E.value,"average-highlight":c.value&&F<=Math.round(c.value)}]),onClick:$=>h(F),onMouseenter:$=>E.value=F,onMouseleave:z[1]||(z[1]=$=>E.value=0)},p(F),43,ml)),64))]),f.value?(a(),d("div",fl,"–û—Ü–µ–Ω–æ–∫: "+p(f.value),1)):y("",!0)],544),[[se,(M.value||o.value)&&!Z(t).isMobile]])]),re(Mt,{ref_key:"notificationRef",ref:C},null,512),Z(t).isMobile&&o.value?(a(),d("div",{key:0,class:"mobile-modal-overlay",onClick:T},[e("div",{class:"mobile-modal",onClick:z[2]||(z[2]=Je(()=>{},["stop"]))},[e("div",{class:"mobile-modal-header"},[z[4]||(z[4]=e("h3",null,"–û—Ü–µ–Ω–∏—Ç—å —Ñ–∏–ª—å–º",-1)),e("button",{class:"close-button",onClick:T},"√ó")]),e("div",gl,[(a(),d(de,null,Ie(10,F=>e("button",{key:F,class:L(["number-btn",{active:F===_.value,"average-highlight":c.value&&F<=Math.round(c.value)}]),onClick:$=>h(F)},p(F),11,kl)),64))]),f.value?(a(),d("div",yl,"–û—Ü–µ–Ω–æ–∫: "+p(f.value),1)):y("",!0)])])):y("",!0)]))}},hl=Ve(pl,[["__scopeId","data-v-2df64bd5"]]),bl={name:"EmojiPicker",props:{isVisible:{type:Boolean,default:!1}},emits:["emoji-selected","mouse-enter","mouse-leave","close"],data(){return{activeCategory:"smileys",categories:[{name:"smileys",icon:"üòÄ",emojis:["üòÄ","üòÉ","üòÑ","üòÅ","üòÜ","üòÖ","üòÇ","ü§£","üòä","üòá","üôÇ","üôÉ","üòâ","üòå","üòç","ü•∞","üòò","üòó","üòô","üòö","üòã","üòõ","üòù","üòú","ü§™","ü§®","üßê","ü§ì","üòé","ü§©","ü•≥"]},{name:"emotions",icon:"üò¢",emojis:["üò•","üò¢","üò≠","üò§","üò†","üò°","ü§¨","ü§Ø","üò≥","ü•µ","ü•∂","üò±","üò®","üò∞","üò•","üòì","ü§ó","ü§î","ü§≠","ü§´","ü§•","üò∂","üòê","üòë","üò¨","üôÑ","üòØ","üò¶","üòß","üòÆ","üò≤"]},{name:"gestures",icon:"üëç",emojis:["üëç","üëé","üëå","ü§å","ü§è","‚úåÔ∏è","ü§û","ü§ü","ü§ò","ü§ô","üëà","üëâ","üëÜ","üñï","üëá","‚òùÔ∏è","üëè","üôå","üëê","ü§≤","ü§ù","üôè","‚úçÔ∏è","üí™","ü¶æ","ü¶ø","ü¶µ","ü¶∂","üëÇ","ü¶ª","üëÉ"]},{name:"hearts",icon:"‚ù§Ô∏è",emojis:["‚ù§Ô∏è","üß°","üíõ","üíö","üíô","üíú","ü§é","üñ§","ü§ç","üíî","‚ù£Ô∏è","üíï","üíû","üíì","üíó","üíñ","üíò","üíù","üíü","‚ô•Ô∏è","üíØ","üí¢","üí•","üí´","üí¶","üí®","üï≥Ô∏è","üí£","üí¨","üëÅÔ∏è‚Äçüó®Ô∏è","üó®Ô∏è"]},{name:"objects",icon:"üéâ",emojis:["üéâ","üéä","üéà","üéÅ","üéÄ","üéÇ","üç∞","üßÅ","üç≠","üç¨","üç´","üç©","üç™","üçï","üçî","üçü","üå≠","ü•™","üåÆ","üåØ","ü•ô","ü•ö","üç≥","ü•ò","üç≤","ü•ó","üçø","üßà","üßÄ","ü•®","ü•Ø"]}]}},computed:{currentEmojis(){const i=this.categories.find(t=>t.name===this.activeCategory);return i?i.emojis:[]}},methods:{selectEmoji(i){this.$emit("emoji-selected",i)}}},wl={class:"emoji-categories"},Cl=["onClick"],_l={class:"emoji-grid"},El=["onClick"];function Ml(i,t,r,n,C,_){return r.isVisible?(a(),d("div",{key:0,class:"emoji-picker",onMouseenter:t[1]||(t[1]=c=>i.$emit("mouse-enter")),onMouseleave:t[2]||(t[2]=c=>i.$emit("mouse-leave"))},[e("button",{class:"close-btn mobile-only",onClick:t[0]||(t[0]=c=>i.$emit("close"))},t[3]||(t[3]=[e("i",{class:"fas fa-times"},null,-1)])),e("div",wl,[(a(!0),d(de,null,Ie(C.categories,c=>(a(),d("button",{key:c.name,onClick:f=>C.activeCategory=c.name,class:L([{active:C.activeCategory===c.name},"category-btn"]),type:"button"},p(c.icon),11,Cl))),128))]),e("div",_l,[(a(!0),d(de,null,Ie(_.currentEmojis,c=>(a(),d("button",{key:c,onClick:f=>_.selectEmoji(c),class:"emoji-btn",type:"button"},p(c),9,El))),128))])],32)):y("",!0)}const Pt=Ve(bl,[["render",Ml],["__scopeId","data-v-209132f3"]]),Ll=async i=>{const t=await Tn();return await i(t)},Il=async i=>{const{data:t}=await Ll(r=>r.get("/search_emotes/".concat(i)));return t.emotes||[]},Tl={name:"ImagePicker",props:{isVisible:{type:Boolean,required:!0},currentUser:{type:Object,default:null}},emits:["image-selected","mouse-enter","mouse-leave","close","login-required"],setup(i,{emit:t}){const r=v(""),n=v([]),C=v(null),_=v(!1),f=Rn(async u=>{if(!i.currentUser){console.warn("–ü–æ–ø—ã—Ç–∫–∞ –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏");return}if(!u.trim()){n.value=[],_.value=!1;return}_.value=!0;try{n.value=await Il(u)}catch(w){console.error("Error searching images:",w),n.value=[]}finally{_.value=!1}},300),E=()=>{if(!i.currentUser){t("login-required");return}r.value.trim()&&(_.value=!0),f(r.value)},M=u=>{if(!i.currentUser){t("login-required");return}t("image-selected",u),t("close")},o=()=>{setTimeout(()=>{i.isVisible&&t("mouse-leave")},100)};return Oe(()=>i.isVisible,u=>{u&&(r.value="",n.value=[],_.value=!1)}),{searchQuery:r,images:n,searchInput:C,isLoading:_,handleSearch:E,selectImage:M,handleInputBlur:o}}},Rl={key:0,class:"auth-required"},Pl={class:"auth-message"},Sl={key:1},Al={class:"image-picker-header"},xl={class:"image-content"},Ul={key:0,class:"loading-spinner"},jl={key:1,class:"image-grid"},Nl=["onClick"],Bl=["src","alt"],Hl={key:2,class:"no-images"},Dl={key:3,class:"no-search"};function $l(i,t,r,n,C,_){return r.isVisible?(a(),d("div",{key:0,class:"image-picker",onMouseenter:t[7]||(t[7]=c=>i.$emit("mouse-enter")),onMouseleave:t[8]||(t[8]=c=>i.$emit("mouse-leave")),onClick:t[9]||(t[9]=Je(()=>{},["stop"]))},[e("button",{class:"close-btn mobile-only",onClick:t[0]||(t[0]=c=>i.$emit("close"))},t[10]||(t[10]=[e("i",{class:"fas fa-times"},null,-1)])),r.currentUser?(a(),d("div",Sl,[e("div",Al,[X(e("input",{ref:"searchInput",type:"text","onUpdate:modelValue":t[2]||(t[2]=c=>n.searchQuery=c),placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–º–∞–π–ª–∞ 7tv",class:"image-search-input",onInput:t[3]||(t[3]=(...c)=>n.handleSearch&&n.handleSearch(...c)),onClick:t[4]||(t[4]=Je(()=>{},["stop"])),onFocus:t[5]||(t[5]=c=>i.$emit("mouse-enter")),onBlur:t[6]||(t[6]=(...c)=>n.handleInputBlur&&n.handleInputBlur(...c))},null,544),[[lt,n.searchQuery]])]),e("div",xl,[n.isLoading?(a(),d("div",Ul,t[14]||(t[14]=[e("div",{class:"spinner"},null,-1),e("p",null,"–ü–æ–∏—Å–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...",-1)]))):n.images.length>0?(a(),d("div",jl,[(a(!0),d(de,null,Ie(n.images,(c,f)=>(a(),d("div",{key:f,class:"image-item",onClick:E=>n.selectImage(c)},[e("img",{src:c,alt:"Image "+(f+1)},null,8,Bl)],8,Nl))),128))])):n.searchQuery.trim()?(a(),d("div",Hl,t[15]||(t[15]=[e("p",null,"–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤",-1)]))):(a(),d("div",Dl,t[16]||(t[16]=[e("p",null,"–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞",-1)])))])])):(a(),d("div",Rl,[e("div",Pl,[t[11]||(t[11]=e("i",{class:"fas fa-lock"},null,-1)),t[12]||(t[12]=e("h3",null,"–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è",-1)),t[13]||(t[13]=e("p",null,"–î–ª—è –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç",-1)),e("button",{class:"login-button",onClick:t[1]||(t[1]=c=>i.$emit("login-required"))},"–í–æ–π—Ç–∏")])]))],32)):y("",!0)}const St=Ve(Tl,[["render",$l],["__scopeId","data-v-f33eb3f6"]]),Ol={name:"LinkModal",props:{isVisible:{type:Boolean,default:!1},selectedText:{type:String,default:""}},emits:["close","submit"],setup(i,{emit:t}){const r=v(""),n=v(""),C=v(null),_=v(null),c=D(()=>/^https?:\/\/.+/.test(r.value.trim())&&n.value.trim()),f=()=>{t("close"),M()},E=()=>{c.value&&(t("submit",{url:r.value.trim(),title:n.value.trim()}),f())},M=()=>{r.value="",n.value=""},o=u=>{var w;u.key==="Enter"?(u.preventDefault(),c.value?E():u.target===C.value&&r.value.trim()&&((w=_.value)==null||w.focus())):u.key==="Escape"&&f()};return Oe(()=>i.isVisible,u=>{u&&(i.selectedText.trim()&&(n.value=i.selectedText.trim()),Te(()=>{var w;(w=C.value)==null||w.focus()}))}),{linkUrl:r,linkTitle:n,urlInput:C,titleInput:_,isValidLink:c,closeModal:f,submitLink:E,handleKeydown:o}}},Vl={class:"link-modal-header"},Fl={class:"link-modal-content"},ql={class:"form-group"},Kl={class:"form-group"},zl={class:"link-modal-footer"},Wl=["disabled"];function Gl(i,t,r,n,C,_){return r.isVisible?(a(),d("div",{key:0,class:"link-modal-overlay",onClick:t[8]||(t[8]=(...c)=>n.closeModal&&n.closeModal(...c))},[e("div",{class:"link-modal",onClick:t[7]||(t[7]=Je(()=>{},["stop"]))},[e("div",Vl,[t[10]||(t[10]=e("h3",null,"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É",-1)),e("button",{class:"close-button",onClick:t[0]||(t[0]=(...c)=>n.closeModal&&n.closeModal(...c))},t[9]||(t[9]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",Fl,[e("div",ql,[t[11]||(t[11]=e("label",{for:"link-url"},"URL —Å—Å—ã–ª–∫–∏:",-1)),X(e("input",{id:"link-url",ref:"urlInput","onUpdate:modelValue":t[1]||(t[1]=c=>n.linkUrl=c),type:"url",placeholder:"https://example.com",class:"link-input",onKeydown:t[2]||(t[2]=(...c)=>n.handleKeydown&&n.handleKeydown(...c))},null,544),[[lt,n.linkUrl]])]),e("div",Kl,[t[12]||(t[12]=e("label",{for:"link-title"},"–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏:",-1)),X(e("input",{id:"link-title",ref:"titleInput","onUpdate:modelValue":t[3]||(t[3]=c=>n.linkTitle=c),type:"text",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è",class:"link-input",onKeydown:t[4]||(t[4]=(...c)=>n.handleKeydown&&n.handleKeydown(...c))},null,544),[[lt,n.linkTitle]])])]),e("div",zl,[e("button",{class:"cancel-button",onClick:t[5]||(t[5]=(...c)=>n.closeModal&&n.closeModal(...c))},"–û—Ç–º–µ–Ω–∞"),e("button",{class:"submit-button",disabled:!n.isValidLink,onClick:t[6]||(t[6]=(...c)=>n.submitLink&&n.submitLink(...c))},"–î–æ–±–∞–≤–∏—Ç—å",8,Wl)])])])):y("",!0)}const At=Ve(Ol,[["render",Gl],["__scopeId","data-v-a794d83f"]]);function Yl(){const i=v(!1),t=v(!1),r=v(!1),n=()=>{t.value=!0},C=()=>{t.value=!1,setTimeout(()=>{!t.value&&!r.value&&(i.value=!1)},300)},_=()=>{r.value=!0,i.value=!0},c=()=>{r.value=!1,setTimeout(()=>{!t.value&&!r.value&&(i.value=!1)},300)},f=()=>{i.value=!1};return{showEmojiPicker:i,isEmojiHovered:t,isButtonHovered:r,handleEmojiMouseEnter:n,handleEmojiMouseLeave:C,handleButtonMouseEnter:_,handleButtonMouseLeave:c,closeEmojiPicker:f,insertEmoji:(o,u,w,b)=>{const j=u.value;if(j){const P=j.selectionStart,S=j.selectionEnd,I=w.value.substring(0,P),h=w.value.substring(S),T=I+o+h;b(T),Te(()=>{j.focus(),j.setSelectionRange(P+o.length,P+o.length),j.style.height&&(j.style.height="auto",j.style.height="".concat(Math.min(j.scrollHeight,200),"px"))})}else b(w.value+o)},handleGlobalClick:o=>{!o.target.closest(".emoji-picker")&&!o.target.closest(".emoji-button-inline")&&f()}}}function Xl(){const i=v(!1),t=v(!1),r=v(!1),n=()=>{t.value=!0},C=()=>{t.value=!1,setTimeout(()=>{!t.value&&!r.value&&(i.value=!1)},300)},_=()=>{r.value=!0,i.value=!0},c=()=>{r.value=!1,setTimeout(()=>{!t.value&&!r.value&&(i.value=!1)},300)},f=()=>{i.value=!1};return{showImagePicker:i,isImageHovered:t,isButtonHovered:r,handleImageMouseEnter:n,handleImageMouseLeave:C,handleImageButtonMouseEnter:_,handleButtonMouseLeave:c,closeImagePicker:f,insertImage:(o,u,w,b)=>{const j=u.value;if(j){const P=j.selectionStart,S=j.selectionEnd,I="[img]".concat(o,"[/img]"),h=w.value.slice(0,P)+I+w.value.slice(S);b(h),Te(()=>{j.focus(),j.setSelectionRange(P+I.length,P+I.length),j.style.height&&(j.style.height="auto",j.style.height="".concat(Math.min(j.scrollHeight,200),"px"))})}else{const P="[img]".concat(o,"[/img]");b(w.value+P)}},handleGlobalClick:o=>{!o.target.closest(".image-picker")&&!o.target.closest(".emoji-button-inline")&&f()}}}function Zl(){const i=v(!1),t=v("");return{showLinkModal:i,selectedTextForLink:t,insertLink:(c,f)=>{const E=c.value;if(E){const M=E.selectionStart,o=E.selectionEnd,u=f.value.slice(M,o);t.value=u.trim()||""}i.value=!0},insertLinkFromModal:(c,f,E,M)=>{const o=f.value;if(o){const u=o.selectionStart,w=o.selectionEnd,b="[link=".concat(c.url,"]").concat(c.title,"[/link]"),j=E.value.slice(0,u)+b+E.value.slice(w);M(j),Te(()=>{o.focus(),o.setSelectionRange(u+b.length,u+b.length),o.style.height&&(o.style.height="auto",o.style.height="".concat(Math.min(o.scrollHeight,200),"px"))})}},closeLinkModal:()=>{i.value=!1},insertSpoiler:(c,f,E)=>{const M=c.value;if(M){const o=M.selectionStart,u=M.selectionEnd,w=f.value.slice(o,u);let b;w.trim()?b="[spoiler]".concat(w,"[/spoiler]"):b="[spoiler][/spoiler]";const j=f.value.slice(0,o)+b+f.value.slice(u);E(j),Te(()=>{if(M.focus(),w.trim())M.setSelectionRange(o+b.length,o+b.length);else{const P=o+9;M.setSelectionRange(P,P)}M.style.height&&(M.style.height="auto",M.style.height="".concat(Math.min(M.scrollHeight,200),"px"))})}}}}function Ql(){return{autoResize:r=>{const n=r==null?void 0:r.target;n&&(n.style.height="auto",n.style.height="".concat(Math.min(n.scrollHeight,200),"px"))},autoResizeElement:r=>{r&&(r.style.height="auto",r.style.height="".concat(Math.min(r.scrollHeight,200),"px"))}}}function xt(){const i=Yl(),t=Xl(),r=Zl(),{autoResize:n,autoResizeElement:C}=Ql(),_=()=>{i.isButtonHovered.value=!0,t.isButtonHovered.value=!0,i.showEmojiPicker.value=!0,t.showImagePicker.value=!1},c=()=>{i.isButtonHovered.value=!0,t.isButtonHovered.value=!0,t.showImagePicker.value=!0,i.showEmojiPicker.value=!1},f=()=>{i.isButtonHovered.value=!1,t.isButtonHovered.value=!1,setTimeout(()=>{!i.isEmojiHovered.value&&!t.isImageHovered.value&&!i.isButtonHovered.value&&!t.isButtonHovered.value&&(i.showEmojiPicker.value=!1,t.showImagePicker.value=!1)},300)},E=()=>{i.showEmojiPicker.value=!1,t.showImagePicker.value=!1},M=P=>{!P.target.closest(".emoji-picker")&&!P.target.closest(".image-picker")&&!P.target.closest(".emoji-button-inline")&&E()},o=(P,S,I,h)=>{i.insertEmoji(P,S,I,h)},u=(P,S,I,h)=>{t.insertImage(P,S,I,h)},w=(P,S,I)=>{r.insertLink(P,S,I)},b=(P,S,I,h)=>{r.insertLinkFromModal(P,S,I,h)},j=(P,S,I)=>{r.insertSpoiler(P,S,I)};return st(()=>{document.addEventListener("click",M)}),Rt(()=>{document.removeEventListener("click",M)}),{showEmojiPicker:i.showEmojiPicker,handleEmojiMouseEnter:i.handleEmojiMouseEnter,handleEmojiMouseLeave:i.handleEmojiMouseLeave,closeEmojiPicker:i.closeEmojiPicker,showImagePicker:t.showImagePicker,handleImageMouseEnter:t.handleImageMouseEnter,handleImageMouseLeave:t.handleImageMouseLeave,closeImagePicker:t.closeImagePicker,showLinkModal:r.showLinkModal,selectedTextForLink:r.selectedTextForLink,closeLinkModal:r.closeLinkModal,handleButtonMouseEnter:_,handleImageButtonMouseEnter:c,handleButtonMouseLeave:f,closeAllPickers:E,insertEmojiUniversal:o,insertImageUniversal:u,insertLinkUniversal:w,insertLinkFromModalUniversal:b,insertSpoilerUniversal:j,autoResize:n,autoResizeElement:C}}const Jl=i=>i===1?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π":i>=2&&i<=4?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è":"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤",es=i=>{if(!i)return"?";const t=i.split(" ");return t.length===1?i.slice(0,2).toUpperCase():(t[0][0]+t[t.length-1][0]).toUpperCase()},ts={name:"CommentItem",components:{EmojiPicker:Pt,ImagePicker:St,LinkModal:At},props:{comment:{type:Object,required:!0,default:()=>({username:"–ê–Ω–æ–Ω–∏–º",user_avatar:null,content:"",created_at:new Date().toISOString(),rating:0,replies:[]})},currentUser:{type:Object,required:!0,default:()=>({})},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate"],setup(i,{emit:t}){var be,Be;const r=bt(),n=D(()=>{var k;return i.editingCommentId===((k=i.comment)==null?void 0:k.id)}),C=v(((be=i.comment)==null?void 0:be.content)||""),_=v(((Be=i.comment)==null?void 0:Be.user_rating)||0),c=v(null),f=v(null),{showEmojiPicker:E,showImagePicker:M,showLinkModal:o,selectedTextForLink:u,handleEmojiMouseEnter:w,handleEmojiMouseLeave:b,handleImageMouseEnter:j,handleImageMouseLeave:P,handleButtonMouseEnter:S,handleImageButtonMouseEnter:I,handleButtonMouseLeave:h,closeEmojiPicker:T,closeImagePicker:x,closeLinkModal:z,insertEmojiUniversal:F,insertImageUniversal:$,insertLinkUniversal:R,insertLinkFromModalUniversal:we,insertSpoilerUniversal:he,autoResize:ye}=xt(),{formatContentWithTruncation:je}=Cn();st(async()=>{var k;if((k=i.comment)!=null&&k.user_avatar){const Q=await Pn();c.value="".concat(Q).concat(i.comment.user_avatar)}});const H=D(()=>{var k;return i.currentUser&&((k=i.comment)==null?void 0:k.user_id)===i.currentUser.id}),ee=D(()=>{var k;return i.currentUser&&((k=i.comment)==null?void 0:k.user_id)===i.currentUser.id||i.currentUser&&i.currentUser.is_admin===1}),G=D(()=>{var k,Q,He;return((k=i.comment)==null?void 0:k.updated_at)&&((Q=i.comment)==null?void 0:Q.updated_at)!==((He=i.comment)==null?void 0:He.created_at)}),q=D(()=>{var k,Q;return(k=i.comment)!=null&&k.is_deleted?!1:(((Q=i.comment)==null?void 0:Q.rating)||0)<=-3}),oe=D(()=>q.value),pe=v(!1),ie=D(()=>{var k,Q;return(k=i.comment)!=null&&k.is_deleted?null:(((Q=i.comment)==null?void 0:Q.rating)||0)<=-3?"lowRating":null}),fe=()=>{var k,Q;t("start-edit",(k=i.comment)==null?void 0:k.id),C.value=((Q=i.comment)==null?void 0:Q.content)||"",Te(()=>{f.value&&(f.value.focus(),ye({target:f.value}))})},_e=()=>{var k;t("cancel-edit"),C.value=((k=i.comment)==null?void 0:k.content)||""},ge=()=>{var k;C.value.trim()&&t("edit",(k=i.comment)==null?void 0:k.id,C.value.trim())},Re=()=>{var k;confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π?")&&t("delete",(k=i.comment)==null?void 0:k.id)},le=k=>{var Q,He;_.value===k?(_.value=0,t("rate",(Q=i.comment)==null?void 0:Q.id,k)):(_.value=k,t("rate",(He=i.comment)==null?void 0:He.id,k))},Ee=k=>{k.key==="Enter"&&!k.shiftKey&&(k.preventDefault(),ge())},ce=D(()=>{var k;return je((k=i.comment)==null?void 0:k.content)}),Ue=()=>{console.log("Avatar load error, falling back to initials"),c.value=null,Te(()=>{const k=document.querySelector(".avatar-placeholder");k&&(k.style.display="flex")})},Ce=()=>{r.push("/login")},Pe=k=>{F(k,f,C,Q=>{C.value=Q})},et=k=>{$(k,f,C,Q=>{C.value=Q})},Ge=()=>{he(f,C,k=>{C.value=k})},tt=()=>{R(f,C,k=>{C.value=k})},Me=k=>{we(k,f,C,Q=>{C.value=Q})},Ne=k=>{ye(k)};return Oe(C,()=>{n.value&&f.value&&Te(()=>{Ne({target:f.value})})}),{isEditing:n,editContent:C,userRating:_,isCommentOwner:H,canDeleteComment:ee,isCommentEdited:G,formatDate:Wn,formatRelativeTime:zn,startEdit:fe,cancelEdit:_e,saveEdit:ge,confirmDelete:Re,rateComment:le,avatarUrl:c,getInitials:es,handleEditKeydown:Ee,isCommentHidden:oe,showHiddenComment:pe,hiddenCommentReason:ie,formattedContent:ce,autoResizeEdit:Ne,editTextarea:f,showEmojiPicker:E,showImagePicker:M,insertEmojiEdit:Pe,insertImageEdit:et,insertSpoilerEdit:Ge,insertLinkEdit:tt,handleEmojiMouseEnter:w,handleEmojiMouseLeave:b,handleImageMouseEnter:j,handleImageMouseLeave:P,closeEmojiPicker:T,closeImagePicker:x,handleButtonMouseEnter:S,handleButtonMouseLeave:h,handleImageButtonMouseEnter:I,handleAvatarError:Ue,openLogin:Ce,showLinkModal:o,selectedTextForLink:u,insertLinkFromModal:Me,closeLinkModal:z}}},ns=["data-comment-id"],os={class:"comment-header"},ls={class:"user-info"},ss={class:"user-avatar"},is=["src","alt"],as={class:"user-details"},rs={class:"username"},us={key:0,class:"user-rating"},ds=["title"],cs=["title"],vs={class:"comment-content"},ms={key:0,class:"hidden-comment-warning"},fs={key:1},gs={key:0,class:"deleted-comment"},ks={key:1},ys={key:0,class:"edit-form"},ps={class:"edit-textarea-container"},hs={class:"edit-footer"},bs={class:"edit-actions"},ws=["disabled"],Cs={class:"character-counter-container"},_s={key:1,class:"comment-text-container"},Es=["innerHTML"],Ms={class:"comment-footer"},Ls={class:"comment-actions"},Is={class:"rating-buttons"},Ts={class:"action-buttons"};function Rs(i,t,r,n,C,_){var o,u,w,b,j,P,S,I,h,T,x,z,F,$,R,we,he,ye,je;const c=Le("router-link"),f=Le("EmojiPicker"),E=Le("ImagePicker"),M=Le("LinkModal");return a(),d("div",{class:"comment-item","data-comment-id":(o=r.comment)==null?void 0:o.id},[e("div",os,[e("div",ls,[re(c,{to:{path:"/lists/".concat((u=r.comment)==null?void 0:u.user_id)},target:"_blank",rel:"noopener noreferrer",class:"user-avatar-link"},{default:cn(()=>{var H,ee;return[e("div",ss,[n.avatarUrl?(a(),d("img",{key:0,src:n.avatarUrl,alt:((H=r.comment)==null?void 0:H.username)||"–ê–Ω–æ–Ω–∏–º",onError:t[0]||(t[0]=(...G)=>n.handleAvatarError&&n.handleAvatarError(...G)),onerror:"this.onerror=null; this.style.display='none'; this.nextElementSibling.style.display='flex';"},null,40,is)):(a(),d("div",{key:1,class:"avatar-placeholder",style:dt({display:n.avatarUrl?"none":"flex"})},p(n.getInitials(((ee=r.comment)==null?void 0:ee.username)||"–ê–Ω–æ–Ω–∏–º")),5))])]}),_:1},8,["to"]),e("div",as,[re(c,{to:{path:"/lists/".concat((w=r.comment)==null?void 0:w.user_id)},target:"_blank",rel:"noopener noreferrer",class:"username-link"},{default:cn(()=>{var H;return[e("span",rs,p(((H=r.comment)==null?void 0:H.username)||"–ê–Ω–æ–Ω–∏–º"),1)]}),_:1},8,["to"]),(b=r.comment)!=null&&b.user_movie_rating?(a(),d("span",us,[t[18]||(t[18]=e("i",{class:"fas fa-star"},null,-1)),ne(" "+p(r.comment.user_movie_rating),1)])):y("",!0),e("span",{class:"date",title:n.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((j=r.comment)==null?void 0:j.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(n.formatDate((P=r.comment)==null?void 0:P.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((S=r.comment)==null?void 0:S.created_at))},[ne(p(n.formatRelativeTime((I=r.comment)==null?void 0:I.created_at))+" ",1),n.isCommentEdited?(a(),d("i",{key:0,class:"fas fa-pencil-alt edit-icon",title:n.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((h=r.comment)==null?void 0:h.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(n.formatDate((T=r.comment)==null?void 0:T.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((x=r.comment)==null?void 0:x.created_at))},null,8,cs)):y("",!0)],8,ds)])])]),e("div",vs,[!((z=r.comment)!=null&&z.is_deleted)&&n.isCommentHidden&&!n.showHiddenComment?(a(),d("div",ms,[n.hiddenCommentReason==="lowRating"?(a(),d("p",{key:0,class:"warning-text",onClick:t[1]||(t[1]=H=>n.showHiddenComment=!0)},t[19]||(t[19]=[e("i",{class:"fas fa-eye-slash"},null,-1),ne(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–∫—Ä—ã—Ç –∏–∑-–∑–∞ –Ω–∏–∑–∫–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å. ")]))):y("",!0)])):(a(),d("div",fs,[(F=r.comment)!=null&&F.is_deleted?(a(),d("div",gs,t[20]||(t[20]=[e("p",{class:"deleted-message"},[e("i",{class:"fas fa-trash"}),ne(" –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —É–¥–∞–ª—ë–Ω ")],-1)]))):(a(),d("div",ks,[n.isEditing?(a(),d("div",ys,[e("div",ps,[X(e("textarea",{ref:"editTextarea","onUpdate:modelValue":t[2]||(t[2]=H=>n.editContent=H),class:"edit-textarea",rows:"3",maxlength:"1500",onKeydown:t[3]||(t[3]=(...H)=>n.handleEditKeydown&&n.handleEditKeydown(...H)),onInput:t[4]||(t[4]=(...H)=>n.autoResizeEdit&&n.autoResizeEdit(...H))},null,544),[[lt,n.editContent]])]),e("div",hs,[e("div",bs,[e("button",{onClick:t[5]||(t[5]=(...H)=>n.cancelEdit&&n.cancelEdit(...H)),class:"cancel-button"},"–û—Ç–º–µ–Ω–∞"),e("button",{onClick:t[6]||(t[6]=(...H)=>n.saveEdit&&n.saveEdit(...H)),class:"save-button",disabled:!n.editContent.trim()||n.editContent.length>1500}," –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ",8,ws)]),e("div",Cs,[e("div",{class:L(["character-counter-inline",{"near-limit":n.editContent.length>1400,"at-limit":n.editContent.length>=1500}])},p(n.editContent.length)+"/1500 ",3),e("button",{type:"button",class:L(["emoji-button-inline",{active:n.showEmojiPicker}]),onMouseenter:t[7]||(t[7]=(...H)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...H)),onMouseleave:t[8]||(t[8]=(...H)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...H))}," üòä ",34),e("button",{type:"button",class:L(["emoji-button-inline",{active:n.showImagePicker}]),onMouseenter:t[9]||(t[9]=(...H)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...H)),onMouseleave:t[10]||(t[10]=(...H)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...H))},t[21]||(t[21]=[ct('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-f1c85dfc><g id="logo" data-v-f1c85dfc><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-f1c85dfc></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-f1c85dfc></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-f1c85dfc></path></g></svg>',1)]),34),e("button",{type:"button",class:"emoji-button-inline spoiler-button",onClick:t[11]||(t[11]=(...H)=>n.insertSpoilerEdit&&n.insertSpoilerEdit(...H)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},t[22]||(t[22]=[e("i",{class:"fas fa-eye-slash"},null,-1)])),e("button",{type:"button",class:"emoji-button-inline link-button",onClick:t[12]||(t[12]=(...H)=>n.insertLinkEdit&&n.insertLinkEdit(...H)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},t[23]||(t[23]=[e("i",{class:"fas fa-link"},null,-1)])),re(f,{"is-visible":n.showEmojiPicker,onEmojiSelected:n.insertEmojiEdit,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),re(E,{"is-visible":n.showImagePicker,"current-user":r.currentUser,onImageSelected:n.insertImageEdit,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:n.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),re(M,{"is-visible":n.showLinkModal,"selected-text":n.selectedTextForLink,onClose:n.closeLinkModal,onSubmit:n.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):(a(),d("div",_s,[e("p",{class:"comment-text",innerHTML:n.formattedContent},null,8,Es)]))]))]))]),e("div",Ms,[e("div",Ls,[e("div",Is,[!n.isCommentOwner&&!(($=r.comment)!=null&&$.is_deleted)?(a(),d("button",{key:0,onClick:t[13]||(t[13]=H=>n.rateComment(1)),class:L(["rating-button",{"rated-up":n.userRating===1}])},t[24]||(t[24]=[e("i",{class:"fas fa-thumbs-up"},null,-1)]),2)):y("",!0),e("span",{class:L(["rating-count",{"rating-positive":n.userRating===1,"rating-negative":n.userRating===-1}])},p(((R=r.comment)==null?void 0:R.rating)||0),3),!n.isCommentOwner&&!((we=r.comment)!=null&&we.is_deleted)?(a(),d("button",{key:1,onClick:t[14]||(t[14]=H=>n.rateComment(-1)),class:L(["rating-button",{"rated-down":n.userRating===-1}])},t[25]||(t[25]=[e("i",{class:"fas fa-thumbs-down"},null,-1)]),2)):y("",!0)]),e("div",Ts,[!r.currentUser||r.currentUser.allow_comments===1?(a(),d("button",{key:0,onClick:t[15]||(t[15]=H=>i.$emit("reply",r.comment)),class:"action-button reply-button"},t[26]||(t[26]=[e("i",{class:"fas fa-reply"},null,-1)]))):y("",!0),n.isCommentOwner&&!((he=r.comment)!=null&&he.is_deleted)&&!n.isEditing&&((ye=r.currentUser)==null?void 0:ye.allow_comments)===1?(a(),d("button",{key:1,onClick:t[16]||(t[16]=(...H)=>n.startEdit&&n.startEdit(...H)),class:"action-button edit-button"},t[27]||(t[27]=[e("i",{class:"fas fa-edit"},null,-1)]))):y("",!0),n.canDeleteComment&&!((je=r.comment)!=null&&je.is_deleted)?(a(),d("button",{key:2,onClick:t[17]||(t[17]=(...H)=>n.confirmDelete&&n.confirmDelete(...H)),class:"action-button delete-button"},t[28]||(t[28]=[e("i",{class:"fas fa-trash"},null,-1)]))):y("",!0)])])])],8,ns)}const Ps=Ve(ts,[["render",Rs],["__scopeId","data-v-f1c85dfc"]]),Ss={name:"CommentThread",components:{CommentItem:Ps,EmojiPicker:Pt,ImagePicker:St,LinkModal:At},props:{comment:{type:Object,required:!0},currentUser:{type:Object,required:!0},replyTo:{type:Object,default:null},replyContent:{type:String,default:""},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate","submit-reply","cancel-reply","update-reply-content","reply-keydown"],setup(i,{emit:t}){const r=v(null),n=v(!0),{showEmojiPicker:C,showImagePicker:_,showLinkModal:c,selectedTextForLink:f,handleEmojiMouseEnter:E,handleEmojiMouseLeave:M,handleImageMouseEnter:o,handleImageMouseLeave:u,handleButtonMouseEnter:w,handleImageButtonMouseEnter:b,handleButtonMouseLeave:j,closeEmojiPicker:P,closeImagePicker:S,closeLinkModal:I,insertEmojiUniversal:h,insertImageUniversal:T,insertLinkUniversal:x,insertLinkFromModalUniversal:z,insertSpoilerUniversal:F}=xt(),$=G=>{t("update-reply-content",G.target.value);const q=G.target;q&&(q.style.height="auto",q.style.height="".concat(Math.min(q.scrollHeight,200),"px"))},R={get value(){return i.replyContent},set value(G){t("update-reply-content",G)}};return{replyTextarea:r,showEmojiPicker:C,showImagePicker:_,isCollapsed:n,insertEmoji:G=>{h(G,r,R,q=>{t("update-reply-content",q)})},insertImage:G=>{T(G,r,R,q=>{t("update-reply-content",q)})},insertSpoiler:()=>{F(r,R,G=>{t("update-reply-content",G)})},handleEmojiMouseEnter:E,handleEmojiMouseLeave:M,handleImageMouseEnter:o,handleImageMouseLeave:u,handleButtonMouseEnter:w,handleButtonMouseLeave:j,closeEmojiPicker:P,closeImagePicker:S,handleImageButtonMouseEnter:b,handleReplyInput:$,toggleCollapsed:()=>{n.value=!n.value},showLinkModal:c,selectedTextForLink:f,insertLink:()=>{x(r,R,G=>{t("update-reply-content",G)})},closeLinkModal:I,insertLinkFromModal:G=>{z(G,r,R,q=>{t("update-reply-content",q)})}}},computed:{canReply(){return this.currentUser?this.currentUser.allow_comments===1:!0},getReplyPlaceholder(){return this.currentUser?this.currentUser.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç..."},formattedContent(){const{formatContent:i}=Cn();return i(this.comment.content)}}},As={class:"comment-thread"},xs={key:0,class:"reply-form"},Us={class:"textarea-container"},js=["value","placeholder","disabled"],Ns={class:"reply-footer"},Bs={class:"reply-actions"},Hs=["disabled"],Ds={class:"character-counter-container"},$s=["disabled"],Os={key:1,class:"replies-container"},Vs=["title"],Fs={class:"replies-count"},qs=["title"],Ks={key:0,class:"replies-content"};function zs(i,t,r,n,C,_){const c=Le("CommentItem"),f=Le("EmojiPicker"),E=Le("ImagePicker"),M=Le("LinkModal"),o=Le("CommentThread",!0);return a(),d("div",As,[re(c,{comment:r.comment,"current-user":r.currentUser,"editing-comment-id":r.editingCommentId,onReply:t[0]||(t[0]=u=>i.$emit("reply",u)),onStartEdit:t[1]||(t[1]=u=>i.$emit("start-edit",u)),onCancelEdit:t[2]||(t[2]=u=>i.$emit("cancel-edit")),onEdit:t[3]||(t[3]=(u,w)=>i.$emit("edit",u,w)),onDelete:t[4]||(t[4]=u=>i.$emit("delete",u)),onRate:t[5]||(t[5]=(u,w)=>i.$emit("rate",u,w))},null,8,["comment","current-user","editing-comment-id"]),r.replyTo&&r.replyTo.id===r.comment.id?(a(),d("div",xs,[e("div",Us,[e("textarea",{ref:"replyTextarea",class:"comment-textarea",value:r.replyContent,placeholder:_.getReplyPlaceholder,disabled:r.currentUser&&r.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:t[6]||(t[6]=(...u)=>n.handleReplyInput&&n.handleReplyInput(...u)),onKeydown:t[7]||(t[7]=u=>i.$emit("reply-keydown",u))},null,40,js)]),e("div",Ns,[e("div",Bs,[e("button",{class:"cancel-reply",onClick:t[8]||(t[8]=u=>i.$emit("cancel-reply"))},"–û—Ç–º–µ–Ω–∞"),e("button",{class:"submit-button",disabled:!r.replyContent.trim()||r.replyContent.length>1500||r.currentUser&&r.currentUser.allow_comments!==1,onClick:t[9]||(t[9]=u=>i.$emit("submit-reply"))}," –û—Ç–≤–µ—Ç–∏—Ç—å ",8,Hs)]),e("div",Ds,[e("div",{class:L(["character-counter-inline",{"near-limit":r.replyContent.length>1400,"at-limit":r.replyContent.length>=1500}])},p(r.replyContent.length)+"/1500 ",3),e("button",{type:"button",class:L(["emoji-button-inline",{active:n.showEmojiPicker}]),onMouseenter:t[10]||(t[10]=(...u)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...u)),onMouseleave:t[11]||(t[11]=(...u)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...u))}," üòä ",34),e("button",{type:"button",class:L(["emoji-button-inline",{active:n.showImagePicker}]),onMouseenter:t[12]||(t[12]=(...u)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...u)),onMouseleave:t[13]||(t[13]=(...u)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...u))},t[29]||(t[29]=[ct('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-6c0fc347><g id="logo" data-v-6c0fc347><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-6c0fc347></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-6c0fc347></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-6c0fc347></path></g></svg>',1)]),34),e("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:r.currentUser&&r.currentUser.allow_comments!==1,onClick:t[14]||(t[14]=(...u)=>n.insertSpoiler&&n.insertSpoiler(...u)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},t[30]||(t[30]=[e("i",{class:"fas fa-eye-slash"},null,-1)]),8,$s),e("button",{type:"button",class:"emoji-button-inline link-button",onClick:t[15]||(t[15]=(...u)=>n.insertLink&&n.insertLink(...u)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},t[31]||(t[31]=[e("i",{class:"fas fa-link"},null,-1)])),re(f,{"is-visible":n.showEmojiPicker,onEmojiSelected:n.insertEmoji,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),re(E,{"is-visible":n.showImagePicker,"current-user":r.currentUser,onImageSelected:n.insertImage,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:t[16]||(t[16]=()=>i.$router.push("/login"))},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose"]),re(M,{"is-visible":n.showLinkModal,"selected-text":n.selectedTextForLink,onClose:n.closeLinkModal,onSubmit:n.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):y("",!0),r.comment.replies&&r.comment.replies.length>0?(a(),d("div",Os,[e("button",{class:"collapse-toggle",title:n.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:t[17]||(t[17]=(...u)=>n.toggleCollapsed&&n.toggleCollapsed(...u))},[e("span",{class:L(["collapse-icon",{expanded:!n.isCollapsed}])},t[32]||(t[32]=[e("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},[e("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1)]),2),e("span",Fs,p(r.comment.replies.length)+" "+p(r.comment.replies.length===1?"–æ—Ç–≤–µ—Ç":"–æ—Ç–≤–µ—Ç–æ–≤"),1)],8,Vs),e("div",{class:"vertical-line-clickable",title:n.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:t[18]||(t[18]=(...u)=>n.toggleCollapsed&&n.toggleCollapsed(...u))},[e("div",{class:L(["vertical-line-visual",{collapsed:n.isCollapsed}])},null,2)],8,qs),n.isCollapsed?y("",!0):(a(),d("div",Ks,[(a(!0),d(de,null,Ie(r.comment.replies,u=>(a(),qe(o,{key:u.id,comment:u,"current-user":r.currentUser,"reply-to":r.replyTo,"reply-content":r.replyContent,"editing-comment-id":r.editingCommentId,onReply:t[19]||(t[19]=w=>i.$emit("reply",w)),onStartEdit:t[20]||(t[20]=w=>i.$emit("start-edit",w)),onCancelEdit:t[21]||(t[21]=w=>i.$emit("cancel-edit")),onEdit:t[22]||(t[22]=(w,b)=>i.$emit("edit",w,b)),onDelete:t[23]||(t[23]=w=>i.$emit("delete",w)),onRate:t[24]||(t[24]=(w,b)=>i.$emit("rate",w,b)),onSubmitReply:t[25]||(t[25]=w=>i.$emit("submit-reply")),onCancelReply:t[26]||(t[26]=w=>i.$emit("cancel-reply")),onUpdateReplyContent:t[27]||(t[27]=w=>i.$emit("update-reply-content",w)),onReplyKeydown:t[28]||(t[28]=w=>i.$emit("reply-keydown",w))},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id"]))),128))]))])):y("",!0)])}const Ws=Ve(Ss,[["render",zs],["__scopeId","data-v-6c0fc347"]]),Gs={name:"Comments",components:{CommentThread:Ws,Notification:Mt,EmojiPicker:Pt,ImagePicker:St,LinkModal:At},props:{movieId:{type:[String,Number],required:!0}},setup(i){const t=Tt(),r=bt(),n=ht(),C=v([]),_=v(""),c=v(null),f=v(""),E=v(null),M=v(t.user),o=v(null),u=v(null),w=v(n.isAutoShowComments),b=v(!1),j=v(3),P=v(3),{showEmojiPicker:S,showImagePicker:I,showLinkModal:h,selectedTextForLink:T,handleEmojiMouseEnter:x,handleEmojiMouseLeave:z,handleImageMouseEnter:F,handleImageMouseLeave:$,handleButtonMouseEnter:R,handleImageButtonMouseEnter:we,handleButtonMouseLeave:he,closeEmojiPicker:ye,closeImagePicker:je,closeLinkModal:H,insertEmojiUniversal:ee,insertImageUniversal:G,insertLinkUniversal:q,insertLinkFromModalUniversal:oe,insertSpoilerUniversal:pe,autoResize:ie}=xt(),fe=D(()=>{const N=(W=null)=>C.value.filter(K=>K.parent_id===W).sort((K,m)=>K.id-m.id).map(K=>({...K,replies:N(K.id)})).filter(K=>!K.is_deleted||K.replies&&K.replies.length>0);return N()}),_e=D(()=>{const N=W=>W.reduce((K,m)=>K+1+N(m.replies||[]),0);return N(fe.value)}),ge=D(()=>fe.value.slice(0,P.value)),Re=D(()=>fe.value.length>P.value),le=D(()=>fe.value.length-P.value),Ee=()=>{P.value+=j.value},ce=async()=>{try{const N=await Sn(i.movieId);C.value=N}catch(N){console.error("Failed to load comments:",N),o.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.")}},Ue=async()=>{if(b.value)return;if(!t.token){o.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:be});return}if(M.value&&M.value.allow_comments!==1){o.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!_.value.replace(/\[spoiler\]\s*\[\/spoiler\]/g,"").replace(/\[img\]\s*\[\/img\]/g,"").replace(/\[link=[^\]]+\]\s*\[\/link\]/g,"").trim()){o.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º");return}if(_.value.length>1500){o.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await vn(i.movieId,_.value.trim()),_.value="",await ce(),w.value=!0,Te(()=>{u.value&&(u.value.focus(),u.value.style.height="auto"),setTimeout(()=>{const W=document.querySelectorAll(".comment-item[data-comment-id]");if(W.length>0){const K=Array.from(W).map(m=>parseInt(m.getAttribute("data-comment-id"))).filter(m=>!isNaN(m));if(K.length>0){const m=Math.max(...K),s=document.querySelector('[data-comment-id="'.concat(m,'"]'));s&&s.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}},300)})}catch(W){console.error("Failed to create comment:",W),o.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},Ce=N=>{if(!t.token){o.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:be});return}E.value=null,c.value=N,f.value="",Te(()=>{const W=document.querySelector(".reply-form");W&&W.scrollIntoView({behavior:"smooth",block:"center"})})},Pe=async()=>{if(!t.token){o.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:be});return}if(M.value&&M.value.allow_comments!==1){o.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!(!f.value.trim()||!c.value)){if(f.value.length>1500){o.value.showNotification("–û—Ç–≤–µ—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await vn(i.movieId,f.value.trim(),c.value.id);const N=c.value.id;await ce(),f.value="",c.value=null,Te(()=>{setTimeout(()=>{const W=document.querySelector('[data-comment-id="'.concat(N,'"]'));if(W){const K=W.querySelector(".replies-content");if(K){const m=K.querySelectorAll(".comment-item[data-comment-id]");if(m.length>0){const s=Array.from(m).map(O=>parseInt(O.getAttribute("data-comment-id"))).filter(O=>!isNaN(O));if(s.length>0){const O=Math.max(...s),J=document.querySelector('[data-comment-id="'.concat(O,'"]'));J&&J.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}}}},300)})}catch(N){console.error("Error submitting reply:",N),o.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}}},et=async(N,W)=>{if(!t.token){o.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:be});return}if(M.value&&M.value.allow_comments!==1){o.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(W.length>1500){o.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await Un(N,W.trim()),await ce(),E.value=null}catch(K){console.error("Failed to update comment:",K),o.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},Ge=async N=>{if(!t.token){o.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:be});return}try{await xn(N),await ce()}catch(W){console.error("Failed to delete comment:",W),o.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},tt=async(N,W)=>{if(!t.token){o.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:be});return}try{await An(N,W),await ce()}catch(K){console.error("Failed to rate comment:",K),o.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ü–µ–Ω–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},Me=N=>{b.value||S.value||N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),Ue())},Ne=N=>{N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),Pe())},be=()=>{r.push("/login")},Be=N=>{b.value=!0,ee(N,u,_,W=>{_.value=W}),setTimeout(()=>{b.value=!1},100)},k=N=>{G(N,u,_,W=>{_.value=W})},Q=()=>{pe(u,_,N=>{_.value=N})},He=()=>{q(u,_,N=>{_.value=N})},it=N=>{oe(N,u,_,W=>{_.value=W})},Ke=D(()=>M.value?M.value.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."),ze=D(()=>M.value?M.value.allow_comments===1:!0),De=N=>{c.value=null,f.value="",E.value=N},at=()=>{E.value=null};return st(()=>{ce()}),{comments:C,groupedComments:fe,displayedComments:ge,hasMoreComments:Re,remainingCommentsCount:le,showMoreComments:Ee,newComment:_,replyTo:c,replyContent:f,editingCommentId:E,currentUser:M,notificationRef:o,commentTextarea:u,showComments:w,submitComment:Ue,handleReply:Ce,submitReply:Pe,handleEdit:et,handleDelete:Ge,handleRate:tt,handleCommentKeydown:Me,handleReplyKeydown:Ne,autoResize:ie,totalCommentsCount:_e,getCommentWordForm:Jl,showEmojiPicker:S,showImagePicker:I,showLinkModal:h,selectedTextForLink:T,insertEmoji:Be,insertImage:k,handleEmojiMouseEnter:x,handleEmojiMouseLeave:z,handleImageMouseEnter:F,handleImageMouseLeave:$,closeEmojiPicker:ye,closeImagePicker:je,handleButtonMouseLeave:he,handleButtonMouseEnter:R,handleImageButtonMouseEnter:we,getCommentPlaceholder:Ke,canComment:ze,handleStartEdit:De,handleCancelEdit:at,insertSpoiler:Q,insertLink:He,insertLinkFromModal:it,closeLinkModal:H}}},Ys={class:"comments-section"},Xs={class:"spoiler-content"},Zs={key:1,class:"comments-container"},Qs={class:"comments-header"},Js={class:"textarea-container"},ei=["placeholder","disabled"],ti={class:"comment-footer"},ni={class:"comment-actions"},oi=["disabled"],li={class:"character-counter-container"},si=["disabled"],ii=["disabled"],ai=["disabled"],ri={class:"comments-list"},ui={key:0,class:"show-more-comments"};function di(i,t,r,n,C,_){const c=Le("EmojiPicker"),f=Le("ImagePicker"),E=Le("LinkModal"),M=Le("CommentThread"),o=Le("Notification");return a(),d("div",Ys,[n.showComments?(a(),d("div",Zs,[e("div",Qs,[e("button",{class:"hide-comments-btn",onClick:t[1]||(t[1]=u=>n.showComments=!1)},t[18]||(t[18]=[e("i",{class:"fas fa-eye-slash"},null,-1),ne(" –°–∫—Ä—ã—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ")]))]),e("form",{class:"comment-form",onSubmit:t[11]||(t[11]=Je((...u)=>n.submitComment&&n.submitComment(...u),["prevent"]))},[e("div",Js,[X(e("textarea",{ref:"commentTextarea","onUpdate:modelValue":t[2]||(t[2]=u=>n.newComment=u),class:"comment-textarea",placeholder:n.getCommentPlaceholder,disabled:n.currentUser&&n.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:t[3]||(t[3]=(...u)=>n.autoResize&&n.autoResize(...u)),onKeydown:t[4]||(t[4]=(...u)=>n.handleCommentKeydown&&n.handleCommentKeydown(...u))},null,40,ei),[[lt,n.newComment]])]),e("div",ti,[e("div",ni,[e("button",{class:"submit-button",type:"submit",disabled:!n.newComment.trim()||n.newComment.length>1500||n.currentUser&&n.currentUser.allow_comments!==1}," –û—Ç–ø—Ä–∞–≤–∏—Ç—å ",8,oi)]),e("div",li,[e("div",{class:L(["character-counter-inline",{"near-limit":n.newComment.length>1400,"at-limit":n.newComment.length>=1500}])},p(n.newComment.length)+"/1500 ",3),e("button",{type:"button",class:L(["emoji-button-inline",{active:n.showEmojiPicker}]),disabled:n.currentUser&&n.currentUser.allow_comments!==1,onMouseenter:t[5]||(t[5]=(...u)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...u)),onMouseleave:t[6]||(t[6]=(...u)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...u))}," üòä ",42,si),e("button",{type:"button",class:L(["emoji-button-inline",{active:n.showImagePicker}]),disabled:n.currentUser&&n.currentUser.allow_comments!==1,onMouseenter:t[7]||(t[7]=(...u)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...u)),onMouseleave:t[8]||(t[8]=(...u)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...u))},t[19]||(t[19]=[ct('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-79080d6f><g id="logo" data-v-79080d6f><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-79080d6f></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-79080d6f></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-79080d6f></path></g></svg>',1)]),42,ii),e("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:n.currentUser&&n.currentUser.allow_comments!==1,onClick:t[9]||(t[9]=(...u)=>n.insertSpoiler&&n.insertSpoiler(...u)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},t[20]||(t[20]=[e("i",{class:"fas fa-eye-slash"},null,-1)]),8,ai),e("button",{type:"button",class:"emoji-button-inline link-button",onClick:t[10]||(t[10]=(...u)=>n.insertLink&&n.insertLink(...u)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},t[21]||(t[21]=[e("i",{class:"fas fa-link"},null,-1)])),re(c,{"is-visible":n.showEmojiPicker&&n.canComment,onEmojiSelected:n.insertEmoji,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),re(f,{"is-visible":n.showImagePicker&&n.canComment,"current-user":n.currentUser,onImageSelected:n.insertImage,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:i.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),re(E,{"is-visible":n.showLinkModal,"selected-text":n.selectedTextForLink,onClose:n.closeLinkModal,onSubmit:n.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])],32),e("div",ri,[(a(!0),d(de,null,Ie(n.displayedComments,u=>(a(),qe(M,{key:u.id,comment:u,"current-user":n.currentUser,"reply-to":n.replyTo,"reply-content":n.replyContent,"editing-comment-id":n.editingCommentId,"is-first-comment":!1,onReply:n.handleReply,onStartEdit:n.handleStartEdit,onCancelEdit:n.handleCancelEdit,onEdit:n.handleEdit,onDelete:n.handleDelete,onRate:n.handleRate,onSubmitReply:n.submitReply,onCancelReply:t[12]||(t[12]=w=>n.replyTo=null),onUpdateReplyContent:t[13]||(t[13]=w=>n.replyContent=w),onReplyKeydown:n.handleReplyKeydown},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id","onReply","onStartEdit","onCancelEdit","onEdit","onDelete","onRate","onSubmitReply","onReplyKeydown"]))),128)),n.hasMoreComments?(a(),d("div",ui,[e("button",{class:"show-more-btn",onClick:t[14]||(t[14]=(...u)=>n.showMoreComments&&n.showMoreComments(...u))}," –ü–æ–∫–∞–∑–∞—Ç—å –µ—â–µ "+p(n.remainingCommentsCount)+" "+p(n.getCommentWordForm(n.remainingCommentsCount)),1)])):y("",!0)])])):(a(),d("div",{key:0,class:"spoiler-warning",onClick:t[0]||(t[0]=u=>n.showComments=!0)},[e("div",Xs,[t[15]||(t[15]=e("i",{class:"fas fa-eye-slash"},null,-1)),t[16]||(t[16]=e("h3",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–∫—Ä—ã—Ç—ã",-1)),t[17]||(t[17]=e("p",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä—ã. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å.",-1)),e("div",{class:L(["comments-count",{"no-comments":n.totalCommentsCount===0}])},[n.totalCommentsCount===0?(a(),d(de,{key:0},[ne(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç ")],64)):(a(),d(de,{key:1},[ne(p(n.totalCommentsCount)+" "+p(n.getCommentWordForm(n.totalCommentsCount)),1)],64))],2)])])),re(o,{ref:"notificationRef"},null,512)])}const ci=Ve(Gs,[["render",di],["__scopeId","data-v-79080d6f"]]),vi={class:"movie-info"},mi={class:"content"},fi={key:0,class:"content-card"},gi={class:"movie-skeleton"},ki={class:"movie-skeleton__player"},yi={key:2,class:"content-card"},pi={key:3,class:"content-card"},hi={class:"content-header"},bi=["src"],wi={class:"content-title"},Ci={key:0,class:"ratings-links"},_i={key:1},Ei=["href","title"],Mi={key:2},Li=["href","title"],Ii={key:3},Ti=["href","title"],Ri={key:4},Pi=["href","title"],Si={key:5},Ai=["href"],xi={key:6,class:"rating-links-group"},Ui=["href"],ji=["title"],Ni={key:0,class:"fa-regular fa-face-grin-wink"},Bi={key:1,class:"fas fa-spinner fa-spin"},Hi=["title"],Di={key:1,class:"mobile-list-dropdown"},$i={class:"mobile-list-content"},Oi=["content"],Vi=["content"],Fi={class:"additional-info"},qi={class:"info-content"},Ki={key:0,class:"movie-poster-container desktop-only"},zi=["href"],Wi=["src"],Gi={class:"details-container"},Yi={class:"info-list"},Xi={key:0},Zi={key:1},Qi={key:2},Ji={key:3},ea={key:4},ta={key:5},na={key:6},oa={key:7},la={key:8},sa={key:9,class:"rating-boxes"},ia={key:0,class:"rating-box mpaa"},aa={key:1,class:"rating-box age"},ra={class:"content-info"},ua={key:0,class:"content-description-text"},da={key:3,class:"comments-section"},ca={key:4,class:"staff-section"},va={class:"staff-categories"},ma={key:0,class:"staff-category"},fa={class:"staff-list"},ga=["href","title"],ka=["src","alt"],ya={class:"staff-name"},pa={key:0,class:"staff-role"},ha=["href","title"],ba={key:1,class:"staff-category"},wa={class:"staff-names-container"},Ca={class:"staff-names-list"},_a=["href"],Ea=["href","title"],Ma={key:2,class:"staff-category"},La={class:"staff-names-container"},Ia={class:"staff-names-list"},Ta=["href"],Ra=["href","title"],Pa={key:5,class:"yt-video-container"},Sa={key:6,class:"related-movies"},Aa=["title"],xa={key:7,class:"related-movies"},Ua=["title"],ja={class:"nudity-info-content"},Na={class:"nudity-info-content"},Ba={key:0,class:"acknowledgment-table"},Ha={class:"timings-text"},Da={class:"nudity-info-actions"},$a={key:2,class:"timing-modal"},Oa={class:"timing-modal-content"},Va={class:"timing-modal-header"},Fa={class:"timing-submission-form"},qa={class:"timing-form-actions"},Ka=["disabled"],za={key:0,class:"fas fa-spinner fa-spin"},Wa={key:1},Ga={__name:"MovieInfo",setup(i){const t=v(!0),r=ht(),n=Tt(),C=jn(),_=pn(),c=bt(),f=v(_.params.kp_id),E=v(""),M=v(null),o=v(null),u=Nn(),w=Kn(),b=v(null),j=w.areTrailersActive,P=v(null),S=v(!1),I=v(!1),h=v(10),T=v(null),x=v(!1),z=v({}),F=v(null),$=v(!1),R=v(void 0),we=v({}),he=v(null),ye=D(()=>{var m;return(m=o.value)!=null&&m.nudity_timings?o.value.nudity_timings!=="NO HORNY":!1}),je=D(()=>{var m;return(m=o.value)!=null&&m.nudity_timings?o.value.nudity_timings==="NO HORNY":!1}),H=D(()=>{var m,s,O,J,ve,ke,Se,Ae,xe,ae;return((s=(m=o.value)==null?void 0:m.lists)==null?void 0:s.isFavorite)||((J=(O=o.value)==null?void 0:O.lists)==null?void 0:J.isWatching)||((ke=(ve=o.value)==null?void 0:ve.lists)==null?void 0:ke.isLater)||((Ae=(Se=o.value)==null?void 0:Se.lists)==null?void 0:Ae.isCompleted)||((ae=(xe=o.value)==null?void 0:xe.lists)==null?void 0:ae.isAbandoned)}),ee=D(()=>r.isCommentsEnabled),G=()=>{if(o.value){const m=o.value.name_ru||o.value.name_en||o.value.name_original||"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å–º–µ";document.title=m}},q=m=>m?m.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",oe=m=>(m||[]).map(s=>({kp_id:s.film_id,poster:s.poster_url_preview||s.poster_url,title:s.name_ru||s.name_en||s.name_original})),pe=m=>{if(typeof m!="number")return;const s=Math.floor(m/60),O=m%60;return"".concat(s," —á. ").concat(O," –º–∏–Ω.")},ie=v(!1),fe=v({top:"0px",left:"0px"}),_e=m=>{ie.value=!0,fe.value={top:"".concat(m.pageY+10,"px"),left:"".concat(m.pageX-70,"px")}},ge=async()=>{try{const m=[o.value.name_ru||o.value.name_en||o.value.name_original,...o.value.year?[o.value.year]:[],...o.value.film_length?[pe(o.value.film_length)]:[]];await navigator.clipboard.writeText(m.join(", ")),b.value.showNotification("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ")}catch(m){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",m)}},Re=async(m=!0)=>{var s,O,J,ve,ke,Se,Ae,xe;try{let ae;if(f.value.startsWith("shiki")?ae=await Hn(f.value):ae=await Dn(f.value,n.token),Array.isArray(ae)&&ae.length===0)throw new Error("–î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–∏—Å–∫.");o.value=ae,f.value.startsWith("shiki")?o.value={...o.value,title:o.value.name_ru||o.value.name_en,name_original:o.value.name_en,short_description:o.value.slogan}:o.value={...o.value,title:o.value.name_ru||o.value.name_en||o.value.name_original,kinopoisk_id:f.value},u.setHeaderContent({text:o.value.title,imageUrl:o.value.logo_url}),G();const me={kp_id:f.value,title:((s=o.value)==null?void 0:s.name_ru)||((O=o.value)==null?void 0:O.name_en)||((J=o.value)==null?void 0:J.name_original),poster:((ve=o.value)==null?void 0:ve.poster_url)||((ke=o.value)==null?void 0:ke.cover_url)||((Se=o.value)==null?void 0:Se.screenshots[0]),year:(Ae=o.value)==null?void 0:Ae.year,type:(xe=o.value)==null?void 0:xe.type};if(f.value.startsWith("shiki"))if(o.value.screenshots&&o.value.screenshots.length>0){const $e=Math.floor(Math.random()*o.value.screenshots.length),We=o.value.screenshots[$e];C.updateMoviePoster(We)}else me.poster&&C.updateMoviePoster(me.poster);else me.poster&&C.updateMoviePoster(me.poster);if(D(()=>r.isHistoryAllowed).value&&me.kp_id&&me.title&&m)if(n.token)try{await It(me.kp_id,V.HISTORY)}catch($e){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é:",$e)}else r.addToHistory({...me})}catch(ae){const{message:me,code:Fe}=pt(ae);E.value=me,M.value=Fe,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–ª—å–º–∞—Ö:",ae)}},le=D(()=>{var m,s;return console.log("–¢—Ä–µ–π–ª–µ—Ä—ã:",(m=o.value)==null?void 0:m.videos),(s=o.value)==null?void 0:s.videos}),Ee=D(()=>{var m;return oe((m=o.value)==null?void 0:m.sequels_and_prequels)}),ce=D(()=>{var m;return oe((m=o.value)==null?void 0:m.similars)}),Ue=()=>{var J;const m=((J=document.querySelector(".related-movies"))==null?void 0:J.clientWidth)||0,O=Math.floor(m/160)||10;h.value=Math.max(1,O)},Ce=()=>{Ue()},Pe=m=>{if(m.altKey&&m.keyCode===84&&document.querySelector(".player-container")){const O=document.querySelector(".theater-mode-btn");O&&O.click()}},et=async m=>{if(T.value){T.value=null;return}R.value=void 0,F.value=m.currentTarget;const s=F.value.getBoundingClientRect();z.value={position:"absolute",top:"".concat(s.bottom+window.scrollY+10,"px"),left:"".concat(s.right+window.scrollX,"px"),transform:"translateX(-100%)"},x.value=!0;try{const O=await $n(o.value.imdb_id);T.value=O.nudity_info}catch(O){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö:",O),b.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö")}finally{x.value=!1}},Ge=m=>{var O,J;if(T.value=null,R.value!==void 0){R.value=void 0;return}he.value=m.currentTarget;const s=he.value.getBoundingClientRect();we.value={position:"absolute",top:"".concat(s.bottom+window.scrollY+10,"px"),left:"".concat(s.right+window.scrollX,"px"),transform:"translateX(-100%)"},R.value=((O=o.value)==null?void 0:O.nudity_timings)===null?"":((J=o.value)==null?void 0:J.nudity_timings)||""},tt=m=>{var O,J,ve,ke,Se,Ae,xe,ae,me,Fe,$e,We,nt;return(nt={[V.FAVORITE]:((J=(O=o.value)==null?void 0:O.lists)==null?void 0:J.isFavorite)||!1,[V.HISTORY]:((ke=(ve=o.value)==null?void 0:ve.lists)==null?void 0:ke.isHistory)||!1,[V.LATER]:((Ae=(Se=o.value)==null?void 0:Se.lists)==null?void 0:Ae.isLater)||!1,[V.COMPLETED]:((ae=(xe=o.value)==null?void 0:xe.lists)==null?void 0:ae.isCompleted)||!1,[V.ABANDONED]:((Fe=(me=o.value)==null?void 0:me.lists)==null?void 0:Fe.isAbandoned)||!1,[V.WATCHING]:((We=($e=o.value)==null?void 0:$e.lists)==null?void 0:We.isWatching)||!1}[m])!=null?nt:!1},Me=async m=>{if(!n.token){b.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:()=>c.push("/login")});return}try{const s={[V.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[V.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[V.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[V.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[V.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[V.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};tt(m)?(await bn(f.value,m),b.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(s[m]))):(await It(f.value,m),b.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(s[m]))),await Re(!1),$.value=!1}catch(s){const{message:O,code:J}=pt(s);b.value.showNotification("".concat(O," ").concat(J))}},Ne=m=>{const s=document.querySelector(".mobile-list-dropdown");s&&!s.contains(m.target)&&($.value=!1)},be=m=>{const s=document.querySelector(".nudity-info-popup");s&&!s.contains(m.target)&&F.value&&!F.value.contains(m.target)&&(T.value=null)},Be=m=>{const s=document.querySelector(".nudity-info-popup");s&&!s.contains(m.target)&&he.value&&!he.value.contains(m.target)&&(R.value=void 0)};st(async()=>{await Re(),t.value=!1,document.addEventListener("keydown",Pe),window.addEventListener("resize",Ce),setTimeout(Ue,100),document.addEventListener("click",Ne),document.addEventListener("click",be,!0),document.addEventListener("click",Be,!0)}),Bn(async()=>{u.clearHeaderContent(),document.removeEventListener("keydown",Pe),window.removeEventListener("resize",Ce),document.removeEventListener("click",Ne),document.removeEventListener("click",be,!0),document.removeEventListener("click",Be,!0)}),Oe(()=>_.params.kp_id,async m=>{m&&m!==f.value&&(u.clearHeaderContent(),f.value=m,P.value=null,await Re(),t.value=!1)},{immediate:!0}),Oe(o,()=>{G()},{deep:!0}),Oe(T,m=>{m?document.addEventListener("click",be,!0):document.removeEventListener("click",be,!0)},{deep:!0}),Oe(R,m=>{m?document.addEventListener("click",Be,!0):document.removeEventListener("click",Be,!0)},{deep:!0});const k=m=>{var s,O;return((O=(s=o.value)==null?void 0:s.staff)==null?void 0:O.filter(J=>J.profession_key===m))||[]},Q=async()=>{try{await navigator.clipboard.writeText(T.value),b.value.showNotification("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω")}catch(m){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",m),b.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞")}finally{T.value=null}},He=async()=>{if(R.value)try{await navigator.clipboard.writeText(R.value),b.value.showNotification("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω")}catch(m){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",m),b.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞")}finally{R.value=void 0}},it=()=>{const m=encodeURIComponent(T.value);window.open("https://translate.google.com/?sl=en&tl=ru&text=".concat(m),"_blank"),T.value=null},Ke=v(""),ze=v(""),De=v(!1),at=D(()=>Ke.value.trim()&&ze.value.trim()),N=async()=>{if(!(!at.value||De.value))try{De.value=!0,await On(f.value,Ke.value.trim(),ze.value),b.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é, —Å–ø–∞—Å–∏–±–æ!"),ze.value="",Ke.value="",K.value=!1}catch(m){const{message:s}=pt(m);b.value.showNotification(s,5e3)}finally{De.value=!1}},W=()=>{b.value.showNotification("TODO —Å–ø–∏—Å–æ–∫ —Ç–æ–ø–∞ –∞–≤—Ç–æ—Ä–æ–≤ —Ç–∞–π–º–∏–Ω–≥–æ–≤")},K=v(!1);return(m,s)=>{var O,J,ve,ke,Se,Ae,xe,ae,me,Fe,$e,We,nt,wt,Ct,ot,_t,Et;return a(),d(de,null,[e("div",vi,[e("div",mi,[(t.value||!o.value)&&!E.value?(a(),d("div",fi,[e("div",gi,[s[16]||(s[16]=ct('<div class="movie-skeleton__header" data-v-462329e6><div class="movie-skeleton__title" data-v-462329e6></div></div><div class="movie-skeleton__ratings" data-v-462329e6><div class="movie-skeleton__rating-item" data-v-462329e6></div><div class="movie-skeleton__rating-item" data-v-462329e6></div><div class="movie-skeleton__rating-item" data-v-462329e6></div></div>',2)),e("div",ki,[re(wn)]),s[17]||(s[17]=ct('<div class="movie-skeleton__additional-info" data-v-462329e6><div class="movie-skeleton__section-title" data-v-462329e6></div><div class="movie-skeleton__info-list" data-v-462329e6><div class="movie-skeleton__info-item" data-v-462329e6></div><div class="movie-skeleton__info-item" data-v-462329e6></div><div class="movie-skeleton__info-item" data-v-462329e6></div><div class="movie-skeleton__info-item" data-v-462329e6></div><div class="movie-skeleton__info-item" data-v-462329e6></div></div></div><div class="movie-skeleton__description" data-v-462329e6><div class="movie-skeleton__description-line" data-v-462329e6></div><div class="movie-skeleton__description-line" data-v-462329e6></div><div class="movie-skeleton__description-line" data-v-462329e6></div><div class="movie-skeleton__description-line" data-v-462329e6></div></div>',2))])])):y("",!0),E.value?(a(),qe(hn,{key:1,message:E.value,code:M.value},null,8,["message","code"])):y("",!0),E.value?(a(),d("div",yi,[(a(),qe(yn,{key:f.value,"kp-id":f.value,"movie-info":o.value,"onUpdate:movieInfo":Re},null,8,["kp-id","movie-info"]))])):y("",!0),o.value&&!t.value?(a(),d("div",pi,[e("div",hi,[o.value.logo_url?(a(),d("div",{key:0,class:"content-logo",onMousemove:_e,onMouseleave:s[0]||(s[0]=A=>ie.value=!1),onClick:ge},[e("img",{src:o.value.logo_url,alt:"–õ–æ–≥–æ—Ç–∏–ø —Ñ–∏–ª—å–º–∞",class:"content-logo"},null,8,bi)],32)):(a(),d("div",{key:1,onMousemove:_e,onMouseleave:s[1]||(s[1]=A=>ie.value=!1),onClick:ge},[e("h1",wi,p(o.value.title),1)],32)),X(e("div",{class:"title-copy-tooltip",style:dt(fe.value)}," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ",4),[[se,ie.value]])]),o.value.kinopoisk_id||o.value.title||o.value.imdb_id||o.value.rating_imdb||o.value.shikimori_id?(a(),d("div",Ci,[o.value.kinopoisk_id?(a(),qe(hl,{key:o.value.kinopoisk_id,"kp-id":o.value.kinopoisk_id,"show-dash":!0},null,8,["kp-id"])):y("",!0),o.value.kinopoisk_id?(a(),d("div",_i,[e("a",{href:"https://www.kinopoisk.ru/film/".concat(o.value.kinopoisk_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:o.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(q(o.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[s[18]||(s[18]=e("img",{src:fn,alt:"–ö–ü",class:"rating-logo"},null,-1)),e("span",{class:L(["rating-value",Z(yt)(o.value.rating_kinopoisk)])},p(o.value.rating_kinopoisk?o.value.rating_kinopoisk:"‚Äî"),3),s[19]||(s[19]=e("img",{src:rt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Ei)])):y("",!0),!o.value.kinopoisk_id&&o.value.title?(a(),d("div",Mi,[e("a",{href:"https://www.kinopoisk.ru/index.php?kp_query=".concat(encodeURIComponent(o.value.title+(o.value.year?" "+o.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:o.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(q(o.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[s[20]||(s[20]=e("img",{src:fn,alt:"–ö–ü",class:"rating-logo"},null,-1)),e("span",{class:L(["rating-value",Z(yt)(o.value.rating_kinopoisk)])},p(o.value.rating_kinopoisk?o.value.rating_kinopoisk:"‚Äî"),3),s[21]||(s[21]=e("img",{src:rt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Li)])):y("",!0),o.value.imdb_id?(a(),d("div",Ii,[e("a",{href:"https://www.imdb.com/title/".concat(o.value.imdb_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:o.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(q(o.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[s[22]||(s[22]=e("img",{src:gn,alt:"IMDb",class:"rating-logo"},null,-1)),e("span",{class:L(["rating-value",Z(yt)(o.value.rating_imdb)])},p(o.value.rating_imdb?o.value.rating_imdb:"‚Äî"),3),s[23]||(s[23]=e("img",{src:rt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Ti)])):y("",!0),!o.value.imdb_id&&o.value.title?(a(),d("div",Ri,[e("a",{href:"https://www.imdb.com/find/?q=".concat(encodeURIComponent(o.value.title+(o.value.year?" "+o.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:o.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(q(o.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[s[24]||(s[24]=e("img",{src:gn,alt:"IMDb",class:"rating-logo"},null,-1)),e("span",{class:L(["rating-value",Z(yt)(o.value.rating_imdb)])},p(o.value.rating_imdb?o.value.rating_imdb:"‚Äî"),3),s[25]||(s[25]=e("img",{src:rt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Pi)])):y("",!0),o.value.shikimori_id?(a(),d("div",Si,[e("a",{href:"https://shikimori.one/animes/".concat(o.value.shikimori_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},s[26]||(s[26]=[e("img",{src:Gn,alt:"Shiki",class:"rating-logo"},null,-1),e("img",{src:rt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,Ai)])):y("",!0),o.value.imdb_id?(a(),d("div",xi,[e("a",{href:"https://www.imdb.com/title/".concat(o.value.imdb_id,"/parentalguide"),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},s[27]||(s[27]=[e("span",{class:"desktop-text"},"Parents Guide",-1),e("span",{class:"mobile-text"},"PG",-1),e("img",{src:rt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,Ui),e("button",{class:"nudity-info-btn",onClick:s[2]||(s[2]=A=>et(A)),title:T.value?"–°–∫—Ä—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é":"–ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ü–µ–Ω–∞—Ö(Sex & Nudity)"},[x.value?(a(),d("i",Bi)):(a(),d("i",Ni))],8,ji)])):y("",!0),e("button",{class:"nudity-info-btn",onClick:s[3]||(s[3]=A=>Ge(A)),title:R.value!==void 0?"–°–∫—Ä—ã—Ç—å —Ç–∞–π–º–∏–Ω–≥–∏":"–ü–æ–∫–∞–∑–∞—Ç—å —Ç–∞–π–º–∏–Ω–≥–∏ —Å—Ü–µ–Ω(–¥–ª—è —Ç–≤–∏—á–∞)"},[e("i",{class:L(["fa-regular fa-clock",{"text-red":ye.value,"text-green":je.value}])},null,2)],8,Hi)])):y("",!0),(a(),qe(yn,{key:f.value,"kp-id":f.value,"movie-info":o.value,"onUpdate:movieInfo":Re},null,8,["kp-id","movie-info"])),Z(r).isMobile?(a(),d("div",Di,[e("button",{class:L(["mobile-list-toggle",{}]),onClick:s[4]||(s[4]=A=>$.value=!$.value)},[e("span",{class:L(["material-icons",{active:H.value}])},p(H.value?"bookmark_added":"bookmark_border"),3),s[28]||(s[28]=e("span",{class:"button-label"},"–î–æ–±–∞–≤–∏—Ç—å –≤ —Å–ø–∏—Å–æ–∫",-1)),e("span",{class:L(["material-icons dropdown-arrow",{expanded:$.value}])},"expand_more",2)]),X(e("div",$i,[e("button",{class:L(["mobile-list-btn",{}]),onClick:s[5]||(s[5]=A=>Me(Z(V).FAVORITE))},[e("span",{class:L(["material-icons",{active:(J=(O=o.value)==null?void 0:O.lists)==null?void 0:J.isFavorite}])},p((ke=(ve=o.value)==null?void 0:ve.lists)!=null&&ke.isFavorite?"favorite":"favorite_border"),3),s[29]||(s[29]=e("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))]),e("button",{class:L(["mobile-list-btn",{}]),onClick:s[6]||(s[6]=A=>Me(Z(V).WATCHING))},[e("span",{class:L(["material-icons",{active:(Ae=(Se=o.value)==null?void 0:Se.lists)==null?void 0:Ae.isWatching}])},p((ae=(xe=o.value)==null?void 0:xe.lists)!=null&&ae.isWatching?"visibility":"visibility_off"),3),s[30]||(s[30]=e("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))]),e("button",{class:L(["mobile-list-btn",{}]),onClick:s[7]||(s[7]=A=>Me(Z(V).LATER))},[e("span",{class:L(["material-icons",{active:(Fe=(me=o.value)==null?void 0:me.lists)==null?void 0:Fe.isLater}])},"watch_later",2),s[31]||(s[31]=e("span",{class:"button-label"},"–ü–æ–∑–∂–µ",-1))]),e("button",{class:L(["mobile-list-btn",{}]),onClick:s[8]||(s[8]=A=>Me(Z(V).COMPLETED))},[e("span",{class:L(["material-icons",{active:(We=($e=o.value)==null?void 0:$e.lists)==null?void 0:We.isCompleted}])},p((wt=(nt=o.value)==null?void 0:nt.lists)!=null&&wt.isCompleted?"check_circle":"check_circle_outline"),3),s[32]||(s[32]=e("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))]),e("button",{class:L(["mobile-list-btn",{}]),onClick:s[9]||(s[9]=A=>Me(Z(V).ABANDONED))},[e("span",{class:L(["material-icons",{active:(ot=(Ct=o.value)==null?void 0:Ct.lists)==null?void 0:ot.isAbandoned}])},"not_interested",2),s[33]||(s[33]=e("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))])],512),[[se,$.value]])])):y("",!0),e("meta",{name:"title-and-year",content:o.value.type==="FILM"&&o.value.year?"".concat(o.value.title," (").concat(o.value.year,")"):o.value.title},null,8,Oi),o.value.name_original?(a(),d("meta",{key:2,name:"original-title",content:o.value.name_original},null,8,Vi)):y("",!0),e("div",Fi,[s[44]||(s[44]=e("h2",{class:"additional-info-title"},"–ü–æ–¥—Ä–æ–±–Ω–µ–µ",-1)),e("div",qi,[o.value.poster_url?(a(),d("div",Ki,[e("a",{href:o.value.poster_url,target:"_blank",rel:"noopener noreferrer"},[e("img",{src:o.value.poster_url,alt:"–ü–æ—Å—Ç–µ—Ä —Ñ–∏–ª—å–º–∞",class:"movie-poster"},null,8,Wi)],8,zi)])):y("",!0),e("div",Gi,[e("ul",Yi,[o.value.type&&Z(mn)[o.value.type]?(a(),d("li",Xi,[s[34]||(s[34]=e("strong",null,"–¢–∏–ø:",-1)),ne(" "+p(Z(mn)[o.value.type]),1)])):y("",!0),o.value.year?(a(),d("li",Zi,[s[35]||(s[35]=e("strong",null,"–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞:",-1)),ne(" "+p(o.value.year),1)])):y("",!0),o.value.title?(a(),d("li",Qi,[s[36]||(s[36]=e("strong",null,"–ù–∞–∑–≤–∞–Ω–∏–µ:",-1)),ne(" "+p(o.value.title),1)])):y("",!0),o.value.name_original?(a(),d("li",Ji,[s[37]||(s[37]=e("strong",null,"–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:",-1)),ne(" "+p(o.value.name_original),1)])):y("",!0),o.value.slogan?(a(),d("li",ea,[s[38]||(s[38]=e("strong",null,"–°–ª–æ–≥–∞–Ω:",-1)),ne(" "+p(o.value.slogan),1)])):y("",!0),o.value.production_companies?(a(),d("li",ta,[s[39]||(s[39]=e("strong",null,"–ü—Ä–æ–¥–∞–∫—à–Ω:",-1)),ne(" "+p(o.value.production_companies),1)])):y("",!0),(_t=o.value.countries)!=null&&_t.length?(a(),d("li",na,[s[40]||(s[40]=e("strong",null,"–°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞:",-1)),ne(" "+p(o.value.countries.map(A=>A.country).join(", ")),1)])):y("",!0),(Et=o.value.genres)!=null&&Et.length?(a(),d("li",oa,[s[41]||(s[41]=e("strong",null,"–ñ–∞–Ω—Ä—ã:",-1)),ne(" "+p(o.value.genres.map(A=>A.genre).join(", ")),1)])):y("",!0),o.value.film_length?(a(),d("li",la,[s[42]||(s[42]=e("strong",null,"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:",-1)),ne(" "+p(pe(o.value.film_length)),1)])):y("",!0),o.value.rating_mpaa||o.value.rating_age_limits?(a(),d("li",sa,[o.value.rating_mpaa?(a(),d("div",ia,[s[43]||(s[43]=e("strong",null,"MPAA",-1)),e("span",null,p(o.value.rating_mpaa.toUpperCase()),1)])):y("",!0),o.value.rating_age_limits?(a(),d("div",aa,[e("strong",null,p(o.value.rating_age_limits.replace("age",""))+"+",1)])):y("",!0)])):y("",!0)]),e("div",ra,[o.value.description?(a(),d("p",ua,p(o.value.description),1)):y("",!0)])])])]),ee.value?(a(),d("div",da,[(a(),qe(ci,{"movie-id":f.value,key:f.value},null,8,["movie-id"]))])):y("",!0),o.value.staff?(a(),d("div",ca,[e("div",va,[k("ACTOR").length?(a(),d("div",ma,[s[45]||(s[45]=e("h3",{class:"additional-info-title"},"–ê–∫—Ç—ë—Ä—ã",-1)),e("div",fa,[(a(!0),d(de,null,Ie(k("ACTOR").slice(0,12),A=>(a(),d("div",{key:A.staff_id,class:"staff-item"},[e("a",{href:"https://www.kinopoisk.ru/name/".concat(A.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-link",title:A.description||""},[e("img",{src:A.poster_url,alt:A.name_ru,class:"staff-photo"},null,8,ka),e("span",ya,p(A.name_ru||A.name_en),1),A.description?(a(),d("span",pa,p(A.description),1)):y("",!0)],8,ga)]))),128)),e("a",{class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(f.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(k("ACTOR").length," –∞–∫—Ç–µ—Ä–æ–≤")}," +"+p(k("ACTOR").length-12),9,ha)])])):y("",!0),k("DIRECTOR").length?(a(),d("div",ba,[s[46]||(s[46]=e("h3",{class:"additional-info-title"},"–†–µ–∂–∏—Å—Å—ë—Ä—ã",-1)),e("div",wa,[e("div",Ca,[(a(!0),d(de,null,Ie(k("DIRECTOR").slice(0,5),A=>(a(),d("a",{key:A.staff_id,href:"https://www.kinopoisk.ru/name/".concat(A.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},p(A.name_ru||A.name_en),9,_a))),128)),k("DIRECTOR").length>5?(a(),d("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(f.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(k("DIRECTOR").length," —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–≤")}," +"+p(k("DIRECTOR").length-5),9,Ea)):y("",!0)])])])):y("",!0),k("PRODUCER").length?(a(),d("div",Ma,[s[47]||(s[47]=e("h3",{class:"additional-info-title"},"–ü—Ä–æ–¥—é—Å–µ—Ä—ã",-1)),e("div",La,[e("div",Ia,[(a(!0),d(de,null,Ie(k("PRODUCER").slice(0,5),A=>(a(),d("a",{key:A.staff_id,href:"https://www.kinopoisk.ru/name/".concat(A.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},p(A.name_ru||A.name_en),9,Ta))),128)),k("PRODUCER").length>5?(a(),d("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(f.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(k("PRODUCER").length," –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤")}," +"+p(k("PRODUCER").length-5),9,Ra)):y("",!0)])])])):y("",!0)])])):y("",!0),le.value.length&&Z(j)?(a(),d("div",Pa,[re(ul,{videos:le.value,"active-video-index":P.value,onSelect:m.playTrailer},null,8,["videos","active-video-index","onSelect"])])):y("",!0),Ee.value.length?(a(),d("div",Sa,[s[48]||(s[48]=e("h2",null,"–°–∏–∫–≤–µ–ª—ã –∏ –ø—Ä–∏–∫–≤–µ–ª—ã",-1)),re(Z(kn),{"movies-list":S.value?Ee.value:Ee.value.slice(0,h.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),Ee.value.length>h.value?(a(),d("a",{key:0,class:"expand-circle-button",onClick:s[10]||(s[10]=A=>S.value=!S.value),title:"".concat(S.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(Ee.value.length,")")},p(S.value?"‚àí":"+".concat(Ee.value.length-h.value)),9,Aa)):y("",!0)])):y("",!0),ce.value.length?(a(),d("div",xa,[s[49]||(s[49]=e("h2",null,"–ü–æ—Ö–æ–∂–∏–µ",-1)),re(Z(kn),{"movies-list":I.value?ce.value:ce.value.slice(0,h.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),ce.value.length>h.value?(a(),d("a",{key:0,class:"expand-circle-button",onClick:s[11]||(s[11]=A=>I.value=!I.value),title:"".concat(I.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(ce.value.length,")")},p(I.value?"‚àí":"+".concat(ce.value.length-h.value)),9,Ua)):y("",!0)])):y("",!0)])):y("",!0)])]),re(Mt,{ref_key:"notificationRef",ref:b},null,512),T.value?(a(),d("div",{key:0,style:dt(z.value),class:"nudity-info-popup"},[e("div",ja,p(T.value),1),e("div",{class:"nudity-info-actions"},[e("button",{class:"nudity-info-button",onClick:Q},s[50]||(s[50]=[e("i",{class:"fas fa-copy"},null,-1),e("span",null,"Copy",-1)])),e("button",{class:"nudity-info-button",onClick:it},s[51]||(s[51]=[e("i",{class:"fas fa-language"},null,-1),e("span",null,"Translate",-1)]))])],4)):y("",!0),R.value!==void 0?(a(),d("div",{key:1,style:dt(we.value),class:"nudity-info-popup"},[e("div",Na,[R.value?(a(),d("div",Ba,s[52]||(s[52]=[ct('<div class="acknowledgment-header" data-v-462329e6><i class="fa-solid fa-heart" data-v-462329e6></i><span data-v-462329e6>–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏</span></div><div class="acknowledgment-content" data-v-462329e6><a href="https://www.twitch.tv/tanyabelkova" target="_blank" rel="noopener noreferrer" class="twitch-link" data-v-462329e6><i class="fa-brands fa-twitch" data-v-462329e6></i><span data-v-462329e6>TanyaBelkova</span></a><div class="acknowledgment-text" data-v-462329e6>–ó–∞ –≤–µ–¥–µ–Ω–∏–µ —Ç–∞–±–ª–∏—á–∫–∏ —Ç–∞–π–º–∏–Ω–≥–æ–≤</div></div>',2)]))):y("",!0),e("div",{class:"acknowledgment-table clickable-acknowledgment",onClick:W},s[53]||(s[53]=[e("div",{class:"acknowledgment-header"},[e("i",{class:"fa-solid fa-users"}),e("span",null,"–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏ —Å–æ–æ–±—â–µ—Å—Ç–≤—É")],-1),e("div",{class:"acknowledgment-content"},[e("div",{class:"acknowledgment-text"},"–ó–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–∏–Ω–≥–æ–≤")],-1)])),e("div",{class:L(["timings-content",{"no-border":!R.value}])},[e("div",Ha,p(R.value||"–ó–∞–ø–∏—Å–µ–π –æ —Ç–∞–π–º–∏–Ω–≥–∞—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω–æ"),1),e("div",Da,[R.value?(a(),d("button",{key:0,class:"nudity-info-button",onClick:He},s[54]||(s[54]=[e("i",{class:"fas fa-copy"},null,-1),e("span",null,"Copy",-1)]))):y("",!0),e("button",{class:"nudity-info-button",onClick:s[12]||(s[12]=A=>K.value=!0)},s[55]||(s[55]=[e("i",{class:"fas fa-plus"},null,-1),e("span",null,"Add Timing",-1)]))])],2)])],4)):y("",!0),K.value?(a(),d("div",$a,[e("div",Oa,[e("div",Va,[s[57]||(s[57]=e("h3",null,"–î–æ–±–∞–≤–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥",-1)),e("button",{class:"close-modal-btn",onClick:s[13]||(s[13]=A=>K.value=!1)},s[56]||(s[56]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",Fa,[X(e("input",{"onUpdate:modelValue":s[14]||(s[14]=A=>Ke.value=A),placeholder:"–í–∞—à –Ω–∏–∫",class:"timing-input",maxlength:"50"},null,512),[[lt,Ke.value]]),X(e("textarea",{"onUpdate:modelValue":s[15]||(s[15]=A=>ze.value=A),placeholder:"–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–∞–π–º–∏–Ω–≥...",class:"timing-textarea"},null,512),[[lt,ze.value]]),e("div",qa,[e("button",{class:"submit-timing-btn",onClick:N,disabled:!at.value||De.value},[De.value?(a(),d("i",za)):(a(),d("span",Wa,"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é"))],8,Ka)])])])])):y("",!0)],64)}}},nr=Ve(Ga,[["__scopeId","data-v-462329e6"]]);export{nr as default};
