import{_ as Me,r as b,c as H,b as d,d as r,e as t,s as Q,t as h,K as te,g as M,L as ge,n as x,q as Oe,u as et,i as ut,N as kn,z as nt,l as Ae,o as qe,O as dt,x as Re,E as yn,f as oe,P as tt,m as F,Q as G,y as X,U as q,R as Mn,D as rt,S as ke,V as _n,W as hn,X as En,Y as un,Z as Ln,k as In,v as Xe,$ as Rn,a0 as ye,a1 as Je,a2 as Tn,a3 as Pn,a4 as Sn,a5 as An,a6 as dn,a7 as Un,a8 as jn,a as xn,a9 as cn,aa as $n,ab as Bn,ac as Hn}from"./index-Bn6HEcyu.js";import{S as bn,_ as Dn,a as mn,b as vn,M as fn}from"./MovieList-DBTTwChR.js";import{N as ot}from"./ToastMessage-CiN_11Ev.js";import{u as Nn,S as On,a as Vn}from"./trailer-BWHNcUze.js";const We="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVR4nO2ZQUoDMRSGR7eewHoFsVS0HkUUXNXqASqK2EURBPFIVRe6c+UN1CvUXWvbT4KvMAwzNnnJdCrmg1BKad7/v7y0b5IkiUQiCwGoAx3gQjEugZ0qxTeAIX6MKjMBnBOGS62AVWAPOHVYdlMu9YArYOhphLeBT+ALmOKGEd2QubaAK+B2zngFxt4GgDXgGZjgR8ch5oEkCi8DkvlnRcYLV0Apfqw10M7JvPkV6AN3FmVwK+WyZRnvMEe8ef/ibECyb2o+zRuwnpQAxeLNivQ0BvYyE46qEJ/8fK4ycJKp/X4V4n0MdDNfukkqEO9jwP1LDgD7BeKPgmgp04CL+KUz4Cp+qQxoxC+NAdsNm4c0hWkukkUa8BGfegiadbFDq3/2UAZ8xc+QVvzMtqcKYkBaZ5/MN5xEl2DgLGDZ1KswsC09FPJqXTZoNm5oA6kyMGI2FxqfkluJ0uMTDfhBXAHiHvCCWEL8/RLqlv1MPCf+TSZ+13WC7KnEfWlqcwAeU7GNjnbiQsG5UC1ZAEAt1UMhOpquk6zknMy9l20C2AA+MnEHRo9msuOCs9EH4Fp5TVQ0rqVs0plH4re02Qh1Oq1lCjypsp+5H3gKcD/gykTirqnFZ/ZDy+OGxpapzD+QePrM/2KkKfcGPcv7AdvRkz23G1x4JPIP+AY3r/ywUk/2JAAAAABJRU5ErkJggg==",Fn="/reyohoho/assets/icon-shikimori-DGvXK9Jc.svg",at=o=>{const e=document.createElement("div");e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgba(0, 0, 0, 0.8)",e.style.color="white",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e.style.fontSize="2rem",e.style.zIndex="99000",e.textContent=o,document.body.appendChild(e),setTimeout(()=>{document.body.removeChild(e)},2e3)},Kn={key:0},qn={key:1},Wn={class:"players-list"},zn=["onClick"],Gn={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Yn={key:0},Zn={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Qn={key:1},Xn={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Jn=["onClick"],eo={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},to={__name:"PlayerModal",props:{players:{type:Array,required:!0},selectedPlayer:{type:Object,default:null}},emits:["close","select"],setup(o,{emit:e}){const a=o,n=e,y=b(null),m=H(()=>a.players.filter(p=>!g(p)&&!s(p))),u=H(()=>a.players.some(p=>g(p))),v=H(()=>a.players.some(p=>s(p))),g=p=>p.key.toUpperCase().includes("HDREZKA"),s=p=>p.key.toUpperCase().includes("KODIK"),c=p=>p.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"").replace(/KODIK>/,"").trim(),l=p=>{n("select",p),n("close")},k=p=>a.selectedPlayer&&a.selectedPlayer.key===p.key,w=p=>a.selectedPlayer?p==="hdrezka"&&g(a.selectedPlayer)||p==="kodik"&&s(a.selectedPlayer):!1,L=p=>{y.value=p},T=()=>{y.value=null},R=p=>{let A=a.players.filter(U=>p==="hdrezka"&&g(U)||p==="kodik"&&s(U));return p==="kodik"?A.sort((U,O)=>c(U.translate).localeCompare(c(O.translate))):A},_=p=>R(p).some(A=>A.warning);return(p,A)=>(r(),d("div",{class:"modal",onClick:A[4]||(A[4]=Oe(U=>p.$emit("close"),["self"]))},[t("div",{class:"modal-content",onClick:A[3]||(A[3]=Oe(()=>{},["stop"]))},[t("button",{class:"close",onClick:A[0]||(A[0]=U=>p.$emit("close"))},"√ó"),y.value?(r(),d("h2",qn,[t("button",{class:"back-btn",onClick:T},"‚Üê –ù–∞–∑–∞–¥"),Q(" "+h(y.value==="hdrezka"?"ReYohoho - HDrezka":"Kodik"),1)])):(r(),d("h2",Kn,"–í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–µ–µ—Ä")),t("ul",Wn,[y.value?(r(!0),d(te,{key:1},ge(R(y.value),U=>(r(),d("li",{key:U.key},[t("button",{class:x(["player-item",{active:k(U)}]),onClick:O=>l(U)},[Q(h(c(U.translate))+" ",1),U.warning?(r(),d("span",eo,"warning")):M("",!0)],10,Jn)]))),128)):(r(),d(te,{key:0},[(r(!0),d(te,null,ge(m.value,U=>(r(),d("li",{key:U.key},[t("button",{class:x(["player-item",{active:k(U)}]),onClick:O=>l(U)},[Q(h(c(U.translate))+" ",1),U.warning?(r(),d("span",Gn,"warning")):M("",!0)],10,zn)]))),128)),u.value?(r(),d("li",Yn,[t("button",{class:x(["group-item",{active:w("hdrezka")}]),onClick:A[1]||(A[1]=U=>L("hdrezka"))},[A[5]||(A[5]=t("span",{class:"material-icons group-icon"},"folder",-1)),A[6]||(A[6]=Q(" ReYohoho - HDrezka ")),_("hdrezka")?(r(),d("span",Zn,"warning")):M("",!0)],2)])):M("",!0),v.value?(r(),d("li",Qn,[t("button",{class:x(["group-item",{active:w("kodik")}]),onClick:A[2]||(A[2]=U=>L("kodik"))},[A[7]||(A[7]=t("span",{class:"material-icons group-icon"},"folder",-1)),A[8]||(A[8]=Q(" Kodik ")),_("kodik")?(r(),d("span",Xn,"warning")):M("",!0)],2)])):M("",!0)],64))])])]))}},no=Me(to,[["__scopeId","data-v-460326ba"]]),oo={class:"players-list"},so=["src"],io={key:1,class:"controls"},lo={class:"main-controls"},ao={class:"material-icons"},ro={class:"list-button-item"},uo={class:"material-icons"},co={class:"list-button-item"},mo={class:"material-icons"},vo={class:"list-button-item"},fo={class:"list-button-item"},go={class:"material-icons"},ko={class:"list-button-item"},yo={class:"material-icons"},ho={class:"tooltip-container","data-tooltip-container":"dimming"},bo={class:"material-icons"},po={class:"tooltip-container","data-tooltip-container":"blur"},Co={class:"tooltip-container","data-tooltip-container":"compressor"},wo={class:"tooltip-container","data-tooltip-container":"mirror"},Mo={class:"tooltip-container","data-tooltip-container":"theater"},_o={class:"material-symbols-outlined"},Eo={class:"custom-tooltip","data-tooltip":"theater"},Lo={class:"tooltip-container","data-tooltip-container":"aspect_ratio"},Io={class:"current-ratio"},Ro=["onClick"],To={key:0,class:"tooltip-container","data-tooltip-container":"app_link"},Po={class:"custom-tooltip","data-tooltip":"app_link"},So={key:1,class:"tooltip-container","data-tooltip-container":"copy_link"},Ao={class:"custom-tooltip","data-tooltip":"copy_link"},Uo={key:0,class:"desktop-list-buttons"},jo={class:"tooltip-container"},xo={class:"material-icons"},$o={class:"custom-tooltip"},Bo={class:"tooltip-container"},Ho={class:"material-icons"},Do={class:"custom-tooltip"},No={class:"tooltip-container"},Oo={class:"custom-tooltip"},Vo={class:"tooltip-container"},Fo={class:"material-icons"},Ko={class:"custom-tooltip"},qo={class:"tooltip-container"},Wo={class:"material-icons"},zo={class:"custom-tooltip"},Go={key:1,class:"mobile-list-buttons"},Yo={class:"tooltip-container"},Zo={class:"material-icons"},Qo={class:"custom-tooltip"},Xo={class:"tooltip-container"},Jo={class:"material-icons"},es={class:"custom-tooltip"},ts={class:"tooltip-container"},ns={class:"custom-tooltip"},os={class:"tooltip-container"},ss={class:"material-icons"},is={class:"custom-tooltip"},ls={class:"tooltip-container"},as={class:"material-icons"},rs={class:"custom-tooltip"},us={__name:"PlayerComponent",props:{kpId:String,movieInfo:{type:Object,default:()=>({})}},emits:["update:selectedPlayer","update:movieInfo"],setup(o,{emit:e}){const a=et(),n=Nn(),y=ut(),m=kn(),u=nt(),v=b(m.params.kp_id),g=o,s=e,c=b([]),l=b(null),k=b(!0),w=b(!1),L=b(!1),T=b(null),R=b(null),_=b(!1),p=b(""),A=b(null),U=b(window.innerHeight*.9),O=H(()=>"".concat(U.value,"px")),N=H(()=>a.isMobile),W=H(()=>!!window.electronAPI),S=b(null),ae=b(!1);let ce=null;const J=b(null),he=b(null),me=b(null),ve=I=>{const i=document.querySelector('[data-tooltip-container="'.concat(I,'"]')),D=document.querySelector('[data-tooltip="'.concat(I,'"]'));if(!i||!D)return;const fe=i.getBoundingClientRect(),Le=D.getBoundingClientRect(),Ie=window.innerHeight;fe.bottom+Le.height>Ie?(D.style.top="auto",D.style.bottom="100%",D.style.marginTop="0",D.style.marginBottom="12px",D.style.transform="translateX(-50%)"):(D.style.top="100%",D.style.bottom="auto",D.style.marginTop="12px",D.style.marginBottom="0",D.style.transform="translateX(-50%)")},C=I=>{S.value=I,ae.value=!1,clearTimeout(ce),ke(()=>{ve(I)})},z=()=>{ae.value||(ce=setTimeout(()=>{S.value=null},300))},_e=()=>{ae.value=!0,clearTimeout(ce)},we=()=>{ae.value=!1,S.value=null},re=H({get:()=>n.aspectRatio,set:I=>n.updateAspectRatio(I)}),ue=H({get:()=>n.isCentered,set:I=>n.updateCentering(I)}),ee=H(()=>{var I,i,D,fe,Le,Ie,Be,He,De,Ne;return((i=(I=g.movieInfo)==null?void 0:I.lists)==null?void 0:i.isFavorite)||((fe=(D=g.movieInfo)==null?void 0:D.lists)==null?void 0:fe.isWatching)||((Ie=(Le=g.movieInfo)==null?void 0:Le.lists)==null?void 0:Ie.isLater)||((He=(Be=g.movieInfo)==null?void 0:Be.lists)==null?void 0:He.isCompleted)||((Ne=(De=g.movieInfo)==null?void 0:De.lists)==null?void 0:Ne.isAbandoned)}),j=H(()=>n.preferredPlayer),f=b(0),Y=I=>I.toUpperCase(),se=()=>{if(w.value||!R.value)return;const[I,i]=re.value.split(":").map(Number);U.value=window.innerHeight*.9,f.value=Math.min(R.value.clientWidth*(i/I),U.value)},B=H(()=>{if(w.value)return{};const[I,i]=re.value.split(":").map(Number),D=U.value*(I/i);return{width:"100%",maxWidth:"".concat(D,"px"),maxHeight:O.value,margin:"0 auto",overflow:"hidden"}}),be=H(()=>{const[I,i]=re.value.split(":").map(Number);return{position:"relative",width:"100%",paddingTop:"".concat(i/I*100,"%")}}),pe=()=>{R.value&&setTimeout(()=>{ke(()=>{R.value.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})},500)},Te=async()=>{try{p.value="",A.value=null;const I=await Mn(g.kpId);if(c.value=Object.entries(I).map(([i,D])=>({key:i.toUpperCase(),...D})),c.value.length>0){if(j.value){const i=Y(j.value),D=c.value.find(fe=>Y(fe.key)===i);l.value=D||c.value[0]}else l.value=c.value[0];s("update:selectedPlayer",l.value)}}catch(I){const{message:i,code:D}=rt(I);p.value=i,A.value=D,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–ª–µ–µ—Ä–æ–≤:",I)}},Ue=()=>{_.value=!0},de=()=>{_.value=!1},le=I=>{var i;if(((i=l.value)==null?void 0:i.key)===I.key){de();return}l.value=I,k.value=!0,n.updatePreferredPlayer(Y(I.key)),s("update:selectedPlayer",I)},je=()=>{W.value?window.electronAPI.sendHotKey("F2"):(at("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},Pe=()=>{W.value?window.electronAPI.sendHotKey("F3"):(at("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},Ce=()=>{W.value?window.electronAPI.sendHotKey("F4"):(at("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},xe=()=>{w.value=!w.value,w.value?(window.addEventListener("mousemove",$e),document.addEventListener("keydown",V),document.body.classList.add("no-scroll")):(window.removeEventListener("mousemove",$e),document.removeEventListener("keydown",V),document.body.classList.remove("no-scroll")),L.value=w.value,ke(()=>pe())},Ve=b(null),$e=()=>{Ve.value=setTimeout(()=>{clearTimeout(Ve.value),L.value=!1},4e3),L.value=!0},Se=H(()=>a.dimmingEnabled),E=()=>{w.value||a.toggleDimming()},V=I=>{(I.key==="Escape"&&w.value||I.altKey&&I.keyCode===84)&&xe()},Ee=I=>{re.value=I,setTimeout(()=>{ue.value&&pe()},310)},st=()=>{const I="reyohoho://#".concat(v.value);try{window.location.href=I}catch(i){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Å—ã–ª–∫–∏:",i)}},it=()=>{const I=window.location.href;navigator.clipboard.writeText(I).then(()=>{}),J.value.showNotification("–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∏–ª—å–º —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞")},$=()=>{k.value=!1};function K(I){return I.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"HDRezka - ").replace(/KODIK>/,"Kodik - ").trim()}const Z=H(()=>{var I,i;return W.value?!1:!((i=(I=l.value)==null?void 0:I.key)!=null&&i.toUpperCase().includes("TORRENTS"))});Ae(l,I=>{if(I)if(k.value=!0,n.updatePreferredPlayer(Y(I.key)),s("update:selectedPlayer",I),I.key.toUpperCase().includes("TORRENTS")){const i=document.querySelector(".rocketme_fon");i&&(i.style.display="none");const D=document.querySelector(".pm_preloader");D&&(D.style.display="none")}else{const i=document.querySelector(".rocketme_fon");i&&(i.style.display="");const D=document.querySelector(".pm_preloader");D&&(D.style.display="")}}),Ae(()=>m.params.kp_id,async I=>{I&&I!==v.value&&(v.value=I,ue.value&&pe())},{immediate:!0});const ie=["16:9","12:5","4:3"],Fe=()=>{const i=(ie.indexOf(re.value)+1)%ie.length;Ee(ie[i])},Ke=I=>{var D,fe,Le,Ie,Be,He,De,Ne,ze,Ge,Ye,Ze,Qe;return(Qe={[q.FAVORITE]:((fe=(D=g.movieInfo)==null?void 0:D.lists)==null?void 0:fe.isFavorite)||!1,[q.HISTORY]:((Ie=(Le=g.movieInfo)==null?void 0:Le.lists)==null?void 0:Ie.isHistory)||!1,[q.LATER]:((He=(Be=g.movieInfo)==null?void 0:Be.lists)==null?void 0:He.isLater)||!1,[q.COMPLETED]:((Ne=(De=g.movieInfo)==null?void 0:De.lists)==null?void 0:Ne.isCompleted)||!1,[q.ABANDONED]:((Ge=(ze=g.movieInfo)==null?void 0:ze.lists)==null?void 0:Ge.isAbandoned)||!1,[q.WATCHING]:((Ze=(Ye=g.movieInfo)==null?void 0:Ye.lists)==null?void 0:Ze.isWatching)||!1}[I])!=null?Qe:!1},ne=async I=>{if(!y.token){J.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Cn});return}try{const i={[q.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[q.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[q.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[q.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[q.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[q.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};Ke(I)?(await _n(v.value,I),J.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(i[I]))):(await hn(v.value,I),J.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(i[I])))}catch(i){const{message:D,code:fe}=rt(i);J.value.showNotification("".concat(D," ").concat(fe))}s("update:movieInfo")},Cn=()=>{u.push("/login")},lt=H(()=>n.showFavoriteTooltip),wn=()=>{u.push("/settings"),we()};return qe(()=>{k.value=!0,Te(),N.value&&(re.value="4:3"),se(),window.addEventListener("resize",se),window.addEventListener("resize",ve),ue.value&&pe()}),dt(()=>{window.removeEventListener("resize",se),window.removeEventListener("resize",ve),window.removeEventListener("mousemove",$e),document.removeEventListener("keydown",V),document.body.classList.remove("no-scroll")}),(I,i)=>{var D,fe,Le,Ie,Be,He,De,Ne,ze,Ge,Ye,Ze,Qe,gt,kt,yt,ht,bt,pt,Ct,wt,Mt,_t,Et,Lt,It,Rt,Tt,Pt,St,At,Ut,jt,xt,$t,Bt,Ht,Dt,Nt,Ot,Vt,Ft,Kt,qt,Wt,zt,Gt,Yt,Zt,Qt,Xt,Jt,en,tn,nn,on,sn,ln,an,rn;return p.value?(r(),Re(yn,{key:0,message:p.value,code:A.value},null,8,["message","code"])):(r(),d(te,{key:1},[t("div",oo,[i[54]||(i[54]=t("span",null,"–ü–ª–µ–µ—Ä:",-1)),t("button",{class:"player-btn",onClick:Ue},h(l.value?K(l.value.translate).toUpperCase():"–ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–µ–µ—Ä–æ–≤..."),1)]),_.value?(r(),Re(no,{key:0,players:c.value,"selected-player":l.value,onClose:de,onSelect:le},null,8,["players","selected-player"])):M("",!0),t("div",{ref_key:"containerRef",ref:R,class:x(["player-container",{"theater-mode":w.value}]),style:tt(w.value?{}:B.value)},[t("div",{class:x(["iframe-wrapper",{pm_video:Z.value}]),style:tt(w.value?{}:be.value)},[F(t("iframe",{ref_key:"playerIframe",ref:T,src:(D=l.value)==null?void 0:D.iframe,frameborder:"0",allowfullscreen:"",webkitallowfullscreen:"",class:x(["responsive-iframe",{"theater-mode-unlock":L.value,"theater-mode-lock":w.value,dimmed:Se.value}]),onLoad:$},null,42,so),[[G,!k.value&&((fe=l.value)==null?void 0:fe.iframe)]]),k.value?(r(),Re(bn,{key:0})):M("",!0)],6),w.value?(r(),d("button",{key:0,class:x(["close-theater-btn",{visible:L.value}]),onClick:xe}," ‚úñ ",2)):M("",!0)],6),w.value?M("",!0):(r(),d("div",io,[t("div",lo,[N.value?M("",!0):(r(),d("div",{key:0,ref_key:"tooltipContainer",ref:he,class:"tooltip-container list-buttons-container","data-tooltip-container":"favorite"},[lt.value?(r(),d("button",{key:0,class:x(["favorite-btn",{active:(Ie=(Le=o.movieInfo)==null?void 0:Le.lists)==null?void 0:Ie.isFavorite}]),onMouseenter:i[0]||(i[0]=P=>C("favorite")),onMouseleave:z,onClick:i[1]||(i[1]=P=>ne(X(q).FAVORITE))},[t("span",ao,h((He=(Be=o.movieInfo)==null?void 0:Be.lists)!=null&&He.isFavorite?"favorite":"favorite_border"),1),t("span",{class:x(["material-icons dropdown-arrow",{highlighted:ee.value}])},"expand_more",2)],34)):M("",!0),F(t("div",{ref_key:"tooltip",ref:me,class:"custom-tooltip advanced-tooltip list-buttons-dropdown","data-tooltip":"favorite",onMouseenter:_e,onMouseleave:we},[t("div",ro,[t("button",{class:x(["favorite-btn",{active:(Ne=(De=o.movieInfo)==null?void 0:De.lists)==null?void 0:Ne.isFavorite}]),onClick:i[2]||(i[2]=P=>ne(X(q).FAVORITE))},[t("span",uo,h((Ge=(ze=o.movieInfo)==null?void 0:ze.lists)!=null&&Ge.isFavorite?"favorite":"favorite_border"),1),i[55]||(i[55]=t("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))],2)]),t("div",co,[t("button",{class:x(["watching-btn",{active:(Ze=(Ye=o.movieInfo)==null?void 0:Ye.lists)==null?void 0:Ze.isWatching}]),onClick:i[3]||(i[3]=P=>ne(X(q).WATCHING))},[t("span",mo,h((gt=(Qe=o.movieInfo)==null?void 0:Qe.lists)!=null&&gt.isWatching?"visibility_off":"visibility"),1),i[56]||(i[56]=t("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))],2)]),t("div",vo,[t("button",{class:x(["later-btn",{active:(yt=(kt=o.movieInfo)==null?void 0:kt.lists)==null?void 0:yt.isLater}]),onClick:i[4]||(i[4]=P=>ne(X(q).LATER))},i[57]||(i[57]=[t("span",{class:"material-icons"},"watch_later",-1),t("span",{class:"button-label"},"–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ",-1)]),2)]),t("div",fo,[t("button",{class:x(["completed-btn",{active:(bt=(ht=o.movieInfo)==null?void 0:ht.lists)==null?void 0:bt.isCompleted}]),onClick:i[5]||(i[5]=P=>ne(X(q).COMPLETED))},[t("span",go,h((Ct=(pt=o.movieInfo)==null?void 0:pt.lists)!=null&&Ct.isCompleted?"check_circle":"check_circle_outline"),1),i[58]||(i[58]=t("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))],2)]),t("div",ko,[t("button",{class:x(["abandoned-btn",{active:(Mt=(wt=o.movieInfo)==null?void 0:wt.lists)==null?void 0:Mt.isAbandoned}]),onClick:i[6]||(i[6]=P=>ne(X(q).ABANDONED))},[t("span",yo,h(((Et=(_t=o.movieInfo)==null?void 0:_t.lists)!=null&&Et.isAbandoned,"not_interested")),1),i[59]||(i[59]=t("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))],2)]),t("div",{class:"tooltip-hint"},[i[61]||(i[61]=t("span",{class:"material-icons"},"settings",-1)),t("span",null,[i[60]||(i[60]=Q("–°—Ç–∏–ª—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ ")),t("a",{class:"settings-link",onClick:wn},"–Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö")])])],544),[[G,S.value==="favorite"&&lt.value]])],512)),N.value?M("",!0):(r(),d(te,{key:1},[t("div",ho,[t("button",{class:x(["dimming-btn",{active:Se.value}]),onMouseenter:i[7]||(i[7]=P=>C("dimming")),onMouseleave:i[8]||(i[8]=P=>S.value=null),onClick:E},[t("span",bo,h(Se.value?"light_mode":"dark_mode"),1)],34),F(t("div",{class:"custom-tooltip","data-tooltip":"dimming"},h(Se.value?"–û—Ç–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ":"–í–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ"),513),[[G,S.value==="dimming"]])]),t("div",po,[t("button",{class:x(["blur-btn",{"electron-only":!W.value}]),onMouseenter:i[9]||(i[9]=P=>C("blur")),onMouseleave:i[10]||(i[10]=P=>S.value=null),onClick:je},i[62]||(i[62]=[t("span",{class:"material-icons"},"blur_on",-1)]),34),F(t("div",{class:"custom-tooltip","data-tooltip":"blur"},h(W.value?"–ë–ª—é—Ä":"–ë–ª—é—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[G,S.value==="blur"]])]),t("div",Co,[t("button",{class:x(["material-symbols-outlined",{"electron-only":!W.value}]),onMouseenter:i[11]||(i[11]=P=>C("compressor")),onMouseleave:i[12]||(i[12]=P=>S.value=null),onClick:Pe},i[63]||(i[63]=[t("span",{class:"material-icons"},"graphic_eq",-1)]),34),F(t("div",{class:"custom-tooltip","data-tooltip":"compressor"},h(W.value?"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä":"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[G,S.value==="compressor"]])]),t("div",wo,[t("button",{class:x(["mirror-btn",{"electron-only":!W.value}]),onMouseenter:i[13]||(i[13]=P=>C("mirror")),onMouseleave:i[14]||(i[14]=P=>S.value=null),onClick:Ce},i[64]||(i[64]=[t("span",{class:"material-icons"},"flip",-1)]),34),F(t("div",{class:"custom-tooltip","data-tooltip":"mirror"},h(W.value?"–ó–µ—Ä–∫–∞–ª–æ":"–ó–µ—Ä–∫–∞–ª–æ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[G,S.value==="mirror"]])]),t("div",Mo,[t("button",{class:"theater-mode-btn",onMouseenter:i[15]||(i[15]=P=>C("theater")),onMouseleave:i[16]||(i[16]=P=>S.value=null),onClick:xe},[t("span",_o,h(w.value?"fullscreen_exit":"aspect_ratio"),1)],32),F(t("div",Eo,[Q(h(w.value?"–í—ã–π—Ç–∏ –∏–∑ —Ç–µ–∞—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞":"–¢–µ–∞—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º")+" ",1),i[65]||(i[65]=t("span",{class:"shortcut-hint"},"Alt+T",-1))],512),[[G,S.value==="theater"]])]),t("div",Lo,[t("button",{class:"aspect-ratio-dropdown-btn",onMouseenter:i[17]||(i[17]=P=>C("aspect_ratio")),onMouseleave:z,onClick:Fe},[t("span",Io,h(re.value),1)],32),F(t("div",{class:"custom-tooltip advanced-tooltip aspect-ratio-dropdown","data-tooltip":"aspect_ratio",onMouseenter:_e,onMouseleave:we},[(r(),d(te,null,ge(ie,P=>t("div",{key:P,class:x(["aspect-ratio-option",{active:re.value===P}]),onClick:Ya=>Ee(P)},h(P),11,Ro)),64))],544),[[G,S.value==="aspect_ratio"]])]),t("div",{class:"tooltip-container","data-tooltip-container":"centering",onMouseenter:i[19]||(i[19]=P=>C("centering")),onMouseleave:z},[t("button",{class:"center-btn",onClick:pe},i[66]||(i[66]=[t("span",{class:"material-icons"},"center_focus_strong",-1)])),F(t("div",{class:"custom-tooltip advanced-tooltip","data-tooltip":"centering",onMouseenter:_e,onMouseleave:we},[i[67]||(i[67]=Q(" –û—Ç—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–ª–µ–µ—Ä ")),oe(On,{modelValue:ue.value,"onUpdate:modelValue":i[18]||(i[18]=P=>ue.value=P),title:"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞"},null,8,["modelValue"]),i[68]||(i[68]=t("span",{class:"tooltip-title"},"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞",-1))],544),[[G,S.value==="centering"]])],32),W.value?M("",!0):(r(),d("div",To,[t("button",{class:"app-link-btn",onMouseenter:i[20]||(i[20]=P=>C("app_link")),onMouseleave:i[21]||(i[21]=P=>S.value=null),onClick:st},i[69]||(i[69]=[t("span",{class:"material-icons"},"open_in_new",-1)]),32),F(t("div",Po," –û—Ç–∫—Ä—ã—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ",512),[[G,S.value==="app_link"]])])),W.value?(r(),d("div",So,[t("button",{class:"copy-link-btn",onMouseenter:i[22]||(i[22]=P=>C("copy_link")),onMouseleave:i[23]||(i[23]=P=>S.value=null),onClick:it},i[70]||(i[70]=[t("span",{class:"material-icons"},"content_copy",-1)]),32),F(t("div",Ao," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É ",512),[[G,S.value==="copy_link"]])])):M("",!0)],64))]),!N.value&&!lt.value?(r(),d("div",Uo,[t("div",jo,[t("button",{class:x(["favorite-btn",{active:(It=(Lt=o.movieInfo)==null?void 0:Lt.lists)==null?void 0:It.isFavorite}]),onMouseenter:i[24]||(i[24]=P=>C("favorite")),onMouseleave:i[25]||(i[25]=P=>S.value=null),onClick:i[26]||(i[26]=P=>ne(X(q).FAVORITE))},[t("span",xo,h((Tt=(Rt=o.movieInfo)==null?void 0:Rt.lists)!=null&&Tt.isFavorite?"favorite":"favorite_border"),1)],34),F(t("div",$o,h("–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"),512),[[G,S.value==="favorite"]])]),t("div",Bo,[t("button",{class:x(["watching-btn",{active:(St=(Pt=o.movieInfo)==null?void 0:Pt.lists)==null?void 0:St.isWatching}]),onMouseenter:i[27]||(i[27]=P=>C("watching")),onMouseleave:i[28]||(i[28]=P=>S.value=null),onClick:i[29]||(i[29]=P=>ne(X(q).WATCHING))},[t("span",Ho,h((Ut=(At=o.movieInfo)==null?void 0:At.lists)!=null&&Ut.isWatching?"visibility_off":"visibility"),1)],34),F(t("div",Do,h("–°–º–æ—Ç—Ä—é"),512),[[G,S.value==="watching"]])]),t("div",No,[t("button",{class:x(["later-btn",{active:(xt=(jt=o.movieInfo)==null?void 0:jt.lists)==null?void 0:xt.isLater}]),onMouseenter:i[30]||(i[30]=P=>C("later")),onMouseleave:i[31]||(i[31]=P=>S.value=null),onClick:i[32]||(i[32]=P=>ne(X(q).LATER))},i[71]||(i[71]=[t("span",{class:"material-icons"},"watch_later",-1)]),34),F(t("div",Oo,h("–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"),512),[[G,S.value==="later"]])]),t("div",Vo,[t("button",{class:x(["completed-btn",{active:(Bt=($t=o.movieInfo)==null?void 0:$t.lists)==null?void 0:Bt.isCompleted}]),onMouseenter:i[33]||(i[33]=P=>C("completed")),onMouseleave:i[34]||(i[34]=P=>S.value=null),onClick:i[35]||(i[35]=P=>ne(X(q).COMPLETED))},[t("span",Fo,h((Dt=(Ht=o.movieInfo)==null?void 0:Ht.lists)!=null&&Dt.isCompleted?"check_circle":"check_circle_outline"),1)],34),F(t("div",Ko,h("–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"),512),[[G,S.value==="completed"]])]),t("div",qo,[t("button",{class:x(["abandoned-btn",{active:(Ot=(Nt=o.movieInfo)==null?void 0:Nt.lists)==null?void 0:Ot.isAbandoned}]),onMouseenter:i[36]||(i[36]=P=>C("abandoned")),onMouseleave:i[37]||(i[37]=P=>S.value=null),onClick:i[38]||(i[38]=P=>ne(X(q).ABANDONED))},[t("span",Wo,h(((Ft=(Vt=o.movieInfo)==null?void 0:Vt.lists)!=null&&Ft.isAbandoned,"not_interested")),1)],34),F(t("div",zo,h("–ë—Ä–æ—à–µ–Ω–æ"),512),[[G,S.value==="abandoned"]])])])):N.value?(r(),d("div",Go,[t("div",Yo,[t("button",{class:x(["favorite-btn",{active:(qt=(Kt=o.movieInfo)==null?void 0:Kt.lists)==null?void 0:qt.isFavorite}]),onMouseenter:i[39]||(i[39]=P=>C("favorite")),onMouseleave:i[40]||(i[40]=P=>S.value=null),onClick:i[41]||(i[41]=P=>ne(X(q).FAVORITE))},[t("span",Zo,h((zt=(Wt=o.movieInfo)==null?void 0:Wt.lists)!=null&&zt.isFavorite?"favorite":"favorite_border"),1)],34),F(t("div",Qo,h("–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"),512),[[G,S.value==="favorite"]])]),t("div",Xo,[t("button",{class:x(["watching-btn",{active:(Yt=(Gt=o.movieInfo)==null?void 0:Gt.lists)==null?void 0:Yt.isWatching}]),onMouseenter:i[42]||(i[42]=P=>C("watching")),onMouseleave:i[43]||(i[43]=P=>S.value=null),onClick:i[44]||(i[44]=P=>ne(X(q).WATCHING))},[t("span",Jo,h((Qt=(Zt=o.movieInfo)==null?void 0:Zt.lists)!=null&&Qt.isWatching?"visibility_off":"visibility"),1)],34),F(t("div",es,h("–°–º–æ—Ç—Ä—é"),512),[[G,S.value==="watching"]])]),t("div",ts,[t("button",{class:x(["later-btn",{active:(Jt=(Xt=o.movieInfo)==null?void 0:Xt.lists)==null?void 0:Jt.isLater}]),onMouseenter:i[45]||(i[45]=P=>C("later")),onMouseleave:i[46]||(i[46]=P=>S.value=null),onClick:i[47]||(i[47]=P=>ne(X(q).LATER))},i[72]||(i[72]=[t("span",{class:"material-icons"},"watch_later",-1)]),34),F(t("div",ns,h("–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"),512),[[G,S.value==="later"]])]),t("div",os,[t("button",{class:x(["completed-btn",{active:(tn=(en=o.movieInfo)==null?void 0:en.lists)==null?void 0:tn.isCompleted}]),onMouseenter:i[48]||(i[48]=P=>C("completed")),onMouseleave:i[49]||(i[49]=P=>S.value=null),onClick:i[50]||(i[50]=P=>ne(X(q).COMPLETED))},[t("span",ss,h((on=(nn=o.movieInfo)==null?void 0:nn.lists)!=null&&on.isCompleted?"check_circle":"check_circle_outline"),1)],34),F(t("div",is,h("–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"),512),[[G,S.value==="completed"]])]),t("div",ls,[t("button",{class:x(["abandoned-btn",{active:(ln=(sn=o.movieInfo)==null?void 0:sn.lists)==null?void 0:ln.isAbandoned}]),onMouseenter:i[51]||(i[51]=P=>C("abandoned")),onMouseleave:i[52]||(i[52]=P=>S.value=null),onClick:i[53]||(i[53]=P=>ne(X(q).ABANDONED))},[t("span",as,h(((rn=(an=o.movieInfo)==null?void 0:an.lists)!=null&&rn.isAbandoned,"not_interested")),1)],34),F(t("div",rs,h("–ë—Ä–æ—à–µ–Ω–æ"),512),[[G,S.value==="abandoned"]])])])):M("",!0)])),oe(ot,{ref_key:"notificationRef",ref:J},null,512)],64))}}},gn=Me(us,[["__scopeId","data-v-2037cb5b"]]),ds={key:0,class:"carousel-container"},cs={class:"carousel-wrapper"},ms=["onClick"],vs=["src","alt"],fs={class:"video-name"},gs={key:0,class:"video-player"},ks=["src"],ys={__name:"TrailerCarousel",props:{videos:{type:Array,required:!0},activeVideoIndex:{type:Number,default:null}},emits:["select"],setup(o,{emit:e}){const a=et(),n=H(()=>a.isMobile),y=o,m=e,u=b(y.activeVideoIndex),v=b(null),g=b(!1),s=b(!1),c=()=>{if(!v.value)return;const{scrollLeft:R,scrollWidth:_,clientWidth:p}=v.value;g.value=R>0,s.value=R<_-p-1},l=R=>{if(!v.value)return;const _=v.value.querySelector(".carousel-item");if(!_)return;const p=_.clientWidth+16;v.value.scrollBy({left:p*R,behavior:"smooth"})},k=R=>{u.value=R,m("select",y.videos[R])},w=()=>c(),L=b([]),T=async R=>{try{return(await fetch("https://img.youtube.com/vi/".concat(R,"/0.jpg"))).ok}catch(_){return!1}};return qe(async()=>{const R=y.videos.map(async p=>await T(p.videoId)?p:null),_=await Promise.all(R);L.value=_.filter(Boolean),c(),window.addEventListener("resize",w)}),Ae(()=>y.videos,async R=>{const _=R.map(async A=>await T(A.videoId)?A:null),p=await Promise.all(_);L.value=p.filter(Boolean)}),Ae(()=>y.activeVideoIndex,R=>{u.value=R}),dt(()=>{window.removeEventListener("resize",w)}),(R,_)=>L.value.length?(r(),d("div",ds,[_[4]||(_[4]=t("h2",null,"–¢—Ä–µ–π–ª–µ—Ä—ã (YouTube)",-1)),t("div",cs,[F(t("button",{class:"scroll-button left",onClick:_[0]||(_[0]=p=>l(-1))},_[2]||(_[2]=[t("span",{class:"material-symbols-outlined"},"arrow_back_ios",-1)]),512),[[G,!n.value&&g.value]]),t("div",{ref_key:"carousel",ref:v,class:"carousel",onScroll:c},[(r(!0),d(te,null,ge(L.value,(p,A)=>(r(),d("div",{key:A,class:"carousel-item",onClick:U=>k(A)},[t("img",{src:"https://img.youtube.com/vi/".concat(p.videoId,"/0.jpg"),alt:p.name},null,8,vs),t("div",fs,h(p.name),1)],8,ms))),128))],544),F(t("button",{class:"scroll-button right",onClick:_[1]||(_[1]=p=>l(1))},_[3]||(_[3]=[t("span",{class:"material-symbols-outlined"},"arrow_forward_ios",-1)]),512),[[G,!n.value&&s.value]])]),u.value!==null?(r(),d("div",gs,[t("iframe",{src:o.videos[u.value].iframeUrl,frameborder:"0",allowfullscreen:""},null,8,ks)])):M("",!0)])):M("",!0)}},hs=Me(ys,[["__scopeId","data-v-e60b5c29"]]),bs={class:"rating-container"},ps={class:"rating-display"},Cs={class:"average-rating"},ws={class:"rating-numbers"},Ms=["onClick","onMouseenter"],_s={key:0,class:"tooltip-footer"},Es={class:"rating-numbers mobile-rating-numbers"},Ls=["onClick"],Is={key:0,class:"mobile-modal-footer"},Rs={__name:"MovieRating",props:{kpId:{type:String,required:!0},showDash:{type:Boolean,default:!1}},setup(o){const e=et(),a=nt(),n=o,y=b(null),m=b(null),u=b(null),v=b(null),g=b(0),s=b(!1),c=b(!1);let l=null;const k=U=>U?U.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",w=()=>{l=setTimeout(()=>{s.value=!1,e.isMobile||(c.value=!1)},100)},L=()=>{l&&(clearTimeout(l),l=null),s.value=!0},T=()=>{e.isMobile&&(c.value=!c.value)},R=()=>{a.push("/login")},_=async()=>{try{const U=await En(n.kpId);m.value=U.user_rating,u.value=U.average_rating,v.value=k(U.vote_count)}catch(U){console.error("Error loading rating:",U)}},p=async U=>{var O;try{U===m.value?(await un(n.kpId,null),m.value=null,y.value.showNotification("–û—Ü–µ–Ω–∫–∞ —É–¥–∞–ª–µ–Ω–∞")):(await un(n.kpId,U),m.value=U,y.value.showNotification("–û—Ü–µ–Ω–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞")),e.isMobile&&(c.value=!1),_()}catch(N){console.error("Error setting rating:",N),((O=N.response)==null?void 0:O.status)===401?y.value.showNotification('–î–ª—è –æ—Ü–µ–Ω–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:R}):y.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ü–µ–Ω–∫–∏"),e.isMobile&&(c.value=!1)}},A=()=>{c.value=!1};return qe(()=>{_()}),(U,O)=>(r(),d("div",bs,[t("div",ps,[t("a",{href:"#",class:x(["rating-link",{"has-rating":m.value}]),onMouseenter:O[0]||(O[0]=N=>s.value=!0),onMouseleave:w,onClick:Oe(T,["prevent"])},[O[3]||(O[3]=t("img",{src:Dn,alt:"ReYohoho",class:"rating-logo"},null,-1)),t("span",Cs,h(u.value?u.value.toFixed(1).replace(/\.0$/,""):"‚Äî"),1)],34),F(t("div",{class:"rating-tooltip",onMouseenter:L,onMouseleave:w},[t("div",ws,[(r(),d(te,null,ge(10,N=>t("button",{key:N,class:x(["number-btn",{active:N===m.value,hover:N===g.value,"average-highlight":u.value&&N<=Math.round(u.value)}]),onClick:W=>p(N),onMouseenter:W=>g.value=N,onMouseleave:O[1]||(O[1]=W=>g.value=0)},h(N),43,Ms)),64))]),v.value?(r(),d("div",_s,"–û—Ü–µ–Ω–æ–∫: "+h(v.value),1)):M("",!0)],544),[[G,(s.value||c.value)&&!X(e).isMobile]])]),oe(ot,{ref_key:"notificationRef",ref:y},null,512),X(e).isMobile&&c.value?(r(),d("div",{key:0,class:"mobile-modal-overlay",onClick:A},[t("div",{class:"mobile-modal",onClick:O[2]||(O[2]=Oe(()=>{},["stop"]))},[t("div",{class:"mobile-modal-header"},[O[4]||(O[4]=t("h3",null,"–û—Ü–µ–Ω–∏—Ç—å —Ñ–∏–ª—å–º",-1)),t("button",{class:"close-button",onClick:A},"√ó")]),t("div",Es,[(r(),d(te,null,ge(10,N=>t("button",{key:N,class:x(["number-btn",{active:N===m.value,"average-highlight":u.value&&N<=Math.round(u.value)}]),onClick:W=>p(N)},h(N),11,Ls)),64))]),v.value?(r(),d("div",Is,"–û—Ü–µ–Ω–æ–∫: "+h(v.value),1)):M("",!0)])])):M("",!0)]))}},Ts=Me(Rs,[["__scopeId","data-v-906480ed"]]),Ps={name:"EmojiPicker",props:{isVisible:{type:Boolean,default:!1}},emits:["emoji-selected","mouse-enter","mouse-leave","close"],data(){return{activeCategory:"smileys",categories:[{name:"smileys",icon:"üòÄ",emojis:["üòÄ","üòÉ","üòÑ","üòÅ","üòÜ","üòÖ","üòÇ","ü§£","üòä","üòá","üôÇ","üôÉ","üòâ","üòå","üòç","ü•∞","üòò","üòó","üòô","üòö","üòã","üòõ","üòù","üòú","ü§™","ü§®","üßê","ü§ì","üòé","ü§©","ü•≥"]},{name:"emotions",icon:"üò¢",emojis:["üò•","üò¢","üò≠","üò§","üò†","üò°","ü§¨","ü§Ø","üò≥","ü•µ","ü•∂","üò±","üò®","üò∞","üò•","üòì","ü§ó","ü§î","ü§≠","ü§´","ü§•","üò∂","üòê","üòë","üò¨","üôÑ","üòØ","üò¶","üòß","üòÆ","üò≤"]},{name:"gestures",icon:"üëç",emojis:["üëç","üëé","üëå","ü§å","ü§è","‚úåÔ∏è","ü§û","ü§ü","ü§ò","ü§ô","üëà","üëâ","üëÜ","üñï","üëá","‚òùÔ∏è","üëè","üôå","üëê","ü§≤","ü§ù","üôè","‚úçÔ∏è","üí™","ü¶æ","ü¶ø","ü¶µ","ü¶∂","üëÇ","ü¶ª","üëÉ"]},{name:"hearts",icon:"‚ù§Ô∏è",emojis:["‚ù§Ô∏è","üß°","üíõ","üíö","üíô","üíú","ü§é","üñ§","ü§ç","üíî","‚ù£Ô∏è","üíï","üíû","üíì","üíó","üíñ","üíò","üíù","üíü","‚ô•Ô∏è","üíØ","üí¢","üí•","üí´","üí¶","üí®","üï≥Ô∏è","üí£","üí¨","üëÅÔ∏è‚Äçüó®Ô∏è","üó®Ô∏è"]},{name:"objects",icon:"üéâ",emojis:["üéâ","üéä","üéà","üéÅ","üéÄ","üéÇ","üç∞","üßÅ","üç≠","üç¨","üç´","üç©","üç™","üçï","üçî","üçü","üå≠","ü•™","üåÆ","üåØ","ü•ô","ü•ö","üç≥","ü•ò","üç≤","ü•ó","üçø","üßà","üßÄ","ü•®","ü•Ø"]}]}},computed:{currentEmojis(){const o=this.categories.find(e=>e.name===this.activeCategory);return o?o.emojis:[]}},methods:{selectEmoji(o){this.$emit("emoji-selected",o)}}},Ss={class:"emoji-categories"},As=["onClick"],Us={class:"emoji-grid"},js=["onClick"];function xs(o,e,a,n,y,m){return a.isVisible?(r(),d("div",{key:0,class:"emoji-picker",onMouseenter:e[1]||(e[1]=u=>o.$emit("mouse-enter")),onMouseleave:e[2]||(e[2]=u=>o.$emit("mouse-leave"))},[t("button",{class:"close-btn mobile-only",onClick:e[0]||(e[0]=u=>o.$emit("close"))},e[3]||(e[3]=[t("i",{class:"fas fa-times"},null,-1)])),t("div",Ss,[(r(!0),d(te,null,ge(y.categories,u=>(r(),d("button",{key:u.name,onClick:v=>y.activeCategory=u.name,class:x([{active:y.activeCategory===u.name},"category-btn"]),type:"button"},h(u.icon),11,As))),128))]),t("div",Us,[(r(!0),d(te,null,ge(m.currentEmojis,u=>(r(),d("button",{key:u,onClick:v=>m.selectEmoji(u),class:"emoji-btn",type:"button"},h(u),9,js))),128))])],32)):M("",!0)}const ct=Me(Ps,[["render",xs],["__scopeId","data-v-5f18a3b7"]]),$s=async o=>{const e=await Ln();return await o(e)},Bs=async o=>{const{data:e}=await $s(a=>a.get("/search_emotes/".concat(o)));return e.emotes||[]},Hs={name:"ImagePicker",props:{isVisible:{type:Boolean,required:!0},currentUser:{type:Object,default:null}},emits:["image-selected","mouse-enter","mouse-leave","close","login-required"],setup(o,{emit:e}){const a=b(""),n=b([]),y=b(null),m=b(!1),v=In(async l=>{if(!o.currentUser){console.warn("–ü–æ–ø—ã—Ç–∫–∞ –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏");return}if(!l.trim()){n.value=[],m.value=!1;return}m.value=!0;try{n.value=await Bs(l)}catch(k){console.error("Error searching images:",k),n.value=[]}finally{m.value=!1}},300),g=()=>{if(!o.currentUser){e("login-required");return}a.value.trim()&&(m.value=!0),v(a.value)},s=l=>{if(!o.currentUser){e("login-required");return}e("image-selected",l),e("close")},c=()=>{setTimeout(()=>{o.isVisible&&e("mouse-leave")},100)};return Ae(()=>o.isVisible,l=>{l&&(a.value="",n.value=[],m.value=!1)}),{searchQuery:a,images:n,searchInput:y,isLoading:m,handleSearch:g,selectImage:s,handleInputBlur:c}}},Ds={key:0,class:"auth-required"},Ns={class:"auth-message"},Os={key:1},Vs={class:"image-picker-header"},Fs={class:"image-content"},Ks={key:0,class:"loading-spinner"},qs={key:1,class:"image-grid"},Ws=["onClick"],zs=["src","alt"],Gs={key:2,class:"no-images"},Ys={key:3,class:"no-search"};function Zs(o,e,a,n,y,m){return a.isVisible?(r(),d("div",{key:0,class:"image-picker",onMouseenter:e[7]||(e[7]=u=>o.$emit("mouse-enter")),onMouseleave:e[8]||(e[8]=u=>o.$emit("mouse-leave")),onClick:e[9]||(e[9]=Oe(()=>{},["stop"]))},[t("button",{class:"close-btn mobile-only",onClick:e[0]||(e[0]=u=>o.$emit("close"))},e[10]||(e[10]=[t("i",{class:"fas fa-times"},null,-1)])),a.currentUser?(r(),d("div",Os,[t("div",Vs,[F(t("input",{ref:"searchInput",type:"text","onUpdate:modelValue":e[2]||(e[2]=u=>n.searchQuery=u),placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–º–∞–π–ª–∞ 7tv",class:"image-search-input",onInput:e[3]||(e[3]=(...u)=>n.handleSearch&&n.handleSearch(...u)),onClick:e[4]||(e[4]=Oe(()=>{},["stop"])),onFocus:e[5]||(e[5]=u=>o.$emit("mouse-enter")),onBlur:e[6]||(e[6]=(...u)=>n.handleInputBlur&&n.handleInputBlur(...u))},null,544),[[Xe,n.searchQuery]])]),t("div",Fs,[n.isLoading?(r(),d("div",Ks,e[14]||(e[14]=[t("div",{class:"spinner"},null,-1),t("p",null,"–ü–æ–∏—Å–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...",-1)]))):n.images.length>0?(r(),d("div",qs,[(r(!0),d(te,null,ge(n.images,(u,v)=>(r(),d("div",{key:v,class:"image-item",onClick:g=>n.selectImage(u)},[t("img",{src:u,alt:"Image "+(v+1)},null,8,zs)],8,Ws))),128))])):n.searchQuery.trim()?(r(),d("div",Gs,e[15]||(e[15]=[t("p",null,"–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤",-1)]))):(r(),d("div",Ys,e[16]||(e[16]=[t("p",null,"–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞",-1)])))])])):(r(),d("div",Ds,[t("div",Ns,[e[11]||(e[11]=t("i",{class:"fas fa-lock"},null,-1)),e[12]||(e[12]=t("h3",null,"–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è",-1)),e[13]||(e[13]=t("p",null,"–î–ª—è –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç",-1)),t("button",{class:"login-button",onClick:e[1]||(e[1]=u=>o.$emit("login-required"))},"–í–æ–π—Ç–∏")])]))],32)):M("",!0)}const mt=Me(Hs,[["render",Zs],["__scopeId","data-v-be44d2b6"]]),Qs={name:"LinkModal",props:{isVisible:{type:Boolean,default:!1},selectedText:{type:String,default:""}},emits:["close","submit"],setup(o,{emit:e}){const a=b(""),n=b(""),y=b(null),m=b(null),u=H(()=>/^https?:\/\/.+/.test(a.value.trim())&&n.value.trim()),v=()=>{e("close"),s()},g=()=>{u.value&&(e("submit",{url:a.value.trim(),title:n.value.trim()}),v())},s=()=>{a.value="",n.value=""},c=l=>{var k;l.key==="Enter"?(l.preventDefault(),u.value?g():l.target===y.value&&a.value.trim()&&((k=m.value)==null||k.focus())):l.key==="Escape"&&v()};return Ae(()=>o.isVisible,l=>{l&&(o.selectedText.trim()&&(n.value=o.selectedText.trim()),ke(()=>{var k;(k=y.value)==null||k.focus()}))}),{linkUrl:a,linkTitle:n,urlInput:y,titleInput:m,isValidLink:u,closeModal:v,submitLink:g,handleKeydown:c}}},Xs={class:"link-modal-header"},Js={class:"link-modal-content"},ei={class:"form-group"},ti={class:"form-group"},ni={class:"link-modal-footer"},oi=["disabled"];function si(o,e,a,n,y,m){return a.isVisible?(r(),d("div",{key:0,class:"link-modal-overlay",onClick:e[8]||(e[8]=(...u)=>n.closeModal&&n.closeModal(...u))},[t("div",{class:"link-modal",onClick:e[7]||(e[7]=Oe(()=>{},["stop"]))},[t("div",Xs,[e[10]||(e[10]=t("h3",null,"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É",-1)),t("button",{class:"close-button",onClick:e[0]||(e[0]=(...u)=>n.closeModal&&n.closeModal(...u))},e[9]||(e[9]=[t("i",{class:"fas fa-times"},null,-1)]))]),t("div",Js,[t("div",ei,[e[11]||(e[11]=t("label",{for:"link-url"},"URL —Å—Å—ã–ª–∫–∏:",-1)),F(t("input",{id:"link-url",ref:"urlInput","onUpdate:modelValue":e[1]||(e[1]=u=>n.linkUrl=u),type:"url",placeholder:"https://example.com",class:"link-input",onKeydown:e[2]||(e[2]=(...u)=>n.handleKeydown&&n.handleKeydown(...u))},null,544),[[Xe,n.linkUrl]])]),t("div",ti,[e[12]||(e[12]=t("label",{for:"link-title"},"–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏:",-1)),F(t("input",{id:"link-title",ref:"titleInput","onUpdate:modelValue":e[3]||(e[3]=u=>n.linkTitle=u),type:"text",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è",class:"link-input",onKeydown:e[4]||(e[4]=(...u)=>n.handleKeydown&&n.handleKeydown(...u))},null,544),[[Xe,n.linkTitle]])])]),t("div",ni,[t("button",{class:"cancel-button",onClick:e[5]||(e[5]=(...u)=>n.closeModal&&n.closeModal(...u))},"–û—Ç–º–µ–Ω–∞"),t("button",{class:"submit-button",disabled:!n.isValidLink,onClick:e[6]||(e[6]=(...u)=>n.submitLink&&n.submitLink(...u))},"–î–æ–±–∞–≤–∏—Ç—å",8,oi)])])])):M("",!0)}const vt=Me(Qs,[["render",si],["__scopeId","data-v-4b811824"]]);function ii(){const o=b(!1),e=b(!1),a=b(!1),n=()=>{e.value=!0},y=()=>{e.value=!1,setTimeout(()=>{!e.value&&!a.value&&(o.value=!1)},300)},m=()=>{a.value=!0,o.value=!0},u=()=>{a.value=!1,setTimeout(()=>{!e.value&&!a.value&&(o.value=!1)},300)},v=()=>{o.value=!1};return{showEmojiPicker:o,isEmojiHovered:e,isButtonHovered:a,handleEmojiMouseEnter:n,handleEmojiMouseLeave:y,handleButtonMouseEnter:m,handleButtonMouseLeave:u,closeEmojiPicker:v,insertEmoji:(c,l,k,w)=>{const L=l.value;if(L){const T=L.selectionStart,R=L.selectionEnd,_=k.value.substring(0,T),p=k.value.substring(R),A=_+c+p;w(A),ke(()=>{L.focus(),L.setSelectionRange(T+c.length,T+c.length),L.style.height&&(L.style.height="auto",L.style.height="".concat(Math.min(L.scrollHeight,200),"px"))})}else w(k.value+c)},handleGlobalClick:c=>{!c.target.closest(".emoji-picker")&&!c.target.closest(".emoji-button-inline")&&v()}}}function li(){const o=b(!1),e=b(!1),a=b(!1),n=()=>{e.value=!0},y=()=>{e.value=!1,setTimeout(()=>{!e.value&&!a.value&&(o.value=!1)},300)},m=()=>{a.value=!0,o.value=!0},u=()=>{a.value=!1,setTimeout(()=>{!e.value&&!a.value&&(o.value=!1)},300)},v=()=>{o.value=!1};return{showImagePicker:o,isImageHovered:e,isButtonHovered:a,handleImageMouseEnter:n,handleImageMouseLeave:y,handleImageButtonMouseEnter:m,handleButtonMouseLeave:u,closeImagePicker:v,insertImage:(c,l,k,w)=>{const L=l.value;if(L){const T=L.selectionStart,R=L.selectionEnd,_="[img]".concat(c,"[/img]"),p=k.value.slice(0,T)+_+k.value.slice(R);w(p),ke(()=>{L.focus(),L.setSelectionRange(T+_.length,T+_.length),L.style.height&&(L.style.height="auto",L.style.height="".concat(Math.min(L.scrollHeight,200),"px"))})}else{const T="[img]".concat(c,"[/img]");w(k.value+T)}},handleGlobalClick:c=>{!c.target.closest(".image-picker")&&!c.target.closest(".emoji-button-inline")&&v()}}}function ai(){const o=b(!1),e=b("");return{showLinkModal:o,selectedTextForLink:e,insertLink:(u,v)=>{const g=u.value;if(g){const s=g.selectionStart,c=g.selectionEnd,l=v.value.slice(s,c);e.value=l.trim()||""}o.value=!0},insertLinkFromModal:(u,v,g,s)=>{const c=v.value;if(c){const l=c.selectionStart,k=c.selectionEnd,w="[link=".concat(u.url,"]").concat(u.title,"[/link]"),L=g.value.slice(0,l)+w+g.value.slice(k);s(L),ke(()=>{c.focus(),c.setSelectionRange(l+w.length,l+w.length),c.style.height&&(c.style.height="auto",c.style.height="".concat(Math.min(c.scrollHeight,200),"px"))})}},closeLinkModal:()=>{o.value=!1},insertSpoiler:(u,v,g)=>{const s=u.value;if(s){const c=s.selectionStart,l=s.selectionEnd,k=v.value.slice(c,l);let w;k.trim()?w="[spoiler]".concat(k,"[/spoiler]"):w="[spoiler][/spoiler]";const L=v.value.slice(0,c)+w+v.value.slice(l);g(L),ke(()=>{if(s.focus(),k.trim())s.setSelectionRange(c+w.length,c+w.length);else{const T=c+9;s.setSelectionRange(T,T)}s.style.height&&(s.style.height="auto",s.style.height="".concat(Math.min(s.scrollHeight,200),"px"))})}}}}function ri(){return{autoResize:a=>{const n=a==null?void 0:a.target;n&&(n.style.height="auto",n.style.height="".concat(Math.min(n.scrollHeight,200),"px"))},autoResizeElement:a=>{a&&(a.style.height="auto",a.style.height="".concat(Math.min(a.scrollHeight,200),"px"))}}}function ft(){const o=ii(),e=li(),a=ai(),{autoResize:n,autoResizeElement:y}=ri(),m=()=>{o.isButtonHovered.value=!0,e.isButtonHovered.value=!0,o.showEmojiPicker.value=!0,e.showImagePicker.value=!1},u=()=>{o.isButtonHovered.value=!0,e.isButtonHovered.value=!0,e.showImagePicker.value=!0,o.showEmojiPicker.value=!1},v=()=>{o.isButtonHovered.value=!1,e.isButtonHovered.value=!1,setTimeout(()=>{!o.isEmojiHovered.value&&!e.isImageHovered.value&&!o.isButtonHovered.value&&!e.isButtonHovered.value&&(o.showEmojiPicker.value=!1,e.showImagePicker.value=!1)},300)},g=()=>{o.showEmojiPicker.value=!1,e.showImagePicker.value=!1},s=T=>{!T.target.closest(".emoji-picker")&&!T.target.closest(".image-picker")&&!T.target.closest(".emoji-button-inline")&&g()},c=(T,R,_,p)=>{o.insertEmoji(T,R,_,p)},l=(T,R,_,p)=>{e.insertImage(T,R,_,p)},k=(T,R,_)=>{a.insertLink(T,R,_)},w=(T,R,_,p)=>{a.insertLinkFromModal(T,R,_,p)},L=(T,R,_)=>{a.insertSpoiler(T,R,_)};return qe(()=>{document.addEventListener("click",s)}),dt(()=>{document.removeEventListener("click",s)}),{showEmojiPicker:o.showEmojiPicker,handleEmojiMouseEnter:o.handleEmojiMouseEnter,handleEmojiMouseLeave:o.handleEmojiMouseLeave,closeEmojiPicker:o.closeEmojiPicker,showImagePicker:e.showImagePicker,handleImageMouseEnter:e.handleImageMouseEnter,handleImageMouseLeave:e.handleImageMouseLeave,closeImagePicker:e.closeImagePicker,showLinkModal:a.showLinkModal,selectedTextForLink:a.selectedTextForLink,closeLinkModal:a.closeLinkModal,handleButtonMouseEnter:m,handleImageButtonMouseEnter:u,handleButtonMouseLeave:v,closeAllPickers:g,insertEmojiUniversal:c,insertImageUniversal:l,insertLinkUniversal:k,insertLinkFromModalUniversal:w,insertSpoilerUniversal:L,autoResize:n,autoResizeElement:y}}function pn(){const o=y=>{try{const m=new URL(y),u=m.hostname==="cdn.7tv.app"&&m.protocol==="https:"||m.pathname.includes("/api/7tv")&&m.protocol==="https:";return u||console.warn("URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç–∫–ª–æ–Ω–µ–Ω:",{url:y,hostname:m.hostname,protocol:m.protocol,reason:m.hostname!=="cdn.7tv.app"?"–Ω–µ—Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–π –¥–æ–º–µ–Ω":"–Ω–µ—Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª"}),u}catch(m){return console.warn("–ù–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–π URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:",y,"–û—à–∏–±–∫–∞:",m.message),!1}},e=y=>{const m=document.createElement("div");return m.textContent=y,m.innerHTML},a=y=>{if(!y)return"";let m=y;return m=m.replace(/\[spoiler\]\s*\[\/spoiler\]/g,""),m=m.replace(/\[img\]\s*\[\/img\]/g,""),m=m.replace(/\[link=[^\]]+\]\s*\[\/link\]/g,""),m=m.replace(/\[img\](.*?)\[\/img\]/g,(u,v)=>{const g=v.trim();if(o(g)){const s=e(g);return'<img src="'.concat(s,'" alt="7TV emote" class="inline-emoji" loading="lazy" />')}return"[–Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: ".concat(e(g),"]")}),m=m.replace(new RegExp("\\[spoiler\\](.*?)\\[\\/spoiler\\]","gs"),(u,v,g,s)=>{const c=e(v.trim());if(!c)return"";const l=g>0?s[g-1]:" ",k=g+u.length<s.length?s[g+u.length]:" ",w=l&&l!==" "&&l!=="\n"&&l!=="	",L=k&&k!==" "&&k!=="\n"&&k!=="	",T=w?" ":"",R=L?" ":"";return"".concat(T,'<span class="spoiler-text" onclick="this.classList.toggle(\'revealed\')" title="–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä">').concat(c,"</span>").concat(R)}),m=m.replace(/\[link=([^\]]+)\](.*?)\[\/link\]/g,(u,v,g)=>{const s=v.trim(),c=g.trim();if(!c)return"";if(/^https?:\/\/.+/.test(s)&&c){const k=e(s),w=e(c);return'<a href="'.concat(k,'" target="_blank" rel="noopener noreferrer" class="comment-link">').concat(w,"</a>")}return e(c||s)}),m};return{formatContent:a,formatContentWithTruncation:(y,m=300,u=!1)=>{if(!y)return"";let v=y;if(y.length>m&&!u){let g=y.slice(0,m);const c=(y.match(/\[img\].*?\[\/img\]/g)||[]).length,l=(g.match(/\[img\].*?\[\/img\]/g)||[]).length,k=c-l,w=g.lastIndexOf("[img]"),L=g.lastIndexOf("[/img]");w>L&&w!==-1&&(g=y.slice(0,w)),g=g.trim();const T=["[img","[im","[i","["];for(const p of T)if(g.endsWith(p)){const A=g.lastIndexOf("[");if(A!==-1){g=g.slice(0,A).trim();break}}const R=["[/img","[/im","[/i","[/"];for(const p of R)if(g.endsWith(p)){const A=g.lastIndexOf("[");if(A!==-1){g=g.slice(0,A).trim();break}}let _="...";k>0&&(_="... (+".concat(k," ").concat(k===1?"–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ":"–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π",")")),v=g+_}return a(v)},isValidImageUrl:o,escapeHtml:e}}const ui=o=>{if(!o)return"";const e=o.substring(0,4),a=o.substring(4,6),n=o.substring(6,8),y=o.substring(9,11),m=o.substring(11,13),u=o.substring(13,15);return new Date(Date.UTC(parseInt(e),parseInt(a)-1,parseInt(n),parseInt(y),parseInt(m),parseInt(u))).toLocaleDateString("ru-RU",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone})},di=o=>{if(!o)return"";const e=o.substring(0,4),a=o.substring(4,6),n=o.substring(6,8),y=o.substring(9,11),m=o.substring(11,13),u=o.substring(13,15),v=new Date(Date.UTC(parseInt(e),parseInt(a)-1,parseInt(n),parseInt(y),parseInt(m),parseInt(u))),s=Math.floor((new Date-v)/1e3);if(s<60)return"—Ç–æ–ª—å–∫–æ —á—Ç–æ";const c=Math.floor(s/60);if(c<60)return"".concat(c," ").concat(ci(c)," –Ω–∞–∑–∞–¥");const l=Math.floor(c/60);if(l<24)return"".concat(l," ").concat(mi(l)," –Ω–∞–∑–∞–¥");const k=Math.floor(l/24);if(k<7)return"".concat(k," ").concat(vi(k)," –Ω–∞–∑–∞–¥");const w=Math.floor(k/7);if(w<4)return"".concat(w," ").concat(fi(w)," –Ω–∞–∑–∞–¥");const L=Math.floor(k/30);if(L<12)return"".concat(L," ").concat(gi(L)," –Ω–∞–∑–∞–¥");const T=Math.floor(k/365);return"".concat(T," ").concat(ki(T)," –Ω–∞–∑–∞–¥")},ci=o=>o%10===1&&o%100!==11?"–º–∏–Ω—É—Ç—É":[2,3,4].includes(o%10)&&![12,13,14].includes(o%100)?"–º–∏–Ω—É—Ç—ã":"–º–∏–Ω—É—Ç",mi=o=>o%10===1&&o%100!==11?"—á–∞—Å":[2,3,4].includes(o%10)&&![12,13,14].includes(o%100)?"—á–∞—Å–∞":"—á–∞—Å–æ–≤",vi=o=>o%10===1&&o%100!==11?"–¥–µ–Ω—å":[2,3,4].includes(o%10)&&![12,13,14].includes(o%100)?"–¥–Ω—è":"–¥–Ω–µ–π",fi=o=>o%10===1&&o%100!==11?"–Ω–µ–¥–µ–ª—é":[2,3,4].includes(o%10)&&![12,13,14].includes(o%100)?"–Ω–µ–¥–µ–ª–∏":"–Ω–µ–¥–µ–ª—å",gi=o=>o%10===1&&o%100!==11?"–º–µ—Å—è—Ü":[2,3,4].includes(o%10)&&![12,13,14].includes(o%100)?"–º–µ—Å—è—Ü–∞":"–º–µ—Å—è—Ü–µ–≤",ki=o=>o%10===1&&o%100!==11?"–≥–æ–¥":[2,3,4].includes(o%10)&&![12,13,14].includes(o%100)?"–≥–æ–¥–∞":"–ª–µ—Ç",yi=o=>o===1?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π":o>=2&&o<=4?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è":"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤",hi=o=>{if(!o)return"?";const e=o.split(" ");return e.length===1?o.slice(0,2).toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()},bi={name:"CommentItem",components:{EmojiPicker:ct,ImagePicker:mt,LinkModal:vt},props:{comment:{type:Object,required:!0,default:()=>({username:"–ê–Ω–æ–Ω–∏–º",user_avatar:null,content:"",created_at:new Date().toISOString(),rating:0,replies:[]})},currentUser:{type:Object,required:!0,default:()=>({})},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate"],setup(o,{emit:e}){var $e,Se;const a=nt(),n=H(()=>{var E;return o.editingCommentId===((E=o.comment)==null?void 0:E.id)}),y=b((($e=o.comment)==null?void 0:$e.content)||""),m=b(((Se=o.comment)==null?void 0:Se.user_rating)||0),u=b(null),v=b(null),{showEmojiPicker:g,showImagePicker:s,showLinkModal:c,selectedTextForLink:l,handleEmojiMouseEnter:k,handleEmojiMouseLeave:w,handleImageMouseEnter:L,handleImageMouseLeave:T,handleButtonMouseEnter:R,handleImageButtonMouseEnter:_,handleButtonMouseLeave:p,closeEmojiPicker:A,closeImagePicker:U,closeLinkModal:O,insertEmojiUniversal:N,insertImageUniversal:W,insertLinkUniversal:S,insertLinkFromModalUniversal:ae,insertSpoilerUniversal:ce,autoResize:J}=ft(),{formatContentWithTruncation:he}=pn();qe(async()=>{var E;if((E=o.comment)!=null&&E.user_avatar){const V=await Rn();u.value="".concat(V).concat(o.comment.user_avatar)}});const me=H(()=>{var E;return o.currentUser&&((E=o.comment)==null?void 0:E.user_id)===o.currentUser.id}),ve=H(()=>{var E;return o.currentUser&&((E=o.comment)==null?void 0:E.user_id)===o.currentUser.id||o.currentUser&&o.currentUser.is_admin===1}),C=H(()=>{var E,V,Ee;return((E=o.comment)==null?void 0:E.updated_at)&&((V=o.comment)==null?void 0:V.updated_at)!==((Ee=o.comment)==null?void 0:Ee.created_at)}),z=H(()=>{var E,V;return(E=o.comment)!=null&&E.is_deleted?!1:(((V=o.comment)==null?void 0:V.rating)||0)<=-3}),_e=H(()=>z.value),we=b(!1),re=H(()=>{var E,V;return(E=o.comment)!=null&&E.is_deleted?null:(((V=o.comment)==null?void 0:V.rating)||0)<=-3?"lowRating":null}),ue=()=>{var E,V;e("start-edit",(E=o.comment)==null?void 0:E.id),y.value=((V=o.comment)==null?void 0:V.content)||"",ke(()=>{v.value&&(v.value.focus(),J({target:v.value}))})},ee=()=>{var E;e("cancel-edit"),y.value=((E=o.comment)==null?void 0:E.content)||""},j=()=>{var E;y.value.trim()&&e("edit",(E=o.comment)==null?void 0:E.id,y.value.trim())},f=()=>{var E;confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π?")&&e("delete",(E=o.comment)==null?void 0:E.id)},Y=E=>{var V,Ee;m.value===E?(m.value=0,e("rate",(V=o.comment)==null?void 0:V.id,E)):(m.value=E,e("rate",(Ee=o.comment)==null?void 0:Ee.id,E))},se=E=>{E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),j())},B=H(()=>{var E,V;return((V=(E=o.comment)==null?void 0:E.content)==null?void 0:V.length)>300}),be=b(!1),pe=H(()=>{var E;return he((E=o.comment)==null?void 0:E.content,300,be.value)}),Te=()=>{be.value=!be.value},Ue=()=>{console.log("Avatar load error, falling back to initials"),u.value=null,ke(()=>{const E=document.querySelector(".avatar-placeholder");E&&(E.style.display="flex")})},de=()=>{a.push("/login")},le=E=>{N(E,v,y,V=>{y.value=V})},je=E=>{W(E,v,y,V=>{y.value=V})},Pe=()=>{ce(v,y,E=>{y.value=E})},Ce=()=>{S(v,y,E=>{y.value=E})},xe=E=>{ae(E,v,y,V=>{y.value=V})},Ve=E=>{J(E)};return Ae(y,()=>{n.value&&v.value&&ke(()=>{Ve({target:v.value})})}),{isEditing:n,editContent:y,userRating:m,isCommentOwner:me,canDeleteComment:ve,isCommentEdited:C,formatDate:ui,formatRelativeTime:di,startEdit:ue,cancelEdit:ee,saveEdit:j,confirmDelete:f,rateComment:Y,avatarUrl:u,getInitials:hi,handleEditKeydown:se,isCommentHidden:_e,showHiddenComment:we,hiddenCommentReason:re,isLongComment:B,isExpanded:be,formattedContent:pe,toggleExpanded:Te,autoResizeEdit:Ve,editTextarea:v,showEmojiPicker:g,showImagePicker:s,insertEmojiEdit:le,insertImageEdit:je,insertSpoilerEdit:Pe,insertLinkEdit:Ce,handleEmojiMouseEnter:k,handleEmojiMouseLeave:w,handleImageMouseEnter:L,handleImageMouseLeave:T,closeEmojiPicker:A,closeImagePicker:U,handleButtonMouseEnter:R,handleButtonMouseLeave:p,handleImageButtonMouseEnter:_,handleAvatarError:Ue,openLogin:de,showLinkModal:c,selectedTextForLink:l,insertLinkFromModal:xe,closeLinkModal:O}}},pi=["data-comment-id"],Ci={class:"comment-header"},wi={class:"user-info"},Mi=["href"],_i={class:"user-avatar"},Ei=["src","alt"],Li={class:"user-details"},Ii=["href"],Ri={class:"username"},Ti={key:0,class:"user-rating"},Pi=["title"],Si=["title"],Ai={class:"comment-content"},Ui={key:0,class:"hidden-comment-warning"},ji={key:1},xi={key:0,class:"deleted-comment"},$i={key:1},Bi={key:0,class:"edit-form"},Hi={class:"edit-textarea-container"},Di={class:"edit-footer"},Ni={class:"edit-actions"},Oi=["disabled"],Vi={class:"character-counter-container"},Fi={key:1,class:"comment-text-container"},Ki=["innerHTML"],qi={class:"comment-footer"},Wi={class:"comment-actions"},zi={class:"rating-buttons"},Gi={class:"action-buttons"};function Yi(o,e,a,n,y,m){var s,c,l,k,w,L,T,R,_,p,A,U,O,N,W,S,ae,ce,J,he,me,ve;const u=ye("EmojiPicker"),v=ye("ImagePicker"),g=ye("LinkModal");return r(),d("div",{class:"comment-item","data-comment-id":(s=a.comment)==null?void 0:s.id},[t("div",Ci,[t("div",wi,[t("a",{href:"/lists/".concat((c=a.comment)==null?void 0:c.user_id),target:"_blank",rel:"noopener noreferrer",class:"user-avatar-link"},[t("div",_i,[n.avatarUrl?(r(),d("img",{key:0,src:n.avatarUrl,alt:((l=a.comment)==null?void 0:l.username)||"–ê–Ω–æ–Ω–∏–º",onError:e[0]||(e[0]=(...C)=>n.handleAvatarError&&n.handleAvatarError(...C)),onerror:"this.onerror=null; this.style.display='none'; this.nextElementSibling.style.display='flex';"},null,40,Ei)):(r(),d("div",{key:1,class:"avatar-placeholder",style:tt({display:n.avatarUrl?"none":"flex"})},h(n.getInitials(((k=a.comment)==null?void 0:k.username)||"–ê–Ω–æ–Ω–∏–º")),5))])],8,Mi),t("div",Li,[t("a",{href:"/lists/".concat((w=a.comment)==null?void 0:w.user_id),target:"_blank",rel:"noopener noreferrer",class:"username-link"},[t("span",Ri,h(((L=a.comment)==null?void 0:L.username)||"–ê–Ω–æ–Ω–∏–º"),1)],8,Ii),(T=a.comment)!=null&&T.user_movie_rating?(r(),d("span",Ti,[e[19]||(e[19]=t("i",{class:"fas fa-star"},null,-1)),Q(" "+h(a.comment.user_movie_rating),1)])):M("",!0),t("span",{class:"date",title:n.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((R=a.comment)==null?void 0:R.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(n.formatDate((_=a.comment)==null?void 0:_.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((p=a.comment)==null?void 0:p.created_at))},[Q(h(n.formatRelativeTime((A=a.comment)==null?void 0:A.created_at))+" ",1),n.isCommentEdited?(r(),d("i",{key:0,class:"fas fa-pencil-alt edit-icon",title:n.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((U=a.comment)==null?void 0:U.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(n.formatDate((O=a.comment)==null?void 0:O.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((N=a.comment)==null?void 0:N.created_at))},null,8,Si)):M("",!0)],8,Pi)])])]),t("div",Ai,[!((W=a.comment)!=null&&W.is_deleted)&&n.isCommentHidden&&!n.showHiddenComment?(r(),d("div",Ui,[n.hiddenCommentReason==="lowRating"?(r(),d("p",{key:0,class:"warning-text",onClick:e[1]||(e[1]=C=>n.showHiddenComment=!0)},e[20]||(e[20]=[t("i",{class:"fas fa-eye-slash"},null,-1),Q(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–∫—Ä—ã—Ç –∏–∑-–∑–∞ –Ω–∏–∑–∫–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å. ")]))):M("",!0)])):(r(),d("div",ji,[(S=a.comment)!=null&&S.is_deleted?(r(),d("div",xi,e[21]||(e[21]=[t("p",{class:"deleted-message"},[t("i",{class:"fas fa-trash"}),Q(" –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —É–¥–∞–ª—ë–Ω ")],-1)]))):(r(),d("div",$i,[n.isEditing?(r(),d("div",Bi,[t("div",Hi,[F(t("textarea",{ref:"editTextarea","onUpdate:modelValue":e[2]||(e[2]=C=>n.editContent=C),class:"edit-textarea",rows:"3",maxlength:"1500",onKeydown:e[3]||(e[3]=(...C)=>n.handleEditKeydown&&n.handleEditKeydown(...C)),onInput:e[4]||(e[4]=(...C)=>n.autoResizeEdit&&n.autoResizeEdit(...C))},null,544),[[Xe,n.editContent]])]),t("div",Di,[t("div",Ni,[t("button",{onClick:e[5]||(e[5]=(...C)=>n.cancelEdit&&n.cancelEdit(...C)),class:"cancel-button"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:e[6]||(e[6]=(...C)=>n.saveEdit&&n.saveEdit(...C)),class:"save-button",disabled:!n.editContent.trim()||n.editContent.length>1500}," –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ",8,Oi)]),t("div",Vi,[t("div",{class:x(["character-counter-inline",{"near-limit":n.editContent.length>1400,"at-limit":n.editContent.length>=1500}])},h(n.editContent.length)+"/1500 ",3),t("button",{type:"button",class:x(["emoji-button-inline",{active:n.showEmojiPicker}]),onMouseenter:e[7]||(e[7]=(...C)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...C)),onMouseleave:e[8]||(e[8]=(...C)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...C))}," üòä ",34),t("button",{type:"button",class:x(["emoji-button-inline",{active:n.showImagePicker}]),onMouseenter:e[9]||(e[9]=(...C)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...C)),onMouseleave:e[10]||(e[10]=(...C)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...C))},e[22]||(e[22]=[Je('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-b9b9c094><g id="logo" data-v-b9b9c094><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-b9b9c094></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-b9b9c094></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-b9b9c094></path></g></svg>',1)]),34),t("button",{type:"button",class:"emoji-button-inline spoiler-button",onClick:e[11]||(e[11]=(...C)=>n.insertSpoilerEdit&&n.insertSpoilerEdit(...C)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},e[23]||(e[23]=[t("i",{class:"fas fa-eye-slash"},null,-1)])),t("button",{type:"button",class:"emoji-button-inline link-button",onClick:e[12]||(e[12]=(...C)=>n.insertLinkEdit&&n.insertLinkEdit(...C)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},e[24]||(e[24]=[t("i",{class:"fas fa-link"},null,-1)])),oe(u,{"is-visible":n.showEmojiPicker,onEmojiSelected:n.insertEmojiEdit,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),oe(v,{"is-visible":n.showImagePicker,"current-user":a.currentUser,onImageSelected:n.insertImageEdit,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:n.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),oe(g,{"is-visible":n.showLinkModal,"selected-text":n.selectedTextForLink,onClose:n.closeLinkModal,onSubmit:n.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):(r(),d("div",Fi,[t("p",{class:x(["comment-text",{truncated:n.isLongComment&&!n.isExpanded}]),innerHTML:n.formattedContent},null,10,Ki),n.isLongComment?(r(),d("button",{key:0,onClick:e[13]||(e[13]=(...C)=>n.toggleExpanded&&n.toggleExpanded(...C)),class:"expand-button"},h(n.isExpanded?"–°–≤–µ—Ä–Ω—É—Ç—å":"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å"),1)):M("",!0)]))]))]))]),t("div",qi,[t("div",Wi,[t("div",zi,[!n.isCommentOwner&&!((ae=a.comment)!=null&&ae.is_deleted)?(r(),d("button",{key:0,onClick:e[14]||(e[14]=C=>n.rateComment(1)),class:x(["rating-button",{"rated-up":n.userRating===1}])},e[25]||(e[25]=[t("i",{class:"fas fa-thumbs-up"},null,-1)]),2)):M("",!0),t("span",{class:x(["rating-count",{"rating-positive":n.userRating===1,"rating-negative":n.userRating===-1}])},h(((ce=a.comment)==null?void 0:ce.rating)||0),3),!n.isCommentOwner&&!((J=a.comment)!=null&&J.is_deleted)?(r(),d("button",{key:1,onClick:e[15]||(e[15]=C=>n.rateComment(-1)),class:x(["rating-button",{"rated-down":n.userRating===-1}])},e[26]||(e[26]=[t("i",{class:"fas fa-thumbs-down"},null,-1)]),2)):M("",!0)]),t("div",Gi,[!a.currentUser||a.currentUser.allow_comments===1?(r(),d("button",{key:0,onClick:e[16]||(e[16]=C=>o.$emit("reply",a.comment)),class:"action-button reply-button"},e[27]||(e[27]=[t("i",{class:"fas fa-reply"},null,-1)]))):M("",!0),n.isCommentOwner&&!((he=a.comment)!=null&&he.is_deleted)&&!n.isEditing&&((me=a.currentUser)==null?void 0:me.allow_comments)===1?(r(),d("button",{key:1,onClick:e[17]||(e[17]=(...C)=>n.startEdit&&n.startEdit(...C)),class:"action-button edit-button"},e[28]||(e[28]=[t("i",{class:"fas fa-edit"},null,-1)]))):M("",!0),n.canDeleteComment&&!((ve=a.comment)!=null&&ve.is_deleted)?(r(),d("button",{key:2,onClick:e[18]||(e[18]=(...C)=>n.confirmDelete&&n.confirmDelete(...C)),class:"action-button delete-button"},e[29]||(e[29]=[t("i",{class:"fas fa-trash"},null,-1)]))):M("",!0)])])])],8,pi)}const Zi=Me(bi,[["render",Yi],["__scopeId","data-v-b9b9c094"]]),Qi={name:"CommentThread",components:{CommentItem:Zi,EmojiPicker:ct,ImagePicker:mt,LinkModal:vt},props:{comment:{type:Object,required:!0},currentUser:{type:Object,required:!0},replyTo:{type:Object,default:null},replyContent:{type:String,default:""},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate","submit-reply","cancel-reply","update-reply-content","reply-keydown"],setup(o,{emit:e}){const a=b(null),n=b(!0),{showEmojiPicker:y,showImagePicker:m,showLinkModal:u,selectedTextForLink:v,handleEmojiMouseEnter:g,handleEmojiMouseLeave:s,handleImageMouseEnter:c,handleImageMouseLeave:l,handleButtonMouseEnter:k,handleImageButtonMouseEnter:w,handleButtonMouseLeave:L,closeEmojiPicker:T,closeImagePicker:R,closeLinkModal:_,insertEmojiUniversal:p,insertImageUniversal:A,insertLinkUniversal:U,insertLinkFromModalUniversal:O,insertSpoilerUniversal:N}=ft(),W=C=>{e("update-reply-content",C.target.value);const z=C.target;z&&(z.style.height="auto",z.style.height="".concat(Math.min(z.scrollHeight,200),"px"))},S={get value(){return o.replyContent},set value(C){e("update-reply-content",C)}};return{replyTextarea:a,showEmojiPicker:y,showImagePicker:m,isCollapsed:n,insertEmoji:C=>{p(C,a,S,z=>{e("update-reply-content",z)})},insertImage:C=>{A(C,a,S,z=>{e("update-reply-content",z)})},insertSpoiler:()=>{N(a,S,C=>{e("update-reply-content",C)})},handleEmojiMouseEnter:g,handleEmojiMouseLeave:s,handleImageMouseEnter:c,handleImageMouseLeave:l,handleButtonMouseEnter:k,handleButtonMouseLeave:L,closeEmojiPicker:T,closeImagePicker:R,handleImageButtonMouseEnter:w,handleReplyInput:W,toggleCollapsed:()=>{n.value=!n.value},showLinkModal:u,selectedTextForLink:v,insertLink:()=>{U(a,S,C=>{e("update-reply-content",C)})},closeLinkModal:_,insertLinkFromModal:C=>{O(C,a,S,z=>{e("update-reply-content",z)})}}},computed:{canReply(){return this.currentUser?this.currentUser.allow_comments===1:!0},getReplyPlaceholder(){return this.currentUser?this.currentUser.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç..."},formattedContent(){const{formatContent:o}=pn();return o(this.comment.content)}}},Xi={class:"comment-thread"},Ji={key:0,class:"reply-form"},el={class:"textarea-container"},tl=["value","placeholder","disabled"],nl={class:"reply-footer"},ol={class:"reply-actions"},sl=["disabled"],il={class:"character-counter-container"},ll=["disabled"],al={key:1,class:"replies-container"},rl=["title"],ul={class:"replies-count"},dl=["title"],cl={key:0,class:"replies-content"};function ml(o,e,a,n,y,m){const u=ye("CommentItem"),v=ye("EmojiPicker"),g=ye("ImagePicker"),s=ye("LinkModal"),c=ye("CommentThread",!0);return r(),d("div",Xi,[oe(u,{comment:a.comment,"current-user":a.currentUser,"editing-comment-id":a.editingCommentId,onReply:e[0]||(e[0]=l=>o.$emit("reply",l)),onStartEdit:e[1]||(e[1]=l=>o.$emit("start-edit",l)),onCancelEdit:e[2]||(e[2]=l=>o.$emit("cancel-edit")),onEdit:e[3]||(e[3]=(l,k)=>o.$emit("edit",l,k)),onDelete:e[4]||(e[4]=l=>o.$emit("delete",l)),onRate:e[5]||(e[5]=(l,k)=>o.$emit("rate",l,k))},null,8,["comment","current-user","editing-comment-id"]),a.replyTo&&a.replyTo.id===a.comment.id?(r(),d("div",Ji,[t("div",el,[t("textarea",{ref:"replyTextarea",class:"comment-textarea",value:a.replyContent,placeholder:m.getReplyPlaceholder,disabled:a.currentUser&&a.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:e[6]||(e[6]=(...l)=>n.handleReplyInput&&n.handleReplyInput(...l)),onKeydown:e[7]||(e[7]=l=>o.$emit("reply-keydown",l))},null,40,tl)]),t("div",nl,[t("div",ol,[t("button",{class:"cancel-reply",onClick:e[8]||(e[8]=l=>o.$emit("cancel-reply"))},"–û—Ç–º–µ–Ω–∞"),t("button",{class:"submit-button",disabled:!a.replyContent.trim()||a.replyContent.length>1500||a.currentUser&&a.currentUser.allow_comments!==1,onClick:e[9]||(e[9]=l=>o.$emit("submit-reply"))}," –û—Ç–≤–µ—Ç–∏—Ç—å ",8,sl)]),t("div",il,[t("div",{class:x(["character-counter-inline",{"near-limit":a.replyContent.length>1400,"at-limit":a.replyContent.length>=1500}])},h(a.replyContent.length)+"/1500 ",3),t("button",{type:"button",class:x(["emoji-button-inline",{active:n.showEmojiPicker}]),onMouseenter:e[10]||(e[10]=(...l)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...l)),onMouseleave:e[11]||(e[11]=(...l)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...l))}," üòä ",34),t("button",{type:"button",class:x(["emoji-button-inline",{active:n.showImagePicker}]),onMouseenter:e[12]||(e[12]=(...l)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...l)),onMouseleave:e[13]||(e[13]=(...l)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...l))},e[29]||(e[29]=[Je('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-9b4e55e5><g id="logo" data-v-9b4e55e5><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-9b4e55e5></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-9b4e55e5></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-9b4e55e5></path></g></svg>',1)]),34),t("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:a.currentUser&&a.currentUser.allow_comments!==1,onClick:e[14]||(e[14]=(...l)=>n.insertSpoiler&&n.insertSpoiler(...l)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},e[30]||(e[30]=[t("i",{class:"fas fa-eye-slash"},null,-1)]),8,ll),t("button",{type:"button",class:"emoji-button-inline link-button",onClick:e[15]||(e[15]=(...l)=>n.insertLink&&n.insertLink(...l)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},e[31]||(e[31]=[t("i",{class:"fas fa-link"},null,-1)])),oe(v,{"is-visible":n.showEmojiPicker,onEmojiSelected:n.insertEmoji,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),oe(g,{"is-visible":n.showImagePicker,"current-user":a.currentUser,onImageSelected:n.insertImage,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:e[16]||(e[16]=()=>o.$router.push("/login"))},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose"]),oe(s,{"is-visible":n.showLinkModal,"selected-text":n.selectedTextForLink,onClose:n.closeLinkModal,onSubmit:n.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):M("",!0),a.comment.replies&&a.comment.replies.length>0?(r(),d("div",al,[t("button",{class:"collapse-toggle",title:n.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:e[17]||(e[17]=(...l)=>n.toggleCollapsed&&n.toggleCollapsed(...l))},[t("span",{class:x(["collapse-icon",{expanded:!n.isCollapsed}])},e[32]||(e[32]=[t("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},[t("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1)]),2),t("span",ul,h(a.comment.replies.length)+" "+h(a.comment.replies.length===1?"–æ—Ç–≤–µ—Ç":"–æ—Ç–≤–µ—Ç–æ–≤"),1)],8,rl),t("div",{class:"vertical-line-clickable",title:n.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:e[18]||(e[18]=(...l)=>n.toggleCollapsed&&n.toggleCollapsed(...l))},[t("div",{class:x(["vertical-line-visual",{collapsed:n.isCollapsed}])},null,2)],8,dl),n.isCollapsed?M("",!0):(r(),d("div",cl,[(r(!0),d(te,null,ge(a.comment.replies,l=>(r(),Re(c,{key:l.id,comment:l,"current-user":a.currentUser,"reply-to":a.replyTo,"reply-content":a.replyContent,"editing-comment-id":a.editingCommentId,onReply:e[19]||(e[19]=k=>o.$emit("reply",k)),onStartEdit:e[20]||(e[20]=k=>o.$emit("start-edit",k)),onCancelEdit:e[21]||(e[21]=k=>o.$emit("cancel-edit")),onEdit:e[22]||(e[22]=(k,w)=>o.$emit("edit",k,w)),onDelete:e[23]||(e[23]=k=>o.$emit("delete",k)),onRate:e[24]||(e[24]=(k,w)=>o.$emit("rate",k,w)),onSubmitReply:e[25]||(e[25]=k=>o.$emit("submit-reply")),onCancelReply:e[26]||(e[26]=k=>o.$emit("cancel-reply")),onUpdateReplyContent:e[27]||(e[27]=k=>o.$emit("update-reply-content",k)),onReplyKeydown:e[28]||(e[28]=k=>o.$emit("reply-keydown",k))},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id"]))),128))]))])):M("",!0)])}const vl=Me(Qi,[["render",ml],["__scopeId","data-v-9b4e55e5"]]),fl={name:"Comments",components:{CommentThread:vl,Notification:ot,EmojiPicker:ct,ImagePicker:mt,LinkModal:vt},props:{movieId:{type:[String,Number],required:!0}},setup(o){const e=ut(),a=nt(),n=et(),y=b([]),m=b(""),u=b(null),v=b(""),g=b(null),s=b(e.user),c=b(null),l=b(null),k=b(n.isAutoShowComments),w=b(!1),L=b(3),T=b(3),{showEmojiPicker:R,showImagePicker:_,showLinkModal:p,selectedTextForLink:A,handleEmojiMouseEnter:U,handleEmojiMouseLeave:O,handleImageMouseEnter:N,handleImageMouseLeave:W,handleButtonMouseEnter:S,handleImageButtonMouseEnter:ae,handleButtonMouseLeave:ce,closeEmojiPicker:J,closeImagePicker:he,closeLinkModal:me,insertEmojiUniversal:ve,insertImageUniversal:C,insertLinkUniversal:z,insertLinkFromModalUniversal:_e,insertSpoilerUniversal:we,autoResize:re}=ft(),ue=H(()=>{const $=(K=null)=>y.value.filter(Z=>Z.parent_id===K).sort((Z,ie)=>Z.id-ie.id).map(Z=>({...Z,replies:$(Z.id)})).filter(Z=>!Z.is_deleted||Z.replies&&Z.replies.length>0);return $()}),ee=H(()=>{const $=K=>K.reduce((Z,ie)=>Z+1+$(ie.replies||[]),0);return $(ue.value)}),j=H(()=>ue.value.slice(0,T.value)),f=H(()=>ue.value.length>T.value),Y=H(()=>ue.value.length-T.value),se=()=>{T.value+=L.value},B=async()=>{try{const $=await Tn(o.movieId);y.value=$}catch($){console.error("Failed to load comments:",$),c.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.")}},be=async()=>{if(w.value)return;if(!e.token){c.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Ce});return}if(s.value&&s.value.allow_comments!==1){c.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!m.value.replace(/\[spoiler\]\s*\[\/spoiler\]/g,"").replace(/\[img\]\s*\[\/img\]/g,"").replace(/\[link=[^\]]+\]\s*\[\/link\]/g,"").trim()){c.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º");return}if(m.value.length>1500){c.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await dn(o.movieId,m.value.trim()),m.value="",await B(),k.value=!0,ke(()=>{l.value&&(l.value.focus(),l.value.style.height="auto"),setTimeout(()=>{const K=document.querySelectorAll(".comment-item[data-comment-id]");if(K.length>0){const Z=Array.from(K).map(ie=>parseInt(ie.getAttribute("data-comment-id"))).filter(ie=>!isNaN(ie));if(Z.length>0){const ie=Math.max(...Z),Fe=document.querySelector('[data-comment-id="'.concat(ie,'"]'));Fe&&Fe.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}},300)})}catch(K){console.error("Failed to create comment:",K),c.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},pe=$=>{if(!e.token){c.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Ce});return}g.value=null,u.value=$,v.value="",ke(()=>{const K=document.querySelector(".reply-form");K&&K.scrollIntoView({behavior:"smooth",block:"center"})})},Te=async()=>{if(!e.token){c.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Ce});return}if(s.value&&s.value.allow_comments!==1){c.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!(!v.value.trim()||!u.value)){if(v.value.length>1500){c.value.showNotification("–û—Ç–≤–µ—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await dn(o.movieId,v.value.trim(),u.value.id);const $=u.value.id;await B(),v.value="",u.value=null,ke(()=>{setTimeout(()=>{const K=document.querySelector('[data-comment-id="'.concat($,'"]'));if(K){const Z=K.querySelector(".replies-content");if(Z){const ie=Z.querySelectorAll(".comment-item[data-comment-id]");if(ie.length>0){const Fe=Array.from(ie).map(Ke=>parseInt(Ke.getAttribute("data-comment-id"))).filter(Ke=>!isNaN(Ke));if(Fe.length>0){const Ke=Math.max(...Fe),ne=document.querySelector('[data-comment-id="'.concat(Ke,'"]'));ne&&ne.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}}}},300)})}catch($){console.error("Error submitting reply:",$),c.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}}},Ue=async($,K)=>{if(!e.token){c.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Ce});return}if(s.value&&s.value.allow_comments!==1){c.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(K.length>1500){c.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await An($,K.trim()),await B(),g.value=null}catch(Z){console.error("Failed to update comment:",Z),c.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},de=async $=>{if(!e.token){c.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Ce});return}try{await Sn($),await B()}catch(K){console.error("Failed to delete comment:",K),c.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},le=async($,K)=>{if(!e.token){c.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Ce});return}try{await Pn($,K),await B()}catch(Z){console.error("Failed to rate comment:",Z),c.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ü–µ–Ω–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},je=$=>{w.value||R.value||$.key==="Enter"&&!$.shiftKey&&($.preventDefault(),be())},Pe=$=>{$.key==="Enter"&&!$.shiftKey&&($.preventDefault(),Te())},Ce=()=>{a.push("/login")},xe=$=>{w.value=!0,ve($,l,m,K=>{m.value=K}),setTimeout(()=>{w.value=!1},100)},Ve=$=>{C($,l,m,K=>{m.value=K})},$e=()=>{we(l,m,$=>{m.value=$})},Se=()=>{z(l,m,$=>{m.value=$})},E=$=>{_e($,l,m,K=>{m.value=K})},V=H(()=>s.value?s.value.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."),Ee=H(()=>s.value?s.value.allow_comments===1:!0),st=$=>{u.value=null,v.value="",g.value=$},it=()=>{g.value=null};return qe(()=>{B()}),{comments:y,groupedComments:ue,displayedComments:j,hasMoreComments:f,remainingCommentsCount:Y,showMoreComments:se,newComment:m,replyTo:u,replyContent:v,editingCommentId:g,currentUser:s,notificationRef:c,commentTextarea:l,showComments:k,submitComment:be,handleReply:pe,submitReply:Te,handleEdit:Ue,handleDelete:de,handleRate:le,handleCommentKeydown:je,handleReplyKeydown:Pe,autoResize:re,totalCommentsCount:ee,getCommentWordForm:yi,showEmojiPicker:R,showImagePicker:_,showLinkModal:p,selectedTextForLink:A,insertEmoji:xe,insertImage:Ve,handleEmojiMouseEnter:U,handleEmojiMouseLeave:O,handleImageMouseEnter:N,handleImageMouseLeave:W,closeEmojiPicker:J,closeImagePicker:he,handleButtonMouseLeave:ce,handleButtonMouseEnter:S,handleImageButtonMouseEnter:ae,getCommentPlaceholder:V,canComment:Ee,handleStartEdit:st,handleCancelEdit:it,insertSpoiler:$e,insertLink:Se,insertLinkFromModal:E,closeLinkModal:me}}},gl={class:"comments-section"},kl={class:"spoiler-content"},yl={key:1,class:"comments-container"},hl={class:"comments-header"},bl={class:"textarea-container"},pl=["placeholder","disabled"],Cl={class:"comment-footer"},wl={class:"comment-actions"},Ml=["disabled"],_l={class:"character-counter-container"},El=["disabled"],Ll=["disabled"],Il=["disabled"],Rl={class:"comments-list"},Tl={key:0,class:"show-more-comments"};function Pl(o,e,a,n,y,m){const u=ye("EmojiPicker"),v=ye("ImagePicker"),g=ye("LinkModal"),s=ye("CommentThread"),c=ye("Notification");return r(),d("div",gl,[n.showComments?(r(),d("div",yl,[t("div",hl,[t("button",{class:"hide-comments-btn",onClick:e[1]||(e[1]=l=>n.showComments=!1)},e[18]||(e[18]=[t("i",{class:"fas fa-eye-slash"},null,-1),Q(" –°–∫—Ä—ã—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ")]))]),t("form",{class:"comment-form",onSubmit:e[11]||(e[11]=Oe((...l)=>n.submitComment&&n.submitComment(...l),["prevent"]))},[t("div",bl,[F(t("textarea",{ref:"commentTextarea","onUpdate:modelValue":e[2]||(e[2]=l=>n.newComment=l),class:"comment-textarea",placeholder:n.getCommentPlaceholder,disabled:n.currentUser&&n.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:e[3]||(e[3]=(...l)=>n.autoResize&&n.autoResize(...l)),onKeydown:e[4]||(e[4]=(...l)=>n.handleCommentKeydown&&n.handleCommentKeydown(...l))},null,40,pl),[[Xe,n.newComment]])]),t("div",Cl,[t("div",wl,[t("button",{class:"submit-button",type:"submit",disabled:!n.newComment.trim()||n.newComment.length>1500||n.currentUser&&n.currentUser.allow_comments!==1}," –û—Ç–ø—Ä–∞–≤–∏—Ç—å ",8,Ml)]),t("div",_l,[t("div",{class:x(["character-counter-inline",{"near-limit":n.newComment.length>1400,"at-limit":n.newComment.length>=1500}])},h(n.newComment.length)+"/1500 ",3),t("button",{type:"button",class:x(["emoji-button-inline",{active:n.showEmojiPicker}]),disabled:n.currentUser&&n.currentUser.allow_comments!==1,onMouseenter:e[5]||(e[5]=(...l)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...l)),onMouseleave:e[6]||(e[6]=(...l)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...l))}," üòä ",42,El),t("button",{type:"button",class:x(["emoji-button-inline",{active:n.showImagePicker}]),disabled:n.currentUser&&n.currentUser.allow_comments!==1,onMouseenter:e[7]||(e[7]=(...l)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...l)),onMouseleave:e[8]||(e[8]=(...l)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...l))},e[19]||(e[19]=[Je('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-87a95d46><g id="logo" data-v-87a95d46><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-87a95d46></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-87a95d46></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-87a95d46></path></g></svg>',1)]),42,Ll),t("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:n.currentUser&&n.currentUser.allow_comments!==1,onClick:e[9]||(e[9]=(...l)=>n.insertSpoiler&&n.insertSpoiler(...l)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},e[20]||(e[20]=[t("i",{class:"fas fa-eye-slash"},null,-1)]),8,Il),t("button",{type:"button",class:"emoji-button-inline link-button",onClick:e[10]||(e[10]=(...l)=>n.insertLink&&n.insertLink(...l)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},e[21]||(e[21]=[t("i",{class:"fas fa-link"},null,-1)])),oe(u,{"is-visible":n.showEmojiPicker&&n.canComment,onEmojiSelected:n.insertEmoji,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),oe(v,{"is-visible":n.showImagePicker&&n.canComment,"current-user":n.currentUser,onImageSelected:n.insertImage,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:o.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),oe(g,{"is-visible":n.showLinkModal,"selected-text":n.selectedTextForLink,onClose:n.closeLinkModal,onSubmit:n.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])],32),t("div",Rl,[(r(!0),d(te,null,ge(n.displayedComments,l=>(r(),Re(s,{key:l.id,comment:l,"current-user":n.currentUser,"reply-to":n.replyTo,"reply-content":n.replyContent,"editing-comment-id":n.editingCommentId,"is-first-comment":!1,onReply:n.handleReply,onStartEdit:n.handleStartEdit,onCancelEdit:n.handleCancelEdit,onEdit:n.handleEdit,onDelete:n.handleDelete,onRate:n.handleRate,onSubmitReply:n.submitReply,onCancelReply:e[12]||(e[12]=k=>n.replyTo=null),onUpdateReplyContent:e[13]||(e[13]=k=>n.replyContent=k),onReplyKeydown:n.handleReplyKeydown},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id","onReply","onStartEdit","onCancelEdit","onEdit","onDelete","onRate","onSubmitReply","onReplyKeydown"]))),128)),n.hasMoreComments?(r(),d("div",Tl,[t("button",{class:"show-more-btn",onClick:e[14]||(e[14]=(...l)=>n.showMoreComments&&n.showMoreComments(...l))}," –ü–æ–∫–∞–∑–∞—Ç—å –µ—â–µ "+h(n.remainingCommentsCount)+" "+h(n.getCommentWordForm(n.remainingCommentsCount)),1)])):M("",!0)])])):(r(),d("div",{key:0,class:"spoiler-warning",onClick:e[0]||(e[0]=l=>n.showComments=!0)},[t("div",kl,[e[15]||(e[15]=t("i",{class:"fas fa-eye-slash"},null,-1)),e[16]||(e[16]=t("h3",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–∫—Ä—ã—Ç—ã",-1)),e[17]||(e[17]=t("p",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä—ã. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å.",-1)),t("div",{class:x(["comments-count",{"no-comments":n.totalCommentsCount===0}])},[n.totalCommentsCount===0?(r(),d(te,{key:0},[Q(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç ")],64)):(r(),d(te,{key:1},[Q(h(n.totalCommentsCount)+" "+h(n.getCommentWordForm(n.totalCommentsCount)),1)],64))],2)])])),oe(c,{ref:"notificationRef"},null,512)])}const Sl=Me(fl,[["render",Pl],["__scopeId","data-v-87a95d46"]]),Al={class:"movie-info"},Ul={class:"content"},jl={key:0,class:"content-card"},xl={class:"movie-skeleton"},$l={class:"movie-skeleton__player"},Bl={key:2,class:"content-card"},Hl={key:3,class:"content-card"},Dl={class:"content-header"},Nl=["src"],Ol={class:"content-title"},Vl={key:0,class:"ratings-links"},Fl={key:1},Kl=["href","title"],ql={key:2},Wl=["href","title"],zl={key:3},Gl=["href","title"],Yl={key:4},Zl=["href","title"],Ql={key:5},Xl=["href"],Jl={key:6,class:"rating-links-group"},ea=["href"],ta=["title"],na={key:0,class:"fa-regular fa-face-grin-wink"},oa={key:1,class:"fas fa-spinner fa-spin"},sa={key:2,class:"nudity-info-popup"},ia={class:"nudity-info-content"},la=["content"],aa=["content"],ra={class:"additional-info"},ua={class:"info-content"},da={class:"details-container"},ca={class:"info-list"},ma={key:0},va={key:1},fa={key:2},ga={key:3},ka={key:4},ya={key:5},ha={key:6},ba={key:7},pa={key:8},Ca={class:"content-info"},wa={key:0,class:"content-description-text"},Ma={key:2,class:"comments-section"},_a={key:3,class:"staff-section"},Ea={class:"staff-categories"},La={key:0,class:"staff-category"},Ia={class:"staff-list"},Ra=["href","title"],Ta=["src","alt"],Pa={class:"staff-name"},Sa={key:0,class:"staff-role"},Aa=["href","title"],Ua={key:1,class:"staff-category"},ja={class:"staff-names-container"},xa={class:"staff-names-list"},$a=["href"],Ba=["href","title"],Ha={key:2,class:"staff-category"},Da={class:"staff-names-container"},Na={class:"staff-names-list"},Oa=["href"],Va=["href","title"],Fa={key:4,class:"yt-video-container"},Ka={key:5,class:"related-movies"},qa=["title"],Wa={key:6,class:"related-movies"},za=["title"],Ga={__name:"MovieInfo",setup(o){const e=b(!0),a=et(),n=ut(),y=Un(),m=kn(),u=b(m.params.kp_id),v=b(""),g=b(null),s=b(null),c=jn(),k=Vn().areTrailersActive,w=b(null),L=b(!1),T=b(!1),R=b(10),_=b(null),p=b(!1),A=H(()=>a.isCommentsEnabled),U=()=>{if(s.value){const j=s.value.name_ru||s.value.name_en||s.value.name_original||"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å–º–µ";document.title=j}},O=j=>j?j.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",N=j=>(j||[]).map(f=>({kp_id:f.film_id,poster:f.poster_url_preview||f.poster_url,title:f.name_ru||f.name_en||f.name_original})),W=j=>{if(typeof j!="number")return;const f=Math.floor(j/60),Y=j%60;return"".concat(f," —á. ").concat(Y," –º–∏–Ω.")},S=b(!1),ae=b({top:"0px",left:"0px"}),ce=j=>{S.value=!0,ae.value={top:"".concat(j.pageY+10,"px"),left:"".concat(j.pageX-70,"px")}},J=b(null),he=async()=>{try{const j=[s.value.name_ru||s.value.name_en||s.value.name_original,...s.value.year?[s.value.year]:[],...s.value.film_length?[W(s.value.film_length)]:[]];await navigator.clipboard.writeText(j.join(", ")),J.value.showNotification("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ")}catch(j){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",j)}},me=async(j=!0)=>{var f,Y,se,B,be,pe,Te,Ue;try{let de;if(u.value.startsWith("shiki")?de=await $n(u.value):de=await Bn(u.value,n.token),Array.isArray(de)&&de.length===0)throw new Error("–î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–∏—Å–∫.");s.value=de,u.value.startsWith("shiki")?s.value={...s.value,title:s.value.name_ru||s.value.name_en,name_original:s.value.name_en,short_description:s.value.slogan}:s.value={...s.value,title:s.value.name_ru||s.value.name_en||s.value.name_original,kinopoisk_id:u.value},c.setHeaderContent({text:s.value.title,imageUrl:s.value.logo_url}),U();const le={kp_id:u.value,title:((f=s.value)==null?void 0:f.name_ru)||((Y=s.value)==null?void 0:Y.name_en)||((se=s.value)==null?void 0:se.name_original),poster:((B=s.value)==null?void 0:B.poster_url)||((be=s.value)==null?void 0:be.cover_url)||((pe=s.value)==null?void 0:pe.screenshots[0]),year:(Te=s.value)==null?void 0:Te.year,type:(Ue=s.value)==null?void 0:Ue.type};if(u.value.startsWith("shiki"))if(s.value.screenshots&&s.value.screenshots.length>0){const Pe=Math.floor(Math.random()*s.value.screenshots.length),Ce=s.value.screenshots[Pe];y.updateMoviePoster(Ce)}else le.poster&&y.updateMoviePoster(le.poster);else le.poster&&y.updateMoviePoster(le.poster);if(H(()=>a.isHistoryAllowed).value&&le.kp_id&&le.title&&j)if(n.token)try{await hn(le.kp_id,q.HISTORY)}catch(Pe){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é:",Pe)}else a.addToHistory({...le})}catch(de){const{message:le,code:je}=rt(de);v.value=le,g.value=je,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–ª—å–º–∞—Ö:",de)}},ve=H(()=>{var j,f;return console.log("–¢—Ä–µ–π–ª–µ—Ä—ã:",(j=s.value)==null?void 0:j.videos),(f=s.value)==null?void 0:f.videos}),C=H(()=>{var j;return N((j=s.value)==null?void 0:j.sequels_and_prequels)}),z=H(()=>{var j;return N((j=s.value)==null?void 0:j.similars)}),_e=()=>{var se;const j=((se=document.querySelector(".related-movies"))==null?void 0:se.clientWidth)||0,Y=Math.floor(j/160)||10;R.value=Math.max(1,Y)},we=()=>{_e()},re=j=>{if(j.altKey&&j.keyCode===84&&document.querySelector(".player-container")){const Y=document.querySelector(".theater-mode-btn");Y&&Y.click()}},ue=async()=>{var j;if(!n.token){J.value.showNotification('–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:()=>c.openLogin()});return}if((j=s.value)!=null&&j.imdb_id){if(_.value){_.value=null;return}p.value=!0;try{const f=await Hn(s.value.imdb_id);_.value=f.nudity_info}catch(f){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö:",f),J.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö")}finally{p.value=!1}}};qe(async()=>{await me(),e.value=!1,document.addEventListener("keydown",re),window.addEventListener("resize",we),setTimeout(_e,100)}),xn(async()=>{c.clearHeaderContent(),document.removeEventListener("keydown",re),window.removeEventListener("resize",we)}),Ae(()=>m.params.kp_id,async j=>{j&&j!==u.value&&(c.clearHeaderContent(),u.value=j,w.value=null,await me(),e.value=!1)},{immediate:!0}),Ae(s,()=>{U()},{deep:!0});const ee=j=>{var f,Y;return((Y=(f=s.value)==null?void 0:f.staff)==null?void 0:Y.filter(se=>se.profession_key===j))||[]};return(j,f)=>{var Y,se;return r(),d(te,null,[t("div",Al,[t("div",Ul,[(e.value||!s.value)&&!v.value?(r(),d("div",jl,[t("div",xl,[f[4]||(f[4]=Je('<div class="movie-skeleton__header" data-v-8c9baba0><div class="movie-skeleton__title" data-v-8c9baba0></div></div><div class="movie-skeleton__ratings" data-v-8c9baba0><div class="movie-skeleton__rating-item" data-v-8c9baba0></div><div class="movie-skeleton__rating-item" data-v-8c9baba0></div><div class="movie-skeleton__rating-item" data-v-8c9baba0></div></div>',2)),t("div",$l,[oe(bn)]),f[5]||(f[5]=Je('<div class="movie-skeleton__additional-info" data-v-8c9baba0><div class="movie-skeleton__section-title" data-v-8c9baba0></div><div class="movie-skeleton__info-list" data-v-8c9baba0><div class="movie-skeleton__info-item" data-v-8c9baba0></div><div class="movie-skeleton__info-item" data-v-8c9baba0></div><div class="movie-skeleton__info-item" data-v-8c9baba0></div><div class="movie-skeleton__info-item" data-v-8c9baba0></div><div class="movie-skeleton__info-item" data-v-8c9baba0></div></div></div><div class="movie-skeleton__description" data-v-8c9baba0><div class="movie-skeleton__description-line" data-v-8c9baba0></div><div class="movie-skeleton__description-line" data-v-8c9baba0></div><div class="movie-skeleton__description-line" data-v-8c9baba0></div><div class="movie-skeleton__description-line" data-v-8c9baba0></div></div>',2))])])):M("",!0),v.value?(r(),Re(yn,{key:1,message:v.value,code:g.value},null,8,["message","code"])):M("",!0),v.value?(r(),d("div",Bl,[(r(),Re(gn,{key:u.value,"kp-id":u.value,"movie-info":s.value,"onUpdate:movieInfo":me},null,8,["kp-id","movie-info"]))])):M("",!0),s.value&&!e.value?(r(),d("div",Hl,[t("div",Dl,[s.value.logo_url?(r(),d("div",{key:0,class:"content-logo",onMousemove:ce,onMouseleave:f[0]||(f[0]=B=>S.value=!1),onClick:he},[t("img",{src:s.value.logo_url,alt:"–õ–æ–≥–æ—Ç–∏–ø —Ñ–∏–ª—å–º–∞",class:"content-logo"},null,8,Nl)],32)):(r(),d("div",{key:1,onMousemove:ce,onMouseleave:f[1]||(f[1]=B=>S.value=!1),onClick:he},[t("h1",Ol,h(s.value.title),1)],32)),F(t("div",{class:"title-copy-tooltip",style:tt(ae.value)}," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ",4),[[G,S.value]])]),s.value.kinopoisk_id||s.value.title||s.value.imdb_id||s.value.rating_imdb||s.value.shikimori_id?(r(),d("div",Vl,[s.value.kinopoisk_id?(r(),Re(Ts,{key:0,"kp-id":s.value.kinopoisk_id,"show-dash":!0},null,8,["kp-id"])):M("",!0),s.value.kinopoisk_id?(r(),d("div",Fl,[t("a",{href:"https://www.kinopoisk.ru/film/".concat(s.value.kinopoisk_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:s.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(O(s.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[f[6]||(f[6]=t("img",{src:mn,alt:"–ö–ü",class:"rating-logo"},null,-1)),t("span",null,h(s.value.rating_kinopoisk?s.value.rating_kinopoisk:"‚Äî"),1),f[7]||(f[7]=t("img",{src:We,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Kl)])):M("",!0),!s.value.kinopoisk_id&&s.value.title?(r(),d("div",ql,[t("a",{href:"https://www.kinopoisk.ru/index.php?kp_query=".concat(encodeURIComponent(s.value.title+(s.value.year?" "+s.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:s.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(O(s.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[f[8]||(f[8]=t("img",{src:mn,alt:"–ö–ü",class:"rating-logo"},null,-1)),t("span",null,h(s.value.rating_kinopoisk?s.value.rating_kinopoisk:"‚Äî"),1),f[9]||(f[9]=t("img",{src:We,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Wl)])):M("",!0),s.value.imdb_id?(r(),d("div",zl,[t("a",{href:"https://www.imdb.com/title/".concat(s.value.imdb_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:s.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(O(s.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[f[10]||(f[10]=t("img",{src:vn,alt:"IMDb",class:"rating-logo"},null,-1)),t("span",null,h(s.value.rating_imdb?s.value.rating_imdb:"‚Äî"),1),f[11]||(f[11]=t("img",{src:We,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Gl)])):M("",!0),!s.value.imdb_id&&s.value.title?(r(),d("div",Yl,[t("a",{href:"https://www.imdb.com/find/?q=".concat(encodeURIComponent(s.value.title+(s.value.year?" "+s.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:s.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(O(s.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[f[12]||(f[12]=t("img",{src:vn,alt:"IMDb",class:"rating-logo"},null,-1)),t("span",null,h(s.value.rating_imdb?s.value.rating_imdb:"‚Äî"),1),f[13]||(f[13]=t("img",{src:We,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Zl)])):M("",!0),s.value.shikimori_id?(r(),d("div",Ql,[t("a",{href:"https://shikimori.one/animes/".concat(s.value.shikimori_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},f[14]||(f[14]=[t("img",{src:Fn,alt:"Shiki",class:"rating-logo"},null,-1),t("img",{src:We,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,Xl)])):M("",!0),s.value.imdb_id?(r(),d("div",Jl,[t("a",{href:"https://www.imdb.com/title/".concat(s.value.imdb_id,"/parentalguide"),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},f[15]||(f[15]=[t("span",null,"Parents Guide",-1),t("img",{src:We,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,ea),t("button",{class:"rating-link nudity-info-btn",onClick:ue,title:_.value?"–°–∫—Ä—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é":"–ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ü–µ–Ω–∞—Ö(Sex & Nudity)"},[p.value?(r(),d("i",oa)):(r(),d("i",na)),_.value?(r(),d("div",sa,[t("div",ia,h(_.value),1)])):M("",!0)],8,ta)])):M("",!0)])):M("",!0),(r(),Re(gn,{key:u.value,"kp-id":u.value,"movie-info":s.value,"onUpdate:movieInfo":me},null,8,["kp-id","movie-info"])),t("meta",{name:"title-and-year",content:s.value.type==="FILM"&&s.value.year?"".concat(s.value.title," (").concat(s.value.year,")"):s.value.title},null,8,la),s.value.name_original?(r(),d("meta",{key:1,name:"original-title",content:s.value.name_original},null,8,aa)):M("",!0),t("div",ra,[f[25]||(f[25]=t("h2",{class:"additional-info-title"},"–ü–æ–¥—Ä–æ–±–Ω–µ–µ",-1)),t("div",ua,[t("div",da,[t("ul",ca,[s.value.type&&X(cn)[s.value.type]?(r(),d("li",ma,[f[16]||(f[16]=t("strong",null,"–¢–∏–ø:",-1)),Q(" "+h(X(cn)[s.value.type]),1)])):M("",!0),s.value.year?(r(),d("li",va,[f[17]||(f[17]=t("strong",null,"–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞:",-1)),Q(" "+h(s.value.year),1)])):M("",!0),s.value.title?(r(),d("li",fa,[f[18]||(f[18]=t("strong",null,"–ù–∞–∑–≤–∞–Ω–∏–µ:",-1)),Q(" "+h(s.value.title),1)])):M("",!0),s.value.name_original?(r(),d("li",ga,[f[19]||(f[19]=t("strong",null,"–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:",-1)),Q(" "+h(s.value.name_original),1)])):M("",!0),s.value.slogan?(r(),d("li",ka,[f[20]||(f[20]=t("strong",null,"–°–ª–æ–≥–∞–Ω:",-1)),Q(" "+h(s.value.slogan),1)])):M("",!0),s.value.production_companies?(r(),d("li",ya,[f[21]||(f[21]=t("strong",null,"–ü—Ä–æ–¥–∞–∫—à–Ω:",-1)),Q(" "+h(s.value.production_companies),1)])):M("",!0),(Y=s.value.countries)!=null&&Y.length?(r(),d("li",ha,[f[22]||(f[22]=t("strong",null,"–°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞:",-1)),Q(" "+h(s.value.countries.map(B=>B.country).join(", ")),1)])):M("",!0),(se=s.value.genres)!=null&&se.length?(r(),d("li",ba,[f[23]||(f[23]=t("strong",null,"–ñ–∞–Ω—Ä—ã:",-1)),Q(" "+h(s.value.genres.map(B=>B.genre).join(", ")),1)])):M("",!0),s.value.film_length?(r(),d("li",pa,[f[24]||(f[24]=t("strong",null,"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:",-1)),Q(" "+h(W(s.value.film_length)),1)])):M("",!0)])])])]),t("div",Ca,[s.value.description?(r(),d("p",wa,h(s.value.description),1)):M("",!0)]),A.value?(r(),d("div",Ma,[(r(),Re(Sl,{"movie-id":u.value,key:u.value},null,8,["movie-id"]))])):M("",!0),s.value.staff?(r(),d("div",_a,[t("div",Ea,[ee("ACTOR").length?(r(),d("div",La,[f[26]||(f[26]=t("h3",{class:"additional-info-title"},"–ê–∫—Ç—ë—Ä—ã",-1)),t("div",Ia,[(r(!0),d(te,null,ge(ee("ACTOR").slice(0,12),B=>(r(),d("div",{key:B.staff_id,class:"staff-item"},[t("a",{href:"https://www.kinopoisk.ru/name/".concat(B.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-link",title:B.description||""},[t("img",{src:B.poster_url,alt:B.name_ru,class:"staff-photo"},null,8,Ta),t("span",Pa,h(B.name_ru||B.name_en),1),B.description?(r(),d("span",Sa,h(B.description),1)):M("",!0)],8,Ra)]))),128)),t("a",{class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(u.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(ee("ACTOR").length," –∞–∫—Ç–µ—Ä–æ–≤")}," +"+h(ee("ACTOR").length-12),9,Aa)])])):M("",!0),ee("DIRECTOR").length?(r(),d("div",Ua,[f[27]||(f[27]=t("h3",{class:"additional-info-title"},"–†–µ–∂–∏—Å—Å—ë—Ä—ã",-1)),t("div",ja,[t("div",xa,[(r(!0),d(te,null,ge(ee("DIRECTOR").slice(0,5),B=>(r(),d("a",{key:B.staff_id,href:"https://www.kinopoisk.ru/name/".concat(B.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},h(B.name_ru||B.name_en),9,$a))),128)),ee("DIRECTOR").length>5?(r(),d("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(u.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(ee("DIRECTOR").length," —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–≤")}," +"+h(ee("DIRECTOR").length-5),9,Ba)):M("",!0)])])])):M("",!0),ee("PRODUCER").length?(r(),d("div",Ha,[f[28]||(f[28]=t("h3",{class:"additional-info-title"},"–ü—Ä–æ–¥—é—Å–µ—Ä—ã",-1)),t("div",Da,[t("div",Na,[(r(!0),d(te,null,ge(ee("PRODUCER").slice(0,5),B=>(r(),d("a",{key:B.staff_id,href:"https://www.kinopoisk.ru/name/".concat(B.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},h(B.name_ru||B.name_en),9,Oa))),128)),ee("PRODUCER").length>5?(r(),d("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(u.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(ee("PRODUCER").length," –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤")}," +"+h(ee("PRODUCER").length-5),9,Va)):M("",!0)])])])):M("",!0)])])):M("",!0),ve.value.length&&X(k)?(r(),d("div",Fa,[oe(hs,{videos:ve.value,"active-video-index":w.value,onSelect:j.playTrailer},null,8,["videos","active-video-index","onSelect"])])):M("",!0),C.value.length?(r(),d("div",Ka,[f[29]||(f[29]=t("h2",null,"–°–∏–∫–≤–µ–ª—ã –∏ –ø—Ä–∏–∫–≤–µ–ª—ã",-1)),oe(X(fn),{"movies-list":L.value?C.value:C.value.slice(0,R.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),C.value.length>R.value?(r(),d("a",{key:0,class:"expand-circle-button",onClick:f[2]||(f[2]=B=>L.value=!L.value),title:"".concat(L.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(C.value.length,")")},h(L.value?"‚àí":"+".concat(C.value.length-R.value)),9,qa)):M("",!0)])):M("",!0),z.value.length?(r(),d("div",Wa,[f[30]||(f[30]=t("h2",null,"–ü–æ—Ö–æ–∂–∏–µ",-1)),oe(X(fn),{"movies-list":T.value?z.value:z.value.slice(0,R.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),z.value.length>R.value?(r(),d("a",{key:0,class:"expand-circle-button",onClick:f[3]||(f[3]=B=>T.value=!T.value),title:"".concat(T.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(z.value.length,")")},h(T.value?"‚àí":"+".concat(z.value.length-R.value)),9,za)):M("",!0)])):M("",!0)])):M("",!0)])]),oe(ot,{ref_key:"notificationRef",ref:J},null,512)],64)}}},er=Me(Ga,[["__scopeId","data-v-8c9baba0"]]);export{er as default};
