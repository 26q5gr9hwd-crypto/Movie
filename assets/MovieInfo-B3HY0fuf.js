import{_ as Be,r as f,c as W,b as r,d as i,e,s as de,t as g,K as ge,g as p,L as Le,n as A,q as Ye,u as it,i as dt,N as yn,z as at,l as ze,o as Ge,O as st,x as He,E as kn,f as we,P as lt,m as X,Q as oe,y as ce,U as Q,R as bn,D as ct,S as pe,V as Cn,W as pn,X as wn,Y as un,Z as _n,k as En,v as vt,$ as Mn,a0 as je,a1 as ot,a2 as In,a3 as Ln,a4 as Rn,a5 as Tn,a6 as cn,a7 as $n,a8 as An,a as Sn,a9 as dn,aa as Pn,ab as Un,ac as xn}from"./index-Cgr0C7WY.js";import{S as hn,_ as Hn,a as vn,b as mn,M as fn}from"./MovieList-293j1Sp0.js";import{N as rt}from"./ToastMessage-BUzv1kPz.js";import{u as jn,S as Bn,a as Dn}from"./trailer-BaPl4eK8.js";const Qe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVR4nO2ZQUoDMRSGR7eewHoFsVS0HkUUXNXqASqK2EURBPFIVRe6c+UN1CvUXWvbT4KvMAwzNnnJdCrmg1BKad7/v7y0b5IkiUQiCwGoAx3gQjEugZ0qxTeAIX6MKjMBnBOGS62AVWAPOHVYdlMu9YArYOhphLeBT+ALmOKGEd2QubaAK+B2zngFxt4GgDXgGZjgR8ch5oEkCi8DkvlnRcYLV0Apfqw10M7JvPkV6AN3FmVwK+WyZRnvMEe8ef/ibECyb2o+zRuwnpQAxeLNivQ0BvYyE46qEJ/8fK4ycJKp/X4V4n0MdDNfukkqEO9jwP1LDgD7BeKPgmgp04CL+KUz4Cp+qQxoxC+NAdsNm4c0hWkukkUa8BGfegiadbFDq3/2UAZ8xc+QVvzMtqcKYkBaZ5/MN5xEl2DgLGDZ1KswsC09FPJqXTZoNm5oA6kyMGI2FxqfkluJ0uMTDfhBXAHiHvCCWEL8/RLqlv1MPCf+TSZ+13WC7KnEfWlqcwAeU7GNjnbiQsG5UC1ZAEAt1UMhOpquk6zknMy9l20C2AA+MnEHRo9msuOCs9EH4Fp5TVQ0rqVs0plH4re02Qh1Oq1lCjypsp+5H3gKcD/gykTirqnFZ/ZDy+OGxpapzD+QePrM/2KkKfcGPcv7AdvRkz23G1x4JPIP+AY3r/ywUk/2JAAAAABJRU5ErkJggg==",Nn="/reyohoho/assets/icon-shikimori-DGvXK9Jc.svg",ut=a=>{const t=document.createElement("div");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.backgroundColor="rgba(0, 0, 0, 0.8)",t.style.color="white",t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",t.style.fontSize="2rem",t.style.zIndex="99000",t.textContent=a,document.body.appendChild(t),setTimeout(()=>{document.body.removeChild(t)},2e3)},On={key:0},Vn={key:1},qn={class:"players-list"},Kn=["onClick"],Wn={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Fn={key:0},zn={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Yn={key:1},Gn={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Zn=["onClick"],Qn={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Xn={__name:"PlayerModal",props:{players:{type:Array,required:!0},selectedPlayer:{type:Object,default:null}},emits:["close","select"],setup(a,{emit:t}){const c=a,n=t,m=f(null),E=W(()=>c.players.filter(C=>!w(C)&&!s(C))),d=W(()=>c.players.some(C=>w(C))),M=W(()=>c.players.some(C=>s(C))),w=C=>C.key.toUpperCase().includes("HDREZKA"),s=C=>C.key.toUpperCase().includes("KODIK"),u=C=>C.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"").replace(/KODIK>/,"").trim(),k=C=>{n("select",C),n("close")},j=C=>c.selectedPlayer&&c.selectedPlayer.key===C.key,U=C=>c.selectedPlayer?C==="hdrezka"&&w(c.selectedPlayer)||C==="kodik"&&s(c.selectedPlayer):!1,F=C=>{m.value=C},J=()=>{m.value=null},S=C=>{let P=c.players.filter(R=>C==="hdrezka"&&w(R)||C==="kodik"&&s(R));return C==="kodik"?P.sort((R,O)=>u(R.translate).localeCompare(u(O.translate))):P},T=C=>S(C).some(P=>P.warning);return(C,P)=>(i(),r("div",{class:"modal",onClick:P[4]||(P[4]=Ye(R=>C.$emit("close"),["self"]))},[e("div",{class:"modal-content",onClick:P[3]||(P[3]=Ye(()=>{},["stop"]))},[e("button",{class:"close",onClick:P[0]||(P[0]=R=>C.$emit("close"))},"√ó"),m.value?(i(),r("h2",Vn,[e("button",{class:"back-btn",onClick:J},"‚Üê –ù–∞–∑–∞–¥"),de(" "+g(m.value==="hdrezka"?"ReYohoho - HDrezka":"Kodik"),1)])):(i(),r("h2",On,"–í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–µ–µ—Ä")),e("ul",qn,[m.value?(i(!0),r(ge,{key:1},Le(S(m.value),R=>(i(),r("li",{key:R.key},[e("button",{class:A(["player-item",{active:j(R)}]),onClick:O=>k(R)},[de(g(u(R.translate))+" ",1),R.warning?(i(),r("span",Qn,"warning")):p("",!0)],10,Zn)]))),128)):(i(),r(ge,{key:0},[(i(!0),r(ge,null,Le(E.value,R=>(i(),r("li",{key:R.key},[e("button",{class:A(["player-item",{active:j(R)}]),onClick:O=>k(R)},[de(g(u(R.translate))+" ",1),R.warning?(i(),r("span",Wn,"warning")):p("",!0)],10,Kn)]))),128)),d.value?(i(),r("li",Fn,[e("button",{class:A(["group-item",{active:U("hdrezka")}]),onClick:P[1]||(P[1]=R=>F("hdrezka"))},[P[5]||(P[5]=e("span",{class:"material-icons group-icon"},"folder",-1)),P[6]||(P[6]=de(" ReYohoho - HDrezka ")),T("hdrezka")?(i(),r("span",zn,"warning")):p("",!0)],2)])):p("",!0),M.value?(i(),r("li",Yn,[e("button",{class:A(["group-item",{active:U("kodik")}]),onClick:P[2]||(P[2]=R=>F("kodik"))},[P[7]||(P[7]=e("span",{class:"material-icons group-icon"},"folder",-1)),P[8]||(P[8]=de(" Kodik ")),T("kodik")?(i(),r("span",Gn,"warning")):p("",!0)],2)])):p("",!0)],64))])])]))}},Jn=Be(Xn,[["__scopeId","data-v-460326ba"]]),eo={class:"players-list"},to=["src"],no={key:1,class:"controls"},oo={class:"main-controls"},so={class:"material-icons"},lo={class:"list-button-item"},io={class:"material-icons"},ao={class:"list-button-item"},ro={class:"material-icons"},uo={class:"list-button-item"},co={class:"list-button-item"},vo={class:"material-icons"},mo={class:"list-button-item"},fo={class:"material-icons"},go={class:"tooltip-container","data-tooltip-container":"dimming"},yo={class:"material-icons"},ko={class:"tooltip-container","data-tooltip-container":"blur"},po={class:"tooltip-container","data-tooltip-container":"compressor"},ho={class:"tooltip-container","data-tooltip-container":"mirror"},bo={class:"tooltip-container","data-tooltip-container":"theater"},Co={class:"material-symbols-outlined"},wo={class:"custom-tooltip","data-tooltip":"theater"},_o={class:"tooltip-container","data-tooltip-container":"aspect_ratio"},Eo={class:"current-ratio"},Mo=["onClick"],Io={key:0,class:"tooltip-container","data-tooltip-container":"app_link"},Lo={class:"custom-tooltip","data-tooltip":"app_link"},Ro={key:1,class:"tooltip-container","data-tooltip-container":"copy_link"},To={class:"custom-tooltip","data-tooltip":"copy_link"},$o={key:0,class:"desktop-list-buttons"},Ao={class:"tooltip-container"},So={class:"material-icons"},Po={class:"custom-tooltip"},Uo={class:"tooltip-container"},xo={class:"material-icons"},Ho={class:"custom-tooltip"},jo={class:"tooltip-container"},Bo={class:"custom-tooltip"},Do={class:"tooltip-container"},No={class:"material-icons"},Oo={class:"custom-tooltip"},Vo={class:"tooltip-container"},qo={class:"material-icons"},Ko={class:"custom-tooltip"},Wo={key:1,class:"mobile-list-buttons"},Fo={class:"tooltip-container"},zo={class:"material-icons"},Yo={class:"custom-tooltip"},Go={class:"tooltip-container"},Zo={class:"material-icons"},Qo={class:"custom-tooltip"},Xo={class:"tooltip-container"},Jo={class:"custom-tooltip"},es={class:"tooltip-container"},ts={class:"material-icons"},ns={class:"custom-tooltip"},os={class:"tooltip-container"},ss={class:"material-icons"},ls={class:"custom-tooltip"},is={__name:"PlayerComponent",props:{kpId:String,movieInfo:{type:Object,default:()=>({})}},emits:["update:selectedPlayer","update:movieInfo"],setup(a,{emit:t}){const c=it(),n=jn(),m=dt(),E=yn(),d=at(),M=f(E.params.kp_id),w=a,s=t,u=f([]),k=f(null),j=f(!0),U=f(!1),F=f(!1),J=f(null),S=f(null),T=f(!1),C=f(""),P=f(null),R=f(window.innerHeight*.9),O=W(()=>"".concat(R.value,"px")),q=W(()=>c.isMobile),G=W(()=>!!window.electronAPI),L=f(null),b=f(!1);let D=null;const ee=f(null),he=f(null),ie=f(null),ae=y=>{const o=document.querySelector('[data-tooltip-container="'.concat(y,'"]')),x=document.querySelector('[data-tooltip="'.concat(y,'"]'));if(!o||!x)return;const ue=o.getBoundingClientRect(),ke=x.getBoundingClientRect(),Ce=window.innerHeight;ue.bottom+ke.height>Ce?(x.style.top="auto",x.style.bottom="100%",x.style.marginTop="0",x.style.marginBottom="12px",x.style.transform="translateX(-50%)"):(x.style.top="100%",x.style.bottom="auto",x.style.marginTop="12px",x.style.marginBottom="0",x.style.transform="translateX(-50%)")},N=y=>{L.value=y,b.value=!1,clearTimeout(D),pe(()=>{ae(y)})},Ie=()=>{b.value||(D=setTimeout(()=>{L.value=null},300))},Pe=()=>{b.value=!0,clearTimeout(D)},Ae=()=>{b.value=!1,L.value=null},_e=W({get:()=>n.aspectRatio,set:y=>n.updateAspectRatio(y)}),Re=W({get:()=>n.isCentered,set:y=>n.updateCentering(y)}),se=W(()=>{var y,o,x,ue,ke,Ce,qe,Ke,We,Fe;return((o=(y=w.movieInfo)==null?void 0:y.lists)==null?void 0:o.isFavorite)||((ue=(x=w.movieInfo)==null?void 0:x.lists)==null?void 0:ue.isWatching)||((Ce=(ke=w.movieInfo)==null?void 0:ke.lists)==null?void 0:Ce.isLater)||((Ke=(qe=w.movieInfo)==null?void 0:qe.lists)==null?void 0:Ke.isCompleted)||((Fe=(We=w.movieInfo)==null?void 0:We.lists)==null?void 0:Fe.isAbandoned)}),$=W(()=>n.preferredPlayer),v=f(0),le=y=>y.toUpperCase(),re=()=>{if(U.value||!S.value)return;const[y,o]=_e.value.split(":").map(Number);R.value=window.innerHeight*.9,v.value=Math.min(S.value.clientWidth*(o/y),R.value)},K=W(()=>{if(U.value)return{};const[y,o]=_e.value.split(":").map(Number),x=R.value*(y/o);return{width:"100%",maxWidth:"".concat(x,"px"),maxHeight:O.value,margin:"0 auto",overflow:"hidden"}}),De=W(()=>{const[y,o]=_e.value.split(":").map(Number);return{position:"relative",width:"100%",paddingTop:"".concat(o/y*100,"%")}}),Te=()=>{S.value&&setTimeout(()=>{pe(()=>{S.value.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})},500)},Ne=async()=>{try{C.value="",P.value=null;const y=await bn(w.kpId);if(u.value=Object.entries(y).map(([o,x])=>({key:o.toUpperCase(),...x})),u.value.length>0){if($.value){const o=le($.value),x=u.value.find(ue=>le(ue.key)===o);k.value=x||u.value[0]}else k.value=u.value[0];s("update:selectedPlayer",k.value)}}catch(y){const{message:o,code:x}=ct(y);C.value=o,P.value=x,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–ª–µ–µ—Ä–æ–≤:",y)}},Oe=()=>{T.value=!0},Ee=()=>{T.value=!1},be=y=>{var o;if(((o=k.value)==null?void 0:o.key)===y.key){Ee();return}k.value=y,j.value=!0,n.updatePreferredPlayer(le(y.key)),s("update:selectedPlayer",y)},Ve=()=>{G.value?window.electronAPI.sendHotKey("F2"):(ut("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},Ue=()=>{G.value?window.electronAPI.sendHotKey("F3"):(ut("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},h=()=>{G.value?window.electronAPI.sendHotKey("F4"):(ut("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},H=()=>{U.value=!U.value,U.value?(window.addEventListener("mousemove",Z),document.addEventListener("keydown",fe),document.body.classList.add("no-scroll")):(window.removeEventListener("mousemove",Z),document.removeEventListener("keydown",fe),document.body.classList.remove("no-scroll")),F.value=U.value,pe(()=>Te())},B=f(null),Z=()=>{B.value=setTimeout(()=>{clearTimeout(B.value),F.value=!1},4e3),F.value=!0},ve=W(()=>c.dimmingEnabled),te=()=>{U.value||c.toggleDimming()},fe=y=>{(y.key==="Escape"&&U.value||y.altKey&&y.keyCode===84)&&H()},Se=y=>{_e.value=y,setTimeout(()=>{Re.value&&Te()},310)},Ze=()=>{const y="reyohoho://#".concat(M.value);try{window.location.href=y}catch(o){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Å—ã–ª–∫–∏:",o)}},l=()=>{const y=window.location.href;navigator.clipboard.writeText(y).then(()=>{}),ee.value.showNotification("–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∏–ª—å–º —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞")},_=()=>{j.value=!1};function Y(y){return y.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"HDRezka - ").replace(/KODIK>/,"Kodik - ").trim()}const ye=W(()=>{var y,o;return G.value?!1:!((o=(y=k.value)==null?void 0:y.key)!=null&&o.toUpperCase().includes("TORRENTS"))});ze(k,y=>{if(y)if(j.value=!0,n.updatePreferredPlayer(le(y.key)),s("update:selectedPlayer",y),y.key.toUpperCase().includes("TORRENTS")){const o=document.querySelector(".rocketme_fon");o&&(o.style.display="none");const x=document.querySelector(".pm_preloader");x&&(x.style.display="none")}else{const o=document.querySelector(".rocketme_fon");o&&(o.style.display="");const x=document.querySelector(".pm_preloader");x&&(x.style.display="")}}),ze(()=>E.params.kp_id,async y=>{y&&y!==M.value&&(M.value=y,Re.value&&Te())},{immediate:!0});const ne=["16:9","12:5","4:3"],V=()=>{const o=(ne.indexOf(_e.value)+1)%ne.length;Se(ne[o])},me=y=>{var x,ue,ke,Ce,qe,Ke,We,Fe,Xe,Je,et,tt,nt;return(nt={[Q.FAVORITE]:((ue=(x=w.movieInfo)==null?void 0:x.lists)==null?void 0:ue.isFavorite)||!1,[Q.HISTORY]:((Ce=(ke=w.movieInfo)==null?void 0:ke.lists)==null?void 0:Ce.isHistory)||!1,[Q.LATER]:((Ke=(qe=w.movieInfo)==null?void 0:qe.lists)==null?void 0:Ke.isLater)||!1,[Q.COMPLETED]:((Fe=(We=w.movieInfo)==null?void 0:We.lists)==null?void 0:Fe.isCompleted)||!1,[Q.ABANDONED]:((Je=(Xe=w.movieInfo)==null?void 0:Xe.lists)==null?void 0:Je.isAbandoned)||!1,[Q.WATCHING]:((tt=(et=w.movieInfo)==null?void 0:et.lists)==null?void 0:tt.isWatching)||!1}[y])!=null?nt:!1},z=async y=>{if(!m.token){ee.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:xe});return}try{const o={[Q.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[Q.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[Q.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[Q.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[Q.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[Q.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};me(y)?(await Cn(M.value,y),ee.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(o[y]))):(await pn(M.value,y),ee.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(o[y])))}catch(o){const{message:x,code:ue}=ct(o);ee.value.showNotification("".concat(x," ").concat(ue))}s("update:movieInfo")},xe=()=>{d.push("/login")},$e=W(()=>n.showFavoriteTooltip),Me=()=>{d.push("/settings"),Ae()};return Ge(()=>{j.value=!0,Ne(),q.value&&(_e.value="4:3"),re(),window.addEventListener("resize",re),window.addEventListener("resize",ae),Re.value&&Te()}),st(()=>{window.removeEventListener("resize",re),window.removeEventListener("resize",ae),window.removeEventListener("mousemove",Z),document.removeEventListener("keydown",fe),document.body.classList.remove("no-scroll")}),(y,o)=>{var x,ue,ke,Ce,qe,Ke,We,Fe,Xe,Je,et,tt,nt,gt,yt,kt,pt,ht,bt,Ct,wt,_t,Et,Mt,It,Lt,Rt,Tt,$t,At,St,Pt,Ut,xt,Ht,jt,Bt,Dt,Nt,Ot,Vt,qt,Kt,Wt,Ft,zt,Yt,Gt,Zt,Qt,Xt,Jt,en,tn,nn,on,sn,ln,an,rn;return C.value?(i(),He(kn,{key:0,message:C.value,code:P.value},null,8,["message","code"])):(i(),r(ge,{key:1},[e("div",eo,[o[54]||(o[54]=e("span",null,"–ü–ª–µ–µ—Ä:",-1)),e("button",{class:"player-btn",onClick:Oe},g(k.value?Y(k.value.translate).toUpperCase():"–ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–µ–µ—Ä–æ–≤..."),1)]),T.value?(i(),He(Jn,{key:0,players:u.value,"selected-player":k.value,onClose:Ee,onSelect:be},null,8,["players","selected-player"])):p("",!0),e("div",{ref_key:"containerRef",ref:S,class:A(["player-container",{"theater-mode":U.value}]),style:lt(U.value?{}:K.value)},[e("div",{class:A(["iframe-wrapper",{pm_video:ye.value}]),style:lt(U.value?{}:De.value)},[X(e("iframe",{ref_key:"playerIframe",ref:J,src:(x=k.value)==null?void 0:x.iframe,frameborder:"0",allowfullscreen:"",webkitallowfullscreen:"",class:A(["responsive-iframe",{"theater-mode-unlock":F.value,"theater-mode-lock":U.value,dimmed:ve.value}]),onLoad:_},null,42,to),[[oe,!j.value&&((ue=k.value)==null?void 0:ue.iframe)]]),j.value?(i(),He(hn,{key:0})):p("",!0)],6),U.value?(i(),r("button",{key:0,class:A(["close-theater-btn",{visible:F.value}]),onClick:H}," ‚úñ ",2)):p("",!0)],6),U.value?p("",!0):(i(),r("div",no,[e("div",oo,[q.value?p("",!0):(i(),r("div",{key:0,ref_key:"tooltipContainer",ref:he,class:"tooltip-container list-buttons-container","data-tooltip-container":"favorite"},[$e.value?(i(),r("button",{key:0,class:A(["favorite-btn",{active:(Ce=(ke=a.movieInfo)==null?void 0:ke.lists)==null?void 0:Ce.isFavorite}]),onMouseenter:o[0]||(o[0]=I=>N("favorite")),onMouseleave:Ie,onClick:o[1]||(o[1]=I=>z(ce(Q).FAVORITE))},[e("span",so,g((Ke=(qe=a.movieInfo)==null?void 0:qe.lists)!=null&&Ke.isFavorite?"favorite":"favorite_border"),1),e("span",{class:A(["material-icons dropdown-arrow",{highlighted:se.value}])},"expand_more",2)],34)):p("",!0),X(e("div",{ref_key:"tooltip",ref:ie,class:"custom-tooltip advanced-tooltip list-buttons-dropdown","data-tooltip":"favorite",onMouseenter:Pe,onMouseleave:Ae},[e("div",lo,[e("button",{class:A(["favorite-btn",{active:(Fe=(We=a.movieInfo)==null?void 0:We.lists)==null?void 0:Fe.isFavorite}]),onClick:o[2]||(o[2]=I=>z(ce(Q).FAVORITE))},[e("span",io,g((Je=(Xe=a.movieInfo)==null?void 0:Xe.lists)!=null&&Je.isFavorite?"favorite":"favorite_border"),1),o[55]||(o[55]=e("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))],2)]),e("div",ao,[e("button",{class:A(["watching-btn",{active:(tt=(et=a.movieInfo)==null?void 0:et.lists)==null?void 0:tt.isWatching}]),onClick:o[3]||(o[3]=I=>z(ce(Q).WATCHING))},[e("span",ro,g((gt=(nt=a.movieInfo)==null?void 0:nt.lists)!=null&&gt.isWatching?"visibility_off":"visibility"),1),o[56]||(o[56]=e("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))],2)]),e("div",uo,[e("button",{class:A(["later-btn",{active:(kt=(yt=a.movieInfo)==null?void 0:yt.lists)==null?void 0:kt.isLater}]),onClick:o[4]||(o[4]=I=>z(ce(Q).LATER))},o[57]||(o[57]=[e("span",{class:"material-icons"},"watch_later",-1),e("span",{class:"button-label"},"–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ",-1)]),2)]),e("div",co,[e("button",{class:A(["completed-btn",{active:(ht=(pt=a.movieInfo)==null?void 0:pt.lists)==null?void 0:ht.isCompleted}]),onClick:o[5]||(o[5]=I=>z(ce(Q).COMPLETED))},[e("span",vo,g((Ct=(bt=a.movieInfo)==null?void 0:bt.lists)!=null&&Ct.isCompleted?"check_circle":"check_circle_outline"),1),o[58]||(o[58]=e("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))],2)]),e("div",mo,[e("button",{class:A(["abandoned-btn",{active:(_t=(wt=a.movieInfo)==null?void 0:wt.lists)==null?void 0:_t.isAbandoned}]),onClick:o[6]||(o[6]=I=>z(ce(Q).ABANDONED))},[e("span",fo,g(((Mt=(Et=a.movieInfo)==null?void 0:Et.lists)!=null&&Mt.isAbandoned,"not_interested")),1),o[59]||(o[59]=e("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))],2)]),e("div",{class:"tooltip-hint"},[o[61]||(o[61]=e("span",{class:"material-icons"},"settings",-1)),e("span",null,[o[60]||(o[60]=de("–°—Ç–∏–ª—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ ")),e("a",{class:"settings-link",onClick:Me},"–Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö")])])],544),[[oe,L.value==="favorite"&&$e.value]])],512)),q.value?p("",!0):(i(),r(ge,{key:1},[e("div",go,[e("button",{class:A(["dimming-btn",{active:ve.value}]),onMouseenter:o[7]||(o[7]=I=>N("dimming")),onMouseleave:o[8]||(o[8]=I=>L.value=null),onClick:te},[e("span",yo,g(ve.value?"light_mode":"dark_mode"),1)],34),X(e("div",{class:"custom-tooltip","data-tooltip":"dimming"},g(ve.value?"–û—Ç–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ":"–í–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ"),513),[[oe,L.value==="dimming"]])]),e("div",ko,[e("button",{class:A(["blur-btn",{"electron-only":!G.value}]),onMouseenter:o[9]||(o[9]=I=>N("blur")),onMouseleave:o[10]||(o[10]=I=>L.value=null),onClick:Ve},o[62]||(o[62]=[e("span",{class:"material-icons"},"blur_on",-1)]),34),X(e("div",{class:"custom-tooltip","data-tooltip":"blur"},g(G.value?"–ë–ª—é—Ä":"–ë–ª—é—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[oe,L.value==="blur"]])]),e("div",po,[e("button",{class:A(["material-symbols-outlined",{"electron-only":!G.value}]),onMouseenter:o[11]||(o[11]=I=>N("compressor")),onMouseleave:o[12]||(o[12]=I=>L.value=null),onClick:Ue},o[63]||(o[63]=[e("span",{class:"material-icons"},"graphic_eq",-1)]),34),X(e("div",{class:"custom-tooltip","data-tooltip":"compressor"},g(G.value?"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä":"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[oe,L.value==="compressor"]])]),e("div",ho,[e("button",{class:A(["mirror-btn",{"electron-only":!G.value}]),onMouseenter:o[13]||(o[13]=I=>N("mirror")),onMouseleave:o[14]||(o[14]=I=>L.value=null),onClick:h},o[64]||(o[64]=[e("span",{class:"material-icons"},"flip",-1)]),34),X(e("div",{class:"custom-tooltip","data-tooltip":"mirror"},g(G.value?"–ó–µ—Ä–∫–∞–ª–æ":"–ó–µ—Ä–∫–∞–ª–æ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[oe,L.value==="mirror"]])]),e("div",bo,[e("button",{class:"theater-mode-btn",onMouseenter:o[15]||(o[15]=I=>N("theater")),onMouseleave:o[16]||(o[16]=I=>L.value=null),onClick:H},[e("span",Co,g(U.value?"fullscreen_exit":"aspect_ratio"),1)],32),X(e("div",wo,[de(g(U.value?"–í—ã–π—Ç–∏ –∏–∑ —Ç–µ–∞—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞":"–¢–µ–∞—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º")+" ",1),o[65]||(o[65]=e("span",{class:"shortcut-hint"},"Alt+T",-1))],512),[[oe,L.value==="theater"]])]),e("div",_o,[e("button",{class:"aspect-ratio-dropdown-btn",onMouseenter:o[17]||(o[17]=I=>N("aspect_ratio")),onMouseleave:Ie,onClick:V},[e("span",Eo,g(_e.value),1)],32),X(e("div",{class:"custom-tooltip advanced-tooltip aspect-ratio-dropdown","data-tooltip":"aspect_ratio",onMouseenter:Pe,onMouseleave:Ae},[(i(),r(ge,null,Le(ne,I=>e("div",{key:I,class:A(["aspect-ratio-option",{active:_e.value===I}]),onClick:ba=>Se(I)},g(I),11,Mo)),64))],544),[[oe,L.value==="aspect_ratio"]])]),e("div",{class:"tooltip-container","data-tooltip-container":"centering",onMouseenter:o[19]||(o[19]=I=>N("centering")),onMouseleave:Ie},[e("button",{class:"center-btn",onClick:Te},o[66]||(o[66]=[e("span",{class:"material-icons"},"center_focus_strong",-1)])),X(e("div",{class:"custom-tooltip advanced-tooltip","data-tooltip":"centering",onMouseenter:Pe,onMouseleave:Ae},[o[67]||(o[67]=de(" –û—Ç—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–ª–µ–µ—Ä ")),we(Bn,{modelValue:Re.value,"onUpdate:modelValue":o[18]||(o[18]=I=>Re.value=I),title:"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞"},null,8,["modelValue"]),o[68]||(o[68]=e("span",{class:"tooltip-title"},"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞",-1))],544),[[oe,L.value==="centering"]])],32),G.value?p("",!0):(i(),r("div",Io,[e("button",{class:"app-link-btn",onMouseenter:o[20]||(o[20]=I=>N("app_link")),onMouseleave:o[21]||(o[21]=I=>L.value=null),onClick:Ze},o[69]||(o[69]=[e("span",{class:"material-icons"},"open_in_new",-1)]),32),X(e("div",Lo," –û—Ç–∫—Ä—ã—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ",512),[[oe,L.value==="app_link"]])])),G.value?(i(),r("div",Ro,[e("button",{class:"copy-link-btn",onMouseenter:o[22]||(o[22]=I=>N("copy_link")),onMouseleave:o[23]||(o[23]=I=>L.value=null),onClick:l},o[70]||(o[70]=[e("span",{class:"material-icons"},"content_copy",-1)]),32),X(e("div",To," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É ",512),[[oe,L.value==="copy_link"]])])):p("",!0)],64))]),!q.value&&!$e.value?(i(),r("div",$o,[e("div",Ao,[e("button",{class:A(["favorite-btn",{active:(Lt=(It=a.movieInfo)==null?void 0:It.lists)==null?void 0:Lt.isFavorite}]),onMouseenter:o[24]||(o[24]=I=>N("favorite")),onMouseleave:o[25]||(o[25]=I=>L.value=null),onClick:o[26]||(o[26]=I=>z(ce(Q).FAVORITE))},[e("span",So,g((Tt=(Rt=a.movieInfo)==null?void 0:Rt.lists)!=null&&Tt.isFavorite?"favorite":"favorite_border"),1)],34),X(e("div",Po,g("–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"),512),[[oe,L.value==="favorite"]])]),e("div",Uo,[e("button",{class:A(["watching-btn",{active:(At=($t=a.movieInfo)==null?void 0:$t.lists)==null?void 0:At.isWatching}]),onMouseenter:o[27]||(o[27]=I=>N("watching")),onMouseleave:o[28]||(o[28]=I=>L.value=null),onClick:o[29]||(o[29]=I=>z(ce(Q).WATCHING))},[e("span",xo,g((Pt=(St=a.movieInfo)==null?void 0:St.lists)!=null&&Pt.isWatching?"visibility_off":"visibility"),1)],34),X(e("div",Ho,g("–°–º–æ—Ç—Ä—é"),512),[[oe,L.value==="watching"]])]),e("div",jo,[e("button",{class:A(["later-btn",{active:(xt=(Ut=a.movieInfo)==null?void 0:Ut.lists)==null?void 0:xt.isLater}]),onMouseenter:o[30]||(o[30]=I=>N("later")),onMouseleave:o[31]||(o[31]=I=>L.value=null),onClick:o[32]||(o[32]=I=>z(ce(Q).LATER))},o[71]||(o[71]=[e("span",{class:"material-icons"},"watch_later",-1)]),34),X(e("div",Bo,g("–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"),512),[[oe,L.value==="later"]])]),e("div",Do,[e("button",{class:A(["completed-btn",{active:(jt=(Ht=a.movieInfo)==null?void 0:Ht.lists)==null?void 0:jt.isCompleted}]),onMouseenter:o[33]||(o[33]=I=>N("completed")),onMouseleave:o[34]||(o[34]=I=>L.value=null),onClick:o[35]||(o[35]=I=>z(ce(Q).COMPLETED))},[e("span",No,g((Dt=(Bt=a.movieInfo)==null?void 0:Bt.lists)!=null&&Dt.isCompleted?"check_circle":"check_circle_outline"),1)],34),X(e("div",Oo,g("–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"),512),[[oe,L.value==="completed"]])]),e("div",Vo,[e("button",{class:A(["abandoned-btn",{active:(Ot=(Nt=a.movieInfo)==null?void 0:Nt.lists)==null?void 0:Ot.isAbandoned}]),onMouseenter:o[36]||(o[36]=I=>N("abandoned")),onMouseleave:o[37]||(o[37]=I=>L.value=null),onClick:o[38]||(o[38]=I=>z(ce(Q).ABANDONED))},[e("span",qo,g(((qt=(Vt=a.movieInfo)==null?void 0:Vt.lists)!=null&&qt.isAbandoned,"not_interested")),1)],34),X(e("div",Ko,g("–ë—Ä–æ—à–µ–Ω–æ"),512),[[oe,L.value==="abandoned"]])])])):q.value?(i(),r("div",Wo,[e("div",Fo,[e("button",{class:A(["favorite-btn",{active:(Wt=(Kt=a.movieInfo)==null?void 0:Kt.lists)==null?void 0:Wt.isFavorite}]),onMouseenter:o[39]||(o[39]=I=>N("favorite")),onMouseleave:o[40]||(o[40]=I=>L.value=null),onClick:o[41]||(o[41]=I=>z(ce(Q).FAVORITE))},[e("span",zo,g((zt=(Ft=a.movieInfo)==null?void 0:Ft.lists)!=null&&zt.isFavorite?"favorite":"favorite_border"),1)],34),X(e("div",Yo,g("–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"),512),[[oe,L.value==="favorite"]])]),e("div",Go,[e("button",{class:A(["watching-btn",{active:(Gt=(Yt=a.movieInfo)==null?void 0:Yt.lists)==null?void 0:Gt.isWatching}]),onMouseenter:o[42]||(o[42]=I=>N("watching")),onMouseleave:o[43]||(o[43]=I=>L.value=null),onClick:o[44]||(o[44]=I=>z(ce(Q).WATCHING))},[e("span",Zo,g((Qt=(Zt=a.movieInfo)==null?void 0:Zt.lists)!=null&&Qt.isWatching?"visibility_off":"visibility"),1)],34),X(e("div",Qo,g("–°–º–æ—Ç—Ä—é"),512),[[oe,L.value==="watching"]])]),e("div",Xo,[e("button",{class:A(["later-btn",{active:(Jt=(Xt=a.movieInfo)==null?void 0:Xt.lists)==null?void 0:Jt.isLater}]),onMouseenter:o[45]||(o[45]=I=>N("later")),onMouseleave:o[46]||(o[46]=I=>L.value=null),onClick:o[47]||(o[47]=I=>z(ce(Q).LATER))},o[72]||(o[72]=[e("span",{class:"material-icons"},"watch_later",-1)]),34),X(e("div",Jo,g("–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"),512),[[oe,L.value==="later"]])]),e("div",es,[e("button",{class:A(["completed-btn",{active:(tn=(en=a.movieInfo)==null?void 0:en.lists)==null?void 0:tn.isCompleted}]),onMouseenter:o[48]||(o[48]=I=>N("completed")),onMouseleave:o[49]||(o[49]=I=>L.value=null),onClick:o[50]||(o[50]=I=>z(ce(Q).COMPLETED))},[e("span",ts,g((on=(nn=a.movieInfo)==null?void 0:nn.lists)!=null&&on.isCompleted?"check_circle":"check_circle_outline"),1)],34),X(e("div",ns,g("–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"),512),[[oe,L.value==="completed"]])]),e("div",os,[e("button",{class:A(["abandoned-btn",{active:(ln=(sn=a.movieInfo)==null?void 0:sn.lists)==null?void 0:ln.isAbandoned}]),onMouseenter:o[51]||(o[51]=I=>N("abandoned")),onMouseleave:o[52]||(o[52]=I=>L.value=null),onClick:o[53]||(o[53]=I=>z(ce(Q).ABANDONED))},[e("span",ss,g(((rn=(an=a.movieInfo)==null?void 0:an.lists)!=null&&rn.isAbandoned,"not_interested")),1)],34),X(e("div",ls,g("–ë—Ä–æ—à–µ–Ω–æ"),512),[[oe,L.value==="abandoned"]])])])):p("",!0)])),we(rt,{ref_key:"notificationRef",ref:ee},null,512)],64))}}},gn=Be(is,[["__scopeId","data-v-2037cb5b"]]),as={key:0,class:"carousel-container"},rs={class:"carousel-wrapper"},us=["onClick"],cs=["src","alt"],ds={class:"video-name"},vs={key:0,class:"video-player"},ms=["src"],fs={__name:"TrailerCarousel",props:{videos:{type:Array,required:!0},activeVideoIndex:{type:Number,default:null}},emits:["select"],setup(a,{emit:t}){const c=it(),n=W(()=>c.isMobile),m=a,E=t,d=f(m.activeVideoIndex),M=f(null),w=f(!1),s=f(!1),u=()=>{if(!M.value)return;const{scrollLeft:S,scrollWidth:T,clientWidth:C}=M.value;w.value=S>0,s.value=S<T-C-1},k=S=>{if(!M.value)return;const T=M.value.querySelector(".carousel-item");if(!T)return;const C=T.clientWidth+16;M.value.scrollBy({left:C*S,behavior:"smooth"})},j=S=>{d.value=S,E("select",m.videos[S])},U=()=>u(),F=f([]),J=async S=>{try{return(await fetch("https://img.youtube.com/vi/".concat(S,"/0.jpg"))).ok}catch(T){return!1}};return Ge(async()=>{const S=m.videos.map(async C=>await J(C.videoId)?C:null),T=await Promise.all(S);F.value=T.filter(Boolean),u(),window.addEventListener("resize",U)}),ze(()=>m.videos,async S=>{const T=S.map(async P=>await J(P.videoId)?P:null),C=await Promise.all(T);F.value=C.filter(Boolean)}),ze(()=>m.activeVideoIndex,S=>{d.value=S}),st(()=>{window.removeEventListener("resize",U)}),(S,T)=>F.value.length?(i(),r("div",as,[T[4]||(T[4]=e("h2",null,"–¢—Ä–µ–π–ª–µ—Ä—ã (YouTube)",-1)),e("div",rs,[X(e("button",{class:"scroll-button left",onClick:T[0]||(T[0]=C=>k(-1))},T[2]||(T[2]=[e("span",{class:"material-symbols-outlined"},"arrow_back_ios",-1)]),512),[[oe,!n.value&&w.value]]),e("div",{ref_key:"carousel",ref:M,class:"carousel",onScroll:u},[(i(!0),r(ge,null,Le(F.value,(C,P)=>(i(),r("div",{key:P,class:"carousel-item",onClick:R=>j(P)},[e("img",{src:"https://img.youtube.com/vi/".concat(C.videoId,"/0.jpg"),alt:C.name},null,8,cs),e("div",ds,g(C.name),1)],8,us))),128))],544),X(e("button",{class:"scroll-button right",onClick:T[1]||(T[1]=C=>k(1))},T[3]||(T[3]=[e("span",{class:"material-symbols-outlined"},"arrow_forward_ios",-1)]),512),[[oe,!n.value&&s.value]])]),d.value!==null?(i(),r("div",vs,[e("iframe",{src:a.videos[d.value].iframeUrl,frameborder:"0",allowfullscreen:""},null,8,ms)])):p("",!0)])):p("",!0)}},gs=Be(fs,[["__scopeId","data-v-e60b5c29"]]),ys={class:"rating-container"},ks={class:"rating-display"},ps={class:"average-rating"},hs={class:"rating-numbers"},bs=["onClick","onMouseenter"],Cs={key:0,class:"tooltip-footer"},ws={class:"rating-numbers mobile-rating-numbers"},_s=["onClick"],Es={key:0,class:"mobile-modal-footer"},Ms={__name:"MovieRating",props:{kpId:{type:String,required:!0},showDash:{type:Boolean,default:!1}},setup(a){const t=it(),c=at(),n=a,m=f(null),E=f(null),d=f(null),M=f(null),w=f(0),s=f(!1),u=f(!1);let k=null;const j=R=>R?R.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",U=()=>{k=setTimeout(()=>{s.value=!1,t.isMobile||(u.value=!1)},100)},F=()=>{k&&(clearTimeout(k),k=null),s.value=!0},J=()=>{t.isMobile&&(u.value=!u.value)},S=()=>{c.push("/login")},T=async()=>{try{const R=await wn(n.kpId);E.value=R.user_rating,d.value=R.average_rating,M.value=j(R.vote_count)}catch(R){console.error("Error loading rating:",R)}},C=async R=>{var O;try{R===E.value?(await un(n.kpId,null),E.value=null,m.value.showNotification("–û—Ü–µ–Ω–∫–∞ —É–¥–∞–ª–µ–Ω–∞")):(await un(n.kpId,R),E.value=R,m.value.showNotification("–û—Ü–µ–Ω–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞")),t.isMobile&&(u.value=!1),T()}catch(q){console.error("Error setting rating:",q),((O=q.response)==null?void 0:O.status)===401?m.value.showNotification('–î–ª—è –æ—Ü–µ–Ω–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:S}):m.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ü–µ–Ω–∫–∏"),t.isMobile&&(u.value=!1)}},P=()=>{u.value=!1};return Ge(()=>{T()}),(R,O)=>(i(),r("div",ys,[e("div",ks,[e("a",{href:"#",class:A(["rating-link",{"has-rating":E.value}]),onMouseenter:O[0]||(O[0]=q=>s.value=!0),onMouseleave:U,onClick:Ye(J,["prevent"])},[O[3]||(O[3]=e("img",{src:Hn,alt:"ReYohoho",class:"rating-logo"},null,-1)),e("span",ps,g(d.value?d.value.toFixed(1).replace(/\.0$/,""):"‚Äî"),1)],34),X(e("div",{class:"rating-tooltip",onMouseenter:F,onMouseleave:U},[e("div",hs,[(i(),r(ge,null,Le(10,q=>e("button",{key:q,class:A(["number-btn",{active:q===E.value,hover:q===w.value,"average-highlight":d.value&&q<=Math.round(d.value)}]),onClick:G=>C(q),onMouseenter:G=>w.value=q,onMouseleave:O[1]||(O[1]=G=>w.value=0)},g(q),43,bs)),64))]),M.value?(i(),r("div",Cs,"–û—Ü–µ–Ω–æ–∫: "+g(M.value),1)):p("",!0)],544),[[oe,(s.value||u.value)&&!ce(t).isMobile]])]),we(rt,{ref_key:"notificationRef",ref:m},null,512),ce(t).isMobile&&u.value?(i(),r("div",{key:0,class:"mobile-modal-overlay",onClick:P},[e("div",{class:"mobile-modal",onClick:O[2]||(O[2]=Ye(()=>{},["stop"]))},[e("div",{class:"mobile-modal-header"},[O[4]||(O[4]=e("h3",null,"–û—Ü–µ–Ω–∏—Ç—å —Ñ–∏–ª—å–º",-1)),e("button",{class:"close-button",onClick:P},"√ó")]),e("div",ws,[(i(),r(ge,null,Le(10,q=>e("button",{key:q,class:A(["number-btn",{active:q===E.value,"average-highlight":d.value&&q<=Math.round(d.value)}]),onClick:G=>C(q)},g(q),11,_s)),64))]),M.value?(i(),r("div",Es,"–û—Ü–µ–Ω–æ–∫: "+g(M.value),1)):p("",!0)])])):p("",!0)]))}},Is=Be(Ms,[["__scopeId","data-v-f605dbe5"]]),Ls={name:"EmojiPicker",props:{isVisible:{type:Boolean,default:!1}},emits:["emoji-selected","mouse-enter","mouse-leave","close"],data(){return{activeCategory:"smileys",categories:[{name:"smileys",icon:"üòÄ",emojis:["üòÄ","üòÉ","üòÑ","üòÅ","üòÜ","üòÖ","üòÇ","ü§£","üòä","üòá","üôÇ","üôÉ","üòâ","üòå","üòç","ü•∞","üòò","üòó","üòô","üòö","üòã","üòõ","üòù","üòú","ü§™","ü§®","üßê","ü§ì","üòé","ü§©","ü•≥"]},{name:"emotions",icon:"üò¢",emojis:["üò•","üò¢","üò≠","üò§","üò†","üò°","ü§¨","ü§Ø","üò≥","ü•µ","ü•∂","üò±","üò®","üò∞","üò•","üòì","ü§ó","ü§î","ü§≠","ü§´","ü§•","üò∂","üòê","üòë","üò¨","üôÑ","üòØ","üò¶","üòß","üòÆ","üò≤"]},{name:"gestures",icon:"üëç",emojis:["üëç","üëé","üëå","ü§å","ü§è","‚úåÔ∏è","ü§û","ü§ü","ü§ò","ü§ô","üëà","üëâ","üëÜ","üñï","üëá","‚òùÔ∏è","üëè","üôå","üëê","ü§≤","ü§ù","üôè","‚úçÔ∏è","üí™","ü¶æ","ü¶ø","ü¶µ","ü¶∂","üëÇ","ü¶ª","üëÉ"]},{name:"hearts",icon:"‚ù§Ô∏è",emojis:["‚ù§Ô∏è","üß°","üíõ","üíö","üíô","üíú","ü§é","üñ§","ü§ç","üíî","‚ù£Ô∏è","üíï","üíû","üíì","üíó","üíñ","üíò","üíù","üíü","‚ô•Ô∏è","üíØ","üí¢","üí•","üí´","üí¶","üí®","üï≥Ô∏è","üí£","üí¨","üëÅÔ∏è‚Äçüó®Ô∏è","üó®Ô∏è"]},{name:"objects",icon:"üéâ",emojis:["üéâ","üéä","üéà","üéÅ","üéÄ","üéÇ","üç∞","üßÅ","üç≠","üç¨","üç´","üç©","üç™","üçï","üçî","üçü","üå≠","ü•™","üåÆ","üåØ","ü•ô","ü•ö","üç≥","ü•ò","üç≤","ü•ó","üçø","üßà","üßÄ","ü•®","ü•Ø"]}]}},computed:{currentEmojis(){const a=this.categories.find(t=>t.name===this.activeCategory);return a?a.emojis:[]}},methods:{selectEmoji(a){this.$emit("emoji-selected",a)}}},Rs={class:"emoji-categories"},Ts=["onClick"],$s={class:"emoji-grid"},As=["onClick"];function Ss(a,t,c,n,m,E){return c.isVisible?(i(),r("div",{key:0,class:"emoji-picker",onMouseenter:t[1]||(t[1]=d=>a.$emit("mouse-enter")),onMouseleave:t[2]||(t[2]=d=>a.$emit("mouse-leave"))},[e("button",{class:"close-btn mobile-only",onClick:t[0]||(t[0]=d=>a.$emit("close"))},t[3]||(t[3]=[e("i",{class:"fas fa-times"},null,-1)])),e("div",Rs,[(i(!0),r(ge,null,Le(m.categories,d=>(i(),r("button",{key:d.name,onClick:M=>m.activeCategory=d.name,class:A([{active:m.activeCategory===d.name},"category-btn"]),type:"button"},g(d.icon),11,Ts))),128))]),e("div",$s,[(i(!0),r(ge,null,Le(E.currentEmojis,d=>(i(),r("button",{key:d,onClick:M=>E.selectEmoji(d),class:"emoji-btn",type:"button"},g(d),9,As))),128))])],32)):p("",!0)}const mt=Be(Ls,[["render",Ss],["__scopeId","data-v-5f18a3b7"]]),Ps=async a=>{const t=await _n();return await a(t)},Us=async a=>{const{data:t}=await Ps(c=>c.get("/search_emotes/".concat(a)));return t.emotes||[]},xs={name:"ImagePicker",props:{isVisible:{type:Boolean,required:!0},currentUser:{type:Object,default:null}},emits:["image-selected","mouse-enter","mouse-leave","close","login-required"],setup(a,{emit:t}){const c=f(""),n=f([]),m=f(null),E=f(!1),M=En(async k=>{if(!a.currentUser){console.warn("–ü–æ–ø—ã—Ç–∫–∞ –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏");return}if(!k.trim()){n.value=[],E.value=!1;return}E.value=!0;try{n.value=await Us(k)}catch(j){console.error("Error searching images:",j),n.value=[]}finally{E.value=!1}},300),w=()=>{if(!a.currentUser){t("login-required");return}c.value.trim()&&(E.value=!0),M(c.value)},s=k=>{if(!a.currentUser){t("login-required");return}t("image-selected",k),t("close")},u=()=>{setTimeout(()=>{a.isVisible&&t("mouse-leave")},100)};return ze(()=>a.isVisible,k=>{k&&(c.value="",n.value=[],E.value=!1)}),{searchQuery:c,images:n,searchInput:m,isLoading:E,handleSearch:w,selectImage:s,handleInputBlur:u}}},Hs={key:0,class:"auth-required"},js={class:"auth-message"},Bs={key:1},Ds={class:"image-picker-header"},Ns={class:"image-content"},Os={key:0,class:"loading-spinner"},Vs={key:1,class:"image-grid"},qs=["onClick"],Ks=["src","alt"],Ws={key:2,class:"no-images"},Fs={key:3,class:"no-search"};function zs(a,t,c,n,m,E){return c.isVisible?(i(),r("div",{key:0,class:"image-picker",onMouseenter:t[7]||(t[7]=d=>a.$emit("mouse-enter")),onMouseleave:t[8]||(t[8]=d=>a.$emit("mouse-leave")),onClick:t[9]||(t[9]=Ye(()=>{},["stop"]))},[e("button",{class:"close-btn mobile-only",onClick:t[0]||(t[0]=d=>a.$emit("close"))},t[10]||(t[10]=[e("i",{class:"fas fa-times"},null,-1)])),c.currentUser?(i(),r("div",Bs,[e("div",Ds,[X(e("input",{ref:"searchInput",type:"text","onUpdate:modelValue":t[2]||(t[2]=d=>n.searchQuery=d),placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–º–∞–π–ª–∞ 7tv",class:"image-search-input",onInput:t[3]||(t[3]=(...d)=>n.handleSearch&&n.handleSearch(...d)),onClick:t[4]||(t[4]=Ye(()=>{},["stop"])),onFocus:t[5]||(t[5]=d=>a.$emit("mouse-enter")),onBlur:t[6]||(t[6]=(...d)=>n.handleInputBlur&&n.handleInputBlur(...d))},null,544),[[vt,n.searchQuery]])]),e("div",Ns,[n.isLoading?(i(),r("div",Os,t[14]||(t[14]=[e("div",{class:"spinner"},null,-1),e("p",null,"–ü–æ–∏—Å–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...",-1)]))):n.images.length>0?(i(),r("div",Vs,[(i(!0),r(ge,null,Le(n.images,(d,M)=>(i(),r("div",{key:M,class:"image-item",onClick:w=>n.selectImage(d)},[e("img",{src:d,alt:"Image "+(M+1)},null,8,Ks)],8,qs))),128))])):n.searchQuery.trim()?(i(),r("div",Ws,t[15]||(t[15]=[e("p",null,"–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤",-1)]))):(i(),r("div",Fs,t[16]||(t[16]=[e("p",null,"–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞",-1)])))])])):(i(),r("div",Hs,[e("div",js,[t[11]||(t[11]=e("i",{class:"fas fa-lock"},null,-1)),t[12]||(t[12]=e("h3",null,"–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è",-1)),t[13]||(t[13]=e("p",null,"–î–ª—è –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç",-1)),e("button",{class:"login-button",onClick:t[1]||(t[1]=d=>a.$emit("login-required"))},"–í–æ–π—Ç–∏")])]))],32)):p("",!0)}const ft=Be(xs,[["render",zs],["__scopeId","data-v-be44d2b6"]]),Ys={name:"CommentItem",components:{EmojiPicker:mt,ImagePicker:ft},props:{comment:{type:Object,required:!0,default:()=>({username:"–ê–Ω–æ–Ω–∏–º",user_avatar:null,content:"",created_at:new Date().toISOString(),rating:0,replies:[]})},currentUser:{type:Object,required:!0,default:()=>({})},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate"],setup(a,{emit:t}){var Se,Ze;const c=at(),n=W(()=>{var l;return a.editingCommentId===((l=a.comment)==null?void 0:l.id)}),m=f(((Se=a.comment)==null?void 0:Se.content)||""),E=f(((Ze=a.comment)==null?void 0:Ze.user_rating)||0),d=f(null),M=f(null),w=f(!1),s=f(!1),u=f(!1),k=f(!1),j=f(!1),U=l=>{if(!l)return"?";const _=l.split(" ");return _.length===1?l.slice(0,2).toUpperCase():(_[0][0]+_[_.length-1][0]).toUpperCase()},F=l=>{if(!l)return"";const _=l.substring(0,4),Y=l.substring(4,6),ye=l.substring(6,8),ne=l.substring(9,11),V=l.substring(11,13),me=l.substring(13,15);return new Date(Date.UTC(parseInt(_),parseInt(Y)-1,parseInt(ye),parseInt(ne),parseInt(V),parseInt(me))).toLocaleDateString("ru-RU",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone})},J=l=>{if(!l)return"";const _=l.substring(0,4),Y=l.substring(4,6),ye=l.substring(6,8),ne=l.substring(9,11),V=l.substring(11,13),me=l.substring(13,15),z=new Date(Date.UTC(parseInt(_),parseInt(Y)-1,parseInt(ye),parseInt(ne),parseInt(V),parseInt(me))),$e=Math.floor((new Date-z)/1e3);if($e<60)return"—Ç–æ–ª—å–∫–æ —á—Ç–æ";const Me=Math.floor($e/60);if(Me<60)return"".concat(Me," ").concat(S(Me)," –Ω–∞–∑–∞–¥");const y=Math.floor(Me/60);if(y<24)return"".concat(y," ").concat(T(y)," –Ω–∞–∑–∞–¥");const o=Math.floor(y/24);if(o<7)return"".concat(o," ").concat(C(o)," –Ω–∞–∑–∞–¥");const x=Math.floor(o/7);if(x<4)return"".concat(x," ").concat(P(x)," –Ω–∞–∑–∞–¥");const ue=Math.floor(o/30);if(ue<12)return"".concat(ue," ").concat(R(ue)," –Ω–∞–∑–∞–¥");const ke=Math.floor(o/365);return"".concat(ke," ").concat(O(ke)," –Ω–∞–∑–∞–¥")},S=l=>l%10===1&&l%100!==11?"–º–∏–Ω—É—Ç—É":[2,3,4].includes(l%10)&&![12,13,14].includes(l%100)?"–º–∏–Ω—É—Ç—ã":"–º–∏–Ω—É—Ç",T=l=>l%10===1&&l%100!==11?"—á–∞—Å":[2,3,4].includes(l%10)&&![12,13,14].includes(l%100)?"—á–∞—Å–∞":"—á–∞—Å–æ–≤",C=l=>l%10===1&&l%100!==11?"–¥–µ–Ω—å":[2,3,4].includes(l%10)&&![12,13,14].includes(l%100)?"–¥–Ω—è":"–¥–Ω–µ–π",P=l=>l%10===1&&l%100!==11?"–Ω–µ–¥–µ–ª—é":[2,3,4].includes(l%10)&&![12,13,14].includes(l%100)?"–Ω–µ–¥–µ–ª–∏":"–Ω–µ–¥–µ–ª—å",R=l=>l%10===1&&l%100!==11?"–º–µ—Å—è—Ü":[2,3,4].includes(l%10)&&![12,13,14].includes(l%100)?"–º–µ—Å—è—Ü–∞":"–º–µ—Å—è—Ü–µ–≤",O=l=>l%10===1&&l%100!==11?"–≥–æ–¥":[2,3,4].includes(l%10)&&![12,13,14].includes(l%100)?"–≥–æ–¥–∞":"–ª–µ—Ç";Ge(async()=>{var l;if((l=a.comment)!=null&&l.user_avatar){const _=await Mn();d.value="".concat(_).concat(a.comment.user_avatar)}document.addEventListener("click",te)}),st(()=>{document.removeEventListener("click",te)});const q=W(()=>{var l;return a.currentUser&&((l=a.comment)==null?void 0:l.user_id)===a.currentUser.id}),G=W(()=>{var l;return a.currentUser&&((l=a.comment)==null?void 0:l.user_id)===a.currentUser.id||a.currentUser&&a.currentUser.is_admin===1}),L=W(()=>{var l,_,Y;return((l=a.comment)==null?void 0:l.updated_at)&&((_=a.comment)==null?void 0:_.updated_at)!==((Y=a.comment)==null?void 0:Y.created_at)}),b=W(()=>{var l,_;return(l=a.comment)!=null&&l.is_deleted?!1:(((_=a.comment)==null?void 0:_.rating)||0)<=-3}),D=W(()=>b.value),ee=f(!1),he=W(()=>{var l,_;return(l=a.comment)!=null&&l.is_deleted?null:(((_=a.comment)==null?void 0:_.rating)||0)<=-3?"lowRating":null}),ie=()=>{var l,_;t("start-edit",(l=a.comment)==null?void 0:l.id),m.value=((_=a.comment)==null?void 0:_.content)||"",pe(()=>{M.value&&(M.value.focus(),re({target:M.value}))})},ae=()=>{var l;t("cancel-edit"),m.value=((l=a.comment)==null?void 0:l.content)||""},N=()=>{var l;m.value.trim()&&t("edit",(l=a.comment)==null?void 0:l.id,m.value.trim())},Ie=()=>{var l;confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π?")&&t("delete",(l=a.comment)==null?void 0:l.id)},Pe=l=>{var _,Y;E.value===l?(E.value=0,t("rate",(_=a.comment)==null?void 0:_.id,l)):(E.value=l,t("rate",(Y=a.comment)==null?void 0:Y.id,l))},Ae=()=>{var l;c.push("/lists/".concat((l=a.comment)==null?void 0:l.user_id))},_e=l=>{l.key==="Enter"&&!l.shiftKey&&(l.preventDefault(),N())},Re=W(()=>{var l,_;return((_=(l=a.comment)==null?void 0:l.content)==null?void 0:_.length)>300}),se=f(!1),$=W(()=>{var l,_,Y;return Re.value&&!se.value?((_=(l=a.comment)==null?void 0:l.content)==null?void 0:_.slice(0,300))+"...":((Y=a.comment)==null?void 0:Y.content)||""}),v=W(()=>{var ne;if(!((ne=a.comment)!=null&&ne.content))return"";let l=a.comment.content;if(Re.value&&!se.value){let V=l.slice(0,300);const z=(l.match(/\[img\].*?\[\/img\]/g)||[]).length,xe=(V.match(/\[img\].*?\[\/img\]/g)||[]).length,$e=z-xe,Me=V.lastIndexOf("[img]"),y=V.lastIndexOf("[/img]");Me>y&&Me!==-1&&(V=l.slice(0,Me)),V=V.trim();const o=["[img","[im","[i","["];for(const ke of o)if(V.endsWith(ke)){const Ce=V.lastIndexOf("[");if(Ce!==-1){V=V.slice(0,Ce).trim();break}}const x=["[/img","[/im","[/i","[/"];for(const ke of x)if(V.endsWith(ke)){const Ce=V.lastIndexOf("[");if(Ce!==-1){V=V.slice(0,Ce).trim();break}}let ue="...";$e>0&&(ue="... (+".concat($e," ").concat($e===1?"–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ":"–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π",")")),l=V+ue}const _=V=>{try{const me=new URL(V),z=me.hostname==="cdn.7tv.app"&&me.protocol==="https:";return z||console.warn("URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç–∫–ª–æ–Ω–µ–Ω:",{url:V,hostname:me.hostname,protocol:me.protocol,reason:me.hostname!=="cdn.7tv.app"?"–Ω–µ—Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–π –¥–æ–º–µ–Ω":"–Ω–µ—Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª"}),z}catch(me){return console.warn("–ù–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–π URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:",V,"–û—à–∏–±–∫–∞:",me.message),!1}},Y=V=>{const me=document.createElement("div");return me.textContent=V,me.innerHTML};let ye=l.replace(/\[img\](.*?)\[\/img\]/g,(V,me)=>{const z=me.trim();if(_(z)){const xe=Y(z);return'<img src="'.concat(xe,'" alt="7TV emote" class="inline-emoji" loading="lazy" />')}return"[–Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: ".concat(Y(z),"]")});return ye=ye.replace(new RegExp("\\[spoiler\\](.*?)\\[\\/spoiler\\]","gs"),(V,me,z,xe)=>{const $e=Y(me.trim()),Me=z>0?xe[z-1]:" ",y=z+V.length<xe.length?xe[z+V.length]:" ",o=Me&&Me!==" "&&Me!=="\n"&&Me!=="	",x=y&&y!==" "&&y!=="\n"&&y!=="	",ue=o?" ":"",ke=x?" ":"";return"".concat(ue,'<span class="spoiler-text" onclick="this.classList.toggle(\'revealed\')" title="–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä">').concat($e,"</span>").concat(ke)}),ye}),le=()=>{se.value=!se.value},re=l=>{const _=l.target;_&&(_.style.height="auto",_.style.height="".concat(Math.min(_.scrollHeight,200),"px"))},K=l=>{const _=M.value;if(_){const Y=_.selectionStart,ye=_.selectionEnd,ne=m.value.substring(0,Y),V=m.value.substring(ye);m.value=ne+l+V,pe(()=>{_.focus(),_.setSelectionRange(Y+l.length,Y+l.length),re({target:_})})}else m.value+=l},De=()=>{u.value=!0},Te=()=>{u.value=!1,setTimeout(()=>{!u.value&&!s.value&&(w.value=!1)},300)},Ne=()=>{w.value=!1},Oe=()=>{s.value=!0,w.value=!0,k.value=!1},Ee=()=>{s.value=!1,setTimeout(()=>{!u.value&&!j.value&&!s.value&&(w.value=!1,k.value=!1)},300)},be=()=>{console.log("Avatar load error, falling back to initials"),d.value=null,pe(()=>{const l=document.querySelector(".avatar-placeholder");l&&(l.style.display="flex")})},Ve=()=>{j.value=!0},Ue=()=>{j.value=!1,setTimeout(()=>{!j.value&&!s.value&&(k.value=!1)},300)},h=()=>{k.value=!1},H=()=>{s.value=!0,k.value=!0,w.value=!1},B=l=>{const _=M.value;if(_){const Y=_.selectionStart,ye=_.selectionEnd,ne="[img]".concat(l,"[/img]");m.value=m.value.slice(0,Y)+ne+m.value.slice(ye),pe(()=>{_.focus(),_.setSelectionRange(Y+ne.length,Y+ne.length),re({target:_})})}},Z=()=>{const l=M.value;if(l){const _=l.selectionStart,Y=l.selectionEnd,ye=m.value.slice(_,Y);let ne;ye.trim()?ne="[spoiler]".concat(ye,"[/spoiler]"):ne="[spoiler][/spoiler]",m.value=m.value.slice(0,_)+ne+m.value.slice(Y),pe(()=>{if(l.focus(),ye.trim())l.setSelectionRange(_+ne.length,_+ne.length);else{const V=_+9;l.setSelectionRange(V,V)}re({target:l})})}},ve=()=>{w.value=!1,k.value=!1},te=l=>{!l.target.closest(".emoji-picker")&&!l.target.closest(".image-picker")&&!l.target.closest(".emoji-button-inline")&&ve()},fe=()=>{c.push("/login")};return ze(m,()=>{n.value&&M.value&&pe(()=>{re({target:M.value})})}),{isEditing:n,editContent:m,userRating:E,isCommentOwner:q,canDeleteComment:G,isCommentEdited:L,formatDate:F,formatRelativeTime:J,startEdit:ie,cancelEdit:ae,saveEdit:N,confirmDelete:Ie,rateComment:Pe,avatarUrl:d,getInitials:U,goToUserLists:Ae,handleEditKeydown:_e,isCommentHidden:D,showHiddenComment:ee,hiddenCommentReason:he,isLongComment:Re,isExpanded:se,displayedText:$,formattedContent:v,toggleExpanded:le,autoResizeEdit:re,editTextarea:M,showEmojiPicker:w,showImagePicker:k,insertEmojiEdit:K,insertImageEdit:B,insertSpoilerEdit:Z,handleEmojiMouseEnter:De,handleEmojiMouseLeave:Te,handleImageMouseEnter:Ve,handleImageMouseLeave:Ue,closeEmojiPicker:Ne,closeImagePicker:h,handleButtonMouseEnter:Oe,handleButtonMouseLeave:Ee,handleImageButtonMouseEnter:H,handleAvatarError:be,openLogin:fe}}},Gs=["data-comment-id"],Zs={class:"comment-header"},Qs={class:"user-info"},Xs=["href"],Js={class:"user-avatar"},el=["src","alt"],tl=["href"],nl=["title"],ol={key:0,class:"edited-indicator"},sl={class:"comment-content"},ll={key:0,class:"hidden-comment-warning"},il={key:1},al={key:0,class:"deleted-comment"},rl={key:1},ul={key:0,class:"edit-form"},cl={class:"edit-textarea-container"},dl={class:"edit-footer"},vl={class:"edit-actions"},ml=["disabled"],fl={class:"character-counter-container"},gl={key:1,class:"comment-text-container"},yl=["innerHTML"],kl={class:"comment-footer"},pl={class:"comment-actions"},hl={class:"rating-buttons"},bl={class:"action-buttons"};function Cl(a,t,c,n,m,E){var w,s,u,k,j,U,F,J,S,T,C,P,R,O,q,G,L;const d=je("EmojiPicker"),M=je("ImagePicker");return i(),r("div",{class:"comment-item","data-comment-id":(w=c.comment)==null?void 0:w.id},[e("div",Zs,[e("div",Qs,[e("a",{href:"/lists/".concat((s=c.comment)==null?void 0:s.user_id),target:"_blank",rel:"noopener noreferrer",class:"user-avatar-link"},[e("div",Js,[n.avatarUrl?(i(),r("img",{key:0,src:n.avatarUrl,alt:((u=c.comment)==null?void 0:u.username)||"–ê–Ω–æ–Ω–∏–º",onError:t[0]||(t[0]=(...b)=>n.handleAvatarError&&n.handleAvatarError(...b)),onerror:"this.onerror=null; this.style.display='none'; this.nextElementSibling.style.display='flex';"},null,40,el)):(i(),r("div",{key:1,class:"avatar-placeholder",style:lt({display:n.avatarUrl?"none":"flex"})},g(n.getInitials(((k=c.comment)==null?void 0:k.username)||"–ê–Ω–æ–Ω–∏–º")),5))])],8,Xs),e("div",null,[e("a",{href:"/lists/".concat((j=c.comment)==null?void 0:j.user_id),target:"_blank",rel:"noopener noreferrer",class:"username-link"},g(((U=c.comment)==null?void 0:U.username)||"–ê–Ω–æ–Ω–∏–º"),9,tl),e("span",{class:"date",title:n.formatDate((F=c.comment)==null?void 0:F.created_at)},[de(g(n.formatRelativeTime((J=c.comment)==null?void 0:J.created_at))+" ",1),n.isCommentEdited?(i(),r("span",ol," (–∏–∑–º–µ–Ω–µ–Ω–æ "+g(n.formatDate((S=c.comment)==null?void 0:S.updated_at))+") ",1)):p("",!0)],8,nl)])])]),e("div",sl,[!((T=c.comment)!=null&&T.is_deleted)&&n.isCommentHidden&&!n.showHiddenComment?(i(),r("div",ll,[n.hiddenCommentReason==="lowRating"?(i(),r("p",{key:0,class:"warning-text",onClick:t[1]||(t[1]=b=>n.showHiddenComment=!0)},t[18]||(t[18]=[e("i",{class:"fas fa-eye-slash"},null,-1),de(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–∫—Ä—ã—Ç –∏–∑-–∑–∞ –Ω–∏–∑–∫–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å. ")]))):p("",!0)])):(i(),r("div",il,[(C=c.comment)!=null&&C.is_deleted?(i(),r("div",al,t[19]||(t[19]=[e("p",{class:"deleted-message"},[e("i",{class:"fas fa-trash"}),de(" –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —É–¥–∞–ª—ë–Ω ")],-1)]))):(i(),r("div",rl,[n.isEditing?(i(),r("div",ul,[e("div",cl,[X(e("textarea",{ref:"editTextarea","onUpdate:modelValue":t[2]||(t[2]=b=>n.editContent=b),class:"edit-textarea",rows:"3",maxlength:"1500",onKeydown:t[3]||(t[3]=(...b)=>n.handleEditKeydown&&n.handleEditKeydown(...b)),onInput:t[4]||(t[4]=(...b)=>n.autoResizeEdit&&n.autoResizeEdit(...b))},null,544),[[vt,n.editContent]])]),e("div",dl,[e("div",vl,[e("button",{onClick:t[5]||(t[5]=(...b)=>n.cancelEdit&&n.cancelEdit(...b)),class:"cancel-button"},"–û—Ç–º–µ–Ω–∞"),e("button",{onClick:t[6]||(t[6]=(...b)=>n.saveEdit&&n.saveEdit(...b)),class:"save-button",disabled:!n.editContent.trim()||n.editContent.length>1500}," –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ",8,ml)]),e("div",fl,[e("div",{class:A(["character-counter-inline",{"near-limit":n.editContent.length>1400,"at-limit":n.editContent.length>=1500}])},g(n.editContent.length)+"/1500 ",3),e("button",{type:"button",class:A(["emoji-button-inline",{active:n.showEmojiPicker}]),onMouseenter:t[7]||(t[7]=(...b)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...b)),onMouseleave:t[8]||(t[8]=(...b)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...b))}," üòä ",34),e("button",{type:"button",class:A(["emoji-button-inline",{active:n.showImagePicker}]),onMouseenter:t[9]||(t[9]=(...b)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...b)),onMouseleave:t[10]||(t[10]=(...b)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...b))},t[20]||(t[20]=[ot('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-f1f39967><g id="logo" data-v-f1f39967><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-f1f39967></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-f1f39967></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-f1f39967></path></g></svg>',1)]),34),e("button",{type:"button",class:"emoji-button-inline spoiler-button",onClick:t[11]||(t[11]=(...b)=>n.insertSpoilerEdit&&n.insertSpoilerEdit(...b)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},t[21]||(t[21]=[e("i",{class:"fas fa-eye-slash"},null,-1)])),we(d,{"is-visible":n.showEmojiPicker,onEmojiSelected:n.insertEmojiEdit,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),we(M,{"is-visible":n.showImagePicker,"current-user":c.currentUser,onImageSelected:n.insertImageEdit,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:n.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"])])])])):(i(),r("div",gl,[e("p",{class:A(["comment-text",{truncated:n.isLongComment&&!n.isExpanded}]),innerHTML:n.formattedContent},null,10,yl),n.isLongComment?(i(),r("button",{key:0,onClick:t[12]||(t[12]=(...b)=>n.toggleExpanded&&n.toggleExpanded(...b)),class:"expand-button"},g(n.isExpanded?"–°–≤–µ—Ä–Ω—É—Ç—å":"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å"),1)):p("",!0)]))]))]))]),e("div",kl,[e("div",pl,[e("div",hl,[!n.isCommentOwner&&!((P=c.comment)!=null&&P.is_deleted)?(i(),r("button",{key:0,onClick:t[13]||(t[13]=b=>n.rateComment(1)),class:A(["rating-button",{"rated-up":n.userRating===1}])},t[22]||(t[22]=[e("i",{class:"fas fa-thumbs-up"},null,-1)]),2)):p("",!0),e("span",{class:A(["rating-count",{"rating-positive":n.userRating===1,"rating-negative":n.userRating===-1}])},g(((R=c.comment)==null?void 0:R.rating)||0),3),!n.isCommentOwner&&!((O=c.comment)!=null&&O.is_deleted)?(i(),r("button",{key:1,onClick:t[14]||(t[14]=b=>n.rateComment(-1)),class:A(["rating-button",{"rated-down":n.userRating===-1}])},t[23]||(t[23]=[e("i",{class:"fas fa-thumbs-down"},null,-1)]),2)):p("",!0)]),e("div",bl,[!c.currentUser||c.currentUser.allow_comments===1?(i(),r("button",{key:0,onClick:t[15]||(t[15]=b=>a.$emit("reply",c.comment)),class:"action-button reply-button"},t[24]||(t[24]=[e("i",{class:"fas fa-reply"},null,-1)]))):p("",!0),n.isCommentOwner&&!((q=c.comment)!=null&&q.is_deleted)&&!n.isEditing&&((G=c.currentUser)==null?void 0:G.allow_comments)===1?(i(),r("button",{key:1,onClick:t[16]||(t[16]=(...b)=>n.startEdit&&n.startEdit(...b)),class:"action-button edit-button"},t[25]||(t[25]=[e("i",{class:"fas fa-edit"},null,-1)]))):p("",!0),n.canDeleteComment&&!((L=c.comment)!=null&&L.is_deleted)?(i(),r("button",{key:2,onClick:t[17]||(t[17]=(...b)=>n.confirmDelete&&n.confirmDelete(...b)),class:"action-button delete-button"},t[26]||(t[26]=[e("i",{class:"fas fa-trash"},null,-1)]))):p("",!0)])])])],8,Gs)}const wl=Be(Ys,[["render",Cl],["__scopeId","data-v-f1f39967"]]),_l={name:"CommentThread",components:{CommentItem:wl,EmojiPicker:mt,ImagePicker:ft},props:{comment:{type:Object,required:!0},currentUser:{type:Object,required:!0},replyTo:{type:Object,default:null},replyContent:{type:String,default:""},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate","submit-reply","cancel-reply","update-reply-content","reply-keydown"],setup(a,{emit:t}){const c=f(null),n=f(!1),m=f(!1),E=f(!1),d=f(!1),M=f(!1),w=f(!1),s=b=>{t("update-reply-content",b.target.value);const D=b.target;D&&(D.style.height="auto",D.style.height="".concat(Math.min(D.scrollHeight,200),"px"))},u=b=>{const D=c.value;if(D){const ee=D.selectionStart,he=D.selectionEnd,ie=D.value,ae=ie.substring(0,ee),N=ie.substring(he);D.value=ae+b+N,t("update-reply-content",D.value),pe(()=>{D.focus(),D.setSelectionRange(ee+b.length,ee+b.length),s({target:D})})}},k=()=>{d.value=!0},j=()=>{d.value=!1,setTimeout(()=>{!d.value&&!E.value&&(n.value=!1)},300)},U=()=>{E.value=!0,n.value=!0,m.value=!1},F=()=>{E.value=!1,setTimeout(()=>{!d.value&&!M.value&&!E.value&&(n.value=!1,m.value=!1)},300)},J=()=>{n.value=!1},S=()=>{M.value=!0},T=()=>{M.value=!1,setTimeout(()=>{!M.value&&!E.value&&(m.value=!1)},300)},C=()=>{m.value=!1},P=()=>{E.value=!0,m.value=!0,n.value=!1},R=b=>{const D=c.value;if(D){const ee=D.selectionStart,he=D.selectionEnd,ie="[img]".concat(b,"[/img]"),ae=D.value.slice(0,ee)+ie+D.value.slice(he);D.value=ae,t("update-reply-content",ae),pe(()=>{D.focus(),D.setSelectionRange(ee+ie.length,ee+ie.length),s({target:D})})}},O=()=>{const b=c.value;if(b){const D=b.selectionStart,ee=b.selectionEnd,he=b.value.slice(D,ee);let ie;he.trim()?ie="[spoiler]".concat(he,"[/spoiler]"):ie="[spoiler][/spoiler]";const ae=b.value.slice(0,D)+ie+b.value.slice(ee);b.value=ae,t("update-reply-content",ae),pe(()=>{if(b.focus(),he.trim())b.setSelectionRange(D+ie.length,D+ie.length);else{const N=D+9;b.setSelectionRange(N,N)}s({target:b})})}},q=()=>{w.value=!w.value},G=()=>{n.value=!1,m.value=!1},L=b=>{!b.target.closest(".emoji-picker")&&!b.target.closest(".image-picker")&&!b.target.closest(".emoji-button-inline")&&G()};return Ge(()=>{document.addEventListener("click",L)}),st(()=>{document.removeEventListener("click",L)}),{replyTextarea:c,showEmojiPicker:n,showImagePicker:m,isCollapsed:w,insertEmoji:u,insertImage:R,insertSpoiler:O,handleEmojiMouseEnter:k,handleEmojiMouseLeave:j,handleImageMouseEnter:S,handleImageMouseLeave:T,handleButtonMouseEnter:U,handleButtonMouseLeave:F,closeEmojiPicker:J,closeImagePicker:C,handleImageButtonMouseEnter:P,handleReplyInput:s,toggleCollapsed:q,closeAllPickers:G}},computed:{canReply(){return this.currentUser?this.currentUser.allow_comments===1:!0},getReplyPlaceholder(){return this.currentUser?this.currentUser.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç..."},formattedContent(){if(!this.comment.content)return"";const a=n=>{try{const m=new URL(n),E=m.hostname==="cdn.7tv.app"&&m.protocol==="https:";return E||console.warn("URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç–∫–ª–æ–Ω–µ–Ω:",{url:n,hostname:m.hostname,protocol:m.protocol,reason:m.hostname!=="cdn.7tv.app"?"–Ω–µ—Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–π –¥–æ–º–µ–Ω":"–Ω–µ—Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª"}),E}catch(m){return console.warn("–ù–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–π URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:",n,"–û—à–∏–±–∫–∞:",m.message),!1}},t=n=>{const m=document.createElement("div");return m.textContent=n,m.innerHTML};let c=this.comment.content.replace(/\[img\](.*?)\[\/img\]/g,(n,m)=>{const E=m.trim();if(a(E)){const d=t(E);return'<img src="'.concat(d,'" alt="7TV emote" class="inline-emoji" loading="lazy" />')}return"[–Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: ".concat(t(E),"]")});return c=c.replace(new RegExp("\\[spoiler\\](.*?)\\[\\/spoiler\\]","gs"),(n,m,E,d)=>{const M=t(m.trim()),w=E>0?d[E-1]:" ",s=E+n.length<d.length?d[E+n.length]:" ",u=w&&w!==" "&&w!=="\n"&&w!=="	",k=s&&s!==" "&&s!=="\n"&&s!=="	",j=u?" ":"",U=k?" ":"";return"".concat(j,'<span class="spoiler-text" onclick="this.classList.toggle(\'revealed\')" title="–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä">').concat(M,"</span>").concat(U)}),c}}},El={class:"comment-thread"},Ml={key:0,class:"reply-form"},Il={class:"textarea-container"},Ll=["value","placeholder","disabled"],Rl={class:"reply-footer"},Tl={class:"reply-actions"},$l=["disabled"],Al={class:"character-counter-container"},Sl=["disabled"],Pl={key:1,class:"replies-container"},Ul=["title"],xl={class:"replies-count"},Hl=["title"],jl={key:0,class:"replies-content"};function Bl(a,t,c,n,m,E){const d=je("CommentItem"),M=je("EmojiPicker"),w=je("ImagePicker"),s=je("CommentThread",!0);return i(),r("div",El,[we(d,{comment:c.comment,"current-user":c.currentUser,"editing-comment-id":c.editingCommentId,onReply:t[0]||(t[0]=u=>a.$emit("reply",u)),onStartEdit:t[1]||(t[1]=u=>a.$emit("start-edit",u)),onCancelEdit:t[2]||(t[2]=u=>a.$emit("cancel-edit")),onEdit:t[3]||(t[3]=(u,k)=>a.$emit("edit",u,k)),onDelete:t[4]||(t[4]=u=>a.$emit("delete",u)),onRate:t[5]||(t[5]=(u,k)=>a.$emit("rate",u,k))},null,8,["comment","current-user","editing-comment-id"]),c.replyTo&&c.replyTo.id===c.comment.id?(i(),r("div",Ml,[e("div",Il,[e("textarea",{ref:"replyTextarea",class:"comment-textarea",value:c.replyContent,placeholder:E.getReplyPlaceholder,disabled:c.currentUser&&c.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:t[6]||(t[6]=(...u)=>n.handleReplyInput&&n.handleReplyInput(...u)),onKeydown:t[7]||(t[7]=u=>a.$emit("reply-keydown",u))},null,40,Ll)]),e("div",Rl,[e("div",Tl,[e("button",{class:"cancel-reply",onClick:t[8]||(t[8]=u=>a.$emit("cancel-reply"))},"–û—Ç–º–µ–Ω–∞"),e("button",{class:"submit-button",disabled:!c.replyContent.trim()||c.replyContent.length>1500||c.currentUser&&c.currentUser.allow_comments!==1,onClick:t[9]||(t[9]=u=>a.$emit("submit-reply"))}," –û—Ç–≤–µ—Ç–∏—Ç—å ",8,$l)]),e("div",Al,[e("div",{class:A(["character-counter-inline",{"near-limit":c.replyContent.length>1400,"at-limit":c.replyContent.length>=1500}])},g(c.replyContent.length)+"/1500 ",3),e("button",{type:"button",class:A(["emoji-button-inline",{active:n.showEmojiPicker}]),onMouseenter:t[10]||(t[10]=(...u)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...u)),onMouseleave:t[11]||(t[11]=(...u)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...u))}," üòä ",34),e("button",{type:"button",class:A(["emoji-button-inline",{active:n.showImagePicker}]),onMouseenter:t[12]||(t[12]=(...u)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...u)),onMouseleave:t[13]||(t[13]=(...u)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...u))},t[27]||(t[27]=[ot('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-9fb2806a><g id="logo" data-v-9fb2806a><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-9fb2806a></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-9fb2806a></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-9fb2806a></path></g></svg>',1)]),34),e("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:c.currentUser&&c.currentUser.allow_comments!==1,onClick:t[14]||(t[14]=(...u)=>n.insertSpoiler&&n.insertSpoiler(...u)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},t[28]||(t[28]=[e("i",{class:"fas fa-eye-slash"},null,-1)]),8,Sl),we(M,{"is-visible":n.showEmojiPicker,onEmojiSelected:n.insertEmoji,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),we(w,{"is-visible":n.showImagePicker,"current-user":c.currentUser,onImageSelected:n.insertImage,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:a.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"])])])])):p("",!0),c.comment.replies&&c.comment.replies.length>0?(i(),r("div",Pl,[e("button",{class:"collapse-toggle",title:n.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:t[15]||(t[15]=(...u)=>n.toggleCollapsed&&n.toggleCollapsed(...u))},[e("span",{class:A(["collapse-icon",{expanded:!n.isCollapsed}])},t[29]||(t[29]=[e("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},[e("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1)]),2),e("span",xl,g(c.comment.replies.length)+" "+g(c.comment.replies.length===1?"–æ—Ç–≤–µ—Ç":"–æ—Ç–≤–µ—Ç–æ–≤"),1)],8,Ul),e("div",{class:"vertical-line-clickable",title:n.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:t[16]||(t[16]=(...u)=>n.toggleCollapsed&&n.toggleCollapsed(...u))},[e("div",{class:A(["vertical-line-visual",{collapsed:n.isCollapsed}])},null,2)],8,Hl),n.isCollapsed?p("",!0):(i(),r("div",jl,[(i(!0),r(ge,null,Le(c.comment.replies,u=>(i(),He(s,{key:u.id,comment:u,"current-user":c.currentUser,"reply-to":c.replyTo,"reply-content":c.replyContent,"editing-comment-id":c.editingCommentId,onReply:t[17]||(t[17]=k=>a.$emit("reply",k)),onStartEdit:t[18]||(t[18]=k=>a.$emit("start-edit",k)),onCancelEdit:t[19]||(t[19]=k=>a.$emit("cancel-edit")),onEdit:t[20]||(t[20]=(k,j)=>a.$emit("edit",k,j)),onDelete:t[21]||(t[21]=k=>a.$emit("delete",k)),onRate:t[22]||(t[22]=(k,j)=>a.$emit("rate",k,j)),onSubmitReply:t[23]||(t[23]=k=>a.$emit("submit-reply")),onCancelReply:t[24]||(t[24]=k=>a.$emit("cancel-reply")),onUpdateReplyContent:t[25]||(t[25]=k=>a.$emit("update-reply-content",k)),onReplyKeydown:t[26]||(t[26]=k=>a.$emit("reply-keydown",k))},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id"]))),128))]))])):p("",!0)])}const Dl=Be(_l,[["render",Bl],["__scopeId","data-v-9fb2806a"]]),Nl={name:"Comments",components:{CommentThread:Dl,Notification:rt,EmojiPicker:mt,ImagePicker:ft},props:{movieId:{type:[String,Number],required:!0}},setup(a){const t=dt(),c=at(),n=f([]),m=f(""),E=f(null),d=f(""),M=f(null),w=f(t.user),s=f(null),u=f(null),k=f(!1),j=f(!1),U=f(!1),F=f(!1),J=f(!1),S=f(!1),T=f(!1),C=W(()=>{const h=(H=null)=>n.value.filter(B=>B.parent_id===H).sort((B,Z)=>B.id-Z.id).map(B=>({...B,replies:h(B.id)})).filter(B=>!B.is_deleted||B.replies&&B.replies.length>0);return h()}),P=W(()=>{const h=H=>H.reduce((B,Z)=>B+1+h(Z.replies||[]),0);return h(C.value)}),R=h=>h===1?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π":h>=2&&h<=4?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è":"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤",O=async()=>{try{const h=await In(a.movieId);n.value=h}catch(h){console.error("Failed to load comments:",h),s.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.")}},q=async()=>{if(!T.value){if(!t.token){s.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:ae});return}if(w.value&&w.value.allow_comments!==1){s.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(m.value.trim()){if(m.value.length>1500){s.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await cn(a.movieId,m.value.trim()),m.value="",await O(),k.value=!0,pe(()=>{u.value&&(u.value.focus(),u.value.style.height="auto"),setTimeout(()=>{const h=document.querySelectorAll(".comment-item[data-comment-id]");if(h.length>0){const H=Array.from(h).map(B=>parseInt(B.getAttribute("data-comment-id"))).filter(B=>!isNaN(B));if(H.length>0){const B=Math.max(...H),Z=document.querySelector('[data-comment-id="'.concat(B,'"]'));Z&&Z.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}},300)})}catch(h){console.error("Failed to create comment:",h),s.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}}}},G=h=>{if(!t.token){s.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:ae});return}M.value=null,E.value=h,d.value="",pe(()=>{const H=document.querySelector(".reply-form");H&&H.scrollIntoView({behavior:"smooth",block:"center"})})},L=async()=>{if(!t.token){s.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:ae});return}if(w.value&&w.value.allow_comments!==1){s.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!(!d.value.trim()||!E.value)){if(d.value.length>1500){s.value.showNotification("–û—Ç–≤–µ—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await cn(a.movieId,d.value.trim(),E.value.id);const h=E.value.id;await O(),d.value="",E.value=null,pe(()=>{setTimeout(()=>{const H=document.querySelector('[data-comment-id="'.concat(h,'"]'));if(H){const B=H.querySelector(".replies-content");if(B){const Z=B.querySelectorAll(".comment-item[data-comment-id]");if(Z.length>0){const ve=Array.from(Z).map(te=>parseInt(te.getAttribute("data-comment-id"))).filter(te=>!isNaN(te));if(ve.length>0){const te=Math.max(...ve),fe=document.querySelector('[data-comment-id="'.concat(te,'"]'));fe&&fe.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}}}},300)})}catch(h){console.error("Error submitting reply:",h),s.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}}},b=async(h,H)=>{if(!t.token){s.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:ae});return}if(w.value&&w.value.allow_comments!==1){s.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(H.length>1500){s.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await Tn(h,H.trim()),await O(),M.value=null}catch(B){console.error("Failed to update comment:",B),s.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},D=async h=>{if(!t.token){s.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:ae});return}try{await Rn(h),await O()}catch(H){console.error("Failed to delete comment:",H),s.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},ee=async(h,H)=>{if(!t.token){s.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:ae});return}try{await Ln(h,H),await O()}catch(B){console.error("Failed to rate comment:",B),s.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ü–µ–Ω–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},he=h=>{T.value||j.value||h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),q())},ie=h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),L())},ae=()=>{c.push("/login")},N=h=>{const H=(h==null?void 0:h.target)||u.value;H&&(H.style.height="auto",H.style.height="".concat(Math.min(H.scrollHeight,200),"px"))},Ie=h=>{if(T.value=!0,u.value){const H=u.value.selectionStart,B=u.value.selectionEnd;m.value=m.value.slice(0,H)+h+m.value.slice(B),pe(()=>{u.value.focus(),u.value.setSelectionRange(H+h.length,H+h.length),N(),setTimeout(()=>{T.value=!1},100)})}else T.value=!1},Pe=h=>{if(u.value){const H=u.value.selectionStart,B=u.value.selectionEnd,Z="[img]".concat(h,"[/img]");m.value=m.value.slice(0,H)+Z+m.value.slice(B),pe(()=>{u.value.focus(),u.value.setSelectionRange(H+Z.length,H+Z.length),N()})}},Ae=()=>{if(u.value){const h=u.value.selectionStart,H=u.value.selectionEnd,B=m.value.slice(h,H);let Z;B.trim()?Z="[spoiler]".concat(B,"[/spoiler]"):Z="[spoiler][/spoiler]",m.value=m.value.slice(0,h)+Z+m.value.slice(H),pe(()=>{if(u.value.focus(),B.trim())u.value.setSelectionRange(h+Z.length,h+Z.length);else{const ve=h+9;u.value.setSelectionRange(ve,ve)}N()})}},_e=h=>{if(!h)return"";const H=ve=>{try{const te=new URL(ve),fe=te.hostname==="cdn.7tv.app"&&te.protocol==="https:";return fe||console.warn("URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç–∫–ª–æ–Ω–µ–Ω:",{url:ve,hostname:te.hostname,protocol:te.protocol,reason:te.hostname!=="cdn.7tv.app"?"–Ω–µ—Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–π –¥–æ–º–µ–Ω":"–Ω–µ—Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª"}),fe}catch(te){return console.warn("–ù–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–π URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:",ve,"–û—à–∏–±–∫–∞:",te.message),!1}},B=ve=>{const te=document.createElement("div");return te.textContent=ve,te.innerHTML};let Z=h.replace(/\[img\](.*?)\[\/img\]/g,(ve,te)=>{const fe=te.trim();if(H(fe)){const Se=B(fe);return'<img src="'.concat(Se,'" alt="7TV emote" class="inline-emoji" loading="lazy" />')}return"[–Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: ".concat(B(fe),"]")});return Z=Z.replace(new RegExp("\\[spoiler\\](.*?)\\[\\/spoiler\\]","gs"),(ve,te,fe,Se)=>{const Ze=B(te.trim()),l=fe>0?Se[fe-1]:" ",_=fe+ve.length<Se.length?Se[fe+ve.length]:" ",Y=l&&l!==" "&&l!=="\n"&&l!=="	",ye=_&&_!==" "&&_!=="\n"&&_!=="	",ne=Y?" ":"",V=ye?" ":"";return"".concat(ne,'<span class="spoiler-text" onclick="this.classList.toggle(\'revealed\')" title="–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä">').concat(Ze,"</span>").concat(V)}),Z},Re=()=>{F.value=!0},se=()=>{F.value=!1,setTimeout(()=>{!F.value&&!S.value&&(j.value=!1)},300)},$=()=>{j.value=!1},v=()=>{S.value=!1,setTimeout(()=>{!F.value&&!J.value&&!S.value&&(j.value=!1,U.value=!1)},300)},le=()=>{S.value=!0,j.value=!0,U.value=!1},re=()=>{J.value=!0},K=()=>{J.value=!1,setTimeout(()=>{!J.value&&!S.value&&(U.value=!1)},300)},De=()=>{U.value=!1},Te=()=>{S.value=!0,U.value=!0,j.value=!1},Ne=W(()=>w.value?w.value.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."),Oe=W(()=>w.value?w.value.allow_comments===1:!0),Ee=h=>{E.value=null,d.value="",M.value=h},be=()=>{M.value=null},Ve=()=>{j.value=!1,U.value=!1},Ue=h=>{!h.target.closest(".emoji-picker")&&!h.target.closest(".image-picker")&&!h.target.closest(".emoji-button-inline")&&Ve()};return Ge(()=>{O(),document.addEventListener("click",Ue)}),st(()=>{document.removeEventListener("click",Ue)}),{comments:n,groupedComments:C,newComment:m,replyTo:E,replyContent:d,editingCommentId:M,currentUser:w,notificationRef:s,commentTextarea:u,showComments:k,submitComment:q,handleReply:G,submitReply:L,handleEdit:b,handleDelete:D,handleRate:ee,handleCommentKeydown:he,handleReplyKeydown:ie,autoResize:N,totalCommentsCount:P,getCommentWordForm:R,showEmojiPicker:j,showImagePicker:U,insertEmoji:Ie,insertImage:Pe,formatCommentContent:_e,handleEmojiMouseEnter:Re,handleEmojiMouseLeave:se,handleImageMouseEnter:re,handleImageMouseLeave:K,closeEmojiPicker:$,closeImagePicker:De,handleButtonMouseLeave:v,handleButtonMouseEnter:le,handleImageButtonMouseEnter:Te,getCommentPlaceholder:Ne,canComment:Oe,handleStartEdit:Ee,handleCancelEdit:be,insertSpoiler:Ae}}},Ol={class:"comments-section"},Vl={class:"spoiler-content"},ql={key:1,class:"comments-container"},Kl={class:"comments-header"},Wl={class:"textarea-container"},Fl=["placeholder","disabled"],zl={class:"comment-footer"},Yl={class:"comment-actions"},Gl=["disabled"],Zl={class:"character-counter-container"},Ql=["disabled"],Xl=["disabled"],Jl=["disabled"],ei={class:"comments-list"};function ti(a,t,c,n,m,E){const d=je("EmojiPicker"),M=je("ImagePicker"),w=je("CommentThread"),s=je("Notification");return i(),r("div",Ol,[n.showComments?(i(),r("div",ql,[e("div",Kl,[e("button",{class:"hide-comments-btn",onClick:t[1]||(t[1]=u=>n.showComments=!1)},t[16]||(t[16]=[e("i",{class:"fas fa-eye-slash"},null,-1),de(" –°–∫—Ä—ã—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ")]))]),e("form",{class:"comment-form",onSubmit:t[10]||(t[10]=Ye((...u)=>n.submitComment&&n.submitComment(...u),["prevent"]))},[e("div",Wl,[X(e("textarea",{ref:"commentTextarea","onUpdate:modelValue":t[2]||(t[2]=u=>n.newComment=u),class:"comment-textarea",placeholder:n.getCommentPlaceholder,disabled:n.currentUser&&n.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:t[3]||(t[3]=(...u)=>n.autoResize&&n.autoResize(...u)),onKeydown:t[4]||(t[4]=(...u)=>n.handleCommentKeydown&&n.handleCommentKeydown(...u))},null,40,Fl),[[vt,n.newComment]])]),e("div",zl,[e("div",Yl,[e("button",{class:"submit-button",type:"submit",disabled:!n.newComment.trim()||n.newComment.length>1500||n.currentUser&&n.currentUser.allow_comments!==1}," –û—Ç–ø—Ä–∞–≤–∏—Ç—å ",8,Gl)]),e("div",Zl,[e("div",{class:A(["character-counter-inline",{"near-limit":n.newComment.length>1400,"at-limit":n.newComment.length>=1500}])},g(n.newComment.length)+"/1500 ",3),e("button",{type:"button",class:A(["emoji-button-inline",{active:n.showEmojiPicker}]),disabled:n.currentUser&&n.currentUser.allow_comments!==1,onMouseenter:t[5]||(t[5]=(...u)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...u)),onMouseleave:t[6]||(t[6]=(...u)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...u))}," üòä ",42,Ql),e("button",{type:"button",class:A(["emoji-button-inline",{active:n.showImagePicker}]),disabled:n.currentUser&&n.currentUser.allow_comments!==1,onMouseenter:t[7]||(t[7]=(...u)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...u)),onMouseleave:t[8]||(t[8]=(...u)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...u))},t[17]||(t[17]=[ot('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-0e4b5317><g id="logo" data-v-0e4b5317><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-0e4b5317></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-0e4b5317></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-0e4b5317></path></g></svg>',1)]),42,Xl),e("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:n.currentUser&&n.currentUser.allow_comments!==1,onClick:t[9]||(t[9]=(...u)=>n.insertSpoiler&&n.insertSpoiler(...u)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},t[18]||(t[18]=[e("i",{class:"fas fa-eye-slash"},null,-1)]),8,Jl),we(d,{"is-visible":n.showEmojiPicker&&n.canComment,onEmojiSelected:n.insertEmoji,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),we(M,{"is-visible":n.showImagePicker&&n.canComment,"current-user":n.currentUser,onImageSelected:n.insertImage,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:a.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"])])])],32),e("div",ei,[(i(!0),r(ge,null,Le(n.groupedComments,u=>(i(),He(w,{key:u.id,comment:u,"current-user":n.currentUser,"reply-to":n.replyTo,"reply-content":n.replyContent,"editing-comment-id":n.editingCommentId,"is-first-comment":!1,onReply:n.handleReply,onStartEdit:n.handleStartEdit,onCancelEdit:n.handleCancelEdit,onEdit:n.handleEdit,onDelete:n.handleDelete,onRate:n.handleRate,onSubmitReply:n.submitReply,onCancelReply:t[11]||(t[11]=k=>n.replyTo=null),onUpdateReplyContent:t[12]||(t[12]=k=>n.replyContent=k),onReplyKeydown:n.handleReplyKeydown},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id","onReply","onStartEdit","onCancelEdit","onEdit","onDelete","onRate","onSubmitReply","onReplyKeydown"]))),128))])])):(i(),r("div",{key:0,class:"spoiler-warning",onClick:t[0]||(t[0]=u=>n.showComments=!0)},[e("div",Vl,[t[13]||(t[13]=e("i",{class:"fas fa-eye-slash"},null,-1)),t[14]||(t[14]=e("h3",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–∫—Ä—ã—Ç—ã",-1)),t[15]||(t[15]=e("p",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä—ã. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å.",-1)),e("div",{class:A(["comments-count",{"no-comments":n.totalCommentsCount===0}])},[n.totalCommentsCount===0?(i(),r(ge,{key:0},[de(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç ")],64)):(i(),r(ge,{key:1},[de(g(n.totalCommentsCount)+" "+g(n.getCommentWordForm(n.totalCommentsCount)),1)],64))],2)])])),we(s,{ref:"notificationRef"},null,512)])}const ni=Be(Nl,[["render",ti],["__scopeId","data-v-0e4b5317"]]),oi={class:"movie-info"},si={class:"content"},li={key:0,class:"content-card"},ii={class:"movie-skeleton"},ai={class:"movie-skeleton__player"},ri={key:2,class:"content-card"},ui={key:3,class:"content-card"},ci={class:"content-header"},di=["src"],vi={class:"content-title"},mi={key:0,class:"ratings-links"},fi={key:1},gi=["href","title"],yi={key:2},ki=["href","title"],pi={key:3},hi=["href","title"],bi={key:4},Ci=["href","title"],wi={key:5},_i=["href"],Ei={key:6,class:"rating-links-group"},Mi=["href"],Ii=["title"],Li={key:0,class:"fa-regular fa-face-grin-wink"},Ri={key:1,class:"fas fa-spinner fa-spin"},Ti={key:2,class:"nudity-info-popup"},$i={class:"nudity-info-content"},Ai=["content"],Si=["content"],Pi={class:"additional-info"},Ui={class:"info-content"},xi={class:"details-container"},Hi={class:"info-list"},ji={key:0},Bi={key:1},Di={key:2},Ni={key:3},Oi={key:4},Vi={key:5},qi={key:6},Ki={key:7},Wi={key:8},Fi={class:"content-info"},zi={key:0,class:"content-description-text"},Yi={key:2,class:"comments-section"},Gi={key:3,class:"staff-section"},Zi={class:"staff-categories"},Qi={key:0,class:"staff-category"},Xi={class:"staff-list"},Ji=["href","title"],ea=["src","alt"],ta={class:"staff-name"},na={key:0,class:"staff-role"},oa=["href","title"],sa={key:1,class:"staff-category"},la={class:"staff-names-container"},ia={class:"staff-names-list"},aa=["href"],ra=["href","title"],ua={key:2,class:"staff-category"},ca={class:"staff-names-container"},da={class:"staff-names-list"},va=["href"],ma=["href","title"],fa={key:4,class:"yt-video-container"},ga={key:5,class:"related-movies"},ya=["title"],ka={key:6,class:"related-movies"},pa=["title"],ha={__name:"MovieInfo",setup(a){const t=f(!0),c=it(),n=dt(),m=$n(),E=yn(),d=f(E.params.kp_id),M=f(""),w=f(null),s=f(null),u=An(),j=Dn().areTrailersActive,U=f(null),F=f(!1),J=f(!1),S=f(10),T=f(null),C=f(!1),P=W(()=>c.isCommentsEnabled),R=()=>{if(s.value){const $=s.value.name_ru||s.value.name_en||s.value.name_original||"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å–º–µ";document.title=$}},O=$=>$?$.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",q=$=>($||[]).map(v=>({kp_id:v.film_id,poster:v.poster_url_preview||v.poster_url,title:v.name_ru||v.name_en||v.name_original})),G=$=>{if(typeof $!="number")return;const v=Math.floor($/60),le=$%60;return"".concat(v," —á. ").concat(le," –º–∏–Ω.")},L=f(!1),b=f({top:"0px",left:"0px"}),D=$=>{L.value=!0,b.value={top:"".concat($.pageY+10,"px"),left:"".concat($.pageX-70,"px")}},ee=f(null),he=async()=>{try{const $=[s.value.name_ru||s.value.name_en||s.value.name_original,...s.value.year?[s.value.year]:[],...s.value.film_length?[G(s.value.film_length)]:[]];await navigator.clipboard.writeText($.join(", ")),ee.value.showNotification("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ")}catch($){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",$)}},ie=async($=!0)=>{var v,le,re,K,De,Te,Ne,Oe;try{let Ee;if(d.value.startsWith("shiki")?Ee=await Pn(d.value):Ee=await Un(d.value,n.token),Array.isArray(Ee)&&Ee.length===0)throw new Error("–î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–∏—Å–∫.");s.value=Ee,d.value.startsWith("shiki")?s.value={...s.value,title:s.value.name_ru||s.value.name_en,name_original:s.value.name_en,short_description:s.value.slogan}:s.value={...s.value,title:s.value.name_ru||s.value.name_en||s.value.name_original,kinopoisk_id:d.value},u.setHeaderContent({text:s.value.title,imageUrl:s.value.logo_url}),R();const be={kp_id:d.value,title:((v=s.value)==null?void 0:v.name_ru)||((le=s.value)==null?void 0:le.name_en)||((re=s.value)==null?void 0:re.name_original),poster:((K=s.value)==null?void 0:K.poster_url)||((De=s.value)==null?void 0:De.cover_url)||((Te=s.value)==null?void 0:Te.screenshots[0]),year:(Ne=s.value)==null?void 0:Ne.year,type:(Oe=s.value)==null?void 0:Oe.type};if(d.value.startsWith("shiki"))if(s.value.screenshots&&s.value.screenshots.length>0){const Ue=Math.floor(Math.random()*s.value.screenshots.length),h=s.value.screenshots[Ue];m.updateMoviePoster(h)}else be.poster&&m.updateMoviePoster(be.poster);else be.poster&&m.updateMoviePoster(be.poster);if(W(()=>c.isHistoryAllowed).value&&be.kp_id&&be.title&&$)if(n.token)try{await pn(be.kp_id,Q.HISTORY)}catch(Ue){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é:",Ue)}else c.addToHistory({...be})}catch(Ee){const{message:be,code:Ve}=ct(Ee);M.value=be,w.value=Ve,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–ª—å–º–∞—Ö:",Ee)}},ae=W(()=>{var $,v;return console.log("–¢—Ä–µ–π–ª–µ—Ä—ã:",($=s.value)==null?void 0:$.videos),(v=s.value)==null?void 0:v.videos}),N=W(()=>{var $;return q(($=s.value)==null?void 0:$.sequels_and_prequels)}),Ie=W(()=>{var $;return q(($=s.value)==null?void 0:$.similars)}),Pe=()=>{var re;const $=((re=document.querySelector(".related-movies"))==null?void 0:re.clientWidth)||0,le=Math.floor($/160)||10;S.value=Math.max(1,le)},Ae=()=>{Pe()},_e=$=>{if($.altKey&&$.keyCode===84&&document.querySelector(".player-container")){const le=document.querySelector(".theater-mode-btn");le&&le.click()}},Re=async()=>{var $;if(!n.token){ee.value.showNotification('–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:()=>u.openLogin()});return}if(($=s.value)!=null&&$.imdb_id){if(T.value){T.value=null;return}C.value=!0;try{const v=await xn(s.value.imdb_id);T.value=v.nudity_info}catch(v){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö:",v),ee.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö")}finally{C.value=!1}}};Ge(async()=>{await ie(),t.value=!1,document.addEventListener("keydown",_e),window.addEventListener("resize",Ae),setTimeout(Pe,100)}),Sn(async()=>{u.clearHeaderContent(),document.removeEventListener("keydown",_e),window.removeEventListener("resize",Ae)}),ze(()=>E.params.kp_id,async $=>{$&&$!==d.value&&(u.clearHeaderContent(),d.value=$,U.value=null,await ie(),t.value=!1)},{immediate:!0}),ze(s,()=>{R()},{deep:!0});const se=$=>{var v,le;return((le=(v=s.value)==null?void 0:v.staff)==null?void 0:le.filter(re=>re.profession_key===$))||[]};return($,v)=>{var le,re;return i(),r(ge,null,[e("div",oi,[e("div",si,[(t.value||!s.value)&&!M.value?(i(),r("div",li,[e("div",ii,[v[4]||(v[4]=ot('<div class="movie-skeleton__header" data-v-8c9baba0><div class="movie-skeleton__title" data-v-8c9baba0></div></div><div class="movie-skeleton__ratings" data-v-8c9baba0><div class="movie-skeleton__rating-item" data-v-8c9baba0></div><div class="movie-skeleton__rating-item" data-v-8c9baba0></div><div class="movie-skeleton__rating-item" data-v-8c9baba0></div></div>',2)),e("div",ai,[we(hn)]),v[5]||(v[5]=ot('<div class="movie-skeleton__additional-info" data-v-8c9baba0><div class="movie-skeleton__section-title" data-v-8c9baba0></div><div class="movie-skeleton__info-list" data-v-8c9baba0><div class="movie-skeleton__info-item" data-v-8c9baba0></div><div class="movie-skeleton__info-item" data-v-8c9baba0></div><div class="movie-skeleton__info-item" data-v-8c9baba0></div><div class="movie-skeleton__info-item" data-v-8c9baba0></div><div class="movie-skeleton__info-item" data-v-8c9baba0></div></div></div><div class="movie-skeleton__description" data-v-8c9baba0><div class="movie-skeleton__description-line" data-v-8c9baba0></div><div class="movie-skeleton__description-line" data-v-8c9baba0></div><div class="movie-skeleton__description-line" data-v-8c9baba0></div><div class="movie-skeleton__description-line" data-v-8c9baba0></div></div>',2))])])):p("",!0),M.value?(i(),He(kn,{key:1,message:M.value,code:w.value},null,8,["message","code"])):p("",!0),M.value?(i(),r("div",ri,[(i(),He(gn,{key:d.value,"kp-id":d.value,"movie-info":s.value,"onUpdate:movieInfo":ie},null,8,["kp-id","movie-info"]))])):p("",!0),s.value&&!t.value?(i(),r("div",ui,[e("div",ci,[s.value.logo_url?(i(),r("div",{key:0,class:"content-logo",onMousemove:D,onMouseleave:v[0]||(v[0]=K=>L.value=!1),onClick:he},[e("img",{src:s.value.logo_url,alt:"–õ–æ–≥–æ—Ç–∏–ø —Ñ–∏–ª—å–º–∞",class:"content-logo"},null,8,di)],32)):(i(),r("div",{key:1,onMousemove:D,onMouseleave:v[1]||(v[1]=K=>L.value=!1),onClick:he},[e("h1",vi,g(s.value.title),1)],32)),X(e("div",{class:"title-copy-tooltip",style:lt(b.value)}," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ",4),[[oe,L.value]])]),s.value.kinopoisk_id||s.value.title||s.value.imdb_id||s.value.rating_imdb||s.value.shikimori_id?(i(),r("div",mi,[s.value.kinopoisk_id?(i(),He(Is,{key:0,"kp-id":s.value.kinopoisk_id,"show-dash":!0},null,8,["kp-id"])):p("",!0),s.value.kinopoisk_id?(i(),r("div",fi,[e("a",{href:"https://www.kinopoisk.ru/film/".concat(s.value.kinopoisk_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:s.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(O(s.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[v[6]||(v[6]=e("img",{src:vn,alt:"–ö–ü",class:"rating-logo"},null,-1)),e("span",null,g(s.value.rating_kinopoisk?s.value.rating_kinopoisk:"‚Äî"),1),v[7]||(v[7]=e("img",{src:Qe,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,gi)])):p("",!0),!s.value.kinopoisk_id&&s.value.title?(i(),r("div",yi,[e("a",{href:"https://www.kinopoisk.ru/index.php?kp_query=".concat(encodeURIComponent(s.value.title+(s.value.year?" "+s.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:s.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(O(s.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[v[8]||(v[8]=e("img",{src:vn,alt:"–ö–ü",class:"rating-logo"},null,-1)),e("span",null,g(s.value.rating_kinopoisk?s.value.rating_kinopoisk:"‚Äî"),1),v[9]||(v[9]=e("img",{src:Qe,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,ki)])):p("",!0),s.value.imdb_id?(i(),r("div",pi,[e("a",{href:"https://www.imdb.com/title/".concat(s.value.imdb_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:s.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(O(s.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[v[10]||(v[10]=e("img",{src:mn,alt:"IMDb",class:"rating-logo"},null,-1)),e("span",null,g(s.value.rating_imdb?s.value.rating_imdb:"‚Äî"),1),v[11]||(v[11]=e("img",{src:Qe,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,hi)])):p("",!0),!s.value.imdb_id&&s.value.title?(i(),r("div",bi,[e("a",{href:"https://www.imdb.com/find/?q=".concat(encodeURIComponent(s.value.title+(s.value.year?" "+s.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:s.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(O(s.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[v[12]||(v[12]=e("img",{src:mn,alt:"IMDb",class:"rating-logo"},null,-1)),e("span",null,g(s.value.rating_imdb?s.value.rating_imdb:"‚Äî"),1),v[13]||(v[13]=e("img",{src:Qe,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Ci)])):p("",!0),s.value.shikimori_id?(i(),r("div",wi,[e("a",{href:"https://shikimori.one/animes/".concat(s.value.shikimori_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},v[14]||(v[14]=[e("img",{src:Nn,alt:"Shiki",class:"rating-logo"},null,-1),e("img",{src:Qe,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,_i)])):p("",!0),s.value.imdb_id?(i(),r("div",Ei,[e("a",{href:"https://www.imdb.com/title/".concat(s.value.imdb_id,"/parentalguide"),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},v[15]||(v[15]=[e("span",null,"Parents Guide",-1),e("img",{src:Qe,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,Mi),e("button",{class:"rating-link nudity-info-btn",onClick:Re,title:T.value?"–°–∫—Ä—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é":"–ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ü–µ–Ω–∞—Ö(Sex & Nudity)"},[C.value?(i(),r("i",Ri)):(i(),r("i",Li)),T.value?(i(),r("div",Ti,[e("div",$i,g(T.value),1)])):p("",!0)],8,Ii)])):p("",!0)])):p("",!0),(i(),He(gn,{key:d.value,"kp-id":d.value,"movie-info":s.value,"onUpdate:movieInfo":ie},null,8,["kp-id","movie-info"])),e("meta",{name:"title-and-year",content:s.value.type==="FILM"&&s.value.year?"".concat(s.value.title," (").concat(s.value.year,")"):s.value.title},null,8,Ai),s.value.name_original?(i(),r("meta",{key:1,name:"original-title",content:s.value.name_original},null,8,Si)):p("",!0),e("div",Pi,[v[25]||(v[25]=e("h2",{class:"additional-info-title"},"–ü–æ–¥—Ä–æ–±–Ω–µ–µ",-1)),e("div",Ui,[e("div",xi,[e("ul",Hi,[s.value.type&&ce(dn)[s.value.type]?(i(),r("li",ji,[v[16]||(v[16]=e("strong",null,"–¢–∏–ø:",-1)),de(" "+g(ce(dn)[s.value.type]),1)])):p("",!0),s.value.year?(i(),r("li",Bi,[v[17]||(v[17]=e("strong",null,"–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞:",-1)),de(" "+g(s.value.year),1)])):p("",!0),s.value.title?(i(),r("li",Di,[v[18]||(v[18]=e("strong",null,"–ù–∞–∑–≤–∞–Ω–∏–µ:",-1)),de(" "+g(s.value.title),1)])):p("",!0),s.value.name_original?(i(),r("li",Ni,[v[19]||(v[19]=e("strong",null,"–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:",-1)),de(" "+g(s.value.name_original),1)])):p("",!0),s.value.slogan?(i(),r("li",Oi,[v[20]||(v[20]=e("strong",null,"–°–ª–æ–≥–∞–Ω:",-1)),de(" "+g(s.value.slogan),1)])):p("",!0),s.value.production_companies?(i(),r("li",Vi,[v[21]||(v[21]=e("strong",null,"–ü—Ä–æ–¥–∞–∫—à–Ω:",-1)),de(" "+g(s.value.production_companies),1)])):p("",!0),(le=s.value.countries)!=null&&le.length?(i(),r("li",qi,[v[22]||(v[22]=e("strong",null,"–°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞:",-1)),de(" "+g(s.value.countries.map(K=>K.country).join(", ")),1)])):p("",!0),(re=s.value.genres)!=null&&re.length?(i(),r("li",Ki,[v[23]||(v[23]=e("strong",null,"–ñ–∞–Ω—Ä—ã:",-1)),de(" "+g(s.value.genres.map(K=>K.genre).join(", ")),1)])):p("",!0),s.value.film_length?(i(),r("li",Wi,[v[24]||(v[24]=e("strong",null,"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:",-1)),de(" "+g(G(s.value.film_length)),1)])):p("",!0)])])])]),e("div",Fi,[s.value.description?(i(),r("p",zi,g(s.value.description),1)):p("",!0)]),P.value?(i(),r("div",Yi,[(i(),He(ni,{"movie-id":d.value,key:d.value},null,8,["movie-id"]))])):p("",!0),s.value.staff?(i(),r("div",Gi,[e("div",Zi,[se("ACTOR").length?(i(),r("div",Qi,[v[26]||(v[26]=e("h3",{class:"additional-info-title"},"–ê–∫—Ç—ë—Ä—ã",-1)),e("div",Xi,[(i(!0),r(ge,null,Le(se("ACTOR").slice(0,12),K=>(i(),r("div",{key:K.staff_id,class:"staff-item"},[e("a",{href:"https://www.kinopoisk.ru/name/".concat(K.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-link",title:K.description||""},[e("img",{src:K.poster_url,alt:K.name_ru,class:"staff-photo"},null,8,ea),e("span",ta,g(K.name_ru||K.name_en),1),K.description?(i(),r("span",na,g(K.description),1)):p("",!0)],8,Ji)]))),128)),e("a",{class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(d.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(se("ACTOR").length," –∞–∫—Ç–µ—Ä–æ–≤")}," +"+g(se("ACTOR").length-12),9,oa)])])):p("",!0),se("DIRECTOR").length?(i(),r("div",sa,[v[27]||(v[27]=e("h3",{class:"additional-info-title"},"–†–µ–∂–∏—Å—Å—ë—Ä—ã",-1)),e("div",la,[e("div",ia,[(i(!0),r(ge,null,Le(se("DIRECTOR").slice(0,5),K=>(i(),r("a",{key:K.staff_id,href:"https://www.kinopoisk.ru/name/".concat(K.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},g(K.name_ru||K.name_en),9,aa))),128)),se("DIRECTOR").length>5?(i(),r("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(d.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(se("DIRECTOR").length," —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–≤")}," +"+g(se("DIRECTOR").length-5),9,ra)):p("",!0)])])])):p("",!0),se("PRODUCER").length?(i(),r("div",ua,[v[28]||(v[28]=e("h3",{class:"additional-info-title"},"–ü—Ä–æ–¥—é—Å–µ—Ä—ã",-1)),e("div",ca,[e("div",da,[(i(!0),r(ge,null,Le(se("PRODUCER").slice(0,5),K=>(i(),r("a",{key:K.staff_id,href:"https://www.kinopoisk.ru/name/".concat(K.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},g(K.name_ru||K.name_en),9,va))),128)),se("PRODUCER").length>5?(i(),r("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(d.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(se("PRODUCER").length," –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤")}," +"+g(se("PRODUCER").length-5),9,ma)):p("",!0)])])])):p("",!0)])])):p("",!0),ae.value.length&&ce(j)?(i(),r("div",fa,[we(gs,{videos:ae.value,"active-video-index":U.value,onSelect:$.playTrailer},null,8,["videos","active-video-index","onSelect"])])):p("",!0),N.value.length?(i(),r("div",ga,[v[29]||(v[29]=e("h2",null,"–°–∏–∫–≤–µ–ª—ã –∏ –ø—Ä–∏–∫–≤–µ–ª—ã",-1)),we(ce(fn),{"movies-list":F.value?N.value:N.value.slice(0,S.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),N.value.length>S.value?(i(),r("a",{key:0,class:"expand-circle-button",onClick:v[2]||(v[2]=K=>F.value=!F.value),title:"".concat(F.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(N.value.length,")")},g(F.value?"‚àí":"+".concat(N.value.length-S.value)),9,ya)):p("",!0)])):p("",!0),Ie.value.length?(i(),r("div",ka,[v[30]||(v[30]=e("h2",null,"–ü–æ—Ö–æ–∂–∏–µ",-1)),we(ce(fn),{"movies-list":J.value?Ie.value:Ie.value.slice(0,S.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),Ie.value.length>S.value?(i(),r("a",{key:0,class:"expand-circle-button",onClick:v[3]||(v[3]=K=>J.value=!J.value),title:"".concat(J.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(Ie.value.length,")")},g(J.value?"‚àí":"+".concat(Ie.value.length-S.value)),9,pa)):p("",!0)])):p("",!0)])):p("",!0)])]),we(rt,{ref_key:"notificationRef",ref:ee},null,512)],64)}}},Ma=Be(ha,[["__scopeId","data-v-8c9baba0"]]);export{Ma as default};
