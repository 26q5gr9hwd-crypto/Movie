import{_ as Oe,u as Ft,c as j,r as f,o as ut,x as Ee,S as bn,b as a,g as v,d as i,e,p as te,V as Tt,O as W,P as ee,t as m,n as x,W as Gn,v as Yn,y as Ie,l as dt,X as Le,B as Ht,Y as Zn,i as ae,f as Y,w as At,Z as Ot,m as U,$ as pt,k as Ge,q as pn,a0 as Qn,a1 as Xn,a2 as Jn,a3 as $n,a4 as cn,a5 as es,N as ts,a6 as ns,a as Ut,E as ss,A as D,a7 as It,U as X,a8 as mn,a9 as vn,aa as os,ab as ls,ac as is,ad as fn,G as Ce,ae as as,af as rs,ag as us,ah as ds,ai as cs,aj as ms,ak as vs,al as fs,am as gs,an as ks,ao as ys}from"./index-DjJqG2dw.js";import{a as gn,b as kn}from"./icon-imdb-logo-5qtstUwS.js";import{P as yn,M as hs,_ as bt,a as bs}from"./MovieRating-BKHoIAOj.js";import{f as ps,a as _n,p as St,b as Ae}from"./dateUtils-BWepax9P.js";import{M as hn}from"./MovieList-DetmsAIv.js";import{S as _s}from"./SpinnerLoading-CJ2cV0AH.js";import{u as ws}from"./player-BUxEf-EN.js";import{N as wn}from"./ToastMessage-CarhzhQI.js";import{u as Cs}from"./trailer-BzVtE2_J.js";import{u as Cn}from"./useCommentFormatting-DzZ5uMrB.js";import{B as Es}from"./BaseModal-CyyWbTV4.js";const Ls={key:0,class:"carousel-container"},Ms={class:"carousel-wrapper"},Is=["onClick"],Ss=["src","alt"],Ts={class:"video-name"},xs={key:0,class:"video-player"},Rs=["src"],Ps={__name:"TrailerCarousel",props:{videos:{type:Array,required:!0},activeVideoIndex:{type:Number,default:null}},emits:["select"],setup(r,{emit:t}){const d=Ft(),s=j(()=>d.isMobile),w=r,h=t,c=f(w.activeVideoIndex),b=f(null),_=f(!1),C=f(!1),k=()=>{if(!b.value)return;const{scrollLeft:I,scrollWidth:L,clientWidth:P}=b.value;_.value=I>0,C.value=I<L-P-1},o=I=>{if(!b.value)return;const L=b.value.querySelector(".carousel-item");if(!L)return;const P=L.clientWidth+16;b.value.scrollBy({left:P*I,behavior:"smooth"})},p=I=>{c.value=I,h("select",w.videos[I])},B=()=>k(),g=f([]),S=async I=>{try{return(await fetch("https://img.youtube.com/vi/".concat(I,"/0.jpg"))).ok}catch(L){return!1}};return ut(async()=>{const I=w.videos.map(async P=>await S(P.videoId)?P:null),L=await Promise.all(I);g.value=L.filter(Boolean),k(),window.addEventListener("resize",B)}),Ee(()=>w.videos,async I=>{const L=I.map(async F=>await S(F.videoId)?F:null),P=await Promise.all(L);g.value=P.filter(Boolean)}),Ee(()=>w.activeVideoIndex,I=>{c.value=I}),bn(()=>{window.removeEventListener("resize",B)}),(I,L)=>g.value.length?(i(),a("div",Ls,[L[4]||(L[4]=e("h2",null,"–¢—Ä–µ–π–ª–µ—Ä—ã (YouTube)",-1)),e("div",Ms,[te(e("button",{class:"scroll-button left",onClick:L[0]||(L[0]=P=>o(-1))},L[2]||(L[2]=[e("span",{class:"material-symbols-outlined"},"arrow_back_ios",-1)]),512),[[Tt,!s.value&&_.value]]),e("div",{ref_key:"carousel",ref:b,class:"carousel",onScroll:k},[(i(!0),a(W,null,ee(g.value,(P,F)=>(i(),a("div",{key:F,class:"carousel-item",onClick:O=>p(F)},[e("img",{src:"https://img.youtube.com/vi/".concat(P.videoId,"/0.jpg"),alt:P.name},null,8,Ss),e("div",Ts,m(P.name),1)],8,Is))),128))],544),te(e("button",{class:"scroll-button right",onClick:L[1]||(L[1]=P=>o(1))},L[3]||(L[3]=[e("span",{class:"material-symbols-outlined"},"arrow_forward_ios",-1)]),512),[[Tt,!s.value&&C.value]])]),c.value!==null?(i(),a("div",xs,[e("iframe",{src:r.videos[c.value].iframeUrl,frameborder:"0",allowfullscreen:""},null,8,Rs)])):v("",!0)])):v("",!0)}},js=Oe(Ps,[["__scopeId","data-v-4a5806b3"]]),Bs={name:"EmojiPicker",props:{isVisible:{type:Boolean,default:!1}},emits:["emoji-selected","mouse-enter","mouse-leave","close"],data(){return{activeCategory:"smileys",categories:[{name:"smileys",icon:"üòÄ",emojis:["üòÄ","üòÉ","üòÑ","üòÅ","üòÜ","üòÖ","üòÇ","ü§£","üòä","üòá","üôÇ","üôÉ","üòâ","üòå","üòç","ü•∞","üòò","üòó","üòô","üòö","üòã","üòõ","üòù","üòú","ü§™","ü§®","üßê","ü§ì","üòé","ü§©","ü•≥"]},{name:"emotions",icon:"üò¢",emojis:["üò•","üò¢","üò≠","üò§","üò†","üò°","ü§¨","ü§Ø","üò≥","ü•µ","ü•∂","üò±","üò®","üò∞","üò•","üòì","ü§ó","ü§î","ü§≠","ü§´","ü§•","üò∂","üòê","üòë","üò¨","üôÑ","üòØ","üò¶","üòß","üòÆ","üò≤"]},{name:"gestures",icon:"üëç",emojis:["üëç","üëé","üëå","ü§å","ü§è","‚úåÔ∏è","ü§û","ü§ü","ü§ò","ü§ô","üëà","üëâ","üëÜ","üñï","üëá","‚òùÔ∏è","üëè","üôå","üëê","ü§≤","ü§ù","üôè","‚úçÔ∏è","üí™","ü¶æ","ü¶ø","ü¶µ","ü¶∂","üëÇ","ü¶ª","üëÉ"]},{name:"hearts",icon:"‚ù§Ô∏è",emojis:["‚ù§Ô∏è","üß°","üíõ","üíö","üíô","üíú","ü§é","üñ§","ü§ç","üíî","‚ù£Ô∏è","üíï","üíû","üíì","üíó","üíñ","üíò","üíù","üíü","‚ô•Ô∏è","üíØ","üí¢","üí•","üí´","üí¶","üí®","üï≥Ô∏è","üí£","üí¨","üëÅÔ∏è‚Äçüó®Ô∏è","üó®Ô∏è"]},{name:"objects",icon:"üéâ",emojis:["üéâ","üéä","üéà","üéÅ","üéÄ","üéÇ","üç∞","üßÅ","üç≠","üç¨","üç´","üç©","üç™","üçï","üçî","üçü","üå≠","ü•™","üåÆ","üåØ","ü•ô","ü•ö","üç≥","ü•ò","üç≤","ü•ó","üçø","üßà","üßÄ","ü•®","ü•Ø"]}]}},computed:{currentEmojis(){const r=this.categories.find(t=>t.name===this.activeCategory);return r?r.emojis:[]}},methods:{selectEmoji(r){this.$emit("emoji-selected",r)}}},Ns={class:"emoji-categories"},Us=["onClick"],As={class:"emoji-grid"},Os=["onClick"];function Fs(r,t,d,s,w,h){return d.isVisible?(i(),a("div",{key:0,class:"emoji-picker",onMouseenter:t[1]||(t[1]=c=>r.$emit("mouse-enter")),onMouseleave:t[2]||(t[2]=c=>r.$emit("mouse-leave"))},[e("button",{class:"close-btn mobile-only",onClick:t[0]||(t[0]=c=>r.$emit("close"))},t[3]||(t[3]=[e("i",{class:"fas fa-times"},null,-1)])),e("div",Ns,[(i(!0),a(W,null,ee(w.categories,c=>(i(),a("button",{key:c.name,onClick:b=>w.activeCategory=c.name,class:x([{active:w.activeCategory===c.name},"category-btn"]),type:"button"},m(c.icon),11,Us))),128))]),e("div",As,[(i(!0),a(W,null,ee(h.currentEmojis,c=>(i(),a("button",{key:c,onClick:b=>h.selectEmoji(c),class:"emoji-btn",type:"button"},m(c),9,Os))),128))])],32)):v("",!0)}const Vt=Oe(Bs,[["render",Fs],["__scopeId","data-v-209132f3"]]),Hs=async r=>{const t=await Gn();return await r(t)},Vs=async r=>{const{data:t}=await Hs(d=>d.get("/search_emotes/".concat(r)));return t.emotes||[]},Ds={name:"ImagePicker",props:{isVisible:{type:Boolean,required:!0},currentUser:{type:Object,default:null}},emits:["image-selected","mouse-enter","mouse-leave","close","login-required"],setup(r,{emit:t}){const d=f(""),s=f([]),w=f(null),h=f(!1),b=Yn(async o=>{if(!r.currentUser){console.warn("–ü–æ–ø—ã—Ç–∫–∞ –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏");return}if(!o.trim()){s.value=[],h.value=!1;return}h.value=!0;try{s.value=await Vs(o)}catch(p){console.error("Error searching images:",p),s.value=[]}finally{h.value=!1}},300),_=()=>{if(!r.currentUser){t("login-required");return}d.value.trim()&&(h.value=!0),b(d.value)},C=o=>{if(!r.currentUser){t("login-required");return}t("image-selected",o),t("close")},k=()=>{setTimeout(()=>{r.isVisible&&t("mouse-leave")},100)};return Ee(()=>r.isVisible,o=>{o&&(d.value="",s.value=[],h.value=!1)}),{searchQuery:d,images:s,searchInput:w,isLoading:h,handleSearch:_,selectImage:C,handleInputBlur:k}}},qs={key:0,class:"auth-required"},zs={class:"auth-message"},Ws={key:1},Ks={class:"image-picker-header"},Gs={class:"image-content"},Ys={key:0,class:"loading-spinner"},Zs={key:1,class:"image-grid"},Qs=["onClick"],Xs=["src","alt"],Js={key:2,class:"no-images"},$s={key:3,class:"no-search"};function eo(r,t,d,s,w,h){return d.isVisible?(i(),a("div",{key:0,class:"image-picker",onMouseenter:t[7]||(t[7]=c=>r.$emit("mouse-enter")),onMouseleave:t[8]||(t[8]=c=>r.$emit("mouse-leave")),onClick:t[9]||(t[9]=dt(()=>{},["stop"]))},[e("button",{class:"close-btn mobile-only",onClick:t[0]||(t[0]=c=>r.$emit("close"))},t[10]||(t[10]=[e("i",{class:"fas fa-times"},null,-1)])),d.currentUser?(i(),a("div",Ws,[e("div",Ks,[te(e("input",{ref:"searchInput",type:"text","onUpdate:modelValue":t[2]||(t[2]=c=>s.searchQuery=c),placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–º–∞–π–ª–∞ 7tv",class:"image-search-input",onInput:t[3]||(t[3]=(...c)=>s.handleSearch&&s.handleSearch(...c)),onClick:t[4]||(t[4]=dt(()=>{},["stop"])),onFocus:t[5]||(t[5]=c=>r.$emit("mouse-enter")),onBlur:t[6]||(t[6]=(...c)=>s.handleInputBlur&&s.handleInputBlur(...c))},null,544),[[Ie,s.searchQuery]])]),e("div",Gs,[s.isLoading?(i(),a("div",Ys,t[14]||(t[14]=[e("div",{class:"spinner"},null,-1),e("p",null,"–ü–æ–∏—Å–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...",-1)]))):s.images.length>0?(i(),a("div",Zs,[(i(!0),a(W,null,ee(s.images,(c,b)=>(i(),a("div",{key:b,class:"image-item",onClick:_=>s.selectImage(c)},[e("img",{src:c,alt:"Image "+(b+1)},null,8,Xs)],8,Qs))),128))])):s.searchQuery.trim()?(i(),a("div",Js,t[15]||(t[15]=[e("p",null,"–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤",-1)]))):(i(),a("div",$s,t[16]||(t[16]=[e("p",null,"–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞",-1)])))])])):(i(),a("div",qs,[e("div",zs,[t[11]||(t[11]=e("i",{class:"fas fa-lock"},null,-1)),t[12]||(t[12]=e("h3",null,"–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è",-1)),t[13]||(t[13]=e("p",null,"–î–ª—è –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç",-1)),e("button",{class:"login-button",onClick:t[1]||(t[1]=c=>r.$emit("login-required"))},"–í–æ–π—Ç–∏")])]))],32)):v("",!0)}const Dt=Oe(Ds,[["render",eo],["__scopeId","data-v-f33eb3f6"]]),to={name:"LinkModal",props:{isVisible:{type:Boolean,default:!1},selectedText:{type:String,default:""}},emits:["close","submit"],setup(r,{emit:t}){const d=f(""),s=f(""),w=f(null),h=f(null),c=j(()=>/^https?:\/\/.+/.test(d.value.trim())&&s.value.trim()),b=()=>{t("close"),C()},_=()=>{c.value&&(t("submit",{url:d.value.trim(),title:s.value.trim()}),b())},C=()=>{d.value="",s.value=""},k=o=>{var p;o.key==="Enter"?(o.preventDefault(),c.value?_():o.target===w.value&&d.value.trim()&&((p=h.value)==null||p.focus())):o.key==="Escape"&&b()};return Ee(()=>r.isVisible,o=>{o&&(r.selectedText.trim()&&(s.value=r.selectedText.trim()),Le(()=>{var p;(p=w.value)==null||p.focus()}))}),{linkUrl:d,linkTitle:s,urlInput:w,titleInput:h,isValidLink:c,closeModal:b,submitLink:_,handleKeydown:k}}},no={class:"link-modal-header"},so={class:"link-modal-content"},oo={class:"form-group"},lo={class:"form-group"},io={class:"link-modal-footer"},ao=["disabled"];function ro(r,t,d,s,w,h){return d.isVisible?(i(),a("div",{key:0,class:"link-modal-overlay",onClick:t[8]||(t[8]=(...c)=>s.closeModal&&s.closeModal(...c))},[e("div",{class:"link-modal",onClick:t[7]||(t[7]=dt(()=>{},["stop"]))},[e("div",no,[t[10]||(t[10]=e("h3",null,"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É",-1)),e("button",{class:"close-button",onClick:t[0]||(t[0]=(...c)=>s.closeModal&&s.closeModal(...c))},t[9]||(t[9]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",so,[e("div",oo,[t[11]||(t[11]=e("label",{for:"link-url"},"URL —Å—Å—ã–ª–∫–∏:",-1)),te(e("input",{id:"link-url",ref:"urlInput","onUpdate:modelValue":t[1]||(t[1]=c=>s.linkUrl=c),type:"url",placeholder:"https://example.com",class:"link-input",onKeydown:t[2]||(t[2]=(...c)=>s.handleKeydown&&s.handleKeydown(...c))},null,544),[[Ie,s.linkUrl]])]),e("div",lo,[t[12]||(t[12]=e("label",{for:"link-title"},"–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏:",-1)),te(e("input",{id:"link-title",ref:"titleInput","onUpdate:modelValue":t[3]||(t[3]=c=>s.linkTitle=c),type:"text",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è",class:"link-input",onKeydown:t[4]||(t[4]=(...c)=>s.handleKeydown&&s.handleKeydown(...c))},null,544),[[Ie,s.linkTitle]])])]),e("div",io,[e("button",{class:"cancel-button",onClick:t[5]||(t[5]=(...c)=>s.closeModal&&s.closeModal(...c))},"–û—Ç–º–µ–Ω–∞"),e("button",{class:"submit-button",disabled:!s.isValidLink,onClick:t[6]||(t[6]=(...c)=>s.submitLink&&s.submitLink(...c))},"–î–æ–±–∞–≤–∏—Ç—å",8,ao)])])])):v("",!0)}const qt=Oe(to,[["render",ro],["__scopeId","data-v-a794d83f"]]);function uo(){const r=f(!1),t=f(!1),d=f(!1),s=()=>{t.value=!0},w=()=>{t.value=!1,setTimeout(()=>{!t.value&&!d.value&&(r.value=!1)},300)},h=()=>{d.value=!0,r.value=!0},c=()=>{d.value=!1,setTimeout(()=>{!t.value&&!d.value&&(r.value=!1)},300)},b=()=>{r.value=!1};return{showEmojiPicker:r,isEmojiHovered:t,isButtonHovered:d,handleEmojiMouseEnter:s,handleEmojiMouseLeave:w,handleButtonMouseEnter:h,handleButtonMouseLeave:c,closeEmojiPicker:b,insertEmoji:(k,o,p,B)=>{const g=o.value;if(g){const S=g.selectionStart,I=g.selectionEnd,L=p.value.substring(0,S),P=p.value.substring(I),F=L+k+P;B(F),Le(()=>{g.focus(),g.setSelectionRange(S+k.length,S+k.length),g.style.height&&(g.style.height="auto",g.style.height="".concat(Math.min(g.scrollHeight,200),"px"))})}else B(p.value+k)},handleGlobalClick:k=>{!k.target.closest(".emoji-picker")&&!k.target.closest(".emoji-button-inline")&&b()}}}function co(){const r=f(!1),t=f(!1),d=f(!1),s=()=>{t.value=!0},w=()=>{t.value=!1,setTimeout(()=>{!t.value&&!d.value&&(r.value=!1)},300)},h=()=>{d.value=!0,r.value=!0},c=()=>{d.value=!1,setTimeout(()=>{!t.value&&!d.value&&(r.value=!1)},300)},b=()=>{r.value=!1};return{showImagePicker:r,isImageHovered:t,isButtonHovered:d,handleImageMouseEnter:s,handleImageMouseLeave:w,handleImageButtonMouseEnter:h,handleButtonMouseLeave:c,closeImagePicker:b,insertImage:(k,o,p,B)=>{const g=o.value;if(g){const S=g.selectionStart,I=g.selectionEnd,L="[img]".concat(k,"[/img]"),P=p.value.slice(0,S)+L+p.value.slice(I);B(P),Le(()=>{g.focus(),g.setSelectionRange(S+L.length,S+L.length),g.style.height&&(g.style.height="auto",g.style.height="".concat(Math.min(g.scrollHeight,200),"px"))})}else{const S="[img]".concat(k,"[/img]");B(p.value+S)}},handleGlobalClick:k=>{!k.target.closest(".image-picker")&&!k.target.closest(".emoji-button-inline")&&b()}}}function mo(){const r=f(!1),t=f("");return{showLinkModal:r,selectedTextForLink:t,insertLink:(c,b)=>{const _=c.value;if(_){const C=_.selectionStart,k=_.selectionEnd,o=b.value.slice(C,k);t.value=o.trim()||""}r.value=!0},insertLinkFromModal:(c,b,_,C)=>{const k=b.value;if(k){const o=k.selectionStart,p=k.selectionEnd,B="[link=".concat(c.url,"]").concat(c.title,"[/link]"),g=_.value.slice(0,o)+B+_.value.slice(p);C(g),Le(()=>{k.focus(),k.setSelectionRange(o+B.length,o+B.length),k.style.height&&(k.style.height="auto",k.style.height="".concat(Math.min(k.scrollHeight,200),"px"))})}},closeLinkModal:()=>{r.value=!1},insertSpoiler:(c,b,_)=>{const C=c.value;if(C){const k=C.selectionStart,o=C.selectionEnd,p=b.value.slice(k,o);let B;p.trim()?B="[spoiler]".concat(p,"[/spoiler]"):B="[spoiler][/spoiler]";const g=b.value.slice(0,k)+B+b.value.slice(o);_(g),Le(()=>{if(C.focus(),p.trim())C.setSelectionRange(k+B.length,k+B.length);else{const S=k+9;C.setSelectionRange(S,S)}C.style.height&&(C.style.height="auto",C.style.height="".concat(Math.min(C.scrollHeight,200),"px"))})}}}}function vo(){return{autoResize:d=>{const s=d==null?void 0:d.target;s&&(s.style.height="auto",s.style.height="".concat(Math.min(s.scrollHeight,200),"px"))},autoResizeElement:d=>{d&&(d.style.height="auto",d.style.height="".concat(Math.min(d.scrollHeight,200),"px"))}}}function zt(){const r=uo(),t=co(),d=mo(),{autoResize:s,autoResizeElement:w}=vo(),h=()=>{r.isButtonHovered.value=!0,t.isButtonHovered.value=!0,r.showEmojiPicker.value=!0,t.showImagePicker.value=!1},c=()=>{r.isButtonHovered.value=!0,t.isButtonHovered.value=!0,t.showImagePicker.value=!0,r.showEmojiPicker.value=!1},b=()=>{r.isButtonHovered.value=!1,t.isButtonHovered.value=!1,setTimeout(()=>{!r.isEmojiHovered.value&&!t.isImageHovered.value&&!r.isButtonHovered.value&&!t.isButtonHovered.value&&(r.showEmojiPicker.value=!1,t.showImagePicker.value=!1)},300)},_=()=>{r.showEmojiPicker.value=!1,t.showImagePicker.value=!1},C=S=>{!S.target.closest(".emoji-picker")&&!S.target.closest(".image-picker")&&!S.target.closest(".emoji-button-inline")&&_()},k=(S,I,L,P)=>{r.insertEmoji(S,I,L,P)},o=(S,I,L,P)=>{t.insertImage(S,I,L,P)},p=(S,I,L)=>{d.insertLink(S,I,L)},B=(S,I,L,P)=>{d.insertLinkFromModal(S,I,L,P)},g=(S,I,L)=>{d.insertSpoiler(S,I,L)};return ut(()=>{document.addEventListener("click",C)}),bn(()=>{document.removeEventListener("click",C)}),{showEmojiPicker:r.showEmojiPicker,handleEmojiMouseEnter:r.handleEmojiMouseEnter,handleEmojiMouseLeave:r.handleEmojiMouseLeave,closeEmojiPicker:r.closeEmojiPicker,showImagePicker:t.showImagePicker,handleImageMouseEnter:t.handleImageMouseEnter,handleImageMouseLeave:t.handleImageMouseLeave,closeImagePicker:t.closeImagePicker,showLinkModal:d.showLinkModal,selectedTextForLink:d.selectedTextForLink,closeLinkModal:d.closeLinkModal,handleButtonMouseEnter:h,handleImageButtonMouseEnter:c,handleButtonMouseLeave:b,closeAllPickers:_,insertEmojiUniversal:k,insertImageUniversal:o,insertLinkUniversal:p,insertLinkFromModalUniversal:B,insertSpoilerUniversal:g,autoResize:s,autoResizeElement:w}}const fo=r=>r===1?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π":r>=2&&r<=4?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è":"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤",go=r=>{if(!r)return"?";const t=r.split(" ");return t.length===1?r.slice(0,2).toUpperCase():(t[0][0]+t[t.length-1][0]).toUpperCase()},ko={name:"CommentItem",components:{EmojiPicker:Vt,ImagePicker:Dt,LinkModal:qt},props:{comment:{type:Object,required:!0,default:()=>({username:"–ê–Ω–æ–Ω–∏–º",user_avatar:null,content:"",created_at:new Date().toISOString(),rating:0,replies:[]})},currentUser:{type:Object,required:!0,default:()=>({})},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate"],setup(r,{emit:t}){var nt,De;const d=Ht(),s=j(()=>{var y;return r.editingCommentId===((y=r.comment)==null?void 0:y.id)}),w=f(((nt=r.comment)==null?void 0:nt.content)||""),h=f(((De=r.comment)==null?void 0:De.user_rating)||0),c=f(null),b=f(null),{showEmojiPicker:_,showImagePicker:C,showLinkModal:k,selectedTextForLink:o,handleEmojiMouseEnter:p,handleEmojiMouseLeave:B,handleImageMouseEnter:g,handleImageMouseLeave:S,handleButtonMouseEnter:I,handleImageButtonMouseEnter:L,handleButtonMouseLeave:P,closeEmojiPicker:F,closeImagePicker:O,closeLinkModal:re,insertEmojiUniversal:de,insertImageUniversal:le,insertLinkUniversal:N,insertLinkFromModalUniversal:me,insertSpoilerUniversal:K,autoResize:z}=zt(),{formatContentWithTruncation:ve}=Cn();ut(async()=>{var y;if((y=r.comment)!=null&&y.user_avatar){const A=await Zn();c.value="".concat(A).concat(r.comment.user_avatar)}});const T=j(()=>{var y;return r.currentUser&&((y=r.comment)==null?void 0:y.user_id)===r.currentUser.id}),fe=j(()=>{var y;return r.currentUser&&((y=r.comment)==null?void 0:y.user_id)===r.currentUser.id||r.currentUser&&r.currentUser.is_admin===1}),V=j(()=>{var y,A,Se;return((y=r.comment)==null?void 0:y.updated_at)&&((A=r.comment)==null?void 0:A.updated_at)!==((Se=r.comment)==null?void 0:Se.created_at)}),ne=j(()=>{var y,A;return(y=r.comment)!=null&&y.is_deleted?!1:(((A=r.comment)==null?void 0:A.rating)||0)<=-3}),ct=j(()=>ne.value),Ye=f(!1),mt=j(()=>{var y,A;return(y=r.comment)!=null&&y.is_deleted?null:(((A=r.comment)==null?void 0:A.rating)||0)<=-3?"lowRating":null}),Ze=()=>{var y,A;t("start-edit",(y=r.comment)==null?void 0:y.id),w.value=((A=r.comment)==null?void 0:A.content)||"",Le(()=>{b.value&&(b.value.focus(),z({target:b.value}))})},ue=()=>{var y;t("cancel-edit"),w.value=((y=r.comment)==null?void 0:y.content)||""},Fe=()=>{var y;w.value.trim()&&t("edit",(y=r.comment)==null?void 0:y.id,w.value.trim())},Qe=()=>{var y;confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π?")&&t("delete",(y=r.comment)==null?void 0:y.id)},Re=y=>{var A,Se;h.value===y?(h.value=0,t("rate",(A=r.comment)==null?void 0:A.id,y)):(h.value=y,t("rate",(Se=r.comment)==null?void 0:Se.id,y))},Xe=y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),Fe())},Je=j(()=>{var y;return ve((y=r.comment)==null?void 0:y.content)}),$e=()=>{console.log("Avatar load error, falling back to initials"),c.value=null,Le(()=>{const y=document.querySelector(".avatar-placeholder");y&&(y.style.display="flex")})},J=()=>{d.push("/login")},He=y=>{de(y,b,w,A=>{w.value=A})},Me=y=>{le(y,b,w,A=>{w.value=A})},ge=()=>{K(b,w,y=>{w.value=y})},et=()=>{N(b,w,y=>{w.value=y})},tt=y=>{me(y,b,w,A=>{w.value=A})},Ve=y=>{z(y)};return Ee(w,()=>{s.value&&b.value&&Le(()=>{Ve({target:b.value})})}),{isEditing:s,editContent:w,userRating:h,isCommentOwner:T,canDeleteComment:fe,isCommentEdited:V,formatDate:_n,formatRelativeTime:ps,startEdit:Ze,cancelEdit:ue,saveEdit:Fe,confirmDelete:Qe,rateComment:Re,avatarUrl:c,getInitials:go,handleEditKeydown:Xe,isCommentHidden:ct,showHiddenComment:Ye,hiddenCommentReason:mt,formattedContent:Je,autoResizeEdit:Ve,editTextarea:b,showEmojiPicker:_,showImagePicker:C,insertEmojiEdit:He,insertImageEdit:Me,insertSpoilerEdit:ge,insertLinkEdit:et,handleEmojiMouseEnter:p,handleEmojiMouseLeave:B,handleImageMouseEnter:g,handleImageMouseLeave:S,closeEmojiPicker:F,closeImagePicker:O,handleButtonMouseEnter:I,handleButtonMouseLeave:P,handleImageButtonMouseEnter:L,handleAvatarError:$e,openLogin:J,showLinkModal:k,selectedTextForLink:o,insertLinkFromModal:tt,closeLinkModal:re}}},yo=["data-comment-id"],ho={class:"comment-header"},bo={class:"user-info"},po={class:"user-avatar"},_o=["src","alt"],wo={class:"user-details"},Co={class:"username"},Eo={key:0,class:"user-rating"},Lo=["title"],Mo=["title"],Io={class:"comment-content"},So={key:0,class:"hidden-comment-warning"},To={key:1},xo={key:0,class:"deleted-comment"},Ro={key:1},Po={key:0,class:"edit-form"},jo={class:"edit-textarea-container"},Bo={class:"edit-footer"},No={class:"edit-actions"},Uo=["disabled"],Ao={class:"character-counter-container"},Oo={key:1,class:"comment-text-container"},Fo=["innerHTML"],Ho={class:"comment-footer"},Vo={class:"comment-actions"},Do={class:"rating-buttons"},qo={class:"action-buttons"};function zo(r,t,d,s,w,h){var k,o,p,B,g,S,I,L,P,F,O,re,de,le,N,me,K,z,ve;const c=ae("router-link"),b=ae("EmojiPicker"),_=ae("ImagePicker"),C=ae("LinkModal");return i(),a("div",{class:"comment-item","data-comment-id":(k=d.comment)==null?void 0:k.id},[e("div",ho,[e("div",bo,[Y(c,{to:{path:"/lists/".concat((o=d.comment)==null?void 0:o.user_id)},target:"_blank",rel:"noopener noreferrer",class:"user-avatar-link"},{default:At(()=>{var T,fe;return[e("div",po,[s.avatarUrl?(i(),a("img",{key:0,src:s.avatarUrl,alt:((T=d.comment)==null?void 0:T.username)||"–ê–Ω–æ–Ω–∏–º",onError:t[0]||(t[0]=(...V)=>s.handleAvatarError&&s.handleAvatarError(...V)),onerror:"this.onerror=null; this.style.display='none'; this.nextElementSibling.style.display='flex';"},null,40,_o)):(i(),a("div",{key:1,class:"avatar-placeholder",style:Ot({display:s.avatarUrl?"none":"flex"})},m(s.getInitials(((fe=d.comment)==null?void 0:fe.username)||"–ê–Ω–æ–Ω–∏–º")),5))])]}),_:1},8,["to"]),e("div",wo,[Y(c,{to:{path:"/lists/".concat((p=d.comment)==null?void 0:p.user_id)},target:"_blank",rel:"noopener noreferrer",class:"username-link"},{default:At(()=>{var T;return[e("span",Co,m(((T=d.comment)==null?void 0:T.username)||"–ê–Ω–æ–Ω–∏–º"),1)]}),_:1},8,["to"]),(B=d.comment)!=null&&B.user_movie_rating?(i(),a("span",Eo,[t[18]||(t[18]=e("i",{class:"fas fa-star"},null,-1)),U(" "+m(d.comment.user_movie_rating),1)])):v("",!0),e("span",{class:"date",title:s.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(s.formatDate((g=d.comment)==null?void 0:g.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(s.formatDate((S=d.comment)==null?void 0:S.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(s.formatDate((I=d.comment)==null?void 0:I.created_at))},[U(m(s.formatRelativeTime((L=d.comment)==null?void 0:L.created_at))+" ",1),s.isCommentEdited?(i(),a("i",{key:0,class:"fas fa-pencil-alt edit-icon",title:s.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(s.formatDate((P=d.comment)==null?void 0:P.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(s.formatDate((F=d.comment)==null?void 0:F.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(s.formatDate((O=d.comment)==null?void 0:O.created_at))},null,8,Mo)):v("",!0)],8,Lo)])])]),e("div",Io,[!((re=d.comment)!=null&&re.is_deleted)&&s.isCommentHidden&&!s.showHiddenComment?(i(),a("div",So,[s.hiddenCommentReason==="lowRating"?(i(),a("p",{key:0,class:"warning-text",onClick:t[1]||(t[1]=T=>s.showHiddenComment=!0)},t[19]||(t[19]=[e("i",{class:"fas fa-eye-slash"},null,-1),U(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–∫—Ä—ã—Ç –∏–∑-–∑–∞ –Ω–∏–∑–∫–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å. ")]))):v("",!0)])):(i(),a("div",To,[(de=d.comment)!=null&&de.is_deleted?(i(),a("div",xo,t[20]||(t[20]=[e("p",{class:"deleted-message"},[e("i",{class:"fas fa-trash"}),U(" –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —É–¥–∞–ª—ë–Ω ")],-1)]))):(i(),a("div",Ro,[s.isEditing?(i(),a("div",Po,[e("div",jo,[te(e("textarea",{ref:"editTextarea","onUpdate:modelValue":t[2]||(t[2]=T=>s.editContent=T),class:"edit-textarea",rows:"3",maxlength:"1500",onKeydown:t[3]||(t[3]=(...T)=>s.handleEditKeydown&&s.handleEditKeydown(...T)),onInput:t[4]||(t[4]=(...T)=>s.autoResizeEdit&&s.autoResizeEdit(...T))},null,544),[[Ie,s.editContent]])]),e("div",Bo,[e("div",No,[e("button",{onClick:t[5]||(t[5]=(...T)=>s.cancelEdit&&s.cancelEdit(...T)),class:"cancel-button"},"–û—Ç–º–µ–Ω–∞"),e("button",{onClick:t[6]||(t[6]=(...T)=>s.saveEdit&&s.saveEdit(...T)),class:"save-button",disabled:!s.editContent.trim()||s.editContent.length>1500}," –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ",8,Uo)]),e("div",Ao,[e("div",{class:x(["character-counter-inline",{"near-limit":s.editContent.length>1400,"at-limit":s.editContent.length>=1500}])},m(s.editContent.length)+"/1500 ",3),e("button",{type:"button",class:x(["emoji-button-inline",{active:s.showEmojiPicker}]),onMouseenter:t[7]||(t[7]=(...T)=>s.handleButtonMouseEnter&&s.handleButtonMouseEnter(...T)),onMouseleave:t[8]||(t[8]=(...T)=>s.handleButtonMouseLeave&&s.handleButtonMouseLeave(...T))}," üòä ",34),e("button",{type:"button",class:x(["emoji-button-inline",{active:s.showImagePicker}]),onMouseenter:t[9]||(t[9]=(...T)=>s.handleImageButtonMouseEnter&&s.handleImageButtonMouseEnter(...T)),onMouseleave:t[10]||(t[10]=(...T)=>s.handleButtonMouseLeave&&s.handleButtonMouseLeave(...T))},t[21]||(t[21]=[pt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-f1c85dfc><g id="logo" data-v-f1c85dfc><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-f1c85dfc></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-f1c85dfc></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-f1c85dfc></path></g></svg>',1)]),34),e("button",{type:"button",class:"emoji-button-inline spoiler-button",onClick:t[11]||(t[11]=(...T)=>s.insertSpoilerEdit&&s.insertSpoilerEdit(...T)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},t[22]||(t[22]=[e("i",{class:"fas fa-eye-slash"},null,-1)])),e("button",{type:"button",class:"emoji-button-inline link-button",onClick:t[12]||(t[12]=(...T)=>s.insertLinkEdit&&s.insertLinkEdit(...T)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},t[23]||(t[23]=[e("i",{class:"fas fa-link"},null,-1)])),Y(b,{"is-visible":s.showEmojiPicker,onEmojiSelected:s.insertEmojiEdit,onMouseEnter:s.handleEmojiMouseEnter,onMouseLeave:s.handleEmojiMouseLeave,onClose:s.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),Y(_,{"is-visible":s.showImagePicker,"current-user":d.currentUser,onImageSelected:s.insertImageEdit,onMouseEnter:s.handleImageMouseEnter,onMouseLeave:s.handleImageMouseLeave,onClose:s.closeImagePicker,onLoginRequired:s.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),Y(C,{"is-visible":s.showLinkModal,"selected-text":s.selectedTextForLink,onClose:s.closeLinkModal,onSubmit:s.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):(i(),a("div",Oo,[e("p",{class:"comment-text",innerHTML:s.formattedContent},null,8,Fo)]))]))]))]),e("div",Ho,[e("div",Vo,[e("div",Do,[!s.isCommentOwner&&!((le=d.comment)!=null&&le.is_deleted)?(i(),a("button",{key:0,onClick:t[13]||(t[13]=T=>s.rateComment(1)),class:x(["rating-button",{"rated-up":s.userRating===1}])},t[24]||(t[24]=[e("i",{class:"fas fa-thumbs-up"},null,-1)]),2)):v("",!0),e("span",{class:x(["rating-count",{"rating-positive":s.userRating===1,"rating-negative":s.userRating===-1}])},m(((N=d.comment)==null?void 0:N.rating)||0),3),!s.isCommentOwner&&!((me=d.comment)!=null&&me.is_deleted)?(i(),a("button",{key:1,onClick:t[14]||(t[14]=T=>s.rateComment(-1)),class:x(["rating-button",{"rated-down":s.userRating===-1}])},t[25]||(t[25]=[e("i",{class:"fas fa-thumbs-down"},null,-1)]),2)):v("",!0)]),e("div",qo,[!d.currentUser||d.currentUser.allow_comments===1?(i(),a("button",{key:0,onClick:t[15]||(t[15]=T=>r.$emit("reply",d.comment)),class:"action-button reply-button"},t[26]||(t[26]=[e("i",{class:"fas fa-reply"},null,-1)]))):v("",!0),s.isCommentOwner&&!((K=d.comment)!=null&&K.is_deleted)&&!s.isEditing&&((z=d.currentUser)==null?void 0:z.allow_comments)===1?(i(),a("button",{key:1,onClick:t[16]||(t[16]=(...T)=>s.startEdit&&s.startEdit(...T)),class:"action-button edit-button"},t[27]||(t[27]=[e("i",{class:"fas fa-edit"},null,-1)]))):v("",!0),s.canDeleteComment&&!((ve=d.comment)!=null&&ve.is_deleted)?(i(),a("button",{key:2,onClick:t[17]||(t[17]=(...T)=>s.confirmDelete&&s.confirmDelete(...T)),class:"action-button delete-button"},t[28]||(t[28]=[e("i",{class:"fas fa-trash"},null,-1)]))):v("",!0)])])])],8,yo)}const Wo=Oe(ko,[["render",zo],["__scopeId","data-v-f1c85dfc"]]),Ko={name:"CommentThread",components:{CommentItem:Wo,EmojiPicker:Vt,ImagePicker:Dt,LinkModal:qt},props:{comment:{type:Object,required:!0},currentUser:{type:Object,required:!0},replyTo:{type:Object,default:null},replyContent:{type:String,default:""},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate","submit-reply","cancel-reply","update-reply-content","reply-keydown"],setup(r,{emit:t}){const d=f(null),s=f(!0),{showEmojiPicker:w,showImagePicker:h,showLinkModal:c,selectedTextForLink:b,handleEmojiMouseEnter:_,handleEmojiMouseLeave:C,handleImageMouseEnter:k,handleImageMouseLeave:o,handleButtonMouseEnter:p,handleImageButtonMouseEnter:B,handleButtonMouseLeave:g,closeEmojiPicker:S,closeImagePicker:I,closeLinkModal:L,insertEmojiUniversal:P,insertImageUniversal:F,insertLinkUniversal:O,insertLinkFromModalUniversal:re,insertSpoilerUniversal:de}=zt(),le=V=>{t("update-reply-content",V.target.value);const ne=V.target;ne&&(ne.style.height="auto",ne.style.height="".concat(Math.min(ne.scrollHeight,200),"px"))},N={get value(){return r.replyContent},set value(V){t("update-reply-content",V)}};return{replyTextarea:d,showEmojiPicker:w,showImagePicker:h,isCollapsed:s,insertEmoji:V=>{P(V,d,N,ne=>{t("update-reply-content",ne)})},insertImage:V=>{F(V,d,N,ne=>{t("update-reply-content",ne)})},insertSpoiler:()=>{de(d,N,V=>{t("update-reply-content",V)})},handleEmojiMouseEnter:_,handleEmojiMouseLeave:C,handleImageMouseEnter:k,handleImageMouseLeave:o,handleButtonMouseEnter:p,handleButtonMouseLeave:g,closeEmojiPicker:S,closeImagePicker:I,handleImageButtonMouseEnter:B,handleReplyInput:le,toggleCollapsed:()=>{s.value=!s.value},showLinkModal:c,selectedTextForLink:b,insertLink:()=>{O(d,N,V=>{t("update-reply-content",V)})},closeLinkModal:L,insertLinkFromModal:V=>{re(V,d,N,ne=>{t("update-reply-content",ne)})}}},computed:{canReply(){return this.currentUser?this.currentUser.allow_comments===1:!0},getReplyPlaceholder(){return this.currentUser?this.currentUser.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç..."},formattedContent(){const{formatContent:r}=Cn();return r(this.comment.content)}}},Go={class:"comment-thread"},Yo={key:0,class:"reply-form"},Zo={class:"textarea-container"},Qo=["value","placeholder","disabled"],Xo={class:"reply-footer"},Jo={class:"reply-actions"},$o=["disabled"],el={class:"character-counter-container"},tl=["disabled"],nl={key:1,class:"replies-container"},sl=["title"],ol={class:"replies-count"},ll=["title"],il={key:0,class:"replies-content"};function al(r,t,d,s,w,h){const c=ae("CommentItem"),b=ae("EmojiPicker"),_=ae("ImagePicker"),C=ae("LinkModal"),k=ae("CommentThread",!0);return i(),a("div",Go,[Y(c,{comment:d.comment,"current-user":d.currentUser,"editing-comment-id":d.editingCommentId,onReply:t[0]||(t[0]=o=>r.$emit("reply",o)),onStartEdit:t[1]||(t[1]=o=>r.$emit("start-edit",o)),onCancelEdit:t[2]||(t[2]=o=>r.$emit("cancel-edit")),onEdit:t[3]||(t[3]=(o,p)=>r.$emit("edit",o,p)),onDelete:t[4]||(t[4]=o=>r.$emit("delete",o)),onRate:t[5]||(t[5]=(o,p)=>r.$emit("rate",o,p))},null,8,["comment","current-user","editing-comment-id"]),d.replyTo&&d.replyTo.id===d.comment.id?(i(),a("div",Yo,[e("div",Zo,[e("textarea",{ref:"replyTextarea",class:"comment-textarea",value:d.replyContent,placeholder:h.getReplyPlaceholder,disabled:d.currentUser&&d.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:t[6]||(t[6]=(...o)=>s.handleReplyInput&&s.handleReplyInput(...o)),onKeydown:t[7]||(t[7]=o=>r.$emit("reply-keydown",o))},null,40,Qo)]),e("div",Xo,[e("div",Jo,[e("button",{class:"cancel-reply",onClick:t[8]||(t[8]=o=>r.$emit("cancel-reply"))},"–û—Ç–º–µ–Ω–∞"),e("button",{class:"submit-button",disabled:!d.replyContent.trim()||d.replyContent.length>1500||d.currentUser&&d.currentUser.allow_comments!==1,onClick:t[9]||(t[9]=o=>r.$emit("submit-reply"))}," –û—Ç–≤–µ—Ç–∏—Ç—å ",8,$o)]),e("div",el,[e("div",{class:x(["character-counter-inline",{"near-limit":d.replyContent.length>1400,"at-limit":d.replyContent.length>=1500}])},m(d.replyContent.length)+"/1500 ",3),e("button",{type:"button",class:x(["emoji-button-inline",{active:s.showEmojiPicker}]),onMouseenter:t[10]||(t[10]=(...o)=>s.handleButtonMouseEnter&&s.handleButtonMouseEnter(...o)),onMouseleave:t[11]||(t[11]=(...o)=>s.handleButtonMouseLeave&&s.handleButtonMouseLeave(...o))}," üòä ",34),e("button",{type:"button",class:x(["emoji-button-inline",{active:s.showImagePicker}]),onMouseenter:t[12]||(t[12]=(...o)=>s.handleImageButtonMouseEnter&&s.handleImageButtonMouseEnter(...o)),onMouseleave:t[13]||(t[13]=(...o)=>s.handleButtonMouseLeave&&s.handleButtonMouseLeave(...o))},t[29]||(t[29]=[pt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-6c0fc347><g id="logo" data-v-6c0fc347><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-6c0fc347></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-6c0fc347></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-6c0fc347></path></g></svg>',1)]),34),e("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:d.currentUser&&d.currentUser.allow_comments!==1,onClick:t[14]||(t[14]=(...o)=>s.insertSpoiler&&s.insertSpoiler(...o)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},t[30]||(t[30]=[e("i",{class:"fas fa-eye-slash"},null,-1)]),8,tl),e("button",{type:"button",class:"emoji-button-inline link-button",onClick:t[15]||(t[15]=(...o)=>s.insertLink&&s.insertLink(...o)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},t[31]||(t[31]=[e("i",{class:"fas fa-link"},null,-1)])),Y(b,{"is-visible":s.showEmojiPicker,onEmojiSelected:s.insertEmoji,onMouseEnter:s.handleEmojiMouseEnter,onMouseLeave:s.handleEmojiMouseLeave,onClose:s.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),Y(_,{"is-visible":s.showImagePicker,"current-user":d.currentUser,onImageSelected:s.insertImage,onMouseEnter:s.handleImageMouseEnter,onMouseLeave:s.handleImageMouseLeave,onClose:s.closeImagePicker,onLoginRequired:t[16]||(t[16]=()=>r.$router.push("/login"))},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose"]),Y(C,{"is-visible":s.showLinkModal,"selected-text":s.selectedTextForLink,onClose:s.closeLinkModal,onSubmit:s.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):v("",!0),d.comment.replies&&d.comment.replies.length>0?(i(),a("div",nl,[e("button",{class:"collapse-toggle",title:s.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:t[17]||(t[17]=(...o)=>s.toggleCollapsed&&s.toggleCollapsed(...o))},[e("span",{class:x(["collapse-icon",{expanded:!s.isCollapsed}])},t[32]||(t[32]=[e("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},[e("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1)]),2),e("span",ol,m(d.comment.replies.length)+" "+m(d.comment.replies.length===1?"–æ—Ç–≤–µ—Ç":"–æ—Ç–≤–µ—Ç–æ–≤"),1)],8,sl),e("div",{class:"vertical-line-clickable",title:s.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:t[18]||(t[18]=(...o)=>s.toggleCollapsed&&s.toggleCollapsed(...o))},[e("div",{class:x(["vertical-line-visual",{collapsed:s.isCollapsed}])},null,2)],8,ll),s.isCollapsed?v("",!0):(i(),a("div",il,[(i(!0),a(W,null,ee(d.comment.replies,o=>(i(),Ge(k,{key:o.id,comment:o,"current-user":d.currentUser,"reply-to":d.replyTo,"reply-content":d.replyContent,"editing-comment-id":d.editingCommentId,onReply:t[19]||(t[19]=p=>r.$emit("reply",p)),onStartEdit:t[20]||(t[20]=p=>r.$emit("start-edit",p)),onCancelEdit:t[21]||(t[21]=p=>r.$emit("cancel-edit")),onEdit:t[22]||(t[22]=(p,B)=>r.$emit("edit",p,B)),onDelete:t[23]||(t[23]=p=>r.$emit("delete",p)),onRate:t[24]||(t[24]=(p,B)=>r.$emit("rate",p,B)),onSubmitReply:t[25]||(t[25]=p=>r.$emit("submit-reply")),onCancelReply:t[26]||(t[26]=p=>r.$emit("cancel-reply")),onUpdateReplyContent:t[27]||(t[27]=p=>r.$emit("update-reply-content",p)),onReplyKeydown:t[28]||(t[28]=p=>r.$emit("reply-keydown",p))},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id"]))),128))]))])):v("",!0)])}const rl=Oe(Ko,[["render",al],["__scopeId","data-v-6c0fc347"]]),ul={name:"Comments",components:{CommentThread:rl,Notification:wn,EmojiPicker:Vt,ImagePicker:Dt,LinkModal:qt},props:{movieId:{type:[String,Number],required:!0}},setup(r){const t=pn(),d=Ht(),s=Ft(),w=f([]),h=f(""),c=f(null),b=f(""),_=f(null),C=f(t.user),k=f(null),o=f(null),p=f(s.isAutoShowComments),B=f(!1),g=f(3),S=f(s.commentsSortBy),I=f(S.value==="date"?"asc":"desc"),{showEmojiPicker:L,showImagePicker:P,showLinkModal:F,selectedTextForLink:O,handleEmojiMouseEnter:re,handleEmojiMouseLeave:de,handleImageMouseEnter:le,handleImageMouseLeave:N,handleButtonMouseEnter:me,handleImageButtonMouseEnter:K,handleButtonMouseLeave:z,closeEmojiPicker:ve,closeImagePicker:T,closeLinkModal:fe,insertEmojiUniversal:V,insertImageUniversal:ne,insertLinkUniversal:ct,insertLinkFromModalUniversal:Ye,insertSpoilerUniversal:mt,autoResize:Ze}=zt(),ue=j(()=>{const M=(R=null)=>{const q=w.value.filter(H=>H.parent_id===R).filter(H=>!H.is_deleted||H.replies&&H.replies.length>0);let Z;return R===null?Z=q.sort((H,ie)=>{if(S.value==="rating"){const Pe=H.rating||0,vt=ie.rating||0;return Pe!==vt?I.value==="asc"?Pe-vt:vt-Pe:H.id-ie.id}return I.value==="asc"?H.id-ie.id:ie.id-H.id}):Z=q.sort((H,ie)=>H.id-ie.id),Z.map(H=>({...H,replies:M(H.id)}))};return M()}),Fe=j(()=>{const M=R=>R.reduce((q,Z)=>q+1+M(Z.replies||[]),0);return M(ue.value)}),Qe=j(()=>ue.value.slice(0,g.value)),Re=j(()=>ue.value.length>g.value),Xe=j(()=>ue.value.length-g.value),Je=()=>{g.value=ue.value.length},$e=M=>{S.value===M?I.value=I.value==="asc"?"desc":"asc":(S.value=M,I.value=M==="date"?"asc":"desc",s.setCommentsSortBy(M))},J=async()=>{try{const M=await Qn(r.movieId);w.value=M}catch(M){console.error("Failed to load comments:",M),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.")}},He=async()=>{if(B.value)return;if(!t.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:y});return}if(C.value&&C.value.allow_comments!==1){k.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!h.value.replace(/\[spoiler\]\s*\[\/spoiler\]/g,"").replace(/\[img\]\s*\[\/img\]/g,"").replace(/\[link=[^\]]+\]\s*\[\/link\]/g,"").trim()){k.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º");return}if(h.value.length>1500){k.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await cn(r.movieId,h.value.trim()),h.value="",await J(),p.value=!0,Le(()=>{o.value&&(o.value.focus(),o.value.style.height="auto"),setTimeout(()=>{const R=document.querySelectorAll(".comment-item[data-comment-id]");if(R.length>0){const q=Array.from(R).map(Z=>parseInt(Z.getAttribute("data-comment-id"))).filter(Z=>!isNaN(Z));if(q.length>0){const Z=Math.max(...q),H=document.querySelector('[data-comment-id="'.concat(Z,'"]'));H&&H.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}},300)})}catch(R){console.error("Failed to create comment:",R),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},Me=M=>{if(!t.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:y});return}_.value=null,c.value=M,b.value="",Le(()=>{const R=document.querySelector(".reply-form");R&&R.scrollIntoView({behavior:"smooth",block:"center"})})},ge=async()=>{if(!t.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:y});return}if(C.value&&C.value.allow_comments!==1){k.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!(!b.value.trim()||!c.value)){if(b.value.length>1500){k.value.showNotification("–û—Ç–≤–µ—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await cn(r.movieId,b.value.trim(),c.value.id);const M=c.value.id;await J(),b.value="",c.value=null,Le(()=>{setTimeout(()=>{const R=document.querySelector('[data-comment-id="'.concat(M,'"]'));if(R){const q=R.querySelector(".replies-content");if(q){const Z=q.querySelectorAll(".comment-item[data-comment-id]");if(Z.length>0){const H=Array.from(Z).map(ie=>parseInt(ie.getAttribute("data-comment-id"))).filter(ie=>!isNaN(ie));if(H.length>0){const ie=Math.max(...H),Pe=document.querySelector('[data-comment-id="'.concat(ie,'"]'));Pe&&Pe.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}}}},300)})}catch(M){console.error("Error submitting reply:",M),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}}},et=async(M,R)=>{if(!t.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:y});return}if(C.value&&C.value.allow_comments!==1){k.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(R.length>1500){k.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await $n(M,R.trim()),await J(),_.value=null}catch(q){console.error("Failed to update comment:",q),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},tt=async M=>{if(!t.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:y});return}try{await Jn(M),await J()}catch(R){console.error("Failed to delete comment:",R),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},Ve=async(M,R)=>{if(!t.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:y});return}try{await Xn(M,R),await J()}catch(q){console.error("Failed to rate comment:",q),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ü–µ–Ω–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},nt=M=>{B.value||L.value||M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),He())},De=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),ge())},y=()=>{d.push("/login")},A=M=>{B.value=!0,V(M,o,h,R=>{h.value=R}),setTimeout(()=>{B.value=!1},100)},Se=M=>{ne(M,o,h,R=>{h.value=R})},qe=()=>{mt(o,h,M=>{h.value=M})},_t=()=>{ct(o,h,M=>{h.value=M})},st=M=>{Ye(M,o,h,R=>{h.value=R})},ot=j(()=>C.value?C.value.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."),se=j(()=>C.value?C.value.allow_comments===1:!0),xt=M=>{c.value=null,b.value="",_.value=M},Rt=()=>{_.value=null};return ut(()=>{J()}),{comments:w,groupedComments:ue,displayedComments:Qe,hasMoreComments:Re,remainingCommentsCount:Xe,showMoreComments:Je,sortBy:S,setSortBy:$e,sortDirection:I,newComment:h,replyTo:c,replyContent:b,editingCommentId:_,currentUser:C,notificationRef:k,commentTextarea:o,showComments:p,submitComment:He,handleReply:Me,submitReply:ge,handleEdit:et,handleDelete:tt,handleRate:Ve,handleCommentKeydown:nt,handleReplyKeydown:De,autoResize:Ze,totalCommentsCount:Fe,getCommentWordForm:fo,showEmojiPicker:L,showImagePicker:P,showLinkModal:F,selectedTextForLink:O,insertEmoji:A,insertImage:Se,handleEmojiMouseEnter:re,handleEmojiMouseLeave:de,handleImageMouseEnter:le,handleImageMouseLeave:N,closeEmojiPicker:ve,closeImagePicker:T,handleButtonMouseLeave:z,handleButtonMouseEnter:me,handleImageButtonMouseEnter:K,getCommentPlaceholder:ot,canComment:se,handleStartEdit:xt,handleCancelEdit:Rt,insertSpoiler:qe,insertLink:_t,insertLinkFromModal:st,closeLinkModal:fe}}},dl={class:"comments-section"},cl={class:"spoiler-content"},ml={key:1,class:"comments-container"},vl={class:"comments-header"},fl={class:"comments-controls"},gl={class:"textarea-container"},kl=["placeholder","disabled"],yl={class:"comment-footer"},hl={class:"comment-actions"},bl=["disabled"],pl={class:"character-counter-container"},_l=["disabled"],wl=["disabled"],Cl=["disabled"],El={class:"comments-list"},Ll={key:0,class:"show-more-comments"};function Ml(r,t,d,s,w,h){const c=ae("EmojiPicker"),b=ae("ImagePicker"),_=ae("LinkModal"),C=ae("CommentThread"),k=ae("Notification");return i(),a("div",dl,[s.showComments?(i(),a("div",ml,[e("div",vl,[e("div",fl,[e("button",{class:x(["sort-button",{active:s.sortBy==="date"}]),onClick:t[1]||(t[1]=o=>s.setSortBy("date")),title:"–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –¥–∞—Ç–µ"},[t[20]||(t[20]=e("i",{class:"fas fa-clock"},null,-1)),t[21]||(t[21]=U(" –ü–æ –¥–∞—Ç–µ ")),s.sortBy==="date"?(i(),a("i",{key:0,class:x(["fas",s.sortDirection==="asc"?"fa-arrow-up":"fa-arrow-down"])},null,2)):v("",!0)],2),e("button",{class:x(["sort-button",{active:s.sortBy==="rating"}]),onClick:t[2]||(t[2]=o=>s.setSortBy("rating")),title:"–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É"},[t[22]||(t[22]=e("i",{class:"fas fa-thumbs-up"},null,-1)),t[23]||(t[23]=U(" –ü–æ —Ä–µ–π—Ç–∏–Ω–≥—É ")),s.sortBy==="rating"?(i(),a("i",{key:0,class:x(["fas",s.sortDirection==="asc"?"fa-arrow-up":"fa-arrow-down"])},null,2)):v("",!0)],2)]),e("button",{class:"hide-comments-btn",onClick:t[3]||(t[3]=o=>s.showComments=!1)},t[24]||(t[24]=[e("i",{class:"fas fa-eye-slash"},null,-1),U(" –°–∫—Ä—ã—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ")]))]),e("form",{class:"comment-form",onSubmit:t[13]||(t[13]=dt((...o)=>s.submitComment&&s.submitComment(...o),["prevent"]))},[e("div",gl,[te(e("textarea",{ref:"commentTextarea","onUpdate:modelValue":t[4]||(t[4]=o=>s.newComment=o),class:"comment-textarea",placeholder:s.getCommentPlaceholder,disabled:s.currentUser&&s.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:t[5]||(t[5]=(...o)=>s.autoResize&&s.autoResize(...o)),onKeydown:t[6]||(t[6]=(...o)=>s.handleCommentKeydown&&s.handleCommentKeydown(...o))},null,40,kl),[[Ie,s.newComment]])]),e("div",yl,[e("div",hl,[e("button",{class:"submit-button",type:"submit",disabled:!s.newComment.trim()||s.newComment.length>1500||s.currentUser&&s.currentUser.allow_comments!==1}," –û—Ç–ø—Ä–∞–≤–∏—Ç—å ",8,bl)]),e("div",pl,[e("div",{class:x(["character-counter-inline",{"near-limit":s.newComment.length>1400,"at-limit":s.newComment.length>=1500}])},m(s.newComment.length)+"/1500 ",3),e("button",{type:"button",class:x(["emoji-button-inline",{active:s.showEmojiPicker}]),disabled:s.currentUser&&s.currentUser.allow_comments!==1,onMouseenter:t[7]||(t[7]=(...o)=>s.handleButtonMouseEnter&&s.handleButtonMouseEnter(...o)),onMouseleave:t[8]||(t[8]=(...o)=>s.handleButtonMouseLeave&&s.handleButtonMouseLeave(...o))}," üòä ",42,_l),e("button",{type:"button",class:x(["emoji-button-inline",{active:s.showImagePicker}]),disabled:s.currentUser&&s.currentUser.allow_comments!==1,onMouseenter:t[9]||(t[9]=(...o)=>s.handleImageButtonMouseEnter&&s.handleImageButtonMouseEnter(...o)),onMouseleave:t[10]||(t[10]=(...o)=>s.handleButtonMouseLeave&&s.handleButtonMouseLeave(...o))},t[25]||(t[25]=[pt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-e82be516><g id="logo" data-v-e82be516><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-e82be516></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-e82be516></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-e82be516></path></g></svg>',1)]),42,wl),e("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:s.currentUser&&s.currentUser.allow_comments!==1,onClick:t[11]||(t[11]=(...o)=>s.insertSpoiler&&s.insertSpoiler(...o)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},t[26]||(t[26]=[e("i",{class:"fas fa-eye-slash"},null,-1)]),8,Cl),e("button",{type:"button",class:"emoji-button-inline link-button",onClick:t[12]||(t[12]=(...o)=>s.insertLink&&s.insertLink(...o)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},t[27]||(t[27]=[e("i",{class:"fas fa-link"},null,-1)])),Y(c,{"is-visible":s.showEmojiPicker&&s.canComment,onEmojiSelected:s.insertEmoji,onMouseEnter:s.handleEmojiMouseEnter,onMouseLeave:s.handleEmojiMouseLeave,onClose:s.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),Y(b,{"is-visible":s.showImagePicker&&s.canComment,"current-user":s.currentUser,onImageSelected:s.insertImage,onMouseEnter:s.handleImageMouseEnter,onMouseLeave:s.handleImageMouseLeave,onClose:s.closeImagePicker,onLoginRequired:r.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),Y(_,{"is-visible":s.showLinkModal,"selected-text":s.selectedTextForLink,onClose:s.closeLinkModal,onSubmit:s.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])],32),e("div",El,[(i(!0),a(W,null,ee(s.displayedComments,o=>(i(),Ge(C,{key:o.id,comment:o,"current-user":s.currentUser,"reply-to":s.replyTo,"reply-content":s.replyContent,"editing-comment-id":s.editingCommentId,"is-first-comment":!1,onReply:s.handleReply,onStartEdit:s.handleStartEdit,onCancelEdit:s.handleCancelEdit,onEdit:s.handleEdit,onDelete:s.handleDelete,onRate:s.handleRate,onSubmitReply:s.submitReply,onCancelReply:t[14]||(t[14]=p=>s.replyTo=null),onUpdateReplyContent:t[15]||(t[15]=p=>s.replyContent=p),onReplyKeydown:s.handleReplyKeydown},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id","onReply","onStartEdit","onCancelEdit","onEdit","onDelete","onRate","onSubmitReply","onReplyKeydown"]))),128)),s.hasMoreComments?(i(),a("div",Ll,[e("button",{class:"show-more-btn",onClick:t[16]||(t[16]=(...o)=>s.showMoreComments&&s.showMoreComments(...o))}," –ü–æ–∫–∞–∑–∞—Ç—å –µ—â–µ "+m(s.remainingCommentsCount)+" "+m(s.getCommentWordForm(s.remainingCommentsCount)),1)])):v("",!0)])])):(i(),a("div",{key:0,class:"spoiler-warning",onClick:t[0]||(t[0]=o=>s.showComments=!0)},[e("div",cl,[t[17]||(t[17]=e("i",{class:"fas fa-eye-slash"},null,-1)),t[18]||(t[18]=e("h3",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–∫—Ä—ã—Ç—ã",-1)),t[19]||(t[19]=e("p",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä—ã. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å.",-1)),e("div",{class:x(["comments-count",{"no-comments":s.totalCommentsCount===0}])},[s.totalCommentsCount===0?(i(),a(W,{key:0},[U(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç ")],64)):(i(),a(W,{key:1},[U(m(s.totalCommentsCount)+" "+m(s.getCommentWordForm(s.totalCommentsCount)),1)],64))],2)])])),Y(k,{ref:"notificationRef"},null,512)])}const Il=Oe(ul,[["render",Ml],["__scopeId","data-v-e82be516"]]),Sl={class:"movie-info"},Tl={class:"content"},xl={key:0,class:"content-card"},Rl={class:"movie-skeleton"},Pl={class:"movie-skeleton__player"},jl={key:2,class:"content-card"},Bl={key:3,class:"content-card"},Nl={class:"content-header"},Ul=["src"],Al={class:"content-title"},Ol={key:0,class:"ratings-links"},Fl={key:1},Hl=["href","title"],Vl={key:2},Dl=["href","title"],ql={key:3},zl=["href","title"],Wl={key:4},Kl=["href","title"],Gl={key:5},Yl=["href"],Zl=["title"],Ql={key:0,class:"fa-regular fa-face-grin-wink"},Xl={key:1,class:"fas fa-spinner fa-spin"},Jl=["title"],$l={key:1,class:"mobile-list-dropdown"},ei={class:"mobile-list-content"},ti=["content"],ni=["content"],si={class:"additional-info"},oi={class:"info-content"},li={key:0,class:"movie-poster-container desktop-only"},ii=["href"],ai=["src"],ri={class:"details-container"},ui={class:"info-list"},di={key:0},ci={key:1},mi={key:2},vi={key:3},fi={key:4},gi={key:5},ki={key:6},yi={key:7},hi={key:8},bi={key:9,class:"rating-boxes"},pi={key:0,class:"rating-box mpaa"},_i={key:1,class:"rating-box age"},wi={class:"content-info"},Ci={key:0,class:"content-description-text"},Ei={key:3,class:"comments-section"},Li={key:4,class:"staff-section"},Mi={class:"staff-categories"},Ii={key:0,class:"staff-category"},Si={class:"staff-list"},Ti=["href","title"],xi=["src","alt"],Ri={class:"staff-name"},Pi={key:0,class:"staff-role"},ji=["href","title"],Bi={key:1,class:"staff-category"},Ni={class:"staff-names-container"},Ui={class:"staff-names-list"},Ai=["href"],Oi=["href","title"],Fi={key:2,class:"staff-category"},Hi={class:"staff-names-container"},Vi={class:"staff-names-list"},Di=["href"],qi=["href","title"],zi={key:5,class:"yt-video-container"},Wi={key:6,class:"related-movies"},Ki=["title"],Gi={key:7,class:"related-movies"},Yi=["title"],Zi={key:0,class:"nudity-info-popup"},Qi={class:"nudity-info-content"},Xi={key:0,class:"nudity-info-loading"},Ji={key:1},$i={class:"nudity-info-actions"},ea=["href"],ta={key:1,class:"nudity-info-popup"},na={class:"nudity-info-content"},sa={class:"timings-text"},oa={key:0,class:"timing-entries"},la={class:"timing-content"},ia={class:"timing-header-row",style:{display:"flex","align-items":"center",gap:"8px"}},aa={key:0,class:"pending-badge"},ra={key:1,class:"clean-text-badge"},ua={key:0,class:"timing-actions-row",style:{display:"flex","align-items":"center",gap:"8px","margin-top":"8px"}},da=["onClick"],ca=["onClick"],ma=["onClick"],va=["onClick"],fa=["onClick"],ga=["onClick"],ka={class:"timing-text"},ya={class:"timing-author"},ha={key:0,class:"fas fa-user-check verified-icon",title:"–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"},ba={key:1,style:{color:"#fff","font-size":"13px",margin:"4px 0 0 0"}},pa={key:0},_a={key:1},wa={key:1},Ca={key:0,class:"general-parser-result",style:{"margin-top":"15px",padding:"15px",background:"rgba(255, 255, 255, 0.05)","border-radius":"8px"}},Ea={style:{margin:"0 0 10px 0",color:"#fff"}},La={style:{color:"#fff","font-size":"13px"}},Ma={key:0},Ia={key:1},Sa={key:1,class:"overlay-parser-result",style:{"margin-top":"15px",padding:"15px",background:"rgba(255, 255, 255, 0.05)","border-radius":"8px"}},Ta={style:{margin:"0 0 10px 0",color:"#fff"}},xa={style:{color:"#fff","font-size":"13px"}},Ra={key:0},Pa={key:1},ja={class:"nudity-info-actions"},Ba={key:2,class:"timing-modal"},Na={class:"timing-modal-content"},Ua={class:"timing-modal-header"},Aa={class:"timing-submission-form"},Oa={key:0,class:"timing-preview"},Fa={class:"timing-preview-content"},Ha={class:"timing-preview-range"},Va={class:"timing-preview-duration"},Da={class:"timing-form-actions"},qa=["disabled"],za={key:0,class:"fas fa-spinner fa-spin"},Wa={key:1},Ka={key:3,class:"timing-modal"},Ga={class:"timing-modal-content"},Ya={class:"timing-submission-form"},Za={class:"timing-form-actions"},Qa=["disabled"],Xa={key:0,class:"fas fa-spinner fa-spin"},Ja={key:1},$a={class:"modal-header"},er={class:"modal-header-controls"},tr={class:"modal-body"},nr=["disabled"],sr={key:0,class:"fas fa-spinner fa-spin"},or={key:1,class:"fas fa-list"},lr={class:"top-submitters-list"},ir={class:"submitter-info"},ar={class:"submitter-name"},rr=["href"],ur={class:"submitter-count"},dr={class:"submitter-contribution"},cr={class:"modal-header"},mr={class:"modal-body"},vr={key:0,class:"loading-spinner"},fr={key:1,class:"no-timings"},gr={key:2,class:"no-timings"},kr={key:3,class:"all-timings-list"},yr={class:"timing-header"},hr={class:"timing-meta"},br={class:"timing-author"},pr={class:"timing-date"},_r={class:"timing-movie-info"},wr={key:0,class:"admin-controls"},Cr=["onClick","disabled"],Er={key:0,class:"fas fa-spinner fa-spin"},Lr={key:1,class:"fas fa-check"},Mr=["onClick","disabled"],Ir={key:0,class:"fas fa-spinner fa-spin"},Sr={key:1,class:"fas fa-times"},Tr=["onClick","disabled"],xr={key:0,class:"fas fa-spinner fa-spin"},Rr={key:1,class:"fas fa-eye-slash"},Pr={class:"timing-content"},jr={class:"timing-text"},Br={key:6,class:"timing-modal obs-modal"},Nr={class:"timing-modal-content obs-modal-content"},Ur={class:"timing-modal-header"},Ar={class:"obs-settings-form"},Or={class:"obs-setting-group"},Fr={class:"obs-checkbox-label"},Hr={key:0,class:"obs-connection-settings"},Vr={class:"obs-setting-group"},Dr={class:"obs-setting-group"},qr={class:"obs-setting-group"},zr={key:0,class:"obs-setting-group"},Wr={key:0,class:"obs-warning"},Kr={key:1,class:"obs-filter-selection"},Gr=["value"],Yr={key:0,class:"selected-filter-info"},Zr={class:"filter-details"},Qr={class:"obs-info"},Xr={class:"obs-setting-group"},Jr={class:"obs-checkbox-label"},$r={class:"obs-actions"},eu=["disabled"],tu={key:0,class:"fas fa-spinner fa-spin"},nu={key:1,class:"fas fa-plug"},su=["disabled"],ou=["disabled"],lu={__name:"MovieInfo",setup(r){const t=f(!0),d=Ft(),s=pn(),w=es(),h=ws(),c=ts(),b=Ht(),_=f(c.params.kp_id),C=f(""),k=f(null),o=f(null),p=ns(),B=Cs(),g=f(null),S=j(()=>B.areTrailersActive),I=f(null),L=f(!1),P=f(!1),F=f(10),O=f(null),re=f(!1),de=f(null),le=f(!1),N=f(void 0),me=f(null),K=f(new Set),z=f(new Set),ve=f(!1),T=f(!1),fe=f(null),V=f(!1),ne=j(()=>{var l;return((l=o.value)==null?void 0:l.nudity_timings.length)>0}),ct=j(()=>{var l;return((l=o.value)==null?void 0:l.nudity_timings.length)>0&&d.isStreamerMode&&!d.isMobile}),Ye=j(()=>{var l,n,E,G,ye,he,be,pe,_e,$;return((n=(l=o.value)==null?void 0:l.lists)==null?void 0:n.isFavorite)||((G=(E=o.value)==null?void 0:E.lists)==null?void 0:G.isWatching)||((he=(ye=o.value)==null?void 0:ye.lists)==null?void 0:he.isLater)||((pe=(be=o.value)==null?void 0:be.lists)==null?void 0:pe.isCompleted)||(($=(_e=o.value)==null?void 0:_e.lists)==null?void 0:$.isAbandoned)}),mt=j(()=>d.isCommentsEnabled),Ze=()=>{if(o.value){const l=o.value.name_ru||o.value.name_en||o.value.name_original||"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å–º–µ";document.title=l}},ue=l=>l?l.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",Fe=l=>(l||[]).map(n=>({kp_id:n.film_id,poster:n.poster_url_preview||n.poster_url,title:n.name_ru||n.name_en||n.name_original})),Qe=l=>{if(typeof l!="number")return;const n=Math.floor(l/60),E=l%60;return"".concat(n," —á. ").concat(E," –º–∏–Ω.")},Re=f(!1),Xe=f({top:"0px",left:"0px"}),Je=l=>{Re.value=!0,Xe.value={top:"".concat(l.pageY+10,"px"),left:"".concat(l.pageX-70,"px")}},$e=async()=>{try{const l=[o.value.name_ru||o.value.name_en||o.value.name_original,...o.value.year?[o.value.year]:[],...o.value.film_length?[Qe(o.value.film_length)]:[]];await navigator.clipboard.writeText(l.join(", ")),g.value.showNotification("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ")}catch(l){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",l)}},J=async(l=!0)=>{var n,E,G,ye,he,be,pe,_e;try{let $;if(_.value.startsWith("shiki")?$=await ls(_.value):$=await is(_.value,s.token),Array.isArray($)&&$.length===0)throw new Error("–î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–∏—Å–∫.");o.value=$,_.value.startsWith("shiki")?o.value={...o.value,title:o.value.name_ru||o.value.name_en,name_original:o.value.name_en,short_description:o.value.slogan}:o.value={...o.value,title:o.value.name_ru||o.value.name_en||o.value.name_original,kinopoisk_id:_.value},p.setHeaderContent({text:o.value.title,imageUrl:o.value.logo_url}),Ze();const oe={kp_id:_.value,title:((n=o.value)==null?void 0:n.name_ru)||((E=o.value)==null?void 0:E.name_en)||((G=o.value)==null?void 0:G.name_original),poster:((ye=o.value)==null?void 0:ye.poster_url)||((he=o.value)==null?void 0:he.cover_url)||((be=o.value)==null?void 0:be.screenshots[0]),year:(pe=o.value)==null?void 0:pe.year,type:(_e=o.value)==null?void 0:_e.type};if(_.value.startsWith("shiki"))if(o.value.screenshots&&o.value.screenshots.length>0){const xe=Math.floor(Math.random()*o.value.screenshots.length),Ke=o.value.screenshots[xe];w.updateMoviePoster(Ke)}else oe.poster&&w.updateMoviePoster(oe.poster);else oe.poster&&w.updateMoviePoster(oe.poster);if(j(()=>d.isHistoryAllowed).value&&oe.kp_id&&oe.title&&l)if(s.token)try{await fn(oe.kp_id,X.HISTORY)}catch(xe){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é:",xe)}else d.addToHistory({...oe})}catch($){const{message:oe,code:Ue}=Ce($);C.value=oe,k.value=Ue,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–ª—å–º–∞—Ö:",$)}},He=j(()=>{var l;return(l=o.value)==null?void 0:l.videos}),Me=j(()=>{var l;return Fe((l=o.value)==null?void 0:l.sequels_and_prequels)}),ge=j(()=>{var l;return Fe((l=o.value)==null?void 0:l.similars)}),et=()=>{var G;const l=((G=document.querySelector(".related-movies"))==null?void 0:G.clientWidth)||0,E=Math.floor(l/160)||10;F.value=Math.max(1,E)},tt=()=>{et()},Ve=l=>{if(l.altKey&&l.keyCode===84&&document.querySelector(".player-container")){const E=document.querySelector(".theater-mode-btn");E&&E.click()}},nt=l=>{l.button===1&&(l.preventDefault(),De(l))},De=async l=>{if(O.value!==null){O.value=null,re.value=!1;return}N.value=void 0,de.value=l.currentTarget,O.value="",re.value=!0;try{const n=await as(o.value.imdb_id);O.value=n.nudity_info}catch(n){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö:",n),O.value="–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ Parents Guide –Ω–∞ IMDb –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏."}finally{re.value=!1}},y=l=>{var n,E;if(O.value=null,N.value!==void 0){N.value=void 0;return}me.value=l.currentTarget,N.value=((n=o.value)==null?void 0:n.nudity_timings)===null?"":((E=o.value)==null?void 0:E.nudity_timings)||""},A=()=>{var l,n;O.value=null,N.value=((l=o.value)==null?void 0:l.nudity_timings)===null?"":((n=o.value)==null?void 0:n.nudity_timings)||""},Se=l=>{var E,G,ye,he,be,pe,_e,$,oe,Ue,xe,Ke,ht;return(ht={[X.FAVORITE]:((G=(E=o.value)==null?void 0:E.lists)==null?void 0:G.isFavorite)||!1,[X.HISTORY]:((he=(ye=o.value)==null?void 0:ye.lists)==null?void 0:he.isHistory)||!1,[X.LATER]:((pe=(be=o.value)==null?void 0:be.lists)==null?void 0:pe.isLater)||!1,[X.COMPLETED]:(($=(_e=o.value)==null?void 0:_e.lists)==null?void 0:$.isCompleted)||!1,[X.ABANDONED]:((Ue=(oe=o.value)==null?void 0:oe.lists)==null?void 0:Ue.isAbandoned)||!1,[X.WATCHING]:((Ke=(xe=o.value)==null?void 0:xe.lists)==null?void 0:Ke.isWatching)||!1}[l])!=null?ht:!1},qe=async l=>{if(!s.token){g.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:()=>b.push("/login")});return}try{const n={[X.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[X.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[X.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[X.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[X.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[X.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};Se(l)?(await rs(_.value,l),g.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(n[l]))):(await fn(_.value,l),g.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(n[l]))),await J(!1),le.value=!1}catch(n){const{message:E,code:G}=Ce(n);g.value.showNotification("".concat(E," ").concat(G))}},_t=l=>{const n=document.querySelector(".mobile-list-dropdown");n&&!n.contains(l.target)&&(le.value=!1)},st=l=>{const n=document.querySelector(".nudity-info-popup");n&&!n.contains(l.target)&&de.value&&!de.value.contains(l.target)&&(O.value=null)},ot=l=>{const n=document.querySelector(".nudity-info-popup");n&&!n.contains(l.target)&&me.value&&!me.value.contains(l.target)&&(N.value=void 0)};ut(async()=>{await J(),t.value=!1,document.addEventListener("keydown",Ve),window.addEventListener("resize",tt),setTimeout(et,100),document.addEventListener("click",_t),document.addEventListener("click",st,!0),document.addEventListener("click",ot,!0),window.selectedNudityTimings=Array.from(K.value),window.overlayNudityTimings=Array.from(z.value)}),Ut(async()=>{p.clearHeaderContent(),document.removeEventListener("keydown",Ve),window.removeEventListener("resize",tt),document.removeEventListener("click",_t),document.removeEventListener("click",st,!0),document.removeEventListener("click",ot,!0),delete window.selectedNudityTimings,delete window.overlayNudityTimings}),Ee(()=>c.params.kp_id,async l=>{l&&l!==_.value&&(p.clearHeaderContent(),_.value=l,I.value=null,await J(),t.value=!1)},{immediate:!0}),Ee(o,()=>{Ze()},{deep:!0}),Ee(O,l=>{l?document.addEventListener("click",st,!0):document.removeEventListener("click",st,!0)},{deep:!0}),Ee(N,l=>{l?document.addEventListener("click",ot,!0):document.removeEventListener("click",ot,!0)},{deep:!0}),Ee(K,()=>{window.selectedNudityTimings=Array.from(K.value)},{deep:!0}),Ee(z,()=>{window.overlayNudityTimings=Array.from(z.value)},{deep:!0}),ut(()=>{window.selectedNudityTimings=Array.from(K.value),window.overlayNudityTimings=Array.from(z.value);const l=setInterval(()=>{if(window.obsSources&&Array.isArray(window.obsSources)&&(Qt.value=window.obsSources),window.getOBSFiltersInfo){const n=window.getOBSFiltersInfo();n&&Array.isArray(n)&&h.updateObsSettings({filtersFound:n})}},1e3);Ut(()=>{clearInterval(l)})}),Ut(()=>{delete window.selectedNudityTimings,delete window.overlayNudityTimings});const se=l=>{var n,E;return((E=(n=o.value)==null?void 0:n.staff)==null?void 0:E.filter(G=>G.profession_key===l))||[]},xt=async()=>{try{await navigator.clipboard.writeText(O.value),g.value.showNotification("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω")}catch(l){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",l),g.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞")}finally{O.value=null}},Rt=async()=>{if(N.value.length!==0)try{const l=N.value.map(n=>"".concat(n.timing_text," (by @").concat(n.username,")")).join("\n").concat("\nReYohoho\n");await navigator.clipboard.writeText(l),g.value.showNotification("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω")}catch(l){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",l),g.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞")}finally{N.value=void 0}},M=()=>{const l=encodeURIComponent(O.value);window.open("https://translate.google.com/?sl=en&tl=ru&text=".concat(l),"_blank"),O.value=null},R=f(""),q=f(!1),Z=j(()=>{if(!R.value.trim())return[];try{return St(R.value,!0)||[]}catch(l){return console.error("Error parsing timing text:",l),[]}}),H=j(()=>R.value.trim()),ie=l=>s.user&&l.user_id&&l.user_id===s.user.id,Pe=()=>{if(!s.token){g.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a> –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–∞–π–º–∏–Ω–≥–æ–≤',5e3,{onClick:()=>b.push("/login")});return}je.value=null,R.value="",wt.value=!0},vt=l=>{je.value=l,R.value=l.timing_text,wt.value=!0},Pt=()=>{wt.value=!1,je.value=null,R.value=""},En=async()=>{if(!(!H.value||q.value))try{q.value=!0,await cs(_.value,R.value),g.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –¥–æ–±–∞–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ!"),R.value="",Pt(),await J(!1),A()}catch(l){const{message:n}=Ce(l);g.value.showNotification(n,5e3)}finally{q.value=!1}},Ln=async()=>{if(!(!H.value||q.value||!je.value))try{q.value=!0,await ds(je.value.id,R.value),g.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ–±–Ω–æ–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ!"),Pt(),await J(!1),A()}catch(l){const{message:n}=Ce(l);g.value.showNotification(n,5e3)}finally{q.value=!1}},Mn=async l=>{if(confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ç–∞–π–º–∏–Ω–≥?"))try{await fs(l),g.value.showNotification("–¢–∞–π–º–∏–Ω–≥ —É–¥–∞–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ!"),await J(!1),A()}catch(n){const{message:E}=Ce(n);g.value.showNotification(E,5e3)}},In=l=>{Ct.value=l,ze.value="",jt.value=!0},Wt=()=>{jt.value=!1,ze.value="",Ct.value=null},Sn=async()=>{if(!(!ze.value.trim()||ft.value||!Ct.value))try{ft.value=!0,await ms(Ct.value,ze.value),g.value.showNotification("–ñ–∞–ª–æ–±–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!"),Wt()}catch(l){const{message:n}=Ce(l);g.value.showNotification(n,5e3)}finally{ft.value=!1}},Tn=async()=>{try{const{submissions:l}=await us();Et.value=l,Lt.value=!0}catch(l){const{message:n}=Ce(l);g.value.showNotification(n)}},wt=f(!1),je=f(null),jt=f(!1),ze=f(""),Ct=f(null),ft=f(!1),Et=f([]),Lt=f(!1),gt=f(!1),lt=f([]),it=f(!1),ce=f(!1),Te=f(null),Be=f(!1),Ne=f(!1),Kt=f(!1),kt=f(!1),Mt=j({get:()=>h.obsSettings.enabled,set:l=>h.updateObsSettings({enabled:l})}),Gt=j({get:()=>h.obsSettings.host,set:l=>h.updateObsSettings({host:l})}),Yt=j({get:()=>h.obsSettings.port,set:l=>h.updateObsSettings({port:l})}),Zt=j({get:()=>h.obsSettings.password,set:l=>h.updateObsSettings({password:l})}),at=j(()=>h.obsSettings.connected),Qt=f([]),yt=j(()=>h.obsSettings.filtersFound),We=j({get:()=>h.obsSettings.selectedFilterId,set:l=>h.setObsSelectedFilter(l)}),rt=j(()=>We.value?yt.value.find(l=>l.id===We.value):null),Xt=j({get:()=>h.obsSettings.showObsInOverlay,set:l=>h.updateObsSettings({showObsInOverlay:l})}),xn=async l=>{if(!ce.value)try{ce.value=!0,Te.value=l,Be.value=!0,Ne.value=!1,await gs(l);const n=lt.value.find(E=>E.id===l);n&&(n.status="approved"),g.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ–¥–æ–±—Ä–µ–Ω")}catch(n){const{message:E}=Ce(n);g.value.showNotification("–û—à–∏–±–∫–∞: ".concat(E))}finally{ce.value=!1,Te.value=null,Be.value=!1,Ne.value=!1}},Rn=async l=>{if(!ce.value)try{ce.value=!0,Te.value=l,Be.value=!1,Ne.value=!1,await ks(l);const n=lt.value.find(E=>E.id===l);n&&(n.status="rejected"),g.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ—Ç–∫–ª–æ–Ω–µ–Ω")}catch(n){const{message:E}=Ce(n);g.value.showNotification("–û—à–∏–±–∫–∞: ".concat(E))}finally{ce.value=!1,Te.value=null,Be.value=!1,Ne.value=!1}},Pn=async l=>{if(!ce.value)try{ce.value=!0,Te.value=l,Be.value=!1,Ne.value=!0,await ys(l);const n=lt.value.find(E=>E.id===l);n&&(n.status="clean_text"),g.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ—Ç–º–µ—á–µ–Ω –∫–∞–∫ clean_text")}catch(n){const{message:E}=Ce(n);g.value.showNotification("–û—à–∏–±–∫–∞: ".concat(E))}finally{ce.value=!1,Te.value=null,Be.value=!1,Ne.value=!1}},jn=async()=>{if(!it.value)try{it.value=!0,gt.value=!0;const{timings:l}=await vs();lt.value=l}catch(l){const{message:n}=Ce(l);g.value.showNotification(n),gt.value=!1}finally{it.value=!1}},Bn=(l,n)=>{const E=[2,0,1,1,1,2];return n[l%100>4&&l%100<20?2:E[Math.min(l%10,5)]]},Nn=l=>{if(!Et.value.length)return 0;const n=Math.max(...Et.value.map(E=>E.approved_submissions_count));return l/n*100},Jt=j(()=>lt.value),Un=l=>{K.value.has(l)?K.value.delete(l):K.value.add(l)},ke=f({});function An(l){if(ke.value[l.id])ke.value={...ke.value,[l.id]:!1};else{const n=St(l.timing_text);ke.value={...ke.value,[l.id]:n}}}const $t=j(()=>!!window.electronAPI);function On(){fe.value!==null&&Un(fe.value),en()}function en(){var l,n;T.value=!1,fe.value=null,N.value=((l=o.value)==null?void 0:l.nudity_timings)===null?"":((n=o.value)==null?void 0:n.nudity_timings)||""}function Fn(l){if(!$t.value){g.value?g.value.showNotification("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"):alert("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏");return}T.value=!0,tn(l)}function Hn(l){if(!$t.value){g.value?g.value.showNotification("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"):alert("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏");return}tn(l)}const tn=l=>{z.value.has(l)?z.value.delete(l):z.value.add(l)};function Vn(){ve.value=!ve.value}function Dn(){V.value=!V.value}function Bt(){const l=[];if(N.value&&Array.isArray(N.value)){for(const n of N.value)if(K.value.has(n.id)){const E=St(n.timing_text);E&&E.length>0&&l.push(...E)}}return l}function Nt(){const l=[];if(N.value&&Array.isArray(N.value)&&N.value.length>0){for(const n of N.value)if(z.value.has(n.id)){const E=St(n.timing_text);E&&E.length>0&&l.push(...E)}}return l}const qn=()=>{Mt.value&&nn()},nn=async()=>{var l,n,E;if(!kt.value){kt.value=!0;try{window.connectToOBS?(await window.connectToOBS(),setTimeout(()=>{window.obsSources&&(Qt.value=window.obsSources)},1e3),(l=g.value)==null||l.showNotification("–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ OBS...")):(n=g.value)==null||n.showNotification("–ü–ª–µ–µ—Ä –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω")}catch(G){console.error("Error connecting to OBS:",G),(E=g.value)==null||E.showNotification("–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ OBS")}finally{kt.value=!1}}},zn=()=>{var l,n;if(!We.value){(l=g.value)==null||l.showNotification("–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∏–ª—å—Ç—Ä –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è");return}window.testOBSBlur?window.testOBSBlur(We.value):(n=g.value)==null||n.showNotification("OBS —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã")},Wn=()=>{var l,n;window.refreshOBSFilters?(window.refreshOBSFilters(),(l=g.value)==null||l.showNotification("–ü–æ–∏—Å–∫ —Ñ–∏–ª—å—Ç—Ä–æ–≤...")):(n=g.value)==null||n.showNotification("OBS —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã")},Kn=()=>{var l,n;We.value&&((n=g.value)==null||n.showNotification("–í—ã–±—Ä–∞–Ω —Ñ–∏–ª—å—Ç—Ä: ".concat((l=rt.value)==null?void 0:l.sourceName)))};return(l,n)=>{var G,ye,he,be,pe,_e,$,oe,Ue,xe,Ke,ht,sn,on,ln,an,rn,un;const E=ae("router-link");return i(),a(W,null,[e("div",Sl,[e("div",Tl,[(t.value||!o.value)&&!C.value?(i(),a("div",xl,[e("div",Rl,[n[29]||(n[29]=pt('<div class="movie-skeleton__header" data-v-de38ea3a><div class="movie-skeleton__title" data-v-de38ea3a></div></div><div class="movie-skeleton__ratings" data-v-de38ea3a><div class="movie-skeleton__rating-item" data-v-de38ea3a></div><div class="movie-skeleton__rating-item" data-v-de38ea3a></div><div class="movie-skeleton__rating-item" data-v-de38ea3a></div></div>',2)),e("div",Pl,[Y(_s)]),n[30]||(n[30]=pt('<div class="movie-skeleton__additional-info" data-v-de38ea3a><div class="movie-skeleton__section-title" data-v-de38ea3a></div><div class="movie-skeleton__info-list" data-v-de38ea3a><div class="movie-skeleton__info-item" data-v-de38ea3a></div><div class="movie-skeleton__info-item" data-v-de38ea3a></div><div class="movie-skeleton__info-item" data-v-de38ea3a></div><div class="movie-skeleton__info-item" data-v-de38ea3a></div><div class="movie-skeleton__info-item" data-v-de38ea3a></div></div></div><div class="movie-skeleton__description" data-v-de38ea3a><div class="movie-skeleton__description-line" data-v-de38ea3a></div><div class="movie-skeleton__description-line" data-v-de38ea3a></div><div class="movie-skeleton__description-line" data-v-de38ea3a></div><div class="movie-skeleton__description-line" data-v-de38ea3a></div></div>',2))])])):v("",!0),C.value?(i(),Ge(ss,{key:1,message:C.value,code:k.value},null,8,["message","code"])):v("",!0),C.value?(i(),a("div",jl,[(i(),Ge(yn,{key:_.value,"kp-id":_.value,"movie-info":o.value,"onUpdate:movieInfo":J},null,8,["kp-id","movie-info"]))])):v("",!0),o.value&&!t.value?(i(),a("div",Bl,[e("div",Nl,[o.value.logo_url?(i(),a("div",{key:0,class:"content-logo",onMousemove:Je,onMouseleave:n[0]||(n[0]=u=>Re.value=!1),onClick:$e},[e("img",{src:o.value.logo_url,alt:"–õ–æ–≥–æ—Ç–∏–ø —Ñ–∏–ª—å–º–∞",class:"content-logo"},null,8,Ul)],32)):(i(),a("div",{key:1,onMousemove:Je,onMouseleave:n[1]||(n[1]=u=>Re.value=!1),onClick:$e},[e("h1",Al,m(o.value.title),1)],32)),te(e("div",{class:"title-copy-tooltip",style:Ot(Xe.value)}," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ",4),[[Tt,Re.value]])]),o.value.kinopoisk_id||o.value.title||o.value.imdb_id||o.value.rating_imdb||o.value.shikimori_id?(i(),a("div",Ol,[o.value.kinopoisk_id?(i(),Ge(hs,{key:o.value.kinopoisk_id,"kp-id":o.value.kinopoisk_id,"show-dash":!0},null,8,["kp-id"])):v("",!0),o.value.kinopoisk_id?(i(),a("div",Fl,[e("a",{href:"https://www.kinopoisk.ru/film/".concat(o.value.kinopoisk_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:o.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(ue(o.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[n[31]||(n[31]=e("img",{src:gn,alt:"–ö–ü",class:"rating-logo"},null,-1)),e("span",{class:x(["rating-value",D(It)(o.value.rating_kinopoisk)])},m(o.value.rating_kinopoisk?o.value.rating_kinopoisk:"‚Äî"),3),n[32]||(n[32]=e("img",{src:bt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Hl)])):v("",!0),!o.value.kinopoisk_id&&o.value.title?(i(),a("div",Vl,[e("a",{href:"https://www.kinopoisk.ru/index.php?kp_query=".concat(encodeURIComponent(o.value.title+(o.value.year?" "+o.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:o.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(ue(o.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[n[33]||(n[33]=e("img",{src:gn,alt:"–ö–ü",class:"rating-logo"},null,-1)),e("span",{class:x(["rating-value",D(It)(o.value.rating_kinopoisk)])},m(o.value.rating_kinopoisk?o.value.rating_kinopoisk:"‚Äî"),3),n[34]||(n[34]=e("img",{src:bt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Dl)])):v("",!0),o.value.imdb_id?(i(),a("div",ql,[e("a",{href:"https://www.imdb.com/title/".concat(o.value.imdb_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:o.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(ue(o.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[n[35]||(n[35]=e("img",{src:kn,alt:"IMDb",class:"rating-logo"},null,-1)),e("span",{class:x(["rating-value",D(It)(o.value.rating_imdb)])},m(o.value.rating_imdb?o.value.rating_imdb:"‚Äî"),3),n[36]||(n[36]=e("img",{src:bt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,zl)])):v("",!0),!o.value.imdb_id&&o.value.title?(i(),a("div",Wl,[e("a",{href:"https://www.imdb.com/find/?q=".concat(encodeURIComponent(o.value.title+(o.value.year?" "+o.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:o.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(ue(o.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[n[37]||(n[37]=e("img",{src:kn,alt:"IMDb",class:"rating-logo"},null,-1)),e("span",{class:x(["rating-value",D(It)(o.value.rating_imdb)])},m(o.value.rating_imdb?o.value.rating_imdb:"‚Äî"),3),n[38]||(n[38]=e("img",{src:bt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Kl)])):v("",!0),o.value.shikimori_id?(i(),a("div",Gl,[e("a",{href:"https://shikimori.one/animes/".concat(o.value.shikimori_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},n[39]||(n[39]=[e("img",{src:bs,alt:"Shiki",class:"rating-logo"},null,-1),e("img",{src:bt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,Yl)])):v("",!0),o.value.imdb_id?(i(),a("button",{key:6,class:"nudity-info-btn parents-guide-btn",onClick:n[2]||(n[2]=u=>De(u)),onMousedown:n[3]||(n[3]=u=>nt(u)),title:O.value?"–°–∫—Ä—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é":"–ü–æ–∫–∞–∑–∞—Ç—å Parents Guide –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ü–µ–Ω–∞—Ö"},[n[40]||(n[40]=e("span",{class:"desktop-text"},"Parents Guide",-1)),n[41]||(n[41]=e("span",{class:"mobile-text"},"PG",-1)),re.value?(i(),a("i",Xl)):(i(),a("i",Ql))],40,Zl)):v("",!0),e("button",{class:"nudity-info-btn",onClick:n[4]||(n[4]=u=>y(u)),title:N.value!==void 0?"–°–∫—Ä—ã—Ç—å —Ç–∞–π–º–∏–Ω–≥–∏":"–ü–æ–∫–∞–∑–∞—Ç—å —Ç–∞–π–º–∏–Ω–≥–∏ —Å—Ü–µ–Ω 18+(–¥–ª—è —Ç–≤–∏—á–∞, –º–∏–≥–∞–Ω–∏–µ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö)"},[e("i",{class:x(["fa-regular fa-clock",{"text-red":ne.value,"text-red-blink":ct.value}])},null,2)],8,Jl)])):v("",!0),(i(),Ge(yn,{key:_.value,"kp-id":_.value,"movie-info":o.value,"onUpdate:movieInfo":J},null,8,["kp-id","movie-info"])),D(d).isMobile?(i(),a("div",$l,[e("button",{class:x(["mobile-list-toggle",{}]),onClick:n[5]||(n[5]=u=>le.value=!le.value)},[e("span",{class:x(["material-icons",{active:Ye.value}])},m(Ye.value?"bookmark_added":"bookmark_border"),3),n[42]||(n[42]=e("span",{class:"button-label"},"–î–æ–±–∞–≤–∏—Ç—å –≤ —Å–ø–∏—Å–æ–∫",-1)),e("span",{class:x(["material-icons dropdown-arrow",{expanded:le.value}])},"expand_more",2)]),te(e("div",ei,[e("button",{class:x(["mobile-list-btn",{}]),onClick:n[6]||(n[6]=u=>qe(D(X).FAVORITE))},[e("span",{class:x(["material-icons",{active:(ye=(G=o.value)==null?void 0:G.lists)==null?void 0:ye.isFavorite}])},m((be=(he=o.value)==null?void 0:he.lists)!=null&&be.isFavorite?"favorite":"favorite_border"),3),n[43]||(n[43]=e("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))]),e("button",{class:x(["mobile-list-btn",{}]),onClick:n[7]||(n[7]=u=>qe(D(X).WATCHING))},[e("span",{class:x(["material-icons",{active:(_e=(pe=o.value)==null?void 0:pe.lists)==null?void 0:_e.isWatching}])},m((oe=($=o.value)==null?void 0:$.lists)!=null&&oe.isWatching?"visibility":"visibility_off"),3),n[44]||(n[44]=e("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))]),e("button",{class:x(["mobile-list-btn",{}]),onClick:n[8]||(n[8]=u=>qe(D(X).LATER))},[e("span",{class:x(["material-icons",{active:(xe=(Ue=o.value)==null?void 0:Ue.lists)==null?void 0:xe.isLater}])},"watch_later",2),n[45]||(n[45]=e("span",{class:"button-label"},"–ü–æ–∑–∂–µ",-1))]),e("button",{class:x(["mobile-list-btn",{}]),onClick:n[9]||(n[9]=u=>qe(D(X).COMPLETED))},[e("span",{class:x(["material-icons",{active:(ht=(Ke=o.value)==null?void 0:Ke.lists)==null?void 0:ht.isCompleted}])},m((on=(sn=o.value)==null?void 0:sn.lists)!=null&&on.isCompleted?"check_circle":"check_circle_outline"),3),n[46]||(n[46]=e("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))]),e("button",{class:x(["mobile-list-btn",{}]),onClick:n[10]||(n[10]=u=>qe(D(X).ABANDONED))},[e("span",{class:x(["material-icons",{active:(an=(ln=o.value)==null?void 0:ln.lists)==null?void 0:an.isAbandoned}])},"not_interested",2),n[47]||(n[47]=e("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))])],512),[[Tt,le.value]])])):v("",!0),e("meta",{name:"title-and-year",content:o.value.type==="FILM"&&o.value.year?"".concat(o.value.title," (").concat(o.value.year,")"):o.value.title},null,8,ti),o.value.name_original?(i(),a("meta",{key:2,name:"original-title",content:o.value.name_original},null,8,ni)):v("",!0),e("div",si,[n[58]||(n[58]=e("h2",{class:"additional-info-title"},"–ü–æ–¥—Ä–æ–±–Ω–µ–µ",-1)),e("div",oi,[o.value.poster_url?(i(),a("div",li,[e("a",{href:o.value.poster_url,target:"_blank",rel:"noopener noreferrer"},[e("img",{src:o.value.poster_url,alt:"–ü–æ—Å—Ç–µ—Ä —Ñ–∏–ª—å–º–∞",class:"movie-poster"},null,8,ai)],8,ii)])):v("",!0),e("div",ri,[e("ul",ui,[o.value.type&&D(mn)[o.value.type]?(i(),a("li",di,[n[48]||(n[48]=e("strong",null,"–¢–∏–ø:",-1)),U(" "+m(D(mn)[o.value.type]),1)])):v("",!0),o.value.year?(i(),a("li",ci,[n[49]||(n[49]=e("strong",null,"–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞:",-1)),U(" "+m(o.value.year),1)])):v("",!0),o.value.title?(i(),a("li",mi,[n[50]||(n[50]=e("strong",null,"–ù–∞–∑–≤–∞–Ω–∏–µ:",-1)),U(" "+m(o.value.title),1)])):v("",!0),o.value.name_original?(i(),a("li",vi,[n[51]||(n[51]=e("strong",null,"–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:",-1)),U(" "+m(o.value.name_original),1)])):v("",!0),o.value.slogan?(i(),a("li",fi,[n[52]||(n[52]=e("strong",null,"–°–ª–æ–≥–∞–Ω:",-1)),U(" "+m(o.value.slogan),1)])):v("",!0),o.value.production_companies?(i(),a("li",gi,[n[53]||(n[53]=e("strong",null,"–ü—Ä–æ–¥–∞–∫—à–Ω:",-1)),U(" "+m(o.value.production_companies),1)])):v("",!0),(rn=o.value.countries)!=null&&rn.length?(i(),a("li",ki,[n[54]||(n[54]=e("strong",null,"–°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞:",-1)),U(" "+m(o.value.countries.map(u=>u.country).join(", ")),1)])):v("",!0),(un=o.value.genres)!=null&&un.length?(i(),a("li",yi,[n[55]||(n[55]=e("strong",null,"–ñ–∞–Ω—Ä—ã:",-1)),U(" "+m(o.value.genres.map(u=>u.genre).join(", ")),1)])):v("",!0),o.value.film_length?(i(),a("li",hi,[n[56]||(n[56]=e("strong",null,"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:",-1)),U(" "+m(Qe(o.value.film_length)),1)])):v("",!0),o.value.rating_mpaa||o.value.rating_age_limits?(i(),a("li",bi,[o.value.rating_mpaa?(i(),a("div",pi,[n[57]||(n[57]=e("strong",null,"MPAA",-1)),e("span",null,m(o.value.rating_mpaa.toUpperCase()),1)])):v("",!0),o.value.rating_age_limits?(i(),a("div",_i,[e("strong",null,m(o.value.rating_age_limits.replace("age",""))+"+",1)])):v("",!0)])):v("",!0)]),e("div",wi,[o.value.description?(i(),a("p",Ci,m(o.value.description),1)):v("",!0)])])])]),mt.value?(i(),a("div",Ei,[(i(),Ge(Il,{"movie-id":_.value,key:_.value},null,8,["movie-id"]))])):v("",!0),o.value.staff?(i(),a("div",Li,[e("div",Mi,[se("ACTOR").length?(i(),a("div",Ii,[n[59]||(n[59]=e("h3",{class:"additional-info-title"},"–ê–∫—Ç—ë—Ä—ã",-1)),e("div",Si,[(i(!0),a(W,null,ee(se("ACTOR").slice(0,12),u=>(i(),a("div",{key:u.staff_id,class:"staff-item"},[e("a",{href:"https://www.kinopoisk.ru/name/".concat(u.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-link",title:u.description||""},[e("img",{src:u.poster_url,alt:u.name_ru,class:"staff-photo"},null,8,xi),e("span",Ri,m(u.name_ru||u.name_en),1),u.description?(i(),a("span",Pi,m(u.description),1)):v("",!0)],8,Ti)]))),128)),e("a",{class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(_.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(se("ACTOR").length," –∞–∫—Ç–µ—Ä–æ–≤")}," +"+m(se("ACTOR").length-12),9,ji)])])):v("",!0),se("DIRECTOR").length?(i(),a("div",Bi,[n[60]||(n[60]=e("h3",{class:"additional-info-title"},"–†–µ–∂–∏—Å—Å—ë—Ä—ã",-1)),e("div",Ni,[e("div",Ui,[(i(!0),a(W,null,ee(se("DIRECTOR").slice(0,5),u=>(i(),a("a",{key:u.staff_id,href:"https://www.kinopoisk.ru/name/".concat(u.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},m(u.name_ru||u.name_en),9,Ai))),128)),se("DIRECTOR").length>5?(i(),a("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(_.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(se("DIRECTOR").length," —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–≤")}," +"+m(se("DIRECTOR").length-5),9,Oi)):v("",!0)])])])):v("",!0),se("PRODUCER").length?(i(),a("div",Fi,[n[61]||(n[61]=e("h3",{class:"additional-info-title"},"–ü—Ä–æ–¥—é—Å–µ—Ä—ã",-1)),e("div",Hi,[e("div",Vi,[(i(!0),a(W,null,ee(se("PRODUCER").slice(0,5),u=>(i(),a("a",{key:u.staff_id,href:"https://www.kinopoisk.ru/name/".concat(u.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},m(u.name_ru||u.name_en),9,Di))),128)),se("PRODUCER").length>5?(i(),a("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(_.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(se("PRODUCER").length," –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤")}," +"+m(se("PRODUCER").length-5),9,qi)):v("",!0)])])])):v("",!0)])])):v("",!0),He.value.length&&S.value?(i(),a("div",zi,[Y(js,{videos:He.value,"active-video-index":I.value,onSelect:l.playTrailer},null,8,["videos","active-video-index","onSelect"])])):v("",!0),Me.value.length?(i(),a("div",Wi,[n[62]||(n[62]=e("h2",null,"–°–∏–∫–≤–µ–ª—ã –∏ –ø—Ä–∏–∫–≤–µ–ª—ã",-1)),Y(D(hn),{"movies-list":L.value?Me.value:Me.value.slice(0,F.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),Me.value.length>F.value?(i(),a("a",{key:0,class:"expand-circle-button",onClick:n[11]||(n[11]=u=>L.value=!L.value),title:"".concat(L.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(Me.value.length,")")},m(L.value?"‚àí":"+".concat(Me.value.length-F.value)),9,Ki)):v("",!0)])):v("",!0),ge.value.length?(i(),a("div",Gi,[n[63]||(n[63]=e("h2",null,"–ü–æ—Ö–æ–∂–∏–µ",-1)),Y(D(hn),{"movies-list":P.value?ge.value:ge.value.slice(0,F.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),ge.value.length>F.value?(i(),a("a",{key:0,class:"expand-circle-button",onClick:n[12]||(n[12]=u=>P.value=!P.value),title:"".concat(P.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(ge.value.length,")")},m(P.value?"‚àí":"+".concat(ge.value.length-F.value)),9,Yi)):v("",!0)])):v("",!0)])):v("",!0)])]),Y(wn,{ref_key:"notificationRef",ref:g},null,512),O.value!==null?(i(),a("div",Zi,[e("div",Qi,[re.value?(i(),a("div",Xi,n[64]||(n[64]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),e("span",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏...",-1)]))):(i(),a("div",Ji,m(O.value),1))]),e("div",$i,[e("a",{href:"https://www.imdb.com/title/".concat(o.value.imdb_id,"/parentalguide"),target:"_blank",rel:"noopener noreferrer",class:"nudity-info-button"},n[65]||(n[65]=[e("i",{class:"fas fa-external-link-alt"},null,-1),e("span",null,"Parents Guide",-1)]),8,ea),e("button",{class:"nudity-info-button",onClick:xt},n[66]||(n[66]=[e("i",{class:"fas fa-copy"},null,-1),e("span",null,"Copy",-1)])),e("button",{class:"nudity-info-button",onClick:M},n[67]||(n[67]=[e("i",{class:"fas fa-language"},null,-1),e("span",null,"Translate",-1)]))])])):v("",!0),N.value!==void 0?(i(),a("div",ta,[e("div",na,[e("div",{class:"acknowledgment-table"},[n[70]||(n[70]=e("div",{class:"acknowledgment-header"},[e("i",{class:"fa-solid fa-heart"}),e("span",null,"–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏")],-1)),e("div",{class:"acknowledgment-content"},[n[69]||(n[69]=e("div",{class:"acknowledgment-row"},[e("a",{href:"https://www.twitch.tv/tanyabelkova",target:"_blank",rel:"noopener noreferrer",class:"twitch-link"},[e("i",{class:"fa-brands fa-twitch"}),e("span",null,"TanyaBelkova")]),e("span",{class:"acknowledgment-text"},"‚Äî –∑–∞ –æ—Å–Ω–æ–≤—É –±–∞–∑—ã —Ç–∞–π–º–∏–Ω–≥–æ–≤")],-1)),e("div",{class:"acknowledgment-row clickable",onClick:Tn},n[68]||(n[68]=[e("div",{class:"community-link"},[e("i",{class:"fa-solid fa-users"}),e("span",null,"–°–æ–æ–±—â–µ—Å—Ç–≤–æ")],-1),e("span",{class:"acknowledgment-text"},"‚Äî –∑–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–∏–Ω–≥–æ–≤",-1)]))])]),e("div",{class:x(["timings-content",{"no-border":!N.value}])},[n[82]||(n[82]=e("div",{class:"timings-warning"},[e("i",{class:"fas fa-exclamation-triangle"}),e("span",null,"–¢–∞–π–º–∏–Ω–≥–∏ –Ω–µ –º–æ–¥–µ—Ä–∏—Ä—É—é—Ç—Å—è - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–¥ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º")],-1)),e("div",sa,[N.value.length>0?(i(),a("div",oa,[(i(!0),a(W,null,ee(N.value,u=>{var Q;return i(),a("div",{key:u.id,class:x(["timing-entry",{pending:u.status==="pending","clean-text":u.status==="clean_text",selected:K.value.has(u.id)}])},[e("div",la,[e("div",ia,[u.status==="pending"?(i(),a("div",aa,"–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏")):v("",!0),u.status==="clean_text"?(i(),a("div",ra," –¢–∞–π–º–∏–Ω–≥–∏ —Ç–∞–∫–æ–≥–æ —Ç–∏–ø–∞ –Ω–µ –º–æ–¥–µ—Ä–∏—Ä—É—é—Ç—Å—è, –¥–ª—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Å–≤–µ—Ä—è–π—Ç–µ—Å—å —Å ParentsGuide ")):v("",!0)]),u.status!=="clean_text"&&((Q=o.value)==null?void 0:Q.type)==="FILM"?(i(),a("div",ua,[e("button",{class:"nudity-info-button",onClick:we=>An(u)},m(ke.value[u.id]?"–°–∫—Ä—ã—Ç—å –ø–∞—Ä—Å–µ—Ä":"–ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä—Å–µ—Ä"),9,da),z.value.has(u.id)?(i(),a("button",{key:0,class:"nudity-info-button overlay-button",onClick:we=>Hn(u.id),title:"–£–¥–∞–ª–∏—Ç—å –∏–∑ –æ–≤–µ—Ä–ª–µ—è"},n[71]||(n[71]=[e("i",{class:"fas fa-eye-slash"},null,-1),e("span",null,"–£–¥–∞–ª–∏—Ç—å –∏–∑ –æ–≤–µ—Ä–ª–µ—è",-1)]),8,ca)):(i(),a("button",{key:1,class:"nudity-info-button overlay-button",onClick:we=>Fn(u.id),title:"–î–æ–±–∞–≤–∏—Ç—å –≤ –æ–≤–µ—Ä–ª–µ–π"},n[72]||(n[72]=[e("i",{class:"fas fa-eye"},null,-1),e("span",null,"–î–æ–±–∞–≤–∏—Ç—å –≤ –æ–≤–µ—Ä–ª–µ–π",-1)]),8,ma)),ie(u)?(i(),a(W,{key:2},[e("button",{class:"nudity-info-button edit-button",onClick:we=>vt(u),title:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–π–º–∏–Ω–≥"},n[73]||(n[73]=[e("i",{class:"fas fa-edit"},null,-1),e("span",null,"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å",-1)]),8,va),e("button",{class:"nudity-info-button delete-button",onClick:we=>Mn(u.id),title:"–£–¥–∞–ª–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥"},n[74]||(n[74]=[e("i",{class:"fas fa-trash"},null,-1),e("span",null,"–£–¥–∞–ª–∏—Ç—å",-1)]),8,fa)],64)):v("",!0),ie(u)?v("",!0):(i(),a("button",{key:3,class:"nudity-info-button report-button",onClick:we=>In(u.id),title:"–ü–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è –Ω–∞ —Ç–∞–π–º–∏–Ω–≥"},n[75]||(n[75]=[e("i",{class:"fas fa-flag"},null,-1),e("span",null,"–ü–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è",-1)]),8,ga))])):v("",!0),e("div",{class:x(["timing-hover-container",{blurred:u.status==="pending"}])},[e("span",ka,m(u.timing_text),1),n[76]||(n[76]=e("br",null,null,-1)),e("span",ya,[U(" by "+m(u.username)+" ",1),u.user_id&&u.user_id!==0?(i(),a("i",ha)):v("",!0)])],2),ke.value[u.id]&&Array.isArray(ke.value[u.id])?(i(),a("div",ba,[n[77]||(n[77]=e("b",null,"–ü–∞—Ä—Å–µ—Ä:",-1)),ke.value[u.id].length===0?(i(),a("span",pa,"–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å")):(i(),a("span",_a,[(i(!0),a(W,null,ee(ke.value[u.id],(we,dn)=>(i(),a("span",{key:dn}," ["+m(D(Ae)(we[0]))+" - "+m(D(Ae)(we[1]))+"]"+m(dn<ke.value[u.id].length-1?", ":""),1))),128))]))])):v("",!0)])],2)}),128))])):(i(),a("div",wa,m("–ó–∞–ø–∏—Å–µ–π –æ —Ç–∞–π–º–∏–Ω–≥–∞—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")))]),ve.value&&K.value.size>0?(i(),a("div",Ca,[e("h4",Ea," –û–±—â–∏–π –ø–∞—Ä—Å–µ—Ä ("+m(K.value.size)+" —Ç–∞–π–º–∏–Ω–≥–æ–≤): ",1),e("div",La,[Bt().length===0?(i(),a("span",Ma,"–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ç–∞–π–º–∏–Ω–≥–∏")):(i(),a("span",Ia,[(i(!0),a(W,null,ee(Bt(),(u,Q)=>(i(),a("span",{key:Q}," ["+m(D(Ae)(u[0]))+" - "+m(D(Ae)(u[1]))+"]"+m(Q<Bt().length-1?", ":""),1))),128))]))])])):v("",!0),V.value&&z.value.size>0?(i(),a("div",Sa,[e("h4",Ta," –ü–∞—Ä—Å–µ—Ä –æ–≤–µ—Ä–ª–µ—è ("+m(z.value.size)+" —Ç–∞–π–º–∏–Ω–≥–æ–≤): ",1),e("div",xa,[Nt().length===0?(i(),a("span",Ra,"–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ç–∞–π–º–∏–Ω–≥–∏")):(i(),a("span",Pa,[(i(!0),a(W,null,ee(Nt(),(u,Q)=>(i(),a("span",{key:Q}," ["+m(D(Ae)(u[0]))+" - "+m(D(Ae)(u[1]))+"]"+m(Q<Nt().length-1?", ":""),1))),128))]))])])):v("",!0),e("div",ja,[N.value.length>0?(i(),a("button",{key:0,class:"nudity-info-button",onClick:Rt},n[78]||(n[78]=[e("i",{class:"fas fa-copy"},null,-1),e("span",null,"–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å",-1)]))):v("",!0),K.value.size>0?(i(),a("button",{key:1,class:"nudity-info-button",onClick:Vn},[n[79]||(n[79]=e("i",{class:"fas fa-eye"},null,-1)),e("span",null,"–û–±—â–∏–π –ø–∞—Ä—Å–µ—Ä ("+m(K.value.size)+")",1)])):v("",!0),z.value.size>0?(i(),a("button",{key:2,class:"nudity-info-button overlay-button",onClick:Dn},[n[80]||(n[80]=e("i",{class:"fas fa-layer-group"},null,-1)),e("span",null,"–ü–∞—Ä—Å–µ—Ä –æ–≤–µ—Ä–ª–µ—è ("+m(z.value.size)+")",1)])):v("",!0),e("button",{class:"nudity-info-button",onClick:Pe},n[81]||(n[81]=[e("i",{class:"fas fa-plus"},null,-1),e("span",null,"–î–æ–±–∞–≤–∏—Ç—å/–¥–æ–ø–æ–ª–Ω–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥",-1)]))])],2)])])):v("",!0),wt.value?(i(),a("div",Ba,[e("div",Na,[e("div",Ua,[e("h3",null,m(je.value?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–π–º–∏–Ω–≥":"–î–æ–±–∞–≤–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥"),1),e("button",{class:"close-modal-btn",onClick:Pt},n[83]||(n[83]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",Aa,[te(e("textarea",{"onUpdate:modelValue":n[13]||(n[13]=u=>R.value=u),placeholder:"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ñ–∏–ª—å–º–∞(–≤ [] —Å–∫–æ–±–∫–∞—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä [01:36] –∏–ª–∏ [01:36:55]), –∫ –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã –ø—Ä–∏–ª–∞–≥–∞–µ—Ç–µ —Ç–∞–π–º–∏–Ω–≥\n–¢–∫ –∂–µ –¥–ª—è –∞–≤—Ç–æ–±–ª—é—Ä–∞ –ø—Ä–æ—à—É –≤—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏ —É–∫–∞–∑—ã–≤–∞—Ç—å –∫–∞–∫ –¥–∏–∞–ø–æ–∑–æ–Ω, –∞ –Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –≤—Ä–µ–º—è, –Ω–∞–ø—Ä–∏–º–µ—Ä 00:12:31-00:13:04 - —Ç–µ–∫—Å—Ç, –∞ –Ω–µ 00:12:31\n–î–ª—è —Å–µ—Ä–∏–∞–ª–æ–≤ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ —Å–µ–∑–æ–Ω –∏ –Ω–æ–º–µ—Ä —ç–ø–∏–∑–æ–¥–∞\n",class:"timing-textarea"},null,512),[[Ie,R.value]]),Z.value&&Z.value.length>0?(i(),a("div",Oa,[n[84]||(n[84]=e("div",{class:"timing-preview-header"},[e("i",{class:"fas fa-eye"}),e("span",null,"–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –ø–∞—Ä—Å–µ—Ä–∞")],-1)),e("div",Fa,[(i(!0),a(W,null,ee(Z.value,(u,Q)=>(i(),a("div",{key:Q,class:"timing-preview-item"},[e("span",Ha,m(D(Ae)(u[0]))+" - "+m(D(Ae)(u[1])),1),e("span",Va," ("+m(Math.round(u[1]-u[0]))+"—Å) ",1)]))),128))])])):v("",!0),e("div",Da,[e("button",{class:"submit-timing-btn",onClick:n[14]||(n[14]=u=>je.value?Ln():En()),disabled:!H.value||q.value},[q.value?(i(),a("i",za)):(i(),a("span",Wa,m(je.value?"–û–±–Ω–æ–≤–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥":"–î–æ–±–∞–≤–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥"),1))],8,qa)])])])])):v("",!0),jt.value?(i(),a("div",Ka,[e("div",Ga,[e("div",{class:"timing-modal-header"},[n[86]||(n[86]=e("h3",null,"–ü–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è –Ω–∞ —Ç–∞–π–º–∏–Ω–≥",-1)),e("button",{class:"close-modal-btn",onClick:Wt},n[85]||(n[85]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",Ya,[te(e("textarea",{"onUpdate:modelValue":n[15]||(n[15]=u=>ze.value=u),placeholder:"–û–ø–∏—à–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É –∂–∞–ª–æ–±—ã...",class:"timing-textarea",rows:"4"},null,512),[[Ie,ze.value]]),e("div",Za,[e("button",{class:"submit-timing-btn",onClick:Sn,disabled:!ze.value.trim()||ft.value},[ft.value?(i(),a("i",Xa)):(i(),a("span",Ja,"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∂–∞–ª–æ–±—É"))],8,Qa)])])])])):v("",!0),Lt.value?(i(),a("div",{key:4,class:"modal-overlay",onClick:n[18]||(n[18]=u=>Lt.value=!1)},[e("div",{class:"modal-content",onClick:n[17]||(n[17]=dt(()=>{},["stop"]))},[e("div",$a,[n[88]||(n[88]=e("h3",null,[U(" –¢–æ–ø –∞–≤—Ç–æ—Ä–æ–≤ —Ç–∞–π–º–∏–Ω–≥–æ–≤ "),e("span",{class:"hint-text"},[U("(–•–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —Å–≤–æ–π —Å—Ç—Ä–∏–º/—Å–æ—Ü—Å–µ—Ç–∏? –ù–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º –≤ "),e("a",{href:"https://t.me/reyohoho_sup",target:"_blank",rel:"noopener noreferrer"},"—Ç–µ–ª–µ–≥—Ä–∞–º"),U(")")])],-1)),e("div",er,[e("button",{class:"close-modal-btn",onClick:n[16]||(n[16]=u=>Lt.value=!1)},n[87]||(n[87]=[e("i",{class:"fas fa-times"},null,-1)]))])]),e("div",tr,[e("button",{class:"show-all-timings-btn",onClick:jn,disabled:it.value},[it.value?(i(),a("i",sr)):(i(),a("i",or)),n[89]||(n[89]=e("span",null,"–í—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏",-1))],8,nr),e("div",lr,[(i(!0),a(W,null,ee(Et.value,(u,Q)=>(i(),a("div",{key:u.username,class:"top-submitter-item"},[e("div",{class:x(["submitter-rank",{gold:Q===0,silver:Q===1,bronze:Q===2}])},m(Q+1),3),e("div",ir,[e("div",ar,[u.stream_link?(i(),a("a",{key:0,href:u.stream_link,target:"_blank",rel:"noopener noreferrer"},[U(m(u.username)+" ",1),n[90]||(n[90]=e("i",{class:"fa-brands fa-twitch"},null,-1))],8,rr)):(i(),a(W,{key:1},[U(m(u.username),1)],64))]),e("div",ur,m(u.approved_submissions_count)+" "+m(Bn(u.approved_submissions_count,["—Ñ–∏–ª—å–º","—Ñ–∏–ª—å–º–∞","—Ñ–∏–ª—å–º–æ–≤"])),1)]),e("div",dr,[e("div",{class:"contribution-bar",style:Ot({width:Nn(u.approved_submissions_count)+"%"})},null,4)])]))),128))])])])])):v("",!0),gt.value?(i(),a("div",{key:5,class:"modal-overlay",onClick:n[21]||(n[21]=u=>gt.value=!1)},[e("div",{class:"modal-content all-timings-modal",onClick:n[20]||(n[20]=dt(()=>{},["stop"]))},[e("div",cr,[n[92]||(n[92]=e("h3",null,"–í—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏",-1)),e("button",{class:"close-modal-btn",onClick:n[19]||(n[19]=u=>gt.value=!1)},n[91]||(n[91]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",mr,[it.value?(i(),a("div",vr,n[93]||(n[93]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),e("span",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö —Ç–∞–π–º–∏–Ω–≥–æ–≤...",-1)]))):lt.value.length===0?(i(),a("div",fr,n[94]||(n[94]=[e("p",null,"–¢–∞–π–º–∏–Ω–≥–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",-1)]))):Jt.value.length===0?(i(),a("div",gr,n[95]||(n[95]=[e("p",null,"–¢–∞–π–º–∏–Ω–≥–∏ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —Ñ–∏–ª—å—Ç—Ä—É –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",-1)]))):(i(),a("div",kr,[(i(!0),a(W,null,ee(Jt.value,u=>{var Q;return i(),a("div",{key:u.id,class:"timing-item"},[e("div",yr,[e("div",hr,[e("span",br,m(u.username),1),e("span",pr,m(D(_n)(u.submitted_at)),1)]),e("div",_r,[Y(E,{to:"/movie/".concat(u.kp_id),class:"timing-kp-id clickable",title:"–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ñ–∏–ª—å–º—É ".concat(u.kp_id)},{default:At(()=>[U(" KP: "+m(u.kp_id),1)]),_:2},1032,["to","title"]),(Q=D(s).user)!=null&&Q.is_admin&&u.status==="pending"?(i(),a("div",wr,[u.status==="pending"?(i(),a("button",{key:0,class:"approve-btn",onClick:we=>xn(u.id),disabled:ce.value,title:"–û–¥–æ–±—Ä–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥"},[Te.value===u.id&&Be.value?(i(),a("i",Er)):(i(),a("i",Lr))],8,Cr)):v("",!0),u.status==="pending"?(i(),a("button",{key:1,class:"reject-btn",onClick:we=>Rn(u.id),disabled:ce.value,title:"–û—Ç–∫–ª–æ–Ω–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥"},[Te.value===u.id&&!Be.value&&!Ne.value?(i(),a("i",Ir)):(i(),a("i",Sr))],8,Mr)):v("",!0),u.status==="pending"?(i(),a("button",{key:2,class:"clean-text-btn",onClick:we=>Pn(u.id),disabled:ce.value,title:"–û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ clean_text"},[Te.value===u.id&&Ne.value?(i(),a("i",xr)):(i(),a("i",Rr))],8,Tr)):v("",!0)])):v("",!0)])]),e("div",Pr,[e("pre",jr,m(u.timing_text),1)])])}),128))]))])])])):v("",!0),Kt.value?(i(),a("div",Br,[e("div",Nr,[e("div",Ur,[n[97]||(n[97]=e("h3",null,"–ù–∞—Å—Ç—Ä–æ–π–∫–∏ OBS WebSocket",-1)),e("button",{class:"close-modal-btn",onClick:n[22]||(n[22]=u=>Kt.value=!1)},n[96]||(n[96]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",Ar,[e("div",Or,[e("label",Fr,[te(e("input",{type:"checkbox","onUpdate:modelValue":n[23]||(n[23]=u=>Mt.value=u),onChange:qn},null,544),[[vn,Mt.value]]),n[98]||(n[98]=e("span",null,"–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–±–ª—é—Ä –≤ OBS",-1))]),n[99]||(n[99]=e("div",{class:"obs-setting-description"}," –ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ, –∞–≤—Ç–æ–±–ª—é—Ä –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è —á–µ—Ä–µ–∑ OBS WebSocket –≤–º–µ—Å—Ç–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –±–ª—é—Ä–∞ ",-1))]),Mt.value?(i(),a("div",Hr,[e("div",Vr,[n[100]||(n[100]=e("label",null,"–•–æ—Å—Ç OBS WebSocket:",-1)),te(e("input",{type:"text","onUpdate:modelValue":n[24]||(n[24]=u=>Gt.value=u),placeholder:"localhost",class:"obs-input"},null,512),[[Ie,Gt.value]])]),e("div",Dr,[n[101]||(n[101]=e("label",null,"–ü–æ—Ä—Ç OBS WebSocket:",-1)),te(e("input",{type:"number","onUpdate:modelValue":n[25]||(n[25]=u=>Yt.value=u),placeholder:"4455",class:"obs-input"},null,512),[[Ie,Yt.value]])]),e("div",qr,[n[102]||(n[102]=e("label",null,"–ü–∞—Ä–æ–ª—å (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω):",-1)),te(e("input",{type:"password","onUpdate:modelValue":n[26]||(n[26]=u=>Zt.value=u),placeholder:"–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –µ—Å–ª–∏ –ø–∞—Ä–æ–ª—å –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω",class:"obs-input"},null,512),[[Ie,Zt.value]])]),at.value?(i(),a("div",zr,[n[105]||(n[105]=e("label",null,"–í—ã–±–æ—Ä —Ñ–∏–ª—å—Ç—Ä–∞ –¥–ª—è –±–ª—é—Ä–∞:",-1)),yt.value.length===0?(i(),a("div",Wr," ‚ö†Ô∏è –§–∏–ª—å—Ç—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤ OBS. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–∞—Ö –µ—Å—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã. ")):(i(),a("div",Kr,[te(e("select",{"onUpdate:modelValue":n[27]||(n[27]=u=>We.value=u),onChange:Kn,class:"obs-filter-select"},[n[103]||(n[103]=e("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∏–ª—å—Ç—Ä",-1)),(i(!0),a(W,null,ee(yt.value,u=>(i(),a("option",{key:u.id,value:u.id},m(u.sourceName)+" - "+m(u.filterName)+" ("+m(u.sceneName)+") ",9,Gr))),128))],544),[[os,We.value]]),rt.value?(i(),a("div",Yr,[e("div",Zr,[e("strong",null,m(rt.value.filterName),1),n[104]||(n[104]=U(" –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ ")),e("strong",null,m(rt.value.sourceName),1)]),e("span",{class:x(["filter-status",{enabled:rt.value.enabled}])}," –°—Ç–∞—Ç—É—Å: "+m(rt.value.enabled?"‚úÖ –í–∫–ª—é—á–µ–Ω":"‚≠ï –û—Ç–∫–ª—é—á–µ–Ω"),3)])):v("",!0),e("div",Qr," üí° –ù–∞–π–¥–µ–Ω–æ "+m(yt.value.length)+" —Ñ–∏–ª—å—Ç—Ä–æ–≤. –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∏–ª—å—Ç—Ä –±–ª—é—Ä–∞. ",1)]))])):v("",!0),e("div",Xr,[e("label",Jr,[te(e("input",{type:"checkbox","onUpdate:modelValue":n[28]||(n[28]=u=>Xt.value=u)},null,512),[[vn,Xt.value]]),n[106]||(n[106]=e("span",null,"–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å OBS –≤ –≤–∏–¥–µ–æ –æ–≤–µ—Ä–ª–µ–µ",-1))])]),e("div",{class:x(["obs-status",{connected:at.value}])},m(at.value?"–ü–æ–¥–∫–ª—é—á–µ–Ω –∫ OBS":"–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ OBS"),3),e("div",$r,[e("button",{class:"obs-action-btn connect-btn",onClick:nn,disabled:kt.value},[kt.value?(i(),a("i",tu)):(i(),a("i",nu)),U(" "+m(at.value?"–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è":"–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è"),1)],8,eu),e("button",{class:"obs-action-btn test-btn",onClick:zn,disabled:!at.value||yt.value.length===0},n[107]||(n[107]=[e("i",{class:"fas fa-eye"},null,-1),U(" –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–ª—é—Ä ")]),8,su),e("button",{class:"obs-action-btn refresh-btn",onClick:Wn,disabled:!at.value},n[108]||(n[108]=[e("i",{class:"fas fa-sync"},null,-1),U(" –û–±–Ω–æ–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã ")]),8,ou)])])):v("",!0)])])])):v("",!0),Y(Es,{"is-open":T.value,message:"<span style='color: orange; font-weight: bold;'>–ê–≤—Ç–æ–±–ª—é—Ä —É–¥–∞–ª–µ–Ω –∏–∑-–∑–∞ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏(–ø–æ–∫–∞?)<br>–î–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –æ–≤–µ—Ä–ª–µ–π</span><br><br>–ü–µ—Ä–µ–¥ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ç–∞–π–º–∏–Ω–≥–∏ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ñ–∏–ª—å–º—É –≤ –ø–ª–µ–µ—Ä–µ! –ú—ã –Ω–µ –Ω–µ—Å—ë–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –≤ —Ç–∞–π–º–∏–Ω–≥–∞—Ö, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Ö –Ω–∞ —Å–≤–æ–π —Å—Ç—Ä–∞—Ö –∏ —Ä–∏—Å–∫ –∏ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏ —Ñ–∏–ª—å–º–∞!<br>–í –ø–ª–µ–µ—Ä–µ alloha –µ—Å–ª–∏ —Å–º–µ–Ω–∏—Ç–µ –æ–∑–≤—É—á–∫—É, —Ç–æ –≤—ã–∫–ª—é—á–∏—Ç–µ –∏ –≤–∫–ª—é—á–∏—Ç–µ –æ–≤–µ—Ä–ª–µ–π(—Å–Ω–∏–∑—É —Å–ø—Ä–∞–≤–∞ –ø–æ–¥ –ø–ª–µ–µ—Ä–æ–º), –∏–Ω–∞—á–µ –≤ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å!",onConfirm:On,onClose:en},null,8,["is-open"])],64)}}},yu=Oe(lu,[["__scopeId","data-v-de38ea3a"]]);export{yu as default};
