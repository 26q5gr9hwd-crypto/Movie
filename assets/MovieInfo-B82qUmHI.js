import{_ as Be,r as f,c as F,b as r,d as i,e,s as re,t as g,K as ge,g as p,L as Le,n as A,q as Ye,u as it,i as dt,N as yn,z as at,l as ze,o as Ge,O as st,x as He,E as kn,f as we,P as lt,m as ee,Q as le,y as de,U as J,R as bn,D as ct,S as he,V as Cn,W as pn,X as wn,Y as un,Z as _n,k as En,v as vt,$ as Mn,a0 as je,a1 as ot,a2 as In,a3 as Ln,a4 as Rn,a5 as Tn,a6 as cn,a7 as $n,a8 as An,a as Sn,a9 as dn,aa as Pn,ab as Un,ac as xn}from"./index-Dr-IGLUP.js";import{S as hn,_ as Hn,a as vn,b as mn,M as fn}from"./MovieList-B7ldvalC.js";import{N as rt}from"./ToastMessage-DAlK2i16.js";import{u as jn,S as Bn,a as Dn}from"./trailer-DoTOD4fI.js";const Qe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVR4nO2ZQUoDMRSGR7eewHoFsVS0HkUUXNXqASqK2EURBPFIVRe6c+UN1CvUXWvbT4KvMAwzNnnJdCrmg1BKad7/v7y0b5IkiUQiCwGoAx3gQjEugZ0qxTeAIX6MKjMBnBOGS62AVWAPOHVYdlMu9YArYOhphLeBT+ALmOKGEd2QubaAK+B2zngFxt4GgDXgGZjgR8ch5oEkCi8DkvlnRcYLV0Apfqw10M7JvPkV6AN3FmVwK+WyZRnvMEe8ef/ibECyb2o+zRuwnpQAxeLNivQ0BvYyE46qEJ/8fK4ycJKp/X4V4n0MdDNfukkqEO9jwP1LDgD7BeKPgmgp04CL+KUz4Cp+qQxoxC+NAdsNm4c0hWkukkUa8BGfegiadbFDq3/2UAZ8xc+QVvzMtqcKYkBaZ5/MN5xEl2DgLGDZ1KswsC09FPJqXTZoNm5oA6kyMGI2FxqfkluJ0uMTDfhBXAHiHvCCWEL8/RLqlv1MPCf+TSZ+13WC7KnEfWlqcwAeU7GNjnbiQsG5UC1ZAEAt1UMhOpquk6zknMy9l20C2AA+MnEHRo9msuOCs9EH4Fp5TVQ0rqVs0plH4re02Qh1Oq1lCjypsp+5H3gKcD/gykTirqnFZ/ZDy+OGxpapzD+QePrM/2KkKfcGPcv7AdvRkz23G1x4JPIP+AY3r/ywUk/2JAAAAABJRU5ErkJggg==",Nn="/reyohoho/assets/icon-shikimori-DGvXK9Jc.svg",ut=a=>{const t=document.createElement("div");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.backgroundColor="rgba(0, 0, 0, 0.8)",t.style.color="white",t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",t.style.fontSize="2rem",t.style.zIndex="99000",t.textContent=a,document.body.appendChild(t),setTimeout(()=>{document.body.removeChild(t)},2e3)},On={key:0},Vn={key:1},qn={class:"players-list"},Kn=["onClick"],Wn={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Fn={key:0},zn={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Yn={key:1},Gn={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Zn=["onClick"],Qn={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Xn={__name:"PlayerModal",props:{players:{type:Array,required:!0},selectedPlayer:{type:Object,default:null}},emits:["close","select"],setup(a,{emit:t}){const c=a,n=t,m=f(null),_=F(()=>c.players.filter(b=>!C(b)&&!s(b))),d=F(()=>c.players.some(b=>C(b))),E=F(()=>c.players.some(b=>s(b))),C=b=>b.key.toUpperCase().includes("HDREZKA"),s=b=>b.key.toUpperCase().includes("KODIK"),u=b=>b.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"").replace(/KODIK>/,"").trim(),k=b=>{n("select",b),n("close")},B=b=>c.selectedPlayer&&c.selectedPlayer.key===b.key,U=b=>c.selectedPlayer?b==="hdrezka"&&C(c.selectedPlayer)||b==="kodik"&&s(c.selectedPlayer):!1,z=b=>{m.value=b},te=()=>{m.value=null},S=b=>{let P=c.players.filter(R=>b==="hdrezka"&&C(R)||b==="kodik"&&s(R));return b==="kodik"?P.sort((R,V)=>u(R.translate).localeCompare(u(V.translate))):P},T=b=>S(b).some(P=>P.warning);return(b,P)=>(i(),r("div",{class:"modal",onClick:P[4]||(P[4]=Ye(R=>b.$emit("close"),["self"]))},[e("div",{class:"modal-content",onClick:P[3]||(P[3]=Ye(()=>{},["stop"]))},[e("button",{class:"close",onClick:P[0]||(P[0]=R=>b.$emit("close"))},"√ó"),m.value?(i(),r("h2",Vn,[e("button",{class:"back-btn",onClick:te},"‚Üê –ù–∞–∑–∞–¥"),re(" "+g(m.value==="hdrezka"?"ReYohoho - HDrezka":"Kodik"),1)])):(i(),r("h2",On,"–í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–µ–µ—Ä")),e("ul",qn,[m.value?(i(!0),r(ge,{key:1},Le(S(m.value),R=>(i(),r("li",{key:R.key},[e("button",{class:A(["player-item",{active:B(R)}]),onClick:V=>k(R)},[re(g(u(R.translate))+" ",1),R.warning?(i(),r("span",Qn,"warning")):p("",!0)],10,Zn)]))),128)):(i(),r(ge,{key:0},[(i(!0),r(ge,null,Le(_.value,R=>(i(),r("li",{key:R.key},[e("button",{class:A(["player-item",{active:B(R)}]),onClick:V=>k(R)},[re(g(u(R.translate))+" ",1),R.warning?(i(),r("span",Wn,"warning")):p("",!0)],10,Kn)]))),128)),d.value?(i(),r("li",Fn,[e("button",{class:A(["group-item",{active:U("hdrezka")}]),onClick:P[1]||(P[1]=R=>z("hdrezka"))},[P[5]||(P[5]=e("span",{class:"material-icons group-icon"},"folder",-1)),P[6]||(P[6]=re(" ReYohoho - HDrezka ")),T("hdrezka")?(i(),r("span",zn,"warning")):p("",!0)],2)])):p("",!0),E.value?(i(),r("li",Yn,[e("button",{class:A(["group-item",{active:U("kodik")}]),onClick:P[2]||(P[2]=R=>z("kodik"))},[P[7]||(P[7]=e("span",{class:"material-icons group-icon"},"folder",-1)),P[8]||(P[8]=re(" Kodik ")),T("kodik")?(i(),r("span",Gn,"warning")):p("",!0)],2)])):p("",!0)],64))])])]))}},Jn=Be(Xn,[["__scopeId","data-v-460326ba"]]),eo={class:"players-list"},to=["src"],no={key:1,class:"controls"},oo={class:"main-controls"},so={class:"material-icons"},lo={class:"list-button-item"},io={class:"material-icons"},ao={class:"list-button-item"},ro={class:"material-icons"},uo={class:"list-button-item"},co={class:"list-button-item"},vo={class:"material-icons"},mo={class:"list-button-item"},fo={class:"material-icons"},go={class:"tooltip-container","data-tooltip-container":"dimming"},yo={class:"material-icons"},ko={class:"tooltip-container","data-tooltip-container":"blur"},po={class:"tooltip-container","data-tooltip-container":"compressor"},ho={class:"tooltip-container","data-tooltip-container":"mirror"},bo={class:"tooltip-container","data-tooltip-container":"theater"},Co={class:"material-symbols-outlined"},wo={class:"custom-tooltip","data-tooltip":"theater"},_o={class:"tooltip-container","data-tooltip-container":"aspect_ratio"},Eo={class:"current-ratio"},Mo=["onClick"],Io={key:0,class:"tooltip-container","data-tooltip-container":"app_link"},Lo={class:"custom-tooltip","data-tooltip":"app_link"},Ro={key:1,class:"tooltip-container","data-tooltip-container":"copy_link"},To={class:"custom-tooltip","data-tooltip":"copy_link"},$o={key:0,class:"desktop-list-buttons"},Ao={class:"tooltip-container"},So={class:"material-icons"},Po={class:"custom-tooltip"},Uo={class:"tooltip-container"},xo={class:"material-icons"},Ho={class:"custom-tooltip"},jo={class:"tooltip-container"},Bo={class:"custom-tooltip"},Do={class:"tooltip-container"},No={class:"material-icons"},Oo={class:"custom-tooltip"},Vo={class:"tooltip-container"},qo={class:"material-icons"},Ko={class:"custom-tooltip"},Wo={key:1,class:"mobile-list-buttons"},Fo={class:"tooltip-container"},zo={class:"material-icons"},Yo={class:"custom-tooltip"},Go={class:"tooltip-container"},Zo={class:"material-icons"},Qo={class:"custom-tooltip"},Xo={class:"tooltip-container"},Jo={class:"custom-tooltip"},es={class:"tooltip-container"},ts={class:"material-icons"},ns={class:"custom-tooltip"},os={class:"tooltip-container"},ss={class:"material-icons"},ls={class:"custom-tooltip"},is={__name:"PlayerComponent",props:{kpId:String,movieInfo:{type:Object,default:()=>({})}},emits:["update:selectedPlayer","update:movieInfo"],setup(a,{emit:t}){const c=it(),n=jn(),m=dt(),_=yn(),d=at(),E=f(_.params.kp_id),C=a,s=t,u=f([]),k=f(null),B=f(!0),U=f(!1),z=f(!1),te=f(null),S=f(null),T=f(!1),b=f(""),P=f(null),R=f(window.innerHeight*.9),V=F(()=>"".concat(R.value,"px")),K=F(()=>c.isMobile),Z=F(()=>!!window.electronAPI),I=f(null),O=f(!1);let H=null;const Q=f(null),ye=f(null),ne=f(null),L=y=>{const o=document.querySelector('[data-tooltip-container="'.concat(y,'"]')),x=document.querySelector('[data-tooltip="'.concat(y,'"]'));if(!o||!x)return;const ce=o.getBoundingClientRect(),pe=x.getBoundingClientRect(),Ce=window.innerHeight;ce.bottom+pe.height>Ce?(x.style.top="auto",x.style.bottom="100%",x.style.marginTop="0",x.style.marginBottom="12px",x.style.transform="translateX(-50%)"):(x.style.top="100%",x.style.bottom="auto",x.style.marginTop="12px",x.style.marginBottom="0",x.style.transform="translateX(-50%)")},N=y=>{I.value=y,O.value=!1,clearTimeout(H),he(()=>{L(y)})},Ie=()=>{O.value||(H=setTimeout(()=>{I.value=null},300))},Pe=()=>{O.value=!0,clearTimeout(H)},Ae=()=>{O.value=!1,I.value=null},_e=F({get:()=>n.aspectRatio,set:y=>n.updateAspectRatio(y)}),Re=F({get:()=>n.isCentered,set:y=>n.updateCentering(y)}),ie=F(()=>{var y,o,x,ce,pe,Ce,qe,Ke,We,Fe;return((o=(y=C.movieInfo)==null?void 0:y.lists)==null?void 0:o.isFavorite)||((ce=(x=C.movieInfo)==null?void 0:x.lists)==null?void 0:ce.isWatching)||((Ce=(pe=C.movieInfo)==null?void 0:pe.lists)==null?void 0:Ce.isLater)||((Ke=(qe=C.movieInfo)==null?void 0:qe.lists)==null?void 0:Ke.isCompleted)||((Fe=(We=C.movieInfo)==null?void 0:We.lists)==null?void 0:Fe.isAbandoned)}),$=F(()=>n.preferredPlayer),v=f(0),ae=y=>y.toUpperCase(),ue=()=>{if(U.value||!S.value)return;const[y,o]=_e.value.split(":").map(Number);R.value=window.innerHeight*.9,v.value=Math.min(S.value.clientWidth*(o/y),R.value)},W=F(()=>{if(U.value)return{};const[y,o]=_e.value.split(":").map(Number),x=R.value*(y/o);return{width:"100%",maxWidth:"".concat(x,"px"),maxHeight:V.value,margin:"0 auto",overflow:"hidden"}}),De=F(()=>{const[y,o]=_e.value.split(":").map(Number);return{position:"relative",width:"100%",paddingTop:"".concat(o/y*100,"%")}}),Te=()=>{S.value&&setTimeout(()=>{he(()=>{S.value.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})},500)},Ne=async()=>{try{b.value="",P.value=null;const y=await bn(C.kpId);if(u.value=Object.entries(y).map(([o,x])=>({key:o.toUpperCase(),...x})),u.value.length>0){if($.value){const o=ae($.value),x=u.value.find(ce=>ae(ce.key)===o);k.value=x||u.value[0]}else k.value=u.value[0];s("update:selectedPlayer",k.value)}}catch(y){const{message:o,code:x}=ct(y);b.value=o,P.value=x,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–ª–µ–µ—Ä–æ–≤:",y)}},Oe=()=>{T.value=!0},Ee=()=>{T.value=!1},be=y=>{var o;if(((o=k.value)==null?void 0:o.key)===y.key){Ee();return}k.value=y,B.value=!0,n.updatePreferredPlayer(ae(y.key)),s("update:selectedPlayer",y)},Ve=()=>{Z.value?window.electronAPI.sendHotKey("F2"):(ut("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},Ue=()=>{Z.value?window.electronAPI.sendHotKey("F3"):(ut("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},h=()=>{Z.value?window.electronAPI.sendHotKey("F4"):(ut("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},j=()=>{U.value=!U.value,U.value?(window.addEventListener("mousemove",X),document.addEventListener("keydown",fe),document.body.classList.add("no-scroll")):(window.removeEventListener("mousemove",X),document.removeEventListener("keydown",fe),document.body.classList.remove("no-scroll")),z.value=U.value,he(()=>Te())},D=f(null),X=()=>{D.value=setTimeout(()=>{clearTimeout(D.value),z.value=!1},4e3),z.value=!0},ve=F(()=>c.dimmingEnabled),oe=()=>{U.value||c.toggleDimming()},fe=y=>{(y.key==="Escape"&&U.value||y.altKey&&y.keyCode===84)&&j()},Se=y=>{_e.value=y,setTimeout(()=>{Re.value&&Te()},310)},Ze=()=>{const y="reyohoho://#".concat(E.value);try{window.location.href=y}catch(o){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Å—ã–ª–∫–∏:",o)}},l=()=>{const y=window.location.href;navigator.clipboard.writeText(y).then(()=>{}),Q.value.showNotification("–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∏–ª—å–º —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞")},w=()=>{B.value=!1};function G(y){return y.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"HDRezka - ").replace(/KODIK>/,"Kodik - ").trim()}const ke=F(()=>{var y,o;return Z.value?!1:!((o=(y=k.value)==null?void 0:y.key)!=null&&o.toUpperCase().includes("TORRENTS"))});ze(k,y=>{if(y)if(B.value=!0,n.updatePreferredPlayer(ae(y.key)),s("update:selectedPlayer",y),y.key.toUpperCase().includes("TORRENTS")){const o=document.querySelector(".rocketme_fon");o&&(o.style.display="none");const x=document.querySelector(".pm_preloader");x&&(x.style.display="none")}else{const o=document.querySelector(".rocketme_fon");o&&(o.style.display="");const x=document.querySelector(".pm_preloader");x&&(x.style.display="")}}),ze(()=>_.params.kp_id,async y=>{y&&y!==E.value&&(E.value=y,Re.value&&Te())},{immediate:!0});const se=["16:9","12:5","4:3"],q=()=>{const o=(se.indexOf(_e.value)+1)%se.length;Se(se[o])},me=y=>{var x,ce,pe,Ce,qe,Ke,We,Fe,Xe,Je,et,tt,nt;return(nt={[J.FAVORITE]:((ce=(x=C.movieInfo)==null?void 0:x.lists)==null?void 0:ce.isFavorite)||!1,[J.HISTORY]:((Ce=(pe=C.movieInfo)==null?void 0:pe.lists)==null?void 0:Ce.isHistory)||!1,[J.LATER]:((Ke=(qe=C.movieInfo)==null?void 0:qe.lists)==null?void 0:Ke.isLater)||!1,[J.COMPLETED]:((Fe=(We=C.movieInfo)==null?void 0:We.lists)==null?void 0:Fe.isCompleted)||!1,[J.ABANDONED]:((Je=(Xe=C.movieInfo)==null?void 0:Xe.lists)==null?void 0:Je.isAbandoned)||!1,[J.WATCHING]:((tt=(et=C.movieInfo)==null?void 0:et.lists)==null?void 0:tt.isWatching)||!1}[y])!=null?nt:!1},Y=async y=>{if(!m.token){Q.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:xe});return}try{const o={[J.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[J.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[J.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[J.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[J.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[J.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};me(y)?(await Cn(E.value,y),Q.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(o[y]))):(await pn(E.value,y),Q.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(o[y])))}catch(o){const{message:x,code:ce}=ct(o);Q.value.showNotification("".concat(x," ").concat(ce))}s("update:movieInfo")},xe=()=>{d.push("/login")},$e=F(()=>n.showFavoriteTooltip),Me=()=>{d.push("/settings"),Ae()};return Ge(()=>{B.value=!0,Ne(),K.value&&(_e.value="4:3"),ue(),window.addEventListener("resize",ue),window.addEventListener("resize",L),Re.value&&Te()}),st(()=>{window.removeEventListener("resize",ue),window.removeEventListener("resize",L),window.removeEventListener("mousemove",X),document.removeEventListener("keydown",fe),document.body.classList.remove("no-scroll")}),(y,o)=>{var x,ce,pe,Ce,qe,Ke,We,Fe,Xe,Je,et,tt,nt,gt,yt,kt,pt,ht,bt,Ct,wt,_t,Et,Mt,It,Lt,Rt,Tt,$t,At,St,Pt,Ut,xt,Ht,jt,Bt,Dt,Nt,Ot,Vt,qt,Kt,Wt,Ft,zt,Yt,Gt,Zt,Qt,Xt,Jt,en,tn,nn,on,sn,ln,an,rn;return b.value?(i(),He(kn,{key:0,message:b.value,code:P.value},null,8,["message","code"])):(i(),r(ge,{key:1},[e("div",eo,[o[54]||(o[54]=e("span",null,"–ü–ª–µ–µ—Ä:",-1)),e("button",{class:"player-btn",onClick:Oe},g(k.value?G(k.value.translate).toUpperCase():"–ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–µ–µ—Ä–æ–≤..."),1)]),T.value?(i(),He(Jn,{key:0,players:u.value,"selected-player":k.value,onClose:Ee,onSelect:be},null,8,["players","selected-player"])):p("",!0),e("div",{ref_key:"containerRef",ref:S,class:A(["player-container",{"theater-mode":U.value}]),style:lt(U.value?{}:W.value)},[e("div",{class:A(["iframe-wrapper",{pm_video:ke.value}]),style:lt(U.value?{}:De.value)},[ee(e("iframe",{ref_key:"playerIframe",ref:te,src:(x=k.value)==null?void 0:x.iframe,frameborder:"0",allowfullscreen:"",webkitallowfullscreen:"",class:A(["responsive-iframe",{"theater-mode-unlock":z.value,"theater-mode-lock":U.value,dimmed:ve.value}]),onLoad:w},null,42,to),[[le,!B.value&&((ce=k.value)==null?void 0:ce.iframe)]]),B.value?(i(),He(hn,{key:0})):p("",!0)],6),U.value?(i(),r("button",{key:0,class:A(["close-theater-btn",{visible:z.value}]),onClick:j}," ‚úñ ",2)):p("",!0)],6),U.value?p("",!0):(i(),r("div",no,[e("div",oo,[K.value?p("",!0):(i(),r("div",{key:0,ref_key:"tooltipContainer",ref:ye,class:"tooltip-container list-buttons-container","data-tooltip-container":"favorite"},[$e.value?(i(),r("button",{key:0,class:A(["favorite-btn",{active:(Ce=(pe=a.movieInfo)==null?void 0:pe.lists)==null?void 0:Ce.isFavorite}]),onMouseenter:o[0]||(o[0]=M=>N("favorite")),onMouseleave:Ie,onClick:o[1]||(o[1]=M=>Y(de(J).FAVORITE))},[e("span",so,g((Ke=(qe=a.movieInfo)==null?void 0:qe.lists)!=null&&Ke.isFavorite?"favorite":"favorite_border"),1),e("span",{class:A(["material-icons dropdown-arrow",{highlighted:ie.value}])},"expand_more",2)],34)):p("",!0),ee(e("div",{ref_key:"tooltip",ref:ne,class:"custom-tooltip advanced-tooltip list-buttons-dropdown","data-tooltip":"favorite",onMouseenter:Pe,onMouseleave:Ae},[e("div",lo,[e("button",{class:A(["favorite-btn",{active:(Fe=(We=a.movieInfo)==null?void 0:We.lists)==null?void 0:Fe.isFavorite}]),onClick:o[2]||(o[2]=M=>Y(de(J).FAVORITE))},[e("span",io,g((Je=(Xe=a.movieInfo)==null?void 0:Xe.lists)!=null&&Je.isFavorite?"favorite":"favorite_border"),1),o[55]||(o[55]=e("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))],2)]),e("div",ao,[e("button",{class:A(["watching-btn",{active:(tt=(et=a.movieInfo)==null?void 0:et.lists)==null?void 0:tt.isWatching}]),onClick:o[3]||(o[3]=M=>Y(de(J).WATCHING))},[e("span",ro,g((gt=(nt=a.movieInfo)==null?void 0:nt.lists)!=null&&gt.isWatching?"visibility_off":"visibility"),1),o[56]||(o[56]=e("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))],2)]),e("div",uo,[e("button",{class:A(["later-btn",{active:(kt=(yt=a.movieInfo)==null?void 0:yt.lists)==null?void 0:kt.isLater}]),onClick:o[4]||(o[4]=M=>Y(de(J).LATER))},o[57]||(o[57]=[e("span",{class:"material-icons"},"watch_later",-1),e("span",{class:"button-label"},"–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ",-1)]),2)]),e("div",co,[e("button",{class:A(["completed-btn",{active:(ht=(pt=a.movieInfo)==null?void 0:pt.lists)==null?void 0:ht.isCompleted}]),onClick:o[5]||(o[5]=M=>Y(de(J).COMPLETED))},[e("span",vo,g((Ct=(bt=a.movieInfo)==null?void 0:bt.lists)!=null&&Ct.isCompleted?"check_circle":"check_circle_outline"),1),o[58]||(o[58]=e("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))],2)]),e("div",mo,[e("button",{class:A(["abandoned-btn",{active:(_t=(wt=a.movieInfo)==null?void 0:wt.lists)==null?void 0:_t.isAbandoned}]),onClick:o[6]||(o[6]=M=>Y(de(J).ABANDONED))},[e("span",fo,g(((Mt=(Et=a.movieInfo)==null?void 0:Et.lists)!=null&&Mt.isAbandoned,"not_interested")),1),o[59]||(o[59]=e("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))],2)]),e("div",{class:"tooltip-hint"},[o[61]||(o[61]=e("span",{class:"material-icons"},"settings",-1)),e("span",null,[o[60]||(o[60]=re("–°—Ç–∏–ª—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ ")),e("a",{class:"settings-link",onClick:Me},"–Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö")])])],544),[[le,I.value==="favorite"&&$e.value]])],512)),K.value?p("",!0):(i(),r(ge,{key:1},[e("div",go,[e("button",{class:A(["dimming-btn",{active:ve.value}]),onMouseenter:o[7]||(o[7]=M=>N("dimming")),onMouseleave:o[8]||(o[8]=M=>I.value=null),onClick:oe},[e("span",yo,g(ve.value?"light_mode":"dark_mode"),1)],34),ee(e("div",{class:"custom-tooltip","data-tooltip":"dimming"},g(ve.value?"–û—Ç–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ":"–í–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ"),513),[[le,I.value==="dimming"]])]),e("div",ko,[e("button",{class:A(["blur-btn",{"electron-only":!Z.value}]),onMouseenter:o[9]||(o[9]=M=>N("blur")),onMouseleave:o[10]||(o[10]=M=>I.value=null),onClick:Ve},o[62]||(o[62]=[e("span",{class:"material-icons"},"blur_on",-1)]),34),ee(e("div",{class:"custom-tooltip","data-tooltip":"blur"},g(Z.value?"–ë–ª—é—Ä":"–ë–ª—é—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[le,I.value==="blur"]])]),e("div",po,[e("button",{class:A(["material-symbols-outlined",{"electron-only":!Z.value}]),onMouseenter:o[11]||(o[11]=M=>N("compressor")),onMouseleave:o[12]||(o[12]=M=>I.value=null),onClick:Ue},o[63]||(o[63]=[e("span",{class:"material-icons"},"graphic_eq",-1)]),34),ee(e("div",{class:"custom-tooltip","data-tooltip":"compressor"},g(Z.value?"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä":"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[le,I.value==="compressor"]])]),e("div",ho,[e("button",{class:A(["mirror-btn",{"electron-only":!Z.value}]),onMouseenter:o[13]||(o[13]=M=>N("mirror")),onMouseleave:o[14]||(o[14]=M=>I.value=null),onClick:h},o[64]||(o[64]=[e("span",{class:"material-icons"},"flip",-1)]),34),ee(e("div",{class:"custom-tooltip","data-tooltip":"mirror"},g(Z.value?"–ó–µ—Ä–∫–∞–ª–æ":"–ó–µ—Ä–∫–∞–ª–æ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[le,I.value==="mirror"]])]),e("div",bo,[e("button",{class:"theater-mode-btn",onMouseenter:o[15]||(o[15]=M=>N("theater")),onMouseleave:o[16]||(o[16]=M=>I.value=null),onClick:j},[e("span",Co,g(U.value?"fullscreen_exit":"aspect_ratio"),1)],32),ee(e("div",wo,[re(g(U.value?"–í—ã–π—Ç–∏ –∏–∑ —Ç–µ–∞—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞":"–¢–µ–∞—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º")+" ",1),o[65]||(o[65]=e("span",{class:"shortcut-hint"},"Alt+T",-1))],512),[[le,I.value==="theater"]])]),e("div",_o,[e("button",{class:"aspect-ratio-dropdown-btn",onMouseenter:o[17]||(o[17]=M=>N("aspect_ratio")),onMouseleave:Ie,onClick:q},[e("span",Eo,g(_e.value),1)],32),ee(e("div",{class:"custom-tooltip advanced-tooltip aspect-ratio-dropdown","data-tooltip":"aspect_ratio",onMouseenter:Pe,onMouseleave:Ae},[(i(),r(ge,null,Le(se,M=>e("div",{key:M,class:A(["aspect-ratio-option",{active:_e.value===M}]),onClick:_a=>Se(M)},g(M),11,Mo)),64))],544),[[le,I.value==="aspect_ratio"]])]),e("div",{class:"tooltip-container","data-tooltip-container":"centering",onMouseenter:o[19]||(o[19]=M=>N("centering")),onMouseleave:Ie},[e("button",{class:"center-btn",onClick:Te},o[66]||(o[66]=[e("span",{class:"material-icons"},"center_focus_strong",-1)])),ee(e("div",{class:"custom-tooltip advanced-tooltip","data-tooltip":"centering",onMouseenter:Pe,onMouseleave:Ae},[o[67]||(o[67]=re(" –û—Ç—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–ª–µ–µ—Ä ")),we(Bn,{modelValue:Re.value,"onUpdate:modelValue":o[18]||(o[18]=M=>Re.value=M),title:"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞"},null,8,["modelValue"]),o[68]||(o[68]=e("span",{class:"tooltip-title"},"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞",-1))],544),[[le,I.value==="centering"]])],32),Z.value?p("",!0):(i(),r("div",Io,[e("button",{class:"app-link-btn",onMouseenter:o[20]||(o[20]=M=>N("app_link")),onMouseleave:o[21]||(o[21]=M=>I.value=null),onClick:Ze},o[69]||(o[69]=[e("span",{class:"material-icons"},"open_in_new",-1)]),32),ee(e("div",Lo," –û—Ç–∫—Ä—ã—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ",512),[[le,I.value==="app_link"]])])),Z.value?(i(),r("div",Ro,[e("button",{class:"copy-link-btn",onMouseenter:o[22]||(o[22]=M=>N("copy_link")),onMouseleave:o[23]||(o[23]=M=>I.value=null),onClick:l},o[70]||(o[70]=[e("span",{class:"material-icons"},"content_copy",-1)]),32),ee(e("div",To," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É ",512),[[le,I.value==="copy_link"]])])):p("",!0)],64))]),!K.value&&!$e.value?(i(),r("div",$o,[e("div",Ao,[e("button",{class:A(["favorite-btn",{active:(Lt=(It=a.movieInfo)==null?void 0:It.lists)==null?void 0:Lt.isFavorite}]),onMouseenter:o[24]||(o[24]=M=>N("favorite")),onMouseleave:o[25]||(o[25]=M=>I.value=null),onClick:o[26]||(o[26]=M=>Y(de(J).FAVORITE))},[e("span",So,g((Tt=(Rt=a.movieInfo)==null?void 0:Rt.lists)!=null&&Tt.isFavorite?"favorite":"favorite_border"),1)],34),ee(e("div",Po,g("–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"),512),[[le,I.value==="favorite"]])]),e("div",Uo,[e("button",{class:A(["watching-btn",{active:(At=($t=a.movieInfo)==null?void 0:$t.lists)==null?void 0:At.isWatching}]),onMouseenter:o[27]||(o[27]=M=>N("watching")),onMouseleave:o[28]||(o[28]=M=>I.value=null),onClick:o[29]||(o[29]=M=>Y(de(J).WATCHING))},[e("span",xo,g((Pt=(St=a.movieInfo)==null?void 0:St.lists)!=null&&Pt.isWatching?"visibility_off":"visibility"),1)],34),ee(e("div",Ho,g("–°–º–æ—Ç—Ä—é"),512),[[le,I.value==="watching"]])]),e("div",jo,[e("button",{class:A(["later-btn",{active:(xt=(Ut=a.movieInfo)==null?void 0:Ut.lists)==null?void 0:xt.isLater}]),onMouseenter:o[30]||(o[30]=M=>N("later")),onMouseleave:o[31]||(o[31]=M=>I.value=null),onClick:o[32]||(o[32]=M=>Y(de(J).LATER))},o[71]||(o[71]=[e("span",{class:"material-icons"},"watch_later",-1)]),34),ee(e("div",Bo,g("–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"),512),[[le,I.value==="later"]])]),e("div",Do,[e("button",{class:A(["completed-btn",{active:(jt=(Ht=a.movieInfo)==null?void 0:Ht.lists)==null?void 0:jt.isCompleted}]),onMouseenter:o[33]||(o[33]=M=>N("completed")),onMouseleave:o[34]||(o[34]=M=>I.value=null),onClick:o[35]||(o[35]=M=>Y(de(J).COMPLETED))},[e("span",No,g((Dt=(Bt=a.movieInfo)==null?void 0:Bt.lists)!=null&&Dt.isCompleted?"check_circle":"check_circle_outline"),1)],34),ee(e("div",Oo,g("–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"),512),[[le,I.value==="completed"]])]),e("div",Vo,[e("button",{class:A(["abandoned-btn",{active:(Ot=(Nt=a.movieInfo)==null?void 0:Nt.lists)==null?void 0:Ot.isAbandoned}]),onMouseenter:o[36]||(o[36]=M=>N("abandoned")),onMouseleave:o[37]||(o[37]=M=>I.value=null),onClick:o[38]||(o[38]=M=>Y(de(J).ABANDONED))},[e("span",qo,g(((qt=(Vt=a.movieInfo)==null?void 0:Vt.lists)!=null&&qt.isAbandoned,"not_interested")),1)],34),ee(e("div",Ko,g("–ë—Ä–æ—à–µ–Ω–æ"),512),[[le,I.value==="abandoned"]])])])):K.value?(i(),r("div",Wo,[e("div",Fo,[e("button",{class:A(["favorite-btn",{active:(Wt=(Kt=a.movieInfo)==null?void 0:Kt.lists)==null?void 0:Wt.isFavorite}]),onMouseenter:o[39]||(o[39]=M=>N("favorite")),onMouseleave:o[40]||(o[40]=M=>I.value=null),onClick:o[41]||(o[41]=M=>Y(de(J).FAVORITE))},[e("span",zo,g((zt=(Ft=a.movieInfo)==null?void 0:Ft.lists)!=null&&zt.isFavorite?"favorite":"favorite_border"),1)],34),ee(e("div",Yo,g("–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"),512),[[le,I.value==="favorite"]])]),e("div",Go,[e("button",{class:A(["watching-btn",{active:(Gt=(Yt=a.movieInfo)==null?void 0:Yt.lists)==null?void 0:Gt.isWatching}]),onMouseenter:o[42]||(o[42]=M=>N("watching")),onMouseleave:o[43]||(o[43]=M=>I.value=null),onClick:o[44]||(o[44]=M=>Y(de(J).WATCHING))},[e("span",Zo,g((Qt=(Zt=a.movieInfo)==null?void 0:Zt.lists)!=null&&Qt.isWatching?"visibility_off":"visibility"),1)],34),ee(e("div",Qo,g("–°–º–æ—Ç—Ä—é"),512),[[le,I.value==="watching"]])]),e("div",Xo,[e("button",{class:A(["later-btn",{active:(Jt=(Xt=a.movieInfo)==null?void 0:Xt.lists)==null?void 0:Jt.isLater}]),onMouseenter:o[45]||(o[45]=M=>N("later")),onMouseleave:o[46]||(o[46]=M=>I.value=null),onClick:o[47]||(o[47]=M=>Y(de(J).LATER))},o[72]||(o[72]=[e("span",{class:"material-icons"},"watch_later",-1)]),34),ee(e("div",Jo,g("–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"),512),[[le,I.value==="later"]])]),e("div",es,[e("button",{class:A(["completed-btn",{active:(tn=(en=a.movieInfo)==null?void 0:en.lists)==null?void 0:tn.isCompleted}]),onMouseenter:o[48]||(o[48]=M=>N("completed")),onMouseleave:o[49]||(o[49]=M=>I.value=null),onClick:o[50]||(o[50]=M=>Y(de(J).COMPLETED))},[e("span",ts,g((on=(nn=a.movieInfo)==null?void 0:nn.lists)!=null&&on.isCompleted?"check_circle":"check_circle_outline"),1)],34),ee(e("div",ns,g("–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"),512),[[le,I.value==="completed"]])]),e("div",os,[e("button",{class:A(["abandoned-btn",{active:(ln=(sn=a.movieInfo)==null?void 0:sn.lists)==null?void 0:ln.isAbandoned}]),onMouseenter:o[51]||(o[51]=M=>N("abandoned")),onMouseleave:o[52]||(o[52]=M=>I.value=null),onClick:o[53]||(o[53]=M=>Y(de(J).ABANDONED))},[e("span",ss,g(((rn=(an=a.movieInfo)==null?void 0:an.lists)!=null&&rn.isAbandoned,"not_interested")),1)],34),ee(e("div",ls,g("–ë—Ä–æ—à–µ–Ω–æ"),512),[[le,I.value==="abandoned"]])])])):p("",!0)])),we(rt,{ref_key:"notificationRef",ref:Q},null,512)],64))}}},gn=Be(is,[["__scopeId","data-v-2037cb5b"]]),as={key:0,class:"carousel-container"},rs={class:"carousel-wrapper"},us=["onClick"],cs=["src","alt"],ds={class:"video-name"},vs={key:0,class:"video-player"},ms=["src"],fs={__name:"TrailerCarousel",props:{videos:{type:Array,required:!0},activeVideoIndex:{type:Number,default:null}},emits:["select"],setup(a,{emit:t}){const c=it(),n=F(()=>c.isMobile),m=a,_=t,d=f(m.activeVideoIndex),E=f(null),C=f(!1),s=f(!1),u=()=>{if(!E.value)return;const{scrollLeft:S,scrollWidth:T,clientWidth:b}=E.value;C.value=S>0,s.value=S<T-b-1},k=S=>{if(!E.value)return;const T=E.value.querySelector(".carousel-item");if(!T)return;const b=T.clientWidth+16;E.value.scrollBy({left:b*S,behavior:"smooth"})},B=S=>{d.value=S,_("select",m.videos[S])},U=()=>u(),z=f([]),te=async S=>{try{return(await fetch("https://img.youtube.com/vi/".concat(S,"/0.jpg"))).ok}catch(T){return!1}};return Ge(async()=>{const S=m.videos.map(async b=>await te(b.videoId)?b:null),T=await Promise.all(S);z.value=T.filter(Boolean),u(),window.addEventListener("resize",U)}),ze(()=>m.videos,async S=>{const T=S.map(async P=>await te(P.videoId)?P:null),b=await Promise.all(T);z.value=b.filter(Boolean)}),ze(()=>m.activeVideoIndex,S=>{d.value=S}),st(()=>{window.removeEventListener("resize",U)}),(S,T)=>z.value.length?(i(),r("div",as,[T[4]||(T[4]=e("h2",null,"–¢—Ä–µ–π–ª–µ—Ä—ã (YouTube)",-1)),e("div",rs,[ee(e("button",{class:"scroll-button left",onClick:T[0]||(T[0]=b=>k(-1))},T[2]||(T[2]=[e("span",{class:"material-symbols-outlined"},"arrow_back_ios",-1)]),512),[[le,!n.value&&C.value]]),e("div",{ref_key:"carousel",ref:E,class:"carousel",onScroll:u},[(i(!0),r(ge,null,Le(z.value,(b,P)=>(i(),r("div",{key:P,class:"carousel-item",onClick:R=>B(P)},[e("img",{src:"https://img.youtube.com/vi/".concat(b.videoId,"/0.jpg"),alt:b.name},null,8,cs),e("div",ds,g(b.name),1)],8,us))),128))],544),ee(e("button",{class:"scroll-button right",onClick:T[1]||(T[1]=b=>k(1))},T[3]||(T[3]=[e("span",{class:"material-symbols-outlined"},"arrow_forward_ios",-1)]),512),[[le,!n.value&&s.value]])]),d.value!==null?(i(),r("div",vs,[e("iframe",{src:a.videos[d.value].iframeUrl,frameborder:"0",allowfullscreen:""},null,8,ms)])):p("",!0)])):p("",!0)}},gs=Be(fs,[["__scopeId","data-v-e60b5c29"]]),ys={class:"rating-container"},ks={class:"rating-display"},ps={class:"average-rating"},hs={class:"rating-numbers"},bs=["onClick","onMouseenter"],Cs={key:0,class:"tooltip-footer"},ws={class:"rating-numbers mobile-rating-numbers"},_s=["onClick"],Es={key:0,class:"mobile-modal-footer"},Ms={__name:"MovieRating",props:{kpId:{type:String,required:!0},showDash:{type:Boolean,default:!1}},setup(a){const t=it(),c=at(),n=a,m=f(null),_=f(null),d=f(null),E=f(null),C=f(0),s=f(!1),u=f(!1);let k=null;const B=R=>R?R.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",U=()=>{k=setTimeout(()=>{s.value=!1,t.isMobile||(u.value=!1)},100)},z=()=>{k&&(clearTimeout(k),k=null),s.value=!0},te=()=>{t.isMobile&&(u.value=!u.value)},S=()=>{c.push("/login")},T=async()=>{try{const R=await wn(n.kpId);_.value=R.user_rating,d.value=R.average_rating,E.value=B(R.vote_count)}catch(R){console.error("Error loading rating:",R)}},b=async R=>{var V;try{R===_.value?(await un(n.kpId,null),_.value=null,m.value.showNotification("–û—Ü–µ–Ω–∫–∞ —É–¥–∞–ª–µ–Ω–∞")):(await un(n.kpId,R),_.value=R,m.value.showNotification("–û—Ü–µ–Ω–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞")),t.isMobile&&(u.value=!1),T()}catch(K){console.error("Error setting rating:",K),((V=K.response)==null?void 0:V.status)===401?m.value.showNotification('–î–ª—è –æ—Ü–µ–Ω–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:S}):m.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ü–µ–Ω–∫–∏"),t.isMobile&&(u.value=!1)}},P=()=>{u.value=!1};return Ge(()=>{T()}),(R,V)=>(i(),r("div",ys,[e("div",ks,[e("a",{href:"#",class:A(["rating-link",{"has-rating":_.value}]),onMouseenter:V[0]||(V[0]=K=>s.value=!0),onMouseleave:U,onClick:Ye(te,["prevent"])},[V[3]||(V[3]=e("img",{src:Hn,alt:"ReYohoho",class:"rating-logo"},null,-1)),e("span",ps,g(d.value?d.value.toFixed(1).replace(/\.0$/,""):"‚Äî"),1)],34),ee(e("div",{class:"rating-tooltip",onMouseenter:z,onMouseleave:U},[e("div",hs,[(i(),r(ge,null,Le(10,K=>e("button",{key:K,class:A(["number-btn",{active:K===_.value,hover:K===C.value,"average-highlight":d.value&&K<=Math.round(d.value)}]),onClick:Z=>b(K),onMouseenter:Z=>C.value=K,onMouseleave:V[1]||(V[1]=Z=>C.value=0)},g(K),43,bs)),64))]),E.value?(i(),r("div",Cs,"–û—Ü–µ–Ω–æ–∫: "+g(E.value),1)):p("",!0)],544),[[le,(s.value||u.value)&&!de(t).isMobile]])]),we(rt,{ref_key:"notificationRef",ref:m},null,512),de(t).isMobile&&u.value?(i(),r("div",{key:0,class:"mobile-modal-overlay",onClick:P},[e("div",{class:"mobile-modal",onClick:V[2]||(V[2]=Ye(()=>{},["stop"]))},[e("div",{class:"mobile-modal-header"},[V[4]||(V[4]=e("h3",null,"–û—Ü–µ–Ω–∏—Ç—å —Ñ–∏–ª—å–º",-1)),e("button",{class:"close-button",onClick:P},"√ó")]),e("div",ws,[(i(),r(ge,null,Le(10,K=>e("button",{key:K,class:A(["number-btn",{active:K===_.value,"average-highlight":d.value&&K<=Math.round(d.value)}]),onClick:Z=>b(K)},g(K),11,_s)),64))]),E.value?(i(),r("div",Es,"–û—Ü–µ–Ω–æ–∫: "+g(E.value),1)):p("",!0)])])):p("",!0)]))}},Is=Be(Ms,[["__scopeId","data-v-906480ed"]]),Ls={name:"EmojiPicker",props:{isVisible:{type:Boolean,default:!1}},emits:["emoji-selected","mouse-enter","mouse-leave","close"],data(){return{activeCategory:"smileys",categories:[{name:"smileys",icon:"üòÄ",emojis:["üòÄ","üòÉ","üòÑ","üòÅ","üòÜ","üòÖ","üòÇ","ü§£","üòä","üòá","üôÇ","üôÉ","üòâ","üòå","üòç","ü•∞","üòò","üòó","üòô","üòö","üòã","üòõ","üòù","üòú","ü§™","ü§®","üßê","ü§ì","üòé","ü§©","ü•≥"]},{name:"emotions",icon:"üò¢",emojis:["üò•","üò¢","üò≠","üò§","üò†","üò°","ü§¨","ü§Ø","üò≥","ü•µ","ü•∂","üò±","üò®","üò∞","üò•","üòì","ü§ó","ü§î","ü§≠","ü§´","ü§•","üò∂","üòê","üòë","üò¨","üôÑ","üòØ","üò¶","üòß","üòÆ","üò≤"]},{name:"gestures",icon:"üëç",emojis:["üëç","üëé","üëå","ü§å","ü§è","‚úåÔ∏è","ü§û","ü§ü","ü§ò","ü§ô","üëà","üëâ","üëÜ","üñï","üëá","‚òùÔ∏è","üëè","üôå","üëê","ü§≤","ü§ù","üôè","‚úçÔ∏è","üí™","ü¶æ","ü¶ø","ü¶µ","ü¶∂","üëÇ","ü¶ª","üëÉ"]},{name:"hearts",icon:"‚ù§Ô∏è",emojis:["‚ù§Ô∏è","üß°","üíõ","üíö","üíô","üíú","ü§é","üñ§","ü§ç","üíî","‚ù£Ô∏è","üíï","üíû","üíì","üíó","üíñ","üíò","üíù","üíü","‚ô•Ô∏è","üíØ","üí¢","üí•","üí´","üí¶","üí®","üï≥Ô∏è","üí£","üí¨","üëÅÔ∏è‚Äçüó®Ô∏è","üó®Ô∏è"]},{name:"objects",icon:"üéâ",emojis:["üéâ","üéä","üéà","üéÅ","üéÄ","üéÇ","üç∞","üßÅ","üç≠","üç¨","üç´","üç©","üç™","üçï","üçî","üçü","üå≠","ü•™","üåÆ","üåØ","ü•ô","ü•ö","üç≥","ü•ò","üç≤","ü•ó","üçø","üßà","üßÄ","ü•®","ü•Ø"]}]}},computed:{currentEmojis(){const a=this.categories.find(t=>t.name===this.activeCategory);return a?a.emojis:[]}},methods:{selectEmoji(a){this.$emit("emoji-selected",a)}}},Rs={class:"emoji-categories"},Ts=["onClick"],$s={class:"emoji-grid"},As=["onClick"];function Ss(a,t,c,n,m,_){return c.isVisible?(i(),r("div",{key:0,class:"emoji-picker",onMouseenter:t[1]||(t[1]=d=>a.$emit("mouse-enter")),onMouseleave:t[2]||(t[2]=d=>a.$emit("mouse-leave"))},[e("button",{class:"close-btn mobile-only",onClick:t[0]||(t[0]=d=>a.$emit("close"))},t[3]||(t[3]=[e("i",{class:"fas fa-times"},null,-1)])),e("div",Rs,[(i(!0),r(ge,null,Le(m.categories,d=>(i(),r("button",{key:d.name,onClick:E=>m.activeCategory=d.name,class:A([{active:m.activeCategory===d.name},"category-btn"]),type:"button"},g(d.icon),11,Ts))),128))]),e("div",$s,[(i(!0),r(ge,null,Le(_.currentEmojis,d=>(i(),r("button",{key:d,onClick:E=>_.selectEmoji(d),class:"emoji-btn",type:"button"},g(d),9,As))),128))])],32)):p("",!0)}const mt=Be(Ls,[["render",Ss],["__scopeId","data-v-5f18a3b7"]]),Ps=async a=>{const t=await _n();return await a(t)},Us=async a=>{const{data:t}=await Ps(c=>c.get("/search_emotes/".concat(a)));return t.emotes||[]},xs={name:"ImagePicker",props:{isVisible:{type:Boolean,required:!0},currentUser:{type:Object,default:null}},emits:["image-selected","mouse-enter","mouse-leave","close","login-required"],setup(a,{emit:t}){const c=f(""),n=f([]),m=f(null),_=f(!1),E=En(async k=>{if(!a.currentUser){console.warn("–ü–æ–ø—ã—Ç–∫–∞ –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏");return}if(!k.trim()){n.value=[],_.value=!1;return}_.value=!0;try{n.value=await Us(k)}catch(B){console.error("Error searching images:",B),n.value=[]}finally{_.value=!1}},300),C=()=>{if(!a.currentUser){t("login-required");return}c.value.trim()&&(_.value=!0),E(c.value)},s=k=>{if(!a.currentUser){t("login-required");return}t("image-selected",k),t("close")},u=()=>{setTimeout(()=>{a.isVisible&&t("mouse-leave")},100)};return ze(()=>a.isVisible,k=>{k&&(c.value="",n.value=[],_.value=!1)}),{searchQuery:c,images:n,searchInput:m,isLoading:_,handleSearch:C,selectImage:s,handleInputBlur:u}}},Hs={key:0,class:"auth-required"},js={class:"auth-message"},Bs={key:1},Ds={class:"image-picker-header"},Ns={class:"image-content"},Os={key:0,class:"loading-spinner"},Vs={key:1,class:"image-grid"},qs=["onClick"],Ks=["src","alt"],Ws={key:2,class:"no-images"},Fs={key:3,class:"no-search"};function zs(a,t,c,n,m,_){return c.isVisible?(i(),r("div",{key:0,class:"image-picker",onMouseenter:t[7]||(t[7]=d=>a.$emit("mouse-enter")),onMouseleave:t[8]||(t[8]=d=>a.$emit("mouse-leave")),onClick:t[9]||(t[9]=Ye(()=>{},["stop"]))},[e("button",{class:"close-btn mobile-only",onClick:t[0]||(t[0]=d=>a.$emit("close"))},t[10]||(t[10]=[e("i",{class:"fas fa-times"},null,-1)])),c.currentUser?(i(),r("div",Bs,[e("div",Ds,[ee(e("input",{ref:"searchInput",type:"text","onUpdate:modelValue":t[2]||(t[2]=d=>n.searchQuery=d),placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–º–∞–π–ª–∞ 7tv",class:"image-search-input",onInput:t[3]||(t[3]=(...d)=>n.handleSearch&&n.handleSearch(...d)),onClick:t[4]||(t[4]=Ye(()=>{},["stop"])),onFocus:t[5]||(t[5]=d=>a.$emit("mouse-enter")),onBlur:t[6]||(t[6]=(...d)=>n.handleInputBlur&&n.handleInputBlur(...d))},null,544),[[vt,n.searchQuery]])]),e("div",Ns,[n.isLoading?(i(),r("div",Os,t[14]||(t[14]=[e("div",{class:"spinner"},null,-1),e("p",null,"–ü–æ–∏—Å–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...",-1)]))):n.images.length>0?(i(),r("div",Vs,[(i(!0),r(ge,null,Le(n.images,(d,E)=>(i(),r("div",{key:E,class:"image-item",onClick:C=>n.selectImage(d)},[e("img",{src:d,alt:"Image "+(E+1)},null,8,Ks)],8,qs))),128))])):n.searchQuery.trim()?(i(),r("div",Ws,t[15]||(t[15]=[e("p",null,"–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤",-1)]))):(i(),r("div",Fs,t[16]||(t[16]=[e("p",null,"–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞",-1)])))])])):(i(),r("div",Hs,[e("div",js,[t[11]||(t[11]=e("i",{class:"fas fa-lock"},null,-1)),t[12]||(t[12]=e("h3",null,"–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è",-1)),t[13]||(t[13]=e("p",null,"–î–ª—è –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç",-1)),e("button",{class:"login-button",onClick:t[1]||(t[1]=d=>a.$emit("login-required"))},"–í–æ–π—Ç–∏")])]))],32)):p("",!0)}const ft=Be(xs,[["render",zs],["__scopeId","data-v-be44d2b6"]]),Ys={name:"CommentItem",components:{EmojiPicker:mt,ImagePicker:ft},props:{comment:{type:Object,required:!0,default:()=>({username:"–ê–Ω–æ–Ω–∏–º",user_avatar:null,content:"",created_at:new Date().toISOString(),rating:0,replies:[]})},currentUser:{type:Object,required:!0,default:()=>({})},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate"],setup(a,{emit:t}){var Se,Ze;const c=at(),n=F(()=>{var l;return a.editingCommentId===((l=a.comment)==null?void 0:l.id)}),m=f(((Se=a.comment)==null?void 0:Se.content)||""),_=f(((Ze=a.comment)==null?void 0:Ze.user_rating)||0),d=f(null),E=f(null),C=f(!1),s=f(!1),u=f(!1),k=f(!1),B=f(!1),U=l=>{if(!l)return"?";const w=l.split(" ");return w.length===1?l.slice(0,2).toUpperCase():(w[0][0]+w[w.length-1][0]).toUpperCase()},z=l=>{if(!l)return"";const w=l.substring(0,4),G=l.substring(4,6),ke=l.substring(6,8),se=l.substring(9,11),q=l.substring(11,13),me=l.substring(13,15);return new Date(Date.UTC(parseInt(w),parseInt(G)-1,parseInt(ke),parseInt(se),parseInt(q),parseInt(me))).toLocaleDateString("ru-RU",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone})},te=l=>{if(!l)return"";const w=l.substring(0,4),G=l.substring(4,6),ke=l.substring(6,8),se=l.substring(9,11),q=l.substring(11,13),me=l.substring(13,15),Y=new Date(Date.UTC(parseInt(w),parseInt(G)-1,parseInt(ke),parseInt(se),parseInt(q),parseInt(me))),$e=Math.floor((new Date-Y)/1e3);if($e<60)return"—Ç–æ–ª—å–∫–æ —á—Ç–æ";const Me=Math.floor($e/60);if(Me<60)return"".concat(Me," ").concat(S(Me)," –Ω–∞–∑–∞–¥");const y=Math.floor(Me/60);if(y<24)return"".concat(y," ").concat(T(y)," –Ω–∞–∑–∞–¥");const o=Math.floor(y/24);if(o<7)return"".concat(o," ").concat(b(o)," –Ω–∞–∑–∞–¥");const x=Math.floor(o/7);if(x<4)return"".concat(x," ").concat(P(x)," –Ω–∞–∑–∞–¥");const ce=Math.floor(o/30);if(ce<12)return"".concat(ce," ").concat(R(ce)," –Ω–∞–∑–∞–¥");const pe=Math.floor(o/365);return"".concat(pe," ").concat(V(pe)," –Ω–∞–∑–∞–¥")},S=l=>l%10===1&&l%100!==11?"–º–∏–Ω—É—Ç—É":[2,3,4].includes(l%10)&&![12,13,14].includes(l%100)?"–º–∏–Ω—É—Ç—ã":"–º–∏–Ω—É—Ç",T=l=>l%10===1&&l%100!==11?"—á–∞—Å":[2,3,4].includes(l%10)&&![12,13,14].includes(l%100)?"—á–∞—Å–∞":"—á–∞—Å–æ–≤",b=l=>l%10===1&&l%100!==11?"–¥–µ–Ω—å":[2,3,4].includes(l%10)&&![12,13,14].includes(l%100)?"–¥–Ω—è":"–¥–Ω–µ–π",P=l=>l%10===1&&l%100!==11?"–Ω–µ–¥–µ–ª—é":[2,3,4].includes(l%10)&&![12,13,14].includes(l%100)?"–Ω–µ–¥–µ–ª–∏":"–Ω–µ–¥–µ–ª—å",R=l=>l%10===1&&l%100!==11?"–º–µ—Å—è—Ü":[2,3,4].includes(l%10)&&![12,13,14].includes(l%100)?"–º–µ—Å—è—Ü–∞":"–º–µ—Å—è—Ü–µ–≤",V=l=>l%10===1&&l%100!==11?"–≥–æ–¥":[2,3,4].includes(l%10)&&![12,13,14].includes(l%100)?"–≥–æ–¥–∞":"–ª–µ—Ç";Ge(async()=>{var l;if((l=a.comment)!=null&&l.user_avatar){const w=await Mn();d.value="".concat(w).concat(a.comment.user_avatar)}document.addEventListener("click",oe)}),st(()=>{document.removeEventListener("click",oe)});const K=F(()=>{var l;return a.currentUser&&((l=a.comment)==null?void 0:l.user_id)===a.currentUser.id}),Z=F(()=>{var l;return a.currentUser&&((l=a.comment)==null?void 0:l.user_id)===a.currentUser.id||a.currentUser&&a.currentUser.is_admin===1}),I=F(()=>{var l,w,G;return((l=a.comment)==null?void 0:l.updated_at)&&((w=a.comment)==null?void 0:w.updated_at)!==((G=a.comment)==null?void 0:G.created_at)}),O=F(()=>{var l,w;return(l=a.comment)!=null&&l.is_deleted?!1:(((w=a.comment)==null?void 0:w.rating)||0)<=-3}),H=F(()=>O.value),Q=f(!1),ye=F(()=>{var l,w;return(l=a.comment)!=null&&l.is_deleted?null:(((w=a.comment)==null?void 0:w.rating)||0)<=-3?"lowRating":null}),ne=()=>{var l,w;t("start-edit",(l=a.comment)==null?void 0:l.id),m.value=((w=a.comment)==null?void 0:w.content)||"",he(()=>{E.value&&(E.value.focus(),ue({target:E.value}))})},L=()=>{var l;t("cancel-edit"),m.value=((l=a.comment)==null?void 0:l.content)||""},N=()=>{var l;m.value.trim()&&t("edit",(l=a.comment)==null?void 0:l.id,m.value.trim())},Ie=()=>{var l;confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π?")&&t("delete",(l=a.comment)==null?void 0:l.id)},Pe=l=>{var w,G;_.value===l?(_.value=0,t("rate",(w=a.comment)==null?void 0:w.id,l)):(_.value=l,t("rate",(G=a.comment)==null?void 0:G.id,l))},Ae=()=>{var l;c.push("/lists/".concat((l=a.comment)==null?void 0:l.user_id))},_e=l=>{l.key==="Enter"&&!l.shiftKey&&(l.preventDefault(),N())},Re=F(()=>{var l,w;return((w=(l=a.comment)==null?void 0:l.content)==null?void 0:w.length)>300}),ie=f(!1),$=F(()=>{var l,w,G;return Re.value&&!ie.value?((w=(l=a.comment)==null?void 0:l.content)==null?void 0:w.slice(0,300))+"...":((G=a.comment)==null?void 0:G.content)||""}),v=F(()=>{var se;if(!((se=a.comment)!=null&&se.content))return"";let l=a.comment.content;if(Re.value&&!ie.value){let q=l.slice(0,300);const Y=(l.match(/\[img\].*?\[\/img\]/g)||[]).length,xe=(q.match(/\[img\].*?\[\/img\]/g)||[]).length,$e=Y-xe,Me=q.lastIndexOf("[img]"),y=q.lastIndexOf("[/img]");Me>y&&Me!==-1&&(q=l.slice(0,Me)),q=q.trim();const o=["[img","[im","[i","["];for(const pe of o)if(q.endsWith(pe)){const Ce=q.lastIndexOf("[");if(Ce!==-1){q=q.slice(0,Ce).trim();break}}const x=["[/img","[/im","[/i","[/"];for(const pe of x)if(q.endsWith(pe)){const Ce=q.lastIndexOf("[");if(Ce!==-1){q=q.slice(0,Ce).trim();break}}let ce="...";$e>0&&(ce="... (+".concat($e," ").concat($e===1?"–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ":"–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π",")")),l=q+ce}const w=q=>{try{const me=new URL(q),Y=me.hostname==="cdn.7tv.app"&&me.protocol==="https:";return Y||console.warn("URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç–∫–ª–æ–Ω–µ–Ω:",{url:q,hostname:me.hostname,protocol:me.protocol,reason:me.hostname!=="cdn.7tv.app"?"–Ω–µ—Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–π –¥–æ–º–µ–Ω":"–Ω–µ—Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª"}),Y}catch(me){return console.warn("–ù–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–π URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:",q,"–û—à–∏–±–∫–∞:",me.message),!1}},G=q=>{const me=document.createElement("div");return me.textContent=q,me.innerHTML};let ke=l.replace(/\[img\](.*?)\[\/img\]/g,(q,me)=>{const Y=me.trim();if(w(Y)){const xe=G(Y);return'<img src="'.concat(xe,'" alt="7TV emote" class="inline-emoji" loading="lazy" />')}return"[–Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: ".concat(G(Y),"]")});return ke=ke.replace(new RegExp("\\[spoiler\\](.*?)\\[\\/spoiler\\]","gs"),(q,me,Y,xe)=>{const $e=G(me.trim()),Me=Y>0?xe[Y-1]:" ",y=Y+q.length<xe.length?xe[Y+q.length]:" ",o=Me&&Me!==" "&&Me!=="\n"&&Me!=="	",x=y&&y!==" "&&y!=="\n"&&y!=="	",ce=o?" ":"",pe=x?" ":"";return"".concat(ce,'<span class="spoiler-text" onclick="this.classList.toggle(\'revealed\')" title="–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä">').concat($e,"</span>").concat(pe)}),ke}),ae=()=>{ie.value=!ie.value},ue=l=>{const w=l.target;w&&(w.style.height="auto",w.style.height="".concat(Math.min(w.scrollHeight,200),"px"))},W=l=>{const w=E.value;if(w){const G=w.selectionStart,ke=w.selectionEnd,se=m.value.substring(0,G),q=m.value.substring(ke);m.value=se+l+q,he(()=>{w.focus(),w.setSelectionRange(G+l.length,G+l.length),ue({target:w})})}else m.value+=l},De=()=>{u.value=!0},Te=()=>{u.value=!1,setTimeout(()=>{!u.value&&!s.value&&(C.value=!1)},300)},Ne=()=>{C.value=!1},Oe=()=>{s.value=!0,C.value=!0,k.value=!1},Ee=()=>{s.value=!1,setTimeout(()=>{!u.value&&!B.value&&!s.value&&(C.value=!1,k.value=!1)},300)},be=()=>{console.log("Avatar load error, falling back to initials"),d.value=null,he(()=>{const l=document.querySelector(".avatar-placeholder");l&&(l.style.display="flex")})},Ve=()=>{B.value=!0},Ue=()=>{B.value=!1,setTimeout(()=>{!B.value&&!s.value&&(k.value=!1)},300)},h=()=>{k.value=!1},j=()=>{s.value=!0,k.value=!0,C.value=!1},D=l=>{const w=E.value;if(w){const G=w.selectionStart,ke=w.selectionEnd,se="[img]".concat(l,"[/img]");m.value=m.value.slice(0,G)+se+m.value.slice(ke),he(()=>{w.focus(),w.setSelectionRange(G+se.length,G+se.length),ue({target:w})})}},X=()=>{const l=E.value;if(l){const w=l.selectionStart,G=l.selectionEnd,ke=m.value.slice(w,G);let se;ke.trim()?se="[spoiler]".concat(ke,"[/spoiler]"):se="[spoiler][/spoiler]",m.value=m.value.slice(0,w)+se+m.value.slice(G),he(()=>{if(l.focus(),ke.trim())l.setSelectionRange(w+se.length,w+se.length);else{const q=w+9;l.setSelectionRange(q,q)}ue({target:l})})}},ve=()=>{C.value=!1,k.value=!1},oe=l=>{!l.target.closest(".emoji-picker")&&!l.target.closest(".image-picker")&&!l.target.closest(".emoji-button-inline")&&ve()},fe=()=>{c.push("/login")};return ze(m,()=>{n.value&&E.value&&he(()=>{ue({target:E.value})})}),{isEditing:n,editContent:m,userRating:_,isCommentOwner:K,canDeleteComment:Z,isCommentEdited:I,formatDate:z,formatRelativeTime:te,startEdit:ne,cancelEdit:L,saveEdit:N,confirmDelete:Ie,rateComment:Pe,avatarUrl:d,getInitials:U,goToUserLists:Ae,handleEditKeydown:_e,isCommentHidden:H,showHiddenComment:Q,hiddenCommentReason:ye,isLongComment:Re,isExpanded:ie,displayedText:$,formattedContent:v,toggleExpanded:ae,autoResizeEdit:ue,editTextarea:E,showEmojiPicker:C,showImagePicker:k,insertEmojiEdit:W,insertImageEdit:D,insertSpoilerEdit:X,handleEmojiMouseEnter:De,handleEmojiMouseLeave:Te,handleImageMouseEnter:Ve,handleImageMouseLeave:Ue,closeEmojiPicker:Ne,closeImagePicker:h,handleButtonMouseEnter:Oe,handleButtonMouseLeave:Ee,handleImageButtonMouseEnter:j,handleAvatarError:be,openLogin:fe}}},Gs=["data-comment-id"],Zs={class:"comment-header"},Qs={class:"user-info"},Xs=["href"],Js={class:"user-avatar"},el=["src","alt"],tl={class:"user-details"},nl=["href"],ol={class:"username"},sl={key:0,class:"user-rating"},ll=["title"],il=["title"],al={class:"comment-content"},rl={key:0,class:"hidden-comment-warning"},ul={key:1},cl={key:0,class:"deleted-comment"},dl={key:1},vl={key:0,class:"edit-form"},ml={class:"edit-textarea-container"},fl={class:"edit-footer"},gl={class:"edit-actions"},yl=["disabled"],kl={class:"character-counter-container"},pl={key:1,class:"comment-text-container"},hl=["innerHTML"],bl={class:"comment-footer"},Cl={class:"comment-actions"},wl={class:"rating-buttons"},_l={class:"action-buttons"};function El(a,t,c,n,m,_){var C,s,u,k,B,U,z,te,S,T,b,P,R,V,K,Z,I,O,H,Q,ye,ne;const d=je("EmojiPicker"),E=je("ImagePicker");return i(),r("div",{class:"comment-item","data-comment-id":(C=c.comment)==null?void 0:C.id},[e("div",Zs,[e("div",Qs,[e("a",{href:"/lists/".concat((s=c.comment)==null?void 0:s.user_id),target:"_blank",rel:"noopener noreferrer",class:"user-avatar-link"},[e("div",Js,[n.avatarUrl?(i(),r("img",{key:0,src:n.avatarUrl,alt:((u=c.comment)==null?void 0:u.username)||"–ê–Ω–æ–Ω–∏–º",onError:t[0]||(t[0]=(...L)=>n.handleAvatarError&&n.handleAvatarError(...L)),onerror:"this.onerror=null; this.style.display='none'; this.nextElementSibling.style.display='flex';"},null,40,el)):(i(),r("div",{key:1,class:"avatar-placeholder",style:lt({display:n.avatarUrl?"none":"flex"})},g(n.getInitials(((k=c.comment)==null?void 0:k.username)||"–ê–Ω–æ–Ω–∏–º")),5))])],8,Xs),e("div",tl,[e("a",{href:"/lists/".concat((B=c.comment)==null?void 0:B.user_id),target:"_blank",rel:"noopener noreferrer",class:"username-link"},[e("span",ol,g(((U=c.comment)==null?void 0:U.username)||"–ê–Ω–æ–Ω–∏–º"),1)],8,nl),(z=c.comment)!=null&&z.user_movie_rating?(i(),r("span",sl,[t[18]||(t[18]=e("i",{class:"fas fa-star"},null,-1)),re(" "+g(c.comment.user_movie_rating),1)])):p("",!0),e("span",{class:"date",title:n.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((te=c.comment)==null?void 0:te.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(n.formatDate((S=c.comment)==null?void 0:S.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((T=c.comment)==null?void 0:T.created_at))},[re(g(n.formatRelativeTime((b=c.comment)==null?void 0:b.created_at))+" ",1),n.isCommentEdited?(i(),r("i",{key:0,class:"fas fa-pencil-alt edit-icon",title:n.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((P=c.comment)==null?void 0:P.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(n.formatDate((R=c.comment)==null?void 0:R.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((V=c.comment)==null?void 0:V.created_at))},null,8,il)):p("",!0)],8,ll)])])]),e("div",al,[!((K=c.comment)!=null&&K.is_deleted)&&n.isCommentHidden&&!n.showHiddenComment?(i(),r("div",rl,[n.hiddenCommentReason==="lowRating"?(i(),r("p",{key:0,class:"warning-text",onClick:t[1]||(t[1]=L=>n.showHiddenComment=!0)},t[19]||(t[19]=[e("i",{class:"fas fa-eye-slash"},null,-1),re(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–∫—Ä—ã—Ç –∏–∑-–∑–∞ –Ω–∏–∑–∫–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å. ")]))):p("",!0)])):(i(),r("div",ul,[(Z=c.comment)!=null&&Z.is_deleted?(i(),r("div",cl,t[20]||(t[20]=[e("p",{class:"deleted-message"},[e("i",{class:"fas fa-trash"}),re(" –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —É–¥–∞–ª—ë–Ω ")],-1)]))):(i(),r("div",dl,[n.isEditing?(i(),r("div",vl,[e("div",ml,[ee(e("textarea",{ref:"editTextarea","onUpdate:modelValue":t[2]||(t[2]=L=>n.editContent=L),class:"edit-textarea",rows:"3",maxlength:"1500",onKeydown:t[3]||(t[3]=(...L)=>n.handleEditKeydown&&n.handleEditKeydown(...L)),onInput:t[4]||(t[4]=(...L)=>n.autoResizeEdit&&n.autoResizeEdit(...L))},null,544),[[vt,n.editContent]])]),e("div",fl,[e("div",gl,[e("button",{onClick:t[5]||(t[5]=(...L)=>n.cancelEdit&&n.cancelEdit(...L)),class:"cancel-button"},"–û—Ç–º–µ–Ω–∞"),e("button",{onClick:t[6]||(t[6]=(...L)=>n.saveEdit&&n.saveEdit(...L)),class:"save-button",disabled:!n.editContent.trim()||n.editContent.length>1500}," –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ",8,yl)]),e("div",kl,[e("div",{class:A(["character-counter-inline",{"near-limit":n.editContent.length>1400,"at-limit":n.editContent.length>=1500}])},g(n.editContent.length)+"/1500 ",3),e("button",{type:"button",class:A(["emoji-button-inline",{active:n.showEmojiPicker}]),onMouseenter:t[7]||(t[7]=(...L)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...L)),onMouseleave:t[8]||(t[8]=(...L)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...L))}," üòä ",34),e("button",{type:"button",class:A(["emoji-button-inline",{active:n.showImagePicker}]),onMouseenter:t[9]||(t[9]=(...L)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...L)),onMouseleave:t[10]||(t[10]=(...L)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...L))},t[21]||(t[21]=[ot('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-eeb13b19><g id="logo" data-v-eeb13b19><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-eeb13b19></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-eeb13b19></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-eeb13b19></path></g></svg>',1)]),34),e("button",{type:"button",class:"emoji-button-inline spoiler-button",onClick:t[11]||(t[11]=(...L)=>n.insertSpoilerEdit&&n.insertSpoilerEdit(...L)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},t[22]||(t[22]=[e("i",{class:"fas fa-eye-slash"},null,-1)])),we(d,{"is-visible":n.showEmojiPicker,onEmojiSelected:n.insertEmojiEdit,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),we(E,{"is-visible":n.showImagePicker,"current-user":c.currentUser,onImageSelected:n.insertImageEdit,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:n.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"])])])])):(i(),r("div",pl,[e("p",{class:A(["comment-text",{truncated:n.isLongComment&&!n.isExpanded}]),innerHTML:n.formattedContent},null,10,hl),n.isLongComment?(i(),r("button",{key:0,onClick:t[12]||(t[12]=(...L)=>n.toggleExpanded&&n.toggleExpanded(...L)),class:"expand-button"},g(n.isExpanded?"–°–≤–µ—Ä–Ω—É—Ç—å":"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å"),1)):p("",!0)]))]))]))]),e("div",bl,[e("div",Cl,[e("div",wl,[!n.isCommentOwner&&!((I=c.comment)!=null&&I.is_deleted)?(i(),r("button",{key:0,onClick:t[13]||(t[13]=L=>n.rateComment(1)),class:A(["rating-button",{"rated-up":n.userRating===1}])},t[23]||(t[23]=[e("i",{class:"fas fa-thumbs-up"},null,-1)]),2)):p("",!0),e("span",{class:A(["rating-count",{"rating-positive":n.userRating===1,"rating-negative":n.userRating===-1}])},g(((O=c.comment)==null?void 0:O.rating)||0),3),!n.isCommentOwner&&!((H=c.comment)!=null&&H.is_deleted)?(i(),r("button",{key:1,onClick:t[14]||(t[14]=L=>n.rateComment(-1)),class:A(["rating-button",{"rated-down":n.userRating===-1}])},t[24]||(t[24]=[e("i",{class:"fas fa-thumbs-down"},null,-1)]),2)):p("",!0)]),e("div",_l,[!c.currentUser||c.currentUser.allow_comments===1?(i(),r("button",{key:0,onClick:t[15]||(t[15]=L=>a.$emit("reply",c.comment)),class:"action-button reply-button"},t[25]||(t[25]=[e("i",{class:"fas fa-reply"},null,-1)]))):p("",!0),n.isCommentOwner&&!((Q=c.comment)!=null&&Q.is_deleted)&&!n.isEditing&&((ye=c.currentUser)==null?void 0:ye.allow_comments)===1?(i(),r("button",{key:1,onClick:t[16]||(t[16]=(...L)=>n.startEdit&&n.startEdit(...L)),class:"action-button edit-button"},t[26]||(t[26]=[e("i",{class:"fas fa-edit"},null,-1)]))):p("",!0),n.canDeleteComment&&!((ne=c.comment)!=null&&ne.is_deleted)?(i(),r("button",{key:2,onClick:t[17]||(t[17]=(...L)=>n.confirmDelete&&n.confirmDelete(...L)),class:"action-button delete-button"},t[27]||(t[27]=[e("i",{class:"fas fa-trash"},null,-1)]))):p("",!0)])])])],8,Gs)}const Ml=Be(Ys,[["render",El],["__scopeId","data-v-eeb13b19"]]),Il={name:"CommentThread",components:{CommentItem:Ml,EmojiPicker:mt,ImagePicker:ft},props:{comment:{type:Object,required:!0},currentUser:{type:Object,required:!0},replyTo:{type:Object,default:null},replyContent:{type:String,default:""},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate","submit-reply","cancel-reply","update-reply-content","reply-keydown"],setup(a,{emit:t}){const c=f(null),n=f(!1),m=f(!1),_=f(!1),d=f(!1),E=f(!1),C=f(!1),s=O=>{t("update-reply-content",O.target.value);const H=O.target;H&&(H.style.height="auto",H.style.height="".concat(Math.min(H.scrollHeight,200),"px"))},u=O=>{const H=c.value;if(H){const Q=H.selectionStart,ye=H.selectionEnd,ne=H.value,L=ne.substring(0,Q),N=ne.substring(ye);H.value=L+O+N,t("update-reply-content",H.value),he(()=>{H.focus(),H.setSelectionRange(Q+O.length,Q+O.length),s({target:H})})}},k=()=>{d.value=!0},B=()=>{d.value=!1,setTimeout(()=>{!d.value&&!_.value&&(n.value=!1)},300)},U=()=>{_.value=!0,n.value=!0,m.value=!1},z=()=>{_.value=!1,setTimeout(()=>{!d.value&&!E.value&&!_.value&&(n.value=!1,m.value=!1)},300)},te=()=>{n.value=!1},S=()=>{E.value=!0},T=()=>{E.value=!1,setTimeout(()=>{!E.value&&!_.value&&(m.value=!1)},300)},b=()=>{m.value=!1},P=()=>{_.value=!0,m.value=!0,n.value=!1},R=O=>{const H=c.value;if(H){const Q=H.selectionStart,ye=H.selectionEnd,ne="[img]".concat(O,"[/img]"),L=H.value.slice(0,Q)+ne+H.value.slice(ye);H.value=L,t("update-reply-content",L),he(()=>{H.focus(),H.setSelectionRange(Q+ne.length,Q+ne.length),s({target:H})})}},V=()=>{const O=c.value;if(O){const H=O.selectionStart,Q=O.selectionEnd,ye=O.value.slice(H,Q);let ne;ye.trim()?ne="[spoiler]".concat(ye,"[/spoiler]"):ne="[spoiler][/spoiler]";const L=O.value.slice(0,H)+ne+O.value.slice(Q);O.value=L,t("update-reply-content",L),he(()=>{if(O.focus(),ye.trim())O.setSelectionRange(H+ne.length,H+ne.length);else{const N=H+9;O.setSelectionRange(N,N)}s({target:O})})}},K=()=>{C.value=!C.value},Z=()=>{n.value=!1,m.value=!1},I=O=>{!O.target.closest(".emoji-picker")&&!O.target.closest(".image-picker")&&!O.target.closest(".emoji-button-inline")&&Z()};return Ge(()=>{document.addEventListener("click",I)}),st(()=>{document.removeEventListener("click",I)}),{replyTextarea:c,showEmojiPicker:n,showImagePicker:m,isCollapsed:C,insertEmoji:u,insertImage:R,insertSpoiler:V,handleEmojiMouseEnter:k,handleEmojiMouseLeave:B,handleImageMouseEnter:S,handleImageMouseLeave:T,handleButtonMouseEnter:U,handleButtonMouseLeave:z,closeEmojiPicker:te,closeImagePicker:b,handleImageButtonMouseEnter:P,handleReplyInput:s,toggleCollapsed:K,closeAllPickers:Z}},computed:{canReply(){return this.currentUser?this.currentUser.allow_comments===1:!0},getReplyPlaceholder(){return this.currentUser?this.currentUser.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç..."},formattedContent(){if(!this.comment.content)return"";const a=n=>{try{const m=new URL(n),_=m.hostname==="cdn.7tv.app"&&m.protocol==="https:";return _||console.warn("URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç–∫–ª–æ–Ω–µ–Ω:",{url:n,hostname:m.hostname,protocol:m.protocol,reason:m.hostname!=="cdn.7tv.app"?"–Ω–µ—Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–π –¥–æ–º–µ–Ω":"–Ω–µ—Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª"}),_}catch(m){return console.warn("–ù–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–π URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:",n,"–û—à–∏–±–∫–∞:",m.message),!1}},t=n=>{const m=document.createElement("div");return m.textContent=n,m.innerHTML};let c=this.comment.content.replace(/\[img\](.*?)\[\/img\]/g,(n,m)=>{const _=m.trim();if(a(_)){const d=t(_);return'<img src="'.concat(d,'" alt="7TV emote" class="inline-emoji" loading="lazy" />')}return"[–Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: ".concat(t(_),"]")});return c=c.replace(new RegExp("\\[spoiler\\](.*?)\\[\\/spoiler\\]","gs"),(n,m,_,d)=>{const E=t(m.trim()),C=_>0?d[_-1]:" ",s=_+n.length<d.length?d[_+n.length]:" ",u=C&&C!==" "&&C!=="\n"&&C!=="	",k=s&&s!==" "&&s!=="\n"&&s!=="	",B=u?" ":"",U=k?" ":"";return"".concat(B,'<span class="spoiler-text" onclick="this.classList.toggle(\'revealed\')" title="–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä">').concat(E,"</span>").concat(U)}),c}}},Ll={class:"comment-thread"},Rl={key:0,class:"reply-form"},Tl={class:"textarea-container"},$l=["value","placeholder","disabled"],Al={class:"reply-footer"},Sl={class:"reply-actions"},Pl=["disabled"],Ul={class:"character-counter-container"},xl=["disabled"],Hl={key:1,class:"replies-container"},jl=["title"],Bl={class:"replies-count"},Dl=["title"],Nl={key:0,class:"replies-content"};function Ol(a,t,c,n,m,_){const d=je("CommentItem"),E=je("EmojiPicker"),C=je("ImagePicker"),s=je("CommentThread",!0);return i(),r("div",Ll,[we(d,{comment:c.comment,"current-user":c.currentUser,"editing-comment-id":c.editingCommentId,onReply:t[0]||(t[0]=u=>a.$emit("reply",u)),onStartEdit:t[1]||(t[1]=u=>a.$emit("start-edit",u)),onCancelEdit:t[2]||(t[2]=u=>a.$emit("cancel-edit")),onEdit:t[3]||(t[3]=(u,k)=>a.$emit("edit",u,k)),onDelete:t[4]||(t[4]=u=>a.$emit("delete",u)),onRate:t[5]||(t[5]=(u,k)=>a.$emit("rate",u,k))},null,8,["comment","current-user","editing-comment-id"]),c.replyTo&&c.replyTo.id===c.comment.id?(i(),r("div",Rl,[e("div",Tl,[e("textarea",{ref:"replyTextarea",class:"comment-textarea",value:c.replyContent,placeholder:_.getReplyPlaceholder,disabled:c.currentUser&&c.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:t[6]||(t[6]=(...u)=>n.handleReplyInput&&n.handleReplyInput(...u)),onKeydown:t[7]||(t[7]=u=>a.$emit("reply-keydown",u))},null,40,$l)]),e("div",Al,[e("div",Sl,[e("button",{class:"cancel-reply",onClick:t[8]||(t[8]=u=>a.$emit("cancel-reply"))},"–û—Ç–º–µ–Ω–∞"),e("button",{class:"submit-button",disabled:!c.replyContent.trim()||c.replyContent.length>1500||c.currentUser&&c.currentUser.allow_comments!==1,onClick:t[9]||(t[9]=u=>a.$emit("submit-reply"))}," –û—Ç–≤–µ—Ç–∏—Ç—å ",8,Pl)]),e("div",Ul,[e("div",{class:A(["character-counter-inline",{"near-limit":c.replyContent.length>1400,"at-limit":c.replyContent.length>=1500}])},g(c.replyContent.length)+"/1500 ",3),e("button",{type:"button",class:A(["emoji-button-inline",{active:n.showEmojiPicker}]),onMouseenter:t[10]||(t[10]=(...u)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...u)),onMouseleave:t[11]||(t[11]=(...u)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...u))}," üòä ",34),e("button",{type:"button",class:A(["emoji-button-inline",{active:n.showImagePicker}]),onMouseenter:t[12]||(t[12]=(...u)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...u)),onMouseleave:t[13]||(t[13]=(...u)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...u))},t[27]||(t[27]=[ot('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-9fb2806a><g id="logo" data-v-9fb2806a><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-9fb2806a></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-9fb2806a></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-9fb2806a></path></g></svg>',1)]),34),e("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:c.currentUser&&c.currentUser.allow_comments!==1,onClick:t[14]||(t[14]=(...u)=>n.insertSpoiler&&n.insertSpoiler(...u)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},t[28]||(t[28]=[e("i",{class:"fas fa-eye-slash"},null,-1)]),8,xl),we(E,{"is-visible":n.showEmojiPicker,onEmojiSelected:n.insertEmoji,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),we(C,{"is-visible":n.showImagePicker,"current-user":c.currentUser,onImageSelected:n.insertImage,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:a.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"])])])])):p("",!0),c.comment.replies&&c.comment.replies.length>0?(i(),r("div",Hl,[e("button",{class:"collapse-toggle",title:n.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:t[15]||(t[15]=(...u)=>n.toggleCollapsed&&n.toggleCollapsed(...u))},[e("span",{class:A(["collapse-icon",{expanded:!n.isCollapsed}])},t[29]||(t[29]=[e("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},[e("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1)]),2),e("span",Bl,g(c.comment.replies.length)+" "+g(c.comment.replies.length===1?"–æ—Ç–≤–µ—Ç":"–æ—Ç–≤–µ—Ç–æ–≤"),1)],8,jl),e("div",{class:"vertical-line-clickable",title:n.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:t[16]||(t[16]=(...u)=>n.toggleCollapsed&&n.toggleCollapsed(...u))},[e("div",{class:A(["vertical-line-visual",{collapsed:n.isCollapsed}])},null,2)],8,Dl),n.isCollapsed?p("",!0):(i(),r("div",Nl,[(i(!0),r(ge,null,Le(c.comment.replies,u=>(i(),He(s,{key:u.id,comment:u,"current-user":c.currentUser,"reply-to":c.replyTo,"reply-content":c.replyContent,"editing-comment-id":c.editingCommentId,onReply:t[17]||(t[17]=k=>a.$emit("reply",k)),onStartEdit:t[18]||(t[18]=k=>a.$emit("start-edit",k)),onCancelEdit:t[19]||(t[19]=k=>a.$emit("cancel-edit")),onEdit:t[20]||(t[20]=(k,B)=>a.$emit("edit",k,B)),onDelete:t[21]||(t[21]=k=>a.$emit("delete",k)),onRate:t[22]||(t[22]=(k,B)=>a.$emit("rate",k,B)),onSubmitReply:t[23]||(t[23]=k=>a.$emit("submit-reply")),onCancelReply:t[24]||(t[24]=k=>a.$emit("cancel-reply")),onUpdateReplyContent:t[25]||(t[25]=k=>a.$emit("update-reply-content",k)),onReplyKeydown:t[26]||(t[26]=k=>a.$emit("reply-keydown",k))},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id"]))),128))]))])):p("",!0)])}const Vl=Be(Il,[["render",Ol],["__scopeId","data-v-9fb2806a"]]),ql={name:"Comments",components:{CommentThread:Vl,Notification:rt,EmojiPicker:mt,ImagePicker:ft},props:{movieId:{type:[String,Number],required:!0}},setup(a){const t=dt(),c=at(),n=f([]),m=f(""),_=f(null),d=f(""),E=f(null),C=f(t.user),s=f(null),u=f(null),k=f(!1),B=f(!1),U=f(!1),z=f(!1),te=f(!1),S=f(!1),T=f(!1),b=F(()=>{const h=(j=null)=>n.value.filter(D=>D.parent_id===j).sort((D,X)=>D.id-X.id).map(D=>({...D,replies:h(D.id)})).filter(D=>!D.is_deleted||D.replies&&D.replies.length>0);return h()}),P=F(()=>{const h=j=>j.reduce((D,X)=>D+1+h(X.replies||[]),0);return h(b.value)}),R=h=>h===1?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π":h>=2&&h<=4?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è":"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤",V=async()=>{try{const h=await In(a.movieId);n.value=h}catch(h){console.error("Failed to load comments:",h),s.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.")}},K=async()=>{if(!T.value){if(!t.token){s.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:L});return}if(C.value&&C.value.allow_comments!==1){s.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(m.value.trim()){if(m.value.length>1500){s.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await cn(a.movieId,m.value.trim()),m.value="",await V(),k.value=!0,he(()=>{u.value&&(u.value.focus(),u.value.style.height="auto"),setTimeout(()=>{const h=document.querySelectorAll(".comment-item[data-comment-id]");if(h.length>0){const j=Array.from(h).map(D=>parseInt(D.getAttribute("data-comment-id"))).filter(D=>!isNaN(D));if(j.length>0){const D=Math.max(...j),X=document.querySelector('[data-comment-id="'.concat(D,'"]'));X&&X.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}},300)})}catch(h){console.error("Failed to create comment:",h),s.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}}}},Z=h=>{if(!t.token){s.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:L});return}E.value=null,_.value=h,d.value="",he(()=>{const j=document.querySelector(".reply-form");j&&j.scrollIntoView({behavior:"smooth",block:"center"})})},I=async()=>{if(!t.token){s.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:L});return}if(C.value&&C.value.allow_comments!==1){s.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!(!d.value.trim()||!_.value)){if(d.value.length>1500){s.value.showNotification("–û—Ç–≤–µ—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await cn(a.movieId,d.value.trim(),_.value.id);const h=_.value.id;await V(),d.value="",_.value=null,he(()=>{setTimeout(()=>{const j=document.querySelector('[data-comment-id="'.concat(h,'"]'));if(j){const D=j.querySelector(".replies-content");if(D){const X=D.querySelectorAll(".comment-item[data-comment-id]");if(X.length>0){const ve=Array.from(X).map(oe=>parseInt(oe.getAttribute("data-comment-id"))).filter(oe=>!isNaN(oe));if(ve.length>0){const oe=Math.max(...ve),fe=document.querySelector('[data-comment-id="'.concat(oe,'"]'));fe&&fe.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}}}},300)})}catch(h){console.error("Error submitting reply:",h),s.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}}},O=async(h,j)=>{if(!t.token){s.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:L});return}if(C.value&&C.value.allow_comments!==1){s.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(j.length>1500){s.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await Tn(h,j.trim()),await V(),E.value=null}catch(D){console.error("Failed to update comment:",D),s.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},H=async h=>{if(!t.token){s.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:L});return}try{await Rn(h),await V()}catch(j){console.error("Failed to delete comment:",j),s.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},Q=async(h,j)=>{if(!t.token){s.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:L});return}try{await Ln(h,j),await V()}catch(D){console.error("Failed to rate comment:",D),s.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ü–µ–Ω–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},ye=h=>{T.value||B.value||h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),K())},ne=h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),I())},L=()=>{c.push("/login")},N=h=>{const j=(h==null?void 0:h.target)||u.value;j&&(j.style.height="auto",j.style.height="".concat(Math.min(j.scrollHeight,200),"px"))},Ie=h=>{if(T.value=!0,u.value){const j=u.value.selectionStart,D=u.value.selectionEnd;m.value=m.value.slice(0,j)+h+m.value.slice(D),he(()=>{u.value.focus(),u.value.setSelectionRange(j+h.length,j+h.length),N(),setTimeout(()=>{T.value=!1},100)})}else T.value=!1},Pe=h=>{if(u.value){const j=u.value.selectionStart,D=u.value.selectionEnd,X="[img]".concat(h,"[/img]");m.value=m.value.slice(0,j)+X+m.value.slice(D),he(()=>{u.value.focus(),u.value.setSelectionRange(j+X.length,j+X.length),N()})}},Ae=()=>{if(u.value){const h=u.value.selectionStart,j=u.value.selectionEnd,D=m.value.slice(h,j);let X;D.trim()?X="[spoiler]".concat(D,"[/spoiler]"):X="[spoiler][/spoiler]",m.value=m.value.slice(0,h)+X+m.value.slice(j),he(()=>{if(u.value.focus(),D.trim())u.value.setSelectionRange(h+X.length,h+X.length);else{const ve=h+9;u.value.setSelectionRange(ve,ve)}N()})}},_e=h=>{if(!h)return"";const j=ve=>{try{const oe=new URL(ve),fe=oe.hostname==="cdn.7tv.app"&&oe.protocol==="https:";return fe||console.warn("URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç–∫–ª–æ–Ω–µ–Ω:",{url:ve,hostname:oe.hostname,protocol:oe.protocol,reason:oe.hostname!=="cdn.7tv.app"?"–Ω–µ—Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–π –¥–æ–º–µ–Ω":"–Ω–µ—Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª"}),fe}catch(oe){return console.warn("–ù–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–π URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:",ve,"–û—à–∏–±–∫–∞:",oe.message),!1}},D=ve=>{const oe=document.createElement("div");return oe.textContent=ve,oe.innerHTML};let X=h.replace(/\[img\](.*?)\[\/img\]/g,(ve,oe)=>{const fe=oe.trim();if(j(fe)){const Se=D(fe);return'<img src="'.concat(Se,'" alt="7TV emote" class="inline-emoji" loading="lazy" />')}return"[–Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: ".concat(D(fe),"]")});return X=X.replace(new RegExp("\\[spoiler\\](.*?)\\[\\/spoiler\\]","gs"),(ve,oe,fe,Se)=>{const Ze=D(oe.trim()),l=fe>0?Se[fe-1]:" ",w=fe+ve.length<Se.length?Se[fe+ve.length]:" ",G=l&&l!==" "&&l!=="\n"&&l!=="	",ke=w&&w!==" "&&w!=="\n"&&w!=="	",se=G?" ":"",q=ke?" ":"";return"".concat(se,'<span class="spoiler-text" onclick="this.classList.toggle(\'revealed\')" title="–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä">').concat(Ze,"</span>").concat(q)}),X},Re=()=>{z.value=!0},ie=()=>{z.value=!1,setTimeout(()=>{!z.value&&!S.value&&(B.value=!1)},300)},$=()=>{B.value=!1},v=()=>{S.value=!1,setTimeout(()=>{!z.value&&!te.value&&!S.value&&(B.value=!1,U.value=!1)},300)},ae=()=>{S.value=!0,B.value=!0,U.value=!1},ue=()=>{te.value=!0},W=()=>{te.value=!1,setTimeout(()=>{!te.value&&!S.value&&(U.value=!1)},300)},De=()=>{U.value=!1},Te=()=>{S.value=!0,U.value=!0,B.value=!1},Ne=F(()=>C.value?C.value.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."),Oe=F(()=>C.value?C.value.allow_comments===1:!0),Ee=h=>{_.value=null,d.value="",E.value=h},be=()=>{E.value=null},Ve=()=>{B.value=!1,U.value=!1},Ue=h=>{!h.target.closest(".emoji-picker")&&!h.target.closest(".image-picker")&&!h.target.closest(".emoji-button-inline")&&Ve()};return Ge(()=>{V(),document.addEventListener("click",Ue)}),st(()=>{document.removeEventListener("click",Ue)}),{comments:n,groupedComments:b,newComment:m,replyTo:_,replyContent:d,editingCommentId:E,currentUser:C,notificationRef:s,commentTextarea:u,showComments:k,submitComment:K,handleReply:Z,submitReply:I,handleEdit:O,handleDelete:H,handleRate:Q,handleCommentKeydown:ye,handleReplyKeydown:ne,autoResize:N,totalCommentsCount:P,getCommentWordForm:R,showEmojiPicker:B,showImagePicker:U,insertEmoji:Ie,insertImage:Pe,formatCommentContent:_e,handleEmojiMouseEnter:Re,handleEmojiMouseLeave:ie,handleImageMouseEnter:ue,handleImageMouseLeave:W,closeEmojiPicker:$,closeImagePicker:De,handleButtonMouseLeave:v,handleButtonMouseEnter:ae,handleImageButtonMouseEnter:Te,getCommentPlaceholder:Ne,canComment:Oe,handleStartEdit:Ee,handleCancelEdit:be,insertSpoiler:Ae}}},Kl={class:"comments-section"},Wl={class:"spoiler-content"},Fl={key:1,class:"comments-container"},zl={class:"comments-header"},Yl={class:"textarea-container"},Gl=["placeholder","disabled"],Zl={class:"comment-footer"},Ql={class:"comment-actions"},Xl=["disabled"],Jl={class:"character-counter-container"},ei=["disabled"],ti=["disabled"],ni=["disabled"],oi={class:"comments-list"};function si(a,t,c,n,m,_){const d=je("EmojiPicker"),E=je("ImagePicker"),C=je("CommentThread"),s=je("Notification");return i(),r("div",Kl,[n.showComments?(i(),r("div",Fl,[e("div",zl,[e("button",{class:"hide-comments-btn",onClick:t[1]||(t[1]=u=>n.showComments=!1)},t[16]||(t[16]=[e("i",{class:"fas fa-eye-slash"},null,-1),re(" –°–∫—Ä—ã—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ")]))]),e("form",{class:"comment-form",onSubmit:t[10]||(t[10]=Ye((...u)=>n.submitComment&&n.submitComment(...u),["prevent"]))},[e("div",Yl,[ee(e("textarea",{ref:"commentTextarea","onUpdate:modelValue":t[2]||(t[2]=u=>n.newComment=u),class:"comment-textarea",placeholder:n.getCommentPlaceholder,disabled:n.currentUser&&n.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:t[3]||(t[3]=(...u)=>n.autoResize&&n.autoResize(...u)),onKeydown:t[4]||(t[4]=(...u)=>n.handleCommentKeydown&&n.handleCommentKeydown(...u))},null,40,Gl),[[vt,n.newComment]])]),e("div",Zl,[e("div",Ql,[e("button",{class:"submit-button",type:"submit",disabled:!n.newComment.trim()||n.newComment.length>1500||n.currentUser&&n.currentUser.allow_comments!==1}," –û—Ç–ø—Ä–∞–≤–∏—Ç—å ",8,Xl)]),e("div",Jl,[e("div",{class:A(["character-counter-inline",{"near-limit":n.newComment.length>1400,"at-limit":n.newComment.length>=1500}])},g(n.newComment.length)+"/1500 ",3),e("button",{type:"button",class:A(["emoji-button-inline",{active:n.showEmojiPicker}]),disabled:n.currentUser&&n.currentUser.allow_comments!==1,onMouseenter:t[5]||(t[5]=(...u)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...u)),onMouseleave:t[6]||(t[6]=(...u)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...u))}," üòä ",42,ei),e("button",{type:"button",class:A(["emoji-button-inline",{active:n.showImagePicker}]),disabled:n.currentUser&&n.currentUser.allow_comments!==1,onMouseenter:t[7]||(t[7]=(...u)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...u)),onMouseleave:t[8]||(t[8]=(...u)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...u))},t[17]||(t[17]=[ot('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-0e4b5317><g id="logo" data-v-0e4b5317><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-0e4b5317></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-0e4b5317></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-0e4b5317></path></g></svg>',1)]),42,ti),e("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:n.currentUser&&n.currentUser.allow_comments!==1,onClick:t[9]||(t[9]=(...u)=>n.insertSpoiler&&n.insertSpoiler(...u)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},t[18]||(t[18]=[e("i",{class:"fas fa-eye-slash"},null,-1)]),8,ni),we(d,{"is-visible":n.showEmojiPicker&&n.canComment,onEmojiSelected:n.insertEmoji,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),we(E,{"is-visible":n.showImagePicker&&n.canComment,"current-user":n.currentUser,onImageSelected:n.insertImage,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:a.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"])])])],32),e("div",oi,[(i(!0),r(ge,null,Le(n.groupedComments,u=>(i(),He(C,{key:u.id,comment:u,"current-user":n.currentUser,"reply-to":n.replyTo,"reply-content":n.replyContent,"editing-comment-id":n.editingCommentId,"is-first-comment":!1,onReply:n.handleReply,onStartEdit:n.handleStartEdit,onCancelEdit:n.handleCancelEdit,onEdit:n.handleEdit,onDelete:n.handleDelete,onRate:n.handleRate,onSubmitReply:n.submitReply,onCancelReply:t[11]||(t[11]=k=>n.replyTo=null),onUpdateReplyContent:t[12]||(t[12]=k=>n.replyContent=k),onReplyKeydown:n.handleReplyKeydown},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id","onReply","onStartEdit","onCancelEdit","onEdit","onDelete","onRate","onSubmitReply","onReplyKeydown"]))),128))])])):(i(),r("div",{key:0,class:"spoiler-warning",onClick:t[0]||(t[0]=u=>n.showComments=!0)},[e("div",Wl,[t[13]||(t[13]=e("i",{class:"fas fa-eye-slash"},null,-1)),t[14]||(t[14]=e("h3",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–∫—Ä—ã—Ç—ã",-1)),t[15]||(t[15]=e("p",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä—ã. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å.",-1)),e("div",{class:A(["comments-count",{"no-comments":n.totalCommentsCount===0}])},[n.totalCommentsCount===0?(i(),r(ge,{key:0},[re(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç ")],64)):(i(),r(ge,{key:1},[re(g(n.totalCommentsCount)+" "+g(n.getCommentWordForm(n.totalCommentsCount)),1)],64))],2)])])),we(s,{ref:"notificationRef"},null,512)])}const li=Be(ql,[["render",si],["__scopeId","data-v-0e4b5317"]]),ii={class:"movie-info"},ai={class:"content"},ri={key:0,class:"content-card"},ui={class:"movie-skeleton"},ci={class:"movie-skeleton__player"},di={key:2,class:"content-card"},vi={key:3,class:"content-card"},mi={class:"content-header"},fi=["src"],gi={class:"content-title"},yi={key:0,class:"ratings-links"},ki={key:1},pi=["href","title"],hi={key:2},bi=["href","title"],Ci={key:3},wi=["href","title"],_i={key:4},Ei=["href","title"],Mi={key:5},Ii=["href"],Li={key:6,class:"rating-links-group"},Ri=["href"],Ti=["title"],$i={key:0,class:"fa-regular fa-face-grin-wink"},Ai={key:1,class:"fas fa-spinner fa-spin"},Si={key:2,class:"nudity-info-popup"},Pi={class:"nudity-info-content"},Ui=["content"],xi=["content"],Hi={class:"additional-info"},ji={class:"info-content"},Bi={class:"details-container"},Di={class:"info-list"},Ni={key:0},Oi={key:1},Vi={key:2},qi={key:3},Ki={key:4},Wi={key:5},Fi={key:6},zi={key:7},Yi={key:8},Gi={class:"content-info"},Zi={key:0,class:"content-description-text"},Qi={key:2,class:"comments-section"},Xi={key:3,class:"staff-section"},Ji={class:"staff-categories"},ea={key:0,class:"staff-category"},ta={class:"staff-list"},na=["href","title"],oa=["src","alt"],sa={class:"staff-name"},la={key:0,class:"staff-role"},ia=["href","title"],aa={key:1,class:"staff-category"},ra={class:"staff-names-container"},ua={class:"staff-names-list"},ca=["href"],da=["href","title"],va={key:2,class:"staff-category"},ma={class:"staff-names-container"},fa={class:"staff-names-list"},ga=["href"],ya=["href","title"],ka={key:4,class:"yt-video-container"},pa={key:5,class:"related-movies"},ha=["title"],ba={key:6,class:"related-movies"},Ca=["title"],wa={__name:"MovieInfo",setup(a){const t=f(!0),c=it(),n=dt(),m=$n(),_=yn(),d=f(_.params.kp_id),E=f(""),C=f(null),s=f(null),u=An(),B=Dn().areTrailersActive,U=f(null),z=f(!1),te=f(!1),S=f(10),T=f(null),b=f(!1),P=F(()=>c.isCommentsEnabled),R=()=>{if(s.value){const $=s.value.name_ru||s.value.name_en||s.value.name_original||"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å–º–µ";document.title=$}},V=$=>$?$.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",K=$=>($||[]).map(v=>({kp_id:v.film_id,poster:v.poster_url_preview||v.poster_url,title:v.name_ru||v.name_en||v.name_original})),Z=$=>{if(typeof $!="number")return;const v=Math.floor($/60),ae=$%60;return"".concat(v," —á. ").concat(ae," –º–∏–Ω.")},I=f(!1),O=f({top:"0px",left:"0px"}),H=$=>{I.value=!0,O.value={top:"".concat($.pageY+10,"px"),left:"".concat($.pageX-70,"px")}},Q=f(null),ye=async()=>{try{const $=[s.value.name_ru||s.value.name_en||s.value.name_original,...s.value.year?[s.value.year]:[],...s.value.film_length?[Z(s.value.film_length)]:[]];await navigator.clipboard.writeText($.join(", ")),Q.value.showNotification("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ")}catch($){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",$)}},ne=async($=!0)=>{var v,ae,ue,W,De,Te,Ne,Oe;try{let Ee;if(d.value.startsWith("shiki")?Ee=await Pn(d.value):Ee=await Un(d.value,n.token),Array.isArray(Ee)&&Ee.length===0)throw new Error("–î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–∏—Å–∫.");s.value=Ee,d.value.startsWith("shiki")?s.value={...s.value,title:s.value.name_ru||s.value.name_en,name_original:s.value.name_en,short_description:s.value.slogan}:s.value={...s.value,title:s.value.name_ru||s.value.name_en||s.value.name_original,kinopoisk_id:d.value},u.setHeaderContent({text:s.value.title,imageUrl:s.value.logo_url}),R();const be={kp_id:d.value,title:((v=s.value)==null?void 0:v.name_ru)||((ae=s.value)==null?void 0:ae.name_en)||((ue=s.value)==null?void 0:ue.name_original),poster:((W=s.value)==null?void 0:W.poster_url)||((De=s.value)==null?void 0:De.cover_url)||((Te=s.value)==null?void 0:Te.screenshots[0]),year:(Ne=s.value)==null?void 0:Ne.year,type:(Oe=s.value)==null?void 0:Oe.type};if(d.value.startsWith("shiki"))if(s.value.screenshots&&s.value.screenshots.length>0){const Ue=Math.floor(Math.random()*s.value.screenshots.length),h=s.value.screenshots[Ue];m.updateMoviePoster(h)}else be.poster&&m.updateMoviePoster(be.poster);else be.poster&&m.updateMoviePoster(be.poster);if(F(()=>c.isHistoryAllowed).value&&be.kp_id&&be.title&&$)if(n.token)try{await pn(be.kp_id,J.HISTORY)}catch(Ue){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é:",Ue)}else c.addToHistory({...be})}catch(Ee){const{message:be,code:Ve}=ct(Ee);E.value=be,C.value=Ve,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–ª—å–º–∞—Ö:",Ee)}},L=F(()=>{var $,v;return console.log("–¢—Ä–µ–π–ª–µ—Ä—ã:",($=s.value)==null?void 0:$.videos),(v=s.value)==null?void 0:v.videos}),N=F(()=>{var $;return K(($=s.value)==null?void 0:$.sequels_and_prequels)}),Ie=F(()=>{var $;return K(($=s.value)==null?void 0:$.similars)}),Pe=()=>{var ue;const $=((ue=document.querySelector(".related-movies"))==null?void 0:ue.clientWidth)||0,ae=Math.floor($/160)||10;S.value=Math.max(1,ae)},Ae=()=>{Pe()},_e=$=>{if($.altKey&&$.keyCode===84&&document.querySelector(".player-container")){const ae=document.querySelector(".theater-mode-btn");ae&&ae.click()}},Re=async()=>{var $;if(!n.token){Q.value.showNotification('–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:()=>u.openLogin()});return}if(($=s.value)!=null&&$.imdb_id){if(T.value){T.value=null;return}b.value=!0;try{const v=await xn(s.value.imdb_id);T.value=v.nudity_info}catch(v){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö:",v),Q.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö")}finally{b.value=!1}}};Ge(async()=>{await ne(),t.value=!1,document.addEventListener("keydown",_e),window.addEventListener("resize",Ae),setTimeout(Pe,100)}),Sn(async()=>{u.clearHeaderContent(),document.removeEventListener("keydown",_e),window.removeEventListener("resize",Ae)}),ze(()=>_.params.kp_id,async $=>{$&&$!==d.value&&(u.clearHeaderContent(),d.value=$,U.value=null,await ne(),t.value=!1)},{immediate:!0}),ze(s,()=>{R()},{deep:!0});const ie=$=>{var v,ae;return((ae=(v=s.value)==null?void 0:v.staff)==null?void 0:ae.filter(ue=>ue.profession_key===$))||[]};return($,v)=>{var ae,ue;return i(),r(ge,null,[e("div",ii,[e("div",ai,[(t.value||!s.value)&&!E.value?(i(),r("div",ri,[e("div",ui,[v[4]||(v[4]=ot('<div class="movie-skeleton__header" data-v-8c9baba0><div class="movie-skeleton__title" data-v-8c9baba0></div></div><div class="movie-skeleton__ratings" data-v-8c9baba0><div class="movie-skeleton__rating-item" data-v-8c9baba0></div><div class="movie-skeleton__rating-item" data-v-8c9baba0></div><div class="movie-skeleton__rating-item" data-v-8c9baba0></div></div>',2)),e("div",ci,[we(hn)]),v[5]||(v[5]=ot('<div class="movie-skeleton__additional-info" data-v-8c9baba0><div class="movie-skeleton__section-title" data-v-8c9baba0></div><div class="movie-skeleton__info-list" data-v-8c9baba0><div class="movie-skeleton__info-item" data-v-8c9baba0></div><div class="movie-skeleton__info-item" data-v-8c9baba0></div><div class="movie-skeleton__info-item" data-v-8c9baba0></div><div class="movie-skeleton__info-item" data-v-8c9baba0></div><div class="movie-skeleton__info-item" data-v-8c9baba0></div></div></div><div class="movie-skeleton__description" data-v-8c9baba0><div class="movie-skeleton__description-line" data-v-8c9baba0></div><div class="movie-skeleton__description-line" data-v-8c9baba0></div><div class="movie-skeleton__description-line" data-v-8c9baba0></div><div class="movie-skeleton__description-line" data-v-8c9baba0></div></div>',2))])])):p("",!0),E.value?(i(),He(kn,{key:1,message:E.value,code:C.value},null,8,["message","code"])):p("",!0),E.value?(i(),r("div",di,[(i(),He(gn,{key:d.value,"kp-id":d.value,"movie-info":s.value,"onUpdate:movieInfo":ne},null,8,["kp-id","movie-info"]))])):p("",!0),s.value&&!t.value?(i(),r("div",vi,[e("div",mi,[s.value.logo_url?(i(),r("div",{key:0,class:"content-logo",onMousemove:H,onMouseleave:v[0]||(v[0]=W=>I.value=!1),onClick:ye},[e("img",{src:s.value.logo_url,alt:"–õ–æ–≥–æ—Ç–∏–ø —Ñ–∏–ª—å–º–∞",class:"content-logo"},null,8,fi)],32)):(i(),r("div",{key:1,onMousemove:H,onMouseleave:v[1]||(v[1]=W=>I.value=!1),onClick:ye},[e("h1",gi,g(s.value.title),1)],32)),ee(e("div",{class:"title-copy-tooltip",style:lt(O.value)}," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ",4),[[le,I.value]])]),s.value.kinopoisk_id||s.value.title||s.value.imdb_id||s.value.rating_imdb||s.value.shikimori_id?(i(),r("div",yi,[s.value.kinopoisk_id?(i(),He(Is,{key:0,"kp-id":s.value.kinopoisk_id,"show-dash":!0},null,8,["kp-id"])):p("",!0),s.value.kinopoisk_id?(i(),r("div",ki,[e("a",{href:"https://www.kinopoisk.ru/film/".concat(s.value.kinopoisk_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:s.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(V(s.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[v[6]||(v[6]=e("img",{src:vn,alt:"–ö–ü",class:"rating-logo"},null,-1)),e("span",null,g(s.value.rating_kinopoisk?s.value.rating_kinopoisk:"‚Äî"),1),v[7]||(v[7]=e("img",{src:Qe,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,pi)])):p("",!0),!s.value.kinopoisk_id&&s.value.title?(i(),r("div",hi,[e("a",{href:"https://www.kinopoisk.ru/index.php?kp_query=".concat(encodeURIComponent(s.value.title+(s.value.year?" "+s.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:s.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(V(s.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[v[8]||(v[8]=e("img",{src:vn,alt:"–ö–ü",class:"rating-logo"},null,-1)),e("span",null,g(s.value.rating_kinopoisk?s.value.rating_kinopoisk:"‚Äî"),1),v[9]||(v[9]=e("img",{src:Qe,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,bi)])):p("",!0),s.value.imdb_id?(i(),r("div",Ci,[e("a",{href:"https://www.imdb.com/title/".concat(s.value.imdb_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:s.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(V(s.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[v[10]||(v[10]=e("img",{src:mn,alt:"IMDb",class:"rating-logo"},null,-1)),e("span",null,g(s.value.rating_imdb?s.value.rating_imdb:"‚Äî"),1),v[11]||(v[11]=e("img",{src:Qe,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,wi)])):p("",!0),!s.value.imdb_id&&s.value.title?(i(),r("div",_i,[e("a",{href:"https://www.imdb.com/find/?q=".concat(encodeURIComponent(s.value.title+(s.value.year?" "+s.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:s.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(V(s.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[v[12]||(v[12]=e("img",{src:mn,alt:"IMDb",class:"rating-logo"},null,-1)),e("span",null,g(s.value.rating_imdb?s.value.rating_imdb:"‚Äî"),1),v[13]||(v[13]=e("img",{src:Qe,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Ei)])):p("",!0),s.value.shikimori_id?(i(),r("div",Mi,[e("a",{href:"https://shikimori.one/animes/".concat(s.value.shikimori_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},v[14]||(v[14]=[e("img",{src:Nn,alt:"Shiki",class:"rating-logo"},null,-1),e("img",{src:Qe,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,Ii)])):p("",!0),s.value.imdb_id?(i(),r("div",Li,[e("a",{href:"https://www.imdb.com/title/".concat(s.value.imdb_id,"/parentalguide"),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},v[15]||(v[15]=[e("span",null,"Parents Guide",-1),e("img",{src:Qe,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,Ri),e("button",{class:"rating-link nudity-info-btn",onClick:Re,title:T.value?"–°–∫—Ä—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é":"–ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ü–µ–Ω–∞—Ö(Sex & Nudity)"},[b.value?(i(),r("i",Ai)):(i(),r("i",$i)),T.value?(i(),r("div",Si,[e("div",Pi,g(T.value),1)])):p("",!0)],8,Ti)])):p("",!0)])):p("",!0),(i(),He(gn,{key:d.value,"kp-id":d.value,"movie-info":s.value,"onUpdate:movieInfo":ne},null,8,["kp-id","movie-info"])),e("meta",{name:"title-and-year",content:s.value.type==="FILM"&&s.value.year?"".concat(s.value.title," (").concat(s.value.year,")"):s.value.title},null,8,Ui),s.value.name_original?(i(),r("meta",{key:1,name:"original-title",content:s.value.name_original},null,8,xi)):p("",!0),e("div",Hi,[v[25]||(v[25]=e("h2",{class:"additional-info-title"},"–ü–æ–¥—Ä–æ–±–Ω–µ–µ",-1)),e("div",ji,[e("div",Bi,[e("ul",Di,[s.value.type&&de(dn)[s.value.type]?(i(),r("li",Ni,[v[16]||(v[16]=e("strong",null,"–¢–∏–ø:",-1)),re(" "+g(de(dn)[s.value.type]),1)])):p("",!0),s.value.year?(i(),r("li",Oi,[v[17]||(v[17]=e("strong",null,"–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞:",-1)),re(" "+g(s.value.year),1)])):p("",!0),s.value.title?(i(),r("li",Vi,[v[18]||(v[18]=e("strong",null,"–ù–∞–∑–≤–∞–Ω–∏–µ:",-1)),re(" "+g(s.value.title),1)])):p("",!0),s.value.name_original?(i(),r("li",qi,[v[19]||(v[19]=e("strong",null,"–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:",-1)),re(" "+g(s.value.name_original),1)])):p("",!0),s.value.slogan?(i(),r("li",Ki,[v[20]||(v[20]=e("strong",null,"–°–ª–æ–≥–∞–Ω:",-1)),re(" "+g(s.value.slogan),1)])):p("",!0),s.value.production_companies?(i(),r("li",Wi,[v[21]||(v[21]=e("strong",null,"–ü—Ä–æ–¥–∞–∫—à–Ω:",-1)),re(" "+g(s.value.production_companies),1)])):p("",!0),(ae=s.value.countries)!=null&&ae.length?(i(),r("li",Fi,[v[22]||(v[22]=e("strong",null,"–°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞:",-1)),re(" "+g(s.value.countries.map(W=>W.country).join(", ")),1)])):p("",!0),(ue=s.value.genres)!=null&&ue.length?(i(),r("li",zi,[v[23]||(v[23]=e("strong",null,"–ñ–∞–Ω—Ä—ã:",-1)),re(" "+g(s.value.genres.map(W=>W.genre).join(", ")),1)])):p("",!0),s.value.film_length?(i(),r("li",Yi,[v[24]||(v[24]=e("strong",null,"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:",-1)),re(" "+g(Z(s.value.film_length)),1)])):p("",!0)])])])]),e("div",Gi,[s.value.description?(i(),r("p",Zi,g(s.value.description),1)):p("",!0)]),P.value?(i(),r("div",Qi,[(i(),He(li,{"movie-id":d.value,key:d.value},null,8,["movie-id"]))])):p("",!0),s.value.staff?(i(),r("div",Xi,[e("div",Ji,[ie("ACTOR").length?(i(),r("div",ea,[v[26]||(v[26]=e("h3",{class:"additional-info-title"},"–ê–∫—Ç—ë—Ä—ã",-1)),e("div",ta,[(i(!0),r(ge,null,Le(ie("ACTOR").slice(0,12),W=>(i(),r("div",{key:W.staff_id,class:"staff-item"},[e("a",{href:"https://www.kinopoisk.ru/name/".concat(W.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-link",title:W.description||""},[e("img",{src:W.poster_url,alt:W.name_ru,class:"staff-photo"},null,8,oa),e("span",sa,g(W.name_ru||W.name_en),1),W.description?(i(),r("span",la,g(W.description),1)):p("",!0)],8,na)]))),128)),e("a",{class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(d.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(ie("ACTOR").length," –∞–∫—Ç–µ—Ä–æ–≤")}," +"+g(ie("ACTOR").length-12),9,ia)])])):p("",!0),ie("DIRECTOR").length?(i(),r("div",aa,[v[27]||(v[27]=e("h3",{class:"additional-info-title"},"–†–µ–∂–∏—Å—Å—ë—Ä—ã",-1)),e("div",ra,[e("div",ua,[(i(!0),r(ge,null,Le(ie("DIRECTOR").slice(0,5),W=>(i(),r("a",{key:W.staff_id,href:"https://www.kinopoisk.ru/name/".concat(W.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},g(W.name_ru||W.name_en),9,ca))),128)),ie("DIRECTOR").length>5?(i(),r("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(d.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(ie("DIRECTOR").length," —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–≤")}," +"+g(ie("DIRECTOR").length-5),9,da)):p("",!0)])])])):p("",!0),ie("PRODUCER").length?(i(),r("div",va,[v[28]||(v[28]=e("h3",{class:"additional-info-title"},"–ü—Ä–æ–¥—é—Å–µ—Ä—ã",-1)),e("div",ma,[e("div",fa,[(i(!0),r(ge,null,Le(ie("PRODUCER").slice(0,5),W=>(i(),r("a",{key:W.staff_id,href:"https://www.kinopoisk.ru/name/".concat(W.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},g(W.name_ru||W.name_en),9,ga))),128)),ie("PRODUCER").length>5?(i(),r("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(d.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(ie("PRODUCER").length," –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤")}," +"+g(ie("PRODUCER").length-5),9,ya)):p("",!0)])])])):p("",!0)])])):p("",!0),L.value.length&&de(B)?(i(),r("div",ka,[we(gs,{videos:L.value,"active-video-index":U.value,onSelect:$.playTrailer},null,8,["videos","active-video-index","onSelect"])])):p("",!0),N.value.length?(i(),r("div",pa,[v[29]||(v[29]=e("h2",null,"–°–∏–∫–≤–µ–ª—ã –∏ –ø—Ä–∏–∫–≤–µ–ª—ã",-1)),we(de(fn),{"movies-list":z.value?N.value:N.value.slice(0,S.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),N.value.length>S.value?(i(),r("a",{key:0,class:"expand-circle-button",onClick:v[2]||(v[2]=W=>z.value=!z.value),title:"".concat(z.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(N.value.length,")")},g(z.value?"‚àí":"+".concat(N.value.length-S.value)),9,ha)):p("",!0)])):p("",!0),Ie.value.length?(i(),r("div",ba,[v[30]||(v[30]=e("h2",null,"–ü–æ—Ö–æ–∂–∏–µ",-1)),we(de(fn),{"movies-list":te.value?Ie.value:Ie.value.slice(0,S.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),Ie.value.length>S.value?(i(),r("a",{key:0,class:"expand-circle-button",onClick:v[3]||(v[3]=W=>te.value=!te.value),title:"".concat(te.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(Ie.value.length,")")},g(te.value?"‚àí":"+".concat(Ie.value.length-S.value)),9,Ca)):p("",!0)])):p("",!0)])):p("",!0)])]),we(rt,{ref_key:"notificationRef",ref:Q},null,512)],64)}}},Ra=Be(wa,[["__scopeId","data-v-8c9baba0"]]);export{Ra as default};
