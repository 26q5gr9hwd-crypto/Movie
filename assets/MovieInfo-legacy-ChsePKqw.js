!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t=function(){return n};var a,n={},o=Object.prototype,r=o.hasOwnProperty,i=Object.defineProperty||function(e,t,a){e[t]=a.value},l="function"==typeof Symbol?Symbol:{},s=l.iterator||"@@iterator",d=l.asyncIterator||"@@asyncIterator",c=l.toStringTag||"@@toStringTag";function u(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(a){u=function(e,t,a){return e[t]=a}}function v(e,t,a,n){var o=t&&t.prototype instanceof x?t:x,r=Object.create(o.prototype),l=new R(n||[]);return i(r,"_invoke",{value:j(e,a,l)}),r}function m(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}n.wrap=v;var p="suspendedStart",f="suspendedYield",b="executing",g="completed",h={};function x(){}function k(){}function y(){}var w={};u(w,s,(function(){return this}));var _=Object.getPrototypeOf,C=_&&_(_(A([])));C&&C!==o&&r.call(C,s)&&(w=C);var E=y.prototype=x.prototype=Object.create(w);function M(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function L(t,a){function n(o,i,l,s){var d=m(t[o],t,i);if("throw"!==d.type){var c=d.arg,u=c.value;return u&&"object"==e(u)&&r.call(u,"__await")?a.resolve(u.__await).then((function(e){n("next",e,l,s)}),(function(e){n("throw",e,l,s)})):a.resolve(u).then((function(e){c.value=e,l(c)}),(function(e){return n("throw",e,l,s)}))}s(d.arg)}var o;i(this,"_invoke",{value:function(e,t){function r(){return new a((function(a,o){n(e,t,a,o)}))}return o=o?o.then(r,r):r()}})}function j(e,t,n){var o=p;return function(r,i){if(o===b)throw Error("Generator is already running");if(o===g){if("throw"===r)throw i;return{value:a,done:!0}}for(n.method=r,n.arg=i;;){var l=n.delegate;if(l){var s=I(l,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=b;var d=m(e,t,n);if("normal"===d.type){if(o=n.done?g:f,d.arg===h)continue;return{value:d.arg,done:n.done}}"throw"===d.type&&(o=g,n.method="throw",n.arg=d.arg)}}}function I(e,t){var n=t.method,o=e.iterator[n];if(o===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=a,I(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var r=m(o,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,h;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=a),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function z(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(z,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function e(){for(;++o<t.length;)if(r.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=a,e.done=!0,e};return i.next=i}}throw new TypeError(e(t)+" is not iterable")}return k.prototype=y,i(E,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:k,configurable:!0}),k.displayName=u(y,c,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},n.awrap=function(e){return{__await:e}},M(L.prototype),u(L.prototype,d,(function(){return this})),n.AsyncIterator=L,n.async=function(e,t,a,o,r){void 0===r&&(r=Promise);var i=new L(v(e,t,a,o),r);return n.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},M(E),u(E,c,"Generator"),u(E,s,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},n.values=A,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=a)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,o){return l.type="throw",l.arg=e,t.next=n,o&&(t.method="next",t.arg=a),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),d=r.call(i,"finallyLoc");if(s&&d){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!d)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),P(a),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var o=n.arg;P(a)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:A(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=a),h}},n}function a(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(t,a,n){return(a=function(t){var a=function(t,a){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,a||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(t)}(t,"string");return"symbol"==e(a)?a:a+""}(a))in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,t}function r(e,t,a,n,o,r,i){try{var l=e[r](i),s=l.value}catch(e){return void a(e)}l.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,a=arguments;return new Promise((function(n,o){var i=e.apply(t,a);function l(e){r(i,n,o,l,s,"next",e)}function s(e){r(i,n,o,l,s,"throw",e)}l(void 0)}))}}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,o,r,i,l=[],s=!0,d=!1;try{if(r=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;s=!1}else for(;!(s=(n=r.call(a)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){d=!0,o=e}finally{try{if(!s&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}System.register(["./index-legacy-keAOHERO.js","./MovieList-legacy-DFBhyBrj.js","./SpinnerLoading-legacy-CgqU6HZz.js","./ToastMessage-legacy-AH_YUQB0.js","./trailer-legacy-C3ZWpm3b.js","./dateUtils-legacy-tdFgd8IZ.js"],(function(e,a){"use strict";var o,r,s,d,c,u,v,m,p,f,b,g,h,x,k,y,w,_,C,E,M,L,j,I,z,P,R,A,T,S,U,O,$,B,D,H,N,F,V,q,K,Y,W,G,Z,X,Q,J,ee,te,ae,ne,oe,re,ie,le,se,de,ce,ue,ve,me,pe,fe,be,ge,he;return{setters:[e=>{o=e._,r=e.r,s=e.c,d=e.b,c=e.d,u=e.e,v=e.s,m=e.t,p=e.K,f=e.g,b=e.L,g=e.n,h=e.q,x=e.u,k=e.i,y=e.N,w=e.z,_=e.l,C=e.o,E=e.O,M=e.x,L=e.E,j=e.f,I=e.P,z=e.m,P=e.Q,R=e.y,A=e.U,T=e.R,S=e.D,U=e.S,O=e.V,$=e.W,B=e.X,D=e.Y,H=e.Z,N=e.$,F=e.k,V=e.v,q=e.a0,K=e.a1,Y=e.w,W=e.a2,G=e.a3,Z=e.a4,X=e.a5,Q=e.a6,J=e.a7,ee=e.a8,te=e.a9,ae=e.a,ne=e.aa,oe=e.ab,re=e.ac,ie=e.ad},e=>{le=e._,se=e.a,de=e.b,ce=e.M},e=>{ue=e.S},e=>{ve=e.N},e=>{me=e.u,pe=e.S,fe=e.a},e=>{be=e.u,ge=e.f,he=e.a}],execute:function(){var a=document.createElement("style");a.textContent='@charset "UTF-8";.modal[data-v-8b8d2b67]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.85);display:flex;justify-content:center;align-items:center;z-index:5}.modal-content[data-v-8b8d2b67]{background:#2d2d2d;padding:20px;border-radius:8px;width:90%;max-width:500px;max-height:80vh;overflow-y:auto;color:#fff;position:relative;box-shadow:0 0 20px rgba(0,0,0,.7)}.close[data-v-8b8d2b67]{position:absolute;top:12px;right:12px;border:none;background:transparent;color:#fff;font-size:1.8rem;cursor:pointer}h2[data-v-8b8d2b67]{margin-top:0;font-size:1.4rem;display:flex;align-items:center}.back-btn[data-v-8b8d2b67]{background:transparent;border:none;color:#aaa;font-size:1rem;margin-right:8px;cursor:pointer}.players-list[data-v-8b8d2b67]{list-style:none;padding:0;margin:15px 0}.players-list li[data-v-8b8d2b67]{margin:8px 0}.player-item[data-v-8b8d2b67],.group-item[data-v-8b8d2b67]{width:100%;text-align:left;padding:10px;background-color:#444;border:none;border-radius:4px;color:#fff;font-size:1rem;cursor:pointer;display:flex;align-items:center;transition:background .2s}.player-item[data-v-8b8d2b67]:hover,.group-item[data-v-8b8d2b67]:hover{background-color:var(--accent-transparent);border:1px solid var(--accent-semi-transparent);box-shadow:0 4px 10px rgba(0,0,0,.3);transform:translateY(-1px)}.player-item.active[data-v-8b8d2b67],.group-item.active[data-v-8b8d2b67]{background-color:var(--accent-color);box-shadow:0 0 5px var(--accent-semi-transparent)}.warning-icon[data-v-8b8d2b67]{font-size:1.2rem;color:#fc0;margin-left:8px}.group-icon[data-v-8b8d2b67]{font-size:1.2rem;color:#aaa;margin-right:8px}@media (max-width: 768px){.modal-content[data-v-8b8d2b67]{padding:15px;max-width:90%}}@media (max-width: 480px){.modal-content[data-v-8b8d2b67]{max-width:95%}}.players-list[data-v-36291b5d]{width:100%;max-width:800px;display:flex;align-items:center;justify-content:center;gap:10px;margin:auto auto 10px}.player-btn[data-v-36291b5d]{display:flex;align-items:center;justify-content:left;background:#3a3a3a;color:#fff;border:2px solid #505050;border-radius:5px;padding:10px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s ease-in-out;width:100%;max-width:800px;text-align:left;font-size:16px}.player-btn[data-v-36291b5d]:hover{background:var(--accent-color);border-color:var(--accent-color);box-shadow:0 0 10px var(--accent-semi-transparent)}.player-btn[data-v-36291b5d]:active{background:var(--accent-color);border-color:var(--accent-color)}.player-btn[data-v-36291b5d]:focus{outline:none;box-shadow:0 0 5px var(--accent-color)}.player-container[data-v-36291b5d]{width:100%;transition:max-width .3s ease-in-out,max-height .3s ease-in-out;overflow:hidden;padding-bottom:10px}.iframe-wrapper[data-v-36291b5d]{transition:padding-top .3s ease-in-out,transform .3s ease-in-out;width:100%}.responsive-iframe[data-v-36291b5d]{position:absolute;top:0;left:0;width:100%;height:100%;border:none;z-index:4}.responsive-iframe.dimmed[data-v-36291b5d]{z-index:7}.player-container.theater-mode[data-v-36291b5d]{position:fixed;top:0!important;left:0!important;width:100vw!important;height:100vh!important;background:#000;margin:0;border-radius:0;display:flex;align-items:center;justify-content:center;z-index:7}.player-container.theater-mode .iframe-wrapper[data-v-36291b5d]{width:100%!important;height:100%!important;padding-top:0!important;flex-grow:1}.close-theater-btn[data-v-36291b5d]{position:fixed;top:20px;right:80px;background:rgba(255,0,0,.7);color:#fff;border:none;width:50px;height:50px;border-radius:50%;cursor:pointer;transition:background .3s,opacity .3s;opacity:0;display:flex;align-items:center;justify-content:center;font-size:24px;z-index:8}.close-theater-btn.visible[data-v-36291b5d]{opacity:1}.close-theater-btn[data-v-36291b5d]:hover,.close-theater-btn[data-v-36291b5d]:before:hover{background:var(--accent-color);opacity:1}html.no-scroll[data-v-36291b5d]{overflow:hidden}.controls[data-v-36291b5d]{display:flex;flex-direction:column;align-items:center;gap:10px;margin:0 auto;border-radius:10px;backdrop-filter:blur(10px);position:relative;z-index:4}.main-controls[data-v-36291b5d]{display:flex;flex-wrap:wrap;justify-content:center;gap:10px}.controls button[data-v-36291b5d]{display:flex;align-items:center;justify-content:center;background-color:#444;color:#fff;border:none;padding:12px;font-size:18px;border-radius:8px;cursor:pointer;transition:background-color .3s ease,transform .2s ease,box-shadow .3s ease;z-index:4;width:50px;height:50px}.controls button[data-v-36291b5d]:hover{background-color:var(--accent-color);transform:translateY(-3px);box-shadow:0 4px 10px var(--accent-semi-transparent)}.controls button[data-v-36291b5d]:active{transform:translateY(0);box-shadow:none}.controls button.active[data-v-36291b5d]{background-color:var(--accent-color);box-shadow:0 0 10px var(--accent-semi-transparent)}.material-icons[data-v-36291b5d]{font-size:24px}.tooltip-container[data-v-36291b5d]{position:relative;display:inline-block}.custom-tooltip[data-v-36291b5d]{position:absolute;left:50%;background-color:rgba(30,30,30,.95);color:#fff;padding:8px 16px;border-radius:12px;font-size:14px;white-space:nowrap;pointer-events:none;text-align:center;box-shadow:0 4px 20px rgba(0,0,0,.25);backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,.08);opacity:0;visibility:hidden;transform:translate(-50%) translateY(8px);transition:all .2s cubic-bezier(.4,0,.2,1);z-index:1000}.custom-tooltip[data-v-36291b5d]:before{content:"";position:absolute;left:50%;transform:translate(-50%) rotate(45deg);width:10px;height:10px;background-color:rgba(30,30,30,.95);border:1px solid rgba(255,255,255,.08);z-index:-1}.custom-tooltip[style*="bottom: 100%"][data-v-36291b5d]:before{bottom:-5px;top:auto}.custom-tooltip[style*="top: 100%"][data-v-36291b5d]:before{top:-5px;bottom:auto}.tooltip-container:hover .custom-tooltip[data-v-36291b5d]{opacity:1;visibility:visible;transform:translate(-50%) translateY(0)}.advanced-tooltip[data-v-36291b5d]{white-space:normal;padding:20px;display:flex;flex-direction:column;align-items:center;gap:16px;top:calc(100% + 12px);pointer-events:all;text-align:center;min-width:240px;background-color:rgba(30,30,30,.98);border-radius:16px;box-shadow:0 8px 40px rgba(0,0,0,.35);transform:translate(-50%) translateY(8px)}.advanced-tooltip[data-v-36291b5d]:before{top:-6px;width:12px;height:12px}.tooltip-title[data-v-36291b5d]{font-size:15px;font-weight:500;color:rgba(255,255,255,.95);margin-top:4px}.aspect-ratio-dropdown[data-v-36291b5d]{min-width:fit-content;width:max-content;padding:16px;display:flex;flex-direction:column;gap:8px;background-color:rgba(30,30,30,.98);border-radius:16px}.aspect-ratio-option[data-v-36291b5d]{padding:12px 20px;border-radius:10px;cursor:pointer;transition:all .2s ease;text-align:center;font-size:14px;color:rgba(255,255,255,.9);white-space:nowrap;width:100%}.aspect-ratio-option[data-v-36291b5d]:hover{background-color:var(--accent-color);transform:translateY(-1px);box-shadow:0 2px 8px var(--accent-semi-transparent)}.aspect-ratio-option.active[data-v-36291b5d]{background-color:var(--accent-color);color:#fff;font-weight:500;box-shadow:0 2px 12px var(--accent-semi-transparent)}.fullscreen[data-v-36291b5d]{position:absolute;top:0;left:0;width:100vw;height:100vh;z-index:10}.theater-mode-lock[data-v-36291b5d]{pointer-events:none}.theater-mode-unlock[data-v-36291b5d]{pointer-events:all}.aspect-ratio-dropdown-btn[data-v-36291b5d]{display:flex;align-items:center;justify-content:center;padding:0 12px;min-width:60px}.current-ratio[data-v-36291b5d]{font-size:14px;font-weight:500}.list-buttons-container[data-v-36291b5d]{position:relative}.list-buttons-dropdown[data-v-36291b5d]{display:flex;flex-direction:column;gap:10px;padding:16px;min-width:240px;background-color:rgba(30,30,30,.98);border-radius:16px;box-shadow:0 8px 40px rgba(0,0,0,.35)}.list-button-item[data-v-36291b5d]{width:100%}.list-button-item button[data-v-36291b5d]{width:100%;display:flex;align-items:center;gap:12px;padding:12px 20px;background-color:rgba(255,255,255,.08);border:none;border-radius:10px;color:rgba(255,255,255,.9);cursor:pointer;transition:all .2s ease;min-height:48px}.list-button-item button[data-v-36291b5d]:hover{background-color:var(--accent-color);transform:translate(4px);box-shadow:0 2px 8px var(--accent-semi-transparent)}.list-button-item button.active[data-v-36291b5d]{background-color:var(--accent-color);color:#fff;box-shadow:0 2px 12px var(--accent-semi-transparent)}.button-label[data-v-36291b5d]{font-size:15px;font-weight:500;flex:1}.list-button-item .material-icons[data-v-36291b5d]{font-size:20px;width:24px;height:24px;display:flex;align-items:center;justify-content:center}.mobile-list-buttons[data-v-36291b5d]{display:flex;flex-wrap:wrap;justify-content:center;gap:10px;margin:0 auto;border-radius:10px;backdrop-filter:blur(10px)}@media (max-width: 768px){.mobile-list-buttons[data-v-36291b5d]{margin-top:10px}}.shortcut-hint[data-v-36291b5d]{display:block;font-size:13px;color:rgba(255,255,255,.5);margin-top:6px;font-weight:400}.electron-only[data-v-36291b5d]{background-color:#333!important;opacity:.6;cursor:not-allowed}.electron-only[data-v-36291b5d]:hover{transform:none!important;box-shadow:none!important;background-color:#333!important}.custom-tooltip[data-v-36291b5d]:has(+.electron-only){color:rgba(255,255,255,.7)}.favorite-btn[data-v-36291b5d]{display:flex;align-items:center;justify-content:center;background-color:#444;color:#fff;border:none;padding:12px;font-size:18px;border-radius:8px;cursor:pointer;transition:background-color .3s ease,transform .2s ease,box-shadow .3s ease;z-index:4;width:50px;height:50px;position:relative}.favorite-btn[data-v-36291b5d]:hover{background-color:var(--accent-color);transform:translateY(-3px);box-shadow:0 4px 10px var(--accent-semi-transparent)}.dropdown-arrow[data-v-36291b5d]{position:absolute;right:2px;bottom:2px;font-size:16px;opacity:.7;pointer-events:none;transition:all .3s ease}.dropdown-arrow.highlighted[data-v-36291b5d]{opacity:1;color:var(--accent-color);text-shadow:0 0 8px var(--accent-semi-transparent)}.desktop-list-buttons[data-v-36291b5d]{display:flex;flex-wrap:wrap;justify-content:center;gap:5px;margin:0 auto;border-radius:10px;backdrop-filter:blur(10px)}.desktop-list-buttons .tooltip-container[data-v-36291b5d],.desktop-list-buttons button[data-v-36291b5d]{margin:0}.tooltip-hint[data-v-36291b5d]{display:flex;align-items:center;gap:8px;padding:8px 12px;background:rgba(255,255,255,.05);border-radius:8px;margin-top:8px;font-size:13px;color:rgba(255,255,255,.7)}.tooltip-hint .material-icons[data-v-36291b5d]{font-size:16px;color:rgba(255,255,255,.5)}.settings-link[data-v-36291b5d]{color:var(--accent-color);cursor:pointer;text-decoration:underline;transition:color .2s ease}.settings-link[data-v-36291b5d]:hover{color:var(--accent-hover)}.auth-link[data-v-36291b5d]{color:var(--accent-color);cursor:pointer;text-decoration:underline;transition:color .2s ease}.auth-link[data-v-36291b5d]:hover{color:var(--accent-hover)}.carousel-container[data-v-e60b5c29]{margin:2rem 0;padding:0}.carousel-wrapper[data-v-e60b5c29]{position:relative;overflow:hidden}.carousel[data-v-e60b5c29]{display:flex;gap:16px;overflow-x:auto;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch;padding:8px 0;user-select:none}.carousel[data-v-e60b5c29]::-webkit-scrollbar{width:5px;height:5px}.carousel[data-v-e60b5c29]::-webkit-scrollbar-track{background:transparent;border-radius:10px}.carousel[data-v-e60b5c29]::-webkit-scrollbar-thumb{background:#494949;border-radius:10px;border:0}.carousel[data-v-e60b5c29]::-webkit-scrollbar-thumb:hover{background:#555}.scroll-button[data-v-e60b5c29]{position:absolute;top:0;bottom:0;width:50px;border:none;background:rgba(0,0,0,.5);color:#fff;cursor:pointer;z-index:10;display:flex;align-items:center;justify-content:center;transition:opacity .3s;opacity:0;pointer-events:none}.carousel-wrapper:hover .scroll-button[data-v-e60b5c29]{opacity:1;pointer-events:auto}.scroll-button[data-v-e60b5c29]:hover{background:rgba(0,0,0,.7)}.scroll-button.left[data-v-e60b5c29]{left:0}.scroll-button.right[data-v-e60b5c29]{right:0}.carousel-item[data-v-e60b5c29]{flex:0 0 auto;scroll-snap-align:start;width:260px;background:#161616;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.2);transition:transform .2s;cursor:pointer;overflow:hidden}.carousel-item[data-v-e60b5c29]:hover{transform:scale(1.03)}.carousel-item img[data-v-e60b5c29]{width:100%;height:auto;aspect-ratio:16/9;object-fit:cover;border-top-left-radius:12px;border-top-right-radius:12px}.video-name[data-v-e60b5c29]{padding:12px;background:#202020;color:#fff;font-size:14px;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;border-bottom-left-radius:12px;border-bottom-right-radius:12px}.video-player[data-v-e60b5c29]{max-width:1200px;width:100%;aspect-ratio:16/9;margin:20px auto 0;box-shadow:0 4px 12px rgba(0,0,0,.3);border-radius:8px;overflow:hidden}.video-player iframe[data-v-e60b5c29]{width:100%;height:100%;border:none}.rating-container[data-v-2df64bd5]{display:flex;flex-direction:column;align-items:center;gap:0;position:relative;min-height:32px}.rating-display[data-v-2df64bd5]{display:flex;flex-direction:column;align-items:center;position:relative;margin:0;padding:0}.rating-link[data-v-2df64bd5]{display:inline-flex;align-items:center;justify-content:center;color:#e0e0e0;text-decoration:none;font-weight:700;font-family:Roboto,sans-serif;font-size:16px;padding:5px 10px;margin:0;background:rgba(0,0,0,.7);border-radius:5px;cursor:pointer;transition:all .2s ease;gap:5px;box-sizing:border-box;vertical-align:middle}.rating-link.has-rating[data-v-2df64bd5]{position:relative;padding:5px 10px;border-radius:5px;background:rgba(0,0,0,.7);border:1px solid var(--accent-transparent)}.rating-link.has-rating[data-v-2df64bd5]:after{content:"★";position:absolute;top:-6px;left:-6px;font-size:12px;color:var(--accent-color);line-height:1;padding-bottom:1px}.rating-link[data-v-2df64bd5]:hover{background:rgba(255,255,255,.1);border-color:var(--accent-color);box-shadow:0 0 10px var(--accent-semi-transparent)}.rating-logo[data-v-2df64bd5]{width:20px;height:20px;margin-right:5px;opacity:.8;transition:opacity .2s ease}.rating-link:hover .rating-logo[data-v-2df64bd5]{opacity:1}.vote-count[data-v-2df64bd5]{margin-left:4px;font-size:14px;color:rgba(224,224,224,.8)}.rating-tooltip[data-v-2df64bd5]{position:absolute;top:100%;left:50%;transform:translate(-50%);margin-top:8px;z-index:1000;background:#1a1a1a;border-radius:4px;box-shadow:0 2px 8px rgba(0,0,0,.3);padding:8px;opacity:0;transition:opacity .3s ease;min-width:220px}.rating-display:hover .rating-tooltip[data-v-2df64bd5]{opacity:1}.rating-numbers[data-v-2df64bd5]{display:flex;gap:4px;margin-bottom:8px;justify-content:center}.number-btn[data-v-2df64bd5]{background:none;border:none;padding:4px 6px;cursor:pointer;color:#e0e0e0;transition:all .2s;border-radius:2px;font-size:14px;font-weight:700;font-family:Roboto,sans-serif;position:relative}.number-btn[data-v-2df64bd5]:hover{transform:scale(1.1)}.number-btn.active[data-v-2df64bd5]{color:#fff;transform:scale(1.1);box-shadow:0 0 8px rgba(255,255,255,.3)}.number-btn.hover[data-v-2df64bd5]{color:#fff;transform:scale(1.1)}.number-btn.average-highlight[data-v-2df64bd5]{color:#e0e0e0}.number-btn.active.average-highlight[data-v-2df64bd5]{color:#fff}.average-rating[data-v-2df64bd5]{font-weight:700;color:#e0e0e0;font-size:16px;font-family:Roboto,sans-serif;transition:color .2s ease;display:flex;align-items:center}.rating-link:hover .average-rating[data-v-2df64bd5]{color:#fff}.average-rating.low[data-v-2df64bd5]{color:#ff6b6b!important}.average-rating.medium[data-v-2df64bd5]{color:#ffd93d!important}.average-rating.high[data-v-2df64bd5]{color:#51cf66!important}.tooltip-footer[data-v-2df64bd5]{text-align:center;font-size:12px;color:rgba(224,224,224,.8);padding-top:4px;border-top:1px solid rgba(255,255,255,.1)}.number-btn[data-v-2df64bd5]:nth-child(1):hover{color:#f44;text-shadow:0 0 8px rgba(255,68,68,.5)}.number-btn[data-v-2df64bd5]:nth-child(2):hover{color:#ff6b6b;text-shadow:0 0 8px rgba(255,107,107,.5)}.number-btn[data-v-2df64bd5]:nth-child(3):hover{color:#ff8e8e;text-shadow:0 0 8px rgba(255,142,142,.5)}.number-btn[data-v-2df64bd5]:nth-child(4):hover{color:#ffb347;text-shadow:0 0 8px rgba(255,179,71,.5)}.number-btn[data-v-2df64bd5]:nth-child(5):hover{color:#fc3;text-shadow:0 0 8px rgba(255,204,51,.5)}.number-btn[data-v-2df64bd5]:nth-child(6):hover{color:gold;text-shadow:0 0 8px rgba(255,215,0,.5)}.number-btn[data-v-2df64bd5]:nth-child(7):hover{color:#9acd32;text-shadow:0 0 8px rgba(154,205,50,.5)}.number-btn[data-v-2df64bd5]:nth-child(8):hover{color:#7cfc00;text-shadow:0 0 8px rgba(124,252,0,.5)}.number-btn[data-v-2df64bd5]:nth-child(9):hover{color:#32cd32;text-shadow:0 0 8px rgba(50,205,50,.5)}.number-btn[data-v-2df64bd5]:nth-child(10):hover{color:#0f0;text-shadow:0 0 8px rgba(0,255,0,.5)}.number-btn.active[data-v-2df64bd5]:nth-child(1){background:#f44;box-shadow:0 0 12px rgba(255,68,68,.7)}.number-btn.active[data-v-2df64bd5]:nth-child(2){background:#ff6b6b;box-shadow:0 0 12px rgba(255,107,107,.7)}.number-btn.active[data-v-2df64bd5]:nth-child(3){background:#ff8e8e;box-shadow:0 0 12px rgba(255,142,142,.7)}.number-btn.active[data-v-2df64bd5]:nth-child(4){background:#ffb347;box-shadow:0 0 12px rgba(255,179,71,.7)}.number-btn.active[data-v-2df64bd5]:nth-child(5){background:#fc3;box-shadow:0 0 12px rgba(255,204,51,.7)}.number-btn.active[data-v-2df64bd5]:nth-child(6){background:gold;box-shadow:0 0 12px rgba(255,215,0,.7)}.number-btn.active[data-v-2df64bd5]:nth-child(7){background:#9acd32;box-shadow:0 0 12px rgba(154,205,50,.7)}.number-btn.active[data-v-2df64bd5]:nth-child(8){background:#7cfc00;box-shadow:0 0 12px rgba(124,252,0,.7)}.number-btn.active[data-v-2df64bd5]:nth-child(9){background:#32cd32;box-shadow:0 0 12px rgba(50,205,50,.7)}.number-btn.active[data-v-2df64bd5]:nth-child(10){background:#0f0;box-shadow:0 0 12px rgba(0,255,0,.7)}.mobile-tooltip[data-v-2df64bd5]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);margin-top:0;z-index:1001}.mobile-modal-overlay[data-v-2df64bd5]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.7);display:flex;justify-content:center;align-items:center;z-index:1000}.mobile-modal[data-v-2df64bd5]{background:#1a1a1a;border-radius:8px;padding:20px;width:90%;max-width:320px;box-shadow:0 4px 12px rgba(0,0,0,.3)}.mobile-modal-header[data-v-2df64bd5]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.mobile-modal-header h3[data-v-2df64bd5]{margin:0;color:#fff;font-size:18px;font-weight:500}.close-button[data-v-2df64bd5]{background:none;border:none;color:#fff;font-size:24px;cursor:pointer;padding:0;opacity:.7;transition:opacity .2s}.close-button[data-v-2df64bd5]:hover{opacity:1;color:var(--accent-color)}.mobile-rating-numbers[data-v-2df64bd5]{display:grid;grid-template-columns:repeat(5,1fr);gap:8px;margin-bottom:16px}.mobile-rating-numbers .number-btn[data-v-2df64bd5]{font-size:18px;padding:12px 0}.mobile-modal-footer[data-v-2df64bd5]{text-align:center;color:rgba(255,255,255,.7);font-size:14px;padding-top:12px;border-top:1px solid rgba(255,255,255,.1)}@media (max-width: 620px){.rating-container[data-v-2df64bd5]{min-height:auto}.rating-link[data-v-2df64bd5]{padding:4px 8px;margin:0;font-size:.8em}.rating-link.has-rating[data-v-2df64bd5]{padding:4px 8px;margin:0}.rating-link.has-rating[data-v-2df64bd5]:after{top:-5px;left:-5px;font-size:10px;padding-bottom:1px}.rating-logo[data-v-2df64bd5]{width:15px;height:15px}}.emoji-picker[data-v-209132f3]{position:absolute;bottom:100%;left:50%;transform:translate(-50%);background:#2a2a2a;border:1px solid #444;border-radius:.5rem;padding:.75rem;z-index:99999;width:280px;box-shadow:0 4px 20px rgba(0,0,0,.3);margin-bottom:.5rem}.close-btn[data-v-209132f3]{position:absolute;top:.5rem;right:.5rem;background:none;border:none;color:#999;cursor:pointer;padding:.25rem;font-size:.875rem;transition:color .2s;z-index:10000}.close-btn[data-v-209132f3]:hover{color:#fff}.mobile-only[data-v-209132f3]{display:none}@media (max-width: 768px){.mobile-only[data-v-209132f3]{display:block}.emoji-picker[data-v-209132f3]{width:260px;padding-top:2rem}}.emoji-categories[data-v-209132f3]{display:flex;gap:.25rem;margin-bottom:.75rem;padding-bottom:.5rem;border-bottom:1px solid #444}.category-btn[data-v-209132f3]{background:none;border:none;font-size:1.2rem;padding:.5rem;border-radius:.375rem;cursor:pointer;transition:background-color .2s}.category-btn[data-v-209132f3]:hover{background:rgba(255,255,255,.1)}.category-btn.active[data-v-209132f3]{background:rgba(76,175,80,.2)}.emoji-grid[data-v-209132f3]{display:grid;grid-template-columns:repeat(8,1fr);gap:.25rem;max-height:200px;overflow-y:auto}.emoji-btn[data-v-209132f3]{background:none;border:none;font-size:1.25rem;padding:.5rem;border-radius:.25rem;cursor:pointer;transition:background-color .2s;display:flex;align-items:center;justify-content:center}.emoji-btn[data-v-209132f3]:hover{background:rgba(255,255,255,.1)}.emoji-grid[data-v-209132f3]::-webkit-scrollbar{width:4px}.emoji-grid[data-v-209132f3]::-webkit-scrollbar-track{background:#333;border-radius:2px}.emoji-grid[data-v-209132f3]::-webkit-scrollbar-thumb{background:#666;border-radius:2px}.emoji-grid[data-v-209132f3]::-webkit-scrollbar-thumb:hover{background:#777}.image-picker[data-v-f33eb3f6]{position:absolute;bottom:100%;left:50%;transform:translate(-50%);background:#2a2a2a;border:1px solid #444;border-radius:.5rem;padding:.75rem;z-index:99999;width:320px;box-shadow:0 4px 20px rgba(0,0,0,.3);margin-bottom:.5rem}.close-btn[data-v-f33eb3f6]{position:absolute;top:.5rem;right:.5rem;background:none;border:none;color:#999;cursor:pointer;padding:.25rem;font-size:.875rem;transition:color .2s;z-index:10000}.close-btn[data-v-f33eb3f6]:hover{color:#fff}.mobile-only[data-v-f33eb3f6]{display:none}@media (max-width: 768px){.mobile-only[data-v-f33eb3f6]{display:block}.image-picker[data-v-f33eb3f6]{width:300px;padding-top:2rem}}.auth-required[data-v-f33eb3f6]{min-height:240px;display:flex;align-items:center;justify-content:center}.auth-message[data-v-f33eb3f6]{text-align:center;color:#999;padding:2rem 1rem}.auth-message i[data-v-f33eb3f6]{font-size:2rem;color:#666;margin-bottom:1rem}.auth-message h3[data-v-f33eb3f6]{color:#fff;margin:0 0 .5rem;font-size:1.1rem}.auth-message p[data-v-f33eb3f6]{margin:0 0 1.5rem;font-size:.9rem;line-height:1.4}.login-button[data-v-f33eb3f6]{background:var(--accent-color);color:#fff;border:none;border-radius:.375rem;padding:.5rem 1.5rem;font-size:.9rem;cursor:pointer;transition:background-color .2s}.login-button[data-v-f33eb3f6]:hover{background:var(--accent-hover)}.image-picker-header[data-v-f33eb3f6]{margin-bottom:.75rem;padding-bottom:.5rem;border-bottom:1px solid #444}.image-search-input[data-v-f33eb3f6]{width:100%;padding:.5rem;background:#1a1a1a;border:1px solid #444;border-radius:.375rem;color:#fff;font-size:.9rem;box-sizing:border-box}.image-search-input[data-v-f33eb3f6]:focus{outline:none;border-color:var(--accent-color)}.image-search-input[data-v-f33eb3f6]::placeholder{color:#999}.image-content[data-v-f33eb3f6]{min-height:240px;display:flex;flex-direction:column}.loading-spinner[data-v-f33eb3f6]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:240px;color:#999}.spinner[data-v-f33eb3f6]{width:32px;height:32px;border:3px solid #444;border-top:3px solid var(--accent-color);border-radius:50%;animation:spin-f33eb3f6 1s linear infinite;margin-bottom:1rem}@keyframes spin-f33eb3f6{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading-spinner p[data-v-f33eb3f6]{font-size:.9rem;margin:0}.image-grid[data-v-f33eb3f6]{display:grid;grid-template-columns:repeat(4,1fr);gap:.5rem;max-height:240px;overflow-y:auto}.image-item[data-v-f33eb3f6]{min-height:60px;max-height:80px;cursor:pointer;border-radius:.375rem;overflow:hidden;transition:all .2s ease;border:2px solid transparent;display:flex;align-items:center;justify-content:center;background:#1a1a1a}.image-item[data-v-f33eb3f6]:hover{transform:scale(1.05);border-color:var(--accent-semi-transparent);background:#333}.image-item img[data-v-f33eb3f6]{max-width:100%;max-height:100%;object-fit:contain;display:block}.no-images[data-v-f33eb3f6],.no-search[data-v-f33eb3f6]{display:flex;align-items:center;justify-content:center;min-height:240px;text-align:center;color:#999;font-size:.9rem}.no-search[data-v-f33eb3f6]{color:#666}.image-grid[data-v-f33eb3f6]::-webkit-scrollbar{width:4px}.image-grid[data-v-f33eb3f6]::-webkit-scrollbar-track{background:#333;border-radius:2px}.image-grid[data-v-f33eb3f6]::-webkit-scrollbar-thumb{background:#666;border-radius:2px}.image-grid[data-v-f33eb3f6]::-webkit-scrollbar-thumb:hover{background:#777}.link-modal-overlay[data-v-a794d83f]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.7);display:flex;align-items:center;justify-content:center;z-index:1000;padding:1rem}.link-modal[data-v-a794d83f]{background:#2a2a2a;border-radius:.5rem;min-width:400px;max-width:500px;width:100%;box-shadow:0 10px 25px rgba(0,0,0,.5);border:1px solid #444}.link-modal-header[data-v-a794d83f]{display:flex;justify-content:space-between;align-items:center;padding:1rem 1.5rem;border-bottom:1px solid #444}.link-modal-header h3[data-v-a794d83f]{margin:0;color:#fff;font-size:1.1rem}.close-button[data-v-a794d83f]{background:none;border:none;color:#999;cursor:pointer;padding:.25rem;font-size:1.2rem;display:flex;align-items:center;justify-content:center;transition:color .2s}.close-button[data-v-a794d83f]:hover{color:#fff}.link-modal-content[data-v-a794d83f]{padding:1.5rem}.form-group[data-v-a794d83f]{margin-bottom:1rem}.form-group[data-v-a794d83f]:last-child{margin-bottom:0}.form-group label[data-v-a794d83f]{display:block;margin-bottom:.5rem;color:#fff;font-size:.9rem;font-weight:500}.link-input[data-v-a794d83f]{width:100%;padding:.75rem;border:1px solid #444;border-radius:.375rem;background:#333;color:#fff;font-size:.9rem;box-sizing:border-box;transition:border-color .2s}.link-input[data-v-a794d83f]:focus{outline:none;border-color:var(--accent-color)}.link-input[data-v-a794d83f]::placeholder{color:#999}.link-modal-footer[data-v-a794d83f]{display:flex;justify-content:flex-end;gap:.75rem;padding:1rem 1.5rem;border-top:1px solid #444}.cancel-button[data-v-a794d83f]{padding:.5rem 1rem;background:none;border:1px solid #666;border-radius:.375rem;color:#999;cursor:pointer;font-size:.9rem;transition:all .2s}.cancel-button[data-v-a794d83f]:hover{background:#333;color:#fff;border-color:#777}.submit-button[data-v-a794d83f]{padding:.5rem 1rem;background:var(--accent-color);color:#fff;border:none;border-radius:.375rem;cursor:pointer;font-size:.9rem;transition:background-color .2s}.submit-button[data-v-a794d83f]:hover:not(:disabled){background:var(--accent-hover)}.submit-button[data-v-a794d83f]:disabled{background:#666;cursor:not-allowed;opacity:.6}@media (max-width: 480px){.link-modal[data-v-a794d83f]{min-width:auto;margin:1rem}.link-modal-header[data-v-a794d83f],.link-modal-content[data-v-a794d83f],.link-modal-footer[data-v-a794d83f]{padding:1rem}}.comment-item[data-v-d19fdc64]{background:#2a2a2a;border-radius:.5rem;padding:1rem;margin-bottom:1rem;transition:all .2s ease-in-out;max-width:100%;overflow:visible;word-wrap:break-word}.comment-item[data-v-d19fdc64]:hover{box-shadow:0 3px 6px rgba(0,0,0,.15)}.comment-header[data-v-d19fdc64]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:.5rem}.user-info[data-v-d19fdc64]{display:flex;align-items:center;gap:.5rem}.user-avatar-link[data-v-d19fdc64]{text-decoration:none;color:inherit;display:block}.user-avatar-link:hover .user-avatar[data-v-d19fdc64]{transform:scale(1.05);box-shadow:0 0 10px rgba(74,144,226,.3)}.user-avatar[data-v-d19fdc64]{width:2rem;height:2rem;border-radius:50%;overflow:hidden;background-color:var(--accent-color);display:flex;align-items:center;justify-content:center;transition:all .2s ease;flex-shrink:0}.user-avatar img[data-v-d19fdc64]{width:100%;height:100%;object-fit:cover}.avatar-placeholder[data-v-d19fdc64]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:.75rem;color:#fff;background-color:var(--accent-color);font-weight:600}.username[data-v-d19fdc64]{font-weight:600;color:#fff;font-size:.9rem}.date[data-v-d19fdc64]{font-size:.8rem;color:#999;margin-left:.375rem;display:inline-flex;align-items:center;gap:.25rem}.edit-icon[data-v-d19fdc64]{font-size:.7rem;color:#666;vertical-align:baseline;position:relative;top:.02em}.edited-indicator[data-v-d19fdc64]{font-style:italic;color:#777}.comment-content[data-v-d19fdc64]{margin-bottom:.75rem;width:100%;box-sizing:border-box;overflow:visible;word-wrap:break-word}.comment-text[data-v-d19fdc64]{color:#fff;line-height:1.5;font-size:.9rem;margin:0;word-wrap:break-word;word-break:break-word;overflow-wrap:anywhere;width:100%;max-width:100%;white-space:pre-wrap}.comment-text[data-v-d19fdc64] img.inline-emoji{display:inline-block;vertical-align:middle;height:2em;width:auto;margin:0 .3em;max-height:32px}.edit-form[data-v-d19fdc64]{position:relative;margin-bottom:.5rem;width:100%;box-sizing:border-box;overflow:visible;z-index:5}.edit-textarea-container[data-v-d19fdc64]{position:relative;width:100%;overflow:visible}.edit-textarea[data-v-d19fdc64]{width:100%;padding:.5rem;border:1px solid #444;border-radius:.375rem;background:#333;color:#fff;resize:none;font-size:.9rem;box-sizing:border-box;margin:0;min-height:3rem;max-height:200px;overflow-y:auto;overflow-x:hidden;line-height:1.5;transition:height .1s ease}.edit-textarea[data-v-d19fdc64]:focus{outline:none;border-color:var(--accent-color)}.edit-footer[data-v-d19fdc64]{display:flex;justify-content:flex-start;align-items:center;margin-top:.5rem;gap:1rem;overflow:visible;position:relative;z-index:10}.edit-actions[data-v-d19fdc64]{display:flex;gap:.5rem;position:relative;overflow:visible}.emoji-button-inline[data-v-d19fdc64]{padding:.25rem .5rem;background:none;border:none;cursor:pointer;font-size:1rem;color:#999;transition:color .2s;display:flex;align-items:center;justify-content:center}.emoji-button-inline[data-v-d19fdc64]:hover{color:#fff}.emoji-button-inline.active[data-v-d19fdc64]{color:var(--accent-color)}.character-counter-container[data-v-d19fdc64]{display:flex;align-items:center;gap:.5rem;position:relative;z-index:15;overflow:visible}.character-counter-inline[data-v-d19fdc64]{font-size:.75rem;color:#999;background:rgba(0,0,0,.7);padding:.25rem .5rem;border-radius:4px}.character-counter-inline.near-limit[data-v-d19fdc64]{color:gold}.character-counter-inline.at-limit[data-v-d19fdc64]{color:var(--error-color)}.cancel-button[data-v-d19fdc64]{padding:.25rem .5rem;color:#999;background:none;border:none;cursor:pointer;font-size:.8rem}.cancel-button[data-v-d19fdc64]:hover{color:#fff}.save-button[data-v-d19fdc64]{padding:.25rem .5rem;background:var(--accent-color);color:#fff;border:none;border-radius:.25rem;cursor:pointer;font-size:.8rem}.save-button[data-v-d19fdc64]:hover:not(:disabled){background:var(--accent-hover)}.save-button[data-v-d19fdc64]:disabled{background:#666;cursor:not-allowed}.comment-footer[data-v-d19fdc64]{display:flex;align-items:center;justify-content:flex-start}.comment-actions[data-v-d19fdc64]{display:flex;align-items:center;gap:.75rem}.rating-buttons[data-v-d19fdc64]{display:flex;align-items:center;gap:.5rem}.rating-button[data-v-d19fdc64]{background:none;border:none;color:#999;cursor:pointer;padding:.25rem;transition:color .2s;font-size:.8rem}.rating-button[data-v-d19fdc64]:hover{color:#fff}.rating-button.rated-up[data-v-d19fdc64]{color:var(--accent-color)}.rating-button.rated-down[data-v-d19fdc64]{color:var(--error-color)}.rating-button.disabled[data-v-d19fdc64]{opacity:.5;cursor:not-allowed}.rating-button[data-v-d19fdc64]:disabled{pointer-events:none}.rating-count[data-v-d19fdc64]{color:#999;font-size:.8rem;font-weight:500;min-width:1.5rem;text-align:center;display:flex;align-items:center;justify-content:center;line-height:1;transition:color .2s ease}.rating-count.rating-positive[data-v-d19fdc64]{color:var(--accent-color)}.rating-count.rating-negative[data-v-d19fdc64]{color:var(--error-color)}.action-buttons[data-v-d19fdc64]{display:flex;align-items:center;gap:.5rem}.action-button[data-v-d19fdc64]{background:none;border:none;color:#999;cursor:pointer;padding:.25rem;transition:color .2s;font-size:.8rem;display:flex;align-items:center;justify-content:center}.action-button[data-v-d19fdc64]:hover{color:#fff}.reply-button[data-v-d19fdc64]{background:none;border:none;color:#999}.reply-button[data-v-d19fdc64]:hover,.edit-button[data-v-d19fdc64]:hover{color:var(--accent-color)}.delete-button[data-v-d19fdc64]:hover{color:var(--error-color)}.username-link[data-v-d19fdc64]{text-decoration:none;color:inherit;transition:color .2s}.username-link[data-v-d19fdc64]:hover{color:#4a90e2}.hidden-comment-warning[data-v-d19fdc64]{background:linear-gradient(135deg,#1a1a1b,#2d2d2e);border:1px solid #343536;border-radius:6px;margin-bottom:.375rem;overflow:hidden;position:relative}.warning-text[data-v-d19fdc64]{display:flex;align-items:center;justify-content:center;gap:6px;padding:8px 12px;margin:0;color:#d7dadc;cursor:pointer;font-size:.75rem;font-weight:500;transition:all .2s ease;border:none;background:none;width:100%;text-align:center;position:relative}.warning-text[data-v-d19fdc64]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(45deg,transparent 49%,rgba(255,255,255,.03) 50%,transparent 51%);opacity:0;transition:opacity .2s ease}.warning-text i[data-v-d19fdc64]{font-size:12px;color:#878a8c;transition:all .2s ease}.warning-text[data-v-d19fdc64]:hover{background:linear-gradient(135deg,#272729,#343536);color:#fff;transform:translateY(-.5px);box-shadow:0 1px 4px rgba(0,0,0,.3)}.warning-text[data-v-d19fdc64]:hover:before{opacity:1}.warning-text:hover i[data-v-d19fdc64]{color:#ff6b35;transform:scale(1.05)}.warning-text[data-v-d19fdc64]:active{transform:translateY(0);box-shadow:0 1px 2px rgba(0,0,0,.4)}.deleted-comment[data-v-d19fdc64]{background:#1a1a1b;border:1px solid #343536;border-radius:6px;margin-bottom:.375rem}.deleted-message[data-v-d19fdc64]{display:flex;align-items:center;justify-content:center;gap:6px;padding:8px 12px;margin:0;color:#878a8c;font-size:.75rem;font-style:italic;text-align:center}.deleted-message i[data-v-d19fdc64]{font-size:12px;color:#878a8c}.comment-text-container[data-v-d19fdc64]{position:relative;max-width:100%;overflow:hidden;word-wrap:break-word}.expand-button[data-v-d19fdc64]{background:none;border:none;color:var(--accent-color);cursor:pointer;padding:.25rem 0;font:inherit;outline:inherit;font-size:.875rem;margin-top:.5rem;transition:color .2s ease}.expand-button[data-v-d19fdc64]:hover{color:var(--accent-hover);text-decoration:underline}.seven-tv-icon[data-v-d19fdc64]{height:1.2em;width:auto;vertical-align:middle;fill:currentColor}[data-v-d19fdc64] .spoiler-text{background:rgba(64,64,64,.8);color:transparent;cursor:pointer;padding:.2em .6em;border-radius:4px;transition:all .3s ease;user-select:none;position:relative;display:inline-block;min-width:60px;text-align:center}[data-v-d19fdc64] .spoiler-text:hover{background:rgba(64,64,64,.9)}[data-v-d19fdc64] .spoiler-text:before{content:"спойлер";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#999;font-size:.85em;white-space:nowrap;pointer-events:none;font-weight:500}[data-v-d19fdc64] .spoiler-text.revealed{background:transparent;color:inherit;user-select:text;min-width:auto;text-align:left;padding:0}[data-v-d19fdc64] .spoiler-text.revealed:before{display:none}.spoiler-button[data-v-d19fdc64]{color:#999}.spoiler-button[data-v-d19fdc64]:hover{color:var(--accent-hover)}.spoiler-button[data-v-d19fdc64]:disabled{opacity:.5;cursor:not-allowed}.user-details[data-v-d19fdc64]{display:flex;align-items:center;gap:.5rem;flex-wrap:wrap}.user-rating[data-v-d19fdc64]{display:flex;align-items:center;gap:.25rem;color:gold;font-size:.8rem;font-weight:500}.user-rating i[data-v-d19fdc64]{font-size:.75rem}.link-button[data-v-d19fdc64]{color:#999}.link-button[data-v-d19fdc64]:hover{color:var(--accent-hover)}.link-button[data-v-d19fdc64]:disabled{opacity:.5;cursor:not-allowed}[data-v-d19fdc64] .comment-link{color:#4a90e2;text-decoration:none;transition:color .2s ease;border-bottom:1px solid transparent}[data-v-d19fdc64] .comment-link:hover{color:#66a3e0;border-bottom-color:#66a3e0;text-decoration:none}[data-v-d19fdc64] .comment-link:visited{color:#8a7ca8}[data-v-d19fdc64] .comment-link:visited:hover{color:#a393c2;border-bottom-color:#a393c2}@media (max-width: 768px){.edit-footer[data-v-d19fdc64]{flex-direction:column;align-items:stretch;gap:.75rem}.character-counter-container[data-v-d19fdc64]{flex-wrap:wrap;justify-content:space-between;gap:.5rem}.edit-actions[data-v-d19fdc64]{justify-content:flex-start}.character-counter-inline[data-v-d19fdc64]{order:-1;margin-right:auto;margin-bottom:.25rem}.emoji-button-inline[data-v-d19fdc64]{flex-shrink:0;padding:.375rem .5rem;min-width:44px;height:44px;display:flex;align-items:center;justify-content:center}}@media (max-width: 480px){.character-counter-container[data-v-d19fdc64]{justify-content:flex-start;gap:.25rem}.emoji-button-inline[data-v-d19fdc64]{padding:.25rem .375rem;min-width:40px;height:40px;font-size:.9rem}.character-counter-inline[data-v-d19fdc64]{font-size:.7rem;padding:.2rem .4rem;width:100%;text-align:center}.save-button[data-v-d19fdc64]{min-height:44px;padding:.5rem 1rem;width:auto;min-width:90px}.cancel-button[data-v-d19fdc64]{min-height:44px;padding:.5rem 1rem;min-width:70px}.edit-form[data-v-d19fdc64]{margin-bottom:1rem}.edit-textarea[data-v-d19fdc64]{font-size:16px}}@media (max-width: 360px){.emoji-button-inline[data-v-d19fdc64]{min-width:36px;height:36px;padding:.2rem .3rem;font-size:.8rem}.character-counter-inline[data-v-d19fdc64]{font-size:.65rem}}.upvote-button.voted[data-v-d19fdc64]{color:var(--accent-color);background:var(--accent-transparent)}.downvote-button.voted[data-v-d19fdc64]{color:var(--error-color);background:rgba(231,112,85,.1)}.comment-thread[data-v-6c0fc347]{display:flex;flex-direction:column;gap:1rem;width:100%;overflow:visible}.replies-container[data-v-6c0fc347]{margin-left:1rem;margin-right:1rem;display:flex;flex-direction:column;gap:1rem;width:calc(100% - 3rem);position:relative;border-left:3px solid var(--accent-transparent);padding-left:1rem;margin-top:.5rem;overflow:visible}.reply-form[data-v-6c0fc347]{margin-left:1rem;margin-right:1rem;margin-top:1rem;padding:1rem;background:#2a2a2a;border-radius:.5rem;border-left:3px solid var(--accent-semi-transparent);width:calc(100% - 3rem);overflow:visible;position:relative;z-index:5}.reply-footer[data-v-6c0fc347]{display:flex;justify-content:flex-start;align-items:center;margin-top:.5rem;gap:1rem;overflow:visible;position:relative;z-index:10}.reply-actions[data-v-6c0fc347]{display:flex;gap:.5rem;position:relative;overflow:visible}.character-counter-container[data-v-6c0fc347]{display:flex;align-items:center;gap:.5rem;position:relative;z-index:15;overflow:visible}.character-counter-inline[data-v-6c0fc347]{font-size:.75rem;color:#999;background:rgba(0,0,0,.7);padding:.25rem .5rem;border-radius:4px}.character-counter-inline.near-limit[data-v-6c0fc347]{color:gold}.character-counter-inline.at-limit[data-v-6c0fc347]{color:red}.cancel-reply[data-v-6c0fc347]{padding:.25rem .5rem;color:#999;background:none;border:none;cursor:pointer;font-size:.8rem}.cancel-reply[data-v-6c0fc347]:hover{color:#fff}.submit-button[data-v-6c0fc347]{padding:.25rem .5rem;background:var(--accent-color);color:#fff;border:none;border-radius:.25rem;cursor:pointer;font-size:.8rem}.submit-button[data-v-6c0fc347]:hover:not(:disabled){background:var(--accent-hover)}.submit-button[data-v-6c0fc347]:disabled{background:#666;cursor:not-allowed}.textarea-container[data-v-6c0fc347]{position:relative;overflow:visible}.comment-textarea[data-v-6c0fc347]{width:100%;padding:.75rem;border:1px solid #444;border-radius:.5rem;background:#2a2a2a;color:#fff;resize:none;box-sizing:border-box;min-height:3rem;max-height:200px;overflow-y:auto;overflow-x:hidden;line-height:1.5;transition:height .1s ease;font-size:.9rem}.comment-textarea[data-v-6c0fc347]:focus{outline:none;border-color:var(--accent-color)}.comment-textarea[data-v-6c0fc347]:disabled{background:#1a1a1a;color:#666;cursor:not-allowed;border-color:#333}.emoji-button-inline[data-v-6c0fc347]{padding:.25rem .5rem;background:none;border:none;cursor:pointer;font-size:1rem;color:#999;transition:color .2s}.emoji-button-inline[data-v-6c0fc347]:hover{color:#fff}.emoji-button-inline.active[data-v-6c0fc347]{color:var(--accent-color)}.emoji-button-inline[data-v-6c0fc347]:disabled{opacity:.5;cursor:not-allowed;pointer-events:none}.collapse-toggle[data-v-6c0fc347]{display:flex;align-items:center;gap:.5rem;background:rgba(255,255,255,.05);border:1px solid var(--accent-transparent);border-radius:.5rem;padding:.5rem .75rem;margin:.5rem 0;color:#999;cursor:pointer;transition:all .2s ease;font-size:.85rem;min-width:fit-content;position:relative;left:0;z-index:2}.collapse-toggle[data-v-6c0fc347]:hover{background:var(--accent-transparent);border-color:var(--accent-semi-transparent);color:#fff;transform:translateY(-1px)}.collapse-icon[data-v-6c0fc347]{display:flex;align-items:center;justify-content:center;transition:transform .3s ease;color:var(--accent-color)}.collapse-icon.expanded[data-v-6c0fc347]{transform:rotate(180deg)}.replies-count[data-v-6c0fc347]{font-size:.85rem;font-weight:500;color:inherit;user-select:none}.replies-content[data-v-6c0fc347]{display:flex;flex-direction:column;gap:1rem;padding-top:1rem;margin-left:0;width:100%;overflow:visible}.vertical-line-clickable[data-v-6c0fc347]{position:absolute;left:-8px;top:0;width:16px;height:100%;cursor:pointer;z-index:1;transition:all .2s ease}.vertical-line-clickable[data-v-6c0fc347]:hover{background:var(--accent-transparent)}.vertical-line-visual[data-v-6c0fc347]{position:absolute;left:50%;top:0;width:3px;height:100%;background:var(--accent-transparent);transform:translate(-50%);transition:all .2s ease}.vertical-line-clickable:hover .vertical-line-visual[data-v-6c0fc347]{background:var(--accent-semi-transparent);width:4px}.vertical-line-visual.collapsed[data-v-6c0fc347]{background:var(--accent-semi-transparent)}.comment-content[data-v-6c0fc347]{white-space:pre-wrap;word-break:break-word;line-height:1.5;color:#fff}.comment-content[data-v-6c0fc347] img.inline-emoji{display:inline-block;vertical-align:middle;height:1.2em;width:auto;margin:0 .1em}.seven-tv-icon[data-v-6c0fc347]{height:1.2em;width:auto;vertical-align:middle;fill:currentColor}[data-v-6c0fc347] .spoiler-text{background:rgba(64,64,64,.8);color:transparent;cursor:pointer;padding:.2em .6em;border-radius:4px;transition:all .3s ease;user-select:none;position:relative;display:inline-block;min-width:60px;text-align:center}[data-v-6c0fc347] .spoiler-text:hover{background:rgba(64,64,64,.9)}[data-v-6c0fc347] .spoiler-text:before{content:"спойлер";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#999;font-size:.85em;white-space:nowrap;pointer-events:none;font-weight:500}[data-v-6c0fc347] .spoiler-text.revealed{background:transparent;color:inherit;user-select:text;min-width:auto;text-align:left;padding:0}[data-v-6c0fc347] .spoiler-text.revealed:before{display:none}.spoiler-button[data-v-6c0fc347]{color:#999}.spoiler-button[data-v-6c0fc347]:hover{color:var(--accent-hover)}.spoiler-button[data-v-6c0fc347]:disabled{opacity:.5;cursor:not-allowed}.link-button[data-v-6c0fc347]{color:#999}.link-button[data-v-6c0fc347]:hover{color:var(--accent-hover)}.link-button[data-v-6c0fc347]:disabled{opacity:.5;cursor:not-allowed}@media (max-width: 768px){.reply-footer[data-v-6c0fc347]{flex-direction:column;align-items:stretch;gap:.75rem}.character-counter-container[data-v-6c0fc347]{flex-wrap:wrap;justify-content:space-between;gap:.5rem}.reply-actions[data-v-6c0fc347]{justify-content:flex-start}.character-counter-inline[data-v-6c0fc347]{order:-1;margin-right:auto;margin-bottom:.25rem}.emoji-button-inline[data-v-6c0fc347]{flex-shrink:0;padding:.375rem .5rem;min-width:44px;height:44px;display:flex;align-items:center;justify-content:center}}@media (max-width: 480px){.character-counter-container[data-v-6c0fc347]{justify-content:flex-start;gap:.25rem}.emoji-button-inline[data-v-6c0fc347]{padding:.25rem .375rem;min-width:40px;height:40px;font-size:.9rem}.character-counter-inline[data-v-6c0fc347]{font-size:.7rem;padding:.2rem .4rem;width:100%;text-align:center}.submit-button[data-v-6c0fc347]{min-height:44px;padding:.5rem 1rem;width:auto;min-width:80px}.cancel-reply[data-v-6c0fc347]{min-height:44px;padding:.5rem 1rem;min-width:60px}.reply-form[data-v-6c0fc347]{margin-bottom:1rem}.comment-textarea[data-v-6c0fc347]{font-size:16px}}@media (max-width: 360px){.emoji-button-inline[data-v-6c0fc347]{min-width:36px;height:36px;padding:.2rem .3rem;font-size:.8rem}.character-counter-inline[data-v-6c0fc347]{font-size:.65rem}}.comments-section[data-v-79080d6f]{margin:0;padding:20px 0;overflow:visible}.comments-title[data-v-79080d6f]{font-size:1.4rem;font-weight:700;margin-bottom:1rem;color:#fff}.comment-form[data-v-79080d6f]{margin-bottom:1.25rem;width:100%;overflow:visible;position:relative;z-index:1}.textarea-container[data-v-79080d6f]{position:relative;width:100%;overflow:visible}.comment-textarea[data-v-79080d6f]{width:100%;padding:.75rem;border:1px solid #444;border-radius:.5rem;background:#2a2a2a;color:#fff;resize:none;box-sizing:border-box;min-height:3rem;max-height:200px;overflow-y:auto;overflow-x:hidden;line-height:1.5;transition:height .1s ease;font-size:.9rem}.comment-textarea[data-v-79080d6f]:focus{outline:none;border-color:var(--accent-color)}.comment-textarea[data-v-79080d6f]:disabled{background:#1a1a1a;color:#666;cursor:not-allowed;border-color:#333}.submit-button[data-v-79080d6f]{padding:.25rem .5rem;background:var(--accent-color);color:#fff;border:none;border-radius:.25rem;cursor:pointer;transition:background-color .2s;font-size:.8rem}.submit-button[data-v-79080d6f]:hover:not(:disabled){background:var(--accent-hover)}.submit-button[data-v-79080d6f]:disabled{background:#666;cursor:not-allowed}.comments-list[data-v-79080d6f],.comment-group[data-v-79080d6f]{display:flex;flex-direction:column;gap:1rem;width:100%;overflow:visible}.replies-container[data-v-79080d6f]{margin-left:2rem;margin-right:1rem;padding-left:1rem;border-left:2px solid var(--accent-transparent);display:flex;flex-direction:column;gap:1rem;width:calc(100% - 3rem);overflow:visible}.reply-form[data-v-79080d6f]{margin-left:2rem;margin-right:1rem;padding:1rem;background:#2a2a2a;border-radius:.5rem;border-left:2px solid var(--accent-semi-transparent);width:calc(100% - 3rem);overflow:visible}.reply-form.nested[data-v-79080d6f]{margin-left:0;background:#333;border-left:none;width:100%;overflow:visible}.reply-header[data-v-79080d6f]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem;font-size:.85rem}.cancel-reply[data-v-79080d6f]{color:#999;background:none;border:none;cursor:pointer;padding:.25rem .5rem;font-size:.85rem}.cancel-reply[data-v-79080d6f]:hover{color:#fff}.auth-link[data-v-79080d6f]{color:var(--accent-color);cursor:pointer;text-decoration:underline;transition:color .2s ease}.auth-link[data-v-79080d6f]:hover{color:var(--accent-hover)}.spoiler-warning[data-v-79080d6f]{background:linear-gradient(135deg,#1a1a1b,#2d2d2e);border:1px solid #343536;border-radius:8px;padding:1rem 1.5rem;margin-bottom:1rem;cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden}.spoiler-warning[data-v-79080d6f]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(45deg,transparent 49%,rgba(255,255,255,.03) 50%,transparent 51%);opacity:0;transition:opacity .3s ease}.spoiler-warning[data-v-79080d6f]:hover{transform:translateY(-1px);box-shadow:0 4px 15px rgba(0,0,0,.2);border-color:var(--accent-color)}.spoiler-warning[data-v-79080d6f]:hover:before{opacity:1}.spoiler-content[data-v-79080d6f]{display:flex;flex-direction:column;align-items:center;text-align:center;position:relative;z-index:1;gap:.5rem}.spoiler-content i[data-v-79080d6f]{font-size:1.5rem;color:var(--accent-color);margin-bottom:.25rem;transition:all .3s ease}.spoiler-warning:hover .spoiler-content i[data-v-79080d6f]{transform:scale(1.05);color:var(--accent-hover)}.spoiler-content h3[data-v-79080d6f]{font-size:1rem;font-weight:600;color:#fff;margin:0}.spoiler-content p[data-v-79080d6f]{font-size:.875rem;color:#999;margin:0;line-height:1.4}.comments-count[data-v-79080d6f]{background:var(--accent-transparent);color:var(--accent-color);padding:.25rem .75rem;border-radius:15px;font-size:.75rem;font-weight:500;border:1px solid var(--accent-semi-transparent);transition:all .3s ease}.comments-count.no-comments[data-v-79080d6f]{background:rgba(128,128,128,.2);color:gray;border:1px solid rgba(128,128,128,.3)}.spoiler-warning:hover .comments-count.no-comments[data-v-79080d6f]{background:rgba(128,128,128,.3);border-color:rgba(128,128,128,.5);color:#999}.comments-container[data-v-79080d6f]{margin-bottom:1rem;overflow:visible}.comments-header[data-v-79080d6f]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;padding-bottom:.5rem}.comments-header h3[data-v-79080d6f]{margin:0;color:#fff;font-size:1.1rem}.hide-comments-btn[data-v-79080d6f]{display:flex;align-items:center;gap:.5rem;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.1);border-radius:6px;padding:.5rem 1rem;cursor:pointer;color:#999;font-size:.85rem;transition:all .2s ease}.hide-comments-btn[data-v-79080d6f]:hover{background:rgba(255,255,255,.1);border-color:rgba(255,255,255,.2);color:#fff;transform:translateY(-1px)}.character-counter-container[data-v-79080d6f]{display:flex;align-items:center;gap:.5rem;position:relative;z-index:10;overflow:visible}.character-counter-inline[data-v-79080d6f]{font-size:.75rem;color:#999;background:rgba(0,0,0,.7);padding:.25rem .5rem;border-radius:4px}.character-counter-inline.near-limit[data-v-79080d6f]{color:gold}.character-counter-inline.at-limit[data-v-79080d6f]{color:red}.comment-footer[data-v-79080d6f]{display:flex;justify-content:flex-start;align-items:center;margin-top:.5rem;gap:1rem;overflow:visible;position:relative;z-index:5}.comment-actions[data-v-79080d6f]{display:flex;gap:.5rem;position:relative;overflow:visible}.emoji-button-inline[data-v-79080d6f]{padding:.25rem .5rem;background:none;border:none;cursor:pointer;font-size:1rem;color:#999;transition:color .2s ease;margin-left:.25rem}.emoji-button-inline[data-v-79080d6f]:hover{color:#fff}.emoji-button-inline.active[data-v-79080d6f]{color:var(--accent-color)}.emoji-button-inline[data-v-79080d6f]:disabled{opacity:.5;cursor:not-allowed;pointer-events:none}.comment-form-header[data-v-79080d6f]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:1px solid #444}.comment-form-header h3[data-v-79080d6f]{margin:0;color:#fff;font-size:1.1rem}.seven-tv-icon[data-v-79080d6f]{height:1.2em;width:auto;vertical-align:middle;fill:currentColor}.inline-emoji[data-v-79080d6f]{display:inline-block;vertical-align:middle;height:1.2em;width:auto;margin:0 .1em}[data-v-79080d6f] .spoiler-text{background:rgba(64,64,64,.8);color:transparent;cursor:pointer;padding:.2em .6em;border-radius:4px;transition:all .3s ease;user-select:none;position:relative;display:inline-block;min-width:60px;text-align:center}[data-v-79080d6f] .spoiler-text:hover{background:rgba(64,64,64,.9)}[data-v-79080d6f] .spoiler-text:before{content:"спойлер";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#999;font-size:.85em;white-space:nowrap;pointer-events:none;font-weight:500}[data-v-79080d6f] .spoiler-text a{color:transparent!important;text-decoration:none!important;border-bottom:none!important;pointer-events:none!important}[data-v-79080d6f] .spoiler-text.revealed{background:transparent;color:inherit;user-select:text;min-width:auto;text-align:left;padding:0}[data-v-79080d6f] .spoiler-text.revealed:before{display:none}[data-v-79080d6f] .spoiler-text.revealed a{color:#4a90e2!important;text-decoration:none!important;border-bottom:1px solid transparent!important;transition:color .2s ease,border-bottom-color .2s ease!important;pointer-events:auto!important}[data-v-79080d6f] .spoiler-text.revealed a:hover{color:#66a3e0!important;border-bottom-color:#66a3e0!important}[data-v-79080d6f] .spoiler-text.revealed a:visited{color:#8a7ca8!important}[data-v-79080d6f] .spoiler-text.revealed a:visited:hover{color:#a393c2!important;border-bottom-color:#a393c2!important}.spoiler-button[data-v-79080d6f]{color:#999}.spoiler-button[data-v-79080d6f]:hover{color:var(--accent-hover)}.spoiler-button[data-v-79080d6f]:disabled{opacity:.5;cursor:not-allowed}.link-button[data-v-79080d6f]{color:#999}.link-button[data-v-79080d6f]:hover{color:var(--accent-hover)}.link-button[data-v-79080d6f]:disabled{opacity:.5;cursor:not-allowed}.show-more-comments[data-v-79080d6f]{text-align:center;margin-top:1rem}.show-more-btn[data-v-79080d6f]{padding:.5rem 1rem;background:var(--accent-color);color:#fff;border:none;border-radius:.25rem;cursor:pointer;transition:all .3s ease;font-size:.8rem;border:1px solid var(--accent-semi-transparent)}.show-more-btn[data-v-79080d6f]:hover:not(:disabled){background:var(--accent-hover);transform:translateY(-1px);box-shadow:0 2px 8px var(--accent-transparent)}.show-more-btn[data-v-79080d6f]:disabled{background:#666;cursor:not-allowed;border-color:rgba(128,128,128,.3)}@media (max-width: 768px){.comment-footer[data-v-79080d6f]{flex-direction:column;align-items:stretch;gap:.75rem}.character-counter-container[data-v-79080d6f]{flex-wrap:wrap;justify-content:space-between;gap:.5rem}.comment-actions[data-v-79080d6f]{justify-content:flex-start}.character-counter-inline[data-v-79080d6f]{order:-1;margin-right:auto;margin-bottom:.25rem}.emoji-button-inline[data-v-79080d6f]{flex-shrink:0;padding:.375rem .5rem;min-width:44px;height:44px;display:flex;align-items:center;justify-content:center;margin-left:0}}@media (max-width: 480px){.character-counter-container[data-v-79080d6f]{justify-content:flex-start;gap:.25rem}.emoji-button-inline[data-v-79080d6f]{padding:.25rem .375rem;min-width:40px;height:40px;font-size:.9rem}.character-counter-inline[data-v-79080d6f]{font-size:.7rem;padding:.2rem .4rem;width:100%;text-align:center}.submit-button[data-v-79080d6f]{min-height:44px;padding:.5rem 1rem;width:100%}.comment-form[data-v-79080d6f]{margin-bottom:1rem}.comment-textarea[data-v-79080d6f]{font-size:16px}}@media (max-width: 360px){.emoji-button-inline[data-v-79080d6f]{min-width:36px;height:36px;padding:.2rem .3rem;font-size:.8rem}.character-counter-inline[data-v-79080d6f]{font-size:.65rem}}.comment-preview[data-v-79080d6f]{background:rgba(255,255,255,.05);border-radius:6px;padding:8px;margin-bottom:6px;border-left:2px solid var(--accent-color);cursor:pointer;transition:all .2s ease}.reply-btn[data-v-79080d6f]{background:var(--accent-color);color:#fff;border:none;padding:.5rem 1rem;border-radius:6px;cursor:pointer;font-size:.9rem;transition:all .2s ease;display:flex;align-items:center;gap:.5rem}.content[data-v-b3605321]{min-height:100vh}.content-card[data-v-b3605321]{overflow:hidden;padding:20px;color:#e0e0e0}.content-header[data-v-b3605321]{height:80px;width:100%;display:flex;align-items:center;justify-content:center;overflow:hidden;cursor:pointer;flex-wrap:wrap;height:auto;min-height:80px}.content-logo[data-v-b3605321]{max-height:80px;height:80px;width:auto;object-fit:contain;max-width:100%;transition:all .3s ease;cursor:pointer}.content-logo[data-v-b3605321]:hover{filter:drop-shadow(0 0 15px var(--accent-semi-transparent))}.content-title-container[data-v-b3605321]{display:flex;align-items:center;gap:20px;width:100%;justify-content:center}.movie-poster-thumbnail[data-v-b3605321]{width:60px;height:90px;flex-shrink:0;border-radius:8px;overflow:hidden;box-shadow:0 4px 12px rgba(0,0,0,.3);transition:transform .2s ease}.movie-poster-thumbnail[data-v-b3605321]:hover{transform:scale(1.05)}.movie-poster-thumbnail img[data-v-b3605321]{width:100%;height:100%;object-fit:cover}.content-title[data-v-b3605321]{font-size:55px;margin:0;line-height:1;display:flex;align-items:center;justify-content:center;width:100%;text-align:center;white-space:normal;word-break:break-word;overflow-wrap:anywhere;transition:all .3s ease;cursor:pointer}.content-title[data-v-b3605321]:hover{text-shadow:0 0 20px var(--accent-semi-transparent);color:#fff}.content-subtitle[data-v-b3605321]{font-size:20px;color:#bbb}.ratings-links[data-v-b3605321]{display:flex;justify-content:center;align-items:center;gap:20px;margin:15px 0}.rating-link[data-v-b3605321]{display:inline-flex;align-items:center;color:#fff;text-decoration:none;font-weight:700;background:rgba(0,0,0,.7);padding:5px 10px;border-radius:5px;gap:5px;transition:all .2s ease;vertical-align:middle}.rating-link[data-v-b3605321]:hover{background:rgba(255,255,255,.1);border-color:var(--accent-color);box-shadow:0 0 10px var(--accent-semi-transparent)}.rating-logo[data-v-b3605321]{width:20px;height:20px;margin-right:5px}.external-link-icon[data-v-b3605321]{width:20px;height:auto;margin-left:5px}.additional-info[data-v-b3605321]{border-radius:8px;margin-bottom:20px;font-size:16px}.additional-info-title[data-v-b3605321]{margin:15px 0;text-align:left;color:#fff}.info-content[data-v-b3605321]{display:flex;gap:15px;align-items:flex-start}.movie-poster-container[data-v-b3605321]{flex-shrink:0;width:200px;border-radius:12px;overflow:hidden;box-shadow:0 4px 12px rgba(0,0,0,.3);transition:transform .2s ease}.movie-poster-container[data-v-b3605321]:hover{transform:scale(1.02);box-shadow:0 6px 20px var(--accent-semi-transparent)}.movie-poster[data-v-b3605321]{width:100%;height:auto;display:block}.details-container[data-v-b3605321]{flex:1;min-width:0}.info-list[data-v-b3605321]{list-style:none;padding:0;margin:0}.info-list li[data-v-b3605321]{margin-bottom:8px}.content-info[data-v-b3605321]{font-size:16px;line-height:1.6;color:#ccc;margin-top:20px}.content-description-text[data-v-b3605321]{margin:0;white-space:pre-wrap}.error-message[data-v-b3605321]{color:var(--accent-color);text-align:center;padding:20px;font-size:1.2rem;border:1px solid var(--accent-color);border-radius:5px;margin:20px auto;max-width:500px;background:var(--accent-transparent)}.related-movies[data-v-b3605321]{margin-top:30px;position:relative}.related-movies h2[data-v-b3605321]{color:#fff;margin-bottom:15px}.title-copy-tooltip[data-v-b3605321]{position:absolute;background-color:#333;color:#fff;padding:5px 10px;border-radius:5px;font-size:14px;white-space:nowrap;pointer-events:none}@media (max-width: 600px){.content-card[data-v-b3605321]{padding:0 2px}.content-header[data-v-b3605321],.content-logo[data-v-b3605321],.content-title[data-v-b3605321]{display:none}.content-subtitle[data-v-b3605321]{font-size:16px}.ratings-links[data-v-b3605321]{margin:5px 0;gap:8px;flex-wrap:wrap}.rating-link[data-v-b3605321]{padding:3px 6px;font-size:14px}.rating-logo[data-v-b3605321]{width:16px;height:16px;margin-right:3px}.external-link-icon[data-v-b3605321]{width:16px;margin-left:3px}.additional-info-title[data-v-b3605321]{font-size:20px}.info-content[data-v-b3605321]{flex-direction:column;align-items:center}.content-title-container[data-v-b3605321]{flex-direction:column;gap:10px}.movie-poster-thumbnail[data-v-b3605321]{width:50px;height:75px}}.controls[data-v-b3605321]{display:flex;flex-wrap:wrap;justify-content:center;gap:10px;margin-top:40px;border-radius:10px}.controls button[data-v-b3605321]{display:flex;align-items:center;justify-content:center;background-color:#444;color:#fff;border:none;padding:12px;font-size:18px;border-radius:8px;cursor:pointer;transition:background-color .3s ease,transform .2s ease,box-shadow .3s ease;z-index:4;width:50px;height:50px}.controls button[data-v-b3605321]:hover{background-color:var(--accent-color);transform:translateY(-3px);box-shadow:0 4px 10px var(--accent-semi-transparent)}.controls button[data-v-b3605321]:active{transform:translateY(0);box-shadow:none}.controls button.active[data-v-b3605321]{background-color:var(--accent-color);box-shadow:0 0 10px var(--accent-semi-transparent)}.material-icons[data-v-b3605321]{font-size:24px}.tooltip-container[data-v-b3605321]{position:relative;display:inline-block}.custom-tooltip[data-v-b3605321]{position:absolute;top:100%;left:50%;transform:translate(-50%);background-color:#333;color:#fff;padding:5px;border-radius:4px;font-size:16px;white-space:nowrap;margin-top:8px;pointer-events:none;text-align:center}.advanced-tooltip[data-v-b3605321]{white-space:normal;padding:15px;display:flex;flex-direction:column;align-items:center;gap:10px;top:calc(100% + 5px);pointer-events:all;text-align:center}.tooltip-title[data-v-b3605321]{font-size:16px;text-align:center}.movie-skeleton[data-v-b3605321]{padding:0 20px 20px;color:#e0e0e0}.movie-skeleton__header[data-v-b3605321]{height:80px;width:100%;display:flex;align-items:center;justify-content:center;margin-bottom:20px}.movie-skeleton__logo[data-v-b3605321]{width:200px;height:80px;background:linear-gradient(90deg,rgba(30,30,30,.9),rgba(50,50,50,.9),rgba(30,30,30,.9));background-size:200% 100%;animation:shimmer-b3605321 2s infinite linear;border-radius:8px}.movie-skeleton__title[data-v-b3605321]{width:30%;height:40px;background:linear-gradient(90deg,rgba(40,40,40,.8),rgba(60,60,60,.8),rgba(40,40,40,.8));background-size:200% 100%;animation:shimmer-b3605321 2s infinite linear;border-radius:12px;margin:0 auto;box-shadow:0 2px 8px rgba(0,0,0,.15);position:relative;overflow:hidden}.movie-skeleton__title[data-v-b3605321]:after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(90deg,transparent 0%,rgba(255,255,255,.05) 50%,transparent 100%);animation:shine-b3605321 1.5s infinite}@keyframes shine-b3605321{0%{transform:translate(-100%)}to{transform:translate(100%)}}.movie-skeleton__ratings[data-v-b3605321]{display:flex;justify-content:center;align-items:center;gap:20px;margin:15px 0}.movie-skeleton__rating-item[data-v-b3605321]{width:120px;height:30px;background:linear-gradient(90deg,rgba(30,30,30,.9),rgba(50,50,50,.9),rgba(30,30,30,.9));background-size:200% 100%;animation:shimmer-b3605321 2s infinite linear;border-radius:8px}.movie-skeleton__player[data-v-b3605321]{width:60%;height:500px;background-size:200% 100%;animation:shimmer-b3605321 2s infinite linear;border-radius:12px;margin:20px auto;box-shadow:0 4px 12px rgba(0,0,0,.2);position:relative;overflow:hidden;display:flex;align-items:center;justify-content:center}.movie-skeleton__player[data-v-b3605321]:before{content:"";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:60px;height:60px;border:4px solid rgba(255,255,255,.1);border-top:4px solid rgba(255,255,255,.5);border-radius:50%;animation:spin-b3605321 1s linear infinite}@keyframes spin-b3605321{0%{transform:translate(-50%,-50%) rotate(0)}to{transform:translate(-50%,-50%) rotate(360deg)}}.movie-skeleton__additional-info[data-v-b3605321]{margin:20px 0}.movie-skeleton__section-title[data-v-b3605321]{width:150px;height:24px;background:linear-gradient(90deg,rgba(30,30,30,.9),rgba(50,50,50,.9),rgba(30,30,30,.9));background-size:200% 100%;animation:shimmer-b3605321 2s infinite linear;border-radius:8px;margin-bottom:15px}.movie-skeleton__info-list[data-v-b3605321]{display:flex;flex-direction:column;gap:10px}.movie-skeleton__info-item[data-v-b3605321]{width:100%;height:20px;background:linear-gradient(90deg,rgba(30,30,30,.9),rgba(50,50,50,.9),rgba(30,30,30,.9));background-size:200% 100%;animation:shimmer-b3605321 2s infinite linear;border-radius:8px}.movie-skeleton__description[data-v-b3605321]{margin:20px 0}.movie-skeleton__description-line[data-v-b3605321]{width:100%;height:16px;background:linear-gradient(90deg,rgba(30,30,30,.9),rgba(50,50,50,.9),rgba(30,30,30,.9));background-size:200% 100%;animation:shimmer-b3605321 2s infinite linear;border-radius:8px;margin-bottom:10px}.movie-skeleton__description-line[data-v-b3605321]:nth-child(2){width:90%}.movie-skeleton__description-line[data-v-b3605321]:nth-child(3){width:95%}.movie-skeleton__description-line[data-v-b3605321]:nth-child(4){width:85%}@keyframes shimmer-b3605321{0%{background-position:-200% 0}to{background-position:200% 0}}@media (max-width: 600px){.movie-skeleton[data-v-b3605321]{padding:10px}.movie-skeleton__header[data-v-b3605321]{height:60px}.movie-skeleton__logo[data-v-b3605321]{width:150px;height:60px}.movie-skeleton__title[data-v-b3605321]{width:70%;height:30px}.movie-skeleton__player[data-v-b3605321]{height:250px}.movie-skeleton__rating-item[data-v-b3605321]{width:80px;height:25px}.movie-skeleton__control-btn[data-v-b3605321]{width:40px;height:40px}}.staff-section[data-v-b3605321]{border-radius:8px}.staff-categories[data-v-b3605321]{display:flex;flex-direction:column;gap:20px}.staff-category h3[data-v-b3605321]{color:#fff;margin-bottom:10px;font-size:18px}.staff-list[data-v-b3605321]{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:15px;align-items:start;margin-bottom:10px}.staff-item[data-v-b3605321]{display:flex;flex-direction:column;align-items:center;text-align:center;height:100%}.staff-link[data-v-b3605321]{display:flex;flex-direction:column;align-items:center;text-decoration:none;color:inherit;transition:transform .2s;height:100%}.staff-link[data-v-b3605321]:hover{transform:translateY(-3px);filter:drop-shadow(0 4px 8px var(--accent-semi-transparent))}.staff-photo[data-v-b3605321]{width:80px;height:80px;border-radius:50%;object-fit:cover;margin-bottom:8px;border:2px solid rgba(255,255,255,.1);flex-shrink:0;transition:all .2s ease}.staff-link:hover .staff-photo[data-v-b3605321]{border-color:var(--accent-color);box-shadow:0 0 12px var(--accent-semi-transparent)}.staff-name[data-v-b3605321]{font-size:14px;color:#fff;margin-bottom:4px;min-height:2.8em;display:flex;align-items:center;justify-content:center;text-align:center;padding:0 4px}.staff-role[data-v-b3605321]{font-size:12px;color:#aaa;min-height:1.8em;display:flex;align-items:center;justify-content:center;text-align:center;padding:0 4px}@media (max-width: 600px){.staff-list[data-v-b3605321]{grid-template-columns:repeat(auto-fill,minmax(100px,1fr))}.staff-photo[data-v-b3605321]{width:60px;height:60px}.staff-name[data-v-b3605321]{font-size:12px;min-height:2.4em}.staff-role[data-v-b3605321]{font-size:10px;min-height:1.6em}}.show-all-link[data-v-b3605321]{display:inline-block;color:#aaa;text-decoration:none;margin-top:10px;cursor:pointer;transition:color .2s}.show-all-link[data-v-b3605321]:hover{color:#fff;text-decoration:underline}.expand-actors-circle-button[data-v-b3605321]{width:80px;height:80px;border-radius:50%;background:rgba(255,255,255,.1);border:none;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;color:#fff;font-size:24px;text-decoration:none;flex-shrink:0}.expand-circle-button[data-v-b3605321]{position:absolute;top:0;right:15px;width:40px;height:40px;border-radius:50%;background:rgba(255,255,255,.1);border:none;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;color:#fff;font-size:20px;text-decoration:none}.expand-circle-button[data-v-b3605321]:hover{background:var(--accent-color);transform:scale(1.05);box-shadow:0 4px 12px var(--accent-semi-transparent)}@media (max-width: 600px){.expand-circle-button[data-v-b3605321]{width:35px;height:35px;font-size:16px}}.show-more-btn[data-v-b3605321]{display:block;margin:15px auto;padding:8px 16px;background:#3a3a3a;color:#fff;border:1px solid #505050;border-radius:4px;cursor:pointer;transition:all .2s ease}.show-more-btn[data-v-b3605321]:hover{background:var(--accent-color);border-color:var(--accent-color);box-shadow:0 4px 8px var(--accent-semi-transparent)}.show-more-btn[data-v-b3605321]:active{background:var(--accent-color);border-color:var(--accent-color)}.rating-links-group[data-v-b3605321]{display:flex;gap:10px}.nudity-info-btn[data-v-b3605321]{position:relative;background:none;border:none;padding:0;cursor:pointer;color:inherit;font:inherit;display:flex;align-items:center;gap:5px}.nudity-info-btn:hover i[data-v-b3605321]{color:var(--accent-color)}.nudity-info-btn[data-v-b3605321]:hover{background:none!important;border:none!important;box-shadow:none!important}.nudity-info-btn i[data-v-b3605321]{font-size:20px;color:#fff}.nudity-info-btn .fa-spinner[data-v-b3605321]{color:#fff}.nudity-info-popup[data-v-b3605321]{position:absolute;top:100%;left:50%;transform:translate(-50%);background:rgba(0,0,0,.9);border:1px solid #333;border-radius:8px;padding:15px;margin-top:10px;min-width:300px;max-width:500px;z-index:1000;box-shadow:0 4px 12px rgba(0,0,0,.3)}.nudity-info-content[data-v-b3605321]{color:#fff;font-size:14px;line-height:1.5;white-space:pre-wrap}@media (max-width: 600px){.nudity-info-popup[data-v-b3605321]{min-width:250px;max-width:90vw}}.staff-names-container[data-v-b3605321]{display:flex;align-items:flex-start;gap:15px;margin-bottom:15px;width:100%}.staff-names-list[data-v-b3605321]{display:flex;flex-wrap:wrap;gap:10px;flex:1;min-width:0;align-items:center}.staff-name-link[data-v-b3605321]{color:#fff;text-decoration:none;padding:5px 10px;background:rgba(255,255,255,.1);border-radius:4px;transition:all .2s ease;white-space:nowrap;flex-shrink:0}.staff-name-link[data-v-b3605321]:hover{background:var(--accent-color);color:#fff;transform:translateY(-2px);box-shadow:0 4px 8px var(--accent-semi-transparent)}.staff-list .expand-actors-circle-button[data-v-b3605321]{width:80px;height:80px;border-radius:50%;background:rgba(255,255,255,.1);border:none;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;color:#fff;font-size:24px;text-decoration:none;flex-shrink:0}.staff-list .expand-actors-circle-button[data-v-b3605321]:hover{background:var(--accent-color);transform:scale(1.05);box-shadow:0 4px 12px var(--accent-semi-transparent)}.staff-names-list .expand-actors-circle-button[data-v-b3605321]{width:40px;height:40px;border-radius:50%;background:rgba(255,255,255,.1);border:none;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;color:#fff;font-size:16px;text-decoration:none;flex-shrink:0}.staff-names-list .expand-actors-circle-button[data-v-b3605321]:hover{background:var(--accent-color);transform:scale(1.05);box-shadow:0 4px 12px var(--accent-semi-transparent)}@media (max-width: 600px){.staff-names-container[data-v-b3605321]{flex-direction:row;align-items:flex-start;gap:10px}.staff-names-list[data-v-b3605321]{width:auto;flex:1}.staff-name-link[data-v-b3605321]{font-size:14px;padding:4px 8px}.staff-list .expand-actors-circle-button[data-v-b3605321]{width:60px;height:60px;font-size:20px}.staff-names-list .expand-actors-circle-button[data-v-b3605321]{width:35px;height:35px;font-size:14px}}.related-movies-list[data-v-b3605321] .grid{grid-template-columns:repeat(auto-fill,minmax(140px,1fr))}@media (max-width: 620px){.related-movies-list[data-v-b3605321] .grid{grid-template-columns:1fr}}@media (max-width: 768px){.info-content[data-v-b3605321]{flex-direction:column;align-items:flex-start}.desktop-only[data-v-b3605321]{display:none}}.rating-value.low[data-v-b3605321]{color:#ff6b6b!important}.rating-value.medium[data-v-b3605321]{color:#ffd93d!important}.rating-value.high[data-v-b3605321]{color:#51cf66!important}.desktop-text[data-v-b3605321]{display:inline}.mobile-text[data-v-b3605321]{display:none}@media (max-width: 600px){.desktop-text[data-v-b3605321]{display:none}.mobile-text[data-v-b3605321]{display:inline}}.rating-links-group[data-v-b3605321]{gap:5px}\n/*$vite$:1*/',document.head.appendChild(a);var xe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVR4nO2ZQUoDMRSGR7eewHoFsVS0HkUUXNXqASqK2EURBPFIVRe6c+UN1CvUXWvbT4KvMAwzNnnJdCrmg1BKad7/v7y0b5IkiUQiCwGoAx3gQjEugZ0qxTeAIX6MKjMBnBOGS62AVWAPOHVYdlMu9YArYOhphLeBT+ALmOKGEd2QubaAK+B2zngFxt4GgDXgGZjgR8ch5oEkCi8DkvlnRcYLV0Apfqw10M7JvPkV6AN3FmVwK+WyZRnvMEe8ef/ibECyb2o+zRuwnpQAxeLNivQ0BvYyE46qEJ/8fK4ycJKp/X4V4n0MdDNfukkqEO9jwP1LDgD7BeKPgmgp04CL+KUz4Cp+qQxoxC+NAdsNm4c0hWkukkUa8BGfegiadbFDq3/2UAZ8xc+QVvzMtqcKYkBaZ5/MN5xEl2DgLGDZ1KswsC09FPJqXTZoNm5oA6kyMGI2FxqfkluJ0uMTDfhBXAHiHvCCWEL8/RLqlv1MPCf+TSZ+13WC7KnEfWlqcwAeU7GNjnbiQsG5UC1ZAEAt1UMhOpquk6zknMy9l20C2AA+MnEHRo9msuOCs9EH4Fp5TVQ0rqVs0plH4re02Qh1Oq1lCjypsp+5H3gKcD/gykTirqnFZ/ZDy+OGxpapzD+QePrM/2KkKfcGPcv7AdvRkz23G1x4JPIP+AY3r/ywUk/2JAAAAABJRU5ErkJggg==",ke=e=>{var t=document.createElement("div");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.backgroundColor="rgba(0, 0, 0, 0.8)",t.style.color="white",t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",t.style.fontSize="2rem",t.style.zIndex="99000",t.textContent=e,document.body.appendChild(t),setTimeout((()=>{document.body.removeChild(t)}),2e3)},ye={key:0},we={key:1},_e={class:"players-list"},Ce=["onClick"],Ee={key:0,class:"warning-icon material-icons",title:"Внимание!"},Me={key:0},Le={key:0,class:"warning-icon material-icons",title:"Внимание!"},je={key:1},Ie={key:0,class:"warning-icon material-icons",title:"Внимание!"},ze=["onClick"],Pe={key:0,class:"warning-icon material-icons",title:"Внимание!"},Re=o({__name:"PlayerModal",props:{players:{type:Array,required:!0},selectedPlayer:{type:Object,default:null}},emits:["close","select"],setup(e,t){var a=t.emit,n=e,o=a,i=r(null),l=s((()=>n.players.filter((e=>!y(e)&&!w(e))))),x=s((()=>n.players.some((e=>y(e))))),k=s((()=>n.players.some((e=>w(e))))),y=e=>e.key.toUpperCase().includes("HDREZKA"),w=e=>e.key.toUpperCase().includes("KODIK"),_=e=>e.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"").replace(/KODIK>/,"").trim(),C=e=>{o("select",e),o("close")},E=e=>n.selectedPlayer&&n.selectedPlayer.key===e.key,M=e=>!!n.selectedPlayer&&("hdrezka"===e&&y(n.selectedPlayer)||"kodik"===e&&w(n.selectedPlayer)),L=e=>{i.value=e},j=()=>{i.value=null},I=e=>{var t=n.players.filter((t=>"hdrezka"===e&&y(t)||"kodik"===e&&w(t)));return"kodik"===e?t.sort(((e,t)=>_(e.translate).localeCompare(_(t.translate)))):t},z=e=>I(e).some((e=>e.warning));return(e,t)=>(c(),d("div",{class:"modal",onClick:t[4]||(t[4]=h((t=>e.$emit("close")),["self"]))},[u("div",{class:"modal-content",onClick:t[3]||(t[3]=h((()=>{}),["stop"]))},[u("button",{class:"close",onClick:t[0]||(t[0]=t=>e.$emit("close"))},"×"),i.value?(c(),d("h2",we,[u("button",{class:"back-btn",onClick:j},"← Назад"),v(" "+m("hdrezka"===i.value?"ReYohoho - HDrezka":"Kodik"),1)])):(c(),d("h2",ye,"Выберите плеер")),u("ul",_e,[i.value?(c(!0),d(p,{key:1},b(I(i.value),(e=>(c(),d("li",{key:e.key},[u("button",{class:g(["player-item",{active:E(e)}]),onClick:t=>C(e)},[v(m(_(e.translate))+" ",1),e.warning?(c(),d("span",Pe,"warning")):f("",!0)],10,ze)])))),128)):(c(),d(p,{key:0},[(c(!0),d(p,null,b(l.value,(e=>(c(),d("li",{key:e.key},[u("button",{class:g(["player-item",{active:E(e)}]),onClick:t=>C(e)},[v(m(_(e.translate))+" ",1),e.warning?(c(),d("span",Ee,"warning")):f("",!0)],10,Ce)])))),128)),x.value?(c(),d("li",Me,[u("button",{class:g(["group-item",{active:M("hdrezka")}]),onClick:t[1]||(t[1]=e=>L("hdrezka"))},[t[5]||(t[5]=u("span",{class:"material-icons group-icon"},"folder",-1)),t[6]||(t[6]=v(" ReYohoho - HDrezka ")),z("hdrezka")?(c(),d("span",Le,"warning")):f("",!0)],2)])):f("",!0),k.value?(c(),d("li",je,[u("button",{class:g(["group-item",{active:M("kodik")}]),onClick:t[2]||(t[2]=e=>L("kodik"))},[t[7]||(t[7]=u("span",{class:"material-icons group-icon"},"folder",-1)),t[8]||(t[8]=v(" Kodik ")),z("kodik")?(c(),d("span",Ie,"warning")):f("",!0)],2)])):f("",!0)],64))])])]))}},[["__scopeId","data-v-8b8d2b67"]]),Ae={class:"players-list"},Te=["src"],Se={key:1,class:"controls"},Ue={class:"main-controls"},Oe={class:"material-icons"},$e={class:"list-button-item"},Be={class:"material-icons"},De={class:"list-button-item"},He={class:"material-icons"},Ne={class:"list-button-item"},Fe={class:"list-button-item"},Ve={class:"material-icons"},qe={class:"list-button-item"},Ke={class:"material-icons"},Ye={class:"tooltip-container","data-tooltip-container":"dimming"},We={class:"material-icons"},Ge={class:"tooltip-container","data-tooltip-container":"blur"},Ze={class:"tooltip-container","data-tooltip-container":"compressor"},Xe={class:"custom-tooltip","data-tooltip":"compressor"},Qe={class:"tooltip-container","data-tooltip-container":"mirror"},Je={class:"custom-tooltip","data-tooltip":"mirror"},et={class:"tooltip-container","data-tooltip-container":"theater"},tt={class:"material-symbols-outlined"},at={class:"custom-tooltip","data-tooltip":"theater"},nt={class:"tooltip-container","data-tooltip-container":"aspect_ratio"},ot={class:"current-ratio"},rt=["onClick"],it={key:0,class:"tooltip-container","data-tooltip-container":"app_link"},lt={class:"custom-tooltip","data-tooltip":"app_link"},st={key:1,class:"tooltip-container","data-tooltip-container":"copy_link"},dt={class:"custom-tooltip","data-tooltip":"copy_link"},ct={key:0,class:"desktop-list-buttons"},ut={class:"tooltip-container"},vt={class:"material-icons"},mt={class:"custom-tooltip"},pt={class:"tooltip-container"},ft={class:"material-icons"},bt={class:"custom-tooltip"},gt={class:"tooltip-container"},ht={class:"custom-tooltip"},xt={class:"tooltip-container"},kt={class:"material-icons"},yt={class:"custom-tooltip"},wt={class:"tooltip-container"},_t={class:"material-icons"},Ct={class:"custom-tooltip"},Et={key:1,class:"mobile-list-buttons"},Mt={class:"tooltip-container"},Lt={class:"material-icons"},jt={class:"custom-tooltip"},It={class:"tooltip-container"},zt={class:"material-icons"},Pt={class:"custom-tooltip"},Rt={class:"tooltip-container"},At={class:"custom-tooltip"},Tt={class:"tooltip-container"},St={class:"material-icons"},Ut={class:"custom-tooltip"},Ot={class:"tooltip-container"},$t={class:"material-icons"},Bt={class:"custom-tooltip"},Dt={__name:"PlayerComponent",props:{kpId:String,movieInfo:{type:Object,default:()=>({})}},emits:["update:selectedPlayer","update:movieInfo"],setup(e,a){var o=a.emit,h=x(),B=me(),D=k(),H=y(),N=w(),F=r(H.params.kp_id),V=e,q=o,K=r([]),Y=r(null),W=r(!0),G=r(!1),Z=r(!1),X=r(null),Q=r(null),J=r(!1),ee=r(""),te=r(null),ae=r(.9*window.innerHeight),ne=s((()=>`${ae.value}px`)),oe=s((()=>h.isMobile)),re=s((()=>!!window.electronAPI)),ie=r(null),le=r(!1),se=null,de=r(null),ce=r(null),fe=r(null),be=r(null),ge=r(!1),he=r(!1),xe=r(null),ye=r(null),we=r(null),_e=r(null),Ce=r(null),Ee=r(null),Me=e=>{var t=document.querySelector(`[data-tooltip-container="${e}"]`),a=document.querySelector(`[data-tooltip="${e}"]`);if(t&&a){var n=t.getBoundingClientRect(),o=a.getBoundingClientRect(),r=window.innerHeight;n.bottom+o.height>r?(a.style.top="auto",a.style.bottom="100%",a.style.marginTop="0",a.style.marginBottom="12px",a.style.transform="translateX(-50%)"):(a.style.top="100%",a.style.bottom="auto",a.style.marginTop="12px",a.style.marginBottom="0",a.style.transform="translateX(-50%)")}},Le=e=>{ie.value=e,le.value=!1,clearTimeout(se),U((()=>{Me(e)}))},je=()=>{le.value||(se=setTimeout((()=>{ie.value=null}),300))},Ie=()=>{le.value=!0,clearTimeout(se)},ze=()=>{le.value=!1,ie.value=null},Pe=s({get:()=>B.aspectRatio,set:e=>B.updateAspectRatio(e)}),Dt=s({get:()=>B.isCentered,set:e=>B.updateCentering(e)}),Ht=s((()=>{var e,t,a,n,o;return(null===(e=V.movieInfo)||void 0===e||null===(e=e.lists)||void 0===e?void 0:e.isFavorite)||(null===(t=V.movieInfo)||void 0===t||null===(t=t.lists)||void 0===t?void 0:t.isWatching)||(null===(a=V.movieInfo)||void 0===a||null===(a=a.lists)||void 0===a?void 0:a.isLater)||(null===(n=V.movieInfo)||void 0===n||null===(n=n.lists)||void 0===n?void 0:n.isCompleted)||(null===(o=V.movieInfo)||void 0===o||null===(o=o.lists)||void 0===o?void 0:o.isAbandoned)})),Nt=s((()=>B.preferredPlayer)),Ft=r(0),Vt=e=>e.toUpperCase(),qt=()=>{if(!G.value&&Q.value){var e=l(Pe.value.split(":").map(Number),2),t=e[0],a=e[1];ae.value=.9*window.innerHeight,Ft.value=Math.min(Q.value.clientWidth*(a/t),ae.value)}},Kt=s((()=>{if(G.value)return{};var e=l(Pe.value.split(":").map(Number),2),t=e[0],a=e[1];return{width:"100%",maxWidth:`${ae.value*(t/a)}px`,maxHeight:ne.value,margin:"0 auto",overflow:"hidden"}})),Yt=s((()=>{var e=l(Pe.value.split(":").map(Number),2),t=e[0];return{position:"relative",width:"100%",paddingTop:e[1]/t*100+"%"}})),Wt=()=>{Q.value&&setTimeout((()=>{U((()=>{Q.value.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}))}),500)},Gt=function(){var e=i(t().mark((function e(){var a,o,r,i,s,d;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,ee.value="",te.value=null,e.next=5,T(V.kpId);case 5:a=e.sent,K.value=Object.entries(a).map((e=>{var t=l(e,2),a=t[0],o=t[1];return n({key:a.toUpperCase()},o)})),K.value.length>0&&(Nt.value?(o=Vt(Nt.value),r=K.value.find((e=>Vt(e.key)===o)),Y.value=r||K.value[0]):Y.value=K.value[0],q("update:selectedPlayer",Y.value)),e.next=16;break;case 10:e.prev=10,e.t0=e.catch(0),i=S(e.t0),s=i.message,d=i.code,ee.value=s,te.value=d,console.error("Ошибка при загрузке плееров:",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),Zt=()=>{J.value=!0},Xt=()=>{J.value=!1},Qt=()=>{try{return xe.value||(xe.value=new(window.AudioContext||window.webkitAudioContext)),ye.value||(ye.value=xe.value.createDynamicsCompressor(),ye.value.threshold.value=-50,ye.value.knee.value=40,ye.value.ratio.value=12,ye.value.attack.value=0,ye.value.release.value=.25,_e.value=xe.value.createGain(),Ce.value=xe.value.createGain(),_e.value.gain.value=0,Ce.value.gain.value=1,ye.value.connect(_e.value),_e.value.connect(xe.value.destination),Ce.value.connect(xe.value.destination)),!0}catch(e){return console.log("Error initializing audio context:",e),!1}},Jt=function(){var e=i(t().mark((function e(a){var n,o,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,xe.value&&Ee.value!==a){e.next=3;break}return e.abrupt("return",!0);case 3:if(n=X.value,!((o=(null==n?void 0:n.src)||"").includes("videoframe")||o.includes("kinoserial.net")||o.includes("allarknow"))){e.next=12;break}return console.log("Player detected as unsupported for compressor:",o),Ee.value=a,we.value=null,he.value=!1,re.value&&window.electronAPI.showToast("Компрессор не поддерживается этим плеером"),e.abrupt("return",!1);case 12:if(we.value)try{we.value.disconnect()}catch(l){}return r=function(){var e=i(t().mark((function e(){var n,o=arguments;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=o.length>0&&void 0!==o[0]?o[0]:0)>0)){e.next=4;break}return e.next=4,new Promise((e=>setTimeout(e,n)));case 4:return e.prev=4,we.value=xe.value.createMediaElementSource(a),Ee.value=a,we.value.connect(ye.value),we.value.connect(Ce.value),console.log(`Video audio setup completed (attempt with ${n}ms delay)`),e.abrupt("return",!0);case 13:if(e.prev=13,e.t0=e.catch(4),"InvalidStateError"!==e.t0.name||!e.t0.message.includes("already connected")){e.next=20;break}return console.log(`MediaElementSource already connected (${n}ms delay attempt)`),e.abrupt("return",!1);case 20:throw e.t0;case 21:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(){return e.apply(this,arguments)}}(),e.next=16,r(0);case 16:if(!e.sent){e.next=18;break}return e.abrupt("return",!0);case 18:return e.next=20,r(100);case 20:if(!e.sent){e.next=22;break}return e.abrupt("return",!0);case 22:return e.next=24,r(300);case 24:if(!e.sent){e.next=26;break}return e.abrupt("return",!0);case 26:return e.next=28,r(800);case 28:if(!e.sent){e.next=30;break}return e.abrupt("return",!0);case 30:return console.log("Video element has internal audio processing, compressor not available for this player"),Ee.value=a,we.value=null,he.value=!1,re.value&&window.electronAPI.showToast("Компрессор не поддерживается этим плеером"),e.abrupt("return",!1);case 38:return e.prev=38,e.t0=e.catch(0),console.log("Error setting up video audio:",e.t0),e.abrupt("return",!1);case 42:case"end":return e.stop()}}),e,null,[[0,38]])})));return function(t){return e.apply(this,arguments)}}(),ea=function(){var e=i(t().mark((function e(a){var n,o,r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(X.value){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,n=X.value,o=n.contentDocument||n.contentWindow.document){e.next=7;break}return e.abrupt("return");case 7:if(0!==(r=o.querySelectorAll("video")).length){e.next=10;break}return e.abrupt("return");case 10:if(i=r[0],Qt()){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,Jt(i);case 15:if(e.sent&&we.value){e.next=19;break}return console.log("Compressor not available for this player"),e.abrupt("return");case 19:a&&!he.value?(_e.value.gain.setValueAtTime(1,xe.value.currentTime),Ce.value.gain.setValueAtTime(0,xe.value.currentTime),he.value=!0,re.value&&window.electronAPI.showToast("Компрессор включён"),console.log("Compressor enabled")):!a&&he.value&&(_e.value.gain.setValueAtTime(0,xe.value.currentTime),Ce.value.gain.setValueAtTime(1,xe.value.currentTime),he.value=!1,re.value&&window.electronAPI.showToast("Компрессор отключён"),console.log("Compressor disabled")),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),console.log("Compressor error:",e.t0),re.value&&window.electronAPI.showToast("Ошибка при включении компрессора");case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(t){return e.apply(this,arguments)}}(),ta=()=>{re.value?window.electronAPI.sendHotKey("F2"):(ke("Доступно только в приложении ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},aa=()=>{re.value?(da.value=!da.value,ea(da.value)):(ke("Доступно только в приложении ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},na=()=>{re.value?(ca.value=!ca.value,ua(ca.value)):(ke("Доступно только в приложении ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},oa=()=>{G.value=!G.value,G.value?(window.addEventListener("mousemove",ia),document.addEventListener("keydown",ma),document.body.classList.add("no-scroll")):(window.removeEventListener("mousemove",ia),document.removeEventListener("keydown",ma),document.body.classList.remove("no-scroll")),Z.value=G.value,U((()=>Wt()))},ra=r(null),ia=()=>{ra.value=setTimeout((()=>{clearTimeout(ra.value),Z.value=!1}),4e3),Z.value=!0},la=s((()=>h.dimmingEnabled)),sa=()=>{G.value||h.toggleDimming()},da=s({get:()=>B.compressorEnabled,set:e=>B.updateCompressor(e)}),ca=s({get:()=>B.mirrorEnabled,set:e=>B.updateMirror(e)}),ua=e=>{if(X.value)try{var t=X.value,a=t.contentDocument||t.contentWindow.document;if(!a)return;var n=a.querySelectorAll("video");if(n.length>0&&(n.forEach((t=>{t.style.transform=e?"scaleX(-1)":"scaleX(1)"})),ge.value=e,re.value)){var o=e?"Зеркало включено":"Зеркало отключено";window.electronAPI.showToast(o)}}catch(r){}},va=()=>{W.value=!1,be.value&&clearInterval(be.value),be.value=setInterval((()=>{if(X.value)try{var e=X.value,t=e.contentDocument||e.contentWindow.document;if(!t)return;var a=t.querySelectorAll("video");if(a.length>0){var n=a[0],o="scaleX(-1)"===n.style.transform;ca.value&&!o?(n.style.transform="scaleX(-1)",ge.value=!0):!ca.value&&o&&(n.style.transform="scaleX(1)",ge.value=!1),Ee.value!==n?(console.log("Video element changed, reinitializing compressor"),Ee.value=null,he.value=!1,da.value&&setTimeout((()=>{ea(!0)}),500)):da.value!==he.value&&we.value&&(console.log("Compressor state mismatch, reapplying"),ea(da.value))}}catch(r){}}),1e3)},ma=e=>{("Escape"===e.key&&G.value||e.altKey&&84===e.keyCode)&&oa()},pa=e=>{Pe.value=e,setTimeout((()=>{Dt.value&&Wt()}),310)},fa=()=>{var e=`reyohoho://#${F.value}`;try{window.location.href=e}catch(t){console.error("Ошибка при открытии ссылки:",t)}},ba=()=>{var e=window.location.href;navigator.clipboard.writeText(e).then((()=>{})),de.value.showNotification("Ссылка на фильм скопирована")};var ga=s((()=>{var e;return!re.value&&!(null!==(e=Y.value)&&void 0!==e&&null!==(e=e.key)&&void 0!==e&&e.toUpperCase().includes("TORRENTS"))})),ha=e=>{var t;(null===(t=Y.value)||void 0===t?void 0:t.key)!==e.key?(Y.value=e,W.value=!0,ge.value=!1,he.value=!1,Ee.value=null,be.value&&(clearInterval(be.value),be.value=null),B.updatePreferredPlayer(Vt(e.key)),q("update:selectedPlayer",e)):Xt()};_(Y,(e=>{if(e)if(W.value=!0,ge.value=!1,he.value=!1,Ee.value=null,be.value&&(clearInterval(be.value),be.value=null),B.updatePreferredPlayer(Vt(e.key)),q("update:selectedPlayer",e),e.key.toUpperCase().includes("TORRENTS")){var t=document.querySelector(".rocketme_fon");t&&(t.style.display="none");var a=document.querySelector(".pm_preloader");a&&(a.style.display="none")}else{var n=document.querySelector(".rocketme_fon");n&&(n.style.display="");var o=document.querySelector(".pm_preloader");o&&(o.style.display="")}})),_((()=>H.params.kp_id),function(){var e=i(t().mark((function e(a){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a&&a!==F.value&&(F.value=a,ge.value=!1,he.value=!1,Ee.value=null,be.value&&(clearInterval(be.value),be.value=null),Dt.value&&Wt());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{immediate:!0});var xa=["16:9","12:5","4:3"],ka=()=>{var e=(xa.indexOf(Pe.value)+1)%xa.length;pa(xa[e])},ya=function(){var e=i(t().mark((function e(a){var n,o,r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D.token){e.next=3;break}return de.value.showNotification('Необходимо <a class="auth-link">авторизоваться</a>',5e3,{onClick:wa}),e.abrupt("return");case 3:if(e.prev=3,n={[A.FAVORITE]:"избранное",[A.HISTORY]:"историю",[A.LATER]:'список "Смотреть позже"',[A.COMPLETED]:'список "Просмотрено"',[A.ABANDONED]:'список "Брошено"',[A.WATCHING]:'список "Смотрю"'},t=a,l=void 0,s=void 0,d=void 0,c=void 0,u=void 0,v=void 0,m=void 0,null===(m={[A.FAVORITE]:(null===(l=V.movieInfo)||void 0===l||null===(l=l.lists)||void 0===l?void 0:l.isFavorite)||!1,[A.HISTORY]:(null===(s=V.movieInfo)||void 0===s||null===(s=s.lists)||void 0===s?void 0:s.isHistory)||!1,[A.LATER]:(null===(d=V.movieInfo)||void 0===d||null===(d=d.lists)||void 0===d?void 0:d.isLater)||!1,[A.COMPLETED]:(null===(c=V.movieInfo)||void 0===c||null===(c=c.lists)||void 0===c?void 0:c.isCompleted)||!1,[A.ABANDONED]:(null===(u=V.movieInfo)||void 0===u||null===(u=u.lists)||void 0===u?void 0:u.isAbandoned)||!1,[A.WATCHING]:(null===(v=V.movieInfo)||void 0===v||null===(v=v.lists)||void 0===v?void 0:v.isWatching)||!1}[t])||void 0===m||!m){e.next=11;break}return e.next=8,O(F.value,a);case 8:de.value.showNotification(`Удалено из ${n[a]}`),e.next=14;break;case 11:return e.next=13,$(F.value,a);case 13:de.value.showNotification(`Добавлено в ${n[a]}`);case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),o=S(e.t0),r=o.message,i=o.code,de.value.showNotification(`${r} ${i}`);case 20:q("update:movieInfo");case 21:case"end":return e.stop()}var t,l,s,d,c,u,v,m}),e,null,[[3,16]])})));return function(t){return e.apply(this,arguments)}}(),wa=()=>{N.push("/login")},_a=s((()=>B.showFavoriteTooltip)),Ca=()=>{N.push("/settings"),ze()};return C((()=>{W.value=!0,Gt(),oe.value&&(Pe.value="4:3"),qt(),window.addEventListener("resize",qt),window.addEventListener("resize",Me),Dt.value&&Wt()})),E((()=>{window.removeEventListener("resize",qt),window.removeEventListener("resize",Me),window.removeEventListener("mousemove",ia),document.removeEventListener("keydown",ma),document.body.classList.remove("no-scroll"),be.value&&clearInterval(be.value),(()=>{try{we.value&&(we.value.disconnect(),we.value=null),xe.value&&(xe.value.close(),xe.value=null),ye.value=null,_e.value=null,Ce.value=null,Ee.value=null,he.value=!1}catch(e){console.log("Error cleaning up audio context:",e)}})()})),(t,a)=>{var n,o,r,i,l,s,h,x,k,y,w,_,C,E,T,S,U,O,$,B,D,H,N,F,V,q,ae,ne,le,se,me,be;return ee.value?(c(),M(L,{key:0,message:ee.value,code:te.value},null,8,["message","code"])):(c(),d(p,{key:1},[u("div",Ae,[a[54]||(a[54]=u("span",null,"Плеер:",-1)),u("button",{class:"player-btn",onClick:Zt},m(Y.value?(be=Y.value.translate,be.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"HDRezka - ").replace(/KODIK>/,"Kodik - ").trim()).toUpperCase():"Загрузка плееров..."),1)]),J.value?(c(),M(Re,{key:0,players:K.value,"selected-player":Y.value,onClose:Xt,onSelect:ha},null,8,["players","selected-player"])):f("",!0),u("div",{ref_key:"containerRef",ref:Q,class:g(["player-container",{"theater-mode":G.value}]),style:I(G.value?{}:Kt.value)},[u("div",{class:g(["iframe-wrapper",{pm_video:ga.value}]),style:I(G.value?{}:Yt.value)},[z(u("iframe",{ref_key:"playerIframe",ref:X,src:null===(n=Y.value)||void 0===n?void 0:n.iframe,frameborder:"0",allowfullscreen:"",webkitallowfullscreen:"",class:g(["responsive-iframe",{"theater-mode-unlock":Z.value,"theater-mode-lock":G.value,dimmed:la.value}]),onLoad:va},null,42,Te),[[P,!W.value&&(null===(o=Y.value)||void 0===o?void 0:o.iframe)]]),W.value?(c(),M(ue,{key:0})):f("",!0)],6),G.value?(c(),d("button",{key:0,class:g(["close-theater-btn",{visible:Z.value}]),onClick:oa}," ✖ ",2)):f("",!0)],6),G.value?f("",!0):(c(),d("div",Se,[u("div",Ue,[oe.value?f("",!0):(c(),d("div",{key:0,ref_key:"tooltipContainer",ref:ce,class:"tooltip-container list-buttons-container","data-tooltip-container":"favorite"},[_a.value?(c(),d("button",{key:0,class:g(["favorite-btn",{active:null===(r=e.movieInfo)||void 0===r||null===(r=r.lists)||void 0===r?void 0:r.isFavorite}]),onMouseenter:a[0]||(a[0]=e=>Le("favorite")),onMouseleave:je,onClick:a[1]||(a[1]=e=>ya(R(A).FAVORITE))},[u("span",Oe,m(null!==(i=e.movieInfo)&&void 0!==i&&null!==(i=i.lists)&&void 0!==i&&i.isFavorite?"favorite":"favorite_border"),1),u("span",{class:g(["material-icons dropdown-arrow",{highlighted:Ht.value}])},"expand_more",2)],34)):f("",!0),z(u("div",{ref_key:"tooltip",ref:fe,class:"custom-tooltip advanced-tooltip list-buttons-dropdown","data-tooltip":"favorite",onMouseenter:Ie,onMouseleave:ze},[u("div",$e,[u("button",{class:g(["favorite-btn",{active:null===(l=e.movieInfo)||void 0===l||null===(l=l.lists)||void 0===l?void 0:l.isFavorite}]),onClick:a[2]||(a[2]=e=>ya(R(A).FAVORITE))},[u("span",Be,m(null!==(s=e.movieInfo)&&void 0!==s&&null!==(s=s.lists)&&void 0!==s&&s.isFavorite?"favorite":"favorite_border"),1),a[55]||(a[55]=u("span",{class:"button-label"},"В избранное",-1))],2)]),u("div",De,[u("button",{class:g(["watching-btn",{active:null===(h=e.movieInfo)||void 0===h||null===(h=h.lists)||void 0===h?void 0:h.isWatching}]),onClick:a[3]||(a[3]=e=>ya(R(A).WATCHING))},[u("span",He,m(null!==(x=e.movieInfo)&&void 0!==x&&null!==(x=x.lists)&&void 0!==x&&x.isWatching?"visibility_off":"visibility"),1),a[56]||(a[56]=u("span",{class:"button-label"},"Смотрю",-1))],2)]),u("div",Ne,[u("button",{class:g(["later-btn",{active:null===(k=e.movieInfo)||void 0===k||null===(k=k.lists)||void 0===k?void 0:k.isLater}]),onClick:a[4]||(a[4]=e=>ya(R(A).LATER))},a[57]||(a[57]=[u("span",{class:"material-icons"},"watch_later",-1),u("span",{class:"button-label"},"Смотреть позже",-1)]),2)]),u("div",Fe,[u("button",{class:g(["completed-btn",{active:null===(y=e.movieInfo)||void 0===y||null===(y=y.lists)||void 0===y?void 0:y.isCompleted}]),onClick:a[5]||(a[5]=e=>ya(R(A).COMPLETED))},[u("span",Ve,m(null!==(w=e.movieInfo)&&void 0!==w&&null!==(w=w.lists)&&void 0!==w&&w.isCompleted?"check_circle":"check_circle_outline"),1),a[58]||(a[58]=u("span",{class:"button-label"},"Просмотрено",-1))],2)]),u("div",qe,[u("button",{class:g(["abandoned-btn",{active:null===(_=e.movieInfo)||void 0===_||null===(_=_.lists)||void 0===_?void 0:_.isAbandoned}]),onClick:a[6]||(a[6]=e=>ya(R(A).ABANDONED))},[u("span",Ke,m((null!==(C=e.movieInfo)&&void 0!==C&&null!==(C=C.lists)&&void 0!==C&&C.isAbandoned,"not_interested")),1),a[59]||(a[59]=u("span",{class:"button-label"},"Брошено",-1))],2)]),u("div",{class:"tooltip-hint"},[a[61]||(a[61]=u("span",{class:"material-icons"},"settings",-1)),u("span",null,[a[60]||(a[60]=v("Стиль отображения можно изменить в ")),u("a",{class:"settings-link",onClick:Ca},"настройках")])])],544),[[P,"favorite"===ie.value&&_a.value]])],512)),oe.value?f("",!0):(c(),d(p,{key:1},[u("div",Ye,[u("button",{class:g(["dimming-btn",{active:la.value}]),onMouseenter:a[7]||(a[7]=e=>Le("dimming")),onMouseleave:a[8]||(a[8]=e=>ie.value=null),onClick:sa},[u("span",We,m(la.value?"light_mode":"dark_mode"),1)],34),z(u("div",{class:"custom-tooltip","data-tooltip":"dimming"},m(la.value?"Отключить затемнение":"Включить затемнение"),513),[[P,"dimming"===ie.value]])]),u("div",Ge,[u("button",{class:g(["blur-btn",{"electron-only":!re.value}]),onMouseenter:a[9]||(a[9]=e=>Le("blur")),onMouseleave:a[10]||(a[10]=e=>ie.value=null),onClick:ta},a[62]||(a[62]=[u("span",{class:"material-icons"},"blur_on",-1)]),34),z(u("div",{class:"custom-tooltip","data-tooltip":"blur"},m(re.value?"Блюр":"Блюр, функция доступна в приложении"),513),[[P,"blur"===ie.value]])]),u("div",Ze,[u("button",{class:g(["material-symbols-outlined",{active:da.value,"electron-only":!re.value}]),onMouseenter:a[11]||(a[11]=e=>Le("compressor")),onMouseleave:a[12]||(a[12]=e=>ie.value=null),onClick:aa},a[63]||(a[63]=[u("span",{class:"material-icons"},"graphic_eq",-1)]),34),z(u("div",Xe," Компрессор ",512),[[P,"compressor"===ie.value]])]),u("div",Qe,[u("button",{class:g(["mirror-btn",{active:ca.value,"electron-only":!re.value}]),onMouseenter:a[13]||(a[13]=e=>Le("mirror")),onMouseleave:a[14]||(a[14]=e=>ie.value=null),onClick:na},a[64]||(a[64]=[u("span",{class:"material-icons"},"flip",-1)]),34),z(u("div",Je," Зеркало ",512),[[P,"mirror"===ie.value]])]),u("div",et,[u("button",{class:"theater-mode-btn",onMouseenter:a[15]||(a[15]=e=>Le("theater")),onMouseleave:a[16]||(a[16]=e=>ie.value=null),onClick:oa},[u("span",tt,m(G.value?"fullscreen_exit":"aspect_ratio"),1)],32),z(u("div",at,[v(m(G.value?"Выйти из театрального режима":"Театральный режим")+" ",1),a[65]||(a[65]=u("span",{class:"shortcut-hint"},"Alt+T",-1))],512),[[P,"theater"===ie.value]])]),u("div",nt,[u("button",{class:"aspect-ratio-dropdown-btn",onMouseenter:a[17]||(a[17]=e=>Le("aspect_ratio")),onMouseleave:je,onClick:ka},[u("span",ot,m(Pe.value),1)],32),z(u("div",{class:"custom-tooltip advanced-tooltip aspect-ratio-dropdown","data-tooltip":"aspect_ratio",onMouseenter:Ie,onMouseleave:ze},[(c(),d(p,null,b(xa,(e=>u("div",{key:e,class:g(["aspect-ratio-option",{active:Pe.value===e}]),onClick:t=>pa(e)},m(e),11,rt))),64))],544),[[P,"aspect_ratio"===ie.value]])]),u("div",{class:"tooltip-container","data-tooltip-container":"centering",onMouseenter:a[19]||(a[19]=e=>Le("centering")),onMouseleave:je},[u("button",{class:"center-btn",onClick:Wt},a[66]||(a[66]=[u("span",{class:"material-icons"},"center_focus_strong",-1)])),z(u("div",{class:"custom-tooltip advanced-tooltip","data-tooltip":"centering",onMouseenter:Ie,onMouseleave:ze},[a[67]||(a[67]=v(" Отцентрировать плеер ")),j(pe,{modelValue:Dt.value,"onUpdate:modelValue":a[18]||(a[18]=e=>Dt.value=e),title:"Автоцентрирование плеера"},null,8,["modelValue"]),a[68]||(a[68]=u("span",{class:"tooltip-title"},"Автоцентрирование плеера",-1))],544),[[P,"centering"===ie.value]])],32),re.value?f("",!0):(c(),d("div",it,[u("button",{class:"app-link-btn",onMouseenter:a[20]||(a[20]=e=>Le("app_link")),onMouseleave:a[21]||(a[21]=e=>ie.value=null),onClick:fa},a[69]||(a[69]=[u("span",{class:"material-icons"},"open_in_new",-1)]),32),z(u("div",lt," Открыть в приложении ",512),[[P,"app_link"===ie.value]])])),re.value?(c(),d("div",st,[u("button",{class:"copy-link-btn",onMouseenter:a[22]||(a[22]=e=>Le("copy_link")),onMouseleave:a[23]||(a[23]=e=>ie.value=null),onClick:ba},a[70]||(a[70]=[u("span",{class:"material-icons"},"content_copy",-1)]),32),z(u("div",dt," Скопировать ссылку ",512),[[P,"copy_link"===ie.value]])])):f("",!0)],64))]),oe.value||_a.value?oe.value?(c(),d("div",Et,[u("div",Mt,[u("button",{class:g(["favorite-btn",{active:null===(N=e.movieInfo)||void 0===N||null===(N=N.lists)||void 0===N?void 0:N.isFavorite}]),onMouseenter:a[39]||(a[39]=e=>Le("favorite")),onMouseleave:a[40]||(a[40]=e=>ie.value=null),onClick:a[41]||(a[41]=e=>ya(R(A).FAVORITE))},[u("span",Lt,m(null!==(F=e.movieInfo)&&void 0!==F&&null!==(F=F.lists)&&void 0!==F&&F.isFavorite?"favorite":"favorite_border"),1)],34),z(u("div",jt,m("В избранное"),512),[[P,"favorite"===ie.value]])]),u("div",It,[u("button",{class:g(["watching-btn",{active:null===(V=e.movieInfo)||void 0===V||null===(V=V.lists)||void 0===V?void 0:V.isWatching}]),onMouseenter:a[42]||(a[42]=e=>Le("watching")),onMouseleave:a[43]||(a[43]=e=>ie.value=null),onClick:a[44]||(a[44]=e=>ya(R(A).WATCHING))},[u("span",zt,m(null!==(q=e.movieInfo)&&void 0!==q&&null!==(q=q.lists)&&void 0!==q&&q.isWatching?"visibility_off":"visibility"),1)],34),z(u("div",Pt,m("Смотрю"),512),[[P,"watching"===ie.value]])]),u("div",Rt,[u("button",{class:g(["later-btn",{active:null===(ae=e.movieInfo)||void 0===ae||null===(ae=ae.lists)||void 0===ae?void 0:ae.isLater}]),onMouseenter:a[45]||(a[45]=e=>Le("later")),onMouseleave:a[46]||(a[46]=e=>ie.value=null),onClick:a[47]||(a[47]=e=>ya(R(A).LATER))},a[72]||(a[72]=[u("span",{class:"material-icons"},"watch_later",-1)]),34),z(u("div",At,m("Смотреть позже"),512),[[P,"later"===ie.value]])]),u("div",Tt,[u("button",{class:g(["completed-btn",{active:null===(ne=e.movieInfo)||void 0===ne||null===(ne=ne.lists)||void 0===ne?void 0:ne.isCompleted}]),onMouseenter:a[48]||(a[48]=e=>Le("completed")),onMouseleave:a[49]||(a[49]=e=>ie.value=null),onClick:a[50]||(a[50]=e=>ya(R(A).COMPLETED))},[u("span",St,m(null!==(le=e.movieInfo)&&void 0!==le&&null!==(le=le.lists)&&void 0!==le&&le.isCompleted?"check_circle":"check_circle_outline"),1)],34),z(u("div",Ut,m("Просмотрено"),512),[[P,"completed"===ie.value]])]),u("div",Ot,[u("button",{class:g(["abandoned-btn",{active:null===(se=e.movieInfo)||void 0===se||null===(se=se.lists)||void 0===se?void 0:se.isAbandoned}]),onMouseenter:a[51]||(a[51]=e=>Le("abandoned")),onMouseleave:a[52]||(a[52]=e=>ie.value=null),onClick:a[53]||(a[53]=e=>ya(R(A).ABANDONED))},[u("span",$t,m((null!==(me=e.movieInfo)&&void 0!==me&&null!==(me=me.lists)&&void 0!==me&&me.isAbandoned,"not_interested")),1)],34),z(u("div",Bt,m("Брошено"),512),[[P,"abandoned"===ie.value]])])])):f("",!0):(c(),d("div",ct,[u("div",ut,[u("button",{class:g(["favorite-btn",{active:null===(E=e.movieInfo)||void 0===E||null===(E=E.lists)||void 0===E?void 0:E.isFavorite}]),onMouseenter:a[24]||(a[24]=e=>Le("favorite")),onMouseleave:a[25]||(a[25]=e=>ie.value=null),onClick:a[26]||(a[26]=e=>ya(R(A).FAVORITE))},[u("span",vt,m(null!==(T=e.movieInfo)&&void 0!==T&&null!==(T=T.lists)&&void 0!==T&&T.isFavorite?"favorite":"favorite_border"),1)],34),z(u("div",mt,m("В избранное"),512),[[P,"favorite"===ie.value]])]),u("div",pt,[u("button",{class:g(["watching-btn",{active:null===(S=e.movieInfo)||void 0===S||null===(S=S.lists)||void 0===S?void 0:S.isWatching}]),onMouseenter:a[27]||(a[27]=e=>Le("watching")),onMouseleave:a[28]||(a[28]=e=>ie.value=null),onClick:a[29]||(a[29]=e=>ya(R(A).WATCHING))},[u("span",ft,m(null!==(U=e.movieInfo)&&void 0!==U&&null!==(U=U.lists)&&void 0!==U&&U.isWatching?"visibility_off":"visibility"),1)],34),z(u("div",bt,m("Смотрю"),512),[[P,"watching"===ie.value]])]),u("div",gt,[u("button",{class:g(["later-btn",{active:null===(O=e.movieInfo)||void 0===O||null===(O=O.lists)||void 0===O?void 0:O.isLater}]),onMouseenter:a[30]||(a[30]=e=>Le("later")),onMouseleave:a[31]||(a[31]=e=>ie.value=null),onClick:a[32]||(a[32]=e=>ya(R(A).LATER))},a[71]||(a[71]=[u("span",{class:"material-icons"},"watch_later",-1)]),34),z(u("div",ht,m("Смотреть позже"),512),[[P,"later"===ie.value]])]),u("div",xt,[u("button",{class:g(["completed-btn",{active:null===($=e.movieInfo)||void 0===$||null===($=$.lists)||void 0===$?void 0:$.isCompleted}]),onMouseenter:a[33]||(a[33]=e=>Le("completed")),onMouseleave:a[34]||(a[34]=e=>ie.value=null),onClick:a[35]||(a[35]=e=>ya(R(A).COMPLETED))},[u("span",kt,m(null!==(B=e.movieInfo)&&void 0!==B&&null!==(B=B.lists)&&void 0!==B&&B.isCompleted?"check_circle":"check_circle_outline"),1)],34),z(u("div",yt,m("Просмотрено"),512),[[P,"completed"===ie.value]])]),u("div",wt,[u("button",{class:g(["abandoned-btn",{active:null===(D=e.movieInfo)||void 0===D||null===(D=D.lists)||void 0===D?void 0:D.isAbandoned}]),onMouseenter:a[36]||(a[36]=e=>Le("abandoned")),onMouseleave:a[37]||(a[37]=e=>ie.value=null),onClick:a[38]||(a[38]=e=>ya(R(A).ABANDONED))},[u("span",_t,m((null!==(H=e.movieInfo)&&void 0!==H&&null!==(H=H.lists)&&void 0!==H&&H.isAbandoned,"not_interested")),1)],34),z(u("div",Ct,m("Брошено"),512),[[P,"abandoned"===ie.value]])])]))])),j(ve,{ref_key:"notificationRef",ref:de},null,512)],64))}}},Ht=o(Dt,[["__scopeId","data-v-36291b5d"]]),Nt={key:0,class:"carousel-container"},Ft={class:"carousel-wrapper"},Vt=["onClick"],qt=["src","alt"],Kt={class:"video-name"},Yt={key:0,class:"video-player"},Wt=["src"],Gt={__name:"TrailerCarousel",props:{videos:{type:Array,required:!0},activeVideoIndex:{type:Number,default:null}},emits:["select"],setup(e,a){var n=a.emit,o=x(),l=s((()=>o.isMobile)),v=e,g=n,h=r(v.activeVideoIndex),k=r(null),y=r(!1),w=r(!1),M=()=>{if(k.value){var e=k.value,t=e.scrollLeft,a=e.scrollWidth,n=e.clientWidth;y.value=t>0,w.value=t<a-n-1}},L=e=>{if(k.value){var t=k.value.querySelector(".carousel-item");if(t){var a=t.clientWidth+16;k.value.scrollBy({left:a*e,behavior:"smooth"})}}},j=()=>M(),I=r([]),R=function(){var e=i(t().mark((function e(a){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(`https://img.youtube.com/vi/${a}/0.jpg`);case 3:return n=e.sent,e.abrupt("return",n.ok);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return C(i(t().mark((function e(){var a,n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.videos.map(function(){var e=i(t().mark((function e(a){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(a.videoId);case 2:return n=e.sent,e.abrupt("return",n?a:null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(a);case 3:n=e.sent,I.value=n.filter(Boolean),M(),window.addEventListener("resize",j);case 7:case"end":return e.stop()}}),e)})))),_((()=>v.videos),function(){var e=i(t().mark((function e(a){var n,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.map(function(){var e=i(t().mark((function e(a){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(a.videoId);case 2:return n=e.sent,e.abrupt("return",n?a:null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(n);case 3:o=e.sent,I.value=o.filter(Boolean);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_((()=>v.activeVideoIndex),(e=>{h.value=e})),E((()=>{window.removeEventListener("resize",j)})),(t,a)=>I.value.length?(c(),d("div",Nt,[a[4]||(a[4]=u("h2",null,"Трейлеры (YouTube)",-1)),u("div",Ft,[z(u("button",{class:"scroll-button left",onClick:a[0]||(a[0]=e=>L(-1))},a[2]||(a[2]=[u("span",{class:"material-symbols-outlined"},"arrow_back_ios",-1)]),512),[[P,!l.value&&y.value]]),u("div",{ref_key:"carousel",ref:k,class:"carousel",onScroll:M},[(c(!0),d(p,null,b(I.value,((e,t)=>(c(),d("div",{key:t,class:"carousel-item",onClick:e=>(e=>{h.value=e,g("select",v.videos[e])})(t)},[u("img",{src:`https://img.youtube.com/vi/${e.videoId}/0.jpg`,alt:e.name},null,8,qt),u("div",Kt,m(e.name),1)],8,Vt)))),128))],544),z(u("button",{class:"scroll-button right",onClick:a[1]||(a[1]=e=>L(1))},a[3]||(a[3]=[u("span",{class:"material-symbols-outlined"},"arrow_forward_ios",-1)]),512),[[P,!l.value&&w.value]])]),null!==h.value?(c(),d("div",Yt,[u("iframe",{src:e.videos[h.value].iframeUrl,frameborder:"0",allowfullscreen:""},null,8,Wt)])):f("",!0)])):f("",!0)}},Zt=o(Gt,[["__scopeId","data-v-e60b5c29"]]),Xt={class:"rating-container"},Qt={class:"rating-display"},Jt={class:"rating-numbers"},ea=["onClick","onMouseenter"],ta={key:0,class:"tooltip-footer"},aa={class:"rating-numbers mobile-rating-numbers"},na=["onClick"],oa={key:0,class:"mobile-modal-footer"},ra={__name:"MovieRating",props:{kpId:{type:String,required:!0},showDash:{type:Boolean,default:!1}},setup(e){var a=x(),n=w(),o=e,l=r(null),s=r(null),v=r(null),k=r(null),y=r(0),_=r(!1),E=r(!1),M=null,L=()=>{M=setTimeout((()=>{_.value=!1,a.isMobile||(E.value=!1)}),100)},I=()=>{M&&(clearTimeout(M),M=null),_.value=!0},A=()=>{a.isMobile&&(E.value=!E.value)},T=()=>{n.push("/login")},S=function(){var e=i(t().mark((function e(){var a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D(o.kpId);case 3:a=e.sent,s.value=a.user_rating,v.value=a.average_rating,k.value=(t=a.vote_count)?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error loading rating:",e.t0);case 12:case"end":return e.stop()}var t}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=i(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n!==s.value){e.next=8;break}return e.next=4,H(o.kpId,null);case 4:s.value=null,l.value.showNotification("Оценка удалена"),e.next=12;break;case 8:return e.next=10,H(o.kpId,n);case 10:s.value=n,l.value.showNotification("Оценка сохранена");case 12:a.isMobile&&(E.value=!1),S(),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(0),console.error("Error setting rating:",e.t0),401===(null===(r=e.t0.response)||void 0===r?void 0:r.status)?l.value.showNotification('Для оценки необходимо <a class="auth-link">авторизоваться</a>',5e3,{onClick:T}):l.value.showNotification("Ошибка при сохранении оценки"),a.isMobile&&(E.value=!1);case 21:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),O=()=>{E.value=!1};return C((()=>{S()})),(e,t)=>(c(),d("div",Xt,[u("div",Qt,[u("a",{href:"#",class:g(["rating-link",{"has-rating":s.value}]),onMouseenter:t[0]||(t[0]=e=>_.value=!0),onMouseleave:L,onClick:h(A,["prevent"])},[t[3]||(t[3]=u("img",{src:le,alt:"ReYohoho",class:"rating-logo"},null,-1)),u("span",{class:g(["average-rating",R(B)(v.value)])},m(v.value?v.value.toFixed(1).replace(/\.0$/,""):"—"),3)],34),z(u("div",{class:"rating-tooltip",onMouseenter:I,onMouseleave:L},[u("div",Jt,[(c(),d(p,null,b(10,(e=>u("button",{key:e,class:g(["number-btn",{active:e===s.value,hover:e===y.value,"average-highlight":v.value&&e<=Math.round(v.value)}]),onClick:t=>U(e),onMouseenter:t=>y.value=e,onMouseleave:t[1]||(t[1]=e=>y.value=0)},m(e),43,ea))),64))]),k.value?(c(),d("div",ta,"Оценок: "+m(k.value),1)):f("",!0)],544),[[P,(_.value||E.value)&&!R(a).isMobile]])]),j(ve,{ref_key:"notificationRef",ref:l},null,512),R(a).isMobile&&E.value?(c(),d("div",{key:0,class:"mobile-modal-overlay",onClick:O},[u("div",{class:"mobile-modal",onClick:t[2]||(t[2]=h((()=>{}),["stop"]))},[u("div",{class:"mobile-modal-header"},[t[4]||(t[4]=u("h3",null,"Оценить фильм",-1)),u("button",{class:"close-button",onClick:O},"×")]),u("div",aa,[(c(),d(p,null,b(10,(e=>u("button",{key:e,class:g(["number-btn",{active:e===s.value,"average-highlight":v.value&&e<=Math.round(v.value)}]),onClick:t=>U(e)},m(e),11,na))),64))]),k.value?(c(),d("div",oa,"Оценок: "+m(k.value),1)):f("",!0)])])):f("",!0)]))}},ia=o(ra,[["__scopeId","data-v-2df64bd5"]]),la={name:"EmojiPicker",props:{isVisible:{type:Boolean,default:!1}},emits:["emoji-selected","mouse-enter","mouse-leave","close"],data:()=>({activeCategory:"smileys",categories:[{name:"smileys",icon:"😀",emojis:["😀","😃","😄","😁","😆","😅","😂","🤣","😊","😇","🙂","🙃","😉","😌","😍","🥰","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","🤩","🥳"]},{name:"emotions",icon:"😢",emojis:["😥","😢","😭","😤","😠","😡","🤬","🤯","😳","🥵","🥶","😱","😨","😰","😥","😓","🤗","🤔","🤭","🤫","🤥","😶","😐","😑","😬","🙄","😯","😦","😧","😮","😲"]},{name:"gestures",icon:"👍",emojis:["👍","👎","👌","🤌","🤏","✌️","🤞","🤟","🤘","🤙","👈","👉","👆","🖕","👇","☝️","👏","🙌","👐","🤲","🤝","🙏","✍️","💪","🦾","🦿","🦵","🦶","👂","🦻","👃"]},{name:"hearts",icon:"❤️",emojis:["❤️","🧡","💛","💚","💙","💜","🤎","🖤","🤍","💔","❣️","💕","💞","💓","💗","💖","💘","💝","💟","♥️","💯","💢","💥","💫","💦","💨","🕳️","💣","💬","👁️‍🗨️","🗨️"]},{name:"objects",icon:"🎉",emojis:["🎉","🎊","🎈","🎁","🎀","🎂","🍰","🧁","🍭","🍬","🍫","🍩","🍪","🍕","🍔","🍟","🌭","🥪","🌮","🌯","🥙","🥚","🍳","🥘","🍲","🥗","🍿","🧈","🧀","🥨","🥯"]}]}),computed:{currentEmojis(){var e=this.categories.find((e=>e.name===this.activeCategory));return e?e.emojis:[]}},methods:{selectEmoji(e){this.$emit("emoji-selected",e)}}},sa={class:"emoji-categories"},da=["onClick"],ca={class:"emoji-grid"},ua=["onClick"];var va=o(la,[["render",function(e,t,a,n,o,r){return a.isVisible?(c(),d("div",{key:0,class:"emoji-picker",onMouseenter:t[1]||(t[1]=t=>e.$emit("mouse-enter")),onMouseleave:t[2]||(t[2]=t=>e.$emit("mouse-leave"))},[u("button",{class:"close-btn mobile-only",onClick:t[0]||(t[0]=t=>e.$emit("close"))},t[3]||(t[3]=[u("i",{class:"fas fa-times"},null,-1)])),u("div",sa,[(c(!0),d(p,null,b(o.categories,(e=>(c(),d("button",{key:e.name,onClick:t=>o.activeCategory=e.name,class:g([{active:o.activeCategory===e.name},"category-btn"]),type:"button"},m(e.icon),11,da)))),128))]),u("div",ca,[(c(!0),d(p,null,b(r.currentEmojis,(e=>(c(),d("button",{key:e,onClick:t=>r.selectEmoji(e),class:"emoji-btn",type:"button"},m(e),9,ua)))),128))])],32)):f("",!0)}],["__scopeId","data-v-209132f3"]]),ma=function(){var e=i(t().mark((function e(a){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:return n=e.sent,e.next=5,a(n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pa=function(){var e=i(t().mark((function e(a){var n,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ma((e=>e.get(`/search_emotes/${a}`)));case 2:return n=e.sent,o=n.data,e.abrupt("return",o.emotes||[]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fa={name:"ImagePicker",props:{isVisible:{type:Boolean,required:!0},currentUser:{type:Object,default:null}},emits:["image-selected","mouse-enter","mouse-leave","close","login-required"],setup(e,a){var n=a.emit,o=r(""),l=r([]),s=r(null),d=r(!1),c=function(){var a=i(t().mark((function a(n){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.currentUser){t.next=3;break}return console.warn("Попытка поиска изображений без авторизации"),t.abrupt("return");case 3:if(n.trim()){t.next=7;break}return l.value=[],d.value=!1,t.abrupt("return");case 7:return d.value=!0,t.prev=8,t.next=11,pa(n);case 11:l.value=t.sent,t.next=18;break;case 14:t.prev=14,t.t0=t.catch(8),console.error("Error searching images:",t.t0),l.value=[];case 18:return t.prev=18,d.value=!1,t.finish(18);case 21:case"end":return t.stop()}}),a,null,[[8,14,18,21]])})));return function(e){return a.apply(this,arguments)}}(),u=F(c,300);return _((()=>e.isVisible),(e=>{e&&(o.value="",l.value=[],d.value=!1)})),{searchQuery:o,images:l,searchInput:s,isLoading:d,handleSearch:()=>{e.currentUser?(o.value.trim()&&(d.value=!0),u(o.value)):n("login-required")},selectImage:t=>{e.currentUser?(n("image-selected",t),n("close")):n("login-required")},handleInputBlur:()=>{setTimeout((()=>{e.isVisible&&n("mouse-leave")}),100)}}}},ba={key:0,class:"auth-required"},ga={class:"auth-message"},ha={key:1},xa={class:"image-picker-header"},ka={class:"image-content"},ya={key:0,class:"loading-spinner"},wa={key:1,class:"image-grid"},_a=["onClick"],Ca=["src","alt"],Ea={key:2,class:"no-images"},Ma={key:3,class:"no-search"};var La=o(fa,[["render",function(e,t,a,n,o,r){return a.isVisible?(c(),d("div",{key:0,class:"image-picker",onMouseenter:t[7]||(t[7]=t=>e.$emit("mouse-enter")),onMouseleave:t[8]||(t[8]=t=>e.$emit("mouse-leave")),onClick:t[9]||(t[9]=h((()=>{}),["stop"]))},[u("button",{class:"close-btn mobile-only",onClick:t[0]||(t[0]=t=>e.$emit("close"))},t[10]||(t[10]=[u("i",{class:"fas fa-times"},null,-1)])),a.currentUser?(c(),d("div",ha,[u("div",xa,[z(u("input",{ref:"searchInput",type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>n.searchQuery=e),placeholder:"Введите название смайла 7tv",class:"image-search-input",onInput:t[3]||(t[3]=function(){return n.handleSearch&&n.handleSearch(...arguments)}),onClick:t[4]||(t[4]=h((()=>{}),["stop"])),onFocus:t[5]||(t[5]=t=>e.$emit("mouse-enter")),onBlur:t[6]||(t[6]=function(){return n.handleInputBlur&&n.handleInputBlur(...arguments)})},null,544),[[V,n.searchQuery]])]),u("div",ka,[n.isLoading?(c(),d("div",ya,t[14]||(t[14]=[u("div",{class:"spinner"},null,-1),u("p",null,"Поиск изображений...",-1)]))):n.images.length>0?(c(),d("div",wa,[(c(!0),d(p,null,b(n.images,((e,t)=>(c(),d("div",{key:t,class:"image-item",onClick:t=>n.selectImage(e)},[u("img",{src:e,alt:"Image "+(t+1)},null,8,Ca)],8,_a)))),128))])):n.searchQuery.trim()?(c(),d("div",Ea,t[15]||(t[15]=[u("p",null,"Нет результатов",-1)]))):(c(),d("div",Ma,t[16]||(t[16]=[u("p",null,"Введите запрос для поиска",-1)])))])])):(c(),d("div",ba,[u("div",ga,[t[11]||(t[11]=u("i",{class:"fas fa-lock"},null,-1)),t[12]||(t[12]=u("h3",null,"Требуется авторизация",-1)),t[13]||(t[13]=u("p",null,"Для поиска изображений необходимо войти в аккаунт",-1)),u("button",{class:"login-button",onClick:t[1]||(t[1]=t=>e.$emit("login-required"))},"Войти")])]))],32)):f("",!0)}],["__scopeId","data-v-f33eb3f6"]]),ja={name:"LinkModal",props:{isVisible:{type:Boolean,default:!1},selectedText:{type:String,default:""}},emits:["close","submit"],setup(e,t){var a=t.emit,n=r(""),o=r(""),i=r(null),l=r(null),d=s((()=>/^https?:\/\/.+/.test(n.value.trim())&&o.value.trim())),c=()=>{a("close"),v()},u=()=>{d.value&&(a("submit",{url:n.value.trim(),title:o.value.trim()}),c())},v=()=>{n.value="",o.value=""};return _((()=>e.isVisible),(t=>{t&&(e.selectedText.trim()&&(o.value=e.selectedText.trim()),U((()=>{var e;null===(e=i.value)||void 0===e||e.focus()})))})),{linkUrl:n,linkTitle:o,urlInput:i,titleInput:l,isValidLink:d,closeModal:c,submitLink:u,handleKeydown:e=>{if("Enter"===e.key){if(e.preventDefault(),d.value)u();else if(e.target===i.value&&n.value.trim()){var t;null===(t=l.value)||void 0===t||t.focus()}}else"Escape"===e.key&&c()}}}},Ia={class:"link-modal-header"},za={class:"link-modal-content"},Pa={class:"form-group"},Ra={class:"form-group"},Aa={class:"link-modal-footer"},Ta=["disabled"];var Sa=o(ja,[["render",function(e,t,a,n,o,r){return a.isVisible?(c(),d("div",{key:0,class:"link-modal-overlay",onClick:t[8]||(t[8]=function(){return n.closeModal&&n.closeModal(...arguments)})},[u("div",{class:"link-modal",onClick:t[7]||(t[7]=h((()=>{}),["stop"]))},[u("div",Ia,[t[10]||(t[10]=u("h3",null,"Добавить ссылку",-1)),u("button",{class:"close-button",onClick:t[0]||(t[0]=function(){return n.closeModal&&n.closeModal(...arguments)})},t[9]||(t[9]=[u("i",{class:"fas fa-times"},null,-1)]))]),u("div",za,[u("div",Pa,[t[11]||(t[11]=u("label",{for:"link-url"},"URL ссылки:",-1)),z(u("input",{id:"link-url",ref:"urlInput","onUpdate:modelValue":t[1]||(t[1]=e=>n.linkUrl=e),type:"url",placeholder:"https://example.com",class:"link-input",onKeydown:t[2]||(t[2]=function(){return n.handleKeydown&&n.handleKeydown(...arguments)})},null,544),[[V,n.linkUrl]])]),u("div",Ra,[t[12]||(t[12]=u("label",{for:"link-title"},"Название ссылки:",-1)),z(u("input",{id:"link-title",ref:"titleInput","onUpdate:modelValue":t[3]||(t[3]=e=>n.linkTitle=e),type:"text",placeholder:"Название для отображения",class:"link-input",onKeydown:t[4]||(t[4]=function(){return n.handleKeydown&&n.handleKeydown(...arguments)})},null,544),[[V,n.linkTitle]])])]),u("div",Aa,[u("button",{class:"cancel-button",onClick:t[5]||(t[5]=function(){return n.closeModal&&n.closeModal(...arguments)})},"Отмена"),u("button",{class:"submit-button",disabled:!n.isValidLink,onClick:t[6]||(t[6]=function(){return n.submitLink&&n.submitLink(...arguments)})},"Добавить",8,Ta)])])])):f("",!0)}],["__scopeId","data-v-a794d83f"]]);function Ua(){var e,t,a,n,o,i,l=(e=r(!1),t=r(!1),a=r(!1),n=()=>{e.value=!1},{showEmojiPicker:e,isEmojiHovered:t,isButtonHovered:a,handleEmojiMouseEnter:()=>{t.value=!0},handleEmojiMouseLeave:()=>{t.value=!1,setTimeout((()=>{t.value||a.value||(e.value=!1)}),300)},handleButtonMouseEnter:()=>{a.value=!0,e.value=!0},handleButtonMouseLeave:()=>{a.value=!1,setTimeout((()=>{t.value||a.value||(e.value=!1)}),300)},closeEmojiPicker:n,insertEmoji:(e,t,a,n)=>{var o=t.value;if(o){var r=o.selectionStart,i=o.selectionEnd,l=a.value.substring(0,r),s=a.value.substring(i);n(l+e+s),U((()=>{o.focus(),o.setSelectionRange(r+e.length,r+e.length),o.style.height&&(o.style.height="auto",o.style.height=`${Math.min(o.scrollHeight,200)}px`)}))}else n(a.value+e)},handleGlobalClick:e=>{e.target.closest(".emoji-picker")||e.target.closest(".emoji-button-inline")||n()}}),s=function(){var e=r(!1),t=r(!1),a=r(!1),n=()=>{e.value=!1};return{showImagePicker:e,isImageHovered:t,isButtonHovered:a,handleImageMouseEnter:()=>{t.value=!0},handleImageMouseLeave:()=>{t.value=!1,setTimeout((()=>{t.value||a.value||(e.value=!1)}),300)},handleImageButtonMouseEnter:()=>{a.value=!0,e.value=!0},handleButtonMouseLeave:()=>{a.value=!1,setTimeout((()=>{t.value||a.value||(e.value=!1)}),300)},closeImagePicker:n,insertImage:(e,t,a,n)=>{var o=t.value;if(o){var r=o.selectionStart,i=o.selectionEnd,l=`[img]${e}[/img]`;n(a.value.slice(0,r)+l+a.value.slice(i)),U((()=>{o.focus(),o.setSelectionRange(r+l.length,r+l.length),o.style.height&&(o.style.height="auto",o.style.height=`${Math.min(o.scrollHeight,200)}px`)}))}else{var s=`[img]${e}[/img]`;n(a.value+s)}},handleGlobalClick:e=>{e.target.closest(".image-picker")||e.target.closest(".emoji-button-inline")||n()}}}(),d=(o=r(!1),i=r(""),{showLinkModal:o,selectedTextForLink:i,insertLink:(e,t)=>{var a=e.value;if(a){var n=a.selectionStart,r=a.selectionEnd,l=t.value.slice(n,r);i.value=l.trim()||""}o.value=!0},insertLinkFromModal:(e,t,a,n)=>{var o=t.value;if(o){var r=o.selectionStart,i=o.selectionEnd,l=`[link=${e.url}]${e.title}[/link]`;n(a.value.slice(0,r)+l+a.value.slice(i)),U((()=>{o.focus(),o.setSelectionRange(r+l.length,r+l.length),o.style.height&&(o.style.height="auto",o.style.height=`${Math.min(o.scrollHeight,200)}px`)}))}},closeLinkModal:()=>{o.value=!1},insertSpoiler:(e,t,a)=>{var n=e.value;if(n){var o,r=n.selectionStart,i=n.selectionEnd,l=t.value.slice(r,i);o=l.trim()?`[spoiler]${l}[/spoiler]`:"[spoiler][/spoiler]",a(t.value.slice(0,r)+o+t.value.slice(i)),U((()=>{if(n.focus(),l.trim())n.setSelectionRange(r+o.length,r+o.length);else{var e=r+9;n.setSelectionRange(e,e)}n.style.height&&(n.style.height="auto",n.style.height=`${Math.min(n.scrollHeight,200)}px`)}))}}}),c={autoResize:e=>{var t=null==e?void 0:e.target;t&&(t.style.height="auto",t.style.height=`${Math.min(t.scrollHeight,200)}px`)},autoResizeElement:e=>{e&&(e.style.height="auto",e.style.height=`${Math.min(e.scrollHeight,200)}px`)}},u=c.autoResize,v=c.autoResizeElement,m=()=>{l.showEmojiPicker.value=!1,s.showImagePicker.value=!1},p=e=>{e.target.closest(".emoji-picker")||e.target.closest(".image-picker")||e.target.closest(".emoji-button-inline")||m()};return C((()=>{document.addEventListener("click",p)})),E((()=>{document.removeEventListener("click",p)})),{showEmojiPicker:l.showEmojiPicker,handleEmojiMouseEnter:l.handleEmojiMouseEnter,handleEmojiMouseLeave:l.handleEmojiMouseLeave,closeEmojiPicker:l.closeEmojiPicker,showImagePicker:s.showImagePicker,handleImageMouseEnter:s.handleImageMouseEnter,handleImageMouseLeave:s.handleImageMouseLeave,closeImagePicker:s.closeImagePicker,showLinkModal:d.showLinkModal,selectedTextForLink:d.selectedTextForLink,closeLinkModal:d.closeLinkModal,handleButtonMouseEnter:()=>{l.isButtonHovered.value=!0,s.isButtonHovered.value=!0,l.showEmojiPicker.value=!0,s.showImagePicker.value=!1},handleImageButtonMouseEnter:()=>{l.isButtonHovered.value=!0,s.isButtonHovered.value=!0,s.showImagePicker.value=!0,l.showEmojiPicker.value=!1},handleButtonMouseLeave:()=>{l.isButtonHovered.value=!1,s.isButtonHovered.value=!1,setTimeout((()=>{l.isEmojiHovered.value||s.isImageHovered.value||l.isButtonHovered.value||s.isButtonHovered.value||(l.showEmojiPicker.value=!1,s.showImagePicker.value=!1)}),300)},closeAllPickers:m,insertEmojiUniversal:(e,t,a,n)=>{l.insertEmoji(e,t,a,n)},insertImageUniversal:(e,t,a,n)=>{s.insertImage(e,t,a,n)},insertLinkUniversal:(e,t,a)=>{d.insertLink(e,t,a)},insertLinkFromModalUniversal:(e,t,a,n)=>{d.insertLinkFromModal(e,t,a,n)},insertSpoilerUniversal:(e,t,a)=>{d.insertSpoiler(e,t,a)},autoResize:u,autoResizeElement:v}}var Oa=e=>1===e?"комментарий":e>=2&&e<=4?"комментария":"комментариев",$a=e=>{if(!e)return"?";var t=e.split(" ");return 1===t.length?e.slice(0,2).toUpperCase():(t[0][0]+t[t.length-1][0]).toUpperCase()},Ba=["data-comment-id"],Da={class:"comment-header"},Ha={class:"user-info"},Na={class:"user-avatar"},Fa=["src","alt"],Va={class:"user-details"},qa={class:"username"},Ka={key:0,class:"user-rating"},Ya=["title"],Wa=["title"],Ga={class:"comment-content"},Za={key:0,class:"hidden-comment-warning"},Xa={key:1},Qa={key:0,class:"deleted-comment"},Ja={key:1},en={key:0,class:"edit-form"},tn={class:"edit-textarea-container"},an={class:"edit-footer"},nn={class:"edit-actions"},on=["disabled"],rn={class:"character-counter-container"},ln={key:1,class:"comment-text-container"},sn=["innerHTML"],dn={class:"comment-footer"},cn={class:"comment-actions"},un={class:"rating-buttons"},vn={class:"action-buttons"};var mn=o({name:"CommentItem",components:{EmojiPicker:va,ImagePicker:La,LinkModal:Sa},props:{comment:{type:Object,required:!0,default:()=>({username:"Аноним",user_avatar:null,content:"",created_at:(new Date).toISOString(),rating:0,replies:[]})},currentUser:{type:Object,required:!0,default:()=>({})},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate"],setup(e,a){var n,o,l=a.emit,d=w(),c=s((()=>{var t;return e.editingCommentId===(null===(t=e.comment)||void 0===t?void 0:t.id)})),u=r((null===(n=e.comment)||void 0===n?void 0:n.content)||""),v=r((null===(o=e.comment)||void 0===o?void 0:o.user_rating)||0),m=r(null),p=r(null),f=Ua(),b=f.showEmojiPicker,g=f.showImagePicker,h=f.showLinkModal,x=f.selectedTextForLink,k=f.handleEmojiMouseEnter,y=f.handleEmojiMouseLeave,E=f.handleImageMouseEnter,M=f.handleImageMouseLeave,L=f.handleButtonMouseEnter,j=f.handleImageButtonMouseEnter,I=f.handleButtonMouseLeave,z=f.closeEmojiPicker,P=f.closeImagePicker,R=f.closeLinkModal,A=f.insertEmojiUniversal,T=f.insertImageUniversal,S=f.insertLinkUniversal,O=f.insertLinkFromModalUniversal,$=f.insertSpoilerUniversal,B=f.autoResize,D=be().formatContentWithTruncation;C(i(t().mark((function a(){var n,o;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(n=e.comment)||void 0===n||!n.user_avatar){t.next=5;break}return t.next=3,q();case 3:o=t.sent,m.value=`${o}${e.comment.user_avatar}`;case 5:case"end":return t.stop()}}),a)}))));var H=s((()=>{var t;return e.currentUser&&(null===(t=e.comment)||void 0===t?void 0:t.user_id)===e.currentUser.id})),N=s((()=>{var t;return e.currentUser&&(null===(t=e.comment)||void 0===t?void 0:t.user_id)===e.currentUser.id||e.currentUser&&1===e.currentUser.is_admin})),F=s((()=>{var t,a,n;return(null===(t=e.comment)||void 0===t?void 0:t.updated_at)&&(null===(a=e.comment)||void 0===a?void 0:a.updated_at)!==(null===(n=e.comment)||void 0===n?void 0:n.created_at)})),V=s((()=>{var t,a;return(null===(t=e.comment)||void 0===t||!t.is_deleted)&&((null===(a=e.comment)||void 0===a?void 0:a.rating)||0)<=-3})),K=s((()=>V.value)),Y=r(!1),W=s((()=>{var t,a;return null!==(t=e.comment)&&void 0!==t&&t.is_deleted?null:((null===(a=e.comment)||void 0===a?void 0:a.rating)||0)<=-3?"lowRating":null})),G=()=>{var t;u.value.trim()&&l("edit",null===(t=e.comment)||void 0===t?void 0:t.id,u.value.trim())},Z=s((()=>{var t;return(null===(t=e.comment)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.length)>500})),X=r(!1),Q=s((()=>{var t;return D(null===(t=e.comment)||void 0===t?void 0:t.content,500,X.value)})),J=e=>{B(e)};return _(u,(()=>{c.value&&p.value&&U((()=>{J({target:p.value})}))})),{isEditing:c,editContent:u,userRating:v,isCommentOwner:H,canDeleteComment:N,isCommentEdited:F,formatDate:he,formatRelativeTime:ge,startEdit:()=>{var t,a;l("start-edit",null===(t=e.comment)||void 0===t?void 0:t.id),u.value=(null===(a=e.comment)||void 0===a?void 0:a.content)||"",U((()=>{p.value&&(p.value.focus(),B({target:p.value}))}))},cancelEdit:()=>{var t;l("cancel-edit"),u.value=(null===(t=e.comment)||void 0===t?void 0:t.content)||""},saveEdit:G,confirmDelete:()=>{var t;confirm("Вы уверены, что хотите удалить этот комментарий?")&&l("delete",null===(t=e.comment)||void 0===t?void 0:t.id)},rateComment:t=>{var a,n;v.value===t?(v.value=0,l("rate",null===(a=e.comment)||void 0===a?void 0:a.id,t)):(v.value=t,l("rate",null===(n=e.comment)||void 0===n?void 0:n.id,t))},avatarUrl:m,getInitials:$a,handleEditKeydown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),G())},isCommentHidden:K,showHiddenComment:Y,hiddenCommentReason:W,isLongComment:Z,isExpanded:X,formattedContent:Q,toggleExpanded:()=>{X.value=!X.value},autoResizeEdit:J,editTextarea:p,showEmojiPicker:b,showImagePicker:g,insertEmojiEdit:e=>{A(e,p,u,(e=>{u.value=e}))},insertImageEdit:e=>{T(e,p,u,(e=>{u.value=e}))},insertSpoilerEdit:()=>{$(p,u,(e=>{u.value=e}))},insertLinkEdit:()=>{S(p,u,(e=>{u.value=e}))},handleEmojiMouseEnter:k,handleEmojiMouseLeave:y,handleImageMouseEnter:E,handleImageMouseLeave:M,closeEmojiPicker:z,closeImagePicker:P,handleButtonMouseEnter:L,handleButtonMouseLeave:I,handleImageButtonMouseEnter:j,handleAvatarError:()=>{console.log("Avatar load error, falling back to initials"),m.value=null,U((()=>{var e=document.querySelector(".avatar-placeholder");e&&(e.style.display="flex")}))},openLogin:()=>{d.push("/login")},showLinkModal:h,selectedTextForLink:x,insertLinkFromModal:e=>{O(e,p,u,(e=>{u.value=e}))},closeLinkModal:R}}},[["render",function(e,t,a,n,o,r){var i,l,s,p,b,h,x,k,y,w,_,C,E,M,L,P,R,A,T,S=K("router-link"),U=K("EmojiPicker"),O=K("ImagePicker"),$=K("LinkModal");return c(),d("div",{class:"comment-item","data-comment-id":null===(i=a.comment)||void 0===i?void 0:i.id},[u("div",Da,[u("div",Ha,[j(S,{to:{path:`/lists/${null===(l=a.comment)||void 0===l?void 0:l.user_id}`},target:"_blank",rel:"noopener noreferrer",class:"user-avatar-link"},{default:Y((()=>{var e,o;return[u("div",Na,[n.avatarUrl?(c(),d("img",{key:0,src:n.avatarUrl,alt:(null===(e=a.comment)||void 0===e?void 0:e.username)||"Аноним",onError:t[0]||(t[0]=function(){return n.handleAvatarError&&n.handleAvatarError(...arguments)}),onerror:"this.onerror=null; this.style.display='none'; this.nextElementSibling.style.display='flex';"},null,40,Fa)):(c(),d("div",{key:1,class:"avatar-placeholder",style:I({display:n.avatarUrl?"none":"flex"})},m(n.getInitials((null===(o=a.comment)||void 0===o?void 0:o.username)||"Аноним")),5))])]})),_:1},8,["to"]),u("div",Va,[j(S,{to:{path:`/lists/${null===(s=a.comment)||void 0===s?void 0:s.user_id}`},target:"_blank",rel:"noopener noreferrer",class:"username-link"},{default:Y((()=>{var e;return[u("span",qa,m((null===(e=a.comment)||void 0===e?void 0:e.username)||"Аноним"),1)]})),_:1},8,["to"]),null!==(p=a.comment)&&void 0!==p&&p.user_movie_rating?(c(),d("span",Ka,[t[19]||(t[19]=u("i",{class:"fas fa-star"},null,-1)),v(" "+m(a.comment.user_movie_rating),1)])):f("",!0),u("span",{class:"date",title:n.isCommentEdited?`Создано: ${n.formatDate(null===(b=a.comment)||void 0===b?void 0:b.created_at)}\nИзменено: ${n.formatDate(null===(h=a.comment)||void 0===h?void 0:h.updated_at)}`:`Создано: ${n.formatDate(null===(x=a.comment)||void 0===x?void 0:x.created_at)}`},[v(m(n.formatRelativeTime(null===(k=a.comment)||void 0===k?void 0:k.created_at))+" ",1),n.isCommentEdited?(c(),d("i",{key:0,class:"fas fa-pencil-alt edit-icon",title:n.isCommentEdited?`Создано: ${n.formatDate(null===(y=a.comment)||void 0===y?void 0:y.created_at)}\nИзменено: ${n.formatDate(null===(w=a.comment)||void 0===w?void 0:w.updated_at)}`:`Создано: ${n.formatDate(null===(_=a.comment)||void 0===_?void 0:_.created_at)}`},null,8,Wa)):f("",!0)],8,Ya)])])]),u("div",Ga,[null!==(C=a.comment)&&void 0!==C&&C.is_deleted||!n.isCommentHidden||n.showHiddenComment?(c(),d("div",Xa,[null!==(E=a.comment)&&void 0!==E&&E.is_deleted?(c(),d("div",Qa,t[21]||(t[21]=[u("p",{class:"deleted-message"},[u("i",{class:"fas fa-trash"}),v(" комментарий удалён ")],-1)]))):(c(),d("div",Ja,[n.isEditing?(c(),d("div",en,[u("div",tn,[z(u("textarea",{ref:"editTextarea","onUpdate:modelValue":t[2]||(t[2]=e=>n.editContent=e),class:"edit-textarea",rows:"3",maxlength:"1500",onKeydown:t[3]||(t[3]=function(){return n.handleEditKeydown&&n.handleEditKeydown(...arguments)}),onInput:t[4]||(t[4]=function(){return n.autoResizeEdit&&n.autoResizeEdit(...arguments)})},null,544),[[V,n.editContent]])]),u("div",an,[u("div",nn,[u("button",{onClick:t[5]||(t[5]=function(){return n.cancelEdit&&n.cancelEdit(...arguments)}),class:"cancel-button"},"Отмена"),u("button",{onClick:t[6]||(t[6]=function(){return n.saveEdit&&n.saveEdit(...arguments)}),class:"save-button",disabled:!n.editContent.trim()||n.editContent.length>1500}," Сохранить ",8,on)]),u("div",rn,[u("div",{class:g(["character-counter-inline",{"near-limit":n.editContent.length>1400,"at-limit":n.editContent.length>=1500}])},m(n.editContent.length)+"/1500 ",3),u("button",{type:"button",class:g(["emoji-button-inline",{active:n.showEmojiPicker}]),onMouseenter:t[7]||(t[7]=function(){return n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...arguments)}),onMouseleave:t[8]||(t[8]=function(){return n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...arguments)})}," 😊 ",34),u("button",{type:"button",class:g(["emoji-button-inline",{active:n.showImagePicker}]),onMouseenter:t[9]||(t[9]=function(){return n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...arguments)}),onMouseleave:t[10]||(t[10]=function(){return n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...arguments)})},t[22]||(t[22]=[W('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-d19fdc64><g id="logo" data-v-d19fdc64><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-d19fdc64></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-d19fdc64></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-d19fdc64></path></g></svg>',1)]),34),u("button",{type:"button",class:"emoji-button-inline spoiler-button",onClick:t[11]||(t[11]=function(){return n.insertSpoilerEdit&&n.insertSpoilerEdit(...arguments)}),title:"Добавить спойлер"},t[23]||(t[23]=[u("i",{class:"fas fa-eye-slash"},null,-1)])),u("button",{type:"button",class:"emoji-button-inline link-button",onClick:t[12]||(t[12]=function(){return n.insertLinkEdit&&n.insertLinkEdit(...arguments)}),title:"Добавить ссылку"},t[24]||(t[24]=[u("i",{class:"fas fa-link"},null,-1)])),j(U,{"is-visible":n.showEmojiPicker,onEmojiSelected:n.insertEmojiEdit,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),j(O,{"is-visible":n.showImagePicker,"current-user":a.currentUser,onImageSelected:n.insertImageEdit,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:n.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),j($,{"is-visible":n.showLinkModal,"selected-text":n.selectedTextForLink,onClose:n.closeLinkModal,onSubmit:n.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):(c(),d("div",ln,[u("p",{class:g(["comment-text",{truncated:n.isLongComment&&!n.isExpanded}]),innerHTML:n.formattedContent},null,10,sn),n.isLongComment?(c(),d("button",{key:0,onClick:t[13]||(t[13]=function(){return n.toggleExpanded&&n.toggleExpanded(...arguments)}),class:"expand-button"},m(n.isExpanded?"Свернуть":"Развернуть"),1)):f("",!0)]))]))])):(c(),d("div",Za,["lowRating"===n.hiddenCommentReason?(c(),d("p",{key:0,class:"warning-text",onClick:t[1]||(t[1]=e=>n.showHiddenComment=!0)},t[20]||(t[20]=[u("i",{class:"fas fa-eye-slash"},null,-1),v(" Комментарий скрыт из-за низкого рейтинга. Нажмите, чтобы показать. ")]))):f("",!0)]))]),u("div",dn,[u("div",cn,[u("div",un,[n.isCommentOwner||null!==(M=a.comment)&&void 0!==M&&M.is_deleted?f("",!0):(c(),d("button",{key:0,onClick:t[14]||(t[14]=e=>n.rateComment(1)),class:g(["rating-button",{"rated-up":1===n.userRating}])},t[25]||(t[25]=[u("i",{class:"fas fa-thumbs-up"},null,-1)]),2)),u("span",{class:g(["rating-count",{"rating-positive":1===n.userRating,"rating-negative":-1===n.userRating}])},m((null===(L=a.comment)||void 0===L?void 0:L.rating)||0),3),n.isCommentOwner||null!==(P=a.comment)&&void 0!==P&&P.is_deleted?f("",!0):(c(),d("button",{key:1,onClick:t[15]||(t[15]=e=>n.rateComment(-1)),class:g(["rating-button",{"rated-down":-1===n.userRating}])},t[26]||(t[26]=[u("i",{class:"fas fa-thumbs-down"},null,-1)]),2))]),u("div",vn,[a.currentUser&&1!==a.currentUser.allow_comments?f("",!0):(c(),d("button",{key:0,onClick:t[16]||(t[16]=t=>e.$emit("reply",a.comment)),class:"action-button reply-button"},t[27]||(t[27]=[u("i",{class:"fas fa-reply"},null,-1)]))),!n.isCommentOwner||null!==(R=a.comment)&&void 0!==R&&R.is_deleted||n.isEditing||1!==(null===(A=a.currentUser)||void 0===A?void 0:A.allow_comments)?f("",!0):(c(),d("button",{key:1,onClick:t[17]||(t[17]=function(){return n.startEdit&&n.startEdit(...arguments)}),class:"action-button edit-button"},t[28]||(t[28]=[u("i",{class:"fas fa-edit"},null,-1)]))),!n.canDeleteComment||null!==(T=a.comment)&&void 0!==T&&T.is_deleted?f("",!0):(c(),d("button",{key:2,onClick:t[18]||(t[18]=function(){return n.confirmDelete&&n.confirmDelete(...arguments)}),class:"action-button delete-button"},t[29]||(t[29]=[u("i",{class:"fas fa-trash"},null,-1)])))])])])],8,Ba)}],["__scopeId","data-v-d19fdc64"]]),pn={class:"comment-thread"},fn={key:0,class:"reply-form"},bn={class:"textarea-container"},gn=["value","placeholder","disabled"],hn={class:"reply-footer"},xn={class:"reply-actions"},kn=["disabled"],yn={class:"character-counter-container"},wn=["disabled"],_n={key:1,class:"replies-container"},Cn=["title"],En={class:"replies-count"},Mn=["title"],Ln={key:0,class:"replies-content"};var jn=o({name:"CommentThread",components:{CommentItem:mn,EmojiPicker:va,ImagePicker:La,LinkModal:Sa},props:{comment:{type:Object,required:!0},currentUser:{type:Object,required:!0},replyTo:{type:Object,default:null},replyContent:{type:String,default:""},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate","submit-reply","cancel-reply","update-reply-content","reply-keydown"],setup(e,t){var a=t.emit,n=r(null),o=r(!0),i=Ua(),l=i.showEmojiPicker,s=i.showImagePicker,d=i.showLinkModal,c=i.selectedTextForLink,u=i.handleEmojiMouseEnter,v=i.handleEmojiMouseLeave,m=i.handleImageMouseEnter,p=i.handleImageMouseLeave,f=i.handleButtonMouseEnter,b=i.handleImageButtonMouseEnter,g=i.handleButtonMouseLeave,h=i.closeEmojiPicker,x=i.closeImagePicker,k=i.closeLinkModal,y=i.insertEmojiUniversal,w=i.insertImageUniversal,_=i.insertLinkUniversal,C=i.insertLinkFromModalUniversal,E=i.insertSpoilerUniversal,M={get value(){return e.replyContent},set value(e){a("update-reply-content",e)}};return{replyTextarea:n,showEmojiPicker:l,showImagePicker:s,isCollapsed:o,insertEmoji:e=>{y(e,n,M,(e=>{a("update-reply-content",e)}))},insertImage:e=>{w(e,n,M,(e=>{a("update-reply-content",e)}))},insertSpoiler:()=>{E(n,M,(e=>{a("update-reply-content",e)}))},handleEmojiMouseEnter:u,handleEmojiMouseLeave:v,handleImageMouseEnter:m,handleImageMouseLeave:p,handleButtonMouseEnter:f,handleButtonMouseLeave:g,closeEmojiPicker:h,closeImagePicker:x,handleImageButtonMouseEnter:b,handleReplyInput:e=>{a("update-reply-content",e.target.value);var t=e.target;t&&(t.style.height="auto",t.style.height=`${Math.min(t.scrollHeight,200)}px`)},toggleCollapsed:()=>{o.value=!o.value},showLinkModal:d,selectedTextForLink:c,insertLink:()=>{_(n,M,(e=>{a("update-reply-content",e)}))},closeLinkModal:k,insertLinkFromModal:e=>{C(e,n,M,(e=>{a("update-reply-content",e)}))}}},computed:{canReply(){return!this.currentUser||1===this.currentUser.allow_comments},getReplyPlaceholder(){return this.currentUser?1!==this.currentUser.allow_comments?"У вас нет прав на создание комментариев":"Напишите ваш ответ...":"Войдите, чтобы оставить ответ..."},formattedContent(){return(0,be().formatContent)(this.comment.content)}}},[["render",function(e,t,a,n,o,r){var i=K("CommentItem"),l=K("EmojiPicker"),s=K("ImagePicker"),v=K("LinkModal"),h=K("CommentThread",!0);return c(),d("div",pn,[j(i,{comment:a.comment,"current-user":a.currentUser,"editing-comment-id":a.editingCommentId,onReply:t[0]||(t[0]=t=>e.$emit("reply",t)),onStartEdit:t[1]||(t[1]=t=>e.$emit("start-edit",t)),onCancelEdit:t[2]||(t[2]=t=>e.$emit("cancel-edit")),onEdit:t[3]||(t[3]=(t,a)=>e.$emit("edit",t,a)),onDelete:t[4]||(t[4]=t=>e.$emit("delete",t)),onRate:t[5]||(t[5]=(t,a)=>e.$emit("rate",t,a))},null,8,["comment","current-user","editing-comment-id"]),a.replyTo&&a.replyTo.id===a.comment.id?(c(),d("div",fn,[u("div",bn,[u("textarea",{ref:"replyTextarea",class:"comment-textarea",value:a.replyContent,placeholder:r.getReplyPlaceholder,disabled:a.currentUser&&1!==a.currentUser.allow_comments,rows:"3",maxlength:"1500",onInput:t[6]||(t[6]=function(){return n.handleReplyInput&&n.handleReplyInput(...arguments)}),onKeydown:t[7]||(t[7]=t=>e.$emit("reply-keydown",t))},null,40,gn)]),u("div",hn,[u("div",xn,[u("button",{class:"cancel-reply",onClick:t[8]||(t[8]=t=>e.$emit("cancel-reply"))},"Отмена"),u("button",{class:"submit-button",disabled:!a.replyContent.trim()||a.replyContent.length>1500||a.currentUser&&1!==a.currentUser.allow_comments,onClick:t[9]||(t[9]=t=>e.$emit("submit-reply"))}," Ответить ",8,kn)]),u("div",yn,[u("div",{class:g(["character-counter-inline",{"near-limit":a.replyContent.length>1400,"at-limit":a.replyContent.length>=1500}])},m(a.replyContent.length)+"/1500 ",3),u("button",{type:"button",class:g(["emoji-button-inline",{active:n.showEmojiPicker}]),onMouseenter:t[10]||(t[10]=function(){return n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...arguments)}),onMouseleave:t[11]||(t[11]=function(){return n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...arguments)})}," 😊 ",34),u("button",{type:"button",class:g(["emoji-button-inline",{active:n.showImagePicker}]),onMouseenter:t[12]||(t[12]=function(){return n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...arguments)}),onMouseleave:t[13]||(t[13]=function(){return n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...arguments)})},t[29]||(t[29]=[W('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-6c0fc347><g id="logo" data-v-6c0fc347><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-6c0fc347></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-6c0fc347></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-6c0fc347></path></g></svg>',1)]),34),u("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:a.currentUser&&1!==a.currentUser.allow_comments,onClick:t[14]||(t[14]=function(){return n.insertSpoiler&&n.insertSpoiler(...arguments)}),title:"Добавить спойлер"},t[30]||(t[30]=[u("i",{class:"fas fa-eye-slash"},null,-1)]),8,wn),u("button",{type:"button",class:"emoji-button-inline link-button",onClick:t[15]||(t[15]=function(){return n.insertLink&&n.insertLink(...arguments)}),title:"Добавить ссылку"},t[31]||(t[31]=[u("i",{class:"fas fa-link"},null,-1)])),j(l,{"is-visible":n.showEmojiPicker,onEmojiSelected:n.insertEmoji,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),j(s,{"is-visible":n.showImagePicker,"current-user":a.currentUser,onImageSelected:n.insertImage,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:t[16]||(t[16]=()=>e.$router.push("/login"))},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose"]),j(v,{"is-visible":n.showLinkModal,"selected-text":n.selectedTextForLink,onClose:n.closeLinkModal,onSubmit:n.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):f("",!0),a.comment.replies&&a.comment.replies.length>0?(c(),d("div",_n,[u("button",{class:"collapse-toggle",title:n.isCollapsed?"Развернуть ответы":"Свернуть ответы",onClick:t[17]||(t[17]=function(){return n.toggleCollapsed&&n.toggleCollapsed(...arguments)})},[u("span",{class:g(["collapse-icon",{expanded:!n.isCollapsed}])},t[32]||(t[32]=[u("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},[u("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1)]),2),u("span",En,m(a.comment.replies.length)+" "+m(1===a.comment.replies.length?"ответ":"ответов"),1)],8,Cn),u("div",{class:"vertical-line-clickable",title:n.isCollapsed?"Развернуть ответы":"Свернуть ответы",onClick:t[18]||(t[18]=function(){return n.toggleCollapsed&&n.toggleCollapsed(...arguments)})},[u("div",{class:g(["vertical-line-visual",{collapsed:n.isCollapsed}])},null,2)],8,Mn),n.isCollapsed?f("",!0):(c(),d("div",Ln,[(c(!0),d(p,null,b(a.comment.replies,(n=>(c(),M(h,{key:n.id,comment:n,"current-user":a.currentUser,"reply-to":a.replyTo,"reply-content":a.replyContent,"editing-comment-id":a.editingCommentId,onReply:t[19]||(t[19]=t=>e.$emit("reply",t)),onStartEdit:t[20]||(t[20]=t=>e.$emit("start-edit",t)),onCancelEdit:t[21]||(t[21]=t=>e.$emit("cancel-edit")),onEdit:t[22]||(t[22]=(t,a)=>e.$emit("edit",t,a)),onDelete:t[23]||(t[23]=t=>e.$emit("delete",t)),onRate:t[24]||(t[24]=(t,a)=>e.$emit("rate",t,a)),onSubmitReply:t[25]||(t[25]=t=>e.$emit("submit-reply")),onCancelReply:t[26]||(t[26]=t=>e.$emit("cancel-reply")),onUpdateReplyContent:t[27]||(t[27]=t=>e.$emit("update-reply-content",t)),onReplyKeydown:t[28]||(t[28]=t=>e.$emit("reply-keydown",t))},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id"])))),128))]))])):f("",!0)])}],["__scopeId","data-v-6c0fc347"]]),In={name:"Comments",components:{CommentThread:jn,Notification:ve,EmojiPicker:va,ImagePicker:La,LinkModal:Sa},props:{movieId:{type:[String,Number],required:!0}},setup(e){var a=k(),o=w(),l=x(),d=r([]),c=r(""),u=r(null),v=r(""),m=r(null),p=r(a.user),f=r(null),b=r(null),g=r(l.isAutoShowComments),h=r(!1),y=r(3),_=r(3),E=Ua(),M=E.showEmojiPicker,L=E.showImagePicker,j=E.showLinkModal,I=E.selectedTextForLink,z=E.handleEmojiMouseEnter,P=E.handleEmojiMouseLeave,R=E.handleImageMouseEnter,A=E.handleImageMouseLeave,T=E.handleButtonMouseEnter,S=E.handleImageButtonMouseEnter,O=E.handleButtonMouseLeave,$=E.closeEmojiPicker,B=E.closeImagePicker,D=E.closeLinkModal,H=E.insertEmojiUniversal,N=E.insertImageUniversal,F=E.insertLinkUniversal,V=E.insertLinkFromModalUniversal,q=E.insertSpoilerUniversal,K=E.autoResize,Y=s((()=>{var e=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return d.value.filter((e=>e.parent_id===t)).sort(((e,t)=>e.id-t.id)).map((t=>n(n({},t),{},{replies:e(t.id)}))).filter((e=>!e.is_deleted||e.replies&&e.replies.length>0))};return e()})),W=s((()=>{var e=t=>t.reduce(((t,a)=>t+1+e(a.replies||[])),0);return e(Y.value)})),ee=s((()=>Y.value.slice(0,_.value))),te=s((()=>Y.value.length>_.value)),ae=s((()=>Y.value.length-_.value)),ne=function(){var a=i(t().mark((function a(){var n;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,G(e.movieId);case 3:n=t.sent,d.value=n,t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Failed to load comments:",t.t0),f.value.showNotification("Ошибка при загрузке комментариев. Попробуйте обновить страницу.");case 11:case"end":return t.stop()}}),a,null,[[0,7]])})));return function(){return a.apply(this,arguments)}}(),oe=function(){var n=i(t().mark((function n(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!h.value){t.next=2;break}return t.abrupt("return");case 2:if(a.token){t.next=5;break}return f.value.showNotification('Необходимо <a class="auth-link">авторизоваться</a>',5e3,{onClick:de}),t.abrupt("return");case 5:if(!p.value||1===p.value.allow_comments){t.next=8;break}return f.value.showNotification("У вас нет прав на создание комментариев"),t.abrupt("return");case 8:if(c.value.replace(/\[spoiler\]\s*\[\/spoiler\]/g,"").replace(/\[img\]\s*\[\/img\]/g,"").replace(/\[link=[^\]]+\]\s*\[\/link\]/g,"").trim()){t.next=12;break}return f.value.showNotification("Комментарий не может быть пустым"),t.abrupt("return");case 12:if(!(c.value.length>1500)){t.next=15;break}return f.value.showNotification("Комментарий слишком длинный. Максимум 1500 символов."),t.abrupt("return");case 15:return t.prev=15,t.next=18,J(e.movieId,c.value.trim());case 18:return c.value="",t.next=21,ne();case 21:g.value=!0,U((()=>{b.value&&(b.value.focus(),b.value.style.height="auto"),setTimeout((()=>{var e=document.querySelectorAll(".comment-item[data-comment-id]");if(e.length>0){var t=Array.from(e).map((e=>parseInt(e.getAttribute("data-comment-id")))).filter((e=>!isNaN(e)));if(t.length>0){var a=Math.max(...t),n=document.querySelector(`[data-comment-id="${a}"]`);n&&n.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}}),300)})),t.next=29;break;case 25:t.prev=25,t.t0=t.catch(15),console.error("Failed to create comment:",t.t0),f.value.showNotification("Ошибка при создании комментария. Попробуйте еще раз.");case 29:case"end":return t.stop()}}),n,null,[[15,25]])})));return function(){return n.apply(this,arguments)}}(),re=function(){var n=i(t().mark((function n(){var o;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.token){t.next=3;break}return f.value.showNotification('Необходимо <a class="auth-link">авторизоваться</a>',5e3,{onClick:de}),t.abrupt("return");case 3:if(!p.value||1===p.value.allow_comments){t.next=6;break}return f.value.showNotification("У вас нет прав на создание комментариев"),t.abrupt("return");case 6:if(v.value.trim()&&u.value){t.next=8;break}return t.abrupt("return");case 8:if(!(v.value.length>1500)){t.next=11;break}return f.value.showNotification("Ответ слишком длинный. Максимум 1500 символов."),t.abrupt("return");case 11:return t.prev=11,t.next=14,J(e.movieId,v.value.trim(),u.value.id);case 14:return o=u.value.id,t.next=17,ne();case 17:v.value="",u.value=null,U((()=>{setTimeout((()=>{var e=document.querySelector(`[data-comment-id="${o}"]`);if(e){var t=e.querySelector(".replies-content");if(t){var a=t.querySelectorAll(".comment-item[data-comment-id]");if(a.length>0){var n=Array.from(a).map((e=>parseInt(e.getAttribute("data-comment-id")))).filter((e=>!isNaN(e)));if(n.length>0){var r=Math.max(...n),i=document.querySelector(`[data-comment-id="${r}"]`);i&&i.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}}}}),300)})),t.next=26;break;case 22:t.prev=22,t.t0=t.catch(11),console.error("Error submitting reply:",t.t0),f.value.showNotification("Ошибка при отправке ответа. Попробуйте еще раз.");case 26:case"end":return t.stop()}}),n,null,[[11,22]])})));return function(){return n.apply(this,arguments)}}(),ie=function(){var e=i(t().mark((function e(n,o){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.token){e.next=3;break}return f.value.showNotification('Необходимо <a class="auth-link">авторизоваться</a>',5e3,{onClick:de}),e.abrupt("return");case 3:if(!p.value||1===p.value.allow_comments){e.next=6;break}return f.value.showNotification("У вас нет прав на редактирование комментариев"),e.abrupt("return");case 6:if(!(o.length>1500)){e.next=9;break}return f.value.showNotification("Комментарий слишком длинный. Максимум 1500 символов."),e.abrupt("return");case 9:return e.prev=9,e.next=12,Q(n,o.trim());case 12:return e.next=14,ne();case 14:m.value=null,e.next=21;break;case 17:e.prev=17,e.t0=e.catch(9),console.error("Failed to update comment:",e.t0),f.value.showNotification("Ошибка при редактировании комментария. Попробуйте еще раз.");case 21:case"end":return e.stop()}}),e,null,[[9,17]])})));return function(t,a){return e.apply(this,arguments)}}(),le=function(){var e=i(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.token){e.next=3;break}return f.value.showNotification('Необходимо <a class="auth-link">авторизоваться</a>',5e3,{onClick:de}),e.abrupt("return");case 3:return e.prev=3,e.next=6,X(n);case 6:return e.next=8,ne();case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("Failed to delete comment:",e.t0),f.value.showNotification("Ошибка при удалении комментария. Попробуйте еще раз.");case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=i(t().mark((function e(n,o){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.token){e.next=3;break}return f.value.showNotification('Необходимо <a class="auth-link">авторизоваться</a>',5e3,{onClick:de}),e.abrupt("return");case 3:return e.prev=3,e.next=6,Z(n,o);case 6:return e.next=8,ne();case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("Failed to rate comment:",e.t0),f.value.showNotification("Ошибка при оценке комментария. Попробуйте еще раз.");case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,a){return e.apply(this,arguments)}}(),de=()=>{o.push("/login")},ce=s((()=>p.value?1!==p.value.allow_comments?"У вас нет прав на создание комментариев":"Напишите комментарий...":"Войдите, чтобы оставить комментарий...")),ue=s((()=>!p.value||1===p.value.allow_comments));return C((()=>{ne()})),{comments:d,groupedComments:Y,displayedComments:ee,hasMoreComments:te,remainingCommentsCount:ae,showMoreComments:()=>{_.value+=y.value},newComment:c,replyTo:u,replyContent:v,editingCommentId:m,currentUser:p,notificationRef:f,commentTextarea:b,showComments:g,submitComment:oe,handleReply:e=>{a.token?(m.value=null,u.value=e,v.value="",U((()=>{var e=document.querySelector(".reply-form");e&&e.scrollIntoView({behavior:"smooth",block:"center"})}))):f.value.showNotification('Необходимо <a class="auth-link">авторизоваться</a>',5e3,{onClick:de})},submitReply:re,handleEdit:ie,handleDelete:le,handleRate:se,handleCommentKeydown:e=>{h.value||M.value||"Enter"!==e.key||e.shiftKey||(e.preventDefault(),oe())},handleReplyKeydown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),re())},autoResize:K,totalCommentsCount:W,getCommentWordForm:Oa,showEmojiPicker:M,showImagePicker:L,showLinkModal:j,selectedTextForLink:I,insertEmoji:e=>{h.value=!0,H(e,b,c,(e=>{c.value=e})),setTimeout((()=>{h.value=!1}),100)},insertImage:e=>{N(e,b,c,(e=>{c.value=e}))},handleEmojiMouseEnter:z,handleEmojiMouseLeave:P,handleImageMouseEnter:R,handleImageMouseLeave:A,closeEmojiPicker:$,closeImagePicker:B,handleButtonMouseLeave:O,handleButtonMouseEnter:T,handleImageButtonMouseEnter:S,getCommentPlaceholder:ce,canComment:ue,handleStartEdit:e=>{u.value=null,v.value="",m.value=e},handleCancelEdit:()=>{m.value=null},insertSpoiler:()=>{q(b,c,(e=>{c.value=e}))},insertLink:()=>{F(b,c,(e=>{c.value=e}))},insertLinkFromModal:e=>{V(e,b,c,(e=>{c.value=e}))},closeLinkModal:D}}},zn={class:"comments-section"},Pn={class:"spoiler-content"},Rn={key:1,class:"comments-container"},An={class:"comments-header"},Tn={class:"textarea-container"},Sn=["placeholder","disabled"],Un={class:"comment-footer"},On={class:"comment-actions"},$n=["disabled"],Bn={class:"character-counter-container"},Dn=["disabled"],Hn=["disabled"],Nn=["disabled"],Fn={class:"comments-list"},Vn={key:0,class:"show-more-comments"};var qn=o(In,[["render",function(e,t,a,n,o,r){var i=K("EmojiPicker"),l=K("ImagePicker"),s=K("LinkModal"),x=K("CommentThread"),k=K("Notification");return c(),d("div",zn,[n.showComments?(c(),d("div",Rn,[u("div",An,[u("button",{class:"hide-comments-btn",onClick:t[1]||(t[1]=e=>n.showComments=!1)},t[18]||(t[18]=[u("i",{class:"fas fa-eye-slash"},null,-1),v(" Скрыть комментарии ")]))]),u("form",{class:"comment-form",onSubmit:t[11]||(t[11]=h((function(){return n.submitComment&&n.submitComment(...arguments)}),["prevent"]))},[u("div",Tn,[z(u("textarea",{ref:"commentTextarea","onUpdate:modelValue":t[2]||(t[2]=e=>n.newComment=e),class:"comment-textarea",placeholder:n.getCommentPlaceholder,disabled:n.currentUser&&1!==n.currentUser.allow_comments,rows:"3",maxlength:"1500",onInput:t[3]||(t[3]=function(){return n.autoResize&&n.autoResize(...arguments)}),onKeydown:t[4]||(t[4]=function(){return n.handleCommentKeydown&&n.handleCommentKeydown(...arguments)})},null,40,Sn),[[V,n.newComment]])]),u("div",Un,[u("div",On,[u("button",{class:"submit-button",type:"submit",disabled:!n.newComment.trim()||n.newComment.length>1500||n.currentUser&&1!==n.currentUser.allow_comments}," Отправить ",8,$n)]),u("div",Bn,[u("div",{class:g(["character-counter-inline",{"near-limit":n.newComment.length>1400,"at-limit":n.newComment.length>=1500}])},m(n.newComment.length)+"/1500 ",3),u("button",{type:"button",class:g(["emoji-button-inline",{active:n.showEmojiPicker}]),disabled:n.currentUser&&1!==n.currentUser.allow_comments,onMouseenter:t[5]||(t[5]=function(){return n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...arguments)}),onMouseleave:t[6]||(t[6]=function(){return n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...arguments)})}," 😊 ",42,Dn),u("button",{type:"button",class:g(["emoji-button-inline",{active:n.showImagePicker}]),disabled:n.currentUser&&1!==n.currentUser.allow_comments,onMouseenter:t[7]||(t[7]=function(){return n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...arguments)}),onMouseleave:t[8]||(t[8]=function(){return n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...arguments)})},t[19]||(t[19]=[W('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-79080d6f><g id="logo" data-v-79080d6f><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-79080d6f></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-79080d6f></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-79080d6f></path></g></svg>',1)]),42,Hn),u("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:n.currentUser&&1!==n.currentUser.allow_comments,onClick:t[9]||(t[9]=function(){return n.insertSpoiler&&n.insertSpoiler(...arguments)}),title:"Добавить спойлер"},t[20]||(t[20]=[u("i",{class:"fas fa-eye-slash"},null,-1)]),8,Nn),u("button",{type:"button",class:"emoji-button-inline link-button",onClick:t[10]||(t[10]=function(){return n.insertLink&&n.insertLink(...arguments)}),title:"Добавить ссылку"},t[21]||(t[21]=[u("i",{class:"fas fa-link"},null,-1)])),j(i,{"is-visible":n.showEmojiPicker&&n.canComment,onEmojiSelected:n.insertEmoji,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),j(l,{"is-visible":n.showImagePicker&&n.canComment,"current-user":n.currentUser,onImageSelected:n.insertImage,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:e.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),j(s,{"is-visible":n.showLinkModal,"selected-text":n.selectedTextForLink,onClose:n.closeLinkModal,onSubmit:n.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])],32),u("div",Fn,[(c(!0),d(p,null,b(n.displayedComments,(e=>(c(),M(x,{key:e.id,comment:e,"current-user":n.currentUser,"reply-to":n.replyTo,"reply-content":n.replyContent,"editing-comment-id":n.editingCommentId,"is-first-comment":!1,onReply:n.handleReply,onStartEdit:n.handleStartEdit,onCancelEdit:n.handleCancelEdit,onEdit:n.handleEdit,onDelete:n.handleDelete,onRate:n.handleRate,onSubmitReply:n.submitReply,onCancelReply:t[12]||(t[12]=e=>n.replyTo=null),onUpdateReplyContent:t[13]||(t[13]=e=>n.replyContent=e),onReplyKeydown:n.handleReplyKeydown},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id","onReply","onStartEdit","onCancelEdit","onEdit","onDelete","onRate","onSubmitReply","onReplyKeydown"])))),128)),n.hasMoreComments?(c(),d("div",Vn,[u("button",{class:"show-more-btn",onClick:t[14]||(t[14]=function(){return n.showMoreComments&&n.showMoreComments(...arguments)})}," Показать еще "+m(n.remainingCommentsCount)+" "+m(n.getCommentWordForm(n.remainingCommentsCount)),1)])):f("",!0)])])):(c(),d("div",{key:0,class:"spoiler-warning",onClick:t[0]||(t[0]=e=>n.showComments=!0)},[u("div",Pn,[t[15]||(t[15]=u("i",{class:"fas fa-eye-slash"},null,-1)),t[16]||(t[16]=u("h3",null,"Комментарии скрыты",-1)),t[17]||(t[17]=u("p",null,"Комментарии могут содержать спойлеры. Нажмите, чтобы показать.",-1)),u("div",{class:g(["comments-count",{"no-comments":0===n.totalCommentsCount}])},[0===n.totalCommentsCount?(c(),d(p,{key:0},[v(" Комментариев пока нет ")],64)):(c(),d(p,{key:1},[v(m(n.totalCommentsCount)+" "+m(n.getCommentWordForm(n.totalCommentsCount)),1)],64))],2)])])),j(k,{ref:"notificationRef"},null,512)])}],["__scopeId","data-v-79080d6f"]]),Kn={class:"movie-info"},Yn={class:"content"},Wn={key:0,class:"content-card"},Gn={class:"movie-skeleton"},Zn={class:"movie-skeleton__player"},Xn={key:2,class:"content-card"},Qn={key:3,class:"content-card"},Jn={class:"content-header"},eo=["src"],to={class:"content-title"},ao={key:0,class:"ratings-links"},no={key:1},oo=["href","title"],ro={key:2},io=["href","title"],lo={key:3},so=["href","title"],co={key:4},uo=["href","title"],vo={key:5},mo=["href"],po={key:6,class:"rating-links-group"},fo=["href"],bo=["title"],go={key:0,class:"fa-regular fa-face-grin-wink"},ho={key:1,class:"fas fa-spinner fa-spin"},xo={key:2,class:"nudity-info-popup"},ko={class:"nudity-info-content"},yo=["content"],wo=["content"],_o={class:"additional-info"},Co={class:"info-content"},Eo={key:0,class:"movie-poster-container desktop-only"},Mo=["href"],Lo=["src"],jo={class:"details-container"},Io={class:"info-list"},zo={key:0},Po={key:1},Ro={key:2},Ao={key:3},To={key:4},So={key:5},Uo={key:6},Oo={key:7},$o={key:8},Bo={class:"content-info"},Do={key:0,class:"content-description-text"},Ho={key:2,class:"comments-section"},No={key:3,class:"staff-section"},Fo={class:"staff-categories"},Vo={key:0,class:"staff-category"},qo={class:"staff-list"},Ko=["href","title"],Yo=["src","alt"],Wo={class:"staff-name"},Go={key:0,class:"staff-role"},Zo=["href","title"],Xo={key:1,class:"staff-category"},Qo={class:"staff-names-container"},Jo={class:"staff-names-list"},er=["href"],tr=["href","title"],ar={key:2,class:"staff-category"},nr={class:"staff-names-container"},or={class:"staff-names-list"},rr=["href"],ir=["href","title"],lr={key:4,class:"yt-video-container"},sr={key:5,class:"related-movies"},dr=["title"],cr={key:6,class:"related-movies"},ur=["title"],vr={__name:"MovieInfo",setup(e){var a=r(!0),o=x(),l=k(),h=ee(),w=y(),E=r(w.params.kp_id),T=r(""),U=r(null),O=r(null),D=te(),H=fe().areTrailersActive,N=r(null),F=r(!1),V=r(!1),q=r(10),K=r(null),Y=r(!1),G=s((()=>o.isCommentsEnabled)),Z=()=>{if(O.value){var e=O.value.name_ru||O.value.name_en||O.value.name_original||"Информация о фильме";document.title=e}},X=e=>e?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",Q=e=>(e||[]).map((e=>({kp_id:e.film_id,poster:e.poster_url_preview||e.poster_url,title:e.name_ru||e.name_en||e.name_original}))),J=e=>{if("number"==typeof e)return`${Math.floor(e/60)} ч. ${e%60} мин.`},le=r(!1),me=r({top:"0px",left:"0px"}),pe=e=>{le.value=!0,me.value={top:`${e.pageY+10}px`,left:e.pageX-70+"px"}},be=r(null),ge=function(){var e=i(t().mark((function e(){var a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=[O.value.name_ru||O.value.name_en||O.value.name_original,...O.value.year?[O.value.year]:[],...O.value.film_length?[J(O.value.film_length)]:[]],e.next=4,navigator.clipboard.writeText(a.join(", "));case 4:be.value.showNotification("Скопировано"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Ошибка копирования:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=i(t().mark((function e(){var a,r,i,d,c,u,v,m,p,f,b,g,x,k,y,w,_=arguments;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!(_.length>0&&void 0!==_[0])||_[0],e.prev=1,!E.value.startsWith("shiki")){e.next=8;break}return e.next=5,oe(E.value);case 5:f=e.sent,e.next=11;break;case 8:return e.next=10,re(E.value,l.token);case 10:f=e.sent;case 11:if(!Array.isArray(f)||0!==f.length){e.next=13;break}throw new Error("Данные не найдены. Пожалуйста, повторите поиск.");case 13:if(O.value=f,E.value.startsWith("shiki")?O.value=n(n({},O.value),{},{title:O.value.name_ru||O.value.name_en,name_original:O.value.name_en,short_description:O.value.slogan}):O.value=n(n({},O.value),{},{title:O.value.name_ru||O.value.name_en||O.value.name_original,kinopoisk_id:E.value}),D.setHeaderContent({text:O.value.title,imageUrl:O.value.logo_url}),Z(),b={kp_id:E.value,title:(null===(r=O.value)||void 0===r?void 0:r.name_ru)||(null===(i=O.value)||void 0===i?void 0:i.name_en)||(null===(d=O.value)||void 0===d?void 0:d.name_original),poster:(null===(c=O.value)||void 0===c?void 0:c.poster_url)||(null===(u=O.value)||void 0===u?void 0:u.cover_url)||(null===(v=O.value)||void 0===v?void 0:v.screenshots[0]),year:null===(m=O.value)||void 0===m?void 0:m.year,type:null===(p=O.value)||void 0===p?void 0:p.type},E.value.startsWith("shiki")&&O.value.screenshots&&O.value.screenshots.length>0?(g=Math.floor(Math.random()*O.value.screenshots.length),x=O.value.screenshots[g],h.updateMoviePoster(x)):b.poster&&h.updateMoviePoster(b.poster),!(s((()=>o.isHistoryAllowed)).value&&b.kp_id&&b.title&&a)){e.next=33;break}if(!l.token){e.next=32;break}return e.prev=22,e.next=25,$(b.kp_id,A.HISTORY);case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(22),console.error("Ошибка при добавлении в историю:",e.t0);case 30:e.next=33;break;case 32:o.addToHistory(n({},b));case 33:e.next=41;break;case 35:e.prev=35,e.t1=e.catch(1),k=S(e.t1),y=k.message,w=k.code,T.value=y,U.value=w,console.error("Ошибка при загрузке информации о фильмах:",e.t1);case 41:case"end":return e.stop()}}),e,null,[[1,35],[22,27]])})));return function(){return e.apply(this,arguments)}}(),ke=s((()=>{var e,t;return console.log("Трейлеры:",null===(e=O.value)||void 0===e?void 0:e.videos),null===(t=O.value)||void 0===t?void 0:t.videos})),ye=s((()=>{var e;return Q(null===(e=O.value)||void 0===e?void 0:e.sequels_and_prequels)})),we=s((()=>{var e;return Q(null===(e=O.value)||void 0===e?void 0:e.similars)})),_e=()=>{var e,t=(null===(e=document.querySelector(".related-movies"))||void 0===e?void 0:e.clientWidth)||0,a=Math.floor(t/160)||10;q.value=Math.max(1,a)},Ce=()=>{_e()},Ee=e=>{if(e.altKey&&84===e.keyCode&&document.querySelector(".player-container")){var t=document.querySelector(".theater-mode-btn");t&&t.click()}},Me=function(){var e=i(t().mark((function e(){var a,n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.token){e.next=3;break}return be.value.showNotification('Для просмотра информации необходимо <a class="auth-link">авторизоваться</a>',5e3,{onClick:()=>D.openLogin()}),e.abrupt("return");case 3:if(null!==(a=O.value)&&void 0!==a&&a.imdb_id){e.next=5;break}return e.abrupt("return");case 5:if(!K.value){e.next=8;break}return K.value=null,e.abrupt("return");case 8:return Y.value=!0,e.prev=9,e.next=12,ie(O.value.imdb_id);case 12:n=e.sent,K.value=n.nudity_info,e.next=20;break;case 16:e.prev=16,e.t0=e.catch(9),console.error("Ошибка при загрузке информации о сценах:",e.t0),be.value.showNotification("Ошибка при загрузке информации о сценах");case 20:return e.prev=20,Y.value=!1,e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[9,16,20,23]])})));return function(){return e.apply(this,arguments)}}();C(i(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he();case 2:a.value=!1,document.addEventListener("keydown",Ee),window.addEventListener("resize",Ce),setTimeout(_e,100);case 6:case"end":return e.stop()}}),e)})))),ae(i(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D.clearHeaderContent(),document.removeEventListener("keydown",Ee),window.removeEventListener("resize",Ce);case 3:case"end":return e.stop()}}),e)})))),_((()=>w.params.kp_id),function(){var e=i(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||n===E.value){e.next=7;break}return D.clearHeaderContent(),E.value=n,N.value=null,e.next=6,he();case 6:a.value=!1;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{immediate:!0}),_(O,(()=>{Z()}),{deep:!0});var Le=e=>{var t;return(null===(t=O.value)||void 0===t||null===(t=t.staff)||void 0===t?void 0:t.filter((t=>t.profession_key===e)))||[]};return(e,t)=>{var n,o;return c(),d(p,null,[u("div",Kn,[u("div",Yn,[!a.value&&O.value||T.value?f("",!0):(c(),d("div",Wn,[u("div",Gn,[t[4]||(t[4]=W('<div class="movie-skeleton__header" data-v-b3605321><div class="movie-skeleton__title" data-v-b3605321></div></div><div class="movie-skeleton__ratings" data-v-b3605321><div class="movie-skeleton__rating-item" data-v-b3605321></div><div class="movie-skeleton__rating-item" data-v-b3605321></div><div class="movie-skeleton__rating-item" data-v-b3605321></div></div>',2)),u("div",Zn,[j(ue)]),t[5]||(t[5]=W('<div class="movie-skeleton__additional-info" data-v-b3605321><div class="movie-skeleton__section-title" data-v-b3605321></div><div class="movie-skeleton__info-list" data-v-b3605321><div class="movie-skeleton__info-item" data-v-b3605321></div><div class="movie-skeleton__info-item" data-v-b3605321></div><div class="movie-skeleton__info-item" data-v-b3605321></div><div class="movie-skeleton__info-item" data-v-b3605321></div><div class="movie-skeleton__info-item" data-v-b3605321></div></div></div><div class="movie-skeleton__description" data-v-b3605321><div class="movie-skeleton__description-line" data-v-b3605321></div><div class="movie-skeleton__description-line" data-v-b3605321></div><div class="movie-skeleton__description-line" data-v-b3605321></div><div class="movie-skeleton__description-line" data-v-b3605321></div></div>',2))])])),T.value?(c(),M(L,{key:1,message:T.value,code:U.value},null,8,["message","code"])):f("",!0),T.value?(c(),d("div",Xn,[(c(),M(Ht,{key:E.value,"kp-id":E.value,"movie-info":O.value,"onUpdate:movieInfo":he},null,8,["kp-id","movie-info"]))])):f("",!0),O.value&&!a.value?(c(),d("div",Qn,[u("div",Jn,[O.value.logo_url?(c(),d("div",{key:0,class:"content-logo",onMousemove:pe,onMouseleave:t[0]||(t[0]=e=>le.value=!1),onClick:ge},[u("img",{src:O.value.logo_url,alt:"Логотип фильма",class:"content-logo"},null,8,eo)],32)):(c(),d("div",{key:1,onMousemove:pe,onMouseleave:t[1]||(t[1]=e=>le.value=!1),onClick:ge},[u("h1",to,m(O.value.title),1)],32)),z(u("div",{class:"title-copy-tooltip",style:I(me.value)}," Скопировать ",4),[[P,le.value]])]),O.value.kinopoisk_id||O.value.title||O.value.imdb_id||O.value.rating_imdb||O.value.shikimori_id?(c(),d("div",ao,[O.value.kinopoisk_id?(c(),M(ia,{key:O.value.kinopoisk_id,"kp-id":O.value.kinopoisk_id,"show-dash":!0},null,8,["kp-id"])):f("",!0),O.value.kinopoisk_id?(c(),d("div",no,[u("a",{href:`https://www.kinopoisk.ru/film/${O.value.kinopoisk_id}`,target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:O.value.rating_kinopoisk_vote_count?`Оценок: ${X(O.value.rating_kinopoisk_vote_count)}`:"Нет данных о количестве голосов"},[t[6]||(t[6]=u("img",{src:se,alt:"КП",class:"rating-logo"},null,-1)),u("span",{class:g(["rating-value",R(B)(O.value.rating_kinopoisk)])},m(O.value.rating_kinopoisk?O.value.rating_kinopoisk:"—"),3),t[7]||(t[7]=u("img",{src:xe,alt:"Внешняя ссылка",class:"external-link-icon"},null,-1))],8,oo)])):f("",!0),!O.value.kinopoisk_id&&O.value.title?(c(),d("div",ro,[u("a",{href:`https://www.kinopoisk.ru/index.php?kp_query=${encodeURIComponent(O.value.title+(O.value.year?" "+O.value.year:""))}`,target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:O.value.rating_kinopoisk_vote_count?`Оценок: ${X(O.value.rating_kinopoisk_vote_count)}`:"Нет данных о количестве голосов"},[t[8]||(t[8]=u("img",{src:se,alt:"КП",class:"rating-logo"},null,-1)),u("span",{class:g(["rating-value",R(B)(O.value.rating_kinopoisk)])},m(O.value.rating_kinopoisk?O.value.rating_kinopoisk:"—"),3),t[9]||(t[9]=u("img",{src:xe,alt:"Внешняя ссылка",class:"external-link-icon"},null,-1))],8,io)])):f("",!0),O.value.imdb_id?(c(),d("div",lo,[u("a",{href:`https://www.imdb.com/title/${O.value.imdb_id}`,target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:O.value.rating_imdb_vote_count?`Оценок: ${X(O.value.rating_imdb_vote_count)}`:"Нет данных о количестве голосов"},[t[10]||(t[10]=u("img",{src:de,alt:"IMDb",class:"rating-logo"},null,-1)),u("span",{class:g(["rating-value",R(B)(O.value.rating_imdb)])},m(O.value.rating_imdb?O.value.rating_imdb:"—"),3),t[11]||(t[11]=u("img",{src:xe,alt:"Внешняя ссылка",class:"external-link-icon"},null,-1))],8,so)])):f("",!0),!O.value.imdb_id&&O.value.title?(c(),d("div",co,[u("a",{href:`https://www.imdb.com/find/?q=${encodeURIComponent(O.value.title+(O.value.year?" "+O.value.year:""))}`,target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:O.value.rating_imdb_vote_count?`Оценок: ${X(O.value.rating_imdb_vote_count)}`:"Нет данных о количестве голосов"},[t[12]||(t[12]=u("img",{src:de,alt:"IMDb",class:"rating-logo"},null,-1)),u("span",{class:g(["rating-value",R(B)(O.value.rating_imdb)])},m(O.value.rating_imdb?O.value.rating_imdb:"—"),3),t[13]||(t[13]=u("img",{src:xe,alt:"Внешняя ссылка",class:"external-link-icon"},null,-1))],8,uo)])):f("",!0),O.value.shikimori_id?(c(),d("div",vo,[u("a",{href:`https://shikimori.one/animes/${O.value.shikimori_id}`,target:"_blank",rel:"noopener noreferrer",class:"rating-link"},t[14]||(t[14]=[u("img",{src:"/reyohoho/assets/icon-shikimori-DGvXK9Jc.svg",alt:"Shiki",class:"rating-logo"},null,-1),u("img",{src:xe,alt:"Внешняя ссылка",class:"external-link-icon"},null,-1)]),8,mo)])):f("",!0),O.value.imdb_id?(c(),d("div",po,[u("a",{href:`https://www.imdb.com/title/${O.value.imdb_id}/parentalguide`,target:"_blank",rel:"noopener noreferrer",class:"rating-link"},t[15]||(t[15]=[u("span",{class:"desktop-text"},"Parents Guide",-1),u("span",{class:"mobile-text"},"PG",-1),u("img",{src:xe,alt:"Внешняя ссылка",class:"external-link-icon"},null,-1)]),8,fo),u("button",{class:"rating-link nudity-info-btn",onClick:Me,title:K.value?"Скрыть информацию":"Показать информацию о сценах(Sex & Nudity)"},[Y.value?(c(),d("i",ho)):(c(),d("i",go)),K.value?(c(),d("div",xo,[u("div",ko,m(K.value),1)])):f("",!0)],8,bo)])):f("",!0)])):f("",!0),(c(),M(Ht,{key:E.value,"kp-id":E.value,"movie-info":O.value,"onUpdate:movieInfo":he},null,8,["kp-id","movie-info"])),u("meta",{name:"title-and-year",content:"FILM"===O.value.type&&O.value.year?`${O.value.title} (${O.value.year})`:O.value.title},null,8,yo),O.value.name_original?(c(),d("meta",{key:1,name:"original-title",content:O.value.name_original},null,8,wo)):f("",!0),u("div",_o,[t[25]||(t[25]=u("h2",{class:"additional-info-title"},"Подробнее",-1)),u("div",Co,[O.value.poster_url?(c(),d("div",Eo,[u("a",{href:O.value.poster_url,target:"_blank",rel:"noopener noreferrer"},[u("img",{src:O.value.poster_url,alt:"Постер фильма",class:"movie-poster"},null,8,Lo)],8,Mo)])):f("",!0),u("div",jo,[u("ul",Io,[O.value.type&&R(ne)[O.value.type]?(c(),d("li",zo,[t[16]||(t[16]=u("strong",null,"Тип:",-1)),v(" "+m(R(ne)[O.value.type]),1)])):f("",!0),O.value.year?(c(),d("li",Po,[t[17]||(t[17]=u("strong",null,"Год выпуска:",-1)),v(" "+m(O.value.year),1)])):f("",!0),O.value.title?(c(),d("li",Ro,[t[18]||(t[18]=u("strong",null,"Название:",-1)),v(" "+m(O.value.title),1)])):f("",!0),O.value.name_original?(c(),d("li",Ao,[t[19]||(t[19]=u("strong",null,"Оригинальное название:",-1)),v(" "+m(O.value.name_original),1)])):f("",!0),O.value.slogan?(c(),d("li",To,[t[20]||(t[20]=u("strong",null,"Слоган:",-1)),v(" "+m(O.value.slogan),1)])):f("",!0),O.value.production_companies?(c(),d("li",So,[t[21]||(t[21]=u("strong",null,"Продакшн:",-1)),v(" "+m(O.value.production_companies),1)])):f("",!0),null!==(n=O.value.countries)&&void 0!==n&&n.length?(c(),d("li",Uo,[t[22]||(t[22]=u("strong",null,"Страна производства:",-1)),v(" "+m(O.value.countries.map((e=>e.country)).join(", ")),1)])):f("",!0),null!==(o=O.value.genres)&&void 0!==o&&o.length?(c(),d("li",Oo,[t[23]||(t[23]=u("strong",null,"Жанры:",-1)),v(" "+m(O.value.genres.map((e=>e.genre)).join(", ")),1)])):f("",!0),O.value.film_length?(c(),d("li",$o,[t[24]||(t[24]=u("strong",null,"Продолжительность:",-1)),v(" "+m(J(O.value.film_length)),1)])):f("",!0)]),u("div",Bo,[O.value.description?(c(),d("p",Do,m(O.value.description),1)):f("",!0)])])])]),G.value?(c(),d("div",Ho,[(c(),M(qn,{"movie-id":E.value,key:E.value},null,8,["movie-id"]))])):f("",!0),O.value.staff?(c(),d("div",No,[u("div",Fo,[Le("ACTOR").length?(c(),d("div",Vo,[t[26]||(t[26]=u("h3",{class:"additional-info-title"},"Актёры",-1)),u("div",qo,[(c(!0),d(p,null,b(Le("ACTOR").slice(0,12),(e=>(c(),d("div",{key:e.staff_id,class:"staff-item"},[u("a",{href:`https://www.kinopoisk.ru/name/${e.staff_id}/`,target:"_blank",rel:"noopener noreferrer",class:"staff-link",title:e.description||""},[u("img",{src:e.poster_url,alt:e.name_ru,class:"staff-photo"},null,8,Yo),u("span",Wo,m(e.name_ru||e.name_en),1),e.description?(c(),d("span",Go,m(e.description),1)):f("",!0)],8,Ko)])))),128)),u("a",{class:"expand-actors-circle-button",href:`https://www.kinopoisk.ru/film/${E.value}/cast/`,target:"_blank",rel:"noopener noreferrer",title:`Показать всех ${Le("ACTOR").length} актеров`}," +"+m(Le("ACTOR").length-12),9,Zo)])])):f("",!0),Le("DIRECTOR").length?(c(),d("div",Xo,[t[27]||(t[27]=u("h3",{class:"additional-info-title"},"Режиссёры",-1)),u("div",Qo,[u("div",Jo,[(c(!0),d(p,null,b(Le("DIRECTOR").slice(0,5),(e=>(c(),d("a",{key:e.staff_id,href:`https://www.kinopoisk.ru/name/${e.staff_id}/`,target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},m(e.name_ru||e.name_en),9,er)))),128)),Le("DIRECTOR").length>5?(c(),d("a",{key:0,class:"expand-actors-circle-button",href:`https://www.kinopoisk.ru/film/${E.value}/cast/`,target:"_blank",rel:"noopener noreferrer",title:`Показать всех ${Le("DIRECTOR").length} режиссёров`}," +"+m(Le("DIRECTOR").length-5),9,tr)):f("",!0)])])])):f("",!0),Le("PRODUCER").length?(c(),d("div",ar,[t[28]||(t[28]=u("h3",{class:"additional-info-title"},"Продюсеры",-1)),u("div",nr,[u("div",or,[(c(!0),d(p,null,b(Le("PRODUCER").slice(0,5),(e=>(c(),d("a",{key:e.staff_id,href:`https://www.kinopoisk.ru/name/${e.staff_id}/`,target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},m(e.name_ru||e.name_en),9,rr)))),128)),Le("PRODUCER").length>5?(c(),d("a",{key:0,class:"expand-actors-circle-button",href:`https://www.kinopoisk.ru/film/${E.value}/cast/`,target:"_blank",rel:"noopener noreferrer",title:`Показать всех ${Le("PRODUCER").length} продюсеров`}," +"+m(Le("PRODUCER").length-5),9,ir)):f("",!0)])])])):f("",!0)])])):f("",!0),ke.value.length&&R(H)?(c(),d("div",lr,[j(Zt,{videos:ke.value,"active-video-index":N.value,onSelect:e.playTrailer},null,8,["videos","active-video-index","onSelect"])])):f("",!0),ye.value.length?(c(),d("div",sr,[t[29]||(t[29]=u("h2",null,"Сиквелы и приквелы",-1)),j(R(ce),{"movies-list":F.value?ye.value:ye.value.slice(0,q.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),ye.value.length>q.value?(c(),d("a",{key:0,class:"expand-circle-button",onClick:t[2]||(t[2]=e=>F.value=!F.value),title:`${F.value?"Скрыть":"Показать все"} (${ye.value.length})`},m(F.value?"−":"+"+(ye.value.length-q.value)),9,dr)):f("",!0)])):f("",!0),we.value.length?(c(),d("div",cr,[t[30]||(t[30]=u("h2",null,"Похожие",-1)),j(R(ce),{"movies-list":V.value?we.value:we.value.slice(0,q.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),we.value.length>q.value?(c(),d("a",{key:0,class:"expand-circle-button",onClick:t[3]||(t[3]=e=>V.value=!V.value),title:`${V.value?"Скрыть":"Показать все"} (${we.value.length})`},m(V.value?"−":"+"+(we.value.length-q.value)),9,ur)):f("",!0)])):f("",!0)])):f("",!0)])]),j(ve,{ref_key:"notificationRef",ref:be},null,512)],64)}}};e("default",o(vr,[["__scopeId","data-v-b3605321"]]))}}}))}();
