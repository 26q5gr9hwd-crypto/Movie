import{_ as fe,r as c,c as T,b as a,d as l,e as t,s as x,t as d,K as le,g as u,L as ke,n as U,q as Ge,u as Ae,N as De,l as ie,o as Me,O as Ne,x as ae,E as Ke,f as se,P as we,m as A,Q as M,R as Fe,D as $e,S as Te,i as Ze,V as je,W as Qe,a as Xe,X as Pe,y as F,U as K,Y as Se,Z as Je,$ as et,a0 as Re,a1 as tt}from"./index-DxHyb2G3.js";import{S as Ue,_ as xe,a as Le,M as Ie}from"./MovieList-CPBJw7MU.js";import{N as Ve}from"./ToastMessage-B2vhVD5G.js";import{u as ot,S as st,a as lt}from"./trailer-DY01v-NL.js";const ne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVR4nO2ZQUoDMRSGR7eewHoFsVS0HkUUXNXqASqK2EURBPFIVRe6c+UN1CvUXWvbT4KvMAwzNnnJdCrmg1BKad7/v7y0b5IkiUQiCwGoAx3gQjEugZ0qxTeAIX6MKjMBnBOGS62AVWAPOHVYdlMu9YArYOhphLeBT+ALmOKGEd2QubaAK+B2zngFxt4GgDXgGZjgR8ch5oEkCi8DkvlnRcYLV0Apfqw10M7JvPkV6AN3FmVwK+WyZRnvMEe8ef/ibECyb2o+zRuwnpQAxeLNivQ0BvYyE46qEJ/8fK4ycJKp/X4V4n0MdDNfukkqEO9jwP1LDgD7BeKPgmgp04CL+KUz4Cp+qQxoxC+NAdsNm4c0hWkukkUa8BGfegiadbFDq3/2UAZ8xc+QVvzMtqcKYkBaZ5/MN5xEl2DgLGDZ1KswsC09FPJqXTZoNm5oA6kyMGI2FxqfkluJ0uMTDfhBXAHiHvCCWEL8/RLqlv1MPCf+TSZ+13WC7KnEfWlqcwAeU7GNjnbiQsG5UC1ZAEAt1UMhOpquk6zknMy9l20C2AA+MnEHRo9msuOCs9EH4Fp5TVQ0rqVs0plH4re02Qh1Oq1lCjypsp+5H3gKcD/gykTirqnFZ/ZDy+OGxpapzD+QePrM/2KkKfcGPcv7AdvRkz23G1x4JPIP+AY3r/ywUk/2JAAAAABJRU5ErkJggg==",nt="/reyohoho/assets/icon-shikimori-DGvXK9Jc.svg",he=Z=>{const f=document.createElement("div");f.style.position="fixed",f.style.top="0",f.style.left="0",f.style.width="100%",f.style.height="100%",f.style.backgroundColor="rgba(0, 0, 0, 0.8)",f.style.color="white",f.style.display="flex",f.style.justifyContent="center",f.style.alignItems="center",f.style.fontSize="2rem",f.style.zIndex="99000",f.textContent=Z,document.body.appendChild(f),setTimeout(()=>{document.body.removeChild(f)},2e3)},at={class:"modal-content"},it={key:0},rt={key:1},ut={class:"players-list"},vt=["onClick"],dt={key:0,class:"warning-icon material-icons",title:"Внимание!"},ct={key:0},mt={key:0,class:"warning-icon material-icons",title:"Внимание!"},pt={key:1},kt={key:0,class:"warning-icon material-icons",title:"Внимание!"},ft=["onClick"],_t={key:0,class:"warning-icon material-icons",title:"Внимание!"},yt={__name:"PlayerModal",props:{players:{type:Array,required:!0},selectedPlayer:{type:Object,default:null}},emits:["close","select"],setup(Z,{emit:f}){const S=Z,C=f,w=c(null),Y=T(()=>S.players.filter(n=>!P(n)&&!e(n))),_=T(()=>S.players.some(n=>P(n))),E=T(()=>S.players.some(n=>e(n))),P=n=>n.key.toUpperCase().includes("HDREZKA"),e=n=>n.key.toUpperCase().includes("KODIK"),$=n=>n.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"").replace(/KODIK>/,"").trim(),h=n=>{C("select",n),C("close")},D=n=>S.selectedPlayer&&S.selectedPlayer.key===n.key,z=n=>{w.value=n},y=()=>{w.value=null},V=n=>{let r=S.players.filter(m=>n==="hdrezka"&&P(m)||n==="kodik"&&e(m));return n==="kodik"?r.sort((m,O)=>$(m.translate).localeCompare($(O.translate))):r},k=n=>V(n).some(r=>r.warning);return(n,r)=>(l(),a("div",{class:"modal",onClick:r[3]||(r[3]=Ge(m=>n.$emit("close"),["self"]))},[t("div",at,[t("button",{class:"close",onClick:r[0]||(r[0]=m=>n.$emit("close"))},"×"),w.value?(l(),a("h2",rt,[t("button",{class:"back-btn",onClick:y},"← Назад"),x(" "+d(w.value==="hdrezka"?"ReYohoho - HDrezka":"Kodik"),1)])):(l(),a("h2",it,"Выберите плеер")),t("ul",ut,[w.value?(l(!0),a(le,{key:1},ke(V(w.value),m=>(l(),a("li",{key:m.key},[t("button",{class:U(["player-item",{active:D(m)}]),onClick:O=>h(m)},[x(d($(m.translate))+" ",1),m.warning?(l(),a("span",_t,"warning")):u("",!0)],10,ft)]))),128)):(l(),a(le,{key:0},[(l(!0),a(le,null,ke(Y.value,m=>(l(),a("li",{key:m.key},[t("button",{class:U(["player-item",{active:D(m)}]),onClick:O=>h(m)},[x(d($(m.translate))+" ",1),m.warning?(l(),a("span",dt,"warning")):u("",!0)],10,vt)]))),128)),_.value?(l(),a("li",ct,[t("button",{class:"group-item",onClick:r[1]||(r[1]=m=>z("hdrezka"))},[r[4]||(r[4]=t("span",{class:"material-icons group-icon"},"folder",-1)),r[5]||(r[5]=x(" ReYohoho - HDrezka ")),k("hdrezka")?(l(),a("span",mt,"warning")):u("",!0)])])):u("",!0),E.value?(l(),a("li",pt,[t("button",{class:"group-item",onClick:r[2]||(r[2]=m=>z("kodik"))},[r[6]||(r[6]=t("span",{class:"material-icons group-icon"},"folder",-1)),r[7]||(r[7]=x(" Kodik ")),k("kodik")?(l(),a("span",kt,"warning")):u("",!0)])])):u("",!0)],64))])])]))}},gt=fe(yt,[["__scopeId","data-v-7e4f2528"]]),bt={class:"players-list"},ht=["src"],wt={key:1,class:"controls"},$t={class:"tooltip-container"},At={class:"material-icons"},Mt={class:"tooltip-container"},Ct={class:"tooltip-container"},Et={class:"tooltip-container"},Tt={class:"tooltip-container"},Pt={class:"material-symbols-outlined"},St=["onMouseenter","onClick"],Rt={key:0,class:"tooltip-container"},xt={class:"custom-tooltip"},Lt={key:1,class:"tooltip-container"},It={class:"custom-tooltip"},Ht={__name:"PlayerComponent",props:{kpId:String},emits:["update:selectedPlayer"],setup(Z,{emit:f}){const S=Ae(),C=ot(),w=De(),Y=c(w.params.kp_id),_=Z,E=f,P=c([]),e=c(null),$=c(!0),h=c(!1),D=c(!1),z=c(null),y=c(null),V=c(!1),k=c(""),n=c(null),r=c(window.innerHeight*.9),m=T(()=>"".concat(r.value,"px")),O=T(()=>S.isMobile),H=T(()=>!!window.electronAPI),b=c(null),X=c(!1);let W=null;const re=c(null),B=v=>{b.value=v,X.value=!1,clearTimeout(W)},J=()=>{X.value||(W=setTimeout(()=>{b.value=null},300))},ue=()=>{X.value=!0,clearTimeout(W)},de=()=>{X.value=!1,b.value=null},j=T({get:()=>C.aspectRatio,set:v=>C.updateAspectRatio(v)}),Q=T({get:()=>C.isCentered,set:v=>C.updateCentering(v)}),i=T(()=>C.preferredPlayer),o=c(0),R=v=>v.toUpperCase(),L=()=>{if(h.value||!y.value)return;const[v,s]=j.value.split(":").map(Number);r.value=window.innerHeight*.9,o.value=Math.min(y.value.clientWidth*(s/v),r.value)},p=T(()=>{if(h.value)return{};const[v,s]=j.value.split(":").map(Number),G=r.value*(v/s);return{width:"100%",maxWidth:"".concat(G,"px"),maxHeight:m.value,margin:"0 auto",overflow:"hidden"}}),ee=T(()=>{const[v,s]=j.value.split(":").map(Number);return{position:"relative",width:"100%",paddingTop:"".concat(s/v*100,"%")}}),q=()=>{y.value&&Te(()=>{y.value.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})},te=async()=>{try{k.value="",n.value=null;const v=await Fe(_.kpId);if(P.value=Object.entries(v).map(([s,G])=>({key:s.toUpperCase(),...G})),P.value.length>0){if(i.value){const s=R(i.value),G=P.value.find(pe=>R(pe.key)===s);e.value=G||P.value[0]}else e.value=P.value[0];E("update:selectedPlayer",e.value)}}catch(v){const{message:s,code:G}=$e(v);k.value=s,n.value=G,console.error("Ошибка при загрузке плееров:",v)}},oe=()=>{V.value=!0},I=()=>{V.value=!1},N=v=>{var s;if(((s=e.value)==null?void 0:s.key)===v.key){I();return}e.value=v,$.value=!0,C.updatePreferredPlayer(R(v.key)),E("update:selectedPlayer",v)},ce=()=>{H.value?window.electronAPI.sendHotKey("F2"):(he("Доступно только в приложении ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},ve=()=>{H.value?window.electronAPI.sendHotKey("F3"):(he("Доступно только в приложении ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},_e=()=>{H.value?window.electronAPI.sendHotKey("F4"):(he("Доступно только в приложении ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},ye=()=>{h.value=!h.value,h.value?(window.addEventListener("mousemove",ge),document.addEventListener("keydown",be),document.body.classList.add("no-scroll")):(window.removeEventListener("mousemove",ge),document.removeEventListener("keydown",be),document.body.classList.remove("no-scroll")),D.value=h.value,Te(()=>q())},Ce=c(null),ge=()=>{Ce.value=setTimeout(()=>{clearTimeout(Ce.value),D.value=!1},4e3),D.value=!0},me=T(()=>S.dimmingEnabled),Oe=()=>{h.value||S.toggleDimming()},be=v=>{v.key==="Escape"&&h.value&&ye()},Be=v=>{j.value=v,setTimeout(()=>{Q.value&&q()},310)},qe=()=>{const v="reyohoho://#".concat(Y.value);try{window.location.href=v}catch(s){console.error("Ошибка при открытии ссылки:",s)}},Ye=()=>{const v=window.location.href;navigator.clipboard.writeText(v).then(()=>{}),re.value.showNotification("Ссылка на фильм скопирована")},ze=()=>{$.value=!1};function We(v){return v.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"").replace(/KODIK>/,"KODIK - ").trim()}return ie(e,v=>{v&&($.value=!0,C.updatePreferredPlayer(R(v.key)),E("update:selectedPlayer",v))}),ie(()=>w.params.kp_id,async v=>{v&&v!==Y.value&&(Y.value=v,Q.value&&q())},{immediate:!0}),Me(()=>{$.value=!0,te(),O.value&&(j.value="4:3"),L(),window.addEventListener("resize",L),Q.value&&q()}),Ne(()=>{window.removeEventListener("resize",L),window.removeEventListener("mousemove",ge),document.removeEventListener("keydown",be),document.body.classList.remove("no-scroll")}),(v,s)=>{var G,pe;return k.value?(l(),ae(Ke,{key:0,message:k.value,code:n.value},null,8,["message","code"])):(l(),a(le,{key:1},[t("div",bt,[s[17]||(s[17]=t("span",null,"Плеер:",-1)),t("button",{class:"player-btn",onClick:oe},d(e.value?We(e.value.translate).toUpperCase():"Загрузка плееров..."),1)]),V.value?(l(),ae(gt,{key:0,players:P.value,"selected-player":e.value,onClose:I,onSelect:N},null,8,["players","selected-player"])):u("",!0),t("div",{ref_key:"containerRef",ref:y,class:U(["player-container",{"theater-mode":h.value}]),style:we(h.value?{}:p.value)},[t("div",{class:"iframe-wrapper",style:we(h.value?{}:ee.value)},[A(t("iframe",{ref_key:"playerIframe",ref:z,src:(G=e.value)==null?void 0:G.iframe,frameborder:"0",allowfullscreen:"",webkitallowfullscreen:"",class:U(["responsive-iframe",{"theater-mode-unlock":D.value,"theater-mode-lock":h.value,dimmed:me.value}]),onLoad:ze},null,42,ht),[[M,!$.value&&((pe=e.value)==null?void 0:pe.iframe)]]),$.value?(l(),ae(Ue,{key:0})):u("",!0)],4),h.value?(l(),a("button",{key:0,class:U(["close-theater-btn",{visible:D.value}]),onClick:ye}," ✖ ",2)):u("",!0)],6),O.value?u("",!0):(l(),a("div",wt,[t("div",$t,[t("button",{class:U(["dimming-btn",{active:me.value}]),onMouseenter:s[0]||(s[0]=g=>B("dimming")),onMouseleave:s[1]||(s[1]=g=>b.value=null),onClick:Oe},[t("span",At,d(me.value?"light_mode":"dark_mode"),1)],34),A(t("div",{class:"custom-tooltip"},d(me.value?"Отключить затемнение":"Включить затемнение"),513),[[M,b.value==="dimming"]])]),t("div",Mt,[t("button",{class:"blur-btn",onMouseenter:s[2]||(s[2]=g=>B("blur")),onMouseleave:s[3]||(s[3]=g=>b.value=null),onClick:ce},s[18]||(s[18]=[t("span",{class:"material-icons"},"blur_on",-1)]),32),A(t("div",{class:"custom-tooltip"},d(H.value?"Блюр":"Блюр, функция доступна в приложении"),513),[[M,b.value==="blur"]])]),t("div",Ct,[t("button",{class:"material-symbols-outlined",onMouseenter:s[4]||(s[4]=g=>B("compressor")),onMouseleave:s[5]||(s[5]=g=>b.value=null),onClick:ve},s[19]||(s[19]=[t("span",{class:"material-icons"},"graphic_eq",-1)]),32),A(t("div",{class:"custom-tooltip"},d(H.value?"Компрессор":"Компрессор, функция доступна в приложении"),513),[[M,b.value==="compressor"]])]),t("div",Et,[t("button",{class:"mirror-btn",onMouseenter:s[6]||(s[6]=g=>B("mirror")),onMouseleave:s[7]||(s[7]=g=>b.value=null),onClick:_e},s[20]||(s[20]=[t("span",{class:"material-icons"},"flip",-1)]),32),A(t("div",{class:"custom-tooltip"},d(H.value?"Зеркало":"Зеркало, функция доступна в приложении"),513),[[M,b.value==="mirror"]])]),t("div",Tt,[t("button",{class:"theater-mode-btn",onMouseenter:s[8]||(s[8]=g=>B("theater")),onMouseleave:s[9]||(s[9]=g=>b.value=null),onClick:ye},[t("span",Pt,d(h.value?"fullscreen_exit":"aspect_ratio"),1)],32),A(t("div",{class:"custom-tooltip"},d(h.value?"Выйти из театрального режима":"Театральный режим"),513),[[M,b.value==="theater"]])]),(l(),a(le,null,ke(["16:9","12:5","4:3"],g=>t("div",{key:g,class:"tooltip-container"},[t("button",{class:U(["aspect-ratio-btn",{active:j.value===g}]),onMouseenter:Ee=>B(g),onMouseleave:s[10]||(s[10]=Ee=>b.value=null),onClick:Ee=>Be(g)},d(g),43,St),A(t("div",{class:"custom-tooltip"}," Установить соотношение "+d(g),513),[[M,b.value===g]])])),64)),t("div",{class:"tooltip-container",onMouseenter:s[12]||(s[12]=g=>B("centering")),onMouseleave:J},[t("button",{class:"center-btn",onClick:q},s[21]||(s[21]=[t("span",{class:"material-icons"},"center_focus_strong",-1)])),A(t("div",{class:"custom-tooltip advanced-tooltip",onMouseenter:ue,onMouseleave:de},[s[22]||(s[22]=x(" Отцентрировать плеер ")),se(st,{modelValue:Q.value,"onUpdate:modelValue":s[11]||(s[11]=g=>Q.value=g),title:"Автоцентрирование плеера"},null,8,["modelValue"]),s[23]||(s[23]=t("span",{class:"tooltip-title"},"Автоцентрирование плеера",-1))],544),[[M,b.value==="centering"]])],32),H.value?u("",!0):(l(),a("div",Rt,[t("button",{class:"app-link-btn",onMouseenter:s[13]||(s[13]=g=>B("app_link")),onMouseleave:s[14]||(s[14]=g=>b.value=null),onClick:qe},s[24]||(s[24]=[t("span",{class:"material-icons"},"open_in_new",-1)]),32),A(t("div",xt,"Открыть в приложении",512),[[M,b.value==="app_link"]])])),H.value?(l(),a("div",Lt,[t("button",{class:"copy-link-btn",onMouseenter:s[15]||(s[15]=g=>B("copy_link")),onMouseleave:s[16]||(s[16]=g=>b.value=null),onClick:Ye},s[25]||(s[25]=[t("span",{class:"material-icons"},"content_copy",-1)]),32),A(t("div",It,"Скопировать ссылку",512),[[M,b.value==="copy_link"]])])):u("",!0)])),se(Ve,{ref_key:"notificationRef",ref:re},null,512)],64))}}},He=fe(Ht,[["__scopeId","data-v-527fa1fd"]]),Dt={key:0,class:"carousel-container"},Nt={class:"carousel-wrapper"},Kt=["onClick"],Ut=["src","alt"],Vt={class:"video-name"},Ot={key:0,class:"video-player"},Bt=["src"],qt={__name:"TrailerCarousel",props:{videos:{type:Array,required:!0},activeVideoIndex:{type:Number,default:null}},emits:["select"],setup(Z,{emit:f}){const S=Ae(),C=T(()=>S.isMobile),w=Z,Y=f,_=c(w.activeVideoIndex),E=c(null),P=c(!1),e=c(!1),$=()=>{if(!E.value)return;const{scrollLeft:k,scrollWidth:n,clientWidth:r}=E.value;P.value=k>0,e.value=k<n-r-1},h=k=>{if(!E.value)return;const n=E.value.querySelector(".carousel-item");if(!n)return;const r=n.clientWidth+16;E.value.scrollBy({left:r*k,behavior:"smooth"})},D=k=>{_.value=k,Y("select",w.videos[k])},z=()=>$(),y=c([]),V=async k=>{try{return(await fetch("https://img.youtube.com/vi/".concat(k,"/0.jpg"))).ok}catch(n){return!1}};return Me(async()=>{const k=w.videos.map(async r=>await V(r.videoId)?r:null),n=await Promise.all(k);y.value=n.filter(Boolean),$(),window.addEventListener("resize",z)}),ie(()=>w.videos,async k=>{const n=k.map(async m=>await V(m.videoId)?m:null),r=await Promise.all(n);y.value=r.filter(Boolean)}),ie(()=>w.activeVideoIndex,k=>{_.value=k}),Ne(()=>{window.removeEventListener("resize",z)}),(k,n)=>y.value.length?(l(),a("div",Dt,[n[4]||(n[4]=t("h2",null,"Трейлеры (YouTube)",-1)),t("div",Nt,[A(t("button",{class:"scroll-button left",onClick:n[0]||(n[0]=r=>h(-1))},n[2]||(n[2]=[t("span",{class:"material-symbols-outlined"},"arrow_back_ios",-1)]),512),[[M,!C.value&&P.value]]),t("div",{ref_key:"carousel",ref:E,class:"carousel",onScroll:$},[(l(!0),a(le,null,ke(y.value,(r,m)=>(l(),a("div",{key:m,class:"carousel-item",onClick:O=>D(m)},[t("img",{src:"https://img.youtube.com/vi/".concat(r.videoId,"/0.jpg"),alt:r.name},null,8,Ut),t("div",Vt,d(r.name),1)],8,Kt))),128))],544),A(t("button",{class:"scroll-button right",onClick:n[1]||(n[1]=r=>h(1))},n[3]||(n[3]=[t("span",{class:"material-symbols-outlined"},"arrow_forward_ios",-1)]),512),[[M,!C.value&&e.value]])]),_.value!==null?(l(),a("div",Ot,[t("iframe",{src:Z.videos[_.value].iframeUrl,frameborder:"0",allowfullscreen:""},null,8,Bt)])):u("",!0)])):u("",!0)}},Yt=fe(qt,[["__scopeId","data-v-5d54158b"]]),zt={class:"movie-info"},Wt={class:"content"},Gt={key:0,class:"content-card"},Ft={class:"movie-skeleton"},Zt={class:"movie-skeleton__player"},jt={key:2,class:"content-card"},Qt={key:3,class:"content-card"},Xt={class:"content-header"},Jt=["src"],eo={class:"content-title"},to={key:0,class:"ratings-links"},oo={key:0},so=["href"],lo={key:0},no={key:1},ao=["href"],io={key:0},ro={key:2},uo=["href"],vo={key:0},co={key:3},mo=["href"],po={key:0},ko={key:4},fo=["href"],_o={key:5},yo=["href"],go=["content"],bo=["content"],ho={class:"additional-info"},wo={class:"controls"},$o={class:"tooltip-container"},Ao={class:"material-icons"},Mo={class:"custom-tooltip"},Co={class:"tooltip-container"},Eo={class:"material-icons"},To={class:"custom-tooltip"},Po={class:"tooltip-container"},So={class:"custom-tooltip"},Ro={class:"tooltip-container"},xo={class:"material-icons"},Lo={class:"custom-tooltip"},Io={class:"tooltip-container"},Ho={class:"material-icons"},Do={class:"custom-tooltip"},No={class:"info-content"},Ko={class:"details-container"},Uo={class:"info-list"},Vo={key:0},Oo={key:1},Bo={key:2},qo={key:3},Yo={key:4},zo={key:5},Wo={key:6},Go={key:7},Fo={key:8},Zo={class:"content-info"},jo={key:0,class:"content-description-text"},Qo={key:2,class:"yt-video-container"},Xo={key:3,class:"related-movies"},Jo={key:4,class:"related-movies"},es={__name:"MovieInfo",setup(Z){const f=c(!0),S=Ae(),C=Ze(),w=je(),Y=De(),_=c(Y.params.kp_id),E=c(""),P=c(null),e=c(null),$=Qe(),D=lt().areTrailersActive,z=c(null),y=c(null),V=c(!1);let k=null;const n=i=>{y.value=i,V.value=!1,clearTimeout(k)},r=()=>{if(e.value){const i=e.value.name_ru||e.value.name_en||e.value.name_original||"Информация о фильме";document.title=i}},m=i=>(i||[]).map(o=>({kp_id:o.film_id,poster:o.poster_url_preview||o.poster_url,title:o.name_ru||o.name_en||o.name_original})),O=i=>{if(typeof i!="number")return;const o=Math.floor(i/60),R=i%60;return"".concat(o," ч. ").concat(R," мин.")},H=c(!1),b=c({top:"0px",left:"0px"}),X=i=>{H.value=!0,b.value={top:"".concat(i.pageY+10,"px"),left:"".concat(i.pageX-70,"px")}},W=c(null),re=async()=>{try{const i=[e.value.name_ru||e.value.name_en||e.value.name_original,...e.value.year?[e.value.year]:[],...e.value.film_length?[O(e.value.film_length)]:[]];await navigator.clipboard.writeText(i.join(", ")),W.value.showNotification("Скопировано")}catch(i){console.error("Ошибка копирования:",i)}},B=(i,o)=>{var L,p,ee,q,te,oe,I;return(I={[K.FAVORITE]:((L=i.lists)==null?void 0:L.isFavorite)||!1,[K.HISTORY]:((p=i.lists)==null?void 0:p.isHistory)||!1,[K.LATER]:((ee=i.lists)==null?void 0:ee.isLater)||!1,[K.COMPLETED]:((q=i.lists)==null?void 0:q.isCompleted)||!1,[K.ABANDONED]:((te=i.lists)==null?void 0:te.isAbandoned)||!1,[K.WATCHING]:((oe=i.lists)==null?void 0:oe.isWatching)||!1}[o])!=null?I:!1},J=async i=>{if(!C.token){W.value.showNotification("Необходимо авторизоваться",5e3);return}try{B(e.value,i)?(await tt(_.value,i),W.value.showNotification("Удалено")):(await Re(_.value,i),W.value.showNotification("Добавлено"))}catch(o){const{message:R,code:L}=$e(o);W.value.showNotification("".concat(R," ").concat(L))}await ue(!1)},ue=async(i=!0)=>{var o,R,L,p,ee,q,te,oe;try{let I;if(_.value.startsWith("shiki")?I=await Je(_.value):I=await et(_.value,C.token),Array.isArray(I)&&I.length===0)throw new Error("Данные не найдены. Пожалуйста, повторите поиск.");e.value=I,_.value.startsWith("shiki")?e.value={...e.value,title:e.value.name_ru||e.value.name_en,name_original:e.value.name_en,short_description:e.value.slogan}:e.value={...e.value,title:e.value.name_ru||e.value.name_en||e.value.name_original,kinopoisk_id:_.value},$.setHeaderContent({text:e.value.title,imageUrl:e.value.logo_url}),r();const N={kp_id:_.value,title:((o=e.value)==null?void 0:o.name_ru)||((R=e.value)==null?void 0:R.name_en)||((L=e.value)==null?void 0:L.name_original),poster:((p=e.value)==null?void 0:p.poster_url)||((ee=e.value)==null?void 0:ee.cover_url)||((q=e.value)==null?void 0:q.screenshots[0]),year:(te=e.value)==null?void 0:te.year,type:(oe=e.value)==null?void 0:oe.type};if(_.value.startsWith("shiki"))if(e.value.screenshots&&e.value.screenshots.length>0){const ve=Math.floor(Math.random()*e.value.screenshots.length),_e=e.value.screenshots[ve];w.updateMoviePoster(_e)}else N.poster&&w.updateMoviePoster(N.poster);else N.poster&&w.updateMoviePoster(N.poster);if(T(()=>S.isHistoryAllowed).value&&N.kp_id&&N.title&&i)if(C.token)try{await Re(N.kp_id,K.HISTORY)}catch(ve){console.error("Ошибка при добавлении в историю:",ve)}else S.addToHistory({...N})}catch(I){const{message:N,code:ce}=$e(I);E.value=N,P.value=ce,console.error("Ошибка при загрузке информации о фильмах:",I)}},de=T(()=>{var i,o;return console.log("Трейлеры:",(i=e.value)==null?void 0:i.videos),(o=e.value)==null?void 0:o.videos}),j=T(()=>{var i;return m((i=e.value)==null?void 0:i.sequels_and_prequels)}),Q=T(()=>{var i;return m((i=e.value)==null?void 0:i.similars)});return Me(async()=>{await ue(),f.value=!1}),Xe(async()=>{$.clearHeaderContent()}),ie(()=>Y.params.kp_id,async i=>{i&&i!==_.value&&($.clearHeaderContent(),_.value=i,z.value=null,await ue(),f.value=!1)},{immediate:!0}),ie(e,()=>{r()},{deep:!0}),(i,o)=>{var R,L;return l(),a(le,null,[t("div",zt,[t("div",Wt,[f.value?(l(),a("div",Gt,[t("div",Ft,[o[17]||(o[17]=Pe('<div class="movie-skeleton__header" data-v-dad3affb><div class="movie-skeleton__title" data-v-dad3affb></div></div><div class="movie-skeleton__ratings" data-v-dad3affb><div class="movie-skeleton__rating-item" data-v-dad3affb></div><div class="movie-skeleton__rating-item" data-v-dad3affb></div><div class="movie-skeleton__rating-item" data-v-dad3affb></div></div>',2)),t("div",Zt,[se(Ue)]),o[18]||(o[18]=Pe('<div class="movie-skeleton__controls" data-v-dad3affb><div class="movie-skeleton__control-btn" data-v-dad3affb></div><div class="movie-skeleton__control-btn" data-v-dad3affb></div><div class="movie-skeleton__control-btn" data-v-dad3affb></div><div class="movie-skeleton__control-btn" data-v-dad3affb></div><div class="movie-skeleton__control-btn" data-v-dad3affb></div></div><div class="movie-skeleton__additional-info" data-v-dad3affb><div class="movie-skeleton__section-title" data-v-dad3affb></div><div class="movie-skeleton__info-list" data-v-dad3affb><div class="movie-skeleton__info-item" data-v-dad3affb></div><div class="movie-skeleton__info-item" data-v-dad3affb></div><div class="movie-skeleton__info-item" data-v-dad3affb></div><div class="movie-skeleton__info-item" data-v-dad3affb></div><div class="movie-skeleton__info-item" data-v-dad3affb></div></div></div><div class="movie-skeleton__description" data-v-dad3affb><div class="movie-skeleton__description-line" data-v-dad3affb></div><div class="movie-skeleton__description-line" data-v-dad3affb></div><div class="movie-skeleton__description-line" data-v-dad3affb></div><div class="movie-skeleton__description-line" data-v-dad3affb></div></div>',3))])])):u("",!0),E.value?(l(),ae(Ke,{key:1,message:E.value,code:P.value},null,8,["message","code"])):u("",!0),E.value?(l(),a("div",jt,[(l(),ae(He,{key:_.value,"kp-id":_.value},null,8,["kp-id"]))])):u("",!0),e.value?(l(),a("div",Qt,[t("div",Xt,[e.value.logo_url?(l(),a("div",{key:0,class:"content-logo",onMousemove:X,onMouseleave:o[0]||(o[0]=p=>H.value=!1),onClick:re},[t("img",{src:e.value.logo_url,alt:"Логотип фильма",class:"content-logo"},null,8,Jt)],32)):(l(),a("div",{key:1,onMousemove:X,onMouseleave:o[1]||(o[1]=p=>H.value=!1),onClick:re},[t("h1",eo,d(e.value.title),1)],32)),A(t("div",{class:"title-copy-tooltip",style:we(b.value)}," Скопировать ",4),[[M,H.value]])]),e.value.kinopoisk_id||e.value.title||e.value.imdb_id||e.value.rating_imdb||e.value.shikimori_id?(l(),a("div",to,[e.value.kinopoisk_id?(l(),a("div",oo,[t("a",{href:"https://www.kinopoisk.ru/film/".concat(e.value.kinopoisk_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},[o[19]||(o[19]=t("img",{src:xe,alt:"КП",class:"rating-logo"},null,-1)),e.value.rating_kinopoisk?(l(),a("span",lo,d(e.value.rating_kinopoisk)+"/10",1)):u("",!0),o[20]||(o[20]=t("img",{src:ne,alt:"Внешняя ссылка",class:"external-link-icon"},null,-1))],8,so)])):u("",!0),!e.value.kinopoisk_id&&e.value.title?(l(),a("div",no,[t("a",{href:"https://www.kinopoisk.ru/index.php?kp_query=".concat(encodeURIComponent(e.value.title+(e.value.year?" "+e.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},[o[21]||(o[21]=t("img",{src:xe,alt:"КП",class:"rating-logo"},null,-1)),e.value.rating_kinopoisk?(l(),a("span",io,d(e.value.rating_kinopoisk)+"/10",1)):u("",!0),o[22]||(o[22]=t("img",{src:ne,alt:"Внешняя ссылка",class:"external-link-icon"},null,-1))],8,ao)])):u("",!0),e.value.imdb_id?(l(),a("div",ro,[t("a",{href:"https://www.imdb.com/title/".concat(e.value.imdb_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},[o[23]||(o[23]=t("img",{src:Le,alt:"IMDb",class:"rating-logo"},null,-1)),e.value.rating_imdb?(l(),a("span",vo,d(e.value.rating_imdb)+"/10",1)):u("",!0),o[24]||(o[24]=t("img",{src:ne,alt:"Внешняя ссылка",class:"external-link-icon"},null,-1))],8,uo)])):u("",!0),!e.value.imdb_id&&e.value.title?(l(),a("div",co,[t("a",{href:"https://www.imdb.com/find/?q=".concat(encodeURIComponent(e.value.title+(e.value.year?" "+e.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},[o[25]||(o[25]=t("img",{src:Le,alt:"IMDb",class:"rating-logo"},null,-1)),e.value.rating_imdb?(l(),a("span",po,d(e.value.rating_imdb)+"/10",1)):u("",!0),o[26]||(o[26]=t("img",{src:ne,alt:"Внешняя ссылка",class:"external-link-icon"},null,-1))],8,mo)])):u("",!0),e.value.shikimori_id?(l(),a("div",ko,[t("a",{href:"https://shikimori.one/animes/".concat(e.value.shikimori_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},o[27]||(o[27]=[t("img",{src:nt,alt:"Shiki",class:"rating-logo"},null,-1),t("img",{src:ne,alt:"Внешняя ссылка",class:"external-link-icon"},null,-1)]),8,fo)])):u("",!0),e.value.imdb_id?(l(),a("div",_o,[t("a",{href:"https://www.imdb.com/title/".concat(e.value.imdb_id,"/parentalguide"),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},o[28]||(o[28]=[t("span",null,"Parents Guide",-1),t("img",{src:ne,alt:"Внешняя ссылка",class:"external-link-icon"},null,-1)]),8,yo)])):u("",!0)])):u("",!0),(l(),ae(He,{key:_.value,"kp-id":_.value},null,8,["kp-id"])),t("meta",{name:"title-and-year",content:e.value.type==="FILM"&&e.value.year?"".concat(e.value.title," (").concat(e.value.year,")"):e.value.title},null,8,go),e.value.name_original?(l(),a("meta",{key:1,name:"original-title",content:e.value.name_original},null,8,bo)):u("",!0),t("div",ho,[t("div",wo,[t("div",$o,[t("button",{class:U(["favorite-btn",{active:e.value.lists.isFavorite}]),onMouseenter:o[2]||(o[2]=p=>n("favorite")),onMouseleave:o[3]||(o[3]=p=>y.value=null),onClick:o[4]||(o[4]=p=>J(F(K).FAVORITE))},[t("span",Ao,d(e.value.lists.isFavorite?"favorite":"favorite_border"),1)],34),A(t("div",Mo,d("В избранное"),512),[[M,y.value==="favorite"]])]),t("div",Co,[t("button",{class:U(["watching-btn",{active:e.value.lists.isWatching}]),onMouseenter:o[5]||(o[5]=p=>n("watching")),onMouseleave:o[6]||(o[6]=p=>y.value=null),onClick:o[7]||(o[7]=p=>J(F(K).WATCHING))},[t("span",Eo,d(e.value.lists.isWatching?"visibility":"visibility_off"),1)],34),A(t("div",To,d("Смотрю"),512),[[M,y.value==="watching"]])]),t("div",Po,[t("button",{class:U(["later-btn",{active:e.value.lists.isLater}]),onMouseenter:o[8]||(o[8]=p=>n("later")),onMouseleave:o[9]||(o[9]=p=>y.value=null),onClick:o[10]||(o[10]=p=>J(F(K).LATER))},o[29]||(o[29]=[t("span",{class:"material-icons"},d("watch_later"),-1)]),34),A(t("div",So,d("Смотреть позже"),512),[[M,y.value==="later"]])]),t("div",Ro,[t("button",{class:U(["completed-btn",{active:e.value.lists.isCompleted}]),onMouseenter:o[11]||(o[11]=p=>n("completed")),onMouseleave:o[12]||(o[12]=p=>y.value=null),onClick:o[13]||(o[13]=p=>J(F(K).COMPLETED))},[t("span",xo,d(e.value.lists.isCompleted?"check_circle":"check_circle_outline"),1)],34),A(t("div",Lo,d("Просмотрено"),512),[[M,y.value==="completed"]])]),t("div",Io,[t("button",{class:U(["abandoned-btn",{active:e.value.lists.isAbandoned}]),onMouseenter:o[14]||(o[14]=p=>n("abandoned")),onMouseleave:o[15]||(o[15]=p=>y.value=null),onClick:o[16]||(o[16]=p=>J(F(K).ABANDONED))},[t("span",Ho,d((e.value.lists.isAbandoned,"not_interested")),1)],34),A(t("div",Do,d("Брошено"),512),[[M,y.value==="abandoned"]])])]),o[39]||(o[39]=t("h2",{class:"additional-info-title"},"Подробнее",-1)),t("div",No,[t("div",Ko,[t("ul",Uo,[e.value.type&&F(Se)[e.value.type]?(l(),a("li",Vo,[o[30]||(o[30]=t("strong",null,"Тип:",-1)),x(" "+d(F(Se)[e.value.type]),1)])):u("",!0),e.value.year?(l(),a("li",Oo,[o[31]||(o[31]=t("strong",null,"Год выпуска:",-1)),x(" "+d(e.value.year),1)])):u("",!0),e.value.title?(l(),a("li",Bo,[o[32]||(o[32]=t("strong",null,"Название:",-1)),x(" "+d(e.value.title),1)])):u("",!0),e.value.name_original?(l(),a("li",qo,[o[33]||(o[33]=t("strong",null,"Оригинальное название:",-1)),x(" "+d(e.value.name_original),1)])):u("",!0),e.value.slogan?(l(),a("li",Yo,[o[34]||(o[34]=t("strong",null,"Слоган:",-1)),x(" "+d(e.value.slogan),1)])):u("",!0),e.value.production_companies?(l(),a("li",zo,[o[35]||(o[35]=t("strong",null,"Продакшн:",-1)),x(" "+d(e.value.production_companies),1)])):u("",!0),(R=e.value.countries)!=null&&R.length?(l(),a("li",Wo,[o[36]||(o[36]=t("strong",null,"Страна производства:",-1)),x(" "+d(e.value.countries.map(p=>p.country).join(", ")),1)])):u("",!0),(L=e.value.genres)!=null&&L.length?(l(),a("li",Go,[o[37]||(o[37]=t("strong",null,"Жанры:",-1)),x(" "+d(e.value.genres.map(p=>p.genre).join(", ")),1)])):u("",!0),e.value.film_length?(l(),a("li",Fo,[o[38]||(o[38]=t("strong",null,"Продолжительность:",-1)),x(" "+d(O(e.value.film_length)),1)])):u("",!0)])])])]),t("div",Zo,[e.value.description?(l(),a("p",jo,d(e.value.description),1)):u("",!0)]),de.value.length&&F(D)?(l(),a("div",Qo,[se(Yt,{videos:de.value,"active-video-index":z.value,onSelect:i.playTrailer},null,8,["videos","active-video-index","onSelect"])])):u("",!0),j.value.length?(l(),a("div",Xo,[o[40]||(o[40]=t("h2",null,"Сиквелы и приквелы",-1)),se(F(Ie),{"movies-list":j.value,loading:!1,"is-history":!1},null,8,["movies-list"])])):u("",!0),Q.value.length?(l(),a("div",Jo,[o[41]||(o[41]=t("h2",null,"Похожие",-1)),se(F(Ie),{"movies-list":Q.value,loading:!1,"is-history":!1},null,8,["movies-list"])])):u("",!0)])):u("",!0)])]),se(Ve,{ref_key:"notificationRef",ref:W},null,512)],64)}}},ns=fe(es,[["__scopeId","data-v-dad3affb"]]);export{ns as default};
//# sourceMappingURL=MovieInfo-CEgVnKMC.js.map
