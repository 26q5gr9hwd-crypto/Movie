import{_ as E,r as c,c as N,l as D,o as L,K as z,b as n,e as r,x as g,g as k,L as y,M as F,y as R,E as V,N as $,O as A,D as I,z as K,d as o,n as M,t as T}from"./index-DEMHk_JG.js";import{M as O}from"./MovieList-BnGs2x8G.js";import"./SpinnerLoading-BikovGeS.js";const S={class:"wrapper"},j={class:"top-100-page",tabindex:"0"},G={class:"controls"},H={class:"filter-card time-card"},J={class:"button-group time-buttons"},P={key:0,class:"filter-separator"},W=["disabled","onClick"],X={class:"filter-card type-card"},Y={class:"button-group type-buttons"},Z=["disabled","onClick"],Q={__name:"TopMovies",setup(ee){const m=c([]),u=c(!1),l=c("24h"),t=c("all"),v=c("all"),d=c(""),b=c(null),f=z(),h=K(),C=[{label:"24 часа",apiUrl:"24h"},{label:"7 дней",apiUrl:"7d"},{label:"30 дней",apiUrl:"30d"},{label:"Всё время",apiUrl:"all"},{label:"---",apiUrl:"separator",type:"separator"},{label:"Обсуждаемое",apiUrl:"discussed"}],U=[{label:"Все",value:"all"},{label:"Фильмы",value:"movie"},{label:"Сериалы",value:"series"}],q=[{label:"Горячее",value:"hot"},{label:"Недавнее",value:"recent"}],x=N(()=>l.value==="discussed"?q:U),_=async()=>{u.value=!0,d.value="",b.value=null;try{l.value==="discussed"?m.value=await $(t.value):m.value=await A({activeTime:l.value,typeFilter:t.value})}catch(a){const{message:e,code:s}=I(a);d.value=e,b.value=s,m.value=[]}finally{u.value=!1}},w=a=>{const e=l.value;l.value=a,a==="discussed"?(e!=="discussed"&&(v.value=t.value),t.value="hot"):e==="discussed"&&(t.value=v.value),h.push({query:{...f.query,time:l.value,type:t.value}}).then(()=>{_()})},B=a=>{t.value=a,l.value!=="discussed"&&(v.value=a),h.push({query:{...f.query,type:a}}).then(()=>{_()})};return D(()=>f.query,(a,e)=>{const{time:s,type:i}=a;let p=!1;(s!==(e==null?void 0:e.time)||i!==(e==null?void 0:e.type))&&(s&&s!==l.value&&(l.value=s,p=!0),i&&i!==t.value&&(t.value=i,s!=="discussed"&&(v.value=i),p=!0),p&&_())}),L(()=>{const{time:a,type:e}=f.query;a&&(l.value=a),e&&(t.value=e,a!=="discussed"&&(v.value=e)),_()}),(a,e)=>(o(),n("div",S,[r("div",j,[r("div",G,[r("div",H,[r("div",J,[e[0]||(e[0]=r("i",{class:"material-icons card-icon"},"schedule",-1)),(o(),n(y,null,F(C,(s,i)=>(o(),n(y,{key:i},[s.type==="separator"?(o(),n("div",P)):(o(),n("button",{key:1,class:M(["filter-btn time-btn",{active:l.value===s.apiUrl,disabled:u.value}]),disabled:u.value,onClick:p=>w(s.apiUrl)},T(s.label),11,W))],64))),64))])]),r("div",X,[r("div",Y,[e[1]||(e[1]=r("i",{class:"material-icons card-icon"},"movie",-1)),(o(!0),n(y,null,F(x.value,(s,i)=>(o(),n("button",{key:i,class:M(["filter-btn type-btn",{active:t.value===s.value,disabled:u.value}]),disabled:u.value,onClick:p=>B(s.value)},T(s.label),11,Z))),128))])])]),d.value?k("",!0):(o(),g(R(O),{key:0,"movies-list":m.value,"is-history":!1,loading:u.value},null,8,["movies-list","loading"])),d.value?(o(),g(V,{key:1,message:d.value,code:b.value},null,8,["message","code"])):k("",!0)])]))}},te=E(Q,[["__scopeId","data-v-3ca74666"]]);export{te as default};
