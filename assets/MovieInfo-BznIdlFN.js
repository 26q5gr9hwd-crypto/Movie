import{_ as _e,r as f,c as $,b as u,d as a,e as t,s as Q,t as v,K as te,g as h,L as ke,n as x,q as Fe,u as et,i as ut,N as go,z as ot,l as Ae,o as qe,O as dt,x as Re,E as yo,f as ne,P as tt,m as O,Q as G,y as X,U as q,R as _o,D as rt,S as ge,V as Mo,W as ho,X as Eo,Y as ro,Z as Lo,k as Io,v as Xe,$ as Ro,a0 as ye,a1 as Je,a2 as Po,a3 as So,a4 as To,a5 as Ao,a6 as uo,a7 as jo,a8 as Uo,a as xo,a9 as co,aa as Bo,ab as Ho,ac as $o}from"./index-BafblZo0.js";import{_ as No,a as mo,b as vo,M as fo}from"./MovieList-CdFisO22.js";import{S as bo}from"./SpinnerLoading-BcKN8fh-.js";import{N as nt}from"./ToastMessage-BJ9xMomj.js";import{u as Do,S as Fo,a as Vo}from"./trailer-DEQ773ha.js";import{u as po,f as Oo,a as Ko}from"./dateUtils-BzlEjnk1.js";const ze="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVR4nO2ZQUoDMRSGR7eewHoFsVS0HkUUXNXqASqK2EURBPFIVRe6c+UN1CvUXWvbT4KvMAwzNnnJdCrmg1BKad7/v7y0b5IkiUQiCwGoAx3gQjEugZ0qxTeAIX6MKjMBnBOGS62AVWAPOHVYdlMu9YArYOhphLeBT+ALmOKGEd2QubaAK+B2zngFxt4GgDXgGZjgR8ch5oEkCi8DkvlnRcYLV0Apfqw10M7JvPkV6AN3FmVwK+WyZRnvMEe8ef/ibECyb2o+zRuwnpQAxeLNivQ0BvYyE46qEJ/8fK4ycJKp/X4V4n0MdDNfukkqEO9jwP1LDgD7BeKPgmgp04CL+KUz4Cp+qQxoxC+NAdsNm4c0hWkukkUa8BGfegiadbFDq3/2UAZ8xc+QVvzMtqcKYkBaZ5/MN5xEl2DgLGDZ1KswsC09FPJqXTZoNm5oA6kyMGI2FxqfkluJ0uMTDfhBXAHiHvCCWEL8/RLqlv1MPCf+TSZ+13WC7KnEfWlqcwAeU7GNjnbiQsG5UC1ZAEAt1UMhOpquk6zknMy9l20C2AA+MnEHRo9msuOCs9EH4Fp5TVQ0rqVs0plH4re02Qh1Oq1lCjypsp+5H3gKcD/gykTirqnFZ/ZDy+OGxpapzD+QePrM/2KkKfcGPcv7AdvRkz23G1x4JPIP+AY3r/ywUk/2JAAAAABJRU5ErkJggg==",qo="/reyohoho/assets/icon-shikimori-DGvXK9Jc.svg",at=l=>{const e=document.createElement("div");e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgba(0, 0, 0, 0.8)",e.style.color="white",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e.style.fontSize="2rem",e.style.zIndex="99000",e.textContent=l,document.body.appendChild(e),setTimeout(()=>{document.body.removeChild(e)},2e3)},zo={key:0},Wo={key:1},Go={class:"players-list"},Yo=["onClick"],Zo={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Qo={key:0},Xo={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Jo={key:1},en={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},tn=["onClick"],on={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},nn={__name:"PlayerModal",props:{players:{type:Array,required:!0},selectedPlayer:{type:Object,default:null}},emits:["close","select"],setup(l,{emit:e}){const i=l,o=e,p=f(null),C=$(()=>i.players.filter(y=>!M(y)&&!n(y))),d=$(()=>i.players.some(y=>M(y))),k=$(()=>i.players.some(y=>n(y))),M=y=>y.key.toUpperCase().includes("HDREZKA"),n=y=>y.key.toUpperCase().includes("KODIK"),c=y=>y.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"").replace(/KODIK>/,"").trim(),r=y=>{o("select",y),o("close")},b=y=>i.selectedPlayer&&i.selectedPlayer.key===y.key,L=y=>i.selectedPlayer?y==="hdrezka"&&M(i.selectedPlayer)||y==="kodik"&&n(i.selectedPlayer):!1,S=y=>{p.value=y},T=()=>{p.value=null},I=y=>{let U=i.players.filter(A=>y==="hdrezka"&&M(A)||y==="kodik"&&n(A));return y==="kodik"?U.sort((A,F)=>c(A.translate).localeCompare(c(F.translate))):U},E=y=>I(y).some(U=>U.warning);return(y,U)=>(a(),u("div",{class:"modal",onClick:U[4]||(U[4]=Fe(A=>y.$emit("close"),["self"]))},[t("div",{class:"modal-content",onClick:U[3]||(U[3]=Fe(()=>{},["stop"]))},[t("button",{class:"close",onClick:U[0]||(U[0]=A=>y.$emit("close"))},"√ó"),p.value?(a(),u("h2",Wo,[t("button",{class:"back-btn",onClick:T},"‚Üê –ù–∞–∑–∞–¥"),Q(" "+v(p.value==="hdrezka"?"ReYohoho - HDrezka":"Kodik"),1)])):(a(),u("h2",zo,"–í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–µ–µ—Ä")),t("ul",Go,[p.value?(a(!0),u(te,{key:1},ke(I(p.value),A=>(a(),u("li",{key:A.key},[t("button",{class:x(["player-item",{active:b(A)}]),onClick:F=>r(A)},[Q(v(c(A.translate))+" ",1),A.warning?(a(),u("span",on,"warning")):h("",!0)],10,tn)]))),128)):(a(),u(te,{key:0},[(a(!0),u(te,null,ke(C.value,A=>(a(),u("li",{key:A.key},[t("button",{class:x(["player-item",{active:b(A)}]),onClick:F=>r(A)},[Q(v(c(A.translate))+" ",1),A.warning?(a(),u("span",Zo,"warning")):h("",!0)],10,Yo)]))),128)),d.value?(a(),u("li",Qo,[t("button",{class:x(["group-item",{active:L("hdrezka")}]),onClick:U[1]||(U[1]=A=>S("hdrezka"))},[U[5]||(U[5]=t("span",{class:"material-icons group-icon"},"folder",-1)),U[6]||(U[6]=Q(" ReYohoho - HDrezka ")),E("hdrezka")?(a(),u("span",Xo,"warning")):h("",!0)],2)])):h("",!0),k.value?(a(),u("li",Jo,[t("button",{class:x(["group-item",{active:L("kodik")}]),onClick:U[2]||(U[2]=A=>S("kodik"))},[U[7]||(U[7]=t("span",{class:"material-icons group-icon"},"folder",-1)),U[8]||(U[8]=Q(" Kodik ")),E("kodik")?(a(),u("span",en,"warning")):h("",!0)],2)])):h("",!0)],64))])])]))}},sn=_e(nn,[["__scopeId","data-v-460326ba"]]),ln={class:"players-list"},an=["src"],rn={key:1,class:"controls"},un={class:"main-controls"},dn={class:"material-icons"},cn={class:"list-button-item"},mn={class:"material-icons"},vn={class:"list-button-item"},fn={class:"material-icons"},kn={class:"list-button-item"},gn={class:"list-button-item"},yn={class:"material-icons"},hn={class:"list-button-item"},bn={class:"material-icons"},pn={class:"tooltip-container","data-tooltip-container":"dimming"},Cn={class:"material-icons"},wn={class:"tooltip-container","data-tooltip-container":"blur"},_n={class:"tooltip-container","data-tooltip-container":"compressor"},Mn={class:"tooltip-container","data-tooltip-container":"mirror"},En={class:"tooltip-container","data-tooltip-container":"theater"},Ln={class:"material-symbols-outlined"},In={class:"custom-tooltip","data-tooltip":"theater"},Rn={class:"tooltip-container","data-tooltip-container":"aspect_ratio"},Pn={class:"current-ratio"},Sn=["onClick"],Tn={key:0,class:"tooltip-container","data-tooltip-container":"app_link"},An={class:"custom-tooltip","data-tooltip":"app_link"},jn={key:1,class:"tooltip-container","data-tooltip-container":"copy_link"},Un={class:"custom-tooltip","data-tooltip":"copy_link"},xn={key:0,class:"desktop-list-buttons"},Bn={class:"tooltip-container"},Hn={class:"material-icons"},$n={class:"custom-tooltip"},Nn={class:"tooltip-container"},Dn={class:"material-icons"},Fn={class:"custom-tooltip"},Vn={class:"tooltip-container"},On={class:"custom-tooltip"},Kn={class:"tooltip-container"},qn={class:"material-icons"},zn={class:"custom-tooltip"},Wn={class:"tooltip-container"},Gn={class:"material-icons"},Yn={class:"custom-tooltip"},Zn={key:1,class:"mobile-list-buttons"},Qn={class:"tooltip-container"},Xn={class:"material-icons"},Jn={class:"custom-tooltip"},es={class:"tooltip-container"},ts={class:"material-icons"},os={class:"custom-tooltip"},ns={class:"tooltip-container"},ss={class:"custom-tooltip"},ls={class:"tooltip-container"},is={class:"material-icons"},as={class:"custom-tooltip"},rs={class:"tooltip-container"},us={class:"material-icons"},ds={class:"custom-tooltip"},cs={__name:"PlayerComponent",props:{kpId:String,movieInfo:{type:Object,default:()=>({})}},emits:["update:selectedPlayer","update:movieInfo"],setup(l,{emit:e}){const i=et(),o=Do(),p=ut(),C=go(),d=ot(),k=f(C.params.kp_id),M=l,n=e,c=f([]),r=f(null),b=f(!0),L=f(!1),S=f(!1),T=f(null),I=f(null),E=f(!1),y=f(""),U=f(null),A=f(window.innerHeight*.9),F=$(()=>"".concat(A.value,"px")),D=$(()=>i.isMobile),z=$(()=>!!window.electronAPI),P=f(null),ae=f(!1);let ce=null;const J=f(null),he=f(null),me=f(null),ve=_=>{const s=document.querySelector('[data-tooltip-container="'.concat(_,'"]')),N=document.querySelector('[data-tooltip="'.concat(_,'"]'));if(!s||!N)return;const fe=s.getBoundingClientRect(),Le=N.getBoundingClientRect(),Ie=window.innerHeight;fe.bottom+Le.height>Ie?(N.style.top="auto",N.style.bottom="100%",N.style.marginTop="0",N.style.marginBottom="12px",N.style.transform="translateX(-50%)"):(N.style.top="100%",N.style.bottom="auto",N.style.marginTop="12px",N.style.marginBottom="0",N.style.transform="translateX(-50%)")},g=_=>{P.value=_,ae.value=!1,clearTimeout(ce),ge(()=>{ve(_)})},W=()=>{ae.value||(ce=setTimeout(()=>{P.value=null},300))},Me=()=>{ae.value=!0,clearTimeout(ce)},we=()=>{ae.value=!1,P.value=null},re=$({get:()=>o.aspectRatio,set:_=>o.updateAspectRatio(_)}),ue=$({get:()=>o.isCentered,set:_=>o.updateCentering(_)}),ee=$(()=>{var _,s,N,fe,Le,Ie,He,$e,Ne,De;return((s=(_=M.movieInfo)==null?void 0:_.lists)==null?void 0:s.isFavorite)||((fe=(N=M.movieInfo)==null?void 0:N.lists)==null?void 0:fe.isWatching)||((Ie=(Le=M.movieInfo)==null?void 0:Le.lists)==null?void 0:Ie.isLater)||(($e=(He=M.movieInfo)==null?void 0:He.lists)==null?void 0:$e.isCompleted)||((De=(Ne=M.movieInfo)==null?void 0:Ne.lists)==null?void 0:De.isAbandoned)}),j=$(()=>o.preferredPlayer),m=f(0),Y=_=>_.toUpperCase(),se=()=>{if(L.value||!I.value)return;const[_,s]=re.value.split(":").map(Number);A.value=window.innerHeight*.9,m.value=Math.min(I.value.clientWidth*(s/_),A.value)},H=$(()=>{if(L.value)return{};const[_,s]=re.value.split(":").map(Number),N=A.value*(_/s);return{width:"100%",maxWidth:"".concat(N,"px"),maxHeight:F.value,margin:"0 auto",overflow:"hidden"}}),be=$(()=>{const[_,s]=re.value.split(":").map(Number);return{position:"relative",width:"100%",paddingTop:"".concat(s/_*100,"%")}}),pe=()=>{I.value&&setTimeout(()=>{ge(()=>{I.value.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})},500)},Pe=async()=>{try{y.value="",U.value=null;const _=await _o(M.kpId);if(c.value=Object.entries(_).map(([s,N])=>({key:s.toUpperCase(),...N})),c.value.length>0){if(j.value){const s=Y(j.value),N=c.value.find(fe=>Y(fe.key)===s);r.value=N||c.value[0]}else r.value=c.value[0];n("update:selectedPlayer",r.value)}}catch(_){const{message:s,code:N}=rt(_);y.value=s,U.value=N,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–ª–µ–µ—Ä–æ–≤:",_)}},je=()=>{E.value=!0},de=()=>{E.value=!1},ie=_=>{var s;if(((s=r.value)==null?void 0:s.key)===_.key){de();return}r.value=_,b.value=!0,o.updatePreferredPlayer(Y(_.key)),n("update:selectedPlayer",_)},Ue=()=>{z.value?window.electronAPI.sendHotKey("F2"):(at("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},Se=()=>{z.value?window.electronAPI.sendHotKey("F3"):(at("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},Ce=()=>{z.value?window.electronAPI.sendHotKey("F4"):(at("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},xe=()=>{L.value=!L.value,L.value?(window.addEventListener("mousemove",Be),document.addEventListener("keydown",V),document.body.classList.add("no-scroll")):(window.removeEventListener("mousemove",Be),document.removeEventListener("keydown",V),document.body.classList.remove("no-scroll")),S.value=L.value,ge(()=>pe())},Ve=f(null),Be=()=>{Ve.value=setTimeout(()=>{clearTimeout(Ve.value),S.value=!1},4e3),S.value=!0},Te=$(()=>i.dimmingEnabled),w=()=>{L.value||i.toggleDimming()},V=_=>{(_.key==="Escape"&&L.value||_.altKey&&_.keyCode===84)&&xe()},Ee=_=>{re.value=_,setTimeout(()=>{ue.value&&pe()},310)},st=()=>{const _="reyohoho://#".concat(k.value);try{window.location.href=_}catch(s){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Å—ã–ª–∫–∏:",s)}},lt=()=>{const _=window.location.href;navigator.clipboard.writeText(_).then(()=>{}),J.value.showNotification("–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∏–ª—å–º —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞")},B=()=>{b.value=!1};function K(_){return _.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"HDRezka - ").replace(/KODIK>/,"Kodik - ").trim()}const Z=$(()=>{var _,s;return z.value?!1:!((s=(_=r.value)==null?void 0:_.key)!=null&&s.toUpperCase().includes("TORRENTS"))});Ae(r,_=>{if(_)if(b.value=!0,o.updatePreferredPlayer(Y(_.key)),n("update:selectedPlayer",_),_.key.toUpperCase().includes("TORRENTS")){const s=document.querySelector(".rocketme_fon");s&&(s.style.display="none");const N=document.querySelector(".pm_preloader");N&&(N.style.display="none")}else{const s=document.querySelector(".rocketme_fon");s&&(s.style.display="");const N=document.querySelector(".pm_preloader");N&&(N.style.display="")}}),Ae(()=>C.params.kp_id,async _=>{_&&_!==k.value&&(k.value=_,ue.value&&pe())},{immediate:!0});const le=["16:9","12:5","4:3"],Oe=()=>{const s=(le.indexOf(re.value)+1)%le.length;Ee(le[s])},Ke=_=>{var N,fe,Le,Ie,He,$e,Ne,De,We,Ge,Ye,Ze,Qe;return(Qe={[q.FAVORITE]:((fe=(N=M.movieInfo)==null?void 0:N.lists)==null?void 0:fe.isFavorite)||!1,[q.HISTORY]:((Ie=(Le=M.movieInfo)==null?void 0:Le.lists)==null?void 0:Ie.isHistory)||!1,[q.LATER]:(($e=(He=M.movieInfo)==null?void 0:He.lists)==null?void 0:$e.isLater)||!1,[q.COMPLETED]:((De=(Ne=M.movieInfo)==null?void 0:Ne.lists)==null?void 0:De.isCompleted)||!1,[q.ABANDONED]:((Ge=(We=M.movieInfo)==null?void 0:We.lists)==null?void 0:Ge.isAbandoned)||!1,[q.WATCHING]:((Ze=(Ye=M.movieInfo)==null?void 0:Ye.lists)==null?void 0:Ze.isWatching)||!1}[_])!=null?Qe:!1},oe=async _=>{if(!p.token){J.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Co});return}try{const s={[q.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[q.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[q.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[q.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[q.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[q.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};Ke(_)?(await Mo(k.value,_),J.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(s[_]))):(await ho(k.value,_),J.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(s[_])))}catch(s){const{message:N,code:fe}=rt(s);J.value.showNotification("".concat(N," ").concat(fe))}n("update:movieInfo")},Co=()=>{d.push("/login")},it=$(()=>o.showFavoriteTooltip),wo=()=>{d.push("/settings"),we()};return qe(()=>{b.value=!0,Pe(),D.value&&(re.value="4:3"),se(),window.addEventListener("resize",se),window.addEventListener("resize",ve),ue.value&&pe()}),dt(()=>{window.removeEventListener("resize",se),window.removeEventListener("resize",ve),window.removeEventListener("mousemove",Be),document.removeEventListener("keydown",V),document.body.classList.remove("no-scroll")}),(_,s)=>{var N,fe,Le,Ie,He,$e,Ne,De,We,Ge,Ye,Ze,Qe,kt,gt,yt,ht,bt,pt,Ct,wt,_t,Mt,Et,Lt,It,Rt,Pt,St,Tt,At,jt,Ut,xt,Bt,Ht,$t,Nt,Dt,Ft,Vt,Ot,Kt,qt,zt,Wt,Gt,Yt,Zt,Qt,Xt,Jt,eo,to,oo,no,so,lo,io,ao;return y.value?(a(),Re(yo,{key:0,message:y.value,code:U.value},null,8,["message","code"])):(a(),u(te,{key:1},[t("div",ln,[s[54]||(s[54]=t("span",null,"–ü–ª–µ–µ—Ä:",-1)),t("button",{class:"player-btn",onClick:je},v(r.value?K(r.value.translate).toUpperCase():"–ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–µ–µ—Ä–æ–≤..."),1)]),E.value?(a(),Re(sn,{key:0,players:c.value,"selected-player":r.value,onClose:de,onSelect:ie},null,8,["players","selected-player"])):h("",!0),t("div",{ref_key:"containerRef",ref:I,class:x(["player-container",{"theater-mode":L.value}]),style:tt(L.value?{}:H.value)},[t("div",{class:x(["iframe-wrapper",{pm_video:Z.value}]),style:tt(L.value?{}:be.value)},[O(t("iframe",{ref_key:"playerIframe",ref:T,src:(N=r.value)==null?void 0:N.iframe,frameborder:"0",allowfullscreen:"",webkitallowfullscreen:"",class:x(["responsive-iframe",{"theater-mode-unlock":S.value,"theater-mode-lock":L.value,dimmed:Te.value}]),onLoad:B},null,42,an),[[G,!b.value&&((fe=r.value)==null?void 0:fe.iframe)]]),b.value?(a(),Re(bo,{key:0})):h("",!0)],6),L.value?(a(),u("button",{key:0,class:x(["close-theater-btn",{visible:S.value}]),onClick:xe}," ‚úñ ",2)):h("",!0)],6),L.value?h("",!0):(a(),u("div",rn,[t("div",un,[D.value?h("",!0):(a(),u("div",{key:0,ref_key:"tooltipContainer",ref:he,class:"tooltip-container list-buttons-container","data-tooltip-container":"favorite"},[it.value?(a(),u("button",{key:0,class:x(["favorite-btn",{active:(Ie=(Le=l.movieInfo)==null?void 0:Le.lists)==null?void 0:Ie.isFavorite}]),onMouseenter:s[0]||(s[0]=R=>g("favorite")),onMouseleave:W,onClick:s[1]||(s[1]=R=>oe(X(q).FAVORITE))},[t("span",dn,v(($e=(He=l.movieInfo)==null?void 0:He.lists)!=null&&$e.isFavorite?"favorite":"favorite_border"),1),t("span",{class:x(["material-icons dropdown-arrow",{highlighted:ee.value}])},"expand_more",2)],34)):h("",!0),O(t("div",{ref_key:"tooltip",ref:me,class:"custom-tooltip advanced-tooltip list-buttons-dropdown","data-tooltip":"favorite",onMouseenter:Me,onMouseleave:we},[t("div",cn,[t("button",{class:x(["favorite-btn",{active:(De=(Ne=l.movieInfo)==null?void 0:Ne.lists)==null?void 0:De.isFavorite}]),onClick:s[2]||(s[2]=R=>oe(X(q).FAVORITE))},[t("span",mn,v((Ge=(We=l.movieInfo)==null?void 0:We.lists)!=null&&Ge.isFavorite?"favorite":"favorite_border"),1),s[55]||(s[55]=t("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))],2)]),t("div",vn,[t("button",{class:x(["watching-btn",{active:(Ze=(Ye=l.movieInfo)==null?void 0:Ye.lists)==null?void 0:Ze.isWatching}]),onClick:s[3]||(s[3]=R=>oe(X(q).WATCHING))},[t("span",fn,v((kt=(Qe=l.movieInfo)==null?void 0:Qe.lists)!=null&&kt.isWatching?"visibility_off":"visibility"),1),s[56]||(s[56]=t("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))],2)]),t("div",kn,[t("button",{class:x(["later-btn",{active:(yt=(gt=l.movieInfo)==null?void 0:gt.lists)==null?void 0:yt.isLater}]),onClick:s[4]||(s[4]=R=>oe(X(q).LATER))},s[57]||(s[57]=[t("span",{class:"material-icons"},"watch_later",-1),t("span",{class:"button-label"},"–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ",-1)]),2)]),t("div",gn,[t("button",{class:x(["completed-btn",{active:(bt=(ht=l.movieInfo)==null?void 0:ht.lists)==null?void 0:bt.isCompleted}]),onClick:s[5]||(s[5]=R=>oe(X(q).COMPLETED))},[t("span",yn,v((Ct=(pt=l.movieInfo)==null?void 0:pt.lists)!=null&&Ct.isCompleted?"check_circle":"check_circle_outline"),1),s[58]||(s[58]=t("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))],2)]),t("div",hn,[t("button",{class:x(["abandoned-btn",{active:(_t=(wt=l.movieInfo)==null?void 0:wt.lists)==null?void 0:_t.isAbandoned}]),onClick:s[6]||(s[6]=R=>oe(X(q).ABANDONED))},[t("span",bn,v(((Et=(Mt=l.movieInfo)==null?void 0:Mt.lists)!=null&&Et.isAbandoned,"not_interested")),1),s[59]||(s[59]=t("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))],2)]),t("div",{class:"tooltip-hint"},[s[61]||(s[61]=t("span",{class:"material-icons"},"settings",-1)),t("span",null,[s[60]||(s[60]=Q("–°—Ç–∏–ª—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ ")),t("a",{class:"settings-link",onClick:wo},"–Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö")])])],544),[[G,P.value==="favorite"&&it.value]])],512)),D.value?h("",!0):(a(),u(te,{key:1},[t("div",pn,[t("button",{class:x(["dimming-btn",{active:Te.value}]),onMouseenter:s[7]||(s[7]=R=>g("dimming")),onMouseleave:s[8]||(s[8]=R=>P.value=null),onClick:w},[t("span",Cn,v(Te.value?"light_mode":"dark_mode"),1)],34),O(t("div",{class:"custom-tooltip","data-tooltip":"dimming"},v(Te.value?"–û—Ç–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ":"–í–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ"),513),[[G,P.value==="dimming"]])]),t("div",wn,[t("button",{class:x(["blur-btn",{"electron-only":!z.value}]),onMouseenter:s[9]||(s[9]=R=>g("blur")),onMouseleave:s[10]||(s[10]=R=>P.value=null),onClick:Ue},s[62]||(s[62]=[t("span",{class:"material-icons"},"blur_on",-1)]),34),O(t("div",{class:"custom-tooltip","data-tooltip":"blur"},v(z.value?"–ë–ª—é—Ä":"–ë–ª—é—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[G,P.value==="blur"]])]),t("div",_n,[t("button",{class:x(["material-symbols-outlined",{"electron-only":!z.value}]),onMouseenter:s[11]||(s[11]=R=>g("compressor")),onMouseleave:s[12]||(s[12]=R=>P.value=null),onClick:Se},s[63]||(s[63]=[t("span",{class:"material-icons"},"graphic_eq",-1)]),34),O(t("div",{class:"custom-tooltip","data-tooltip":"compressor"},v(z.value?"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä":"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[G,P.value==="compressor"]])]),t("div",Mn,[t("button",{class:x(["mirror-btn",{"electron-only":!z.value}]),onMouseenter:s[13]||(s[13]=R=>g("mirror")),onMouseleave:s[14]||(s[14]=R=>P.value=null),onClick:Ce},s[64]||(s[64]=[t("span",{class:"material-icons"},"flip",-1)]),34),O(t("div",{class:"custom-tooltip","data-tooltip":"mirror"},v(z.value?"–ó–µ—Ä–∫–∞–ª–æ":"–ó–µ—Ä–∫–∞–ª–æ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[G,P.value==="mirror"]])]),t("div",En,[t("button",{class:"theater-mode-btn",onMouseenter:s[15]||(s[15]=R=>g("theater")),onMouseleave:s[16]||(s[16]=R=>P.value=null),onClick:xe},[t("span",Ln,v(L.value?"fullscreen_exit":"aspect_ratio"),1)],32),O(t("div",In,[Q(v(L.value?"–í—ã–π—Ç–∏ –∏–∑ —Ç–µ–∞—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞":"–¢–µ–∞—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º")+" ",1),s[65]||(s[65]=t("span",{class:"shortcut-hint"},"Alt+T",-1))],512),[[G,P.value==="theater"]])]),t("div",Rn,[t("button",{class:"aspect-ratio-dropdown-btn",onMouseenter:s[17]||(s[17]=R=>g("aspect_ratio")),onMouseleave:W,onClick:Oe},[t("span",Pn,v(re.value),1)],32),O(t("div",{class:"custom-tooltip advanced-tooltip aspect-ratio-dropdown","data-tooltip":"aspect_ratio",onMouseenter:Me,onMouseleave:we},[(a(),u(te,null,ke(le,R=>t("div",{key:R,class:x(["aspect-ratio-option",{active:re.value===R}]),onClick:za=>Ee(R)},v(R),11,Sn)),64))],544),[[G,P.value==="aspect_ratio"]])]),t("div",{class:"tooltip-container","data-tooltip-container":"centering",onMouseenter:s[19]||(s[19]=R=>g("centering")),onMouseleave:W},[t("button",{class:"center-btn",onClick:pe},s[66]||(s[66]=[t("span",{class:"material-icons"},"center_focus_strong",-1)])),O(t("div",{class:"custom-tooltip advanced-tooltip","data-tooltip":"centering",onMouseenter:Me,onMouseleave:we},[s[67]||(s[67]=Q(" –û—Ç—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–ª–µ–µ—Ä ")),ne(Fo,{modelValue:ue.value,"onUpdate:modelValue":s[18]||(s[18]=R=>ue.value=R),title:"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞"},null,8,["modelValue"]),s[68]||(s[68]=t("span",{class:"tooltip-title"},"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞",-1))],544),[[G,P.value==="centering"]])],32),z.value?h("",!0):(a(),u("div",Tn,[t("button",{class:"app-link-btn",onMouseenter:s[20]||(s[20]=R=>g("app_link")),onMouseleave:s[21]||(s[21]=R=>P.value=null),onClick:st},s[69]||(s[69]=[t("span",{class:"material-icons"},"open_in_new",-1)]),32),O(t("div",An," –û—Ç–∫—Ä—ã—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ",512),[[G,P.value==="app_link"]])])),z.value?(a(),u("div",jn,[t("button",{class:"copy-link-btn",onMouseenter:s[22]||(s[22]=R=>g("copy_link")),onMouseleave:s[23]||(s[23]=R=>P.value=null),onClick:lt},s[70]||(s[70]=[t("span",{class:"material-icons"},"content_copy",-1)]),32),O(t("div",Un," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É ",512),[[G,P.value==="copy_link"]])])):h("",!0)],64))]),!D.value&&!it.value?(a(),u("div",xn,[t("div",Bn,[t("button",{class:x(["favorite-btn",{active:(It=(Lt=l.movieInfo)==null?void 0:Lt.lists)==null?void 0:It.isFavorite}]),onMouseenter:s[24]||(s[24]=R=>g("favorite")),onMouseleave:s[25]||(s[25]=R=>P.value=null),onClick:s[26]||(s[26]=R=>oe(X(q).FAVORITE))},[t("span",Hn,v((Pt=(Rt=l.movieInfo)==null?void 0:Rt.lists)!=null&&Pt.isFavorite?"favorite":"favorite_border"),1)],34),O(t("div",$n,v("–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"),512),[[G,P.value==="favorite"]])]),t("div",Nn,[t("button",{class:x(["watching-btn",{active:(Tt=(St=l.movieInfo)==null?void 0:St.lists)==null?void 0:Tt.isWatching}]),onMouseenter:s[27]||(s[27]=R=>g("watching")),onMouseleave:s[28]||(s[28]=R=>P.value=null),onClick:s[29]||(s[29]=R=>oe(X(q).WATCHING))},[t("span",Dn,v((jt=(At=l.movieInfo)==null?void 0:At.lists)!=null&&jt.isWatching?"visibility_off":"visibility"),1)],34),O(t("div",Fn,v("–°–º–æ—Ç—Ä—é"),512),[[G,P.value==="watching"]])]),t("div",Vn,[t("button",{class:x(["later-btn",{active:(xt=(Ut=l.movieInfo)==null?void 0:Ut.lists)==null?void 0:xt.isLater}]),onMouseenter:s[30]||(s[30]=R=>g("later")),onMouseleave:s[31]||(s[31]=R=>P.value=null),onClick:s[32]||(s[32]=R=>oe(X(q).LATER))},s[71]||(s[71]=[t("span",{class:"material-icons"},"watch_later",-1)]),34),O(t("div",On,v("–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"),512),[[G,P.value==="later"]])]),t("div",Kn,[t("button",{class:x(["completed-btn",{active:(Ht=(Bt=l.movieInfo)==null?void 0:Bt.lists)==null?void 0:Ht.isCompleted}]),onMouseenter:s[33]||(s[33]=R=>g("completed")),onMouseleave:s[34]||(s[34]=R=>P.value=null),onClick:s[35]||(s[35]=R=>oe(X(q).COMPLETED))},[t("span",qn,v((Nt=($t=l.movieInfo)==null?void 0:$t.lists)!=null&&Nt.isCompleted?"check_circle":"check_circle_outline"),1)],34),O(t("div",zn,v("–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"),512),[[G,P.value==="completed"]])]),t("div",Wn,[t("button",{class:x(["abandoned-btn",{active:(Ft=(Dt=l.movieInfo)==null?void 0:Dt.lists)==null?void 0:Ft.isAbandoned}]),onMouseenter:s[36]||(s[36]=R=>g("abandoned")),onMouseleave:s[37]||(s[37]=R=>P.value=null),onClick:s[38]||(s[38]=R=>oe(X(q).ABANDONED))},[t("span",Gn,v(((Ot=(Vt=l.movieInfo)==null?void 0:Vt.lists)!=null&&Ot.isAbandoned,"not_interested")),1)],34),O(t("div",Yn,v("–ë—Ä–æ—à–µ–Ω–æ"),512),[[G,P.value==="abandoned"]])])])):D.value?(a(),u("div",Zn,[t("div",Qn,[t("button",{class:x(["favorite-btn",{active:(qt=(Kt=l.movieInfo)==null?void 0:Kt.lists)==null?void 0:qt.isFavorite}]),onMouseenter:s[39]||(s[39]=R=>g("favorite")),onMouseleave:s[40]||(s[40]=R=>P.value=null),onClick:s[41]||(s[41]=R=>oe(X(q).FAVORITE))},[t("span",Xn,v((Wt=(zt=l.movieInfo)==null?void 0:zt.lists)!=null&&Wt.isFavorite?"favorite":"favorite_border"),1)],34),O(t("div",Jn,v("–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"),512),[[G,P.value==="favorite"]])]),t("div",es,[t("button",{class:x(["watching-btn",{active:(Yt=(Gt=l.movieInfo)==null?void 0:Gt.lists)==null?void 0:Yt.isWatching}]),onMouseenter:s[42]||(s[42]=R=>g("watching")),onMouseleave:s[43]||(s[43]=R=>P.value=null),onClick:s[44]||(s[44]=R=>oe(X(q).WATCHING))},[t("span",ts,v((Qt=(Zt=l.movieInfo)==null?void 0:Zt.lists)!=null&&Qt.isWatching?"visibility_off":"visibility"),1)],34),O(t("div",os,v("–°–º–æ—Ç—Ä—é"),512),[[G,P.value==="watching"]])]),t("div",ns,[t("button",{class:x(["later-btn",{active:(Jt=(Xt=l.movieInfo)==null?void 0:Xt.lists)==null?void 0:Jt.isLater}]),onMouseenter:s[45]||(s[45]=R=>g("later")),onMouseleave:s[46]||(s[46]=R=>P.value=null),onClick:s[47]||(s[47]=R=>oe(X(q).LATER))},s[72]||(s[72]=[t("span",{class:"material-icons"},"watch_later",-1)]),34),O(t("div",ss,v("–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"),512),[[G,P.value==="later"]])]),t("div",ls,[t("button",{class:x(["completed-btn",{active:(to=(eo=l.movieInfo)==null?void 0:eo.lists)==null?void 0:to.isCompleted}]),onMouseenter:s[48]||(s[48]=R=>g("completed")),onMouseleave:s[49]||(s[49]=R=>P.value=null),onClick:s[50]||(s[50]=R=>oe(X(q).COMPLETED))},[t("span",is,v((no=(oo=l.movieInfo)==null?void 0:oo.lists)!=null&&no.isCompleted?"check_circle":"check_circle_outline"),1)],34),O(t("div",as,v("–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"),512),[[G,P.value==="completed"]])]),t("div",rs,[t("button",{class:x(["abandoned-btn",{active:(lo=(so=l.movieInfo)==null?void 0:so.lists)==null?void 0:lo.isAbandoned}]),onMouseenter:s[51]||(s[51]=R=>g("abandoned")),onMouseleave:s[52]||(s[52]=R=>P.value=null),onClick:s[53]||(s[53]=R=>oe(X(q).ABANDONED))},[t("span",us,v(((ao=(io=l.movieInfo)==null?void 0:io.lists)!=null&&ao.isAbandoned,"not_interested")),1)],34),O(t("div",ds,v("–ë—Ä–æ—à–µ–Ω–æ"),512),[[G,P.value==="abandoned"]])])])):h("",!0)])),ne(nt,{ref_key:"notificationRef",ref:J},null,512)],64))}}},ko=_e(cs,[["__scopeId","data-v-2037cb5b"]]),ms={key:0,class:"carousel-container"},vs={class:"carousel-wrapper"},fs=["onClick"],ks=["src","alt"],gs={class:"video-name"},ys={key:0,class:"video-player"},hs=["src"],bs={__name:"TrailerCarousel",props:{videos:{type:Array,required:!0},activeVideoIndex:{type:Number,default:null}},emits:["select"],setup(l,{emit:e}){const i=et(),o=$(()=>i.isMobile),p=l,C=e,d=f(p.activeVideoIndex),k=f(null),M=f(!1),n=f(!1),c=()=>{if(!k.value)return;const{scrollLeft:I,scrollWidth:E,clientWidth:y}=k.value;M.value=I>0,n.value=I<E-y-1},r=I=>{if(!k.value)return;const E=k.value.querySelector(".carousel-item");if(!E)return;const y=E.clientWidth+16;k.value.scrollBy({left:y*I,behavior:"smooth"})},b=I=>{d.value=I,C("select",p.videos[I])},L=()=>c(),S=f([]),T=async I=>{try{return(await fetch("https://img.youtube.com/vi/".concat(I,"/0.jpg"))).ok}catch(E){return!1}};return qe(async()=>{const I=p.videos.map(async y=>await T(y.videoId)?y:null),E=await Promise.all(I);S.value=E.filter(Boolean),c(),window.addEventListener("resize",L)}),Ae(()=>p.videos,async I=>{const E=I.map(async U=>await T(U.videoId)?U:null),y=await Promise.all(E);S.value=y.filter(Boolean)}),Ae(()=>p.activeVideoIndex,I=>{d.value=I}),dt(()=>{window.removeEventListener("resize",L)}),(I,E)=>S.value.length?(a(),u("div",ms,[E[4]||(E[4]=t("h2",null,"–¢—Ä–µ–π–ª–µ—Ä—ã (YouTube)",-1)),t("div",vs,[O(t("button",{class:"scroll-button left",onClick:E[0]||(E[0]=y=>r(-1))},E[2]||(E[2]=[t("span",{class:"material-symbols-outlined"},"arrow_back_ios",-1)]),512),[[G,!o.value&&M.value]]),t("div",{ref_key:"carousel",ref:k,class:"carousel",onScroll:c},[(a(!0),u(te,null,ke(S.value,(y,U)=>(a(),u("div",{key:U,class:"carousel-item",onClick:A=>b(U)},[t("img",{src:"https://img.youtube.com/vi/".concat(y.videoId,"/0.jpg"),alt:y.name},null,8,ks),t("div",gs,v(y.name),1)],8,fs))),128))],544),O(t("button",{class:"scroll-button right",onClick:E[1]||(E[1]=y=>r(1))},E[3]||(E[3]=[t("span",{class:"material-symbols-outlined"},"arrow_forward_ios",-1)]),512),[[G,!o.value&&n.value]])]),d.value!==null?(a(),u("div",ys,[t("iframe",{src:l.videos[d.value].iframeUrl,frameborder:"0",allowfullscreen:""},null,8,hs)])):h("",!0)])):h("",!0)}},ps=_e(bs,[["__scopeId","data-v-e60b5c29"]]),Cs={class:"rating-container"},ws={class:"rating-display"},_s={class:"average-rating"},Ms={class:"rating-numbers"},Es=["onClick","onMouseenter"],Ls={key:0,class:"tooltip-footer"},Is={class:"rating-numbers mobile-rating-numbers"},Rs=["onClick"],Ps={key:0,class:"mobile-modal-footer"},Ss={__name:"MovieRating",props:{kpId:{type:String,required:!0},showDash:{type:Boolean,default:!1}},setup(l){const e=et(),i=ot(),o=l,p=f(null),C=f(null),d=f(null),k=f(null),M=f(0),n=f(!1),c=f(!1);let r=null;const b=A=>A?A.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",L=()=>{r=setTimeout(()=>{n.value=!1,e.isMobile||(c.value=!1)},100)},S=()=>{r&&(clearTimeout(r),r=null),n.value=!0},T=()=>{e.isMobile&&(c.value=!c.value)},I=()=>{i.push("/login")},E=async()=>{try{const A=await Eo(o.kpId);C.value=A.user_rating,d.value=A.average_rating,k.value=b(A.vote_count)}catch(A){console.error("Error loading rating:",A)}},y=async A=>{var F;try{A===C.value?(await ro(o.kpId,null),C.value=null,p.value.showNotification("–û—Ü–µ–Ω–∫–∞ —É–¥–∞–ª–µ–Ω–∞")):(await ro(o.kpId,A),C.value=A,p.value.showNotification("–û—Ü–µ–Ω–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞")),e.isMobile&&(c.value=!1),E()}catch(D){console.error("Error setting rating:",D),((F=D.response)==null?void 0:F.status)===401?p.value.showNotification('–î–ª—è –æ—Ü–µ–Ω–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:I}):p.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ü–µ–Ω–∫–∏"),e.isMobile&&(c.value=!1)}},U=()=>{c.value=!1};return qe(()=>{E()}),(A,F)=>(a(),u("div",Cs,[t("div",ws,[t("a",{href:"#",class:x(["rating-link",{"has-rating":C.value}]),onMouseenter:F[0]||(F[0]=D=>n.value=!0),onMouseleave:L,onClick:Fe(T,["prevent"])},[F[3]||(F[3]=t("img",{src:No,alt:"ReYohoho",class:"rating-logo"},null,-1)),t("span",_s,v(d.value?d.value.toFixed(1).replace(/\.0$/,""):"‚Äî"),1)],34),O(t("div",{class:"rating-tooltip",onMouseenter:S,onMouseleave:L},[t("div",Ms,[(a(),u(te,null,ke(10,D=>t("button",{key:D,class:x(["number-btn",{active:D===C.value,hover:D===M.value,"average-highlight":d.value&&D<=Math.round(d.value)}]),onClick:z=>y(D),onMouseenter:z=>M.value=D,onMouseleave:F[1]||(F[1]=z=>M.value=0)},v(D),43,Es)),64))]),k.value?(a(),u("div",Ls,"–û—Ü–µ–Ω–æ–∫: "+v(k.value),1)):h("",!0)],544),[[G,(n.value||c.value)&&!X(e).isMobile]])]),ne(nt,{ref_key:"notificationRef",ref:p},null,512),X(e).isMobile&&c.value?(a(),u("div",{key:0,class:"mobile-modal-overlay",onClick:U},[t("div",{class:"mobile-modal",onClick:F[2]||(F[2]=Fe(()=>{},["stop"]))},[t("div",{class:"mobile-modal-header"},[F[4]||(F[4]=t("h3",null,"–û—Ü–µ–Ω–∏—Ç—å —Ñ–∏–ª—å–º",-1)),t("button",{class:"close-button",onClick:U},"√ó")]),t("div",Is,[(a(),u(te,null,ke(10,D=>t("button",{key:D,class:x(["number-btn",{active:D===C.value,"average-highlight":d.value&&D<=Math.round(d.value)}]),onClick:z=>y(D)},v(D),11,Rs)),64))]),k.value?(a(),u("div",Ps,"–û—Ü–µ–Ω–æ–∫: "+v(k.value),1)):h("",!0)])])):h("",!0)]))}},Ts=_e(Ss,[["__scopeId","data-v-906480ed"]]),As={name:"EmojiPicker",props:{isVisible:{type:Boolean,default:!1}},emits:["emoji-selected","mouse-enter","mouse-leave","close"],data(){return{activeCategory:"smileys",categories:[{name:"smileys",icon:"üòÄ",emojis:["üòÄ","üòÉ","üòÑ","üòÅ","üòÜ","üòÖ","üòÇ","ü§£","üòä","üòá","üôÇ","üôÉ","üòâ","üòå","üòç","ü•∞","üòò","üòó","üòô","üòö","üòã","üòõ","üòù","üòú","ü§™","ü§®","üßê","ü§ì","üòé","ü§©","ü•≥"]},{name:"emotions",icon:"üò¢",emojis:["üò•","üò¢","üò≠","üò§","üò†","üò°","ü§¨","ü§Ø","üò≥","ü•µ","ü•∂","üò±","üò®","üò∞","üò•","üòì","ü§ó","ü§î","ü§≠","ü§´","ü§•","üò∂","üòê","üòë","üò¨","üôÑ","üòØ","üò¶","üòß","üòÆ","üò≤"]},{name:"gestures",icon:"üëç",emojis:["üëç","üëé","üëå","ü§å","ü§è","‚úåÔ∏è","ü§û","ü§ü","ü§ò","ü§ô","üëà","üëâ","üëÜ","üñï","üëá","‚òùÔ∏è","üëè","üôå","üëê","ü§≤","ü§ù","üôè","‚úçÔ∏è","üí™","ü¶æ","ü¶ø","ü¶µ","ü¶∂","üëÇ","ü¶ª","üëÉ"]},{name:"hearts",icon:"‚ù§Ô∏è",emojis:["‚ù§Ô∏è","üß°","üíõ","üíö","üíô","üíú","ü§é","üñ§","ü§ç","üíî","‚ù£Ô∏è","üíï","üíû","üíì","üíó","üíñ","üíò","üíù","üíü","‚ô•Ô∏è","üíØ","üí¢","üí•","üí´","üí¶","üí®","üï≥Ô∏è","üí£","üí¨","üëÅÔ∏è‚Äçüó®Ô∏è","üó®Ô∏è"]},{name:"objects",icon:"üéâ",emojis:["üéâ","üéä","üéà","üéÅ","üéÄ","üéÇ","üç∞","üßÅ","üç≠","üç¨","üç´","üç©","üç™","üçï","üçî","üçü","üå≠","ü•™","üåÆ","üåØ","ü•ô","ü•ö","üç≥","ü•ò","üç≤","ü•ó","üçø","üßà","üßÄ","ü•®","ü•Ø"]}]}},computed:{currentEmojis(){const l=this.categories.find(e=>e.name===this.activeCategory);return l?l.emojis:[]}},methods:{selectEmoji(l){this.$emit("emoji-selected",l)}}},js={class:"emoji-categories"},Us=["onClick"],xs={class:"emoji-grid"},Bs=["onClick"];function Hs(l,e,i,o,p,C){return i.isVisible?(a(),u("div",{key:0,class:"emoji-picker",onMouseenter:e[1]||(e[1]=d=>l.$emit("mouse-enter")),onMouseleave:e[2]||(e[2]=d=>l.$emit("mouse-leave"))},[t("button",{class:"close-btn mobile-only",onClick:e[0]||(e[0]=d=>l.$emit("close"))},e[3]||(e[3]=[t("i",{class:"fas fa-times"},null,-1)])),t("div",js,[(a(!0),u(te,null,ke(p.categories,d=>(a(),u("button",{key:d.name,onClick:k=>p.activeCategory=d.name,class:x([{active:p.activeCategory===d.name},"category-btn"]),type:"button"},v(d.icon),11,Us))),128))]),t("div",xs,[(a(!0),u(te,null,ke(C.currentEmojis,d=>(a(),u("button",{key:d,onClick:k=>C.selectEmoji(d),class:"emoji-btn",type:"button"},v(d),9,Bs))),128))])],32)):h("",!0)}const ct=_e(As,[["render",Hs],["__scopeId","data-v-5f18a3b7"]]),$s=async l=>{const e=await Lo();return await l(e)},Ns=async l=>{const{data:e}=await $s(i=>i.get("/search_emotes/".concat(l)));return e.emotes||[]},Ds={name:"ImagePicker",props:{isVisible:{type:Boolean,required:!0},currentUser:{type:Object,default:null}},emits:["image-selected","mouse-enter","mouse-leave","close","login-required"],setup(l,{emit:e}){const i=f(""),o=f([]),p=f(null),C=f(!1),k=Io(async r=>{if(!l.currentUser){console.warn("–ü–æ–ø—ã—Ç–∫–∞ –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏");return}if(!r.trim()){o.value=[],C.value=!1;return}C.value=!0;try{o.value=await Ns(r)}catch(b){console.error("Error searching images:",b),o.value=[]}finally{C.value=!1}},300),M=()=>{if(!l.currentUser){e("login-required");return}i.value.trim()&&(C.value=!0),k(i.value)},n=r=>{if(!l.currentUser){e("login-required");return}e("image-selected",r),e("close")},c=()=>{setTimeout(()=>{l.isVisible&&e("mouse-leave")},100)};return Ae(()=>l.isVisible,r=>{r&&(i.value="",o.value=[],C.value=!1)}),{searchQuery:i,images:o,searchInput:p,isLoading:C,handleSearch:M,selectImage:n,handleInputBlur:c}}},Fs={key:0,class:"auth-required"},Vs={class:"auth-message"},Os={key:1},Ks={class:"image-picker-header"},qs={class:"image-content"},zs={key:0,class:"loading-spinner"},Ws={key:1,class:"image-grid"},Gs=["onClick"],Ys=["src","alt"],Zs={key:2,class:"no-images"},Qs={key:3,class:"no-search"};function Xs(l,e,i,o,p,C){return i.isVisible?(a(),u("div",{key:0,class:"image-picker",onMouseenter:e[7]||(e[7]=d=>l.$emit("mouse-enter")),onMouseleave:e[8]||(e[8]=d=>l.$emit("mouse-leave")),onClick:e[9]||(e[9]=Fe(()=>{},["stop"]))},[t("button",{class:"close-btn mobile-only",onClick:e[0]||(e[0]=d=>l.$emit("close"))},e[10]||(e[10]=[t("i",{class:"fas fa-times"},null,-1)])),i.currentUser?(a(),u("div",Os,[t("div",Ks,[O(t("input",{ref:"searchInput",type:"text","onUpdate:modelValue":e[2]||(e[2]=d=>o.searchQuery=d),placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–º–∞–π–ª–∞ 7tv",class:"image-search-input",onInput:e[3]||(e[3]=(...d)=>o.handleSearch&&o.handleSearch(...d)),onClick:e[4]||(e[4]=Fe(()=>{},["stop"])),onFocus:e[5]||(e[5]=d=>l.$emit("mouse-enter")),onBlur:e[6]||(e[6]=(...d)=>o.handleInputBlur&&o.handleInputBlur(...d))},null,544),[[Xe,o.searchQuery]])]),t("div",qs,[o.isLoading?(a(),u("div",zs,e[14]||(e[14]=[t("div",{class:"spinner"},null,-1),t("p",null,"–ü–æ–∏—Å–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...",-1)]))):o.images.length>0?(a(),u("div",Ws,[(a(!0),u(te,null,ke(o.images,(d,k)=>(a(),u("div",{key:k,class:"image-item",onClick:M=>o.selectImage(d)},[t("img",{src:d,alt:"Image "+(k+1)},null,8,Ys)],8,Gs))),128))])):o.searchQuery.trim()?(a(),u("div",Zs,e[15]||(e[15]=[t("p",null,"–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤",-1)]))):(a(),u("div",Qs,e[16]||(e[16]=[t("p",null,"–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞",-1)])))])])):(a(),u("div",Fs,[t("div",Vs,[e[11]||(e[11]=t("i",{class:"fas fa-lock"},null,-1)),e[12]||(e[12]=t("h3",null,"–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è",-1)),e[13]||(e[13]=t("p",null,"–î–ª—è –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç",-1)),t("button",{class:"login-button",onClick:e[1]||(e[1]=d=>l.$emit("login-required"))},"–í–æ–π—Ç–∏")])]))],32)):h("",!0)}const mt=_e(Ds,[["render",Xs],["__scopeId","data-v-be44d2b6"]]),Js={name:"LinkModal",props:{isVisible:{type:Boolean,default:!1},selectedText:{type:String,default:""}},emits:["close","submit"],setup(l,{emit:e}){const i=f(""),o=f(""),p=f(null),C=f(null),d=$(()=>/^https?:\/\/.+/.test(i.value.trim())&&o.value.trim()),k=()=>{e("close"),n()},M=()=>{d.value&&(e("submit",{url:i.value.trim(),title:o.value.trim()}),k())},n=()=>{i.value="",o.value=""},c=r=>{var b;r.key==="Enter"?(r.preventDefault(),d.value?M():r.target===p.value&&i.value.trim()&&((b=C.value)==null||b.focus())):r.key==="Escape"&&k()};return Ae(()=>l.isVisible,r=>{r&&(l.selectedText.trim()&&(o.value=l.selectedText.trim()),ge(()=>{var b;(b=p.value)==null||b.focus()}))}),{linkUrl:i,linkTitle:o,urlInput:p,titleInput:C,isValidLink:d,closeModal:k,submitLink:M,handleKeydown:c}}},el={class:"link-modal-header"},tl={class:"link-modal-content"},ol={class:"form-group"},nl={class:"form-group"},sl={class:"link-modal-footer"},ll=["disabled"];function il(l,e,i,o,p,C){return i.isVisible?(a(),u("div",{key:0,class:"link-modal-overlay",onClick:e[8]||(e[8]=(...d)=>o.closeModal&&o.closeModal(...d))},[t("div",{class:"link-modal",onClick:e[7]||(e[7]=Fe(()=>{},["stop"]))},[t("div",el,[e[10]||(e[10]=t("h3",null,"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É",-1)),t("button",{class:"close-button",onClick:e[0]||(e[0]=(...d)=>o.closeModal&&o.closeModal(...d))},e[9]||(e[9]=[t("i",{class:"fas fa-times"},null,-1)]))]),t("div",tl,[t("div",ol,[e[11]||(e[11]=t("label",{for:"link-url"},"URL —Å—Å—ã–ª–∫–∏:",-1)),O(t("input",{id:"link-url",ref:"urlInput","onUpdate:modelValue":e[1]||(e[1]=d=>o.linkUrl=d),type:"url",placeholder:"https://example.com",class:"link-input",onKeydown:e[2]||(e[2]=(...d)=>o.handleKeydown&&o.handleKeydown(...d))},null,544),[[Xe,o.linkUrl]])]),t("div",nl,[e[12]||(e[12]=t("label",{for:"link-title"},"–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏:",-1)),O(t("input",{id:"link-title",ref:"titleInput","onUpdate:modelValue":e[3]||(e[3]=d=>o.linkTitle=d),type:"text",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è",class:"link-input",onKeydown:e[4]||(e[4]=(...d)=>o.handleKeydown&&o.handleKeydown(...d))},null,544),[[Xe,o.linkTitle]])])]),t("div",sl,[t("button",{class:"cancel-button",onClick:e[5]||(e[5]=(...d)=>o.closeModal&&o.closeModal(...d))},"–û—Ç–º–µ–Ω–∞"),t("button",{class:"submit-button",disabled:!o.isValidLink,onClick:e[6]||(e[6]=(...d)=>o.submitLink&&o.submitLink(...d))},"–î–æ–±–∞–≤–∏—Ç—å",8,ll)])])])):h("",!0)}const vt=_e(Js,[["render",il],["__scopeId","data-v-4b811824"]]);function al(){const l=f(!1),e=f(!1),i=f(!1),o=()=>{e.value=!0},p=()=>{e.value=!1,setTimeout(()=>{!e.value&&!i.value&&(l.value=!1)},300)},C=()=>{i.value=!0,l.value=!0},d=()=>{i.value=!1,setTimeout(()=>{!e.value&&!i.value&&(l.value=!1)},300)},k=()=>{l.value=!1};return{showEmojiPicker:l,isEmojiHovered:e,isButtonHovered:i,handleEmojiMouseEnter:o,handleEmojiMouseLeave:p,handleButtonMouseEnter:C,handleButtonMouseLeave:d,closeEmojiPicker:k,insertEmoji:(c,r,b,L)=>{const S=r.value;if(S){const T=S.selectionStart,I=S.selectionEnd,E=b.value.substring(0,T),y=b.value.substring(I),U=E+c+y;L(U),ge(()=>{S.focus(),S.setSelectionRange(T+c.length,T+c.length),S.style.height&&(S.style.height="auto",S.style.height="".concat(Math.min(S.scrollHeight,200),"px"))})}else L(b.value+c)},handleGlobalClick:c=>{!c.target.closest(".emoji-picker")&&!c.target.closest(".emoji-button-inline")&&k()}}}function rl(){const l=f(!1),e=f(!1),i=f(!1),o=()=>{e.value=!0},p=()=>{e.value=!1,setTimeout(()=>{!e.value&&!i.value&&(l.value=!1)},300)},C=()=>{i.value=!0,l.value=!0},d=()=>{i.value=!1,setTimeout(()=>{!e.value&&!i.value&&(l.value=!1)},300)},k=()=>{l.value=!1};return{showImagePicker:l,isImageHovered:e,isButtonHovered:i,handleImageMouseEnter:o,handleImageMouseLeave:p,handleImageButtonMouseEnter:C,handleButtonMouseLeave:d,closeImagePicker:k,insertImage:(c,r,b,L)=>{const S=r.value;if(S){const T=S.selectionStart,I=S.selectionEnd,E="[img]".concat(c,"[/img]"),y=b.value.slice(0,T)+E+b.value.slice(I);L(y),ge(()=>{S.focus(),S.setSelectionRange(T+E.length,T+E.length),S.style.height&&(S.style.height="auto",S.style.height="".concat(Math.min(S.scrollHeight,200),"px"))})}else{const T="[img]".concat(c,"[/img]");L(b.value+T)}},handleGlobalClick:c=>{!c.target.closest(".image-picker")&&!c.target.closest(".emoji-button-inline")&&k()}}}function ul(){const l=f(!1),e=f("");return{showLinkModal:l,selectedTextForLink:e,insertLink:(d,k)=>{const M=d.value;if(M){const n=M.selectionStart,c=M.selectionEnd,r=k.value.slice(n,c);e.value=r.trim()||""}l.value=!0},insertLinkFromModal:(d,k,M,n)=>{const c=k.value;if(c){const r=c.selectionStart,b=c.selectionEnd,L="[link=".concat(d.url,"]").concat(d.title,"[/link]"),S=M.value.slice(0,r)+L+M.value.slice(b);n(S),ge(()=>{c.focus(),c.setSelectionRange(r+L.length,r+L.length),c.style.height&&(c.style.height="auto",c.style.height="".concat(Math.min(c.scrollHeight,200),"px"))})}},closeLinkModal:()=>{l.value=!1},insertSpoiler:(d,k,M)=>{const n=d.value;if(n){const c=n.selectionStart,r=n.selectionEnd,b=k.value.slice(c,r);let L;b.trim()?L="[spoiler]".concat(b,"[/spoiler]"):L="[spoiler][/spoiler]";const S=k.value.slice(0,c)+L+k.value.slice(r);M(S),ge(()=>{if(n.focus(),b.trim())n.setSelectionRange(c+L.length,c+L.length);else{const T=c+9;n.setSelectionRange(T,T)}n.style.height&&(n.style.height="auto",n.style.height="".concat(Math.min(n.scrollHeight,200),"px"))})}}}}function dl(){return{autoResize:i=>{const o=i==null?void 0:i.target;o&&(o.style.height="auto",o.style.height="".concat(Math.min(o.scrollHeight,200),"px"))},autoResizeElement:i=>{i&&(i.style.height="auto",i.style.height="".concat(Math.min(i.scrollHeight,200),"px"))}}}function ft(){const l=al(),e=rl(),i=ul(),{autoResize:o,autoResizeElement:p}=dl(),C=()=>{l.isButtonHovered.value=!0,e.isButtonHovered.value=!0,l.showEmojiPicker.value=!0,e.showImagePicker.value=!1},d=()=>{l.isButtonHovered.value=!0,e.isButtonHovered.value=!0,e.showImagePicker.value=!0,l.showEmojiPicker.value=!1},k=()=>{l.isButtonHovered.value=!1,e.isButtonHovered.value=!1,setTimeout(()=>{!l.isEmojiHovered.value&&!e.isImageHovered.value&&!l.isButtonHovered.value&&!e.isButtonHovered.value&&(l.showEmojiPicker.value=!1,e.showImagePicker.value=!1)},300)},M=()=>{l.showEmojiPicker.value=!1,e.showImagePicker.value=!1},n=T=>{!T.target.closest(".emoji-picker")&&!T.target.closest(".image-picker")&&!T.target.closest(".emoji-button-inline")&&M()},c=(T,I,E,y)=>{l.insertEmoji(T,I,E,y)},r=(T,I,E,y)=>{e.insertImage(T,I,E,y)},b=(T,I,E)=>{i.insertLink(T,I,E)},L=(T,I,E,y)=>{i.insertLinkFromModal(T,I,E,y)},S=(T,I,E)=>{i.insertSpoiler(T,I,E)};return qe(()=>{document.addEventListener("click",n)}),dt(()=>{document.removeEventListener("click",n)}),{showEmojiPicker:l.showEmojiPicker,handleEmojiMouseEnter:l.handleEmojiMouseEnter,handleEmojiMouseLeave:l.handleEmojiMouseLeave,closeEmojiPicker:l.closeEmojiPicker,showImagePicker:e.showImagePicker,handleImageMouseEnter:e.handleImageMouseEnter,handleImageMouseLeave:e.handleImageMouseLeave,closeImagePicker:e.closeImagePicker,showLinkModal:i.showLinkModal,selectedTextForLink:i.selectedTextForLink,closeLinkModal:i.closeLinkModal,handleButtonMouseEnter:C,handleImageButtonMouseEnter:d,handleButtonMouseLeave:k,closeAllPickers:M,insertEmojiUniversal:c,insertImageUniversal:r,insertLinkUniversal:b,insertLinkFromModalUniversal:L,insertSpoilerUniversal:S,autoResize:o,autoResizeElement:p}}const cl=l=>l===1?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π":l>=2&&l<=4?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è":"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤",ml=l=>{if(!l)return"?";const e=l.split(" ");return e.length===1?l.slice(0,2).toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()},vl={name:"CommentItem",components:{EmojiPicker:ct,ImagePicker:mt,LinkModal:vt},props:{comment:{type:Object,required:!0,default:()=>({username:"–ê–Ω–æ–Ω–∏–º",user_avatar:null,content:"",created_at:new Date().toISOString(),rating:0,replies:[]})},currentUser:{type:Object,required:!0,default:()=>({})},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate"],setup(l,{emit:e}){var Be,Te;const i=ot(),o=$(()=>{var w;return l.editingCommentId===((w=l.comment)==null?void 0:w.id)}),p=f(((Be=l.comment)==null?void 0:Be.content)||""),C=f(((Te=l.comment)==null?void 0:Te.user_rating)||0),d=f(null),k=f(null),{showEmojiPicker:M,showImagePicker:n,showLinkModal:c,selectedTextForLink:r,handleEmojiMouseEnter:b,handleEmojiMouseLeave:L,handleImageMouseEnter:S,handleImageMouseLeave:T,handleButtonMouseEnter:I,handleImageButtonMouseEnter:E,handleButtonMouseLeave:y,closeEmojiPicker:U,closeImagePicker:A,closeLinkModal:F,insertEmojiUniversal:D,insertImageUniversal:z,insertLinkUniversal:P,insertLinkFromModalUniversal:ae,insertSpoilerUniversal:ce,autoResize:J}=ft(),{formatContentWithTruncation:he}=po();qe(async()=>{var w;if((w=l.comment)!=null&&w.user_avatar){const V=await Ro();d.value="".concat(V).concat(l.comment.user_avatar)}});const me=$(()=>{var w;return l.currentUser&&((w=l.comment)==null?void 0:w.user_id)===l.currentUser.id}),ve=$(()=>{var w;return l.currentUser&&((w=l.comment)==null?void 0:w.user_id)===l.currentUser.id||l.currentUser&&l.currentUser.is_admin===1}),g=$(()=>{var w,V,Ee;return((w=l.comment)==null?void 0:w.updated_at)&&((V=l.comment)==null?void 0:V.updated_at)!==((Ee=l.comment)==null?void 0:Ee.created_at)}),W=$(()=>{var w,V;return(w=l.comment)!=null&&w.is_deleted?!1:(((V=l.comment)==null?void 0:V.rating)||0)<=-3}),Me=$(()=>W.value),we=f(!1),re=$(()=>{var w,V;return(w=l.comment)!=null&&w.is_deleted?null:(((V=l.comment)==null?void 0:V.rating)||0)<=-3?"lowRating":null}),ue=()=>{var w,V;e("start-edit",(w=l.comment)==null?void 0:w.id),p.value=((V=l.comment)==null?void 0:V.content)||"",ge(()=>{k.value&&(k.value.focus(),J({target:k.value}))})},ee=()=>{var w;e("cancel-edit"),p.value=((w=l.comment)==null?void 0:w.content)||""},j=()=>{var w;p.value.trim()&&e("edit",(w=l.comment)==null?void 0:w.id,p.value.trim())},m=()=>{var w;confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π?")&&e("delete",(w=l.comment)==null?void 0:w.id)},Y=w=>{var V,Ee;C.value===w?(C.value=0,e("rate",(V=l.comment)==null?void 0:V.id,w)):(C.value=w,e("rate",(Ee=l.comment)==null?void 0:Ee.id,w))},se=w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),j())},H=$(()=>{var w,V;return((V=(w=l.comment)==null?void 0:w.content)==null?void 0:V.length)>300}),be=f(!1),pe=$(()=>{var w;return he((w=l.comment)==null?void 0:w.content,300,be.value)}),Pe=()=>{be.value=!be.value},je=()=>{console.log("Avatar load error, falling back to initials"),d.value=null,ge(()=>{const w=document.querySelector(".avatar-placeholder");w&&(w.style.display="flex")})},de=()=>{i.push("/login")},ie=w=>{D(w,k,p,V=>{p.value=V})},Ue=w=>{z(w,k,p,V=>{p.value=V})},Se=()=>{ce(k,p,w=>{p.value=w})},Ce=()=>{P(k,p,w=>{p.value=w})},xe=w=>{ae(w,k,p,V=>{p.value=V})},Ve=w=>{J(w)};return Ae(p,()=>{o.value&&k.value&&ge(()=>{Ve({target:k.value})})}),{isEditing:o,editContent:p,userRating:C,isCommentOwner:me,canDeleteComment:ve,isCommentEdited:g,formatDate:Ko,formatRelativeTime:Oo,startEdit:ue,cancelEdit:ee,saveEdit:j,confirmDelete:m,rateComment:Y,avatarUrl:d,getInitials:ml,handleEditKeydown:se,isCommentHidden:Me,showHiddenComment:we,hiddenCommentReason:re,isLongComment:H,isExpanded:be,formattedContent:pe,toggleExpanded:Pe,autoResizeEdit:Ve,editTextarea:k,showEmojiPicker:M,showImagePicker:n,insertEmojiEdit:ie,insertImageEdit:Ue,insertSpoilerEdit:Se,insertLinkEdit:Ce,handleEmojiMouseEnter:b,handleEmojiMouseLeave:L,handleImageMouseEnter:S,handleImageMouseLeave:T,closeEmojiPicker:U,closeImagePicker:A,handleButtonMouseEnter:I,handleButtonMouseLeave:y,handleImageButtonMouseEnter:E,handleAvatarError:je,openLogin:de,showLinkModal:c,selectedTextForLink:r,insertLinkFromModal:xe,closeLinkModal:F}}},fl=["data-comment-id"],kl={class:"comment-header"},gl={class:"user-info"},yl=["href"],hl={class:"user-avatar"},bl=["src","alt"],pl={class:"user-details"},Cl=["href"],wl={class:"username"},_l={key:0,class:"user-rating"},Ml=["title"],El=["title"],Ll={class:"comment-content"},Il={key:0,class:"hidden-comment-warning"},Rl={key:1},Pl={key:0,class:"deleted-comment"},Sl={key:1},Tl={key:0,class:"edit-form"},Al={class:"edit-textarea-container"},jl={class:"edit-footer"},Ul={class:"edit-actions"},xl=["disabled"],Bl={class:"character-counter-container"},Hl={key:1,class:"comment-text-container"},$l=["innerHTML"],Nl={class:"comment-footer"},Dl={class:"comment-actions"},Fl={class:"rating-buttons"},Vl={class:"action-buttons"};function Ol(l,e,i,o,p,C){var n,c,r,b,L,S,T,I,E,y,U,A,F,D,z,P,ae,ce,J,he,me,ve;const d=ye("EmojiPicker"),k=ye("ImagePicker"),M=ye("LinkModal");return a(),u("div",{class:"comment-item","data-comment-id":(n=i.comment)==null?void 0:n.id},[t("div",kl,[t("div",gl,[t("a",{href:"/lists/".concat((c=i.comment)==null?void 0:c.user_id),target:"_blank",rel:"noopener noreferrer",class:"user-avatar-link"},[t("div",hl,[o.avatarUrl?(a(),u("img",{key:0,src:o.avatarUrl,alt:((r=i.comment)==null?void 0:r.username)||"–ê–Ω–æ–Ω–∏–º",onError:e[0]||(e[0]=(...g)=>o.handleAvatarError&&o.handleAvatarError(...g)),onerror:"this.onerror=null; this.style.display='none'; this.nextElementSibling.style.display='flex';"},null,40,bl)):(a(),u("div",{key:1,class:"avatar-placeholder",style:tt({display:o.avatarUrl?"none":"flex"})},v(o.getInitials(((b=i.comment)==null?void 0:b.username)||"–ê–Ω–æ–Ω–∏–º")),5))])],8,yl),t("div",pl,[t("a",{href:"/lists/".concat((L=i.comment)==null?void 0:L.user_id),target:"_blank",rel:"noopener noreferrer",class:"username-link"},[t("span",wl,v(((S=i.comment)==null?void 0:S.username)||"–ê–Ω–æ–Ω–∏–º"),1)],8,Cl),(T=i.comment)!=null&&T.user_movie_rating?(a(),u("span",_l,[e[19]||(e[19]=t("i",{class:"fas fa-star"},null,-1)),Q(" "+v(i.comment.user_movie_rating),1)])):h("",!0),t("span",{class:"date",title:o.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(o.formatDate((I=i.comment)==null?void 0:I.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(o.formatDate((E=i.comment)==null?void 0:E.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(o.formatDate((y=i.comment)==null?void 0:y.created_at))},[Q(v(o.formatRelativeTime((U=i.comment)==null?void 0:U.created_at))+" ",1),o.isCommentEdited?(a(),u("i",{key:0,class:"fas fa-pencil-alt edit-icon",title:o.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(o.formatDate((A=i.comment)==null?void 0:A.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(o.formatDate((F=i.comment)==null?void 0:F.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(o.formatDate((D=i.comment)==null?void 0:D.created_at))},null,8,El)):h("",!0)],8,Ml)])])]),t("div",Ll,[!((z=i.comment)!=null&&z.is_deleted)&&o.isCommentHidden&&!o.showHiddenComment?(a(),u("div",Il,[o.hiddenCommentReason==="lowRating"?(a(),u("p",{key:0,class:"warning-text",onClick:e[1]||(e[1]=g=>o.showHiddenComment=!0)},e[20]||(e[20]=[t("i",{class:"fas fa-eye-slash"},null,-1),Q(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–∫—Ä—ã—Ç –∏–∑-–∑–∞ –Ω–∏–∑–∫–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å. ")]))):h("",!0)])):(a(),u("div",Rl,[(P=i.comment)!=null&&P.is_deleted?(a(),u("div",Pl,e[21]||(e[21]=[t("p",{class:"deleted-message"},[t("i",{class:"fas fa-trash"}),Q(" –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —É–¥–∞–ª—ë–Ω ")],-1)]))):(a(),u("div",Sl,[o.isEditing?(a(),u("div",Tl,[t("div",Al,[O(t("textarea",{ref:"editTextarea","onUpdate:modelValue":e[2]||(e[2]=g=>o.editContent=g),class:"edit-textarea",rows:"3",maxlength:"1500",onKeydown:e[3]||(e[3]=(...g)=>o.handleEditKeydown&&o.handleEditKeydown(...g)),onInput:e[4]||(e[4]=(...g)=>o.autoResizeEdit&&o.autoResizeEdit(...g))},null,544),[[Xe,o.editContent]])]),t("div",jl,[t("div",Ul,[t("button",{onClick:e[5]||(e[5]=(...g)=>o.cancelEdit&&o.cancelEdit(...g)),class:"cancel-button"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:e[6]||(e[6]=(...g)=>o.saveEdit&&o.saveEdit(...g)),class:"save-button",disabled:!o.editContent.trim()||o.editContent.length>1500}," –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ",8,xl)]),t("div",Bl,[t("div",{class:x(["character-counter-inline",{"near-limit":o.editContent.length>1400,"at-limit":o.editContent.length>=1500}])},v(o.editContent.length)+"/1500 ",3),t("button",{type:"button",class:x(["emoji-button-inline",{active:o.showEmojiPicker}]),onMouseenter:e[7]||(e[7]=(...g)=>o.handleButtonMouseEnter&&o.handleButtonMouseEnter(...g)),onMouseleave:e[8]||(e[8]=(...g)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...g))}," üòä ",34),t("button",{type:"button",class:x(["emoji-button-inline",{active:o.showImagePicker}]),onMouseenter:e[9]||(e[9]=(...g)=>o.handleImageButtonMouseEnter&&o.handleImageButtonMouseEnter(...g)),onMouseleave:e[10]||(e[10]=(...g)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...g))},e[22]||(e[22]=[Je('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-8e152b04><g id="logo" data-v-8e152b04><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-8e152b04></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-8e152b04></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-8e152b04></path></g></svg>',1)]),34),t("button",{type:"button",class:"emoji-button-inline spoiler-button",onClick:e[11]||(e[11]=(...g)=>o.insertSpoilerEdit&&o.insertSpoilerEdit(...g)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},e[23]||(e[23]=[t("i",{class:"fas fa-eye-slash"},null,-1)])),t("button",{type:"button",class:"emoji-button-inline link-button",onClick:e[12]||(e[12]=(...g)=>o.insertLinkEdit&&o.insertLinkEdit(...g)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},e[24]||(e[24]=[t("i",{class:"fas fa-link"},null,-1)])),ne(d,{"is-visible":o.showEmojiPicker,onEmojiSelected:o.insertEmojiEdit,onMouseEnter:o.handleEmojiMouseEnter,onMouseLeave:o.handleEmojiMouseLeave,onClose:o.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),ne(k,{"is-visible":o.showImagePicker,"current-user":i.currentUser,onImageSelected:o.insertImageEdit,onMouseEnter:o.handleImageMouseEnter,onMouseLeave:o.handleImageMouseLeave,onClose:o.closeImagePicker,onLoginRequired:o.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),ne(M,{"is-visible":o.showLinkModal,"selected-text":o.selectedTextForLink,onClose:o.closeLinkModal,onSubmit:o.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):(a(),u("div",Hl,[t("p",{class:x(["comment-text",{truncated:o.isLongComment&&!o.isExpanded}]),innerHTML:o.formattedContent},null,10,$l),o.isLongComment?(a(),u("button",{key:0,onClick:e[13]||(e[13]=(...g)=>o.toggleExpanded&&o.toggleExpanded(...g)),class:"expand-button"},v(o.isExpanded?"–°–≤–µ—Ä–Ω—É—Ç—å":"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å"),1)):h("",!0)]))]))]))]),t("div",Nl,[t("div",Dl,[t("div",Fl,[!o.isCommentOwner&&!((ae=i.comment)!=null&&ae.is_deleted)?(a(),u("button",{key:0,onClick:e[14]||(e[14]=g=>o.rateComment(1)),class:x(["rating-button",{"rated-up":o.userRating===1}])},e[25]||(e[25]=[t("i",{class:"fas fa-thumbs-up"},null,-1)]),2)):h("",!0),t("span",{class:x(["rating-count",{"rating-positive":o.userRating===1,"rating-negative":o.userRating===-1}])},v(((ce=i.comment)==null?void 0:ce.rating)||0),3),!o.isCommentOwner&&!((J=i.comment)!=null&&J.is_deleted)?(a(),u("button",{key:1,onClick:e[15]||(e[15]=g=>o.rateComment(-1)),class:x(["rating-button",{"rated-down":o.userRating===-1}])},e[26]||(e[26]=[t("i",{class:"fas fa-thumbs-down"},null,-1)]),2)):h("",!0)]),t("div",Vl,[!i.currentUser||i.currentUser.allow_comments===1?(a(),u("button",{key:0,onClick:e[16]||(e[16]=g=>l.$emit("reply",i.comment)),class:"action-button reply-button"},e[27]||(e[27]=[t("i",{class:"fas fa-reply"},null,-1)]))):h("",!0),o.isCommentOwner&&!((he=i.comment)!=null&&he.is_deleted)&&!o.isEditing&&((me=i.currentUser)==null?void 0:me.allow_comments)===1?(a(),u("button",{key:1,onClick:e[17]||(e[17]=(...g)=>o.startEdit&&o.startEdit(...g)),class:"action-button edit-button"},e[28]||(e[28]=[t("i",{class:"fas fa-edit"},null,-1)]))):h("",!0),o.canDeleteComment&&!((ve=i.comment)!=null&&ve.is_deleted)?(a(),u("button",{key:2,onClick:e[18]||(e[18]=(...g)=>o.confirmDelete&&o.confirmDelete(...g)),class:"action-button delete-button"},e[29]||(e[29]=[t("i",{class:"fas fa-trash"},null,-1)]))):h("",!0)])])])],8,fl)}const Kl=_e(vl,[["render",Ol],["__scopeId","data-v-8e152b04"]]),ql={name:"CommentThread",components:{CommentItem:Kl,EmojiPicker:ct,ImagePicker:mt,LinkModal:vt},props:{comment:{type:Object,required:!0},currentUser:{type:Object,required:!0},replyTo:{type:Object,default:null},replyContent:{type:String,default:""},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate","submit-reply","cancel-reply","update-reply-content","reply-keydown"],setup(l,{emit:e}){const i=f(null),o=f(!0),{showEmojiPicker:p,showImagePicker:C,showLinkModal:d,selectedTextForLink:k,handleEmojiMouseEnter:M,handleEmojiMouseLeave:n,handleImageMouseEnter:c,handleImageMouseLeave:r,handleButtonMouseEnter:b,handleImageButtonMouseEnter:L,handleButtonMouseLeave:S,closeEmojiPicker:T,closeImagePicker:I,closeLinkModal:E,insertEmojiUniversal:y,insertImageUniversal:U,insertLinkUniversal:A,insertLinkFromModalUniversal:F,insertSpoilerUniversal:D}=ft(),z=g=>{e("update-reply-content",g.target.value);const W=g.target;W&&(W.style.height="auto",W.style.height="".concat(Math.min(W.scrollHeight,200),"px"))},P={get value(){return l.replyContent},set value(g){e("update-reply-content",g)}};return{replyTextarea:i,showEmojiPicker:p,showImagePicker:C,isCollapsed:o,insertEmoji:g=>{y(g,i,P,W=>{e("update-reply-content",W)})},insertImage:g=>{U(g,i,P,W=>{e("update-reply-content",W)})},insertSpoiler:()=>{D(i,P,g=>{e("update-reply-content",g)})},handleEmojiMouseEnter:M,handleEmojiMouseLeave:n,handleImageMouseEnter:c,handleImageMouseLeave:r,handleButtonMouseEnter:b,handleButtonMouseLeave:S,closeEmojiPicker:T,closeImagePicker:I,handleImageButtonMouseEnter:L,handleReplyInput:z,toggleCollapsed:()=>{o.value=!o.value},showLinkModal:d,selectedTextForLink:k,insertLink:()=>{A(i,P,g=>{e("update-reply-content",g)})},closeLinkModal:E,insertLinkFromModal:g=>{F(g,i,P,W=>{e("update-reply-content",W)})}}},computed:{canReply(){return this.currentUser?this.currentUser.allow_comments===1:!0},getReplyPlaceholder(){return this.currentUser?this.currentUser.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç..."},formattedContent(){const{formatContent:l}=po();return l(this.comment.content)}}},zl={class:"comment-thread"},Wl={key:0,class:"reply-form"},Gl={class:"textarea-container"},Yl=["value","placeholder","disabled"],Zl={class:"reply-footer"},Ql={class:"reply-actions"},Xl=["disabled"],Jl={class:"character-counter-container"},ei=["disabled"],ti={key:1,class:"replies-container"},oi=["title"],ni={class:"replies-count"},si=["title"],li={key:0,class:"replies-content"};function ii(l,e,i,o,p,C){const d=ye("CommentItem"),k=ye("EmojiPicker"),M=ye("ImagePicker"),n=ye("LinkModal"),c=ye("CommentThread",!0);return a(),u("div",zl,[ne(d,{comment:i.comment,"current-user":i.currentUser,"editing-comment-id":i.editingCommentId,onReply:e[0]||(e[0]=r=>l.$emit("reply",r)),onStartEdit:e[1]||(e[1]=r=>l.$emit("start-edit",r)),onCancelEdit:e[2]||(e[2]=r=>l.$emit("cancel-edit")),onEdit:e[3]||(e[3]=(r,b)=>l.$emit("edit",r,b)),onDelete:e[4]||(e[4]=r=>l.$emit("delete",r)),onRate:e[5]||(e[5]=(r,b)=>l.$emit("rate",r,b))},null,8,["comment","current-user","editing-comment-id"]),i.replyTo&&i.replyTo.id===i.comment.id?(a(),u("div",Wl,[t("div",Gl,[t("textarea",{ref:"replyTextarea",class:"comment-textarea",value:i.replyContent,placeholder:C.getReplyPlaceholder,disabled:i.currentUser&&i.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:e[6]||(e[6]=(...r)=>o.handleReplyInput&&o.handleReplyInput(...r)),onKeydown:e[7]||(e[7]=r=>l.$emit("reply-keydown",r))},null,40,Yl)]),t("div",Zl,[t("div",Ql,[t("button",{class:"cancel-reply",onClick:e[8]||(e[8]=r=>l.$emit("cancel-reply"))},"–û—Ç–º–µ–Ω–∞"),t("button",{class:"submit-button",disabled:!i.replyContent.trim()||i.replyContent.length>1500||i.currentUser&&i.currentUser.allow_comments!==1,onClick:e[9]||(e[9]=r=>l.$emit("submit-reply"))}," –û—Ç–≤–µ—Ç–∏—Ç—å ",8,Xl)]),t("div",Jl,[t("div",{class:x(["character-counter-inline",{"near-limit":i.replyContent.length>1400,"at-limit":i.replyContent.length>=1500}])},v(i.replyContent.length)+"/1500 ",3),t("button",{type:"button",class:x(["emoji-button-inline",{active:o.showEmojiPicker}]),onMouseenter:e[10]||(e[10]=(...r)=>o.handleButtonMouseEnter&&o.handleButtonMouseEnter(...r)),onMouseleave:e[11]||(e[11]=(...r)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...r))}," üòä ",34),t("button",{type:"button",class:x(["emoji-button-inline",{active:o.showImagePicker}]),onMouseenter:e[12]||(e[12]=(...r)=>o.handleImageButtonMouseEnter&&o.handleImageButtonMouseEnter(...r)),onMouseleave:e[13]||(e[13]=(...r)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...r))},e[29]||(e[29]=[Je('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-da7dc7e6><g id="logo" data-v-da7dc7e6><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-da7dc7e6></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-da7dc7e6></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-da7dc7e6></path></g></svg>',1)]),34),t("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:i.currentUser&&i.currentUser.allow_comments!==1,onClick:e[14]||(e[14]=(...r)=>o.insertSpoiler&&o.insertSpoiler(...r)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},e[30]||(e[30]=[t("i",{class:"fas fa-eye-slash"},null,-1)]),8,ei),t("button",{type:"button",class:"emoji-button-inline link-button",onClick:e[15]||(e[15]=(...r)=>o.insertLink&&o.insertLink(...r)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},e[31]||(e[31]=[t("i",{class:"fas fa-link"},null,-1)])),ne(k,{"is-visible":o.showEmojiPicker,onEmojiSelected:o.insertEmoji,onMouseEnter:o.handleEmojiMouseEnter,onMouseLeave:o.handleEmojiMouseLeave,onClose:o.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),ne(M,{"is-visible":o.showImagePicker,"current-user":i.currentUser,onImageSelected:o.insertImage,onMouseEnter:o.handleImageMouseEnter,onMouseLeave:o.handleImageMouseLeave,onClose:o.closeImagePicker,onLoginRequired:e[16]||(e[16]=()=>l.$router.push("/login"))},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose"]),ne(n,{"is-visible":o.showLinkModal,"selected-text":o.selectedTextForLink,onClose:o.closeLinkModal,onSubmit:o.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):h("",!0),i.comment.replies&&i.comment.replies.length>0?(a(),u("div",ti,[t("button",{class:"collapse-toggle",title:o.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:e[17]||(e[17]=(...r)=>o.toggleCollapsed&&o.toggleCollapsed(...r))},[t("span",{class:x(["collapse-icon",{expanded:!o.isCollapsed}])},e[32]||(e[32]=[t("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},[t("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1)]),2),t("span",ni,v(i.comment.replies.length)+" "+v(i.comment.replies.length===1?"–æ—Ç–≤–µ—Ç":"–æ—Ç–≤–µ—Ç–æ–≤"),1)],8,oi),t("div",{class:"vertical-line-clickable",title:o.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:e[18]||(e[18]=(...r)=>o.toggleCollapsed&&o.toggleCollapsed(...r))},[t("div",{class:x(["vertical-line-visual",{collapsed:o.isCollapsed}])},null,2)],8,si),o.isCollapsed?h("",!0):(a(),u("div",li,[(a(!0),u(te,null,ke(i.comment.replies,r=>(a(),Re(c,{key:r.id,comment:r,"current-user":i.currentUser,"reply-to":i.replyTo,"reply-content":i.replyContent,"editing-comment-id":i.editingCommentId,onReply:e[19]||(e[19]=b=>l.$emit("reply",b)),onStartEdit:e[20]||(e[20]=b=>l.$emit("start-edit",b)),onCancelEdit:e[21]||(e[21]=b=>l.$emit("cancel-edit")),onEdit:e[22]||(e[22]=(b,L)=>l.$emit("edit",b,L)),onDelete:e[23]||(e[23]=b=>l.$emit("delete",b)),onRate:e[24]||(e[24]=(b,L)=>l.$emit("rate",b,L)),onSubmitReply:e[25]||(e[25]=b=>l.$emit("submit-reply")),onCancelReply:e[26]||(e[26]=b=>l.$emit("cancel-reply")),onUpdateReplyContent:e[27]||(e[27]=b=>l.$emit("update-reply-content",b)),onReplyKeydown:e[28]||(e[28]=b=>l.$emit("reply-keydown",b))},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id"]))),128))]))])):h("",!0)])}const ai=_e(ql,[["render",ii],["__scopeId","data-v-da7dc7e6"]]),ri={name:"Comments",components:{CommentThread:ai,Notification:nt,EmojiPicker:ct,ImagePicker:mt,LinkModal:vt},props:{movieId:{type:[String,Number],required:!0}},setup(l){const e=ut(),i=ot(),o=et(),p=f([]),C=f(""),d=f(null),k=f(""),M=f(null),n=f(e.user),c=f(null),r=f(null),b=f(o.isAutoShowComments),L=f(!1),S=f(3),T=f(3),{showEmojiPicker:I,showImagePicker:E,showLinkModal:y,selectedTextForLink:U,handleEmojiMouseEnter:A,handleEmojiMouseLeave:F,handleImageMouseEnter:D,handleImageMouseLeave:z,handleButtonMouseEnter:P,handleImageButtonMouseEnter:ae,handleButtonMouseLeave:ce,closeEmojiPicker:J,closeImagePicker:he,closeLinkModal:me,insertEmojiUniversal:ve,insertImageUniversal:g,insertLinkUniversal:W,insertLinkFromModalUniversal:Me,insertSpoilerUniversal:we,autoResize:re}=ft(),ue=$(()=>{const B=(K=null)=>p.value.filter(Z=>Z.parent_id===K).sort((Z,le)=>Z.id-le.id).map(Z=>({...Z,replies:B(Z.id)})).filter(Z=>!Z.is_deleted||Z.replies&&Z.replies.length>0);return B()}),ee=$(()=>{const B=K=>K.reduce((Z,le)=>Z+1+B(le.replies||[]),0);return B(ue.value)}),j=$(()=>ue.value.slice(0,T.value)),m=$(()=>ue.value.length>T.value),Y=$(()=>ue.value.length-T.value),se=()=>{T.value+=S.value},H=async()=>{try{const B=await Po(l.movieId);p.value=B}catch(B){console.error("Failed to load comments:",B),c.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.")}},be=async()=>{if(L.value)return;if(!e.token){c.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Ce});return}if(n.value&&n.value.allow_comments!==1){c.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!C.value.replace(/\[spoiler\]\s*\[\/spoiler\]/g,"").replace(/\[img\]\s*\[\/img\]/g,"").replace(/\[link=[^\]]+\]\s*\[\/link\]/g,"").trim()){c.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º");return}if(C.value.length>1500){c.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await uo(l.movieId,C.value.trim()),C.value="",await H(),b.value=!0,ge(()=>{r.value&&(r.value.focus(),r.value.style.height="auto"),setTimeout(()=>{const K=document.querySelectorAll(".comment-item[data-comment-id]");if(K.length>0){const Z=Array.from(K).map(le=>parseInt(le.getAttribute("data-comment-id"))).filter(le=>!isNaN(le));if(Z.length>0){const le=Math.max(...Z),Oe=document.querySelector('[data-comment-id="'.concat(le,'"]'));Oe&&Oe.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}},300)})}catch(K){console.error("Failed to create comment:",K),c.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},pe=B=>{if(!e.token){c.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Ce});return}M.value=null,d.value=B,k.value="",ge(()=>{const K=document.querySelector(".reply-form");K&&K.scrollIntoView({behavior:"smooth",block:"center"})})},Pe=async()=>{if(!e.token){c.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Ce});return}if(n.value&&n.value.allow_comments!==1){c.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!(!k.value.trim()||!d.value)){if(k.value.length>1500){c.value.showNotification("–û—Ç–≤–µ—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await uo(l.movieId,k.value.trim(),d.value.id);const B=d.value.id;await H(),k.value="",d.value=null,ge(()=>{setTimeout(()=>{const K=document.querySelector('[data-comment-id="'.concat(B,'"]'));if(K){const Z=K.querySelector(".replies-content");if(Z){const le=Z.querySelectorAll(".comment-item[data-comment-id]");if(le.length>0){const Oe=Array.from(le).map(Ke=>parseInt(Ke.getAttribute("data-comment-id"))).filter(Ke=>!isNaN(Ke));if(Oe.length>0){const Ke=Math.max(...Oe),oe=document.querySelector('[data-comment-id="'.concat(Ke,'"]'));oe&&oe.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}}}},300)})}catch(B){console.error("Error submitting reply:",B),c.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}}},je=async(B,K)=>{if(!e.token){c.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Ce});return}if(n.value&&n.value.allow_comments!==1){c.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(K.length>1500){c.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await Ao(B,K.trim()),await H(),M.value=null}catch(Z){console.error("Failed to update comment:",Z),c.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},de=async B=>{if(!e.token){c.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Ce});return}try{await To(B),await H()}catch(K){console.error("Failed to delete comment:",K),c.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},ie=async(B,K)=>{if(!e.token){c.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Ce});return}try{await So(B,K),await H()}catch(Z){console.error("Failed to rate comment:",Z),c.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ü–µ–Ω–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},Ue=B=>{L.value||I.value||B.key==="Enter"&&!B.shiftKey&&(B.preventDefault(),be())},Se=B=>{B.key==="Enter"&&!B.shiftKey&&(B.preventDefault(),Pe())},Ce=()=>{i.push("/login")},xe=B=>{L.value=!0,ve(B,r,C,K=>{C.value=K}),setTimeout(()=>{L.value=!1},100)},Ve=B=>{g(B,r,C,K=>{C.value=K})},Be=()=>{we(r,C,B=>{C.value=B})},Te=()=>{W(r,C,B=>{C.value=B})},w=B=>{Me(B,r,C,K=>{C.value=K})},V=$(()=>n.value?n.value.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."),Ee=$(()=>n.value?n.value.allow_comments===1:!0),st=B=>{d.value=null,k.value="",M.value=B},lt=()=>{M.value=null};return qe(()=>{H()}),{comments:p,groupedComments:ue,displayedComments:j,hasMoreComments:m,remainingCommentsCount:Y,showMoreComments:se,newComment:C,replyTo:d,replyContent:k,editingCommentId:M,currentUser:n,notificationRef:c,commentTextarea:r,showComments:b,submitComment:be,handleReply:pe,submitReply:Pe,handleEdit:je,handleDelete:de,handleRate:ie,handleCommentKeydown:Ue,handleReplyKeydown:Se,autoResize:re,totalCommentsCount:ee,getCommentWordForm:cl,showEmojiPicker:I,showImagePicker:E,showLinkModal:y,selectedTextForLink:U,insertEmoji:xe,insertImage:Ve,handleEmojiMouseEnter:A,handleEmojiMouseLeave:F,handleImageMouseEnter:D,handleImageMouseLeave:z,closeEmojiPicker:J,closeImagePicker:he,handleButtonMouseLeave:ce,handleButtonMouseEnter:P,handleImageButtonMouseEnter:ae,getCommentPlaceholder:V,canComment:Ee,handleStartEdit:st,handleCancelEdit:lt,insertSpoiler:Be,insertLink:Te,insertLinkFromModal:w,closeLinkModal:me}}},ui={class:"comments-section"},di={class:"spoiler-content"},ci={key:1,class:"comments-container"},mi={class:"comments-header"},vi={class:"textarea-container"},fi=["placeholder","disabled"],ki={class:"comment-footer"},gi={class:"comment-actions"},yi=["disabled"],hi={class:"character-counter-container"},bi=["disabled"],pi=["disabled"],Ci=["disabled"],wi={class:"comments-list"},_i={key:0,class:"show-more-comments"};function Mi(l,e,i,o,p,C){const d=ye("EmojiPicker"),k=ye("ImagePicker"),M=ye("LinkModal"),n=ye("CommentThread"),c=ye("Notification");return a(),u("div",ui,[o.showComments?(a(),u("div",ci,[t("div",mi,[t("button",{class:"hide-comments-btn",onClick:e[1]||(e[1]=r=>o.showComments=!1)},e[18]||(e[18]=[t("i",{class:"fas fa-eye-slash"},null,-1),Q(" –°–∫—Ä—ã—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ")]))]),t("form",{class:"comment-form",onSubmit:e[11]||(e[11]=Fe((...r)=>o.submitComment&&o.submitComment(...r),["prevent"]))},[t("div",vi,[O(t("textarea",{ref:"commentTextarea","onUpdate:modelValue":e[2]||(e[2]=r=>o.newComment=r),class:"comment-textarea",placeholder:o.getCommentPlaceholder,disabled:o.currentUser&&o.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:e[3]||(e[3]=(...r)=>o.autoResize&&o.autoResize(...r)),onKeydown:e[4]||(e[4]=(...r)=>o.handleCommentKeydown&&o.handleCommentKeydown(...r))},null,40,fi),[[Xe,o.newComment]])]),t("div",ki,[t("div",gi,[t("button",{class:"submit-button",type:"submit",disabled:!o.newComment.trim()||o.newComment.length>1500||o.currentUser&&o.currentUser.allow_comments!==1}," –û—Ç–ø—Ä–∞–≤–∏—Ç—å ",8,yi)]),t("div",hi,[t("div",{class:x(["character-counter-inline",{"near-limit":o.newComment.length>1400,"at-limit":o.newComment.length>=1500}])},v(o.newComment.length)+"/1500 ",3),t("button",{type:"button",class:x(["emoji-button-inline",{active:o.showEmojiPicker}]),disabled:o.currentUser&&o.currentUser.allow_comments!==1,onMouseenter:e[5]||(e[5]=(...r)=>o.handleButtonMouseEnter&&o.handleButtonMouseEnter(...r)),onMouseleave:e[6]||(e[6]=(...r)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...r))}," üòä ",42,bi),t("button",{type:"button",class:x(["emoji-button-inline",{active:o.showImagePicker}]),disabled:o.currentUser&&o.currentUser.allow_comments!==1,onMouseenter:e[7]||(e[7]=(...r)=>o.handleImageButtonMouseEnter&&o.handleImageButtonMouseEnter(...r)),onMouseleave:e[8]||(e[8]=(...r)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...r))},e[19]||(e[19]=[Je('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-b78de9c9><g id="logo" data-v-b78de9c9><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-b78de9c9></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-b78de9c9></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-b78de9c9></path></g></svg>',1)]),42,pi),t("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:o.currentUser&&o.currentUser.allow_comments!==1,onClick:e[9]||(e[9]=(...r)=>o.insertSpoiler&&o.insertSpoiler(...r)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},e[20]||(e[20]=[t("i",{class:"fas fa-eye-slash"},null,-1)]),8,Ci),t("button",{type:"button",class:"emoji-button-inline link-button",onClick:e[10]||(e[10]=(...r)=>o.insertLink&&o.insertLink(...r)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},e[21]||(e[21]=[t("i",{class:"fas fa-link"},null,-1)])),ne(d,{"is-visible":o.showEmojiPicker&&o.canComment,onEmojiSelected:o.insertEmoji,onMouseEnter:o.handleEmojiMouseEnter,onMouseLeave:o.handleEmojiMouseLeave,onClose:o.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),ne(k,{"is-visible":o.showImagePicker&&o.canComment,"current-user":o.currentUser,onImageSelected:o.insertImage,onMouseEnter:o.handleImageMouseEnter,onMouseLeave:o.handleImageMouseLeave,onClose:o.closeImagePicker,onLoginRequired:l.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),ne(M,{"is-visible":o.showLinkModal,"selected-text":o.selectedTextForLink,onClose:o.closeLinkModal,onSubmit:o.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])],32),t("div",wi,[(a(!0),u(te,null,ke(o.displayedComments,r=>(a(),Re(n,{key:r.id,comment:r,"current-user":o.currentUser,"reply-to":o.replyTo,"reply-content":o.replyContent,"editing-comment-id":o.editingCommentId,"is-first-comment":!1,onReply:o.handleReply,onStartEdit:o.handleStartEdit,onCancelEdit:o.handleCancelEdit,onEdit:o.handleEdit,onDelete:o.handleDelete,onRate:o.handleRate,onSubmitReply:o.submitReply,onCancelReply:e[12]||(e[12]=b=>o.replyTo=null),onUpdateReplyContent:e[13]||(e[13]=b=>o.replyContent=b),onReplyKeydown:o.handleReplyKeydown},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id","onReply","onStartEdit","onCancelEdit","onEdit","onDelete","onRate","onSubmitReply","onReplyKeydown"]))),128)),o.hasMoreComments?(a(),u("div",_i,[t("button",{class:"show-more-btn",onClick:e[14]||(e[14]=(...r)=>o.showMoreComments&&o.showMoreComments(...r))}," –ü–æ–∫–∞–∑–∞—Ç—å –µ—â–µ "+v(o.remainingCommentsCount)+" "+v(o.getCommentWordForm(o.remainingCommentsCount)),1)])):h("",!0)])])):(a(),u("div",{key:0,class:"spoiler-warning",onClick:e[0]||(e[0]=r=>o.showComments=!0)},[t("div",di,[e[15]||(e[15]=t("i",{class:"fas fa-eye-slash"},null,-1)),e[16]||(e[16]=t("h3",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–∫—Ä—ã—Ç—ã",-1)),e[17]||(e[17]=t("p",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä—ã. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å.",-1)),t("div",{class:x(["comments-count",{"no-comments":o.totalCommentsCount===0}])},[o.totalCommentsCount===0?(a(),u(te,{key:0},[Q(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç ")],64)):(a(),u(te,{key:1},[Q(v(o.totalCommentsCount)+" "+v(o.getCommentWordForm(o.totalCommentsCount)),1)],64))],2)])])),ne(c,{ref:"notificationRef"},null,512)])}const Ei=_e(ri,[["render",Mi],["__scopeId","data-v-b78de9c9"]]),Li={class:"movie-info"},Ii={class:"content"},Ri={key:0,class:"content-card"},Pi={class:"movie-skeleton"},Si={class:"movie-skeleton__player"},Ti={key:2,class:"content-card"},Ai={key:3,class:"content-card"},ji={class:"content-header"},Ui=["src"],xi={class:"content-title"},Bi={key:0,class:"ratings-links"},Hi={key:1},$i=["href","title"],Ni={key:2},Di=["href","title"],Fi={key:3},Vi=["href","title"],Oi={key:4},Ki=["href","title"],qi={key:5},zi=["href"],Wi={key:6,class:"rating-links-group"},Gi=["href"],Yi=["title"],Zi={key:0,class:"fa-regular fa-face-grin-wink"},Qi={key:1,class:"fas fa-spinner fa-spin"},Xi={key:2,class:"nudity-info-popup"},Ji={class:"nudity-info-content"},ea=["content"],ta=["content"],oa={class:"additional-info"},na={class:"info-content"},sa={key:0,class:"movie-poster-container desktop-only"},la=["href"],ia=["src"],aa={class:"details-container"},ra={class:"info-list"},ua={key:0},da={key:1},ca={key:2},ma={key:3},va={key:4},fa={key:5},ka={key:6},ga={key:7},ya={key:8},ha={class:"content-info"},ba={key:0,class:"content-description-text"},pa={key:2,class:"comments-section"},Ca={key:3,class:"staff-section"},wa={class:"staff-categories"},_a={key:0,class:"staff-category"},Ma={class:"staff-list"},Ea=["href","title"],La=["src","alt"],Ia={class:"staff-name"},Ra={key:0,class:"staff-role"},Pa=["href","title"],Sa={key:1,class:"staff-category"},Ta={class:"staff-names-container"},Aa={class:"staff-names-list"},ja=["href"],Ua=["href","title"],xa={key:2,class:"staff-category"},Ba={class:"staff-names-container"},Ha={class:"staff-names-list"},$a=["href"],Na=["href","title"],Da={key:4,class:"yt-video-container"},Fa={key:5,class:"related-movies"},Va=["title"],Oa={key:6,class:"related-movies"},Ka=["title"],qa={__name:"MovieInfo",setup(l){const e=f(!0),i=et(),o=ut(),p=jo(),C=go(),d=f(C.params.kp_id),k=f(""),M=f(null),n=f(null),c=Uo(),b=Vo().areTrailersActive,L=f(null),S=f(!1),T=f(!1),I=f(10),E=f(null),y=f(!1),U=$(()=>i.isCommentsEnabled),A=()=>{if(n.value){const j=n.value.name_ru||n.value.name_en||n.value.name_original||"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å–º–µ";document.title=j}},F=j=>j?j.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",D=j=>(j||[]).map(m=>({kp_id:m.film_id,poster:m.poster_url_preview||m.poster_url,title:m.name_ru||m.name_en||m.name_original})),z=j=>{if(typeof j!="number")return;const m=Math.floor(j/60),Y=j%60;return"".concat(m," —á. ").concat(Y," –º–∏–Ω.")},P=f(!1),ae=f({top:"0px",left:"0px"}),ce=j=>{P.value=!0,ae.value={top:"".concat(j.pageY+10,"px"),left:"".concat(j.pageX-70,"px")}},J=f(null),he=async()=>{try{const j=[n.value.name_ru||n.value.name_en||n.value.name_original,...n.value.year?[n.value.year]:[],...n.value.film_length?[z(n.value.film_length)]:[]];await navigator.clipboard.writeText(j.join(", ")),J.value.showNotification("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ")}catch(j){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",j)}},me=async(j=!0)=>{var m,Y,se,H,be,pe,Pe,je;try{let de;if(d.value.startsWith("shiki")?de=await Bo(d.value):de=await Ho(d.value,o.token),Array.isArray(de)&&de.length===0)throw new Error("–î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–∏—Å–∫.");n.value=de,d.value.startsWith("shiki")?n.value={...n.value,title:n.value.name_ru||n.value.name_en,name_original:n.value.name_en,short_description:n.value.slogan}:n.value={...n.value,title:n.value.name_ru||n.value.name_en||n.value.name_original,kinopoisk_id:d.value},c.setHeaderContent({text:n.value.title,imageUrl:n.value.logo_url}),A();const ie={kp_id:d.value,title:((m=n.value)==null?void 0:m.name_ru)||((Y=n.value)==null?void 0:Y.name_en)||((se=n.value)==null?void 0:se.name_original),poster:((H=n.value)==null?void 0:H.poster_url)||((be=n.value)==null?void 0:be.cover_url)||((pe=n.value)==null?void 0:pe.screenshots[0]),year:(Pe=n.value)==null?void 0:Pe.year,type:(je=n.value)==null?void 0:je.type};if(d.value.startsWith("shiki"))if(n.value.screenshots&&n.value.screenshots.length>0){const Se=Math.floor(Math.random()*n.value.screenshots.length),Ce=n.value.screenshots[Se];p.updateMoviePoster(Ce)}else ie.poster&&p.updateMoviePoster(ie.poster);else ie.poster&&p.updateMoviePoster(ie.poster);if($(()=>i.isHistoryAllowed).value&&ie.kp_id&&ie.title&&j)if(o.token)try{await ho(ie.kp_id,q.HISTORY)}catch(Se){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é:",Se)}else i.addToHistory({...ie})}catch(de){const{message:ie,code:Ue}=rt(de);k.value=ie,M.value=Ue,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–ª—å–º–∞—Ö:",de)}},ve=$(()=>{var j,m;return console.log("–¢—Ä–µ–π–ª–µ—Ä—ã:",(j=n.value)==null?void 0:j.videos),(m=n.value)==null?void 0:m.videos}),g=$(()=>{var j;return D((j=n.value)==null?void 0:j.sequels_and_prequels)}),W=$(()=>{var j;return D((j=n.value)==null?void 0:j.similars)}),Me=()=>{var se;const j=((se=document.querySelector(".related-movies"))==null?void 0:se.clientWidth)||0,Y=Math.floor(j/160)||10;I.value=Math.max(1,Y)},we=()=>{Me()},re=j=>{if(j.altKey&&j.keyCode===84&&document.querySelector(".player-container")){const Y=document.querySelector(".theater-mode-btn");Y&&Y.click()}},ue=async()=>{var j;if(!o.token){J.value.showNotification('–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:()=>c.openLogin()});return}if((j=n.value)!=null&&j.imdb_id){if(E.value){E.value=null;return}y.value=!0;try{const m=await $o(n.value.imdb_id);E.value=m.nudity_info}catch(m){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö:",m),J.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö")}finally{y.value=!1}}};qe(async()=>{await me(),e.value=!1,document.addEventListener("keydown",re),window.addEventListener("resize",we),setTimeout(Me,100)}),xo(async()=>{c.clearHeaderContent(),document.removeEventListener("keydown",re),window.removeEventListener("resize",we)}),Ae(()=>C.params.kp_id,async j=>{j&&j!==d.value&&(c.clearHeaderContent(),d.value=j,L.value=null,await me(),e.value=!1)},{immediate:!0}),Ae(n,()=>{A()},{deep:!0});const ee=j=>{var m,Y;return((Y=(m=n.value)==null?void 0:m.staff)==null?void 0:Y.filter(se=>se.profession_key===j))||[]};return(j,m)=>{var Y,se;return a(),u(te,null,[t("div",Li,[t("div",Ii,[(e.value||!n.value)&&!k.value?(a(),u("div",Ri,[t("div",Pi,[m[4]||(m[4]=Je('<div class="movie-skeleton__header" data-v-7724dca3><div class="movie-skeleton__title" data-v-7724dca3></div></div><div class="movie-skeleton__ratings" data-v-7724dca3><div class="movie-skeleton__rating-item" data-v-7724dca3></div><div class="movie-skeleton__rating-item" data-v-7724dca3></div><div class="movie-skeleton__rating-item" data-v-7724dca3></div></div>',2)),t("div",Si,[ne(bo)]),m[5]||(m[5]=Je('<div class="movie-skeleton__additional-info" data-v-7724dca3><div class="movie-skeleton__section-title" data-v-7724dca3></div><div class="movie-skeleton__info-list" data-v-7724dca3><div class="movie-skeleton__info-item" data-v-7724dca3></div><div class="movie-skeleton__info-item" data-v-7724dca3></div><div class="movie-skeleton__info-item" data-v-7724dca3></div><div class="movie-skeleton__info-item" data-v-7724dca3></div><div class="movie-skeleton__info-item" data-v-7724dca3></div></div></div><div class="movie-skeleton__description" data-v-7724dca3><div class="movie-skeleton__description-line" data-v-7724dca3></div><div class="movie-skeleton__description-line" data-v-7724dca3></div><div class="movie-skeleton__description-line" data-v-7724dca3></div><div class="movie-skeleton__description-line" data-v-7724dca3></div></div>',2))])])):h("",!0),k.value?(a(),Re(yo,{key:1,message:k.value,code:M.value},null,8,["message","code"])):h("",!0),k.value?(a(),u("div",Ti,[(a(),Re(ko,{key:d.value,"kp-id":d.value,"movie-info":n.value,"onUpdate:movieInfo":me},null,8,["kp-id","movie-info"]))])):h("",!0),n.value&&!e.value?(a(),u("div",Ai,[t("div",ji,[n.value.logo_url?(a(),u("div",{key:0,class:"content-logo",onMousemove:ce,onMouseleave:m[0]||(m[0]=H=>P.value=!1),onClick:he},[t("img",{src:n.value.logo_url,alt:"–õ–æ–≥–æ—Ç–∏–ø —Ñ–∏–ª—å–º–∞",class:"content-logo"},null,8,Ui)],32)):(a(),u("div",{key:1,onMousemove:ce,onMouseleave:m[1]||(m[1]=H=>P.value=!1),onClick:he},[t("h1",xi,v(n.value.title),1)],32)),O(t("div",{class:"title-copy-tooltip",style:tt(ae.value)}," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ",4),[[G,P.value]])]),n.value.kinopoisk_id||n.value.title||n.value.imdb_id||n.value.rating_imdb||n.value.shikimori_id?(a(),u("div",Bi,[n.value.kinopoisk_id?(a(),Re(Ts,{key:0,"kp-id":n.value.kinopoisk_id,"show-dash":!0},null,8,["kp-id"])):h("",!0),n.value.kinopoisk_id?(a(),u("div",Hi,[t("a",{href:"https://www.kinopoisk.ru/film/".concat(n.value.kinopoisk_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:n.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(F(n.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[m[6]||(m[6]=t("img",{src:mo,alt:"–ö–ü",class:"rating-logo"},null,-1)),t("span",null,v(n.value.rating_kinopoisk?n.value.rating_kinopoisk:"‚Äî"),1),m[7]||(m[7]=t("img",{src:ze,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,$i)])):h("",!0),!n.value.kinopoisk_id&&n.value.title?(a(),u("div",Ni,[t("a",{href:"https://www.kinopoisk.ru/index.php?kp_query=".concat(encodeURIComponent(n.value.title+(n.value.year?" "+n.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:n.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(F(n.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[m[8]||(m[8]=t("img",{src:mo,alt:"–ö–ü",class:"rating-logo"},null,-1)),t("span",null,v(n.value.rating_kinopoisk?n.value.rating_kinopoisk:"‚Äî"),1),m[9]||(m[9]=t("img",{src:ze,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Di)])):h("",!0),n.value.imdb_id?(a(),u("div",Fi,[t("a",{href:"https://www.imdb.com/title/".concat(n.value.imdb_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:n.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(F(n.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[m[10]||(m[10]=t("img",{src:vo,alt:"IMDb",class:"rating-logo"},null,-1)),t("span",null,v(n.value.rating_imdb?n.value.rating_imdb:"‚Äî"),1),m[11]||(m[11]=t("img",{src:ze,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Vi)])):h("",!0),!n.value.imdb_id&&n.value.title?(a(),u("div",Oi,[t("a",{href:"https://www.imdb.com/find/?q=".concat(encodeURIComponent(n.value.title+(n.value.year?" "+n.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:n.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(F(n.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[m[12]||(m[12]=t("img",{src:vo,alt:"IMDb",class:"rating-logo"},null,-1)),t("span",null,v(n.value.rating_imdb?n.value.rating_imdb:"‚Äî"),1),m[13]||(m[13]=t("img",{src:ze,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Ki)])):h("",!0),n.value.shikimori_id?(a(),u("div",qi,[t("a",{href:"https://shikimori.one/animes/".concat(n.value.shikimori_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},m[14]||(m[14]=[t("img",{src:qo,alt:"Shiki",class:"rating-logo"},null,-1),t("img",{src:ze,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,zi)])):h("",!0),n.value.imdb_id?(a(),u("div",Wi,[t("a",{href:"https://www.imdb.com/title/".concat(n.value.imdb_id,"/parentalguide"),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},m[15]||(m[15]=[t("span",null,"Parents Guide",-1),t("img",{src:ze,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,Gi),t("button",{class:"rating-link nudity-info-btn",onClick:ue,title:E.value?"–°–∫—Ä—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é":"–ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ü–µ–Ω–∞—Ö(Sex & Nudity)"},[y.value?(a(),u("i",Qi)):(a(),u("i",Zi)),E.value?(a(),u("div",Xi,[t("div",Ji,v(E.value),1)])):h("",!0)],8,Yi)])):h("",!0)])):h("",!0),(a(),Re(ko,{key:d.value,"kp-id":d.value,"movie-info":n.value,"onUpdate:movieInfo":me},null,8,["kp-id","movie-info"])),t("meta",{name:"title-and-year",content:n.value.type==="FILM"&&n.value.year?"".concat(n.value.title," (").concat(n.value.year,")"):n.value.title},null,8,ea),n.value.name_original?(a(),u("meta",{key:1,name:"original-title",content:n.value.name_original},null,8,ta)):h("",!0),t("div",oa,[m[25]||(m[25]=t("h2",{class:"additional-info-title"},"–ü–æ–¥—Ä–æ–±–Ω–µ–µ",-1)),t("div",na,[n.value.poster_url?(a(),u("div",sa,[t("a",{href:n.value.poster_url,target:"_blank",rel:"noopener noreferrer"},[t("img",{src:n.value.poster_url,alt:"–ü–æ—Å—Ç–µ—Ä —Ñ–∏–ª—å–º–∞",class:"movie-poster"},null,8,ia)],8,la)])):h("",!0),t("div",aa,[t("ul",ra,[n.value.type&&X(co)[n.value.type]?(a(),u("li",ua,[m[16]||(m[16]=t("strong",null,"–¢–∏–ø:",-1)),Q(" "+v(X(co)[n.value.type]),1)])):h("",!0),n.value.year?(a(),u("li",da,[m[17]||(m[17]=t("strong",null,"–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞:",-1)),Q(" "+v(n.value.year),1)])):h("",!0),n.value.title?(a(),u("li",ca,[m[18]||(m[18]=t("strong",null,"–ù–∞–∑–≤–∞–Ω–∏–µ:",-1)),Q(" "+v(n.value.title),1)])):h("",!0),n.value.name_original?(a(),u("li",ma,[m[19]||(m[19]=t("strong",null,"–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:",-1)),Q(" "+v(n.value.name_original),1)])):h("",!0),n.value.slogan?(a(),u("li",va,[m[20]||(m[20]=t("strong",null,"–°–ª–æ–≥–∞–Ω:",-1)),Q(" "+v(n.value.slogan),1)])):h("",!0),n.value.production_companies?(a(),u("li",fa,[m[21]||(m[21]=t("strong",null,"–ü—Ä–æ–¥–∞–∫—à–Ω:",-1)),Q(" "+v(n.value.production_companies),1)])):h("",!0),(Y=n.value.countries)!=null&&Y.length?(a(),u("li",ka,[m[22]||(m[22]=t("strong",null,"–°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞:",-1)),Q(" "+v(n.value.countries.map(H=>H.country).join(", ")),1)])):h("",!0),(se=n.value.genres)!=null&&se.length?(a(),u("li",ga,[m[23]||(m[23]=t("strong",null,"–ñ–∞–Ω—Ä—ã:",-1)),Q(" "+v(n.value.genres.map(H=>H.genre).join(", ")),1)])):h("",!0),n.value.film_length?(a(),u("li",ya,[m[24]||(m[24]=t("strong",null,"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:",-1)),Q(" "+v(z(n.value.film_length)),1)])):h("",!0)]),t("div",ha,[n.value.description?(a(),u("p",ba,v(n.value.description),1)):h("",!0)])])])]),U.value?(a(),u("div",pa,[(a(),Re(Ei,{"movie-id":d.value,key:d.value},null,8,["movie-id"]))])):h("",!0),n.value.staff?(a(),u("div",Ca,[t("div",wa,[ee("ACTOR").length?(a(),u("div",_a,[m[26]||(m[26]=t("h3",{class:"additional-info-title"},"–ê–∫—Ç—ë—Ä—ã",-1)),t("div",Ma,[(a(!0),u(te,null,ke(ee("ACTOR").slice(0,12),H=>(a(),u("div",{key:H.staff_id,class:"staff-item"},[t("a",{href:"https://www.kinopoisk.ru/name/".concat(H.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-link",title:H.description||""},[t("img",{src:H.poster_url,alt:H.name_ru,class:"staff-photo"},null,8,La),t("span",Ia,v(H.name_ru||H.name_en),1),H.description?(a(),u("span",Ra,v(H.description),1)):h("",!0)],8,Ea)]))),128)),t("a",{class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(d.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(ee("ACTOR").length," –∞–∫—Ç–µ—Ä–æ–≤")}," +"+v(ee("ACTOR").length-12),9,Pa)])])):h("",!0),ee("DIRECTOR").length?(a(),u("div",Sa,[m[27]||(m[27]=t("h3",{class:"additional-info-title"},"–†–µ–∂–∏—Å—Å—ë—Ä—ã",-1)),t("div",Ta,[t("div",Aa,[(a(!0),u(te,null,ke(ee("DIRECTOR").slice(0,5),H=>(a(),u("a",{key:H.staff_id,href:"https://www.kinopoisk.ru/name/".concat(H.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},v(H.name_ru||H.name_en),9,ja))),128)),ee("DIRECTOR").length>5?(a(),u("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(d.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(ee("DIRECTOR").length," —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–≤")}," +"+v(ee("DIRECTOR").length-5),9,Ua)):h("",!0)])])])):h("",!0),ee("PRODUCER").length?(a(),u("div",xa,[m[28]||(m[28]=t("h3",{class:"additional-info-title"},"–ü—Ä–æ–¥—é—Å–µ—Ä—ã",-1)),t("div",Ba,[t("div",Ha,[(a(!0),u(te,null,ke(ee("PRODUCER").slice(0,5),H=>(a(),u("a",{key:H.staff_id,href:"https://www.kinopoisk.ru/name/".concat(H.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},v(H.name_ru||H.name_en),9,$a))),128)),ee("PRODUCER").length>5?(a(),u("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(d.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(ee("PRODUCER").length," –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤")}," +"+v(ee("PRODUCER").length-5),9,Na)):h("",!0)])])])):h("",!0)])])):h("",!0),ve.value.length&&X(b)?(a(),u("div",Da,[ne(ps,{videos:ve.value,"active-video-index":L.value,onSelect:j.playTrailer},null,8,["videos","active-video-index","onSelect"])])):h("",!0),g.value.length?(a(),u("div",Fa,[m[29]||(m[29]=t("h2",null,"–°–∏–∫–≤–µ–ª—ã –∏ –ø—Ä–∏–∫–≤–µ–ª—ã",-1)),ne(X(fo),{"movies-list":S.value?g.value:g.value.slice(0,I.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),g.value.length>I.value?(a(),u("a",{key:0,class:"expand-circle-button",onClick:m[2]||(m[2]=H=>S.value=!S.value),title:"".concat(S.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(g.value.length,")")},v(S.value?"‚àí":"+".concat(g.value.length-I.value)),9,Va)):h("",!0)])):h("",!0),W.value.length?(a(),u("div",Oa,[m[30]||(m[30]=t("h2",null,"–ü–æ—Ö–æ–∂–∏–µ",-1)),ne(X(fo),{"movies-list":T.value?W.value:W.value.slice(0,I.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),W.value.length>I.value?(a(),u("a",{key:0,class:"expand-circle-button",onClick:m[3]||(m[3]=H=>T.value=!T.value),title:"".concat(T.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(W.value.length,")")},v(T.value?"‚àí":"+".concat(W.value.length-I.value)),9,Ka)):h("",!0)])):h("",!0)])):h("",!0)])]),ne(nt,{ref_key:"notificationRef",ref:J},null,512)],64)}}},Ja=_e(qa,[["__scopeId","data-v-7724dca3"]]);export{Ja as default};
