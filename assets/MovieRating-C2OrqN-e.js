import{_ as Ot,r as v,c as ae,b as L,i as M,d as n,l as He,t as C,F as Ve,f as rt,n as R,j as re,s as yt,v as Jt,x as Lo,R as Do,G as Qt,A as Ze,o as eo,W as _o,m as Bt,E as qo,e as Pt,k as Yt,u as Q,X as ee,D as be,U as K,aq as Wo,ar as Ho,K as Xt,Z as Ft,ag as Vo,ae as zo,a8 as Uo,as as Go,at as jt}from"./index-C5G2sCyU.js";import{S as Ko}from"./SpinnerLoading-CdiOA1a4.js";import{N as to}from"./ToastMessage-D5ZjSll2.js";import{u as Yo,S as Xo}from"./player-l6vfJbYS.js";import{p as Zt,b as Je}from"./dateUtils-BWepax9P.js";import{_ as jo}from"./icon-imdb-logo-5qtstUwS.js";const ws="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVR4nO2ZQUoDMRSGR7eewHoFsVS0HkUUXNXqASqK2EURBPFIVRe6c+UN1CvUXWvbT4KvMAwzNnnJdCrmg1BKad7/v7y0b5IkiUQiCwGoAx3gQjEugZ0qxTeAIX6MKjMBnBOGS62AVWAPOHVYdlMu9YArYOhphLeBT+ALmOKGEd2QubaAK+B2zngFxt4GgDXgGZjgR8ch5oEkCi8DkvlnRcYLV0Apfqw10M7JvPkV6AN3FmVwK+WyZRnvMEe8ef/ibECyb2o+zRuwnpQAxeLNivQ0BvYyE46qEJ/8fK4ycJKp/X4V4n0MdDNfukkqEO9jwP1LDgD7BeKPgmgp04CL+KUz4Cp+qQxoxC+NAdsNm4c0hWkukkUa8BGfegiadbFDq3/2UAZ8xc+QVvzMtqcKYkBaZ5/MN5xEl2DgLGDZ1KswsC09FPJqXTZoNm5oA6kyMGI2FxqfkluJ0uMTDfhBXAHiHvCCWEL8/RLqlv1MPCf+TSZ+13WC7KnEfWlqcwAeU7GNjnbiQsG5UC1ZAEAt1UMhOpquk6zknMy9l20C2AA+MnEHRo9msuOCs9EH4Fp5TVQ0rqVs0plH4re02Qh1Oq1lCjypsp+5H3gKcD/gykTirqnFZ/ZDy+OGxpapzD+QePrM/2KkKfcGPcv7AdvRkz23G1x4JPIP+AY3r/ywUk/2JAAAAABJRU5ErkJggg==",ks="/reyohoho/assets/icon-shikimori-DGvXK9Jc.svg",Qe=D=>{const s=document.createElement("div");s.style.position="fixed",s.style.top="0",s.style.left="0",s.style.width="100%",s.style.height="100%",s.style.backgroundColor="rgba(0, 0, 0, 0.8)",s.style.color="white",s.style.display="flex",s.style.justifyContent="center",s.style.alignItems="center",s.style.fontSize="2rem",s.style.zIndex="99000",s.textContent=D,document.body.appendChild(s),setTimeout(()=>{document.body.removeChild(s)},2e3)},Zo={key:0},Jo={key:1},Qo={class:"players-list"},en=["onClick"],tn={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},on=["onClick"],nn={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},sn=["onClick"],ln={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},an={__name:"PlayerModal",props:{players:{type:Array,required:!0},selectedPlayer:{type:Object,default:null}},emits:["close","select"],setup(D,{emit:s}){const r=D,a=s,m=v(null),b=ae(()=>{const k=[],V=new Set;for(const w of r.players)N(w)?V.has("veoveo")||(k.push({type:"group",name:"veoveo",displayName:"VeoVeo"}),V.add("veoveo")):E(w)?V.has("kodik")||(k.push({type:"group",name:"kodik",displayName:"Kodik"}),V.add("kodik")):k.push({type:"player",data:w});return k}),N=k=>k.name.toUpperCase().includes("VEOVEO"),E=k=>k.name.toUpperCase().includes("KODIK"),f=k=>k.replace(/VEOVEO>/,"").replace(/KODIK>/,"").trim(),q=k=>{a("select",k),a("close")},X=k=>r.selectedPlayer&&r.selectedPlayer.key===k.key,B=k=>r.selectedPlayer?k==="veoveo"&&N(r.selectedPlayer)||k==="kodik"&&E(r.selectedPlayer):!1,ne=k=>{m.value=k},H=()=>{m.value=null},A=k=>{let V=r.players.filter(w=>k==="veoveo"&&N(w)||k==="kodik"&&E(w));return k==="kodik"?V.sort((w,Se)=>f(w.translate).localeCompare(f(Se.translate))):V},g=k=>A(k).some(V=>V.warning);return(k,V)=>(M(),L("div",{class:"modal",onClick:V[2]||(V[2]=yt(w=>k.$emit("close"),["self"]))},[n("div",{class:"modal-content",onClick:V[1]||(V[1]=yt(()=>{},["stop"]))},[n("button",{class:"close",onClick:V[0]||(V[0]=w=>k.$emit("close"))},"√ó"),m.value?(M(),L("h2",Jo,[n("button",{class:"back-btn",onClick:H},"‚Üê –ù–∞–∑–∞–¥"),He(" "+C(m.value),1)])):(M(),L("h2",Zo,"–í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–µ–µ—Ä")),n("ul",Qo,[m.value?(M(!0),L(Ve,{key:1},rt(A(m.value),w=>(M(),L("li",{key:w.key},[n("button",{class:R(["player-item",{active:X(w)}]),onClick:Se=>q(w)},[He(C(f(w.translate))+" ",1),w.warning?(M(),L("span",ln,"warning")):re("",!0)],10,sn)]))),128)):(M(!0),L(Ve,{key:0},rt(b.value,w=>(M(),L("li",{key:w.type==="player"?w.data.key:w.name},[w.type==="player"?(M(),L("button",{key:0,class:R(["player-item",{active:X(w.data)}]),onClick:Se=>q(w.data)},[He(C(f(w.data.translate))+" ",1),w.data.warning?(M(),L("span",tn,"warning")):re("",!0)],10,en)):(M(),L("button",{key:1,class:R(["group-item",{active:B(w.name)}]),onClick:Se=>ne(w.name)},[V[3]||(V[3]=n("span",{class:"material-icons group-icon"},"folder",-1)),He(" "+C(w.displayName)+" ",1),g(w.name)?(M(),L("span",nn,"warning")):re("",!0)],10,on))]))),128))])])]))}},rn=Ot(an,[["__scopeId","data-v-4c8cca9d"]]);class cn{constructor(){this.ws=null,this.isConnected=!1,this.isAuthenticated=!1,this.messageId=0,this.sources=new Map,this.filtersFound=new Map,this.pendingRequests=new Map,this.callbacks={onConnect:null,onDisconnect:null,onSourcesUpdated:null,onFiltersFound:null,onError:null},this.BLUR_FILTER_NAME="reyohoho"}generateMessageId(){return++this.messageId}setCallbacks(s){this.callbacks=s}async connect(s="localhost",r=4455,a=""){return new Promise((m,b)=>{const N="ws://".concat(s,":").concat(r);console.log("Connecting to OBS WebSocket at ".concat(N)),this.ws=new WebSocket(N),this.ws.onopen=async()=>{var E,f;console.log("WebSocket connection opened");try{const q=await this.authenticate(a);console.log("Authentication response:",q),q.success?(console.log("Successfully authenticated to OBS"),(f=(E=this.callbacks).onConnect)==null||f.call(E),this.loadSourcesAndSearchFilters(),m()):(console.error("Authentication failed"),b(new Error("Authentication failed")))}catch(q){console.error("Error during authentication:",q),b(q)}},this.ws.onmessage=E=>{this.handleMessage(JSON.parse(E.data))},this.ws.onclose=()=>{var E,f;console.log("WebSocket connection closed"),(f=(E=this.callbacks).onDisconnect)==null||f.call(E)},this.ws.onerror=E=>{var f,q;console.error("WebSocket error:",E),(q=(f=this.callbacks).onError)==null||q.call(f,E.message||"Connection error"),b(E)}})}disconnect(){if(this.ws&&(this.ws.close(),this.ws=null),this.pendingRequests){for(const[,{reject:s}]of this.pendingRequests.entries())s(new Error("Connection closed"));this.pendingRequests.clear()}this.sources.clear(),this.filtersFound.clear()}sendRequest(s,r={}){return new Promise((a,m)=>{if(!this.isConnected||!this.ws){console.warn("No connection to OBS"),m(new Error("No connection to OBS"));return}const b=this.generateMessageId().toString(),N={op:6,d:{requestType:s,requestId:b,requestData:r}};console.log("Sending OBS request: ".concat(s),r),this.pendingRequests.set(b,{resolve:a,reject:m}),this.ws.send(JSON.stringify(N)),setTimeout(()=>{this.pendingRequests&&this.pendingRequests.has(b)&&(this.pendingRequests.delete(b),m(new Error("Request ".concat(s," timed out"))))},1e4)})}handleMessage(s){switch(s.op){case 0:this.handleHello(s.d);break;case 2:this.handleIdentified();break;case 7:this.handleRequestResponse(s.d);break;case 5:this.handleEvent(s.d);break;default:console.log("Unknown OBS message: op=".concat(s.op))}}authenticate(s=""){return new Promise(r=>{this.password=s,this.authResolve=r})}async handleHello(s){console.log("Received OBS hello"),this.isConnected=!0;const r={op:1,d:{rpcVersion:1}};if(s.authentication&&this.password)try{const a=new TextEncoder,m=await crypto.subtle.digest("SHA-256",a.encode(this.password+s.authentication.salt)),b=Array.from(new Uint8Array(m)),N=btoa(String.fromCharCode(...b)),E=await crypto.subtle.digest("SHA-256",a.encode(N+s.authentication.challenge)),f=Array.from(new Uint8Array(E)),q=btoa(String.fromCharCode(...f));r.d.authentication=q}catch(a){console.error("Authentication error:",a)}this.ws.send(JSON.stringify(r))}handleIdentified(){console.log("OBS authentication successful"),this.isAuthenticated=!0,this.authResolve&&(this.authResolve({success:!0}),this.authResolve=null)}handleRequestResponse(s){const{requestId:r,requestType:a,requestStatus:m,responseData:b}=s;if(console.log("Received response for ".concat(a,":"),{success:m.result,code:m.code,comment:m.comment}),!this.pendingRequests){console.warn("No pending requests map");return}const N=this.pendingRequests.get(r);if(!N){console.warn("No pending request found for ID: ".concat(r));return}this.pendingRequests.delete(r),m.result?(console.log("Request ".concat(a," successful"),b),N.resolve(b)):(console.error("Request ".concat(a," failed:"),m.comment),N.reject(new Error("".concat(a," failed: ").concat(m.comment))))}handleFilterListResponse(s){const r=s.sourceName,m=(s.filters||[]).find(b=>b.filterName.toLowerCase()===this.BLUR_FILTER_NAME.toLowerCase());m&&(this.foundFilters.set(r,{sourceName:r,filterName:m.filterName,enabled:m.filterEnabled}),console.log("Found reyohoho filter in source: ".concat(r))),this.checkSearchComplete()}checkSearchComplete(){setTimeout(()=>{var s,r;console.log("Search complete. Found ".concat(this.foundFilters.size," reyohoho filters")),(r=(s=this.callbacks).onFiltersFound)==null||r.call(s,Array.from(this.foundFilters.values()))},500)}handleEvent(s){console.log("OBS event: ".concat(s.eventType))}async testConnection(){try{console.log("Testing OBS connection...");const s=await this.sendRequest("GetVersion");return console.log("OBS connection test successful:",s),{success:!0,version:s}}catch(s){return console.error("OBS connection test failed:",s),{success:!1,error:s.message}}}async loadSourcesAndSearchFilters(){var s,r,a,m,b,N,E,f,q,X;try{console.log("Loading sources and searching for filters...");try{const A=await this.sendRequest("GetVersion");console.log("OBS version info:",A)}catch(A){console.warn("Could not get OBS version:",A)}console.log("Requesting scene list...");const B=await this.sendRequest("GetSceneList");if(console.log("Raw scenes response:",B),!B||!B.scenes){console.error("Invalid scenes response structure:",B),(r=(s=this.callbacks).onError)==null||r.call(s,"Invalid response from OBS - no scenes data");return}console.log("Found scenes:",B.scenes.length),console.log("Requesting input list...");const ne=await this.sendRequest("GetInputList");if(console.log("Raw inputs response:",ne),!ne||!ne.inputs){console.error("Invalid inputs response structure:",ne),(m=(a=this.callbacks).onError)==null||m.call(a,"Invalid response from OBS - no inputs data");return}console.log("Found inputs:",ne.inputs.length),this.sources.clear(),this.filtersFound.clear();for(const A of B.scenes)if(console.log("Checking scene: ".concat(A.sceneName," with ").concat(A.sceneItems?A.sceneItems.length:0," items")),A.sceneItems&&Array.isArray(A.sceneItems))for(const g of A.sceneItems)g.sourceName&&(this.sources.set(g.sourceName,{sceneName:A.sceneName,sourceId:g.sceneItemId,sourceName:g.sourceName}),await this.searchFiltersInSource(g.sourceName,A.sceneName));for(const A of ne.inputs)console.log("Checking input: ".concat(A.inputName)),this.sources.has(A.inputName)||this.sources.set(A.inputName,{sceneName:"Direct Input",sourceId:null,sourceName:A.inputName}),await this.searchFiltersInSource(A.inputName,"Direct Input");const H=Array.from(this.filtersFound.values());console.log("Total filters found:",H.length),H.forEach(A=>{console.log("- ".concat(A.sourceName,": ").concat(A.filterName," (").concat(A.enabled?"enabled":"disabled",")"))}),(N=(b=this.callbacks).onFiltersFound)==null||N.call(b,H),(f=(E=this.callbacks).onSourcesUpdated)==null||f.call(E,Array.from(this.sources.values()))}catch(B){console.error("Error loading sources:",B),console.error("Error stack:",B.stack),(X=(q=this.callbacks).onError)==null||X.call(q,"Error loading sources: ".concat(B.message))}}async searchFiltersInSource(s,r){try{console.log("Searching filters in source: ".concat(s));const a=await this.sendRequest("GetSourceFilterList",{sourceName:s});console.log("Source ".concat(s," has ").concat(a.filters.length," filters"));for(const m of a.filters){console.log("  Filter: ".concat(m.filterName," (").concat(m.filterEnabled?"enabled":"disabled",")"));const b="".concat(s,"::").concat(m.filterName);this.filtersFound.set(b,{id:b,sourceName:s,sceneName:r,filterName:m.filterName,enabled:m.filterEnabled})}}catch(a){console.warn("Could not get filters for source ".concat(s,":"),a)}}async enableBlur(s){var a,m;if(!s){console.warn("No filter selected for blur");return}const r=this.filtersFound.get(s);if(!r){console.warn("Selected filter not found:",s);return}try{await this.sendRequest("SetSourceFilterEnabled",{sourceName:r.sourceName,filterName:r.filterName,filterEnabled:!0}),r.enabled=!0,console.log("Enabled blur filter: ".concat(r.sourceName,"::").concat(r.filterName))}catch(b){(m=(a=this.callbacks).onError)==null||m.call(a,"Error enabling filter: ".concat(b.message))}}async disableBlur(s){var a,m;if(!s){console.warn("No filter selected for blur");return}const r=this.filtersFound.get(s);if(!r){console.warn("Selected filter not found:",s);return}try{await this.sendRequest("SetSourceFilterEnabled",{sourceName:r.sourceName,filterName:r.filterName,filterEnabled:!1}),r.enabled=!1,console.log("Disabled blur filter: ".concat(r.sourceName,"::").concat(r.filterName))}catch(b){(m=(a=this.callbacks).onError)==null||m.call(a,"Error disabling filter: ".concat(b.message))}}async testBlur(s,r=2e3){if(!s){console.warn("No filter selected for test");return}await this.enableBlur(s),setTimeout(()=>{this.disableBlur(s)},r)}getFilterById(s){return this.filtersFound.get(s)}getAllFilters(){return Array.from(this.filtersFound.values())}}const un={class:"players-list"},dn=["src"],vn={key:1,class:"controls"},pn={class:"main-controls"},mn={class:"material-icons"},fn={class:"list-button-item"},gn={class:"material-icons"},yn={class:"list-button-item"},hn={class:"material-icons"},bn={class:"list-button-item"},wn={class:"list-button-item"},kn={class:"material-icons"},xn={class:"list-button-item"},Sn={class:"material-icons"},Cn={class:"tooltip-container","data-tooltip-container":"dimming"},En={class:"material-icons"},In={class:"tooltip-container","data-tooltip-container":"blur"},Tn={class:"tooltip-container","data-tooltip-container":"compressor"},An={class:"tooltip-container","data-tooltip-container":"mirror"},$n={class:"tooltip-container","data-tooltip-container":"theater"},Mn={class:"material-symbols-outlined"},Bn={class:"custom-tooltip","data-tooltip":"theater"},Fn={class:"tooltip-container","data-tooltip-container":"pip"},Pn={class:"tooltip-container","data-tooltip-container":"aspect_ratio"},On={class:"current-ratio"},Nn=["onClick"],Rn={key:0,class:"tooltip-container","data-tooltip-container":"app_link"},Ln={class:"custom-tooltip","data-tooltip":"app_link"},Dn={key:1,class:"tooltip-container","data-tooltip-container":"copy_link"},_n={class:"custom-tooltip","data-tooltip":"copy_link"},qn={key:2,class:"tooltip-container","data-tooltip-container":"overlay"},Wn={class:"material-icons"},Hn={key:0,class:"desktop-list-buttons"},Vn={class:"tooltip-container"},zn={class:"material-icons"},Un={class:"custom-tooltip"},Gn={class:"tooltip-container"},Kn={class:"material-icons"},Yn={class:"custom-tooltip"},Xn={class:"tooltip-container"},jn={class:"custom-tooltip"},Zn={class:"tooltip-container"},Jn={class:"material-icons"},Qn={class:"custom-tooltip"},es={class:"tooltip-container"},ts={class:"material-icons"},os={class:"custom-tooltip"},ns={__name:"PlayerComponent",props:{kpId:String,movieInfo:{type:Object,default:()=>({})}},emits:["update:selectedPlayer","update:movieInfo"],setup(D,{emit:s}){const r=Jt(),a=Yo(),m=Lo(),b=Do(),N=Qt(),E=v(b.params.kp_id),f=D,q=s,X=v([]),B=v(null),ne=v(!0),H=v(!1),A=v(!1),g=v(null),k=v(null),V=v(!1),w=v(""),Se=v(null),te=v(window.innerHeight*.9),de=ae(()=>"".concat(te.value,"px")),Y=ae(()=>r.isMobile),y=ae(()=>!!window.electronAPI),I=v(null),ct=v(!1);let ht=null;const ze=v(null),oo=v(null),no=v(null),fe=v(null),Ue=v(!1),ke=v(!1),ge=v(null),bt=v(null),ut=v(0),ce=v(null),Ee=v(null),xe=v(null),Re=v(null),Le=v(null),Ie=v(null),_=ae({get:()=>a.videoOverlayEnabled2,set:t=>a.updateVideoOverlay(t)}),G=ae({get:()=>a.overlaySettings,set:t=>a.updateOverlaySettings(t)}),Nt=v(0),Rt=v(0),De=v([]),et=v(!1);let Me=null;const p=v(null),Ge=v(null),Te=v(!1),j=v(null),Ae=v(!1),Lt=v([]),Ke=v([]),ve=ae({get:()=>a.obsSettings,set:t=>a.updateObsSettings(t)}),wt=t=>{const e=document.querySelector('[data-tooltip-container="'.concat(t,'"]')),o=document.querySelector('[data-tooltip="'.concat(t,'"]'));if(!e||!o)return;const l=e.getBoundingClientRect(),i=o.getBoundingClientRect(),x=window.innerHeight;l.bottom+i.height>x?(o.style.top="auto",o.style.bottom="100%",o.style.marginTop="0",o.style.marginBottom="12px",o.style.transform="translateX(-50%)"):(o.style.top="100%",o.style.bottom="auto",o.style.marginTop="12px",o.style.marginBottom="0",o.style.transform="translateX(-50%)")},se=t=>{I.value=t,ct.value=!1,clearTimeout(ht),Ft(()=>{wt(t)})},kt=()=>{ct.value||(ht=setTimeout(()=>{I.value=null},300))},xt=()=>{ct.value=!0,clearTimeout(ht)},dt=()=>{ct.value=!1,I.value=null},Be=ae({get:()=>a.aspectRatio,set:t=>a.updateAspectRatio(t)}),tt=ae({get:()=>a.isCentered,set:t=>a.updateCentering(t)}),so=ae(()=>{var t,e,o,l,i,x,F,$,c,h;return((e=(t=f.movieInfo)==null?void 0:t.lists)==null?void 0:e.isFavorite)||((l=(o=f.movieInfo)==null?void 0:o.lists)==null?void 0:l.isWatching)||((x=(i=f.movieInfo)==null?void 0:i.lists)==null?void 0:x.isLater)||(($=(F=f.movieInfo)==null?void 0:F.lists)==null?void 0:$.isCompleted)||((h=(c=f.movieInfo)==null?void 0:c.lists)==null?void 0:h.isAbandoned)}),Dt=ae(()=>a.preferredPlayer),io=v(0),vt=t=>t.toUpperCase(),St=()=>{if(H.value||!k.value)return;const[t,e]=Be.value.split(":").map(Number);te.value=window.innerHeight*.9,io.value=Math.min(k.value.clientWidth*(e/t),te.value)},lo=ae(()=>{if(H.value)return{};const[t,e]=Be.value.split(":").map(Number),o=te.value*(t/e);return{width:"100%",maxWidth:"".concat(o,"px"),maxHeight:de.value,margin:"0 auto",overflow:"hidden"}}),ao=ae(()=>{const[t,e]=Be.value.split(":").map(Number);return{position:"relative",width:"100%",paddingTop:"".concat(e/t*100,"%")}}),ot=()=>{k.value&&setTimeout(()=>{Ft(()=>{k.value.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})},500)},ro=async()=>{try{w.value="",Se.value=null;let t;if(f.kpId.startsWith("shiki")){const e=f.kpId.replace("shiki","");t=await Wo(e)}else t=await Ho(f.kpId);if(X.value=Object.entries(t).map(([e,o])=>({key:e.toUpperCase(),...o})),X.value.length>0){if(Dt.value){const e=vt(Dt.value),o=X.value.find(l=>vt(l.key)===e);B.value=o||X.value[0]}else B.value=X.value[0];q("update:selectedPlayer",B.value)}}catch(t){const{message:e,code:o}=Xt(t);w.value=e,Se.value=o,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–ª–µ–µ—Ä–æ–≤:",t)}},co=()=>{V.value=!0},_t=()=>{V.value=!1},uo=()=>{try{return ce.value||(ce.value=new(window.AudioContext||window.webkitAudioContext)),Ee.value||(Ee.value=ce.value.createDynamicsCompressor(),Ee.value.threshold.value=-50,Ee.value.knee.value=40,Ee.value.ratio.value=12,Ee.value.attack.value=0,Ee.value.release.value=.25,Re.value=ce.value.createGain(),Le.value=ce.value.createGain(),Re.value.gain.value=0,Le.value.gain.value=1,Ee.value.connect(Re.value),Re.value.connect(ce.value.destination),Le.value.connect(ce.value.destination)),!0}catch(t){return console.log("Error initializing audio context:",t),!1}},vo=async t=>{try{if(!ce.value||Ie.value===t)return!0;const e=g.value,o=(e==null?void 0:e.src)||"";if(o.includes("videoframe")||o.includes("kinoserial.net")||o.includes("allarknow"))return console.log("Player detected as unsupported for compressor:",o),Ie.value=t,xe.value=null,ke.value=!1,y.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –ø–ª–µ–µ—Ä–æ–º"),!1;if(xe.value)try{xe.value.disconnect()}catch(i){}const l=async(i=0)=>{i>0&&await new Promise(x=>setTimeout(x,i));try{return xe.value=ce.value.createMediaElementSource(t),Ie.value=t,xe.value.connect(Ee.value),xe.value.connect(Le.value),console.log("Video audio setup completed (attempt with ".concat(i,"ms delay)")),!0}catch(x){if(x.name==="InvalidStateError"&&x.message.includes("already connected"))return console.log("MediaElementSource already connected (".concat(i,"ms delay attempt)")),!1;throw x}};return await l(0)||await l(100)||await l(300)||await l(800)?!0:(console.log("Video element has internal audio processing, compressor not available for this player"),Ie.value=t,xe.value=null,ke.value=!1,y.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –ø–ª–µ–µ—Ä–æ–º"),!1)}catch(e){return console.log("Error setting up video audio:",e),!1}},Ct=async t=>{if(g.value)try{const e=g.value,o=e.contentDocument||e.contentWindow.document;if(!o)return;const l=o.querySelectorAll("video");if(l.length===0)return;const i=l[0];if(!uo())return;if(!await vo(i)||!xe.value){console.log("Compressor not available for this player");return}t&&!ke.value?(Re.value.gain.setValueAtTime(1,ce.value.currentTime),Le.value.gain.setValueAtTime(0,ce.value.currentTime),ke.value=!0,y.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –≤–∫–ª—é—á—ë–Ω"),console.log("Compressor enabled")):!t&&ke.value&&(Re.value.gain.setValueAtTime(0,ce.value.currentTime),Le.value.gain.setValueAtTime(1,ce.value.currentTime),ke.value=!1,y.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –æ—Ç–∫–ª—é—á—ë–Ω"),console.log("Compressor disabled"))}catch(e){console.log("Compressor error:",e),y.value&&window.electronAPI.showToast("–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä–∞")}},po=()=>{if(g.value)try{const t=g.value,e=t.contentDocument||t.contentWindow.document;if(!e)return;const o=e.querySelectorAll("video");if(o.length>0){const l=o[0];l.style.filter.includes("blur")||(l.style.filter="blur(50px)")}else t.style.filter.includes("blur")||(t.style.filter="blur(50px)")}catch(t){console.log("Error enabling blur:",t)}},mo=()=>{if(g.value)try{const t=g.value,e=t.contentDocument||t.contentWindow.document;if(!e)return;const o=e.querySelectorAll("video");if(o.length>0){const l=o[0];l.style.filter.includes("blur")&&(l.style.filter="")}else t.style.filter.includes("blur")&&(t.style.filter="")}catch(t){console.log("Error disabling blur:",t)}},fo=()=>{if(y.value)try{const t=g.value,e=t.contentDocument||t.contentWindow.document;if(!e)return;const o=e.querySelectorAll("video");if(o.length>0){const l=o[0];l.style.filter.includes("blur")?l.style.filter="":l.style.filter="blur(50px)"}else t.style.filter.includes("blur")?t.style.filter="":t.style.filter="blur(50px)"}catch(t){console.log("Error toggling blur:",t)}else Qe("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank")},qt=()=>{y.value?(_e.value=!_e.value,Ct(_e.value)):(Qe("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},Wt=()=>{y.value?(Ye.value=!Ye.value,yo(Ye.value)):(Qe("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},pt=()=>{H.value=!H.value,H.value?(window.addEventListener("mousemove",Et),document.addEventListener("keydown",It),document.body.classList.add("no-scroll")):(window.removeEventListener("mousemove",Et),document.removeEventListener("keydown",It),document.body.classList.remove("no-scroll")),A.value=H.value,Ft(()=>{ot(),g.value&&g.value.focus()})},Ht=v(null),Et=()=>{Ht.value=setTimeout(()=>{clearTimeout(Ht.value),A.value=!1},4e3),A.value=!0},mt=ae(()=>r.dimmingEnabled),go=()=>{H.value||r.toggleDimming()},_e=ae({get:()=>a.compressorEnabled,set:t=>a.updateCompressor(t)}),Ye=ae({get:()=>a.mirrorEnabled,set:t=>a.updateMirror(t)}),yo=t=>{if(g.value)try{const e=g.value,o=e.contentDocument||e.contentWindow.document;if(!o)return;const l=o.querySelectorAll("video");if(l.length>0&&(l.forEach(i=>{t?i.style.transform="scaleX(-1)":i.style.transform="scaleX(1)"}),Ue.value=t,y.value)){const i=t?"–ó–µ—Ä–∫–∞–ª–æ –≤–∫–ª—é—á–µ–Ω–æ":"–ó–µ—Ä–∫–∞–ª–æ –æ—Ç–∫–ª—é—á–µ–Ω–æ";window.electronAPI.showToast(i)}}catch(e){}},ho=()=>{fe.value&&clearInterval(fe.value),fe.value=setInterval(()=>{if(g.value)try{const t=g.value,e=t.contentDocument||t.contentWindow.document;if(!e)return;const o=e.querySelectorAll("video");if(o.length>0){const l=o[0],x=l.style.transform==="scaleX(-1)";Ye.value&&!x?(l.style.transform="scaleX(-1)",Ue.value=!0):!Ye.value&&x&&(l.style.transform="scaleX(1)",Ue.value=!1),Ie.value!==l?(Ie.value=null,ke.value=!1,_e.value&&setTimeout(()=>{Ct(!0)},500)):_e.value!==ke.value&&xe.value&&(console.log("Compressor state mismatch, reapplying"),Ct(_e.value))}}catch(t){}},1e3)},bo=(t=!1)=>{if(!y.value)return;ge.value&&clearInterval(ge.value);let e=!1,o=[];function l(){var i;if(o=[],window.selectedNudityTimings&&Array.isArray(window.selectedNudityTimings)&&((i=f.movieInfo)!=null&&i.nudity_timings)){for(const x of f.movieInfo.nudity_timings)if(window.selectedNudityTimings.includes(x.id)){const F=Zt(x.timing_text);F&&F.length>0&&o.push(...F)}}}l(),ge.value=setInterval(()=>{var i,x,F;if(g.value){l();try{const $=g.value,c=$.contentDocument||$.contentWindow.document;if(!c)return;const h=c.querySelectorAll("video");if(h.length>0){const T=h[0];if(Nt.value=T.currentTime||0,Rt.value=T.duration||0,y.value&&_.value&&!p.value&&!Te.value&&Date.now()-(window.iframeLoadTime||0)>=100)try{Xe(c,T)}catch(Z){console.log("Error creating overlay:",Z),Te.value=!1}if(y.value&&!_.value&&p.value&&setTimeout(()=>{!_.value&&p.value&&Fe()},100),y.value&&((i=f.movieInfo)!=null&&i.nudity_timings)){const z=T.currentTime,Z=[],pe=[];if(window.overlayNudityTimings&&Array.isArray(window.overlayNudityTimings)&&window.overlayNudityTimings.length>0){for(const S of f.movieInfo.nudity_timings)if(window.overlayNudityTimings.includes(S.id)){const O=Zt(S.timing_text);if(O&&O.length>0){const ue=[];for(const[ie,oe]of O){let U="normal";z>=ie&&z<=oe?(U="active",pe.push(S.id)):ie>z&&ie-z<=5&&(U="upcoming"),ue.push({text:"[".concat(Je(ie),"-").concat(Je(oe),"]"),status:U})}Z.push({id:S.id,intervals:ue})}}}De.value=Z,et.value=pe.length>0||Z.some(S=>S.intervals.some(O=>O.status==="upcoming"))}if(y.value&&p.value&&_.value&&Kt(),!T.paused){const z=T.currentTime,Z=T.duration,pe=Z>0?z/Z*100:0;if(t&&(console.log("Video position: ".concat(z.toFixed(2),"s / ").concat(Z.toFixed(2),"s (").concat(pe.toFixed(1),"%)")),o.length>0)){const O=o.map(([ue,ie])=>"".concat(Je(ue)," - ").concat(Je(ie))).join(", ");console.log("Active blur intervals: [".concat(O,"]"))}let S=!1;for(const[O,ue]of o)if(z>=O&&z<=ue){S=!0;break}ve.value.enabled&&Ae.value&&ve.value.selectedFilterId?S&&!e?((x=j.value)==null||x.enableBlur(ve.value.selectedFilterId),e=!0,console.log("OBS Blur applied at",z.toFixed(2),"seconds")):!S&&e&&((F=j.value)==null||F.disableBlur(ve.value.selectedFilterId),e=!1,console.log("OBS Blur removed at",z.toFixed(2),"seconds")):S&&!e&&y.value?(po(),e=!0,console.log("Blur applied at",z.toFixed(2),"seconds")):!S&&e&&!ve.value.enabled&&(mo(),e=!1,console.log("Blur removed at",z.toFixed(2),"seconds"))}}}catch($){console.log("Error monitoring video position:",$)}}},100)},wo=()=>{ne.value=!1,window.iframeLoadTime=Date.now(),ho(),bo(),y.value&&_.value&&!p.value&&setTimeout(()=>{try{const t=g.value,e=t.contentDocument||t.contentWindow.document;if(e){const o=e.querySelector("video");o&&Xe(e,o)}}catch(t){console.log("Error creating overlay on iframe load:",t),Te.value=!1}},100)},It=t=>{(t.key==="Escape"&&H.value||t.altKey&&t.keyCode===84)&&pt()},Vt=t=>{Be.value=t,setTimeout(()=>{tt.value&&ot()},310)},ko=()=>{const t="reyohoho://#".concat(E.value);try{window.location.href=t}catch(e){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Å—ã–ª–∫–∏:",e)}},xo=()=>{const t=window.location.href;navigator.clipboard.writeText(t).then(()=>{}),ze.value.showNotification("–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∏–ª—å–º —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞")};function zt(t){return t.replace(/KODIK>/,"Kodik - ").replace(/VEOVEO>/,"VeoVeo - ").trim()}const So=()=>{try{xe.value&&(xe.value.disconnect(),xe.value=null),ce.value&&(ce.value.close(),ce.value=null),Ee.value=null,Re.value=null,Le.value=null,Ie.value=null,ke.value=!1}catch(t){console.log("Error cleaning up audio context:",t)}},Co=t=>{var e;if(((e=B.value)==null?void 0:e.key)===t.key){_t();return}B.value=t,ne.value=!0,Ue.value=!1,ke.value=!1,Ie.value=null,p.value&&Fe(),fe.value&&(clearInterval(fe.value),fe.value=null),ge.value&&(clearInterval(ge.value),ge.value=null),t.key.toLowerCase().includes("torrents")||a.updatePreferredPlayer(vt(t.key)),q("update:selectedPlayer",t)};Ze(B,t=>{t&&(ne.value=!0,Ue.value=!1,ke.value=!1,Ie.value=null,p.value&&Fe(),fe.value&&(clearInterval(fe.value),fe.value=null),ge.value&&(clearInterval(ge.value),ge.value=null),t.key.toLowerCase().includes("torrents")||a.updatePreferredPlayer(vt(t.key)),q("update:selectedPlayer",t))}),Ze(()=>b.params.kp_id,async t=>{t&&t!==E.value&&(E.value=t,Ue.value=!1,ke.value=!1,Ie.value=null,p.value&&Fe(),fe.value&&(clearInterval(fe.value),fe.value=null),ge.value&&(clearInterval(ge.value),ge.value=null),ut.value=0,tt.value&&ot())},{immediate:!0}),Ze(_,t=>{if(y.value)if(t&&!p.value){const e=()=>{if(g.value)try{const o=g.value,l=o.contentDocument||o.contentWindow.document;if(l){const i=l.querySelector("video");if(i){const x=Date.now()-(window.iframeLoadTime||0);x>=100?Xe(l,i):setTimeout(e,100-x)}}}catch(o){console.log("Error creating overlay via watcher:",o),Te.value=!1}};e()}else!t&&p.value&&Fe()}),Ze(De,(t,e)=>{if(!y.value)return;const o=e&&e.length>0,l=t&&t.length>0;!o&&l&&(_.value||(_.value=!0,window.electronAPI&&window.electronAPI.showToast("–û–≤–µ—Ä–ª–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á—ë–Ω - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ç–∞–π–º–∏–Ω–≥–∏")))},{deep:!0}),Ze(()=>ve.value.enabled,t=>{t&&!Ae.value?At():!t&&Ae.value&&Gt()}),Ze(G,(t,e)=>{!y.value||!_.value||(e&&t.showBackground!==e.showBackground?p.value&&(Fe(),setTimeout(()=>{if(g.value&&_.value)try{const o=g.value,l=o.contentDocument||o.contentWindow.document;if(l){const i=l.querySelector("video");i&&Xe(l,i)}}catch(o){console.log("Error recreating overlay:",o)}},100)):p.value&&Kt())},{deep:!0});const ft=["16:9","12:5","4:3"],Eo=()=>{const e=(ft.indexOf(Be.value)+1)%ft.length;Vt(ft[e])},Io=t=>{var o,l,i,x,F,$,c,h,T,z,Z,pe,S;return(S={[K.FAVORITE]:((l=(o=f.movieInfo)==null?void 0:o.lists)==null?void 0:l.isFavorite)||!1,[K.HISTORY]:((x=(i=f.movieInfo)==null?void 0:i.lists)==null?void 0:x.isHistory)||!1,[K.LATER]:(($=(F=f.movieInfo)==null?void 0:F.lists)==null?void 0:$.isLater)||!1,[K.COMPLETED]:((h=(c=f.movieInfo)==null?void 0:c.lists)==null?void 0:h.isCompleted)||!1,[K.ABANDONED]:((z=(T=f.movieInfo)==null?void 0:T.lists)==null?void 0:z.isAbandoned)||!1,[K.WATCHING]:((pe=(Z=f.movieInfo)==null?void 0:Z.lists)==null?void 0:pe.isWatching)||!1}[t])!=null?S:!1},Ce=async t=>{if(!m.token){ze.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:To});return}try{const e={[K.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[K.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[K.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[K.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[K.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[K.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};Io(t)?(await Vo(E.value,t),ze.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(e[t]))):(await zo(E.value,t),ze.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(e[t])))}catch(e){const{message:o,code:l}=Xt(e);ze.value.showNotification("".concat(o," ").concat(l))}q("update:movieInfo")},To=()=>{N.push("/login")},Tt=ae(()=>a.showFavoriteTooltip),Ao=()=>{N.push("/settings"),dt()},$o=async()=>{if(!y.value){Qe("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank");return}if(g.value)try{const t=g.value,e=t.contentDocument||t.contentWindow.document;if(!e)return;const o=e.querySelector("video");if(!o)return;document.pictureInPictureElement?await document.exitPictureInPicture():document.pictureInPictureEnabled?await o.requestPictureInPicture():Qe('–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–∂–∏–º "–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ"')}catch(t){console.error("Error toggling PiP:",t),Qe('–ù–µ —É–¥–∞–ª–æ—Å—å –≤–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º "–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ"')}},Mo=()=>{if(_.value=!_.value,!_.value)Fe();else{const t=()=>{if(!p.value&&g.value)try{const e=g.value,o=e.contentDocument||e.contentWindow.document;if(o){const l=o.querySelector("video");if(l){const i=Date.now()-(window.iframeLoadTime||0);i>=100?Xe(o,l):setTimeout(t,100-i)}}}catch(e){console.log("Error creating overlay:",e),Te.value=!1}};t()}},Ut=()=>{j.value&&j.value.disconnect(),j.value=new cn,j.value.setCallbacks({onConnect:()=>{Ae.value=!0,a.setObsConnected(!0),y.value&&window.electronAPI&&window.electronAPI.showToast("–ü–æ–¥–∫–ª—é—á–µ–Ω –∫ OBS WebSocket")},onDisconnect:()=>{Ae.value=!1,a.setObsConnected(!1),Lt.value=[],Ke.value=[]},onSourcesUpdated:t=>{Lt.value=t,window.obsSources=t},onFiltersFound:t=>{Ke.value=t,window.obsFiltersFound=t,a.updateObsSettings({filtersFound:t})},onError:t=>{console.error("OBS WebSocket error:",t),y.value&&window.electronAPI&&window.electronAPI.showToast("–û—à–∏–±–∫–∞ OBS: ".concat(t))}})},At=async()=>{j.value||Ut(),await j.value.connect(ve.value.host,ve.value.port,ve.value.password)},Gt=()=>{j.value&&j.value.disconnect()},Bo=t=>{j.value&&Ae.value&&t?j.value.testBlur(t):y.value&&window.electronAPI&&window.electronAPI.showToast("–§–∏–ª—å—Ç—Ä –Ω–µ –≤—ã–±—Ä–∞–Ω –∏–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ OBS")},Fo=()=>{j.value&&Ae.value&&j.value.loadSourcesAndSearchFilters()},Po=()=>Ke.value,Oo=()=>{try{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen();const t=g.value;if(t){const e=t.contentDocument||t.contentWindow.document;if(e){e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen();const o=e.querySelector("video");o&&(o.webkitExitFullscreen?o.webkitExitFullscreen():o.exitFullscreen&&o.exitFullscreen())}}}catch(t){console.log("Error exiting fullscreen:",t)}},No=()=>{if(!y.value)return;const t=g.value,e=t.contentDocument||t.contentWindow.document;if(!e||e.getElementById("overlay-settings-modal"))return;const o=G.value,l=e.createElement("div");l.id="overlay-settings-modal",l.style.cssText="\n    position: fixed !important;\n    top: 0 !important;\n    left: 0 !important;\n    width: 100% !important;\n    height: 100% !important;\n    background: rgba(0, 0, 0, 0.8) !important;\n    display: flex !important;\n    align-items: center !important;\n    justify-content: center !important;\n    z-index: 9999 !important;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n  ";const i=e.createElement("div");i.style.cssText="\n    background: rgba(30, 30, 30, 0.95) !important;\n    backdrop-filter: blur(20px) !important;\n    border-radius: 16px !important;\n    padding: 32px !important;\n    max-width: 400px !important;\n    width: 90% !important;\n    border: 1px solid rgba(255, 255, 255, 0.1) !important;\n    box-shadow: 0 8px 40px rgba(0, 0, 0, 0.5) !important;\n  ",i.innerHTML='\n    <h3 style="color: #ff6b35; margin: 0 0 24px 0; font-size: 20px; font-weight: 600; text-align: center;">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–≤–µ—Ä–ª–µ—è</h3>\n    \n    <div style="display: flex; flex-direction: column; gap: 16px;">\n      <label style="display: flex; align-items: center; gap: 12px; color: white; cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(255, 255, 255, 0.05);">\n        <input type="checkbox" id="showTitle" '.concat(o.showTitle?"checked":"",' style="width: 18px; height: 18px; accent-color: #ff6b35;">\n        <span style="font-size: 16px;">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞</span>\n      </label>\n      \n      <label style="display: flex; align-items: center; gap: 12px; color: white; cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(255, 255, 255, 0.05);">\n        <input type="checkbox" id="showDuration" ').concat(o.showDuration2?"checked":"",' style="width: 18px; height: 18px; accent-color: #ff6b35;">\n        <span style="font-size: 16px;">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</span>\n      </label>\n      \n      <label style="display: flex; align-items: center; gap: 12px; color: white; cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(255, 255, 255, 0.05);">\n        <input type="checkbox" id="showBackground" ').concat(o.showBackground?"checked":"",' style="width: 18px; height: 18px; accent-color: #ff6b35;">\n        <span style="font-size: 16px;">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–Ω—ã–π —Ñ–æ–Ω</span>\n      </label>\n      \n      <label style="display: flex; align-items: center; gap: 12px; color: white; cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(255, 255, 255, 0.05);">\n        <input type="checkbox" id="showTimingsOnMouseMove" ').concat(o.showTimingsOnMouseMove?"checked":"",' style="width: 18px; height: 18px; accent-color: #ff6b35;">\n        <span style="font-size: 16px;">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–∞–π–º–∏–Ω–≥–∏ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –º—ã—à–∫–∏</span>\n      </label>\n      \n      <label style="display: flex; align-items: center; gap: 12px; color: white; cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(255, 255, 255, 0.05);">\n        <input type="checkbox" id="highlightTimings" ').concat(o.highlightTimings?"checked":"",' style="width: 18px; height: 18px; accent-color: #ff6b35;">\n        <span style="font-size: 16px;">–ü–æ–¥—Å–≤–µ—á–∏–≤–∞—Ç—å –±–ª–∏–∑–∫–∏–µ –∏ —Ç–µ–∫—É—â–∏–µ —Ç–∞–π–º–∏–Ω–≥–∏</span>\n      </label>\n\n    </div>\n    \n    <div style="display: flex; gap: 12px; margin-top: 24px; justify-content: center;">\n      <button id="saveSettings" style="background: #ff6b35; color: white; border: none; border-radius: 8px; padding: 10px 20px; cursor: pointer; font-size: 16px; font-weight: 500; transition: all 0.3s ease;">\n        –°–æ—Ö—Ä–∞–Ω–∏—Ç—å\n      </button>\n      <button id="cancelSettings" style="background: rgba(255, 255, 255, 0.1); color: rgba(255, 255, 255, 0.8); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; padding: 10px 16px; cursor: pointer; font-size: 14px; transition: all 0.3s ease;">\n        –û—Ç–º–µ–Ω–∞\n      </button>\n    </div>\n  '),["click","mousedown","mouseup","mousemove","wheel","contextmenu"].forEach(c=>{i.addEventListener(c,h=>{h.stopPropagation(),h.stopImmediatePropagation()})}),l.appendChild(i),l.addEventListener("click",c=>{c.preventDefault(),c.stopPropagation(),c.stopImmediatePropagation(),c.target===l&&l.remove()}),["mousedown","mouseup","mousemove","wheel","contextmenu"].forEach(c=>{l.addEventListener(c,h=>{h.preventDefault(),h.stopPropagation(),h.stopImmediatePropagation()})}),i.querySelector("#saveSettings").addEventListener("click",c=>{var T;c.preventDefault(),c.stopPropagation(),c.stopImmediatePropagation();const h={showTitle:i.querySelector("#showTitle").checked,showDuration2:i.querySelector("#showDuration").checked,showBackground:i.querySelector("#showBackground").checked,showTimingsOnMouseMove:i.querySelector("#showTimingsOnMouseMove").checked,highlightTimings:i.querySelector("#highlightTimings").checked};G.value=h,(T=window.electronAPI)==null||T.showToast("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–≤–µ—Ä–ª–µ—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã"),l.remove()}),i.querySelector("#cancelSettings").addEventListener("click",c=>{c.preventDefault(),c.stopPropagation(),c.stopImmediatePropagation(),l.remove()}),i.querySelectorAll("button").forEach(c=>{c.addEventListener("mouseenter",h=>{h.preventDefault(),h.stopPropagation(),h.stopImmediatePropagation(),c.id==="saveSettings"?(c.style.background="#e55a2b",c.style.transform="translateY(-1px)"):c.style.background="rgba(255, 255, 255, 0.15)"}),c.addEventListener("mouseleave",h=>{h.preventDefault(),h.stopPropagation(),h.stopImmediatePropagation(),c.id==="saveSettings"?(c.style.background="#ff6b35",c.style.transform="translateY(0)"):c.style.background="rgba(255, 255, 255, 0.1)"}),["mousedown","mouseup","mousemove","wheel","contextmenu"].forEach(h=>{c.addEventListener(h,T=>{T.preventDefault(),T.stopPropagation(),T.stopImmediatePropagation()})})});const F=i.querySelectorAll('input[type="checkbox"]'),$=i.querySelectorAll("label");F.forEach(c=>{["click","mousedown","mouseup","mousemove","wheel","contextmenu"].forEach(h=>{c.addEventListener(h,T=>{h!=="click"?(T.preventDefault(),T.stopPropagation(),T.stopImmediatePropagation()):T.stopPropagation()})})}),$.forEach(c=>{["mousedown","mouseup","mousemove","wheel","contextmenu"].forEach(h=>{c.addEventListener(h,T=>{T.preventDefault(),T.stopPropagation(),T.stopImmediatePropagation()})})}),e.body.appendChild(l)},Xe=(t,e)=>{if(!_.value||p.value||Te.value)return;Te.value=!0;const o=t.createElement("div");o.id="reyohoho-video-overlay";let l=()=>{o.style.cssText="\n      position: absolute !important;\n      top: 0 !important;\n      left: 0 !important;\n      width: 100% !important;\n      height: 100% !important;\n      pointer-events: none !important;\n      z-index: 999999999 !important;\n      display: flex !important;\n      flex-direction: column !important;\n      justify-content: space-between !important;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n      visibility: visible !important;\n      opacity: 1 !important;\n    "};const i=t.createElement("div");i.style.cssText="\n    color: white !important;\n    padding: 20px !important;\n    text-align: left !important;\n    pointer-events: none !important;\n  ";const x=t.createElement("div"),F=G.value.showBackground?"rgba(0, 0, 0, 0.7)":"transparent",$=G.value.showBackground?"blur(10px)":"none",c=G.value.showBackground?"fit-content":"auto";x.style.cssText="\n    font-size: 20px !important;\n    font-weight: 600 !important;\n    margin-bottom: 8px !important;\n    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8) !important;\n    line-height: 1.2 !important;\n    padding: 8px 12px !important;\n    border-radius: 6px !important;\n    display: inline-block !important;\n    color: rgba(255, 255, 255, 0.6) !important;\n    background: ".concat(F," !important;\n    backdrop-filter: ").concat($," !important;\n    width: ").concat(c," !important;\n  ");const h=t.createElement("div"),T=G.value.showBackground?"rgba(0, 0, 0, 0.7)":"transparent",z=G.value.showBackground?"blur(10px)":"none",Z=G.value.showBackground?"6px":"0",pe=G.value.showBackground?"inline-flex":"flex",S=G.value.showBackground?"fit-content":"auto";h.style.cssText="\n    font-size: 18px !important;\n    font-weight: 500 !important;\n    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8) !important;\n    display: ".concat(pe," !important;\n    align-items: center !important;\n    gap: 8px !important;\n    flex-wrap: wrap !important;\n    color: rgba(255, 255, 255, 0.6) !important;\n    margin-left: 12px !important;\n    background: ").concat(T," !important;\n    backdrop-filter: ").concat(z," !important;\n    border-radius: ").concat(Z," !important;\n    width: ").concat(S," !important;\n  ");const O=t.createElement("div"),ue=G.value.showBackground?"rgba(0, 0, 0, 0.7)":"transparent",ie=G.value.showBackground?"blur(10px)":"none";O.style.cssText="\n    position: absolute !important;\n    top: 20px !important;\n    right: 110px !important;\n    background: ".concat(ue," !important;\n    backdrop-filter: ").concat(ie," !important;\n    border-radius: 12px !important;\n    padding: 16px !important;\n    width: fit-content !important;\n    max-width: 800px !important;\n    pointer-events: none !important;\n    display: none !important;\n    transition: opacity 0.3s ease, visibility 0.3s ease !important;\n    opacity: 0 !important;\n    visibility: hidden !important;\n  ");const oe=t.createElement("div");oe.style.cssText="\n    font-size: 14px !important;\n    color: rgba(255, 255, 255, 0.6) !important;\n    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8) !important;\n    line-height: 1.4 !important;\n    word-wrap: break-word !important;\n  ";const U=t.createElement("div");U.style.cssText="\n    position: absolute !important;\n    top: 20px !important;\n    right: 20px !important;\n    display: flex !important;\n    gap: 8px !important;\n    pointer-events: all !important;\n  ";const le=t.createElement("button");le.style.cssText="\n    background: rgba(0, 0, 0, 0.8) !important;\n    backdrop-filter: blur(10px) !important;\n    color: white !important;\n    border: 1px solid rgba(255, 255, 255, 0.2) !important;\n    border-radius: 50% !important;\n    width: 40px !important;\n    height: 40px !important;\n    display: flex !important;\n    align-items: center !important;\n    justify-content: center !important;\n    cursor: pointer !important;\n    transition: all 0.3s ease !important;\n    font-size: 18px !important;\n  ",le.innerHTML="‚öôÔ∏è",le.title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–≤–µ—Ä–ª–µ—è";const we=t.createElement("button");we.style.cssText="\n    background: rgba(0, 0, 0, 0.8) !important;\n    backdrop-filter: blur(10px) !important;\n    color: white !important;\n    border: 1px solid rgba(255, 255, 255, 0.2) !important;\n    border-radius: 50% !important;\n    width: 40px !important;\n    height: 40px !important;\n    display: flex !important;\n    align-items: center !important;\n    justify-content: center !important;\n    cursor: pointer !important;\n    transition: all 0.3s ease !important;\n    font-size: 18px !important;\n  ",we.innerHTML="üëÅÔ∏è",we.title="–û—Ç–∫–ª—é—á–∏—Ç—å –æ–≤–µ—Ä–ª–µ–π",we.addEventListener("click",u=>{u.preventDefault(),u.stopPropagation(),u.stopImmediatePropagation(),_.value=!1}),le.addEventListener("click",u=>{u.preventDefault(),u.stopPropagation(),u.stopImmediatePropagation(),Oo(),setTimeout(()=>{No()},100)}),[le,we].forEach(u=>{u.addEventListener("mouseenter",W=>{W.preventDefault(),W.stopPropagation(),W.stopImmediatePropagation(),u.style.background="#ff6b35",u.style.borderColor="#ff6b35",u.style.transform="scale(1.1)"}),u.addEventListener("mouseleave",W=>{W.preventDefault(),W.stopPropagation(),W.stopImmediatePropagation(),u.style.background="rgba(0, 0, 0, 0.8)",u.style.borderColor="rgba(255, 255, 255, 0.2)",u.style.transform="scale(1)"}),["mousedown","mouseup","mousemove","wheel","contextmenu"].forEach(W=>{u.addEventListener(W,P=>{P.preventDefault(),P.stopPropagation(),P.stopImmediatePropagation()})})}),["click","mousedown","mouseup","mousemove","wheel","contextmenu"].forEach(u=>{U.addEventListener(u,W=>{W.preventDefault(),W.stopPropagation(),W.stopImmediatePropagation()})}),U.appendChild(le),U.appendChild(we),O.appendChild(oe),i.appendChild(x),i.appendChild(h),o.appendChild(i),o.appendChild(O),o.appendChild(U),U.style.transition="opacity 0.3s ease, visibility 0.3s ease",U.style.opacity="0",U.style.visibility="hidden",i.style.transition="opacity 0.3s ease";let qe=null;const nt=()=>{U.style.opacity="1",U.style.visibility="visible",i.style.opacity="0",G.value.showTimingsOnMouseMove&&De.value.length>0&&(O.style.opacity="1",O.style.visibility="visible",clearTimeout(Me),Me=null,et.value||(Me=setTimeout(()=>{O.style.opacity="0",O.style.visibility="hidden",Me=null},3e3))),clearTimeout(Ge.value),clearTimeout(qe),Ge.value=setTimeout(()=>{U.style.opacity="0",U.style.visibility="hidden"},3e3),qe=setTimeout(()=>{i.style.opacity="1"},2e3)};t.addEventListener("mousemove",nt),o.addEventListener("mouseenter",()=>{U.style.opacity="1",U.style.visibility="visible",i.style.opacity="0",clearTimeout(qe)}),o.addEventListener("mouseleave",()=>{clearTimeout(Ge.value),clearTimeout(qe),U.style.opacity="0",U.style.visibility="hidden",i.style.opacity="1"}),o._mouseHandler=nt;const Pe=(u=>{if(document.fullscreenElement===u||document.webkitFullscreenElement===u||u.webkitDisplayingFullscreen||u.offsetWidth===window.screen.width&&u.offsetHeight===window.screen.height)return t.body||t.documentElement;let P=u.parentNode,ye=0;const $e=5;for(;P&&ye<$e;){const me=t.defaultView.getComputedStyle(P),J=P.getBoundingClientRect();if(J.width>0&&J.height>0&&(me.position==="relative"||me.position==="absolute"||me.position==="fixed"||P.tagName==="BODY"))return P;P=P.parentNode,ye++}return u.parentNode})(e);o._targetContainer=Pe,o._videoElement=e,l=()=>{const u=o._videoElement,W=o._targetContainer;if(document.fullscreenElement===u||document.webkitFullscreenElement===u||u.webkitDisplayingFullscreen||u.offsetWidth===window.screen.width&&u.offsetHeight===window.screen.height)o.style.cssText="\n        position: fixed !important;\n        top: 0 !important;\n        left: 0 !important;\n        width: 100vw !important;\n        height: 100vh !important;\n        pointer-events: none !important;\n        z-index: 999999999 !important;\n        display: flex !important;\n        flex-direction: column !important;\n        justify-content: space-between !important;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n        visibility: visible !important;\n        opacity: 1 !important;\n        box-sizing: border-box !important;\n      ";else{const ye=t.defaultView.getComputedStyle(u),$e=W.getBoundingClientRect(),me=u.offsetWidth||u.clientWidth||parseFloat(ye.width)||0,J=u.offsetHeight||u.clientHeight||parseFloat(ye.height)||0,Ne=u.getBoundingClientRect(),he=Ne.top-$e.top+W.scrollTop,We=Ne.left-$e.left+W.scrollLeft;o.style.cssText="\n        position: absolute !important;\n        top: ".concat(he,"px !important;\n        left: ").concat(We,"px !important;\n        width: ").concat(me,"px !important;\n        height: ").concat(J,"px !important;\n        pointer-events: none !important;\n        z-index: 999999999 !important;\n        display: flex !important;\n        flex-direction: column !important;\n        justify-content: space-between !important;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n        visibility: visible !important;\n        opacity: 1 !important;\n        box-sizing: border-box !important;\n      ")}},e.style.position="relative",(Pe.style.position===""||Pe.style.position==="static")&&(Pe.style.position="relative"),Pe.appendChild(o),l(),p.value=o,Te.value=!1;const st=setInterval(()=>{if(!p.value||!_.value){clearInterval(st);return}if(!t.body.contains(o))try{const P=t.querySelectorAll("video");if(P.length>0){const ye=P[0];o._videoElement=ye;const me=(J=>{if(document.fullscreenElement===J||document.webkitFullscreenElement===J||J.webkitDisplayingFullscreen||J.offsetWidth===window.screen.width&&J.offsetHeight===window.screen.height)return t.body||t.documentElement;let he=J.parentNode,We=0;const gt=5;for(;he&&We<gt;){const je=t.defaultView.getComputedStyle(he),d=he.getBoundingClientRect();if(d.width>0&&d.height>0&&(je.position==="relative"||je.position==="absolute"||je.position==="fixed"||he.tagName==="BODY"))return he;he=he.parentNode,We++}return J.parentNode})(ye);o._targetContainer=me,me.appendChild(o),l(),o._mouseHandler&&(t.removeEventListener("mousemove",o._mouseHandler),t.addEventListener("mousemove",o._mouseHandler))}}catch(P){console.log("Error re-adding overlay to DOM:",P)}const u=t.defaultView.getComputedStyle(o);if((u.visibility==="hidden"||u.display==="none"||u.opacity==="0")&&l(),(parseInt(u.zIndex)||0)<999999999&&l(),o._videoElement&&o._targetContainer){const P=o._videoElement,ye=t.defaultView.getComputedStyle(P),$e=document.fullscreenElement===P||document.webkitFullscreenElement===P||P.webkitDisplayingFullscreen||P.offsetWidth===window.screen.width&&P.offsetHeight===window.screen.height;let me,J;$e?(me=window.innerWidth,J=window.innerHeight):(me=P.offsetWidth||P.clientWidth||parseFloat(ye.width)||0,J=P.offsetHeight||P.clientHeight||parseFloat(ye.height)||0);const Ne=parseInt(u.width)||0,he=parseInt(u.height)||0;(Math.abs(Ne-me)>5||Math.abs(he-J)>5)&&l()}},1e3),it=new window.MutationObserver(u=>{u.forEach(W=>{W.type==="attributes"&&W.target===o&&W.attributeName==="style"&&setTimeout(()=>{p.value&&_.value&&l()},100)})});it.observe(o,{attributes:!0,attributeFilter:["style","class"]});const lt=()=>{p.value&&_.value&&l()},Oe=()=>{p.value&&_.value&&setTimeout(()=>{l()},100)};t.defaultView.addEventListener("resize",lt),t.addEventListener("fullscreenchange",Oe),t.addEventListener("webkitfullscreenchange",Oe),e.addEventListener("webkitbeginfullscreen",Oe),e.addEventListener("webkitendfullscreen",Oe),o._monitorInterval=st,o._mutationObserver=it,o._resizeHandler=lt,o._fullscreenHandler=Oe,o._iframeDoc=t;const at=setInterval(()=>{if(!p.value||!_.value){clearInterval(at);return}l()},500);setTimeout(()=>{clearInterval(at)},1e4)},Kt=()=>{var h,T,z,Z,pe;if(!p.value||!_.value)return;const t=g.value;if(!t)return;const e=t.contentDocument||t.contentWindow.document;if(!e)return;const o=p.value,l=o.children[0],i=o.children[1],x=e.defaultView.getComputedStyle(o);(x.display==="none"||x.visibility==="hidden")&&(o.style.display="flex !important",o.style.visibility="visible !important");const F=l.children[0];if(G.value.showTitle){F.style.display="block";const S=((h=f.movieInfo)==null?void 0:h.title)||((T=f.movieInfo)==null?void 0:T.name_ru)||((z=f.movieInfo)==null?void 0:z.name_en)||((Z=f.movieInfo)==null?void 0:Z.name_original)||"–ó–∞–≥—Ä—É–∑–∫–∞...",O=(pe=f.movieInfo)!=null&&pe.year?" (".concat(f.movieInfo.year,")"):"";F.textContent=S+O,G.value.showBackground?(F.style.background="rgba(0, 0, 0, 0.7) !important",F.style.backdropFilter="blur(10px) !important",F.style.width="fit-content !important",F.style.display="inline-block !important"):(F.style.background="transparent !important",F.style.backdropFilter="none !important",F.style.width="auto !important",F.style.display="inline-block !important")}else F.style.display="none";const $=l.children[1];let c="";if(G.value.showDuration2){const S=Je(Nt.value),O=Je(Rt.value);c="\n      <span style=\"font-family: 'Courier New', monospace; color: rgba(255, 255, 255, 0.6);\">".concat(S,'</span>\n      <span style="opacity: 0.6;">/</span>\n      <span style="font-family: \'Courier New\', monospace; color: rgba(255, 255, 255, 0.6);">').concat(O,"</span>\n    ")}if(ve.value.enabled&&ve.value.showObsInOverlay){let S="–û—Ç–∫–ª—é—á–µ–Ω";const O="#999999";if(Ae.value)if(ve.value.selectedFilterId){const ie=Ke.value.find(oe=>oe.id===ve.value.selectedFilterId);ie?S="".concat(ie.filterName," (").concat(ie.sceneName,")"):S="–§–∏–ª—å—Ç—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω"}else Ke.value.length>0?S="–§–∏–ª—å—Ç—Ä –Ω–µ –≤—ã–±—Ä–∞–Ω":S="–§–∏–ª—å—Ç—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã";const ue='\n      <span style="color: '.concat(O,';">\n        OBS: ').concat(S,"\n      </span>\n    ");c=c?"".concat(c," ").concat(ue):ue}if(c?($.style.display="flex",$.innerHTML=c,G.value.showBackground?($.style.background="rgba(0, 0, 0, 0.7) !important",$.style.backdropFilter="blur(10px) !important",$.style.borderRadius="6px !important",$.style.padding="8px 12px !important",$.style.width="fit-content !important",$.style.display="inline-flex !important"):($.style.background="transparent !important",$.style.backdropFilter="none !important",$.style.borderRadius="0 !important",$.style.padding="0 !important",$.style.width="auto !important",$.style.display="flex !important")):$.style.display="none",De.value.length>0){const S=i.children[0];S.innerHTML="";const O=e.createElement("span");O.textContent="–¢–∞–π–º–∏–Ω–≥–∏: ",O.style.color="rgba(255, 255, 255, 0.6)",S.appendChild(O),De.value.forEach((ue,ie)=>{if(ie>0){const oe=e.createElement("span");oe.textContent=", ",oe.style.color="rgba(255, 255, 255, 0.6)",S.appendChild(oe)}ue.intervals.forEach((oe,U)=>{if(U>0){const we=e.createElement("span");we.textContent=", ",we.style.color="rgba(255, 255, 255, 0.6)",S.appendChild(we)}const le=e.createElement("span");le.textContent=oe.text,oe.status==="active"&&G.value.highlightTimings?(le.style.color="#ff4444",le.style.fontWeight="bold"):oe.status==="upcoming"&&G.value.highlightTimings?(le.style.color="#ff6b35",le.style.fontWeight="500"):le.style.color="rgba(255, 255, 255, 0.6)",S.appendChild(le)})}),i.style.display="block",(!G.value.showTimingsOnMouseMove||et.value)&&(i.style.opacity="1",i.style.visibility="visible"),G.value.showBackground?(i.style.background="rgba(0, 0, 0, 0.7) !important",i.style.backdropFilter="blur(10px) !important",i.style.width="fit-content !important",i.style.minWidth="auto !important"):(i.style.background="transparent !important",i.style.backdropFilter="none !important",i.style.width="fit-content !important",i.style.minWidth="auto !important")}else i.style.display="none";G.value.showTimingsOnMouseMove&&et.value&&De.value.length>0?(i.style.opacity="1",i.style.visibility="visible",clearTimeout(Me)):G.value.showTimingsOnMouseMove&&!et.value&&De.value.length>0&&i.style.opacity==="1"&&!Me&&(Me=setTimeout(()=>{i.style.opacity="0",i.style.visibility="hidden",Me=null},3e3))},Fe=()=>{if(p.value){try{p.value._monitorInterval&&clearInterval(p.value._monitorInterval),p.value._mutationObserver&&p.value._mutationObserver.disconnect(),p.value._resizeHandler&&p.value._iframeDoc&&p.value._iframeDoc.defaultView.removeEventListener("resize",p.value._resizeHandler),p.value._fullscreenHandler&&p.value._iframeDoc&&(p.value._iframeDoc.removeEventListener("fullscreenchange",p.value._fullscreenHandler),p.value._iframeDoc.removeEventListener("webkitfullscreenchange",p.value._fullscreenHandler),p.value._videoElement&&(p.value._videoElement.removeEventListener("webkitbeginfullscreen",p.value._fullscreenHandler),p.value._videoElement.removeEventListener("webkitendfullscreen",p.value._fullscreenHandler))),p.value._mouseHandler&&p.value._iframeDoc&&p.value._iframeDoc.removeEventListener("mousemove",p.value._mouseHandler),p.value.remove()}catch(t){console.log("Error removing overlay:",t)}p.value=null}Te.value=!1,Ge.value&&(clearTimeout(Ge.value),Ge.value=null)};eo(()=>{if(ne.value=!0,ro(),Y.value&&(Be.value="4:3"),St(),window.addEventListener("resize",St),window.addEventListener("resize",wt),tt.value&&ot(),window.toggleCompressor=qt,window.toggleMirror=Wt,Ut(),window.connectToOBS=At,window.testOBSBlur=Bo,window.refreshOBSFilters=Fo,window.getOBSFiltersInfo=Po,window.testOBSConnection=Ro,window.debugOBS=()=>{var t;console.log("=== OBS Debug Info ==="),console.log("OBS Settings:",ve.value),console.log("OBS Connected:",Ae.value),console.log("OBS Filters Found:",Ke.value),console.log("OBS WebSocket instance:",j.value),j.value&&(console.log("WebSocket state:",(t=j.value.ws)==null?void 0:t.readyState),console.log("Is Connected:",j.value.isConnected),console.log("Is Authenticated:",j.value.isAuthenticated))},ve.value.enabled&&At(),y.value&&(bt.value=setInterval(()=>{const t=window.overlayNudityTimings?window.overlayNudityTimings.length:0;t>ut.value?(ut.value=t,_.value||(_.value=!0,window.electronAPI&&window.electronAPI.showToast("–û–≤–µ—Ä–ª–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á—ë–Ω - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ç–∞–π–º–∏–Ω–≥–∏"))):ut.value=t},1e3)),y.value&&_.value){const t=()=>{if(g.value&&!p.value)try{const e=g.value,o=e.contentDocument||e.contentWindow.document;if(o){const l=o.querySelector("video");if(l){const i=Date.now()-(window.iframeLoadTime||0);i>=100?Xe(o,l):setTimeout(t,100-i)}}}catch(e){console.log("Error initializing overlay on mount:",e),Te.value=!1}};setTimeout(t,1e3)}}),_o(()=>{window.removeEventListener("resize",St),window.removeEventListener("resize",wt),window.removeEventListener("mousemove",Et),document.removeEventListener("keydown",It),document.body.classList.remove("no-scroll"),fe.value&&clearInterval(fe.value),ge.value&&clearInterval(ge.value),bt.value&&clearInterval(bt.value),Fe(),So(),Gt(),delete window.toggleCompressor,delete window.toggleMirror,delete window.connectToOBS,delete window.testOBSBlur,delete window.refreshOBSFilters,delete window.getOBSFiltersInfo,delete window.testOBSConnection,delete window.debugOBS,delete window.obsSources,delete window.obsFiltersFound});const Ro=async()=>j.value&&Ae.value?await j.value.testConnection():{success:!1,error:"Not connected"};return(t,e)=>{var o,l,i,x,F,$,c,h,T,z,Z,pe,S,O,ue,ie,oe,U,le,we,qe,nt,$t,Pe,Mt,st,it,lt,Oe,at,u,W,P,ye,$e,me,J,Ne,he,We,gt,je;return w.value?(M(),Bt(qo,{key:0,message:w.value,code:Se.value},null,8,["message","code"])):(M(),L(Ve,{key:1},[n("div",un,[e[43]||(e[43]=n("span",null,"–ü–ª–µ–µ—Ä:",-1)),n("button",{class:"player-btn",onClick:co},C(B.value?zt(B.value.translate).toUpperCase():"–ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–µ–µ—Ä–æ–≤..."),1)]),V.value?(M(),Bt(rn,{key:0,players:X.value,"selected-player":B.value,onClose:_t,onSelect:Co},null,8,["players","selected-player"])):re("",!0),n("div",{ref_key:"containerRef",ref:k,class:R(["player-container",{"theater-mode":H.value}]),style:Yt(H.value?{}:lo.value)},[n("div",{class:"iframe-wrapper",style:Yt(H.value?{}:ao.value)},[Q(n("iframe",{ref_key:"playerIframe",ref:g,src:(o=B.value)==null?void 0:o.iframe,frameborder:"0",allowfullscreen:"",webkitallowfullscreen:"",class:R(["responsive-iframe",{"theater-mode-unlock":A.value,"theater-mode-lock":H.value,dimmed:mt.value}]),onLoad:wo},null,42,dn),[[ee,!ne.value&&((l=B.value)==null?void 0:l.iframe)]]),ne.value?(M(),Bt(Ko,{key:0,text:"–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–ª–µ–µ—Ä: ".concat(B.value?zt(B.value.translate):"–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ –ø–ª–µ–µ—Ä–æ–≤","\n–ï—Å–ª–∏ –ø–ª–µ–µ—Ä –Ω–µ –≥—Ä—É–∑–∏—Ç—Å—è, —Ç–æ —Å–º–µ–Ω–∏—Ç–µ –ø–ª–µ–µ—Ä –≤—ã—à–µ –∏–ª–∏ –≤–∫–ª—é—á–∏—Ç–µ VPN"),style:{"white-space":"pre-line"}},null,8,["text"])):re("",!0)],4),H.value?(M(),L("button",{key:0,class:R(["close-theater-btn",{visible:A.value}]),onClick:pt}," ‚úñ ",2)):re("",!0)],6),H.value?re("",!0):(M(),L("div",vn,[n("div",pn,[!Y.value&&E.value?(M(),L("div",{key:0,ref_key:"tooltipContainer",ref:oo,class:"tooltip-container list-buttons-container","data-tooltip-container":"favorite"},[Tt.value?(M(),L("button",{key:0,class:R(["favorite-btn",{active:(x=(i=D.movieInfo)==null?void 0:i.lists)==null?void 0:x.isFavorite}]),onMouseenter:e[0]||(e[0]=d=>se("favorite")),onMouseleave:kt,onClick:e[1]||(e[1]=d=>Ce(be(K).FAVORITE))},[n("span",mn,C(($=(F=D.movieInfo)==null?void 0:F.lists)!=null&&$.isFavorite?"favorite":"favorite_border"),1),n("span",{class:R(["material-icons dropdown-arrow",{highlighted:so.value}])},"expand_more",2)],34)):re("",!0),Q(n("div",{ref_key:"tooltip",ref:no,class:"custom-tooltip advanced-tooltip list-buttons-dropdown","data-tooltip":"favorite",onMouseenter:xt,onMouseleave:dt},[n("div",fn,[n("button",{class:R(["favorite-btn",{active:(h=(c=D.movieInfo)==null?void 0:c.lists)==null?void 0:h.isFavorite}]),onClick:e[2]||(e[2]=d=>Ce(be(K).FAVORITE))},[n("span",gn,C((z=(T=D.movieInfo)==null?void 0:T.lists)!=null&&z.isFavorite?"favorite":"favorite_border"),1),e[44]||(e[44]=n("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))],2)]),n("div",yn,[n("button",{class:R(["watching-btn",{active:(pe=(Z=D.movieInfo)==null?void 0:Z.lists)==null?void 0:pe.isWatching}]),onClick:e[3]||(e[3]=d=>Ce(be(K).WATCHING))},[n("span",hn,C((O=(S=D.movieInfo)==null?void 0:S.lists)!=null&&O.isWatching?"visibility":"visibility_off"),1),e[45]||(e[45]=n("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))],2)]),n("div",bn,[n("button",{class:R(["later-btn",{active:(ie=(ue=D.movieInfo)==null?void 0:ue.lists)==null?void 0:ie.isLater}]),onClick:e[4]||(e[4]=d=>Ce(be(K).LATER))},e[46]||(e[46]=[n("span",{class:"material-icons"},"watch_later",-1),n("span",{class:"button-label"},"–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ",-1)]),2)]),n("div",wn,[n("button",{class:R(["completed-btn",{active:(U=(oe=D.movieInfo)==null?void 0:oe.lists)==null?void 0:U.isCompleted}]),onClick:e[5]||(e[5]=d=>Ce(be(K).COMPLETED))},[n("span",kn,C((we=(le=D.movieInfo)==null?void 0:le.lists)!=null&&we.isCompleted?"check_circle":"check_circle_outline"),1),e[47]||(e[47]=n("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))],2)]),n("div",xn,[n("button",{class:R(["abandoned-btn",{active:(nt=(qe=D.movieInfo)==null?void 0:qe.lists)==null?void 0:nt.isAbandoned}]),onClick:e[6]||(e[6]=d=>Ce(be(K).ABANDONED))},[n("span",Sn,C(((Pe=($t=D.movieInfo)==null?void 0:$t.lists)!=null&&Pe.isAbandoned,"not_interested")),1),e[48]||(e[48]=n("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))],2)]),n("div",{class:"tooltip-hint"},[e[50]||(e[50]=n("span",{class:"material-icons"},"settings",-1)),n("span",null,[e[49]||(e[49]=He("–°—Ç–∏–ª—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ ")),n("a",{class:"settings-link",onClick:Ao},"–Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö")])])],544),[[ee,I.value==="favorite"&&Tt.value]])],512)):re("",!0),Y.value?re("",!0):(M(),L(Ve,{key:1},[n("div",Cn,[n("button",{class:R(["dimming-btn",{active:mt.value}]),onMouseenter:e[7]||(e[7]=d=>se("dimming")),onMouseleave:e[8]||(e[8]=d=>I.value=null),onClick:go},[n("span",En,C(mt.value?"light_mode":"dark_mode"),1)],34),Q(n("div",{class:"custom-tooltip","data-tooltip":"dimming"},C(mt.value?"–û—Ç–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ":"–í–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ"),513),[[ee,I.value==="dimming"]])]),n("div",In,[n("button",{class:R(["blur-btn",{"electron-only":!y.value}]),onMouseenter:e[9]||(e[9]=d=>se("blur")),onMouseleave:e[10]||(e[10]=d=>I.value=null),onClick:fo},e[51]||(e[51]=[n("span",{class:"material-icons"},"blur_on",-1)]),34),Q(n("div",{class:"custom-tooltip","data-tooltip":"blur"},C(y.value?"–ë–ª—é—Ä":"–ë–ª—é—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[ee,I.value==="blur"]])]),n("div",Tn,[n("button",{class:R(["material-symbols-outlined",{active:_e.value,"electron-only":!y.value}]),onMouseenter:e[11]||(e[11]=d=>se("compressor")),onMouseleave:e[12]||(e[12]=d=>I.value=null),onClick:qt},e[52]||(e[52]=[n("span",{class:"material-icons"},"graphic_eq",-1)]),34),Q(n("div",{class:"custom-tooltip","data-tooltip":"compressor"},C(y.value?"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä":"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[ee,I.value==="compressor"]])]),n("div",An,[n("button",{class:R(["mirror-btn",{active:Ye.value,"electron-only":!y.value}]),onMouseenter:e[13]||(e[13]=d=>se("mirror")),onMouseleave:e[14]||(e[14]=d=>I.value=null),onClick:Wt},e[53]||(e[53]=[n("span",{class:"material-icons"},"flip",-1)]),34),Q(n("div",{class:"custom-tooltip","data-tooltip":"mirror"},C(y.value?"–ó–µ—Ä–∫–∞–ª–æ":"–ó–µ—Ä–∫–∞–ª–æ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[ee,I.value==="mirror"]])]),n("div",$n,[n("button",{class:"theater-mode-btn",onMouseenter:e[15]||(e[15]=d=>se("theater")),onMouseleave:e[16]||(e[16]=d=>I.value=null),onClick:pt},[n("span",Mn,C(H.value?"fullscreen_exit":"aspect_ratio"),1)],32),Q(n("div",Bn,[He(C(H.value?"–í—ã–π—Ç–∏ –∏–∑ —Ç–µ–∞—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞":"–¢–µ–∞—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º")+" ",1),e[54]||(e[54]=n("span",{class:"shortcut-hint"},"Alt+T",-1))],512),[[ee,I.value==="theater"]])]),n("div",Fn,[n("button",{class:R(["pip-btn",{"electron-only":!y.value}]),onMouseenter:e[17]||(e[17]=d=>se("pip")),onMouseleave:e[18]||(e[18]=d=>I.value=null),onClick:$o},e[55]||(e[55]=[n("span",{class:"material-icons"},"picture_in_picture_alt",-1)]),34),Q(n("div",{class:"custom-tooltip","data-tooltip":"pip"},C(y.value?"–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ":"–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[ee,I.value==="pip"]])]),n("div",Pn,[n("button",{class:"aspect-ratio-dropdown-btn",onMouseenter:e[19]||(e[19]=d=>se("aspect_ratio")),onMouseleave:kt,onClick:Eo},[n("span",On,C(Be.value),1)],32),Q(n("div",{class:"custom-tooltip advanced-tooltip aspect-ratio-dropdown","data-tooltip":"aspect_ratio",onMouseenter:xt,onMouseleave:dt},[(M(),L(Ve,null,rt(ft,d=>n("div",{key:d,class:R(["aspect-ratio-option",{active:Be.value===d}]),onClick:ps=>Vt(d)},C(d),11,Nn)),64))],544),[[ee,I.value==="aspect_ratio"]])]),n("div",{class:"tooltip-container","data-tooltip-container":"centering",onMouseenter:e[21]||(e[21]=d=>se("centering")),onMouseleave:kt},[n("button",{class:"center-btn",onClick:ot},e[56]||(e[56]=[n("span",{class:"material-icons"},"center_focus_strong",-1)])),Q(n("div",{class:"custom-tooltip advanced-tooltip","data-tooltip":"centering",onMouseenter:xt,onMouseleave:dt},[e[57]||(e[57]=He(" –û—Ç—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–ª–µ–µ—Ä ")),Pt(Xo,{modelValue:tt.value,"onUpdate:modelValue":e[20]||(e[20]=d=>tt.value=d),title:"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞"},null,8,["modelValue"]),e[58]||(e[58]=n("span",{class:"tooltip-title"},"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞",-1))],544),[[ee,I.value==="centering"]])],32),!y.value&&E.value?(M(),L("div",Rn,[n("button",{class:"app-link-btn",onMouseenter:e[22]||(e[22]=d=>se("app_link")),onMouseleave:e[23]||(e[23]=d=>I.value=null),onClick:ko},e[59]||(e[59]=[n("span",{class:"material-icons"},"open_in_new",-1)]),32),Q(n("div",Ln," –û—Ç–∫—Ä—ã—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ",512),[[ee,I.value==="app_link"]])])):re("",!0),y.value?(M(),L("div",Dn,[n("button",{class:"copy-link-btn",onMouseenter:e[24]||(e[24]=d=>se("copy_link")),onMouseleave:e[25]||(e[25]=d=>I.value=null),onClick:xo},e[60]||(e[60]=[n("span",{class:"material-icons"},"content_copy",-1)]),32),Q(n("div",_n," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É ",512),[[ee,I.value==="copy_link"]])])):re("",!0),y.value?(M(),L("div",qn,[n("button",{class:R(["overlay-btn",{active:_.value}]),onMouseenter:e[26]||(e[26]=d=>se("overlay")),onMouseleave:e[27]||(e[27]=d=>I.value=null),onClick:Mo},[n("span",Wn,C(_.value?"layers":"layers_clear"),1)],34),Q(n("div",{class:"custom-tooltip","data-tooltip":"overlay"},C(_.value?"–°–∫—Ä—ã—Ç—å –æ–≤–µ—Ä–ª–µ–π –≤–∏–¥–µ–æ":"–ü–æ–∫–∞–∑–∞—Ç—å –æ–≤–µ—Ä–ª–µ–π –≤–∏–¥–µ–æ"),513),[[ee,I.value==="overlay"]])])):re("",!0)],64))]),!Y.value&&!Tt.value&&E.value?(M(),L("div",Hn,[n("div",Vn,[n("button",{class:R(["favorite-btn",{active:(st=(Mt=D.movieInfo)==null?void 0:Mt.lists)==null?void 0:st.isFavorite}]),onMouseenter:e[28]||(e[28]=d=>se("favorite")),onMouseleave:e[29]||(e[29]=d=>I.value=null),onClick:e[30]||(e[30]=d=>Ce(be(K).FAVORITE))},[n("span",zn,C((lt=(it=D.movieInfo)==null?void 0:it.lists)!=null&&lt.isFavorite?"favorite":"favorite_border"),1)],34),Q(n("div",Un,C("–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"),512),[[ee,I.value==="favorite"]])]),n("div",Gn,[n("button",{class:R(["watching-btn",{active:(at=(Oe=D.movieInfo)==null?void 0:Oe.lists)==null?void 0:at.isWatching}]),onMouseenter:e[31]||(e[31]=d=>se("watching")),onMouseleave:e[32]||(e[32]=d=>I.value=null),onClick:e[33]||(e[33]=d=>Ce(be(K).WATCHING))},[n("span",Kn,C((W=(u=D.movieInfo)==null?void 0:u.lists)!=null&&W.isWatching?"visibility":"visibility_off"),1)],34),Q(n("div",Yn,C("–°–º–æ—Ç—Ä—é"),512),[[ee,I.value==="watching"]])]),n("div",Xn,[n("button",{class:R(["later-btn",{active:(ye=(P=D.movieInfo)==null?void 0:P.lists)==null?void 0:ye.isLater}]),onMouseenter:e[34]||(e[34]=d=>se("later")),onMouseleave:e[35]||(e[35]=d=>I.value=null),onClick:e[36]||(e[36]=d=>Ce(be(K).LATER))},e[61]||(e[61]=[n("span",{class:"material-icons"},"watch_later",-1)]),34),Q(n("div",jn,C("–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"),512),[[ee,I.value==="later"]])]),n("div",Zn,[n("button",{class:R(["completed-btn",{active:(me=($e=D.movieInfo)==null?void 0:$e.lists)==null?void 0:me.isCompleted}]),onMouseenter:e[37]||(e[37]=d=>se("completed")),onMouseleave:e[38]||(e[38]=d=>I.value=null),onClick:e[39]||(e[39]=d=>Ce(be(K).COMPLETED))},[n("span",Jn,C((Ne=(J=D.movieInfo)==null?void 0:J.lists)!=null&&Ne.isCompleted?"check_circle":"check_circle_outline"),1)],34),Q(n("div",Qn,C("–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"),512),[[ee,I.value==="completed"]])]),n("div",es,[n("button",{class:R(["abandoned-btn",{active:(We=(he=D.movieInfo)==null?void 0:he.lists)==null?void 0:We.isAbandoned}]),onMouseenter:e[40]||(e[40]=d=>se("abandoned")),onMouseleave:e[41]||(e[41]=d=>I.value=null),onClick:e[42]||(e[42]=d=>Ce(be(K).ABANDONED))},[n("span",ts,C(((je=(gt=D.movieInfo)==null?void 0:gt.lists)!=null&&je.isAbandoned,"not_interested")),1)],34),Q(n("div",os,C("–ë—Ä–æ—à–µ–Ω–æ"),512),[[ee,I.value==="abandoned"]])])])):re("",!0)])),Pt(to,{ref_key:"notificationRef",ref:ze},null,512)],64))}}},xs=Ot(ns,[["__scopeId","data-v-4f1dfa8f"]]),ss={class:"rating-container"},is={class:"rating-display"},ls={class:"rating-numbers"},as=["onClick","onMouseenter"],rs={key:0,class:"tooltip-footer"},cs={class:"rating-numbers mobile-rating-numbers"},us=["onClick"],ds={key:0,class:"mobile-modal-footer"},vs={__name:"MovieRating",props:{kpId:{type:String,required:!0},showDash:{type:Boolean,default:!1}},setup(D){const s=Jt(),r=Qt(),a=D,m=v(null),b=v(null),N=v(null),E=v(null),f=v(0),q=v(!1),X=v(!1);let B=null;const ne=te=>te?te.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",H=()=>{B=setTimeout(()=>{q.value=!1,s.isMobile||(X.value=!1)},100)},A=()=>{B&&(clearTimeout(B),B=null),q.value=!0},g=()=>{s.isMobile&&(X.value=!X.value)},k=()=>{r.push("/login")},V=async()=>{try{const te=await Go(a.kpId);b.value=te.user_rating,N.value=te.average_rating,E.value=ne(te.vote_count)}catch(te){console.error("Error loading rating:",te)}},w=async te=>{var de;try{te===b.value?(await jt(a.kpId,null),b.value=null,m.value.showNotification("–û—Ü–µ–Ω–∫–∞ —É–¥–∞–ª–µ–Ω–∞")):(await jt(a.kpId,te),b.value=te,m.value.showNotification("–û—Ü–µ–Ω–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞")),s.isMobile&&(X.value=!1),V()}catch(Y){console.error("Error setting rating:",Y),((de=Y.response)==null?void 0:de.status)===401?m.value.showNotification('–î–ª—è –æ—Ü–µ–Ω–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:k}):m.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ü–µ–Ω–∫–∏"),s.isMobile&&(X.value=!1)}},Se=()=>{X.value=!1};return eo(()=>{V()}),(te,de)=>(M(),L("div",ss,[n("div",is,[n("a",{href:"#",class:R(["rating-link",{"has-rating":b.value}]),onMouseenter:de[0]||(de[0]=Y=>q.value=!0),onMouseleave:H,onClick:yt(g,["prevent"])},[de[3]||(de[3]=n("img",{src:jo,alt:"ReYohoho",class:"rating-logo"},null,-1)),n("span",{class:R(["average-rating",be(Uo)(N.value)])},C(N.value?N.value.toFixed(1).replace(/\.0$/,""):"‚Äî"),3)],34),Q(n("div",{class:"rating-tooltip",onMouseenter:A,onMouseleave:H},[n("div",ls,[(M(),L(Ve,null,rt(10,Y=>n("button",{key:Y,class:R(["number-btn",{active:Y===b.value,hover:Y===f.value,"average-highlight":N.value&&Y<=Math.round(N.value)}]),onClick:y=>w(Y),onMouseenter:y=>f.value=Y,onMouseleave:de[1]||(de[1]=y=>f.value=0)},C(Y),43,as)),64))]),E.value?(M(),L("div",rs,"–û—Ü–µ–Ω–æ–∫: "+C(E.value),1)):re("",!0)],544),[[ee,(q.value||X.value)&&!be(s).isMobile]])]),Pt(to,{ref_key:"notificationRef",ref:m},null,512),be(s).isMobile&&X.value?(M(),L("div",{key:0,class:"mobile-modal-overlay",onClick:Se},[n("div",{class:"mobile-modal",onClick:de[2]||(de[2]=yt(()=>{},["stop"]))},[n("div",{class:"mobile-modal-header"},[de[4]||(de[4]=n("h3",null,"–û—Ü–µ–Ω–∏—Ç—å —Ñ–∏–ª—å–º",-1)),n("button",{class:"close-button",onClick:Se},"√ó")]),n("div",cs,[(M(),L(Ve,null,rt(10,Y=>n("button",{key:Y,class:R(["number-btn",{active:Y===b.value,"average-highlight":N.value&&Y<=Math.round(N.value)}]),onClick:y=>w(Y)},C(Y),11,us)),64))]),E.value?(M(),L("div",ds,"–û—Ü–µ–Ω–æ–∫: "+C(E.value),1)):re("",!0)])])):re("",!0)]))}},Ss=Ot(vs,[["__scopeId","data-v-2df64bd5"]]);export{Ss as M,xs as P,ws as _,ks as a};
