{"version":3,"file":"MovieSearch-legacy-BBf1YtFB.js","sources":["../../src/components/FooterDonaters.vue","../../src/components/MovieSearch.vue"],"sourcesContent":["<template>\n  <footer>\n    <div class=\"donaters-wrapper\">\n      <transition name=\"fade\" mode=\"out-in\">\n        <span v-if=\"currentDonater\" :key=\"currentIndex\" class=\"donater\">\n          {{ currentDonater }}\n        </span>\n      </transition>\n    </div>\n  </footer>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, onUnmounted } from 'vue'\nimport { getDons } from '@/api/movies'\n\nconst donaters = ref([])\nconst currentIndex = ref(-1)\nconst CACHE_KEY_DONATERS = 'donatersCache'\nlet intervalId = null\n\nconst currentDonater = computed(() => {\n  if (currentIndex.value === -1 || !donaters.value.length) return ''\n  return donaters.value[currentIndex.value]\n})\n\nconst fetchDonaters = async () => {\n  const today = new Date().toISOString().split('T')[0]\n  const cached = localStorage.getItem(CACHE_KEY_DONATERS)\n\n  if (cached) {\n    try {\n      const { date, data } = JSON.parse(cached)\n      if (date === today) {\n        donaters.value = data\n        return\n      }\n    } catch (e) {\n      console.error('Ошибка кэша донатеров:', e)\n    }\n  }\n\n  try {\n    const dons = await getDons()\n    donaters.value = dons\n      .split('\\n')\n      .map((line) => line.trim())\n      .filter((line) => line)\n    localStorage.setItem(\n      CACHE_KEY_DONATERS,\n      JSON.stringify({\n        date: today,\n        data: donaters.value\n      })\n    )\n  } catch (error) {\n    console.error('Ошибка загрузки донатеров:', error)\n  }\n}\n\nfunction updateCurrentDonater() {\n  if (!donaters.value.length) return\n  const newIndex = Math.floor(Math.random() * donaters.value.length)\n  currentIndex.value = newIndex\n}\n\nfunction startShowingDonaters() {\n  if (donaters.value.length === 0) return\n  updateCurrentDonater()\n  intervalId = setInterval(updateCurrentDonater, 4000)\n}\n\nonMounted(async () => {\n  await fetchDonaters()\n  startShowingDonaters()\n})\n\nonUnmounted(() => {\n  if (intervalId) clearInterval(intervalId)\n})\n</script>\n\n<style scoped>\n.donaters-wrapper {\n  width: 100%;\n  height: 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding-bottom: 10px;\n}\n\n.donater {\n  font-family: Neucha, sans-serif;\n  font-weight: bold;\n  color: rgba(255, 255, 255, 0.945);\n}\n\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 1s ease;\n}\n\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n</style>\n","<template>\n  <div class=\"wrapper\">\n    <div class=\"mainpage\">\n      <!-- Кнопки выбора типа поиска -->\n      <div class=\"search-type-buttons\">\n        <button :class=\"{ active: searchType === 'title' }\" @click=\"setSearchType('title')\">\n          Название\n        </button>\n        <button :class=\"{ active: searchType === 'kinopoisk' }\" @click=\"setSearchType('kinopoisk')\">\n          ID Кинопоиск\n        </button>\n        <button :class=\"{ active: searchType === 'shikimori' }\" @click=\"setSearchType('shikimori')\">\n          ID Shikimori\n        </button>\n        <button :class=\"{ active: searchType === 'imdb' }\" @click=\"setSearchType('imdb')\">\n          ID IMDB\n        </button>\n      </div>\n\n      <!-- Поиск -->\n      <div class=\"search-container\">\n        <div class=\"input-wrapper\">\n          <input\n            ref=\"searchInput\"\n            v-model=\"searchTerm\"\n            :placeholder=\"getPlaceholder()\"\n            class=\"search-input\"\n            :inputmode=\"searchType === 'title' ? 'text' : 'numeric'\"\n            @keydown.enter=\"search\"\n            @input=\"handleInput\"\n          />\n          <div class=\"icons\">\n            <button v-if=\"searchTerm\" class=\"reset-button\" @click=\"resetSearch\">\n              <i class=\"fas fa-times\"></i>\n            </button>\n            <button class=\"search-button\" @click=\"search\">\n              <i class=\"fas fa-search\"></i>\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <!-- Контейнер для истории и результатов -->\n      <div class=\"content-container\">\n        <!-- История просмотра -->\n        <div v-if=\"!searchTerm && history.length > 0\">\n          <h2>\n            История просмотра\n            <span>\n              <DeleteButton @click=\"showModal = true\" />\n              <BaseModal\n                :is-open=\"showModal\"\n                message=\"Вы уверены, что хотите очистить историю?\"\n                @confirm=\"clearAllHistory\"\n                @close=\"showModal = false\"\n              />\n            </span>\n          </h2>\n          <MovieList\n            :movies-list=\"history\"\n            :is-history=\"true\"\n            :loading=\"loading\"\n            @item-deleted=\"handleItemDeleted\"\n          />\n        </div>\n        <ErrorMessage v-if=\"!searchTerm && errorMessage\" :message=\"errorMessage\" :code=\"errorCode\" />\n\n        <!-- Результаты поиска -->\n        <div v-if=\"searchPerformed\">\n          <h2>Результаты поиска</h2>\n          <MovieList :movies-list=\"movies\" :is-history=\"false\" :loading=\"loading\" />\n          <div v-if=\"movies.length === 0 && !loading && !errorMessage\" class=\"no-results\">\n            Ничего не найдено\n          </div>\n          <ErrorMessage v-if=\"errorMessage\" :message=\"errorMessage\" :code=\"errorCode\" />\n        </div>\n\n        <!-- Подсказка, когда ничего не введено в поиске -->\n        <div\n          v-if=\"searchTerm && !searchPerformed && !loading && !errorMessage\"\n          class=\"search-prompt\"\n        >\n          Нажмите кнопку \"Поиск\" или Enter для поиска\n        </div>\n      </div>\n    </div>\n    <FooterDonaters />\n  </div>\n</template>\n\n<script setup>\nimport { apiSearch, getKpIDfromIMDB, getKpIDfromSHIKI } from '@/api/movies'\nimport { handleApiError } from '@/constants'\nimport { getMyLists, delAllFromList } from '@/api/user'\nimport BaseModal from '@/components/BaseModal.vue'\nimport DeleteButton from '@/components/buttons/DeleteButton.vue'\nimport ErrorMessage from '@/components/ErrorMessage.vue'\nimport FooterDonaters from '@/components/FooterDonaters.vue'\nimport { MovieList } from '@/components/MovieList/'\nimport { useMainStore } from '@/store/main'\nimport { useAuthStore } from '@/store/auth'\nimport { USER_LIST_TYPES_ENUM } from '@/constants'\nimport debounce from 'lodash/debounce'\nimport { watchEffect, onMounted, ref, watch } from 'vue'\nimport { useRouter } from 'vue-router'\n\nconst mainStore = useMainStore()\nconst authStore = useAuthStore()\nconst router = useRouter()\n\nconst searchType = ref('title')\nconst searchTerm = ref('')\nconst movies = ref([])\nconst loading = ref(false)\nconst searchPerformed = ref(false)\nconst showModal = ref(false)\nconst errorMessage = ref('')\nconst errorCode = ref(null)\n\nconst history = ref([])\n\nwatchEffect(async () => {\n  loading.value = true\n  if (authStore.token) {\n    try {\n      history.value = await getMyLists(USER_LIST_TYPES_ENUM.HISTORY)\n      loading.value = false\n    } catch (error) {\n      const { message, code } = handleApiError(error)\n      errorMessage.value = message\n      errorCode.value = code\n      console.error('Ошибка загрузки истории:', error)\n      if (code === 401) {\n        authStore.logout()\n        await router.push('/login')\n        router.go(0)\n      }\n      loading.value = false\n    }\n  } else {\n    history.value = mainStore.history\n    loading.value = false\n  }\n})\n\nfunction handleItemDeleted(deletedItemId) {\n  history.value = history.value.filter((item) => item.kp_id !== deletedItemId)\n}\n\n// Установка типа поиска\nconst setSearchType = (type) => {\n  searchType.value = type\n  resetSearch()\n}\n\nconst handleInput = (event) => {\n  if (searchType.value === 'title') {\n    searchTerm.value = event.target.value\n  } else {\n    searchTerm.value = event.target.value.replace(/\\D+/g, '')\n  }\n}\n\n// Получение placeholder для input\nconst getPlaceholder = () => {\n  return (\n    {\n      title: 'Введите название фильма',\n      kinopoisk: 'Пример: 301 (Матрица)',\n      shikimori: 'Пример: 28171 (Повар-боец Сома)',\n      imdb: 'Пример: 0198781 (Корпорация монстров)'\n    }[searchType.value] || 'Введите название фильма'\n  )\n}\n\n// Очистка поиска\nconst resetSearch = () => {\n  searchTerm.value = ''\n  movies.value = []\n  searchPerformed.value = false\n}\n\nconst search = () => {\n  debouncedPerformSearch.cancel()\n  if (searchTerm.value) {\n    performSearch()\n  } else {\n    alert('Введите запрос для поиска')\n  }\n}\n\nconst performSearch = async () => {\n  loading.value = true\n  searchPerformed.value = true\n  movies.value = []\n\n  try {\n    if (searchType.value === 'kinopoisk') {\n      if (!/^\\d+$/.test(searchTerm.value)) {\n        searchTerm.value = searchTerm.value.replace(/\\D/g, '')\n      }\n      router.push({ name: 'movie-info', params: { kp_id: searchTerm.value } })\n      return\n    }\n\n    if (searchType.value === 'imdb') {\n      if (!/^\\d+$/.test(searchTerm.value)) {\n        searchTerm.value = searchTerm.value.replace(/\\D/g, '')\n      }\n      const response = await getKpIDfromIMDB(searchTerm.value)\n      if (response.id_kp) {\n        router.push({ name: 'movie-info', params: { kp_id: `${response.id_kp}` } })\n      } else {\n        throw new Error('Не найдено')\n      }\n      return\n    }\n\n    if (searchType.value === 'shikimori') {\n      if (!/^\\d+$/.test(searchTerm.value)) {\n        searchTerm.value = searchTerm.value.replace(/\\D/g, '')\n      }\n      const response = await getKpIDfromSHIKI(searchTerm.value)\n      if (response.id_kp) {\n        router.push({ name: 'movie-info', params: { kp_id: `${response.id_kp}` } })\n      } else {\n        throw new Error('Не найдено')\n      }\n      return\n    }\n    if (searchType.value === 'title') {\n      const response = await apiSearch(searchTerm.value)\n      movies.value = response.map((movie) => ({\n        ...movie,\n        kp_id: movie.id.toString(),\n        rating_kp: movie.raw_data?.rating !== 'null' ? movie.raw_data?.rating : null,\n        type: movie.raw_data?.type\n      }))\n    }\n  } catch (error) {\n    const { message, code } = handleApiError(error)\n    errorMessage.value = message\n    errorCode.value = code\n    console.error('Ошибка при поиске:', error)\n  } finally {\n    loading.value = false\n  }\n}\n\nconst clearAllHistory = async () => {\n  loading.value = true\n  if (authStore.token) {\n    try {\n      await delAllFromList(USER_LIST_TYPES_ENUM.HISTORY)\n      history.value = []\n      loading.value = false\n      showModal.value = false\n    } catch (error) {\n      const { message, code } = handleApiError(error)\n      errorMessage.value = message\n      errorCode.value = code\n      console.error('Ошибка загрузки истории:', error)\n      if (code === 401) {\n        authStore.logout()\n        await router.push('/login')\n        router.go(0)\n      }\n      loading.value = false\n      showModal.value = false\n    }\n  } else {\n    mainStore.clearAllHistory()\n    loading.value = false\n    showModal.value = false\n  }\n}\n\nconst debouncedPerformSearch = debounce(() => {\n  if (searchTerm.value.length >= 2) {\n    performSearch()\n  } else if (searchTerm.value.length < 2) {\n    movies.value = []\n    searchPerformed.value = false\n  }\n}, 700)\n\nonMounted(() => {\n  const hash = window.location.hash\n  if (hash.startsWith('#search=')) {\n    const searchQuery = decodeURIComponent(hash.replace('#search=', ''))\n    searchTerm.value = searchQuery\n    performSearch()\n  } else if (hash.startsWith('#imdb=')) {\n    const imdbId = decodeURIComponent(hash.replace('#imdb=', ''))\n    setSearchType('imdb')\n    searchTerm.value = imdbId\n    performSearch()\n  } else if (hash.startsWith('#shiki')) {\n    const shikiId = decodeURIComponent(hash.replace('#shiki', ''))\n    setSearchType('shikimori')\n    searchTerm.value = shikiId\n    performSearch()\n  }\n})\n\n// Автопоиск с задержкой (только для поиска по названию)\nwatch(searchTerm, () => {\n  if (searchType.value !== 'title') {\n    return\n  }\n  debouncedPerformSearch()\n})\n</script>\n\n<style scoped>\n.wrapper {\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n}\n\n.mainpage {\n  flex: 1;\n  padding-top: 20px;\n  padding-bottom: 40px;\n}\n\n/* Общие стили */\n.search-type-buttons {\n  display: flex;\n  justify-content: center;\n  gap: 20px;\n  padding-top: 10px;\n  margin-bottom: 5px;\n  flex-wrap: wrap;\n}\n\n.search-type-buttons button {\n  padding: 5px 10px;\n  font-size: 16px;\n  border: none;\n  background: none;\n  color: #fff;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  position: relative;\n}\n\n.search-type-buttons button::after {\n  content: '';\n  position: absolute;\n  left: 0;\n  bottom: -2px;\n  width: 100%;\n  height: 2px;\n  background-color: transparent;\n  transition: background-color 0.3s ease;\n}\n\n.search-type-buttons button.active::after {\n  background-color: #ffffff;\n}\n\n.search-type-buttons button:hover {\n  color: #ffffff;\n}\n\n.search-container {\n  display: flex;\n  justify-content: center;\n  padding: 20px;\n}\n\n.input-wrapper {\n  position: relative;\n  width: 100%;\n  max-width: 800px;\n}\n\n.search-input {\n  box-sizing: border-box;\n  width: 100%;\n  padding: 10px;\n  font-size: 16px;\n  border: 1px solid #ccc;\n  border-radius: 10px;\n  background: rgba(30, 30, 30, 0.8);\n  color: #fff;\n  transition: border-color 0.3s ease;\n}\n\n.search-input:focus {\n  border-color: #558839;\n  outline: none;\n}\n\n.icons {\n  position: absolute;\n  right: 10px;\n  top: 50%;\n  transform: translateY(-50%);\n  display: flex;\n  gap: 8px;\n  align-items: center;\n}\n\n.reset-button,\n.search-button {\n  background: none;\n  border: none;\n  color: #fff;\n  cursor: pointer;\n  padding: 2px;\n  opacity: 0.7;\n  transition: opacity 0.2s ease;\n}\n\n.reset-button:hover,\n.search-button:hover {\n  opacity: 1;\n}\n\n.reset-button i,\n.search-button i {\n  font-size: 18px;\n  display: block;\n  width: 20px;\n  height: 20px;\n}\n\nh2 {\n  display: flex;\n  font-size: 20px;\n  margin-bottom: 20px;\n  justify-content: center;\n  align-items: center;\n  gap: 10px;\n}\n\n/* Сообщение \"Ничего не найдено\" */\n.no-results {\n  width: 100%;\n  text-align: center;\n  color: #fff;\n  font-size: 18px;\n  margin-top: 20px;\n}\n\n/* Подсказка для поиска */\n.search-prompt {\n  text-align: center;\n  color: #fff;\n  font-size: 18px;\n  margin-top: 20px;\n}\n\n@media (max-width: 600px) {\n  .mainpage {\n    padding-top: 0;\n    height: calc(100vh - 30px - 63px);\n  }\n\n  .search-container,\n  .search-type-buttons {\n    padding: 0;\n  }\n}\n</style>\n"],"names":["CACHE_KEY_DONATERS","donaters","ref","currentIndex","intervalId","currentDonater","computed","value","length","fetchDonaters","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","today","cached","_JSON$parse","date","data","dons","wrap","_context","prev","next","Date","toISOString","split","localStorage","getItem","JSON","parse","abrupt","t0","console","error","getDons","sent","map","line","trim","filter","setItem","stringify","t1","stop","apply","arguments","updateCurrentDonater","newIndex","Math","floor","random","onMounted","_callee2","_context2","setInterval","onUnmounted","clearInterval","mainStore","useMainStore","authStore","useAuthStore","router","useRouter","searchType","searchTerm","movies","loading","searchPerformed","showModal","errorMessage","errorCode","history","handleItemDeleted","deletedItemId","item","kp_id","watchEffect","_callee3","_handleApiError","message","code","_callee3$","_context3","token","getMyLists","USER_LIST_TYPES_ENUM","HISTORY","handleApiError","logout","push","go","setSearchType","type","resetSearch","handleInput","event","target","replace","search","debouncedPerformSearch","cancel","performSearch","alert","_ref4","_callee4","response","_response","_response2","_handleApiError2","_context4","test","name","params","getKpIDfromIMDB","id_kp","Error","getKpIDfromSHIKI","apiSearch","movie","_movie$raw_data","_movie$raw_data2","_movie$raw_data3","_objectSpread","id","toString","rating_kp","raw_data","rating","finish","this","clearAllHistory","_ref5","_callee5","_handleApiError3","_context5","delAllFromList","debounce","hash","window","location","startsWith","searchQuery","decodeURIComponent","imdbId","shikiId","watch","title","kinopoisk","shikimori","imdb"],"mappings":"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"}