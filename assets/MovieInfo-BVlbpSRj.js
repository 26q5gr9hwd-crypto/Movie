import{_ as pt,r as v,c as N,b as a,d as i,e as t,m as X,t as m,O as ve,g as h,P as Te,n as M,l as St,u as cn,q as Un,N as Jn,B as dn,x as He,o as Ut,S as jn,k as _t,E as eo,f as Re,V as rn,p as Q,W as Ee,A as G,U as W,X as io,G as Ct,Y as tt,Z as to,$ as $n,a0 as an,a1 as ao,a2 as zn,a3 as ro,v as uo,y as Et,a4 as co,i as Ze,w as Fn,a5 as un,a6 as vo,a7 as mo,a8 as fo,a9 as po,aa as Wn,ab as go,ac as yo,a as On,ad as Kn,ae as Gn,af as ho,ag as bo,ah as ko,ai as wo,aj as Co,ak as _o,al as Eo,am as So,an as Mo,ao as Io}from"./index-Bpsq9sUo.js";import{_ as xo,a as Yn,b as Zn,M as Xn}from"./MovieList-6WX90t0D.js";import{p as Yt,f as Ke,u as no,a as Lo,b as oo}from"./useCommentFormatting-CAdH2xpS.js";import{S as so}from"./SpinnerLoading-C3rrmisV.js";import{N as Cn}from"./ToastMessage-CA6P4YJ5.js";import{u as lo,S as To,a as Ro}from"./trailer-DMpZ6uoG.js";const ln="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVR4nO2ZQUoDMRSGR7eewHoFsVS0HkUUXNXqASqK2EURBPFIVRe6c+UN1CvUXWvbT4KvMAwzNnnJdCrmg1BKad7/v7y0b5IkiUQiCwGoAx3gQjEugZ0qxTeAIX6MKjMBnBOGS62AVWAPOHVYdlMu9YArYOhphLeBT+ALmOKGEd2QubaAK+B2zngFxt4GgDXgGZjgR8ch5oEkCi8DkvlnRcYLV0Apfqw10M7JvPkV6AN3FmVwK+WyZRnvMEe8ef/ibECyb2o+zRuwnpQAxeLNivQ0BvYyE46qEJ/8fK4ycJKp/X4V4n0MdDNfukkqEO9jwP1LDgD7BeKPgmgp04CL+KUz4Cp+qQxoxC+NAdsNm4c0hWkukkUa8BGfegiadbFDq3/2UAZ8xc+QVvzMtqcKYkBaZ5/MN5xEl2DgLGDZ1KswsC09FPJqXTZoNm5oA6kyMGI2FxqfkluJ0uMTDfhBXAHiHvCCWEL8/RLqlv1MPCf+TSZ+13WC7KnEfWlqcwAeU7GNjnbiQsG5UC1ZAEAt1UMhOpquk6zknMy9l20C2AA+MnEHRo9msuOCs9EH4Fp5TVQ0rqVs0plH4re02Qh1Oq1lCjypsp+5H3gKcD/gykTirqnFZ/ZDy+OGxpapzD+QePrM/2KkKfcGPcv7AdvRkz23G1x4JPIP+AY3r/ywUk/2JAAAAABJRU5ErkJggg==",Ao="/reyohoho/assets/icon-shikimori-DGvXK9Jc.svg",Gt=d=>{const n=document.createElement("div");n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.width="100%",n.style.height="100%",n.style.backgroundColor="rgba(0, 0, 0, 0.8)",n.style.color="white",n.style.display="flex",n.style.justifyContent="center",n.style.alignItems="center",n.style.fontSize="2rem",n.style.zIndex="99000",n.textContent=d,document.body.appendChild(n),setTimeout(()=>{document.body.removeChild(n)},2e3)},Bo={key:0},Po={key:1},No={class:"players-list"},Oo=["onClick"],$o={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Fo={key:0},Uo={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},jo={key:1},Do={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Ho=["onClick"],qo={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Vo={__name:"PlayerModal",props:{players:{type:Array,required:!0},selectedPlayer:{type:Object,default:null}},emits:["close","select"],setup(d,{emit:n}){const r=d,s=n,b=v(null),y=N(()=>r.players.filter(L=>!g(L)&&!E(L))),f=N(()=>r.players.some(L=>g(L))),w=N(()=>r.players.some(L=>E(L))),g=L=>L.key.toUpperCase().includes("HDREZKA"),E=L=>L.key.toUpperCase().includes("KODIK"),k=L=>L.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"").replace(/KODIK>/,"").trim(),l=L=>{s("select",L),s("close")},S=L=>r.selectedPlayer&&r.selectedPlayer.key===L.key,A=L=>r.selectedPlayer?L==="hdrezka"&&g(r.selectedPlayer)||L==="kodik"&&E(r.selectedPlayer):!1,p=L=>{b.value=L},x=()=>{b.value=null},O=L=>{let F=r.players.filter(R=>L==="hdrezka"&&g(R)||L==="kodik"&&E(R));return L==="kodik"?F.sort((R,ne)=>k(R.translate).localeCompare(k(ne.translate))):F},B=L=>O(L).some(F=>F.warning);return(L,F)=>(i(),a("div",{class:"modal",onClick:F[4]||(F[4]=St(R=>L.$emit("close"),["self"]))},[t("div",{class:"modal-content",onClick:F[3]||(F[3]=St(()=>{},["stop"]))},[t("button",{class:"close",onClick:F[0]||(F[0]=R=>L.$emit("close"))},"√ó"),b.value?(i(),a("h2",Po,[t("button",{class:"back-btn",onClick:x},"‚Üê –ù–∞–∑–∞–¥"),X(" "+m(b.value==="hdrezka"?"ReYohoho - HDrezka":"Kodik"),1)])):(i(),a("h2",Bo,"–í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–µ–µ—Ä")),t("ul",No,[b.value?(i(!0),a(ve,{key:1},Te(O(b.value),R=>(i(),a("li",{key:R.key},[t("button",{class:M(["player-item",{active:S(R)}]),onClick:ne=>l(R)},[X(m(k(R.translate))+" ",1),R.warning?(i(),a("span",qo,"warning")):h("",!0)],10,Ho)]))),128)):(i(),a(ve,{key:0},[(i(!0),a(ve,null,Te(y.value,R=>(i(),a("li",{key:R.key},[t("button",{class:M(["player-item",{active:S(R)}]),onClick:ne=>l(R)},[X(m(k(R.translate))+" ",1),R.warning?(i(),a("span",$o,"warning")):h("",!0)],10,Oo)]))),128)),f.value?(i(),a("li",Fo,[t("button",{class:M(["group-item",{active:A("hdrezka")}]),onClick:F[1]||(F[1]=R=>p("hdrezka"))},[F[5]||(F[5]=t("span",{class:"material-icons group-icon"},"folder",-1)),F[6]||(F[6]=X(" ReYohoho - HDrezka ")),B("hdrezka")?(i(),a("span",Uo,"warning")):h("",!0)],2)])):h("",!0),w.value?(i(),a("li",jo,[t("button",{class:M(["group-item",{active:A("kodik")}]),onClick:F[2]||(F[2]=R=>p("kodik"))},[F[7]||(F[7]=t("span",{class:"material-icons group-icon"},"folder",-1)),F[8]||(F[8]=X(" Kodik ")),B("kodik")?(i(),a("span",Do,"warning")):h("",!0)],2)])):h("",!0)],64))])])]))}},zo=pt(Vo,[["__scopeId","data-v-8b8d2b67"]]);class Wo{constructor(){this.ws=null,this.isConnected=!1,this.isAuthenticated=!1,this.messageId=0,this.sources=new Map,this.filtersFound=new Map,this.pendingRequests=new Map,this.callbacks={onConnect:null,onDisconnect:null,onSourcesUpdated:null,onFiltersFound:null,onError:null},this.BLUR_FILTER_NAME="reyohoho"}generateMessageId(){return++this.messageId}setCallbacks(n){this.callbacks=n}async connect(n="localhost",r=4455,s=""){return new Promise((b,y)=>{const f="ws://".concat(n,":").concat(r);console.log("Connecting to OBS WebSocket at ".concat(f)),this.ws=new WebSocket(f),this.ws.onopen=async()=>{var w,g;console.log("WebSocket connection opened");try{const E=await this.authenticate(s);console.log("Authentication response:",E),E.success?(console.log("Successfully authenticated to OBS"),(g=(w=this.callbacks).onConnect)==null||g.call(w),this.loadSourcesAndSearchFilters(),b()):(console.error("Authentication failed"),y(new Error("Authentication failed")))}catch(E){console.error("Error during authentication:",E),y(E)}},this.ws.onmessage=w=>{this.handleMessage(JSON.parse(w.data))},this.ws.onclose=()=>{var w,g;console.log("WebSocket connection closed"),(g=(w=this.callbacks).onDisconnect)==null||g.call(w)},this.ws.onerror=w=>{var g,E;console.error("WebSocket error:",w),(E=(g=this.callbacks).onError)==null||E.call(g,w.message||"Connection error"),y(w)}})}disconnect(){if(this.ws&&(this.ws.close(),this.ws=null),this.pendingRequests){for(const[,{reject:n}]of this.pendingRequests.entries())n(new Error("Connection closed"));this.pendingRequests.clear()}this.sources.clear(),this.filtersFound.clear()}sendRequest(n,r={}){return new Promise((s,b)=>{if(!this.isConnected||!this.ws){console.warn("No connection to OBS"),b(new Error("No connection to OBS"));return}const y=this.generateMessageId().toString(),f={op:6,d:{requestType:n,requestId:y,requestData:r}};console.log("Sending OBS request: ".concat(n),r),this.pendingRequests.set(y,{resolve:s,reject:b}),this.ws.send(JSON.stringify(f)),setTimeout(()=>{this.pendingRequests&&this.pendingRequests.has(y)&&(this.pendingRequests.delete(y),b(new Error("Request ".concat(n," timed out"))))},1e4)})}handleMessage(n){switch(n.op){case 0:this.handleHello(n.d);break;case 2:this.handleIdentified();break;case 7:this.handleRequestResponse(n.d);break;case 5:this.handleEvent(n.d);break;default:console.log("Unknown OBS message: op=".concat(n.op))}}authenticate(n=""){return new Promise(r=>{this.password=n,this.authResolve=r})}async handleHello(n){console.log("Received OBS hello"),this.isConnected=!0;const r={op:1,d:{rpcVersion:1}};if(n.authentication&&this.password)try{const s=new TextEncoder,b=await crypto.subtle.digest("SHA-256",s.encode(this.password+n.authentication.salt)),y=Array.from(new Uint8Array(b)),f=btoa(String.fromCharCode(...y)),w=await crypto.subtle.digest("SHA-256",s.encode(f+n.authentication.challenge)),g=Array.from(new Uint8Array(w)),E=btoa(String.fromCharCode(...g));r.d.authentication=E}catch(s){console.error("Authentication error:",s)}this.ws.send(JSON.stringify(r))}handleIdentified(){console.log("OBS authentication successful"),this.isAuthenticated=!0,this.authResolve&&(this.authResolve({success:!0}),this.authResolve=null)}handleRequestResponse(n){const{requestId:r,requestType:s,requestStatus:b,responseData:y}=n;if(console.log("Received response for ".concat(s,":"),{success:b.result,code:b.code,comment:b.comment}),!this.pendingRequests){console.warn("No pending requests map");return}const f=this.pendingRequests.get(r);if(!f){console.warn("No pending request found for ID: ".concat(r));return}this.pendingRequests.delete(r),b.result?(console.log("Request ".concat(s," successful"),y),f.resolve(y)):(console.error("Request ".concat(s," failed:"),b.comment),f.reject(new Error("".concat(s," failed: ").concat(b.comment))))}handleFilterListResponse(n){const r=n.sourceName,b=(n.filters||[]).find(y=>y.filterName.toLowerCase()===this.BLUR_FILTER_NAME.toLowerCase());b&&(this.foundFilters.set(r,{sourceName:r,filterName:b.filterName,enabled:b.filterEnabled}),console.log("Found reyohoho filter in source: ".concat(r))),this.checkSearchComplete()}checkSearchComplete(){setTimeout(()=>{var n,r;console.log("Search complete. Found ".concat(this.foundFilters.size," reyohoho filters")),(r=(n=this.callbacks).onFiltersFound)==null||r.call(n,Array.from(this.foundFilters.values()))},500)}handleEvent(n){console.log("OBS event: ".concat(n.eventType))}async testConnection(){try{console.log("Testing OBS connection...");const n=await this.sendRequest("GetVersion");return console.log("OBS connection test successful:",n),{success:!0,version:n}}catch(n){return console.error("OBS connection test failed:",n),{success:!1,error:n.message}}}async loadSourcesAndSearchFilters(){var n,r,s,b,y,f,w,g,E,k;try{console.log("Loading sources and searching for filters...");try{const p=await this.sendRequest("GetVersion");console.log("OBS version info:",p)}catch(p){console.warn("Could not get OBS version:",p)}console.log("Requesting scene list...");const l=await this.sendRequest("GetSceneList");if(console.log("Raw scenes response:",l),!l||!l.scenes){console.error("Invalid scenes response structure:",l),(r=(n=this.callbacks).onError)==null||r.call(n,"Invalid response from OBS - no scenes data");return}console.log("Found scenes:",l.scenes.length),console.log("Requesting input list...");const S=await this.sendRequest("GetInputList");if(console.log("Raw inputs response:",S),!S||!S.inputs){console.error("Invalid inputs response structure:",S),(b=(s=this.callbacks).onError)==null||b.call(s,"Invalid response from OBS - no inputs data");return}console.log("Found inputs:",S.inputs.length),this.sources.clear(),this.filtersFound.clear();for(const p of l.scenes)if(console.log("Checking scene: ".concat(p.sceneName," with ").concat(p.sceneItems?p.sceneItems.length:0," items")),p.sceneItems&&Array.isArray(p.sceneItems))for(const x of p.sceneItems)x.sourceName&&(this.sources.set(x.sourceName,{sceneName:p.sceneName,sourceId:x.sceneItemId,sourceName:x.sourceName}),await this.searchFiltersInSource(x.sourceName,p.sceneName));for(const p of S.inputs)console.log("Checking input: ".concat(p.inputName)),this.sources.has(p.inputName)||this.sources.set(p.inputName,{sceneName:"Direct Input",sourceId:null,sourceName:p.inputName}),await this.searchFiltersInSource(p.inputName,"Direct Input");const A=Array.from(this.filtersFound.values());console.log("Total filters found:",A.length),A.forEach(p=>{console.log("- ".concat(p.sourceName,": ").concat(p.filterName," (").concat(p.enabled?"enabled":"disabled",")"))}),(f=(y=this.callbacks).onFiltersFound)==null||f.call(y,A),(g=(w=this.callbacks).onSourcesUpdated)==null||g.call(w,Array.from(this.sources.values()))}catch(l){console.error("Error loading sources:",l),console.error("Error stack:",l.stack),(k=(E=this.callbacks).onError)==null||k.call(E,"Error loading sources: ".concat(l.message))}}async searchFiltersInSource(n,r){try{console.log("Searching filters in source: ".concat(n));const s=await this.sendRequest("GetSourceFilterList",{sourceName:n});console.log("Source ".concat(n," has ").concat(s.filters.length," filters"));for(const b of s.filters){console.log("  Filter: ".concat(b.filterName," (").concat(b.filterEnabled?"enabled":"disabled",")"));const y="".concat(n,"::").concat(b.filterName);this.filtersFound.set(y,{id:y,sourceName:n,sceneName:r,filterName:b.filterName,enabled:b.filterEnabled})}}catch(s){console.warn("Could not get filters for source ".concat(n,":"),s)}}async enableBlur(n){var s,b;if(!n){console.warn("No filter selected for blur");return}const r=this.filtersFound.get(n);if(!r){console.warn("Selected filter not found:",n);return}try{await this.sendRequest("SetSourceFilterEnabled",{sourceName:r.sourceName,filterName:r.filterName,filterEnabled:!0}),r.enabled=!0,console.log("Enabled blur filter: ".concat(r.sourceName,"::").concat(r.filterName))}catch(y){(b=(s=this.callbacks).onError)==null||b.call(s,"Error enabling filter: ".concat(y.message))}}async disableBlur(n){var s,b;if(!n){console.warn("No filter selected for blur");return}const r=this.filtersFound.get(n);if(!r){console.warn("Selected filter not found:",n);return}try{await this.sendRequest("SetSourceFilterEnabled",{sourceName:r.sourceName,filterName:r.filterName,filterEnabled:!1}),r.enabled=!1,console.log("Disabled blur filter: ".concat(r.sourceName,"::").concat(r.filterName))}catch(y){(b=(s=this.callbacks).onError)==null||b.call(s,"Error disabling filter: ".concat(y.message))}}async testBlur(n,r=2e3){if(!n){console.warn("No filter selected for test");return}await this.enableBlur(n),setTimeout(()=>{this.disableBlur(n)},r)}getFilterById(n){return this.filtersFound.get(n)}getAllFilters(){return Array.from(this.filtersFound.values())}}const Ko={class:"players-list"},Go=["src"],Yo={key:1,class:"controls"},Zo={class:"main-controls"},Xo={class:"material-icons"},Qo={class:"list-button-item"},Jo={class:"material-icons"},es={class:"list-button-item"},ts={class:"material-icons"},ns={class:"list-button-item"},os={class:"list-button-item"},ss={class:"material-icons"},ls={class:"list-button-item"},is={class:"material-icons"},as={class:"tooltip-container","data-tooltip-container":"dimming"},rs={class:"material-icons"},us={class:"tooltip-container","data-tooltip-container":"blur"},cs={class:"tooltip-container","data-tooltip-container":"compressor"},ds={class:"tooltip-container","data-tooltip-container":"mirror"},vs={class:"tooltip-container","data-tooltip-container":"theater"},ms={class:"material-symbols-outlined"},fs={class:"custom-tooltip","data-tooltip":"theater"},ps={class:"tooltip-container","data-tooltip-container":"pip"},gs={class:"tooltip-container","data-tooltip-container":"aspect_ratio"},ys={class:"current-ratio"},hs=["onClick"],bs={key:0,class:"tooltip-container","data-tooltip-container":"app_link"},ks={class:"custom-tooltip","data-tooltip":"app_link"},ws={key:1,class:"tooltip-container","data-tooltip-container":"copy_link"},Cs={class:"custom-tooltip","data-tooltip":"copy_link"},_s={key:2,class:"tooltip-container","data-tooltip-container":"overlay"},Es={class:"material-icons"},Ss={key:0,class:"desktop-list-buttons"},Ms={class:"tooltip-container"},Is={class:"material-icons"},xs={class:"custom-tooltip"},Ls={class:"tooltip-container"},Ts={class:"material-icons"},Rs={class:"custom-tooltip"},As={class:"tooltip-container"},Bs={class:"custom-tooltip"},Ps={class:"tooltip-container"},Ns={class:"material-icons"},Os={class:"custom-tooltip"},$s={class:"tooltip-container"},Fs={class:"material-icons"},Us={class:"custom-tooltip"},js={__name:"PlayerComponent",props:{kpId:String,movieInfo:{type:Object,default:()=>({})}},emits:["update:selectedPlayer","update:movieInfo"],setup(d,{emit:n}){const r=cn(),s=lo(),b=Un(),y=Jn(),f=dn(),w=v(y.params.kp_id),g=d,E=n,k=v([]),l=v(null),S=v(!0),A=v(!1),p=v(!1),x=v(null),O=v(null),B=v(!1),L=v(""),F=v(null),R=v(window.innerHeight*.9),ne=N(()=>"".concat(R.value,"px")),J=N(()=>r.isMobile),$=N(()=>!!window.electronAPI),T=v(null),qe=v(!1);let pe=null;const re=v(null),nt=v(null),H=v(null),be=v(null),ue=v(!1),ae=v(!1),Ae=v(null),gt=v(null),ot=v(0),we=v(null),Se=v(null),Me=v(null),Xe=v(null),Qe=v(null),je=v(null),Z=N({get:()=>s.videoOverlayEnabled,set:o=>s.updateVideoOverlay(o)}),fe=N({get:()=>s.overlaySettings,set:o=>s.updateOverlaySettings(o)}),$e=v(0),Je=v(0),rt=v([]),V=v(null),st=v(null),Ve=v(!1),ce=v(null),Fe=v(!1),Mt=v([]),I=v([]),z=N({get:()=>s.obsSettings,set:o=>s.updateObsSettings(o)}),ze=o=>{const e=document.querySelector('[data-tooltip-container="'.concat(o,'"]')),u=document.querySelector('[data-tooltip="'.concat(o,'"]'));if(!e||!u)return;const C=e.getBoundingClientRect(),_=u.getBoundingClientRect(),j=window.innerHeight;C.bottom+_.height>j?(u.style.top="auto",u.style.bottom="100%",u.style.marginTop="0",u.style.marginBottom="12px",u.style.transform="translateX(-50%)"):(u.style.top="100%",u.style.bottom="auto",u.style.marginTop="12px",u.style.marginBottom="0",u.style.transform="translateX(-50%)")},ke=o=>{T.value=o,qe.value=!1,clearTimeout(pe),tt(()=>{ze(o)})},Be=()=>{qe.value||(pe=setTimeout(()=>{T.value=null},300))},jt=()=>{qe.value=!0,clearTimeout(pe)},Rt=()=>{qe.value=!1,T.value=null},ut=N({get:()=>s.aspectRatio,set:o=>s.updateAspectRatio(o)}),ct=N({get:()=>s.isCentered,set:o=>s.updateCentering(o)}),dt=N(()=>{var o,e,u,C,_,j,P,q,se,ee;return((e=(o=g.movieInfo)==null?void 0:o.lists)==null?void 0:e.isFavorite)||((C=(u=g.movieInfo)==null?void 0:u.lists)==null?void 0:C.isWatching)||((j=(_=g.movieInfo)==null?void 0:_.lists)==null?void 0:j.isLater)||((q=(P=g.movieInfo)==null?void 0:P.lists)==null?void 0:q.isCompleted)||((ee=(se=g.movieInfo)==null?void 0:se.lists)==null?void 0:ee.isAbandoned)}),U=N(()=>s.preferredPlayer),oe=v(0),Ie=o=>o.toUpperCase(),Pe=()=>{if(A.value||!O.value)return;const[o,e]=ut.value.split(":").map(Number);R.value=window.innerHeight*.9,oe.value=Math.min(O.value.clientWidth*(e/o),R.value)},he=N(()=>{if(A.value)return{};const[o,e]=ut.value.split(":").map(Number),u=R.value*(o/e);return{width:"100%",maxWidth:"".concat(u,"px"),maxHeight:ne.value,margin:"0 auto",overflow:"hidden"}}),Oe=N(()=>{const[o,e]=ut.value.split(":").map(Number);return{position:"relative",width:"100%",paddingTop:"".concat(e/o*100,"%")}}),De=()=>{O.value&&setTimeout(()=>{tt(()=>{O.value.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})},500)},yt=async()=>{try{L.value="",F.value=null;const o=await io(g.kpId);if(k.value=Object.entries(o).map(([e,u])=>({key:e.toUpperCase(),...u})),k.value.length>0){if(U.value){const e=Ie(U.value),u=k.value.find(C=>Ie(C.key)===e);l.value=u||k.value[0]}else l.value=k.value[0];E("update:selectedPlayer",l.value)}}catch(o){const{message:e,code:u}=Ct(o);L.value=e,F.value=u,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–ª–µ–µ—Ä–æ–≤:",o)}},Dt=()=>{B.value=!0},Ge=()=>{B.value=!1},It=()=>{try{return we.value||(we.value=new(window.AudioContext||window.webkitAudioContext)),Se.value||(Se.value=we.value.createDynamicsCompressor(),Se.value.threshold.value=-50,Se.value.knee.value=40,Se.value.ratio.value=12,Se.value.attack.value=0,Se.value.release.value=.25,Xe.value=we.value.createGain(),Qe.value=we.value.createGain(),Xe.value.gain.value=0,Qe.value.gain.value=1,Se.value.connect(Xe.value),Xe.value.connect(we.value.destination),Qe.value.connect(we.value.destination)),!0}catch(o){return console.log("Error initializing audio context:",o),!1}},et=async o=>{try{if(!we.value||je.value===o)return!0;const e=x.value,u=(e==null?void 0:e.src)||"";if(u.includes("videoframe")||u.includes("kinoserial.net")||u.includes("allarknow"))return console.log("Player detected as unsupported for compressor:",u),je.value=o,Me.value=null,ae.value=!1,$.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –ø–ª–µ–µ—Ä–æ–º"),!1;if(Me.value)try{Me.value.disconnect()}catch(_){}const C=async(_=0)=>{_>0&&await new Promise(j=>setTimeout(j,_));try{return Me.value=we.value.createMediaElementSource(o),je.value=o,Me.value.connect(Se.value),Me.value.connect(Qe.value),console.log("Video audio setup completed (attempt with ".concat(_,"ms delay)")),!0}catch(j){if(j.name==="InvalidStateError"&&j.message.includes("already connected"))return console.log("MediaElementSource already connected (".concat(_,"ms delay attempt)")),!1;throw j}};return await C(0)||await C(100)||await C(300)||await C(800)?!0:(console.log("Video element has internal audio processing, compressor not available for this player"),je.value=o,Me.value=null,ae.value=!1,$.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –ø–ª–µ–µ—Ä–æ–º"),!1)}catch(e){return console.log("Error setting up video audio:",e),!1}},lt=async o=>{if(x.value)try{const e=x.value,u=e.contentDocument||e.contentWindow.document;if(!u)return;const C=u.querySelectorAll("video");if(C.length===0)return;const _=C[0];if(!It())return;if(!await et(_)||!Me.value){console.log("Compressor not available for this player");return}o&&!ae.value?(Xe.value.gain.setValueAtTime(1,we.value.currentTime),Qe.value.gain.setValueAtTime(0,we.value.currentTime),ae.value=!0,$.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –≤–∫–ª—é—á—ë–Ω"),console.log("Compressor enabled")):!o&&ae.value&&(Xe.value.gain.setValueAtTime(0,we.value.currentTime),Qe.value.gain.setValueAtTime(1,we.value.currentTime),ae.value=!1,$.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –æ—Ç–∫–ª—é—á—ë–Ω"),console.log("Compressor disabled"))}catch(e){console.log("Compressor error:",e),$.value&&window.electronAPI.showToast("–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä–∞")}},ht=()=>{$.value?window.electronAPI.sendHotKey("F2"):(Gt("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},vt=()=>{$.value?(bt.value=!bt.value,lt(bt.value)):(Gt("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},it=()=>{$.value?(at.value=!at.value,mn(at.value)):(Gt("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},At=()=>{A.value=!A.value,A.value?(window.addEventListener("mousemove",Pt),document.addEventListener("keydown",Vt),document.body.classList.add("no-scroll")):(window.removeEventListener("mousemove",Pt),document.removeEventListener("keydown",Vt),document.body.classList.remove("no-scroll")),p.value=A.value,tt(()=>De())},Bt=v(null),Pt=()=>{Bt.value=setTimeout(()=>{clearTimeout(Bt.value),p.value=!1},4e3),p.value=!0},Ht=N(()=>r.dimmingEnabled),vn=()=>{A.value||r.toggleDimming()},bt=N({get:()=>s.compressorEnabled,set:o=>s.updateCompressor(o)}),at=N({get:()=>s.mirrorEnabled,set:o=>s.updateMirror(o)}),mn=o=>{if(x.value)try{const e=x.value,u=e.contentDocument||e.contentWindow.document;if(!u)return;const C=u.querySelectorAll("video");if(C.length>0&&(C.forEach(_=>{o?_.style.transform="scaleX(-1)":_.style.transform="scaleX(1)"}),ue.value=o,$.value)){const _=o?"–ó–µ—Ä–∫–∞–ª–æ –≤–∫–ª—é—á–µ–Ω–æ":"–ó–µ—Ä–∫–∞–ª–æ –æ—Ç–∫–ª—é—á–µ–Ω–æ";window.electronAPI.showToast(_)}}catch(e){}},qt=()=>{be.value&&clearInterval(be.value),be.value=setInterval(()=>{if(x.value)try{const o=x.value,e=o.contentDocument||o.contentWindow.document;if(!e)return;const u=e.querySelectorAll("video");if(u.length>0){const C=u[0],j=C.style.transform==="scaleX(-1)";at.value&&!j?(C.style.transform="scaleX(-1)",ue.value=!0):!at.value&&j&&(C.style.transform="scaleX(1)",ue.value=!1),je.value!==C?(je.value=null,ae.value=!1,bt.value&&setTimeout(()=>{lt(!0)},500)):bt.value!==ae.value&&Me.value&&(console.log("Compressor state mismatch, reapplying"),lt(bt.value))}}catch(o){}},1e3)},xt=(o=!1)=>{if(!$.value)return;Ae.value&&clearInterval(Ae.value);let e=!1,u=[];function C(){var _;if(u=[],window.selectedNudityTimings&&Array.isArray(window.selectedNudityTimings)&&((_=g.movieInfo)!=null&&_.nudity_timings)){for(const j of g.movieInfo.nudity_timings)if(window.selectedNudityTimings.includes(j.id)){const P=Yt(j.timing_text);P&&P.length>0&&u.push(...P)}}}C(),Ae.value=setInterval(()=>{var _,j,P;if(x.value){C();try{const q=x.value,se=q.contentDocument||q.contentWindow.document;if(!se)return;const ee=se.querySelectorAll("video");if(ee.length>0){const te=ee[0];if($e.value=te.currentTime||0,Je.value=te.duration||0,$.value&&Z.value&&!V.value&&!Ve.value&&Date.now()-(window.iframeLoadTime||0)>=3e3)try{mt(se,te)}catch(de){console.log("Error creating overlay:",de),Ve.value=!1}if($.value&&!Z.value&&V.value&&setTimeout(()=>{!Z.value&&V.value&&kt()},100),$.value&&((_=g.movieInfo)!=null&&_.nudity_timings)){const K=te.currentTime,de=[],_e=[],Y=u.length>0,ie=z.value.enabled&&Fe.value;if(window.overlayNudityTimings&&Array.isArray(window.overlayNudityTimings)&&window.overlayNudityTimings.length>0){for(const xe of g.movieInfo.nudity_timings)if(window.overlayNudityTimings.includes(xe.id)){const Ne=Yt(xe.timing_text);if(Ne&&Ne.length>0){const Le=[];if(!Y&&!ie)for(const[le,ge]of Ne){let c="normal";K>=le&&K<=ge?(c="active",_e.push(xe.id)):le>K&&le-K<=20&&(c="upcoming"),Le.push({text:"[".concat(Ke(le),"-").concat(Ke(ge),"]"),status:c})}else for(const[le,ge]of Ne){let c="normal";ie&&K>=le&&K<=ge?(c="active",_e.push(xe.id)):ie&&le>K&&le-K<=20&&(c="upcoming"),Le.push({text:"[".concat(Ke(le),"-").concat(Ke(ge),"]"),status:c})}de.push({id:xe.id,intervals:Le})}}}rt.value=de}if($.value&&V.value&&Z.value&&kn(),!te.paused){const K=te.currentTime,de=te.duration,_e=de>0?K/de*100:0;if(o&&(console.log("Video position: ".concat(K.toFixed(2),"s / ").concat(de.toFixed(2),"s (").concat(_e.toFixed(1),"%)")),u.length>0)){const ie=u.map(([xe,Ne])=>"".concat(Ke(xe)," - ").concat(Ke(Ne))).join(", ");console.log("Active blur intervals: [".concat(ie,"]"))}let Y=!1;for(const[ie,xe]of u)if(K>=ie&&K<=xe){Y=!0;break}z.value.enabled&&Fe.value&&z.value.selectedFilterId?Y&&!e?((j=ce.value)==null||j.enableBlur(z.value.selectedFilterId),e=!0,console.log("OBS Blur applied at",K.toFixed(2),"seconds")):!Y&&e&&((P=ce.value)==null||P.disableBlur(z.value.selectedFilterId),e=!1,console.log("OBS Blur removed at",K.toFixed(2),"seconds")):Y&&!e&&$.value?(window.electronAPI.sendHotKey("F2"),e=!0,console.log("Blur applied at",K.toFixed(2),"seconds")):!Y&&e&&!z.value.enabled&&(window.electronAPI.sendHotKey("F2"),e=!1,console.log("Blur removed at",K.toFixed(2),"seconds"))}}}catch(q){console.log("Error monitoring video position:",q)}}},100)},Nt=()=>{S.value=!1,window.iframeLoadTime=Date.now(),qt(),xt(),$.value&&Z.value&&!V.value&&setTimeout(()=>{try{const o=x.value,e=o.contentDocument||o.contentWindow.document;if(e){const u=e.querySelector("video");u&&mt(e,u)}}catch(o){console.log("Error creating overlay on iframe load:",o),Ve.value=!1}},3e3)},Vt=o=>{(o.key==="Escape"&&A.value||o.altKey&&o.keyCode===84)&&At()},fn=o=>{ut.value=o,setTimeout(()=>{ct.value&&De()},310)},_n=()=>{const o="reyohoho://#".concat(w.value);try{window.location.href=o}catch(e){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Å—ã–ª–∫–∏:",e)}},En=()=>{const o=window.location.href;navigator.clipboard.writeText(o).then(()=>{}),re.value.showNotification("–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∏–ª—å–º —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞")};function pn(o){return o.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"HDRezka - ").replace(/KODIK>/,"Kodik - ").trim()}const Sn=()=>{try{Me.value&&(Me.value.disconnect(),Me.value=null),we.value&&(we.value.close(),we.value=null),Se.value=null,Xe.value=null,Qe.value=null,je.value=null,ae.value=!1}catch(o){console.log("Error cleaning up audio context:",o)}},Mn=o=>{var e;if(((e=l.value)==null?void 0:e.key)===o.key){Ge();return}l.value=o,S.value=!0,ue.value=!1,ae.value=!1,je.value=null,V.value&&kt(),be.value&&(clearInterval(be.value),be.value=null),Ae.value&&(clearInterval(Ae.value),Ae.value=null),o.key.toLowerCase().includes("torrents")||s.updatePreferredPlayer(Ie(o.key)),E("update:selectedPlayer",o)};He(l,o=>{o&&(S.value=!0,ue.value=!1,ae.value=!1,je.value=null,V.value&&kt(),be.value&&(clearInterval(be.value),be.value=null),Ae.value&&(clearInterval(Ae.value),Ae.value=null),o.key.toLowerCase().includes("torrents")||s.updatePreferredPlayer(Ie(o.key)),E("update:selectedPlayer",o))}),He(()=>y.params.kp_id,async o=>{o&&o!==w.value&&(w.value=o,ue.value=!1,ae.value=!1,je.value=null,V.value&&kt(),be.value&&(clearInterval(be.value),be.value=null),Ae.value&&(clearInterval(Ae.value),Ae.value=null),ot.value=0,ct.value&&De())},{immediate:!0}),He(Z,o=>{if($.value)if(o&&!V.value){const e=()=>{if(x.value)try{const u=x.value,C=u.contentDocument||u.contentWindow.document;if(C){const _=C.querySelector("video");if(_){const j=Date.now()-(window.iframeLoadTime||0);j>=3e3?mt(C,_):setTimeout(e,3e3-j)}}}catch(u){console.log("Error creating overlay via watcher:",u),Ve.value=!1}};e()}else!o&&V.value&&kt()}),He(rt,(o,e)=>{if(!$.value)return;const u=e&&e.length>0,C=o&&o.length>0;!u&&C&&(Z.value||(Z.value=!0,window.electronAPI&&window.electronAPI.showToast("–û–≤–µ—Ä–ª–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á—ë–Ω - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ç–∞–π–º–∏–Ω–≥–∏")))},{deep:!0}),He(()=>z.value.enabled,o=>{o&&!Fe.value?Wt():!o&&Fe.value&&bn()}),He(fe,(o,e)=>{!$.value||!Z.value||(e&&o.showBackground!==e.showBackground?V.value&&(kt(),setTimeout(()=>{if(x.value&&Z.value)try{const u=x.value,C=u.contentDocument||u.contentWindow.document;if(C){const _=C.querySelector("video");_&&mt(C,_)}}catch(u){console.log("Error recreating overlay:",u)}},100)):V.value&&kn())},{deep:!0});const zt=["16:9","12:5","4:3"],gn=()=>{const e=(zt.indexOf(ut.value)+1)%zt.length;fn(zt[e])},yn=o=>{var u,C,_,j,P,q,se,ee,te,K,de,_e,Y;return(Y={[W.FAVORITE]:((C=(u=g.movieInfo)==null?void 0:u.lists)==null?void 0:C.isFavorite)||!1,[W.HISTORY]:((j=(_=g.movieInfo)==null?void 0:_.lists)==null?void 0:j.isHistory)||!1,[W.LATER]:((q=(P=g.movieInfo)==null?void 0:P.lists)==null?void 0:q.isLater)||!1,[W.COMPLETED]:((ee=(se=g.movieInfo)==null?void 0:se.lists)==null?void 0:ee.isCompleted)||!1,[W.ABANDONED]:((K=(te=g.movieInfo)==null?void 0:te.lists)==null?void 0:K.isAbandoned)||!1,[W.WATCHING]:((_e=(de=g.movieInfo)==null?void 0:de.lists)==null?void 0:_e.isWatching)||!1}[o])!=null?Y:!1},Ce=async o=>{if(!b.token){re.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:In});return}try{const e={[W.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[W.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[W.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[W.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[W.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[W.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};yn(o)?(await to(w.value,o),re.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(e[o]))):(await $n(w.value,o),re.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(e[o])))}catch(e){const{message:u,code:C}=Ct(e);re.value.showNotification("".concat(u," ").concat(C))}E("update:movieInfo")},In=()=>{f.push("/login")},Lt=N(()=>s.showFavoriteTooltip),xn=()=>{f.push("/settings"),Rt()},Ln=async()=>{if(!$.value){Gt("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank");return}if(x.value)try{const o=x.value,e=o.contentDocument||o.contentWindow.document;if(!e)return;const u=e.querySelector("video");if(!u)return;document.pictureInPictureElement?await document.exitPictureInPicture():document.pictureInPictureEnabled?await u.requestPictureInPicture():Gt('–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–∂–∏–º "–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ"')}catch(o){console.error("Error toggling PiP:",o),Gt('–ù–µ —É–¥–∞–ª–æ—Å—å –≤–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º "–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ"')}},Tn=()=>{if(Z.value=!Z.value,!Z.value)kt();else{const o=()=>{if(!V.value&&x.value)try{const e=x.value,u=e.contentDocument||e.contentWindow.document;if(u){const C=u.querySelector("video");if(C){const _=Date.now()-(window.iframeLoadTime||0);_>=3e3?mt(u,C):setTimeout(o,3e3-_)}}}catch(e){console.log("Error creating overlay:",e),Ve.value=!1}};o()}},hn=()=>{ce.value&&ce.value.disconnect(),ce.value=new Wo,ce.value.setCallbacks({onConnect:()=>{Fe.value=!0,s.setObsConnected(!0),$.value&&window.electronAPI&&window.electronAPI.showToast("–ü–æ–¥–∫–ª—é—á–µ–Ω –∫ OBS WebSocket")},onDisconnect:()=>{Fe.value=!1,s.setObsConnected(!1),Mt.value=[],I.value=[]},onSourcesUpdated:o=>{Mt.value=o,window.obsSources=o},onFiltersFound:o=>{I.value=o,window.obsFiltersFound=o,s.updateObsSettings({filtersFound:o})},onError:o=>{console.error("OBS WebSocket error:",o),$.value&&window.electronAPI&&window.electronAPI.showToast("–û—à–∏–±–∫–∞ OBS: ".concat(o))}})},Wt=async()=>{ce.value||hn(),await ce.value.connect(z.value.host,z.value.port,z.value.password)},bn=()=>{ce.value&&ce.value.disconnect()},Rn=o=>{ce.value&&Fe.value&&o?ce.value.testBlur(o):$.value&&window.electronAPI&&window.electronAPI.showToast("–§–∏–ª—å—Ç—Ä –Ω–µ –≤—ã–±—Ä–∞–Ω –∏–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ OBS")},Zt=()=>{ce.value&&Fe.value&&ce.value.loadSourcesAndSearchFilters()},Xt=()=>I.value,An=()=>{if(!$.value)return;const o=x.value,e=o.contentDocument||o.contentWindow.document;if(!e||e.getElementById("overlay-settings-modal"))return;const u=fe.value,C=e.createElement("div");C.id="overlay-settings-modal",C.style.cssText="\n    position: fixed !important;\n    top: 0 !important;\n    left: 0 !important;\n    width: 100% !important;\n    height: 100% !important;\n    background: rgba(0, 0, 0, 0.8) !important;\n    display: flex !important;\n    align-items: center !important;\n    justify-content: center !important;\n    z-index: 9999 !important;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n  ";const _=e.createElement("div");_.style.cssText="\n    background: rgba(30, 30, 30, 0.95) !important;\n    backdrop-filter: blur(20px) !important;\n    border-radius: 16px !important;\n    padding: 32px !important;\n    max-width: 400px !important;\n    width: 90% !important;\n    border: 1px solid rgba(255, 255, 255, 0.1) !important;\n    box-shadow: 0 8px 40px rgba(0, 0, 0, 0.5) !important;\n  ",_.innerHTML='\n    <h3 style="color: #ff6b35; margin: 0 0 24px 0; font-size: 20px; font-weight: 600; text-align: center;">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–≤–µ—Ä–ª–µ—è</h3>\n    \n    <div style="display: flex; flex-direction: column; gap: 16px;">\n      <label style="display: flex; align-items: center; gap: 12px; color: white; cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(255, 255, 255, 0.05);">\n        <input type="checkbox" id="showTitle" '.concat(u.showTitle?"checked":"",' style="width: 18px; height: 18px; accent-color: #ff6b35;">\n        <span style="font-size: 16px;">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞</span>\n      </label>\n      \n      <label style="display: flex; align-items: center; gap: 12px; color: white; cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(255, 255, 255, 0.05);">\n        <input type="checkbox" id="showDuration" ').concat(u.showDuration?"checked":"",' style="width: 18px; height: 18px; accent-color: #ff6b35;">\n        <span style="font-size: 16px;">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</span>\n      </label>\n      \n      <label style="display: flex; align-items: center; gap: 12px; color: white; cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(255, 255, 255, 0.05);">\n        <input type="checkbox" id="showBackground" ').concat(u.showBackground?"checked":"",' style="width: 18px; height: 18px; accent-color: #ff6b35;">\n        <span style="font-size: 16px;">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–Ω—ã–π —Ñ–æ–Ω</span>\n      </label>\n      \n      <label style="display: flex; align-items: center; gap: 12px; color: white; cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(255, 255, 255, 0.05);">\n        <input type="checkbox" id="showTimingsOnMouseMove" ').concat(u.showTimingsOnMouseMove?"checked":"",' style="width: 18px; height: 18px; accent-color: #ff6b35;">\n        <span style="font-size: 16px;">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–∞–π–º–∏–Ω–≥–∏ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –º—ã—à–∫–∏</span>\n      </label>\n\n    </div>\n    \n    <div style="display: flex; gap: 12px; margin-top: 24px; justify-content: center;">\n      <button id="saveSettings" style="background: #ff6b35; color: white; border: none; border-radius: 8px; padding: 10px 20px; cursor: pointer; font-size: 16px; font-weight: 500; transition: all 0.3s ease;">\n        –°–æ—Ö—Ä–∞–Ω–∏—Ç—å\n      </button>\n      <button id="cancelSettings" style="background: rgba(255, 255, 255, 0.1); color: rgba(255, 255, 255, 0.8); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; padding: 10px 16px; cursor: pointer; font-size: 14px; transition: all 0.3s ease;">\n        –û—Ç–º–µ–Ω–∞\n      </button>\n    </div>\n  '),C.appendChild(_),C.addEventListener("click",P=>{P.target===C&&C.remove()}),_.querySelector("#saveSettings").addEventListener("click",()=>{var q;const P={showTitle:_.querySelector("#showTitle").checked,showDuration:_.querySelector("#showDuration").checked,showBackground:_.querySelector("#showBackground").checked,showTimingsOnMouseMove:_.querySelector("#showTimingsOnMouseMove").checked};fe.value=P,(q=window.electronAPI)==null||q.showToast("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–≤–µ—Ä–ª–µ—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã"),C.remove()}),_.querySelector("#cancelSettings").addEventListener("click",()=>{C.remove()}),_.querySelectorAll("button").forEach(P=>{P.addEventListener("mouseenter",()=>{P.id==="saveSettings"?(P.style.background="#e55a2b",P.style.transform="translateY(-1px)"):P.style.background="rgba(255, 255, 255, 0.15)"}),P.addEventListener("mouseleave",()=>{P.id==="saveSettings"?(P.style.background="#ff6b35",P.style.transform="translateY(0)"):P.style.background="rgba(255, 255, 255, 0.1)"})}),e.body.appendChild(C)},mt=(o,e)=>{if(!Z.value||V.value||Ve.value)return;Ve.value=!0;const u=o.createElement("div");u.id="reyohoho-video-overlay";let C=()=>{u.style.cssText="\n      position: absolute !important;\n      top: 0 !important;\n      left: 0 !important;\n      width: 100% !important;\n      height: 100% !important;\n      pointer-events: none !important;\n      z-index: 999999999 !important;\n      display: flex !important;\n      flex-direction: column !important;\n      justify-content: space-between !important;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n      visibility: visible !important;\n      opacity: 1 !important;\n    "};const _=o.createElement("div");_.style.cssText="\n    color: white !important;\n    padding: 20px !important;\n    text-align: left !important;\n    pointer-events: none !important;\n  ";const j=o.createElement("div"),P=fe.value.showBackground?"rgba(0, 0, 0, 0.7)":"transparent",q=fe.value.showBackground?"blur(10px)":"none",se=fe.value.showBackground?"fit-content":"auto";j.style.cssText="\n    font-size: 20px !important;\n    font-weight: 600 !important;\n    margin-bottom: 8px !important;\n    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8) !important;\n    line-height: 1.2 !important;\n    padding: 8px 12px !important;\n    border-radius: 6px !important;\n    display: inline-block !important;\n    color: rgba(255, 255, 255, 0.6) !important;\n    background: ".concat(P," !important;\n    backdrop-filter: ").concat(q," !important;\n    width: ").concat(se," !important;\n  ");const ee=o.createElement("div"),te=fe.value.showBackground?"rgba(0, 0, 0, 0.7)":"transparent",K=fe.value.showBackground?"blur(10px)":"none",de=fe.value.showBackground?"6px":"0",_e=fe.value.showBackground?"inline-flex":"flex",Y=fe.value.showBackground?"fit-content":"auto";ee.style.cssText="\n    font-size: 18px !important;\n    font-weight: 500 !important;\n    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8) !important;\n    display: ".concat(_e," !important;\n    align-items: center !important;\n    gap: 8px !important;\n    flex-wrap: wrap !important;\n    color: rgba(255, 255, 255, 0.6) !important;\n    margin-left: 12px !important;\n    background: ").concat(te," !important;\n    backdrop-filter: ").concat(K," !important;\n    border-radius: ").concat(de," !important;\n    width: ").concat(Y," !important;\n  ");const ie=o.createElement("div"),xe=fe.value.showBackground?"rgba(0, 0, 0, 0.7)":"transparent",Ne=fe.value.showBackground?"blur(10px)":"none";ie.style.cssText="\n    position: absolute !important;\n    top: 20px !important;\n    right: 110px !important;\n    background: ".concat(xe," !important;\n    backdrop-filter: ").concat(Ne," !important;\n    border-radius: 12px !important;\n    padding: 16px !important;\n    width: fit-content !important;\n    max-width: 800px !important;\n    pointer-events: none !important;\n    display: none !important;\n    transition: opacity 0.3s ease, visibility 0.3s ease !important;\n    opacity: 0 !important;\n    visibility: hidden !important;\n  ");const Le=o.createElement("div");Le.style.cssText="\n    font-size: 14px !important;\n    color: rgba(255, 255, 255, 0.6) !important;\n    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8) !important;\n    line-height: 1.4 !important;\n    word-wrap: break-word !important;\n  ";const le=o.createElement("div");le.style.cssText="\n    position: absolute !important;\n    top: 20px !important;\n    right: 20px !important;\n    display: flex !important;\n    gap: 8px !important;\n    pointer-events: all !important;\n  ";const ge=o.createElement("button");ge.style.cssText="\n    background: rgba(0, 0, 0, 0.8) !important;\n    backdrop-filter: blur(10px) !important;\n    color: white !important;\n    border: 1px solid rgba(255, 255, 255, 0.2) !important;\n    border-radius: 50% !important;\n    width: 40px !important;\n    height: 40px !important;\n    display: flex !important;\n    align-items: center !important;\n    justify-content: center !important;\n    cursor: pointer !important;\n    transition: all 0.3s ease !important;\n    font-size: 18px !important;\n  ",ge.innerHTML="‚öôÔ∏è",ge.title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–≤–µ—Ä–ª–µ—è";const c=o.createElement("button");c.style.cssText="\n    background: rgba(0, 0, 0, 0.8) !important;\n    backdrop-filter: blur(10px) !important;\n    color: white !important;\n    border: 1px solid rgba(255, 255, 255, 0.2) !important;\n    border-radius: 50% !important;\n    width: 40px !important;\n    height: 40px !important;\n    display: flex !important;\n    align-items: center !important;\n    justify-content: center !important;\n    cursor: pointer !important;\n    transition: all 0.3s ease !important;\n    font-size: 18px !important;\n  ",c.innerHTML="üëÅÔ∏è",c.title="–û—Ç–∫–ª—é—á–∏—Ç—å –æ–≤–µ—Ä–ª–µ–π",c.addEventListener("click",()=>{Z.value=!1}),ge.addEventListener("click",()=>{An()}),[ge,c].forEach(me=>{me.addEventListener("mouseenter",()=>{me.style.background="#ff6b35",me.style.borderColor="#ff6b35",me.style.transform="scale(1.1)"}),me.addEventListener("mouseleave",()=>{me.style.background="rgba(0, 0, 0, 0.8)",me.style.borderColor="rgba(255, 255, 255, 0.2)",me.style.transform="scale(1)"})}),le.appendChild(ge),le.appendChild(c),ie.appendChild(Le),_.appendChild(j),_.appendChild(ee),u.appendChild(_),u.appendChild(ie),u.appendChild(le),le.style.transition="opacity 0.3s ease, visibility 0.3s ease",le.style.opacity="0",le.style.visibility="hidden",_.style.transition="opacity 0.3s ease";let ye=null,We=null;const Ot=()=>{le.style.opacity="1",le.style.visibility="visible",_.style.opacity="0",fe.value.showTimingsOnMouseMove&&rt.value.length>0&&(ie.style.opacity="1",ie.style.visibility="visible",clearTimeout(We),We=setTimeout(()=>{ie.style.opacity="0",ie.style.visibility="hidden"},3e3)),clearTimeout(st.value),clearTimeout(ye),st.value=setTimeout(()=>{le.style.opacity="0",le.style.visibility="hidden"},3e3),ye=setTimeout(()=>{_.style.opacity="1"},2e3)};o.addEventListener("mousemove",Ot),u.addEventListener("mouseenter",()=>{le.style.opacity="1",le.style.visibility="visible",_.style.opacity="0",clearTimeout(ye)}),u.addEventListener("mouseleave",()=>{clearTimeout(st.value),clearTimeout(ye),le.style.opacity="0",le.style.visibility="hidden",_.style.opacity="1"}),u._mouseHandler=Ot;const $t=(me=>{let Ue=me.parentNode,Ye=0;const ft=5;for(;Ue&&Ye<ft;){const Tt=o.defaultView.getComputedStyle(Ue),Ft=Ue.getBoundingClientRect();if(Ft.width>0&&Ft.height>0&&(Tt.position==="relative"||Tt.position==="absolute"||Tt.position==="fixed"||Ue.tagName==="BODY"))return Ue;Ue=Ue.parentNode,Ye++}return me.parentNode})(e);u._targetContainer=$t,u._videoElement=e,C=()=>{const me=u._videoElement.getBoundingClientRect(),Ue=u._targetContainer.getBoundingClientRect(),Ye=me.top-Ue.top,ft=me.left-Ue.left;u.style.cssText="\n      position: absolute !important;\n      top: ".concat(Ye,"px !important;\n      left: ").concat(ft,"px !important;\n      width: ").concat(me.width,"px !important;\n      height: ").concat(me.height,"px !important;\n      pointer-events: none !important;\n      z-index: 999999999 !important;\n      display: flex !important;\n      flex-direction: column !important;\n      justify-content: space-between !important;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n      visibility: visible !important;\n      opacity: 1 !important;\n      box-sizing: border-box !important;\n    ")},e.style.position="relative",($t.style.position===""||$t.style.position==="static")&&($t.style.position="relative"),$t.appendChild(u),C(),V.value=u,Ve.value=!1;const Qt=setInterval(()=>{if(!V.value||!Z.value){clearInterval(Qt);return}if(!o.body.contains(u))try{const Ye=o.querySelectorAll("video");if(Ye.length>0){const ft=Ye[0];u._videoElement=ft;const Ft=(nn=>{let wt=nn.parentNode,on=0;const wn=5;for(;wt&&on<wn;){const Kt=o.defaultView.getComputedStyle(wt),sn=wt.getBoundingClientRect();if(sn.width>0&&sn.height>0&&(Kt.position==="relative"||Kt.position==="absolute"||Kt.position==="fixed"||wt.tagName==="BODY"))return wt;wt=wt.parentNode,on++}return nn.parentNode})(ft);u._targetContainer=Ft,Ft.appendChild(u),C(),u._mouseHandler&&(o.removeEventListener("mousemove",u._mouseHandler),o.addEventListener("mousemove",u._mouseHandler))}}catch(Ye){console.log("Error re-adding overlay to DOM:",Ye)}const me=o.defaultView.getComputedStyle(u);if((me.visibility==="hidden"||me.display==="none"||me.opacity==="0")&&C(),(parseInt(me.zIndex)||0)<999999999&&C(),u._videoElement&&u._targetContainer){const Ye=u._videoElement.getBoundingClientRect(),ft=parseInt(me.width)||0,Tt=parseInt(me.height)||0;(Math.abs(ft-Ye.width)>5||Math.abs(Tt-Ye.height)>5)&&C()}},1e3),Jt=new window.MutationObserver(me=>{me.forEach(Ue=>{Ue.type==="attributes"&&Ue.target===u&&Ue.attributeName==="style"&&setTimeout(()=>{V.value&&Z.value&&C()},100)})});Jt.observe(u,{attributes:!0,attributeFilter:["style","class"]});const en=()=>{V.value&&Z.value&&C()};o.defaultView.addEventListener("resize",en),u._monitorInterval=Qt,u._mutationObserver=Jt,u._resizeHandler=en,u._iframeDoc=o;const tn=setInterval(()=>{if(!V.value||!Z.value){clearInterval(tn);return}C()},500);setTimeout(()=>{clearInterval(tn)},1e4)},kn=()=>{var ee,te,K,de,_e;if(!V.value||!Z.value)return;const o=x.value;if(!o)return;const e=o.contentDocument||o.contentWindow.document;if(!e)return;const u=V.value,C=u.children[0],_=u.children[1],j=e.defaultView.getComputedStyle(u);(j.display==="none"||j.visibility==="hidden")&&(u.style.display="flex !important",u.style.visibility="visible !important");const P=C.children[0];if(fe.value.showTitle){P.style.display="block";const Y=((ee=g.movieInfo)==null?void 0:ee.title)||((te=g.movieInfo)==null?void 0:te.name_ru)||((K=g.movieInfo)==null?void 0:K.name_en)||((de=g.movieInfo)==null?void 0:de.name_original)||"–ó–∞–≥—Ä—É–∑–∫–∞...",ie=(_e=g.movieInfo)!=null&&_e.year?" (".concat(g.movieInfo.year,")"):"";P.textContent=Y+ie,fe.value.showBackground?(P.style.background="rgba(0, 0, 0, 0.7) !important",P.style.backdropFilter="blur(10px) !important",P.style.width="fit-content !important",P.style.display="inline-block !important"):(P.style.background="transparent !important",P.style.backdropFilter="none !important",P.style.width="auto !important",P.style.display="inline-block !important")}else P.style.display="none";const q=C.children[1];let se="";if(fe.value.showDuration){const Y=Ke($e.value),ie=Ke(Je.value);se="\n      <span style=\"font-family: 'Courier New', monospace; color: rgba(255, 255, 255, 0.6);\">".concat(Y,'</span>\n      <span style="opacity: 0.6;">/</span>\n      <span style="font-family: \'Courier New\', monospace; color: rgba(255, 255, 255, 0.6);">').concat(ie,"</span>\n    ")}if(z.value.enabled&&z.value.showObsInOverlay){let Y="–û—Ç–∫–ª—é—á–µ–Ω";const ie="#999999";if(Fe.value)if(z.value.selectedFilterId){const Ne=I.value.find(Le=>Le.id===z.value.selectedFilterId);Ne?Y="".concat(Ne.filterName," (").concat(Ne.sceneName,")"):Y="–§–∏–ª—å—Ç—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω"}else I.value.length>0?Y="–§–∏–ª—å—Ç—Ä –Ω–µ –≤—ã–±—Ä–∞–Ω":Y="–§–∏–ª—å—Ç—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã";const xe='\n      <span style="color: '.concat(ie,';">\n        OBS: ').concat(Y,"\n      </span>\n    ");se=se?"".concat(se," ").concat(xe):xe}if(se?(q.style.display="flex",q.innerHTML=se,fe.value.showBackground?(q.style.background="rgba(0, 0, 0, 0.7) !important",q.style.backdropFilter="blur(10px) !important",q.style.borderRadius="6px !important",q.style.padding="8px 12px !important",q.style.width="fit-content !important",q.style.display="inline-flex !important"):(q.style.background="transparent !important",q.style.backdropFilter="none !important",q.style.borderRadius="0 !important",q.style.padding="0 !important",q.style.width="auto !important",q.style.display="flex !important")):q.style.display="none",rt.value.length>0){const Y=_.children[0];Y.innerHTML="";const ie=e.createElement("span");ie.textContent="–¢–∞–π–º–∏–Ω–≥–∏: ",ie.style.color="rgba(255, 255, 255, 0.6)",Y.appendChild(ie),rt.value.forEach((xe,Ne)=>{if(Ne>0){const Le=e.createElement("span");Le.textContent=", ",Le.style.color="rgba(255, 255, 255, 0.6)",Y.appendChild(Le)}xe.intervals.forEach((Le,le)=>{if(le>0){const c=e.createElement("span");c.textContent=", ",c.style.color="rgba(255, 255, 255, 0.6)",Y.appendChild(c)}const ge=e.createElement("span");ge.textContent=Le.text,Le.status==="active"?(ge.style.color="#ff4444",ge.style.fontWeight="bold"):Le.status==="upcoming"?(ge.style.color="#ff6b35",ge.style.fontWeight="500"):ge.style.color="rgba(255, 255, 255, 0.6)",Y.appendChild(ge)})}),_.style.display="block",fe.value.showTimingsOnMouseMove||(_.style.opacity="1",_.style.visibility="visible"),fe.value.showBackground?(_.style.background="rgba(0, 0, 0, 0.7) !important",_.style.backdropFilter="blur(10px) !important",_.style.width="fit-content !important",_.style.minWidth="auto !important"):(_.style.background="transparent !important",_.style.backdropFilter="none !important",_.style.width="fit-content !important",_.style.minWidth="auto !important")}else _.style.display="none"},kt=()=>{if(V.value){try{V.value._monitorInterval&&clearInterval(V.value._monitorInterval),V.value._mutationObserver&&V.value._mutationObserver.disconnect(),V.value._resizeHandler&&V.value._iframeDoc&&V.value._iframeDoc.defaultView.removeEventListener("resize",V.value._resizeHandler),V.value._mouseHandler&&V.value._iframeDoc&&V.value._iframeDoc.removeEventListener("mousemove",V.value._mouseHandler),V.value.remove()}catch(o){console.log("Error removing overlay:",o)}V.value=null}Ve.value=!1,st.value&&(clearTimeout(st.value),st.value=null)};Ut(()=>{if(S.value=!0,yt(),J.value&&(ut.value="4:3"),Pe(),window.addEventListener("resize",Pe),window.addEventListener("resize",ze),ct.value&&De(),window.toggleCompressor=vt,window.toggleMirror=it,hn(),window.connectToOBS=Wt,window.testOBSBlur=Rn,window.refreshOBSFilters=Zt,window.getOBSFiltersInfo=Xt,window.testOBSConnection=Bn,window.debugOBS=()=>{var o;console.log("=== OBS Debug Info ==="),console.log("OBS Settings:",z.value),console.log("OBS Connected:",Fe.value),console.log("OBS Filters Found:",I.value),console.log("OBS WebSocket instance:",ce.value),ce.value&&(console.log("WebSocket state:",(o=ce.value.ws)==null?void 0:o.readyState),console.log("Is Connected:",ce.value.isConnected),console.log("Is Authenticated:",ce.value.isAuthenticated))},z.value.enabled&&Wt(),$.value&&(gt.value=setInterval(()=>{const o=window.overlayNudityTimings?window.overlayNudityTimings.length:0;o>ot.value?(ot.value=o,Z.value||(Z.value=!0,window.electronAPI&&window.electronAPI.showToast("–û–≤–µ—Ä–ª–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á—ë–Ω - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ç–∞–π–º–∏–Ω–≥–∏"))):ot.value=o},1e3)),$.value&&Z.value){const o=()=>{if(x.value&&!V.value)try{const e=x.value,u=e.contentDocument||e.contentWindow.document;if(u){const C=u.querySelector("video");if(C){const _=Date.now()-(window.iframeLoadTime||0);_>=3e3?mt(u,C):setTimeout(o,3e3-_)}else{const _=setInterval(()=>{try{const j=u.querySelector("video");if(j){clearInterval(_);const P=Date.now()-(window.iframeLoadTime||0);P>=3e3?mt(u,j):setTimeout(()=>mt(u,j),3e3-P)}}catch(j){console.log("Waiting for video element...",j)}},1e3);setTimeout(()=>clearInterval(_),15e3)}}}catch(e){console.log("Error initializing overlay on mount:",e),Ve.value=!1}};setTimeout(o,1e3)}}),jn(()=>{window.removeEventListener("resize",Pe),window.removeEventListener("resize",ze),window.removeEventListener("mousemove",Pt),document.removeEventListener("keydown",Vt),document.body.classList.remove("no-scroll"),be.value&&clearInterval(be.value),Ae.value&&clearInterval(Ae.value),gt.value&&clearInterval(gt.value),kt(),Sn(),bn(),delete window.toggleCompressor,delete window.toggleMirror,delete window.connectToOBS,delete window.testOBSBlur,delete window.refreshOBSFilters,delete window.getOBSFiltersInfo,delete window.testOBSConnection,delete window.debugOBS,delete window.obsSources,delete window.obsFiltersFound});const Bn=async()=>ce.value&&Fe.value?await ce.value.testConnection():{success:!1,error:"Not connected"};return(o,e)=>{var u,C,_,j,P,q,se,ee,te,K,de,_e,Y,ie,xe,Ne,Le,le,ge,c,ye,We,Ot,Pn,$t,Nn,Qt,Jt,en,tn,me,Ue,Ye,ft,Tt,Ft,nn,wt,on,wn,Kt,sn;return L.value?(i(),_t(eo,{key:0,message:L.value,code:F.value},null,8,["message","code"])):(i(),a(ve,{key:1},[t("div",Ko,[e[43]||(e[43]=t("span",null,"–ü–ª–µ–µ—Ä:",-1)),t("button",{class:"player-btn",onClick:Dt},m(l.value?pn(l.value.translate).toUpperCase():"–ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–µ–µ—Ä–æ–≤..."),1)]),B.value?(i(),_t(zo,{key:0,players:k.value,"selected-player":l.value,onClose:Ge,onSelect:Mn},null,8,["players","selected-player"])):h("",!0),t("div",{ref_key:"containerRef",ref:O,class:M(["player-container",{"theater-mode":A.value}]),style:rn(A.value?{}:he.value)},[t("div",{class:"iframe-wrapper",style:rn(A.value?{}:Oe.value)},[Q(t("iframe",{ref_key:"playerIframe",ref:x,src:(u=l.value)==null?void 0:u.iframe,frameborder:"0",allowfullscreen:"",webkitallowfullscreen:"",class:M(["responsive-iframe",{"theater-mode-unlock":p.value,"theater-mode-lock":A.value,dimmed:Ht.value}]),onLoad:Nt},null,42,Go),[[Ee,!S.value&&((C=l.value)==null?void 0:C.iframe)]]),S.value?(i(),_t(so,{key:0,text:"–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–ª–µ–µ—Ä: ".concat(l.value?pn(l.value.translate):"–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ –ø–ª–µ–µ—Ä–æ–≤","\n–ï—Å–ª–∏ –ø–ª–µ–µ—Ä –Ω–µ –≥—Ä—É–∑–∏—Ç—Å—è, —Ç–æ —Å–º–µ–Ω–∏—Ç–µ –ø–ª–µ–µ—Ä –≤—ã—à–µ –∏–ª–∏ –≤–∫–ª—é—á–∏—Ç–µ VPN"),style:{"white-space":"pre-line"}},null,8,["text"])):h("",!0)],4),A.value?(i(),a("button",{key:0,class:M(["close-theater-btn",{visible:p.value}]),onClick:At}," ‚úñ ",2)):h("",!0)],6),A.value?h("",!0):(i(),a("div",Yo,[t("div",Zo,[J.value?h("",!0):(i(),a("div",{key:0,ref_key:"tooltipContainer",ref:nt,class:"tooltip-container list-buttons-container","data-tooltip-container":"favorite"},[Lt.value?(i(),a("button",{key:0,class:M(["favorite-btn",{active:(j=(_=d.movieInfo)==null?void 0:_.lists)==null?void 0:j.isFavorite}]),onMouseenter:e[0]||(e[0]=D=>ke("favorite")),onMouseleave:Be,onClick:e[1]||(e[1]=D=>Ce(G(W).FAVORITE))},[t("span",Xo,m((q=(P=d.movieInfo)==null?void 0:P.lists)!=null&&q.isFavorite?"favorite":"favorite_border"),1),t("span",{class:M(["material-icons dropdown-arrow",{highlighted:dt.value}])},"expand_more",2)],34)):h("",!0),Q(t("div",{ref_key:"tooltip",ref:H,class:"custom-tooltip advanced-tooltip list-buttons-dropdown","data-tooltip":"favorite",onMouseenter:jt,onMouseleave:Rt},[t("div",Qo,[t("button",{class:M(["favorite-btn",{active:(ee=(se=d.movieInfo)==null?void 0:se.lists)==null?void 0:ee.isFavorite}]),onClick:e[2]||(e[2]=D=>Ce(G(W).FAVORITE))},[t("span",Jo,m((K=(te=d.movieInfo)==null?void 0:te.lists)!=null&&K.isFavorite?"favorite":"favorite_border"),1),e[44]||(e[44]=t("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))],2)]),t("div",es,[t("button",{class:M(["watching-btn",{active:(_e=(de=d.movieInfo)==null?void 0:de.lists)==null?void 0:_e.isWatching}]),onClick:e[3]||(e[3]=D=>Ce(G(W).WATCHING))},[t("span",ts,m((ie=(Y=d.movieInfo)==null?void 0:Y.lists)!=null&&ie.isWatching?"visibility":"visibility_off"),1),e[45]||(e[45]=t("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))],2)]),t("div",ns,[t("button",{class:M(["later-btn",{active:(Ne=(xe=d.movieInfo)==null?void 0:xe.lists)==null?void 0:Ne.isLater}]),onClick:e[4]||(e[4]=D=>Ce(G(W).LATER))},e[46]||(e[46]=[t("span",{class:"material-icons"},"watch_later",-1),t("span",{class:"button-label"},"–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ",-1)]),2)]),t("div",os,[t("button",{class:M(["completed-btn",{active:(le=(Le=d.movieInfo)==null?void 0:Le.lists)==null?void 0:le.isCompleted}]),onClick:e[5]||(e[5]=D=>Ce(G(W).COMPLETED))},[t("span",ss,m((c=(ge=d.movieInfo)==null?void 0:ge.lists)!=null&&c.isCompleted?"check_circle":"check_circle_outline"),1),e[47]||(e[47]=t("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))],2)]),t("div",ls,[t("button",{class:M(["abandoned-btn",{active:(We=(ye=d.movieInfo)==null?void 0:ye.lists)==null?void 0:We.isAbandoned}]),onClick:e[6]||(e[6]=D=>Ce(G(W).ABANDONED))},[t("span",is,m(((Pn=(Ot=d.movieInfo)==null?void 0:Ot.lists)!=null&&Pn.isAbandoned,"not_interested")),1),e[48]||(e[48]=t("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))],2)]),t("div",{class:"tooltip-hint"},[e[50]||(e[50]=t("span",{class:"material-icons"},"settings",-1)),t("span",null,[e[49]||(e[49]=X("–°—Ç–∏–ª—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ ")),t("a",{class:"settings-link",onClick:xn},"–Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö")])])],544),[[Ee,T.value==="favorite"&&Lt.value]])],512)),J.value?h("",!0):(i(),a(ve,{key:1},[t("div",as,[t("button",{class:M(["dimming-btn",{active:Ht.value}]),onMouseenter:e[7]||(e[7]=D=>ke("dimming")),onMouseleave:e[8]||(e[8]=D=>T.value=null),onClick:vn},[t("span",rs,m(Ht.value?"light_mode":"dark_mode"),1)],34),Q(t("div",{class:"custom-tooltip","data-tooltip":"dimming"},m(Ht.value?"–û—Ç–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ":"–í–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ"),513),[[Ee,T.value==="dimming"]])]),t("div",us,[t("button",{class:M(["blur-btn",{"electron-only":!$.value}]),onMouseenter:e[9]||(e[9]=D=>ke("blur")),onMouseleave:e[10]||(e[10]=D=>T.value=null),onClick:ht},e[51]||(e[51]=[t("span",{class:"material-icons"},"blur_on",-1)]),34),Q(t("div",{class:"custom-tooltip","data-tooltip":"blur"},m($.value?"–ë–ª—é—Ä":"–ë–ª—é—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[Ee,T.value==="blur"]])]),t("div",cs,[t("button",{class:M(["material-symbols-outlined",{active:bt.value,"electron-only":!$.value}]),onMouseenter:e[11]||(e[11]=D=>ke("compressor")),onMouseleave:e[12]||(e[12]=D=>T.value=null),onClick:vt},e[52]||(e[52]=[t("span",{class:"material-icons"},"graphic_eq",-1)]),34),Q(t("div",{class:"custom-tooltip","data-tooltip":"compressor"},m($.value?"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä":"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[Ee,T.value==="compressor"]])]),t("div",ds,[t("button",{class:M(["mirror-btn",{active:at.value,"electron-only":!$.value}]),onMouseenter:e[13]||(e[13]=D=>ke("mirror")),onMouseleave:e[14]||(e[14]=D=>T.value=null),onClick:it},e[53]||(e[53]=[t("span",{class:"material-icons"},"flip",-1)]),34),Q(t("div",{class:"custom-tooltip","data-tooltip":"mirror"},m($.value?"–ó–µ—Ä–∫–∞–ª–æ":"–ó–µ—Ä–∫–∞–ª–æ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[Ee,T.value==="mirror"]])]),t("div",vs,[t("button",{class:"theater-mode-btn",onMouseenter:e[15]||(e[15]=D=>ke("theater")),onMouseleave:e[16]||(e[16]=D=>T.value=null),onClick:At},[t("span",ms,m(A.value?"fullscreen_exit":"aspect_ratio"),1)],32),Q(t("div",fs,[X(m(A.value?"–í—ã–π—Ç–∏ –∏–∑ —Ç–µ–∞—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞":"–¢–µ–∞—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º")+" ",1),e[54]||(e[54]=t("span",{class:"shortcut-hint"},"Alt+T",-1))],512),[[Ee,T.value==="theater"]])]),t("div",ps,[t("button",{class:M(["pip-btn",{"electron-only":!$.value}]),onMouseenter:e[17]||(e[17]=D=>ke("pip")),onMouseleave:e[18]||(e[18]=D=>T.value=null),onClick:Ln},e[55]||(e[55]=[t("span",{class:"material-icons"},"picture_in_picture_alt",-1)]),34),Q(t("div",{class:"custom-tooltip","data-tooltip":"pip"},m($.value?"–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ":"–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[Ee,T.value==="pip"]])]),t("div",gs,[t("button",{class:"aspect-ratio-dropdown-btn",onMouseenter:e[19]||(e[19]=D=>ke("aspect_ratio")),onMouseleave:Be,onClick:gn},[t("span",ys,m(ut.value),1)],32),Q(t("div",{class:"custom-tooltip advanced-tooltip aspect-ratio-dropdown","data-tooltip":"aspect_ratio",onMouseenter:jt,onMouseleave:Rt},[(i(),a(ve,null,Te(zt,D=>t("div",{key:D,class:M(["aspect-ratio-option",{active:ut.value===D}]),onClick:_c=>fn(D)},m(D),11,hs)),64))],544),[[Ee,T.value==="aspect_ratio"]])]),t("div",{class:"tooltip-container","data-tooltip-container":"centering",onMouseenter:e[21]||(e[21]=D=>ke("centering")),onMouseleave:Be},[t("button",{class:"center-btn",onClick:De},e[56]||(e[56]=[t("span",{class:"material-icons"},"center_focus_strong",-1)])),Q(t("div",{class:"custom-tooltip advanced-tooltip","data-tooltip":"centering",onMouseenter:jt,onMouseleave:Rt},[e[57]||(e[57]=X(" –û—Ç—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–ª–µ–µ—Ä ")),Re(To,{modelValue:ct.value,"onUpdate:modelValue":e[20]||(e[20]=D=>ct.value=D),title:"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞"},null,8,["modelValue"]),e[58]||(e[58]=t("span",{class:"tooltip-title"},"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞",-1))],544),[[Ee,T.value==="centering"]])],32),$.value?h("",!0):(i(),a("div",bs,[t("button",{class:"app-link-btn",onMouseenter:e[22]||(e[22]=D=>ke("app_link")),onMouseleave:e[23]||(e[23]=D=>T.value=null),onClick:_n},e[59]||(e[59]=[t("span",{class:"material-icons"},"open_in_new",-1)]),32),Q(t("div",ks," –û—Ç–∫—Ä—ã—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ",512),[[Ee,T.value==="app_link"]])])),$.value?(i(),a("div",ws,[t("button",{class:"copy-link-btn",onMouseenter:e[24]||(e[24]=D=>ke("copy_link")),onMouseleave:e[25]||(e[25]=D=>T.value=null),onClick:En},e[60]||(e[60]=[t("span",{class:"material-icons"},"content_copy",-1)]),32),Q(t("div",Cs," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É ",512),[[Ee,T.value==="copy_link"]])])):h("",!0),$.value?(i(),a("div",_s,[t("button",{class:M(["overlay-btn",{active:Z.value}]),onMouseenter:e[26]||(e[26]=D=>ke("overlay")),onMouseleave:e[27]||(e[27]=D=>T.value=null),onClick:Tn},[t("span",Es,m(Z.value?"layers":"layers_clear"),1)],34),Q(t("div",{class:"custom-tooltip","data-tooltip":"overlay"},m(Z.value?"–°–∫—Ä—ã—Ç—å –æ–≤–µ—Ä–ª–µ–π –≤–∏–¥–µ–æ":"–ü–æ–∫–∞–∑–∞—Ç—å –æ–≤–µ—Ä–ª–µ–π –≤–∏–¥–µ–æ"),513),[[Ee,T.value==="overlay"]])])):h("",!0)],64))]),!J.value&&!Lt.value?(i(),a("div",Ss,[t("div",Ms,[t("button",{class:M(["favorite-btn",{active:(Nn=($t=d.movieInfo)==null?void 0:$t.lists)==null?void 0:Nn.isFavorite}]),onMouseenter:e[28]||(e[28]=D=>ke("favorite")),onMouseleave:e[29]||(e[29]=D=>T.value=null),onClick:e[30]||(e[30]=D=>Ce(G(W).FAVORITE))},[t("span",Is,m((Jt=(Qt=d.movieInfo)==null?void 0:Qt.lists)!=null&&Jt.isFavorite?"favorite":"favorite_border"),1)],34),Q(t("div",xs,m("–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"),512),[[Ee,T.value==="favorite"]])]),t("div",Ls,[t("button",{class:M(["watching-btn",{active:(tn=(en=d.movieInfo)==null?void 0:en.lists)==null?void 0:tn.isWatching}]),onMouseenter:e[31]||(e[31]=D=>ke("watching")),onMouseleave:e[32]||(e[32]=D=>T.value=null),onClick:e[33]||(e[33]=D=>Ce(G(W).WATCHING))},[t("span",Ts,m((Ue=(me=d.movieInfo)==null?void 0:me.lists)!=null&&Ue.isWatching?"visibility":"visibility_off"),1)],34),Q(t("div",Rs,m("–°–º–æ—Ç—Ä—é"),512),[[Ee,T.value==="watching"]])]),t("div",As,[t("button",{class:M(["later-btn",{active:(ft=(Ye=d.movieInfo)==null?void 0:Ye.lists)==null?void 0:ft.isLater}]),onMouseenter:e[34]||(e[34]=D=>ke("later")),onMouseleave:e[35]||(e[35]=D=>T.value=null),onClick:e[36]||(e[36]=D=>Ce(G(W).LATER))},e[61]||(e[61]=[t("span",{class:"material-icons"},"watch_later",-1)]),34),Q(t("div",Bs,m("–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"),512),[[Ee,T.value==="later"]])]),t("div",Ps,[t("button",{class:M(["completed-btn",{active:(Ft=(Tt=d.movieInfo)==null?void 0:Tt.lists)==null?void 0:Ft.isCompleted}]),onMouseenter:e[37]||(e[37]=D=>ke("completed")),onMouseleave:e[38]||(e[38]=D=>T.value=null),onClick:e[39]||(e[39]=D=>Ce(G(W).COMPLETED))},[t("span",Ns,m((wt=(nn=d.movieInfo)==null?void 0:nn.lists)!=null&&wt.isCompleted?"check_circle":"check_circle_outline"),1)],34),Q(t("div",Os,m("–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"),512),[[Ee,T.value==="completed"]])]),t("div",$s,[t("button",{class:M(["abandoned-btn",{active:(wn=(on=d.movieInfo)==null?void 0:on.lists)==null?void 0:wn.isAbandoned}]),onMouseenter:e[40]||(e[40]=D=>ke("abandoned")),onMouseleave:e[41]||(e[41]=D=>T.value=null),onClick:e[42]||(e[42]=D=>Ce(G(W).ABANDONED))},[t("span",Fs,m(((sn=(Kt=d.movieInfo)==null?void 0:Kt.lists)!=null&&sn.isAbandoned,"not_interested")),1)],34),Q(t("div",Us,m("–ë—Ä–æ—à–µ–Ω–æ"),512),[[Ee,T.value==="abandoned"]])])])):h("",!0)])),Re(Cn,{ref_key:"notificationRef",ref:re},null,512)],64))}}},Qn=pt(js,[["__scopeId","data-v-1f8109ea"]]),Ds={key:0,class:"carousel-container"},Hs={class:"carousel-wrapper"},qs=["onClick"],Vs=["src","alt"],zs={class:"video-name"},Ws={key:0,class:"video-player"},Ks=["src"],Gs={__name:"TrailerCarousel",props:{videos:{type:Array,required:!0},activeVideoIndex:{type:Number,default:null}},emits:["select"],setup(d,{emit:n}){const r=cn(),s=N(()=>r.isMobile),b=d,y=n,f=v(b.activeVideoIndex),w=v(null),g=v(!1),E=v(!1),k=()=>{if(!w.value)return;const{scrollLeft:O,scrollWidth:B,clientWidth:L}=w.value;g.value=O>0,E.value=O<B-L-1},l=O=>{if(!w.value)return;const B=w.value.querySelector(".carousel-item");if(!B)return;const L=B.clientWidth+16;w.value.scrollBy({left:L*O,behavior:"smooth"})},S=O=>{f.value=O,y("select",b.videos[O])},A=()=>k(),p=v([]),x=async O=>{try{return(await fetch("https://img.youtube.com/vi/".concat(O,"/0.jpg"))).ok}catch(B){return!1}};return Ut(async()=>{const O=b.videos.map(async L=>await x(L.videoId)?L:null),B=await Promise.all(O);p.value=B.filter(Boolean),k(),window.addEventListener("resize",A)}),He(()=>b.videos,async O=>{const B=O.map(async F=>await x(F.videoId)?F:null),L=await Promise.all(B);p.value=L.filter(Boolean)}),He(()=>b.activeVideoIndex,O=>{f.value=O}),jn(()=>{window.removeEventListener("resize",A)}),(O,B)=>p.value.length?(i(),a("div",Ds,[B[4]||(B[4]=t("h2",null,"–¢—Ä–µ–π–ª–µ—Ä—ã (YouTube)",-1)),t("div",Hs,[Q(t("button",{class:"scroll-button left",onClick:B[0]||(B[0]=L=>l(-1))},B[2]||(B[2]=[t("span",{class:"material-symbols-outlined"},"arrow_back_ios",-1)]),512),[[Ee,!s.value&&g.value]]),t("div",{ref_key:"carousel",ref:w,class:"carousel",onScroll:k},[(i(!0),a(ve,null,Te(p.value,(L,F)=>(i(),a("div",{key:F,class:"carousel-item",onClick:R=>S(F)},[t("img",{src:"https://img.youtube.com/vi/".concat(L.videoId,"/0.jpg"),alt:L.name},null,8,Vs),t("div",zs,m(L.name),1)],8,qs))),128))],544),Q(t("button",{class:"scroll-button right",onClick:B[1]||(B[1]=L=>l(1))},B[3]||(B[3]=[t("span",{class:"material-symbols-outlined"},"arrow_forward_ios",-1)]),512),[[Ee,!s.value&&E.value]])]),f.value!==null?(i(),a("div",Ws,[t("iframe",{src:d.videos[f.value].iframeUrl,frameborder:"0",allowfullscreen:""},null,8,Ks)])):h("",!0)])):h("",!0)}},Ys=pt(Gs,[["__scopeId","data-v-4a5806b3"]]),Zs={class:"rating-container"},Xs={class:"rating-display"},Qs={class:"rating-numbers"},Js=["onClick","onMouseenter"],el={key:0,class:"tooltip-footer"},tl={class:"rating-numbers mobile-rating-numbers"},nl=["onClick"],ol={key:0,class:"mobile-modal-footer"},sl={__name:"MovieRating",props:{kpId:{type:String,required:!0},showDash:{type:Boolean,default:!1}},setup(d){const n=cn(),r=dn(),s=d,b=v(null),y=v(null),f=v(null),w=v(null),g=v(0),E=v(!1),k=v(!1);let l=null;const S=R=>R?R.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",A=()=>{l=setTimeout(()=>{E.value=!1,n.isMobile||(k.value=!1)},100)},p=()=>{l&&(clearTimeout(l),l=null),E.value=!0},x=()=>{n.isMobile&&(k.value=!k.value)},O=()=>{r.push("/login")},B=async()=>{try{const R=await ao(s.kpId);y.value=R.user_rating,f.value=R.average_rating,w.value=S(R.vote_count)}catch(R){console.error("Error loading rating:",R)}},L=async R=>{var ne;try{R===y.value?(await zn(s.kpId,null),y.value=null,b.value.showNotification("–û—Ü–µ–Ω–∫–∞ —É–¥–∞–ª–µ–Ω–∞")):(await zn(s.kpId,R),y.value=R,b.value.showNotification("–û—Ü–µ–Ω–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞")),n.isMobile&&(k.value=!1),B()}catch(J){console.error("Error setting rating:",J),((ne=J.response)==null?void 0:ne.status)===401?b.value.showNotification('–î–ª—è –æ—Ü–µ–Ω–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:O}):b.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ü–µ–Ω–∫–∏"),n.isMobile&&(k.value=!1)}},F=()=>{k.value=!1};return Ut(()=>{B()}),(R,ne)=>(i(),a("div",Zs,[t("div",Xs,[t("a",{href:"#",class:M(["rating-link",{"has-rating":y.value}]),onMouseenter:ne[0]||(ne[0]=J=>E.value=!0),onMouseleave:A,onClick:St(x,["prevent"])},[ne[3]||(ne[3]=t("img",{src:xo,alt:"ReYohoho",class:"rating-logo"},null,-1)),t("span",{class:M(["average-rating",G(an)(f.value)])},m(f.value?f.value.toFixed(1).replace(/\.0$/,""):"‚Äî"),3)],34),Q(t("div",{class:"rating-tooltip",onMouseenter:p,onMouseleave:A},[t("div",Qs,[(i(),a(ve,null,Te(10,J=>t("button",{key:J,class:M(["number-btn",{active:J===y.value,hover:J===g.value,"average-highlight":f.value&&J<=Math.round(f.value)}]),onClick:$=>L(J),onMouseenter:$=>g.value=J,onMouseleave:ne[1]||(ne[1]=$=>g.value=0)},m(J),43,Js)),64))]),w.value?(i(),a("div",el,"–û—Ü–µ–Ω–æ–∫: "+m(w.value),1)):h("",!0)],544),[[Ee,(E.value||k.value)&&!G(n).isMobile]])]),Re(Cn,{ref_key:"notificationRef",ref:b},null,512),G(n).isMobile&&k.value?(i(),a("div",{key:0,class:"mobile-modal-overlay",onClick:F},[t("div",{class:"mobile-modal",onClick:ne[2]||(ne[2]=St(()=>{},["stop"]))},[t("div",{class:"mobile-modal-header"},[ne[4]||(ne[4]=t("h3",null,"–û—Ü–µ–Ω–∏—Ç—å —Ñ–∏–ª—å–º",-1)),t("button",{class:"close-button",onClick:F},"√ó")]),t("div",tl,[(i(),a(ve,null,Te(10,J=>t("button",{key:J,class:M(["number-btn",{active:J===y.value,"average-highlight":f.value&&J<=Math.round(f.value)}]),onClick:$=>L(J)},m(J),11,nl)),64))]),w.value?(i(),a("div",ol,"–û—Ü–µ–Ω–æ–∫: "+m(w.value),1)):h("",!0)])])):h("",!0)]))}},ll=pt(sl,[["__scopeId","data-v-2df64bd5"]]),il={name:"EmojiPicker",props:{isVisible:{type:Boolean,default:!1}},emits:["emoji-selected","mouse-enter","mouse-leave","close"],data(){return{activeCategory:"smileys",categories:[{name:"smileys",icon:"üòÄ",emojis:["üòÄ","üòÉ","üòÑ","üòÅ","üòÜ","üòÖ","üòÇ","ü§£","üòä","üòá","üôÇ","üôÉ","üòâ","üòå","üòç","ü•∞","üòò","üòó","üòô","üòö","üòã","üòõ","üòù","üòú","ü§™","ü§®","üßê","ü§ì","üòé","ü§©","ü•≥"]},{name:"emotions",icon:"üò¢",emojis:["üò•","üò¢","üò≠","üò§","üò†","üò°","ü§¨","ü§Ø","üò≥","ü•µ","ü•∂","üò±","üò®","üò∞","üò•","üòì","ü§ó","ü§î","ü§≠","ü§´","ü§•","üò∂","üòê","üòë","üò¨","üôÑ","üòØ","üò¶","üòß","üòÆ","üò≤"]},{name:"gestures",icon:"üëç",emojis:["üëç","üëé","üëå","ü§å","ü§è","‚úåÔ∏è","ü§û","ü§ü","ü§ò","ü§ô","üëà","üëâ","üëÜ","üñï","üëá","‚òùÔ∏è","üëè","üôå","üëê","ü§≤","ü§ù","üôè","‚úçÔ∏è","üí™","ü¶æ","ü¶ø","ü¶µ","ü¶∂","üëÇ","ü¶ª","üëÉ"]},{name:"hearts",icon:"‚ù§Ô∏è",emojis:["‚ù§Ô∏è","üß°","üíõ","üíö","üíô","üíú","ü§é","üñ§","ü§ç","üíî","‚ù£Ô∏è","üíï","üíû","üíì","üíó","üíñ","üíò","üíù","üíü","‚ô•Ô∏è","üíØ","üí¢","üí•","üí´","üí¶","üí®","üï≥Ô∏è","üí£","üí¨","üëÅÔ∏è‚Äçüó®Ô∏è","üó®Ô∏è"]},{name:"objects",icon:"üéâ",emojis:["üéâ","üéä","üéà","üéÅ","üéÄ","üéÇ","üç∞","üßÅ","üç≠","üç¨","üç´","üç©","üç™","üçï","üçî","üçü","üå≠","ü•™","üåÆ","üåØ","ü•ô","ü•ö","üç≥","ü•ò","üç≤","ü•ó","üçø","üßà","üßÄ","ü•®","ü•Ø"]}]}},computed:{currentEmojis(){const d=this.categories.find(n=>n.name===this.activeCategory);return d?d.emojis:[]}},methods:{selectEmoji(d){this.$emit("emoji-selected",d)}}},al={class:"emoji-categories"},rl=["onClick"],ul={class:"emoji-grid"},cl=["onClick"];function dl(d,n,r,s,b,y){return r.isVisible?(i(),a("div",{key:0,class:"emoji-picker",onMouseenter:n[1]||(n[1]=f=>d.$emit("mouse-enter")),onMouseleave:n[2]||(n[2]=f=>d.$emit("mouse-leave"))},[t("button",{class:"close-btn mobile-only",onClick:n[0]||(n[0]=f=>d.$emit("close"))},n[3]||(n[3]=[t("i",{class:"fas fa-times"},null,-1)])),t("div",al,[(i(!0),a(ve,null,Te(b.categories,f=>(i(),a("button",{key:f.name,onClick:w=>b.activeCategory=f.name,class:M([{active:b.activeCategory===f.name},"category-btn"]),type:"button"},m(f.icon),11,rl))),128))]),t("div",ul,[(i(!0),a(ve,null,Te(y.currentEmojis,f=>(i(),a("button",{key:f,onClick:w=>y.selectEmoji(f),class:"emoji-btn",type:"button"},m(f),9,cl))),128))])],32)):h("",!0)}const Dn=pt(il,[["render",dl],["__scopeId","data-v-209132f3"]]),vl=async d=>{const n=await ro();return await d(n)},ml=async d=>{const{data:n}=await vl(r=>r.get("/search_emotes/".concat(d)));return n.emotes||[]},fl={name:"ImagePicker",props:{isVisible:{type:Boolean,required:!0},currentUser:{type:Object,default:null}},emits:["image-selected","mouse-enter","mouse-leave","close","login-required"],setup(d,{emit:n}){const r=v(""),s=v([]),b=v(null),y=v(!1),w=uo(async l=>{if(!d.currentUser){console.warn("–ü–æ–ø—ã—Ç–∫–∞ –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏");return}if(!l.trim()){s.value=[],y.value=!1;return}y.value=!0;try{s.value=await ml(l)}catch(S){console.error("Error searching images:",S),s.value=[]}finally{y.value=!1}},300),g=()=>{if(!d.currentUser){n("login-required");return}r.value.trim()&&(y.value=!0),w(r.value)},E=l=>{if(!d.currentUser){n("login-required");return}n("image-selected",l),n("close")},k=()=>{setTimeout(()=>{d.isVisible&&n("mouse-leave")},100)};return He(()=>d.isVisible,l=>{l&&(r.value="",s.value=[],y.value=!1)}),{searchQuery:r,images:s,searchInput:b,isLoading:y,handleSearch:g,selectImage:E,handleInputBlur:k}}},pl={key:0,class:"auth-required"},gl={class:"auth-message"},yl={key:1},hl={class:"image-picker-header"},bl={class:"image-content"},kl={key:0,class:"loading-spinner"},wl={key:1,class:"image-grid"},Cl=["onClick"],_l=["src","alt"],El={key:2,class:"no-images"},Sl={key:3,class:"no-search"};function Ml(d,n,r,s,b,y){return r.isVisible?(i(),a("div",{key:0,class:"image-picker",onMouseenter:n[7]||(n[7]=f=>d.$emit("mouse-enter")),onMouseleave:n[8]||(n[8]=f=>d.$emit("mouse-leave")),onClick:n[9]||(n[9]=St(()=>{},["stop"]))},[t("button",{class:"close-btn mobile-only",onClick:n[0]||(n[0]=f=>d.$emit("close"))},n[10]||(n[10]=[t("i",{class:"fas fa-times"},null,-1)])),r.currentUser?(i(),a("div",yl,[t("div",hl,[Q(t("input",{ref:"searchInput",type:"text","onUpdate:modelValue":n[2]||(n[2]=f=>s.searchQuery=f),placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–º–∞–π–ª–∞ 7tv",class:"image-search-input",onInput:n[3]||(n[3]=(...f)=>s.handleSearch&&s.handleSearch(...f)),onClick:n[4]||(n[4]=St(()=>{},["stop"])),onFocus:n[5]||(n[5]=f=>d.$emit("mouse-enter")),onBlur:n[6]||(n[6]=(...f)=>s.handleInputBlur&&s.handleInputBlur(...f))},null,544),[[Et,s.searchQuery]])]),t("div",bl,[s.isLoading?(i(),a("div",kl,n[14]||(n[14]=[t("div",{class:"spinner"},null,-1),t("p",null,"–ü–æ–∏—Å–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...",-1)]))):s.images.length>0?(i(),a("div",wl,[(i(!0),a(ve,null,Te(s.images,(f,w)=>(i(),a("div",{key:w,class:"image-item",onClick:g=>s.selectImage(f)},[t("img",{src:f,alt:"Image "+(w+1)},null,8,_l)],8,Cl))),128))])):s.searchQuery.trim()?(i(),a("div",El,n[15]||(n[15]=[t("p",null,"–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤",-1)]))):(i(),a("div",Sl,n[16]||(n[16]=[t("p",null,"–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞",-1)])))])])):(i(),a("div",pl,[t("div",gl,[n[11]||(n[11]=t("i",{class:"fas fa-lock"},null,-1)),n[12]||(n[12]=t("h3",null,"–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è",-1)),n[13]||(n[13]=t("p",null,"–î–ª—è –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç",-1)),t("button",{class:"login-button",onClick:n[1]||(n[1]=f=>d.$emit("login-required"))},"–í–æ–π—Ç–∏")])]))],32)):h("",!0)}const Hn=pt(fl,[["render",Ml],["__scopeId","data-v-f33eb3f6"]]),Il={name:"LinkModal",props:{isVisible:{type:Boolean,default:!1},selectedText:{type:String,default:""}},emits:["close","submit"],setup(d,{emit:n}){const r=v(""),s=v(""),b=v(null),y=v(null),f=N(()=>/^https?:\/\/.+/.test(r.value.trim())&&s.value.trim()),w=()=>{n("close"),E()},g=()=>{f.value&&(n("submit",{url:r.value.trim(),title:s.value.trim()}),w())},E=()=>{r.value="",s.value=""},k=l=>{var S;l.key==="Enter"?(l.preventDefault(),f.value?g():l.target===b.value&&r.value.trim()&&((S=y.value)==null||S.focus())):l.key==="Escape"&&w()};return He(()=>d.isVisible,l=>{l&&(d.selectedText.trim()&&(s.value=d.selectedText.trim()),tt(()=>{var S;(S=b.value)==null||S.focus()}))}),{linkUrl:r,linkTitle:s,urlInput:b,titleInput:y,isValidLink:f,closeModal:w,submitLink:g,handleKeydown:k}}},xl={class:"link-modal-header"},Ll={class:"link-modal-content"},Tl={class:"form-group"},Rl={class:"form-group"},Al={class:"link-modal-footer"},Bl=["disabled"];function Pl(d,n,r,s,b,y){return r.isVisible?(i(),a("div",{key:0,class:"link-modal-overlay",onClick:n[8]||(n[8]=(...f)=>s.closeModal&&s.closeModal(...f))},[t("div",{class:"link-modal",onClick:n[7]||(n[7]=St(()=>{},["stop"]))},[t("div",xl,[n[10]||(n[10]=t("h3",null,"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É",-1)),t("button",{class:"close-button",onClick:n[0]||(n[0]=(...f)=>s.closeModal&&s.closeModal(...f))},n[9]||(n[9]=[t("i",{class:"fas fa-times"},null,-1)]))]),t("div",Ll,[t("div",Tl,[n[11]||(n[11]=t("label",{for:"link-url"},"URL —Å—Å—ã–ª–∫–∏:",-1)),Q(t("input",{id:"link-url",ref:"urlInput","onUpdate:modelValue":n[1]||(n[1]=f=>s.linkUrl=f),type:"url",placeholder:"https://example.com",class:"link-input",onKeydown:n[2]||(n[2]=(...f)=>s.handleKeydown&&s.handleKeydown(...f))},null,544),[[Et,s.linkUrl]])]),t("div",Rl,[n[12]||(n[12]=t("label",{for:"link-title"},"–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏:",-1)),Q(t("input",{id:"link-title",ref:"titleInput","onUpdate:modelValue":n[3]||(n[3]=f=>s.linkTitle=f),type:"text",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è",class:"link-input",onKeydown:n[4]||(n[4]=(...f)=>s.handleKeydown&&s.handleKeydown(...f))},null,544),[[Et,s.linkTitle]])])]),t("div",Al,[t("button",{class:"cancel-button",onClick:n[5]||(n[5]=(...f)=>s.closeModal&&s.closeModal(...f))},"–û—Ç–º–µ–Ω–∞"),t("button",{class:"submit-button",disabled:!s.isValidLink,onClick:n[6]||(n[6]=(...f)=>s.submitLink&&s.submitLink(...f))},"–î–æ–±–∞–≤–∏—Ç—å",8,Bl)])])])):h("",!0)}const qn=pt(Il,[["render",Pl],["__scopeId","data-v-a794d83f"]]);function Nl(){const d=v(!1),n=v(!1),r=v(!1),s=()=>{n.value=!0},b=()=>{n.value=!1,setTimeout(()=>{!n.value&&!r.value&&(d.value=!1)},300)},y=()=>{r.value=!0,d.value=!0},f=()=>{r.value=!1,setTimeout(()=>{!n.value&&!r.value&&(d.value=!1)},300)},w=()=>{d.value=!1};return{showEmojiPicker:d,isEmojiHovered:n,isButtonHovered:r,handleEmojiMouseEnter:s,handleEmojiMouseLeave:b,handleButtonMouseEnter:y,handleButtonMouseLeave:f,closeEmojiPicker:w,insertEmoji:(k,l,S,A)=>{const p=l.value;if(p){const x=p.selectionStart,O=p.selectionEnd,B=S.value.substring(0,x),L=S.value.substring(O),F=B+k+L;A(F),tt(()=>{p.focus(),p.setSelectionRange(x+k.length,x+k.length),p.style.height&&(p.style.height="auto",p.style.height="".concat(Math.min(p.scrollHeight,200),"px"))})}else A(S.value+k)},handleGlobalClick:k=>{!k.target.closest(".emoji-picker")&&!k.target.closest(".emoji-button-inline")&&w()}}}function Ol(){const d=v(!1),n=v(!1),r=v(!1),s=()=>{n.value=!0},b=()=>{n.value=!1,setTimeout(()=>{!n.value&&!r.value&&(d.value=!1)},300)},y=()=>{r.value=!0,d.value=!0},f=()=>{r.value=!1,setTimeout(()=>{!n.value&&!r.value&&(d.value=!1)},300)},w=()=>{d.value=!1};return{showImagePicker:d,isImageHovered:n,isButtonHovered:r,handleImageMouseEnter:s,handleImageMouseLeave:b,handleImageButtonMouseEnter:y,handleButtonMouseLeave:f,closeImagePicker:w,insertImage:(k,l,S,A)=>{const p=l.value;if(p){const x=p.selectionStart,O=p.selectionEnd,B="[img]".concat(k,"[/img]"),L=S.value.slice(0,x)+B+S.value.slice(O);A(L),tt(()=>{p.focus(),p.setSelectionRange(x+B.length,x+B.length),p.style.height&&(p.style.height="auto",p.style.height="".concat(Math.min(p.scrollHeight,200),"px"))})}else{const x="[img]".concat(k,"[/img]");A(S.value+x)}},handleGlobalClick:k=>{!k.target.closest(".image-picker")&&!k.target.closest(".emoji-button-inline")&&w()}}}function $l(){const d=v(!1),n=v("");return{showLinkModal:d,selectedTextForLink:n,insertLink:(f,w)=>{const g=f.value;if(g){const E=g.selectionStart,k=g.selectionEnd,l=w.value.slice(E,k);n.value=l.trim()||""}d.value=!0},insertLinkFromModal:(f,w,g,E)=>{const k=w.value;if(k){const l=k.selectionStart,S=k.selectionEnd,A="[link=".concat(f.url,"]").concat(f.title,"[/link]"),p=g.value.slice(0,l)+A+g.value.slice(S);E(p),tt(()=>{k.focus(),k.setSelectionRange(l+A.length,l+A.length),k.style.height&&(k.style.height="auto",k.style.height="".concat(Math.min(k.scrollHeight,200),"px"))})}},closeLinkModal:()=>{d.value=!1},insertSpoiler:(f,w,g)=>{const E=f.value;if(E){const k=E.selectionStart,l=E.selectionEnd,S=w.value.slice(k,l);let A;S.trim()?A="[spoiler]".concat(S,"[/spoiler]"):A="[spoiler][/spoiler]";const p=w.value.slice(0,k)+A+w.value.slice(l);g(p),tt(()=>{if(E.focus(),S.trim())E.setSelectionRange(k+A.length,k+A.length);else{const x=k+9;E.setSelectionRange(x,x)}E.style.height&&(E.style.height="auto",E.style.height="".concat(Math.min(E.scrollHeight,200),"px"))})}}}}function Fl(){return{autoResize:r=>{const s=r==null?void 0:r.target;s&&(s.style.height="auto",s.style.height="".concat(Math.min(s.scrollHeight,200),"px"))},autoResizeElement:r=>{r&&(r.style.height="auto",r.style.height="".concat(Math.min(r.scrollHeight,200),"px"))}}}function Vn(){const d=Nl(),n=Ol(),r=$l(),{autoResize:s,autoResizeElement:b}=Fl(),y=()=>{d.isButtonHovered.value=!0,n.isButtonHovered.value=!0,d.showEmojiPicker.value=!0,n.showImagePicker.value=!1},f=()=>{d.isButtonHovered.value=!0,n.isButtonHovered.value=!0,n.showImagePicker.value=!0,d.showEmojiPicker.value=!1},w=()=>{d.isButtonHovered.value=!1,n.isButtonHovered.value=!1,setTimeout(()=>{!d.isEmojiHovered.value&&!n.isImageHovered.value&&!d.isButtonHovered.value&&!n.isButtonHovered.value&&(d.showEmojiPicker.value=!1,n.showImagePicker.value=!1)},300)},g=()=>{d.showEmojiPicker.value=!1,n.showImagePicker.value=!1},E=x=>{!x.target.closest(".emoji-picker")&&!x.target.closest(".image-picker")&&!x.target.closest(".emoji-button-inline")&&g()},k=(x,O,B,L)=>{d.insertEmoji(x,O,B,L)},l=(x,O,B,L)=>{n.insertImage(x,O,B,L)},S=(x,O,B)=>{r.insertLink(x,O,B)},A=(x,O,B,L)=>{r.insertLinkFromModal(x,O,B,L)},p=(x,O,B)=>{r.insertSpoiler(x,O,B)};return Ut(()=>{document.addEventListener("click",E)}),jn(()=>{document.removeEventListener("click",E)}),{showEmojiPicker:d.showEmojiPicker,handleEmojiMouseEnter:d.handleEmojiMouseEnter,handleEmojiMouseLeave:d.handleEmojiMouseLeave,closeEmojiPicker:d.closeEmojiPicker,showImagePicker:n.showImagePicker,handleImageMouseEnter:n.handleImageMouseEnter,handleImageMouseLeave:n.handleImageMouseLeave,closeImagePicker:n.closeImagePicker,showLinkModal:r.showLinkModal,selectedTextForLink:r.selectedTextForLink,closeLinkModal:r.closeLinkModal,handleButtonMouseEnter:y,handleImageButtonMouseEnter:f,handleButtonMouseLeave:w,closeAllPickers:g,insertEmojiUniversal:k,insertImageUniversal:l,insertLinkUniversal:S,insertLinkFromModalUniversal:A,insertSpoilerUniversal:p,autoResize:s,autoResizeElement:b}}const Ul=d=>d===1?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π":d>=2&&d<=4?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è":"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤",jl=d=>{if(!d)return"?";const n=d.split(" ");return n.length===1?d.slice(0,2).toUpperCase():(n[0][0]+n[n.length-1][0]).toUpperCase()},Dl={name:"CommentItem",components:{EmojiPicker:Dn,ImagePicker:Hn,LinkModal:qn},props:{comment:{type:Object,required:!0,default:()=>({username:"–ê–Ω–æ–Ω–∏–º",user_avatar:null,content:"",created_at:new Date().toISOString(),rating:0,replies:[]})},currentUser:{type:Object,required:!0,default:()=>({})},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate"],setup(d,{emit:n}){var Fe,Mt;const r=dn(),s=N(()=>{var I;return d.editingCommentId===((I=d.comment)==null?void 0:I.id)}),b=v(((Fe=d.comment)==null?void 0:Fe.content)||""),y=v(((Mt=d.comment)==null?void 0:Mt.user_rating)||0),f=v(null),w=v(null),{showEmojiPicker:g,showImagePicker:E,showLinkModal:k,selectedTextForLink:l,handleEmojiMouseEnter:S,handleEmojiMouseLeave:A,handleImageMouseEnter:p,handleImageMouseLeave:x,handleButtonMouseEnter:O,handleImageButtonMouseEnter:B,handleButtonMouseLeave:L,closeEmojiPicker:F,closeImagePicker:R,closeLinkModal:ne,insertEmojiUniversal:J,insertImageUniversal:$,insertLinkUniversal:T,insertLinkFromModalUniversal:qe,insertSpoilerUniversal:pe,autoResize:re}=Vn(),{formatContentWithTruncation:nt}=no();Ut(async()=>{var I;if((I=d.comment)!=null&&I.user_avatar){const z=await co();f.value="".concat(z).concat(d.comment.user_avatar)}});const H=N(()=>{var I;return d.currentUser&&((I=d.comment)==null?void 0:I.user_id)===d.currentUser.id}),be=N(()=>{var I;return d.currentUser&&((I=d.comment)==null?void 0:I.user_id)===d.currentUser.id||d.currentUser&&d.currentUser.is_admin===1}),ue=N(()=>{var I,z,ze;return((I=d.comment)==null?void 0:I.updated_at)&&((z=d.comment)==null?void 0:z.updated_at)!==((ze=d.comment)==null?void 0:ze.created_at)}),ae=N(()=>{var I,z;return(I=d.comment)!=null&&I.is_deleted?!1:(((z=d.comment)==null?void 0:z.rating)||0)<=-3}),Ae=N(()=>ae.value),gt=v(!1),ot=N(()=>{var I,z;return(I=d.comment)!=null&&I.is_deleted?null:(((z=d.comment)==null?void 0:z.rating)||0)<=-3?"lowRating":null}),we=()=>{var I,z;n("start-edit",(I=d.comment)==null?void 0:I.id),b.value=((z=d.comment)==null?void 0:z.content)||"",tt(()=>{w.value&&(w.value.focus(),re({target:w.value}))})},Se=()=>{var I;n("cancel-edit"),b.value=((I=d.comment)==null?void 0:I.content)||""},Me=()=>{var I;b.value.trim()&&n("edit",(I=d.comment)==null?void 0:I.id,b.value.trim())},Xe=()=>{var I;confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π?")&&n("delete",(I=d.comment)==null?void 0:I.id)},Qe=I=>{var z,ze;y.value===I?(y.value=0,n("rate",(z=d.comment)==null?void 0:z.id,I)):(y.value=I,n("rate",(ze=d.comment)==null?void 0:ze.id,I))},je=I=>{I.key==="Enter"&&!I.shiftKey&&(I.preventDefault(),Me())},Z=N(()=>{var I;return nt((I=d.comment)==null?void 0:I.content)}),fe=()=>{console.log("Avatar load error, falling back to initials"),f.value=null,tt(()=>{const I=document.querySelector(".avatar-placeholder");I&&(I.style.display="flex")})},$e=()=>{r.push("/login")},Je=I=>{J(I,w,b,z=>{b.value=z})},rt=I=>{$(I,w,b,z=>{b.value=z})},V=()=>{pe(w,b,I=>{b.value=I})},st=()=>{T(w,b,I=>{b.value=I})},Ve=I=>{qe(I,w,b,z=>{b.value=z})},ce=I=>{re(I)};return He(b,()=>{s.value&&w.value&&tt(()=>{ce({target:w.value})})}),{isEditing:s,editContent:b,userRating:y,isCommentOwner:H,canDeleteComment:be,isCommentEdited:ue,formatDate:oo,formatRelativeTime:Lo,startEdit:we,cancelEdit:Se,saveEdit:Me,confirmDelete:Xe,rateComment:Qe,avatarUrl:f,getInitials:jl,handleEditKeydown:je,isCommentHidden:Ae,showHiddenComment:gt,hiddenCommentReason:ot,formattedContent:Z,autoResizeEdit:ce,editTextarea:w,showEmojiPicker:g,showImagePicker:E,insertEmojiEdit:Je,insertImageEdit:rt,insertSpoilerEdit:V,insertLinkEdit:st,handleEmojiMouseEnter:S,handleEmojiMouseLeave:A,handleImageMouseEnter:p,handleImageMouseLeave:x,closeEmojiPicker:F,closeImagePicker:R,handleButtonMouseEnter:O,handleButtonMouseLeave:L,handleImageButtonMouseEnter:B,handleAvatarError:fe,openLogin:$e,showLinkModal:k,selectedTextForLink:l,insertLinkFromModal:Ve,closeLinkModal:ne}}},Hl=["data-comment-id"],ql={class:"comment-header"},Vl={class:"user-info"},zl={class:"user-avatar"},Wl=["src","alt"],Kl={class:"user-details"},Gl={class:"username"},Yl={key:0,class:"user-rating"},Zl=["title"],Xl=["title"],Ql={class:"comment-content"},Jl={key:0,class:"hidden-comment-warning"},ei={key:1},ti={key:0,class:"deleted-comment"},ni={key:1},oi={key:0,class:"edit-form"},si={class:"edit-textarea-container"},li={class:"edit-footer"},ii={class:"edit-actions"},ai=["disabled"],ri={class:"character-counter-container"},ui={key:1,class:"comment-text-container"},ci=["innerHTML"],di={class:"comment-footer"},vi={class:"comment-actions"},mi={class:"rating-buttons"},fi={class:"action-buttons"};function pi(d,n,r,s,b,y){var k,l,S,A,p,x,O,B,L,F,R,ne,J,$,T,qe,pe,re,nt;const f=Ze("router-link"),w=Ze("EmojiPicker"),g=Ze("ImagePicker"),E=Ze("LinkModal");return i(),a("div",{class:"comment-item","data-comment-id":(k=r.comment)==null?void 0:k.id},[t("div",ql,[t("div",Vl,[Re(f,{to:{path:"/lists/".concat((l=r.comment)==null?void 0:l.user_id)},target:"_blank",rel:"noopener noreferrer",class:"user-avatar-link"},{default:Fn(()=>{var H,be;return[t("div",zl,[s.avatarUrl?(i(),a("img",{key:0,src:s.avatarUrl,alt:((H=r.comment)==null?void 0:H.username)||"–ê–Ω–æ–Ω–∏–º",onError:n[0]||(n[0]=(...ue)=>s.handleAvatarError&&s.handleAvatarError(...ue)),onerror:"this.onerror=null; this.style.display='none'; this.nextElementSibling.style.display='flex';"},null,40,Wl)):(i(),a("div",{key:1,class:"avatar-placeholder",style:rn({display:s.avatarUrl?"none":"flex"})},m(s.getInitials(((be=r.comment)==null?void 0:be.username)||"–ê–Ω–æ–Ω–∏–º")),5))])]}),_:1},8,["to"]),t("div",Kl,[Re(f,{to:{path:"/lists/".concat((S=r.comment)==null?void 0:S.user_id)},target:"_blank",rel:"noopener noreferrer",class:"username-link"},{default:Fn(()=>{var H;return[t("span",Gl,m(((H=r.comment)==null?void 0:H.username)||"–ê–Ω–æ–Ω–∏–º"),1)]}),_:1},8,["to"]),(A=r.comment)!=null&&A.user_movie_rating?(i(),a("span",Yl,[n[18]||(n[18]=t("i",{class:"fas fa-star"},null,-1)),X(" "+m(r.comment.user_movie_rating),1)])):h("",!0),t("span",{class:"date",title:s.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(s.formatDate((p=r.comment)==null?void 0:p.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(s.formatDate((x=r.comment)==null?void 0:x.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(s.formatDate((O=r.comment)==null?void 0:O.created_at))},[X(m(s.formatRelativeTime((B=r.comment)==null?void 0:B.created_at))+" ",1),s.isCommentEdited?(i(),a("i",{key:0,class:"fas fa-pencil-alt edit-icon",title:s.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(s.formatDate((L=r.comment)==null?void 0:L.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(s.formatDate((F=r.comment)==null?void 0:F.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(s.formatDate((R=r.comment)==null?void 0:R.created_at))},null,8,Xl)):h("",!0)],8,Zl)])])]),t("div",Ql,[!((ne=r.comment)!=null&&ne.is_deleted)&&s.isCommentHidden&&!s.showHiddenComment?(i(),a("div",Jl,[s.hiddenCommentReason==="lowRating"?(i(),a("p",{key:0,class:"warning-text",onClick:n[1]||(n[1]=H=>s.showHiddenComment=!0)},n[19]||(n[19]=[t("i",{class:"fas fa-eye-slash"},null,-1),X(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–∫—Ä—ã—Ç –∏–∑-–∑–∞ –Ω–∏–∑–∫–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å. ")]))):h("",!0)])):(i(),a("div",ei,[(J=r.comment)!=null&&J.is_deleted?(i(),a("div",ti,n[20]||(n[20]=[t("p",{class:"deleted-message"},[t("i",{class:"fas fa-trash"}),X(" –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —É–¥–∞–ª—ë–Ω ")],-1)]))):(i(),a("div",ni,[s.isEditing?(i(),a("div",oi,[t("div",si,[Q(t("textarea",{ref:"editTextarea","onUpdate:modelValue":n[2]||(n[2]=H=>s.editContent=H),class:"edit-textarea",rows:"3",maxlength:"1500",onKeydown:n[3]||(n[3]=(...H)=>s.handleEditKeydown&&s.handleEditKeydown(...H)),onInput:n[4]||(n[4]=(...H)=>s.autoResizeEdit&&s.autoResizeEdit(...H))},null,544),[[Et,s.editContent]])]),t("div",li,[t("div",ii,[t("button",{onClick:n[5]||(n[5]=(...H)=>s.cancelEdit&&s.cancelEdit(...H)),class:"cancel-button"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:n[6]||(n[6]=(...H)=>s.saveEdit&&s.saveEdit(...H)),class:"save-button",disabled:!s.editContent.trim()||s.editContent.length>1500}," –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ",8,ai)]),t("div",ri,[t("div",{class:M(["character-counter-inline",{"near-limit":s.editContent.length>1400,"at-limit":s.editContent.length>=1500}])},m(s.editContent.length)+"/1500 ",3),t("button",{type:"button",class:M(["emoji-button-inline",{active:s.showEmojiPicker}]),onMouseenter:n[7]||(n[7]=(...H)=>s.handleButtonMouseEnter&&s.handleButtonMouseEnter(...H)),onMouseleave:n[8]||(n[8]=(...H)=>s.handleButtonMouseLeave&&s.handleButtonMouseLeave(...H))}," üòä ",34),t("button",{type:"button",class:M(["emoji-button-inline",{active:s.showImagePicker}]),onMouseenter:n[9]||(n[9]=(...H)=>s.handleImageButtonMouseEnter&&s.handleImageButtonMouseEnter(...H)),onMouseleave:n[10]||(n[10]=(...H)=>s.handleButtonMouseLeave&&s.handleButtonMouseLeave(...H))},n[21]||(n[21]=[un('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-f1c85dfc><g id="logo" data-v-f1c85dfc><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-f1c85dfc></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-f1c85dfc></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-f1c85dfc></path></g></svg>',1)]),34),t("button",{type:"button",class:"emoji-button-inline spoiler-button",onClick:n[11]||(n[11]=(...H)=>s.insertSpoilerEdit&&s.insertSpoilerEdit(...H)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},n[22]||(n[22]=[t("i",{class:"fas fa-eye-slash"},null,-1)])),t("button",{type:"button",class:"emoji-button-inline link-button",onClick:n[12]||(n[12]=(...H)=>s.insertLinkEdit&&s.insertLinkEdit(...H)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},n[23]||(n[23]=[t("i",{class:"fas fa-link"},null,-1)])),Re(w,{"is-visible":s.showEmojiPicker,onEmojiSelected:s.insertEmojiEdit,onMouseEnter:s.handleEmojiMouseEnter,onMouseLeave:s.handleEmojiMouseLeave,onClose:s.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),Re(g,{"is-visible":s.showImagePicker,"current-user":r.currentUser,onImageSelected:s.insertImageEdit,onMouseEnter:s.handleImageMouseEnter,onMouseLeave:s.handleImageMouseLeave,onClose:s.closeImagePicker,onLoginRequired:s.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),Re(E,{"is-visible":s.showLinkModal,"selected-text":s.selectedTextForLink,onClose:s.closeLinkModal,onSubmit:s.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):(i(),a("div",ui,[t("p",{class:"comment-text",innerHTML:s.formattedContent},null,8,ci)]))]))]))]),t("div",di,[t("div",vi,[t("div",mi,[!s.isCommentOwner&&!(($=r.comment)!=null&&$.is_deleted)?(i(),a("button",{key:0,onClick:n[13]||(n[13]=H=>s.rateComment(1)),class:M(["rating-button",{"rated-up":s.userRating===1}])},n[24]||(n[24]=[t("i",{class:"fas fa-thumbs-up"},null,-1)]),2)):h("",!0),t("span",{class:M(["rating-count",{"rating-positive":s.userRating===1,"rating-negative":s.userRating===-1}])},m(((T=r.comment)==null?void 0:T.rating)||0),3),!s.isCommentOwner&&!((qe=r.comment)!=null&&qe.is_deleted)?(i(),a("button",{key:1,onClick:n[14]||(n[14]=H=>s.rateComment(-1)),class:M(["rating-button",{"rated-down":s.userRating===-1}])},n[25]||(n[25]=[t("i",{class:"fas fa-thumbs-down"},null,-1)]),2)):h("",!0)]),t("div",fi,[!r.currentUser||r.currentUser.allow_comments===1?(i(),a("button",{key:0,onClick:n[15]||(n[15]=H=>d.$emit("reply",r.comment)),class:"action-button reply-button"},n[26]||(n[26]=[t("i",{class:"fas fa-reply"},null,-1)]))):h("",!0),s.isCommentOwner&&!((pe=r.comment)!=null&&pe.is_deleted)&&!s.isEditing&&((re=r.currentUser)==null?void 0:re.allow_comments)===1?(i(),a("button",{key:1,onClick:n[16]||(n[16]=(...H)=>s.startEdit&&s.startEdit(...H)),class:"action-button edit-button"},n[27]||(n[27]=[t("i",{class:"fas fa-edit"},null,-1)]))):h("",!0),s.canDeleteComment&&!((nt=r.comment)!=null&&nt.is_deleted)?(i(),a("button",{key:2,onClick:n[17]||(n[17]=(...H)=>s.confirmDelete&&s.confirmDelete(...H)),class:"action-button delete-button"},n[28]||(n[28]=[t("i",{class:"fas fa-trash"},null,-1)]))):h("",!0)])])])],8,Hl)}const gi=pt(Dl,[["render",pi],["__scopeId","data-v-f1c85dfc"]]),yi={name:"CommentThread",components:{CommentItem:gi,EmojiPicker:Dn,ImagePicker:Hn,LinkModal:qn},props:{comment:{type:Object,required:!0},currentUser:{type:Object,required:!0},replyTo:{type:Object,default:null},replyContent:{type:String,default:""},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate","submit-reply","cancel-reply","update-reply-content","reply-keydown"],setup(d,{emit:n}){const r=v(null),s=v(!0),{showEmojiPicker:b,showImagePicker:y,showLinkModal:f,selectedTextForLink:w,handleEmojiMouseEnter:g,handleEmojiMouseLeave:E,handleImageMouseEnter:k,handleImageMouseLeave:l,handleButtonMouseEnter:S,handleImageButtonMouseEnter:A,handleButtonMouseLeave:p,closeEmojiPicker:x,closeImagePicker:O,closeLinkModal:B,insertEmojiUniversal:L,insertImageUniversal:F,insertLinkUniversal:R,insertLinkFromModalUniversal:ne,insertSpoilerUniversal:J}=Vn(),$=ue=>{n("update-reply-content",ue.target.value);const ae=ue.target;ae&&(ae.style.height="auto",ae.style.height="".concat(Math.min(ae.scrollHeight,200),"px"))},T={get value(){return d.replyContent},set value(ue){n("update-reply-content",ue)}};return{replyTextarea:r,showEmojiPicker:b,showImagePicker:y,isCollapsed:s,insertEmoji:ue=>{L(ue,r,T,ae=>{n("update-reply-content",ae)})},insertImage:ue=>{F(ue,r,T,ae=>{n("update-reply-content",ae)})},insertSpoiler:()=>{J(r,T,ue=>{n("update-reply-content",ue)})},handleEmojiMouseEnter:g,handleEmojiMouseLeave:E,handleImageMouseEnter:k,handleImageMouseLeave:l,handleButtonMouseEnter:S,handleButtonMouseLeave:p,closeEmojiPicker:x,closeImagePicker:O,handleImageButtonMouseEnter:A,handleReplyInput:$,toggleCollapsed:()=>{s.value=!s.value},showLinkModal:f,selectedTextForLink:w,insertLink:()=>{R(r,T,ue=>{n("update-reply-content",ue)})},closeLinkModal:B,insertLinkFromModal:ue=>{ne(ue,r,T,ae=>{n("update-reply-content",ae)})}}},computed:{canReply(){return this.currentUser?this.currentUser.allow_comments===1:!0},getReplyPlaceholder(){return this.currentUser?this.currentUser.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç..."},formattedContent(){const{formatContent:d}=no();return d(this.comment.content)}}},hi={class:"comment-thread"},bi={key:0,class:"reply-form"},ki={class:"textarea-container"},wi=["value","placeholder","disabled"],Ci={class:"reply-footer"},_i={class:"reply-actions"},Ei=["disabled"],Si={class:"character-counter-container"},Mi=["disabled"],Ii={key:1,class:"replies-container"},xi=["title"],Li={class:"replies-count"},Ti=["title"],Ri={key:0,class:"replies-content"};function Ai(d,n,r,s,b,y){const f=Ze("CommentItem"),w=Ze("EmojiPicker"),g=Ze("ImagePicker"),E=Ze("LinkModal"),k=Ze("CommentThread",!0);return i(),a("div",hi,[Re(f,{comment:r.comment,"current-user":r.currentUser,"editing-comment-id":r.editingCommentId,onReply:n[0]||(n[0]=l=>d.$emit("reply",l)),onStartEdit:n[1]||(n[1]=l=>d.$emit("start-edit",l)),onCancelEdit:n[2]||(n[2]=l=>d.$emit("cancel-edit")),onEdit:n[3]||(n[3]=(l,S)=>d.$emit("edit",l,S)),onDelete:n[4]||(n[4]=l=>d.$emit("delete",l)),onRate:n[5]||(n[5]=(l,S)=>d.$emit("rate",l,S))},null,8,["comment","current-user","editing-comment-id"]),r.replyTo&&r.replyTo.id===r.comment.id?(i(),a("div",bi,[t("div",ki,[t("textarea",{ref:"replyTextarea",class:"comment-textarea",value:r.replyContent,placeholder:y.getReplyPlaceholder,disabled:r.currentUser&&r.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:n[6]||(n[6]=(...l)=>s.handleReplyInput&&s.handleReplyInput(...l)),onKeydown:n[7]||(n[7]=l=>d.$emit("reply-keydown",l))},null,40,wi)]),t("div",Ci,[t("div",_i,[t("button",{class:"cancel-reply",onClick:n[8]||(n[8]=l=>d.$emit("cancel-reply"))},"–û—Ç–º–µ–Ω–∞"),t("button",{class:"submit-button",disabled:!r.replyContent.trim()||r.replyContent.length>1500||r.currentUser&&r.currentUser.allow_comments!==1,onClick:n[9]||(n[9]=l=>d.$emit("submit-reply"))}," –û—Ç–≤–µ—Ç–∏—Ç—å ",8,Ei)]),t("div",Si,[t("div",{class:M(["character-counter-inline",{"near-limit":r.replyContent.length>1400,"at-limit":r.replyContent.length>=1500}])},m(r.replyContent.length)+"/1500 ",3),t("button",{type:"button",class:M(["emoji-button-inline",{active:s.showEmojiPicker}]),onMouseenter:n[10]||(n[10]=(...l)=>s.handleButtonMouseEnter&&s.handleButtonMouseEnter(...l)),onMouseleave:n[11]||(n[11]=(...l)=>s.handleButtonMouseLeave&&s.handleButtonMouseLeave(...l))}," üòä ",34),t("button",{type:"button",class:M(["emoji-button-inline",{active:s.showImagePicker}]),onMouseenter:n[12]||(n[12]=(...l)=>s.handleImageButtonMouseEnter&&s.handleImageButtonMouseEnter(...l)),onMouseleave:n[13]||(n[13]=(...l)=>s.handleButtonMouseLeave&&s.handleButtonMouseLeave(...l))},n[29]||(n[29]=[un('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-6c0fc347><g id="logo" data-v-6c0fc347><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-6c0fc347></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-6c0fc347></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-6c0fc347></path></g></svg>',1)]),34),t("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:r.currentUser&&r.currentUser.allow_comments!==1,onClick:n[14]||(n[14]=(...l)=>s.insertSpoiler&&s.insertSpoiler(...l)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},n[30]||(n[30]=[t("i",{class:"fas fa-eye-slash"},null,-1)]),8,Mi),t("button",{type:"button",class:"emoji-button-inline link-button",onClick:n[15]||(n[15]=(...l)=>s.insertLink&&s.insertLink(...l)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},n[31]||(n[31]=[t("i",{class:"fas fa-link"},null,-1)])),Re(w,{"is-visible":s.showEmojiPicker,onEmojiSelected:s.insertEmoji,onMouseEnter:s.handleEmojiMouseEnter,onMouseLeave:s.handleEmojiMouseLeave,onClose:s.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),Re(g,{"is-visible":s.showImagePicker,"current-user":r.currentUser,onImageSelected:s.insertImage,onMouseEnter:s.handleImageMouseEnter,onMouseLeave:s.handleImageMouseLeave,onClose:s.closeImagePicker,onLoginRequired:n[16]||(n[16]=()=>d.$router.push("/login"))},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose"]),Re(E,{"is-visible":s.showLinkModal,"selected-text":s.selectedTextForLink,onClose:s.closeLinkModal,onSubmit:s.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):h("",!0),r.comment.replies&&r.comment.replies.length>0?(i(),a("div",Ii,[t("button",{class:"collapse-toggle",title:s.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:n[17]||(n[17]=(...l)=>s.toggleCollapsed&&s.toggleCollapsed(...l))},[t("span",{class:M(["collapse-icon",{expanded:!s.isCollapsed}])},n[32]||(n[32]=[t("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},[t("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1)]),2),t("span",Li,m(r.comment.replies.length)+" "+m(r.comment.replies.length===1?"–æ—Ç–≤–µ—Ç":"–æ—Ç–≤–µ—Ç–æ–≤"),1)],8,xi),t("div",{class:"vertical-line-clickable",title:s.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:n[18]||(n[18]=(...l)=>s.toggleCollapsed&&s.toggleCollapsed(...l))},[t("div",{class:M(["vertical-line-visual",{collapsed:s.isCollapsed}])},null,2)],8,Ti),s.isCollapsed?h("",!0):(i(),a("div",Ri,[(i(!0),a(ve,null,Te(r.comment.replies,l=>(i(),_t(k,{key:l.id,comment:l,"current-user":r.currentUser,"reply-to":r.replyTo,"reply-content":r.replyContent,"editing-comment-id":r.editingCommentId,onReply:n[19]||(n[19]=S=>d.$emit("reply",S)),onStartEdit:n[20]||(n[20]=S=>d.$emit("start-edit",S)),onCancelEdit:n[21]||(n[21]=S=>d.$emit("cancel-edit")),onEdit:n[22]||(n[22]=(S,A)=>d.$emit("edit",S,A)),onDelete:n[23]||(n[23]=S=>d.$emit("delete",S)),onRate:n[24]||(n[24]=(S,A)=>d.$emit("rate",S,A)),onSubmitReply:n[25]||(n[25]=S=>d.$emit("submit-reply")),onCancelReply:n[26]||(n[26]=S=>d.$emit("cancel-reply")),onUpdateReplyContent:n[27]||(n[27]=S=>d.$emit("update-reply-content",S)),onReplyKeydown:n[28]||(n[28]=S=>d.$emit("reply-keydown",S))},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id"]))),128))]))])):h("",!0)])}const Bi=pt(yi,[["render",Ai],["__scopeId","data-v-6c0fc347"]]),Pi={name:"Comments",components:{CommentThread:Bi,Notification:Cn,EmojiPicker:Dn,ImagePicker:Hn,LinkModal:qn},props:{movieId:{type:[String,Number],required:!0}},setup(d){const n=Un(),r=dn(),s=cn(),b=v([]),y=v(""),f=v(null),w=v(""),g=v(null),E=v(n.user),k=v(null),l=v(null),S=v(s.isAutoShowComments),A=v(!1),p=v(3),x=v(s.commentsSortBy),O=v(x.value==="date"?"asc":"desc"),{showEmojiPicker:B,showImagePicker:L,showLinkModal:F,selectedTextForLink:R,handleEmojiMouseEnter:ne,handleEmojiMouseLeave:J,handleImageMouseEnter:$,handleImageMouseLeave:T,handleButtonMouseEnter:qe,handleImageButtonMouseEnter:pe,handleButtonMouseLeave:re,closeEmojiPicker:nt,closeImagePicker:H,closeLinkModal:be,insertEmojiUniversal:ue,insertImageUniversal:ae,insertLinkUniversal:Ae,insertLinkFromModalUniversal:gt,insertSpoilerUniversal:ot,autoResize:we}=Vn(),Se=N(()=>{const U=(oe=null)=>{const Ie=b.value.filter(he=>he.parent_id===oe).filter(he=>!he.is_deleted||he.replies&&he.replies.length>0);let Pe;return oe===null?Pe=Ie.sort((he,Oe)=>{if(x.value==="rating"){const De=he.rating||0,yt=Oe.rating||0;return De!==yt?O.value==="asc"?De-yt:yt-De:he.id-Oe.id}return O.value==="asc"?he.id-Oe.id:Oe.id-he.id}):Pe=Ie.sort((he,Oe)=>he.id-Oe.id),Pe.map(he=>({...he,replies:U(he.id)}))};return U()}),Me=N(()=>{const U=oe=>oe.reduce((Ie,Pe)=>Ie+1+U(Pe.replies||[]),0);return U(Se.value)}),Xe=N(()=>Se.value.slice(0,p.value)),Qe=N(()=>Se.value.length>p.value),je=N(()=>Se.value.length-p.value),Z=()=>{p.value=Se.value.length},fe=U=>{x.value===U?O.value=O.value==="asc"?"desc":"asc":(x.value=U,O.value=U==="date"?"asc":"desc",s.setCommentsSortBy(U))},$e=async()=>{try{const U=await vo(d.movieId);b.value=U}catch(U){console.error("Failed to load comments:",U),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.")}},Je=async()=>{if(A.value)return;if(!n.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:I});return}if(E.value&&E.value.allow_comments!==1){k.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!y.value.replace(/\[spoiler\]\s*\[\/spoiler\]/g,"").replace(/\[img\]\s*\[\/img\]/g,"").replace(/\[link=[^\]]+\]\s*\[\/link\]/g,"").trim()){k.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º");return}if(y.value.length>1500){k.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await Wn(d.movieId,y.value.trim()),y.value="",await $e(),S.value=!0,tt(()=>{l.value&&(l.value.focus(),l.value.style.height="auto"),setTimeout(()=>{const oe=document.querySelectorAll(".comment-item[data-comment-id]");if(oe.length>0){const Ie=Array.from(oe).map(Pe=>parseInt(Pe.getAttribute("data-comment-id"))).filter(Pe=>!isNaN(Pe));if(Ie.length>0){const Pe=Math.max(...Ie),he=document.querySelector('[data-comment-id="'.concat(Pe,'"]'));he&&he.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}},300)})}catch(oe){console.error("Failed to create comment:",oe),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},rt=U=>{if(!n.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:I});return}g.value=null,f.value=U,w.value="",tt(()=>{const oe=document.querySelector(".reply-form");oe&&oe.scrollIntoView({behavior:"smooth",block:"center"})})},V=async()=>{if(!n.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:I});return}if(E.value&&E.value.allow_comments!==1){k.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!(!w.value.trim()||!f.value)){if(w.value.length>1500){k.value.showNotification("–û—Ç–≤–µ—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await Wn(d.movieId,w.value.trim(),f.value.id);const U=f.value.id;await $e(),w.value="",f.value=null,tt(()=>{setTimeout(()=>{const oe=document.querySelector('[data-comment-id="'.concat(U,'"]'));if(oe){const Ie=oe.querySelector(".replies-content");if(Ie){const Pe=Ie.querySelectorAll(".comment-item[data-comment-id]");if(Pe.length>0){const he=Array.from(Pe).map(Oe=>parseInt(Oe.getAttribute("data-comment-id"))).filter(Oe=>!isNaN(Oe));if(he.length>0){const Oe=Math.max(...he),De=document.querySelector('[data-comment-id="'.concat(Oe,'"]'));De&&De.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}}}},300)})}catch(U){console.error("Error submitting reply:",U),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}}},st=async(U,oe)=>{if(!n.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:I});return}if(E.value&&E.value.allow_comments!==1){k.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(oe.length>1500){k.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await po(U,oe.trim()),await $e(),g.value=null}catch(Ie){console.error("Failed to update comment:",Ie),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},Ve=async U=>{if(!n.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:I});return}try{await fo(U),await $e()}catch(oe){console.error("Failed to delete comment:",oe),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},ce=async(U,oe)=>{if(!n.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:I});return}try{await mo(U,oe),await $e()}catch(Ie){console.error("Failed to rate comment:",Ie),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ü–µ–Ω–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},Fe=U=>{A.value||B.value||U.key==="Enter"&&!U.shiftKey&&(U.preventDefault(),Je())},Mt=U=>{U.key==="Enter"&&!U.shiftKey&&(U.preventDefault(),V())},I=()=>{r.push("/login")},z=U=>{A.value=!0,ue(U,l,y,oe=>{y.value=oe}),setTimeout(()=>{A.value=!1},100)},ze=U=>{ae(U,l,y,oe=>{y.value=oe})},ke=()=>{ot(l,y,U=>{y.value=U})},Be=()=>{Ae(l,y,U=>{y.value=U})},jt=U=>{gt(U,l,y,oe=>{y.value=oe})},Rt=N(()=>E.value?E.value.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."),ut=N(()=>E.value?E.value.allow_comments===1:!0),ct=U=>{f.value=null,w.value="",g.value=U},dt=()=>{g.value=null};return Ut(()=>{$e()}),{comments:b,groupedComments:Se,displayedComments:Xe,hasMoreComments:Qe,remainingCommentsCount:je,showMoreComments:Z,sortBy:x,setSortBy:fe,sortDirection:O,newComment:y,replyTo:f,replyContent:w,editingCommentId:g,currentUser:E,notificationRef:k,commentTextarea:l,showComments:S,submitComment:Je,handleReply:rt,submitReply:V,handleEdit:st,handleDelete:Ve,handleRate:ce,handleCommentKeydown:Fe,handleReplyKeydown:Mt,autoResize:we,totalCommentsCount:Me,getCommentWordForm:Ul,showEmojiPicker:B,showImagePicker:L,showLinkModal:F,selectedTextForLink:R,insertEmoji:z,insertImage:ze,handleEmojiMouseEnter:ne,handleEmojiMouseLeave:J,handleImageMouseEnter:$,handleImageMouseLeave:T,closeEmojiPicker:nt,closeImagePicker:H,handleButtonMouseLeave:re,handleButtonMouseEnter:qe,handleImageButtonMouseEnter:pe,getCommentPlaceholder:Rt,canComment:ut,handleStartEdit:ct,handleCancelEdit:dt,insertSpoiler:ke,insertLink:Be,insertLinkFromModal:jt,closeLinkModal:be}}},Ni={class:"comments-section"},Oi={class:"spoiler-content"},$i={key:1,class:"comments-container"},Fi={class:"comments-header"},Ui={class:"comments-controls"},ji={class:"textarea-container"},Di=["placeholder","disabled"],Hi={class:"comment-footer"},qi={class:"comment-actions"},Vi=["disabled"],zi={class:"character-counter-container"},Wi=["disabled"],Ki=["disabled"],Gi=["disabled"],Yi={class:"comments-list"},Zi={key:0,class:"show-more-comments"};function Xi(d,n,r,s,b,y){const f=Ze("EmojiPicker"),w=Ze("ImagePicker"),g=Ze("LinkModal"),E=Ze("CommentThread"),k=Ze("Notification");return i(),a("div",Ni,[s.showComments?(i(),a("div",$i,[t("div",Fi,[t("div",Ui,[t("button",{class:M(["sort-button",{active:s.sortBy==="date"}]),onClick:n[1]||(n[1]=l=>s.setSortBy("date")),title:"–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –¥–∞—Ç–µ"},[n[20]||(n[20]=t("i",{class:"fas fa-clock"},null,-1)),n[21]||(n[21]=X(" –ü–æ –¥–∞—Ç–µ ")),s.sortBy==="date"?(i(),a("i",{key:0,class:M(["fas",s.sortDirection==="asc"?"fa-arrow-up":"fa-arrow-down"])},null,2)):h("",!0)],2),t("button",{class:M(["sort-button",{active:s.sortBy==="rating"}]),onClick:n[2]||(n[2]=l=>s.setSortBy("rating")),title:"–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É"},[n[22]||(n[22]=t("i",{class:"fas fa-thumbs-up"},null,-1)),n[23]||(n[23]=X(" –ü–æ —Ä–µ–π—Ç–∏–Ω–≥—É ")),s.sortBy==="rating"?(i(),a("i",{key:0,class:M(["fas",s.sortDirection==="asc"?"fa-arrow-up":"fa-arrow-down"])},null,2)):h("",!0)],2)]),t("button",{class:"hide-comments-btn",onClick:n[3]||(n[3]=l=>s.showComments=!1)},n[24]||(n[24]=[t("i",{class:"fas fa-eye-slash"},null,-1),X(" –°–∫—Ä—ã—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ")]))]),t("form",{class:"comment-form",onSubmit:n[13]||(n[13]=St((...l)=>s.submitComment&&s.submitComment(...l),["prevent"]))},[t("div",ji,[Q(t("textarea",{ref:"commentTextarea","onUpdate:modelValue":n[4]||(n[4]=l=>s.newComment=l),class:"comment-textarea",placeholder:s.getCommentPlaceholder,disabled:s.currentUser&&s.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:n[5]||(n[5]=(...l)=>s.autoResize&&s.autoResize(...l)),onKeydown:n[6]||(n[6]=(...l)=>s.handleCommentKeydown&&s.handleCommentKeydown(...l))},null,40,Di),[[Et,s.newComment]])]),t("div",Hi,[t("div",qi,[t("button",{class:"submit-button",type:"submit",disabled:!s.newComment.trim()||s.newComment.length>1500||s.currentUser&&s.currentUser.allow_comments!==1}," –û—Ç–ø—Ä–∞–≤–∏—Ç—å ",8,Vi)]),t("div",zi,[t("div",{class:M(["character-counter-inline",{"near-limit":s.newComment.length>1400,"at-limit":s.newComment.length>=1500}])},m(s.newComment.length)+"/1500 ",3),t("button",{type:"button",class:M(["emoji-button-inline",{active:s.showEmojiPicker}]),disabled:s.currentUser&&s.currentUser.allow_comments!==1,onMouseenter:n[7]||(n[7]=(...l)=>s.handleButtonMouseEnter&&s.handleButtonMouseEnter(...l)),onMouseleave:n[8]||(n[8]=(...l)=>s.handleButtonMouseLeave&&s.handleButtonMouseLeave(...l))}," üòä ",42,Wi),t("button",{type:"button",class:M(["emoji-button-inline",{active:s.showImagePicker}]),disabled:s.currentUser&&s.currentUser.allow_comments!==1,onMouseenter:n[9]||(n[9]=(...l)=>s.handleImageButtonMouseEnter&&s.handleImageButtonMouseEnter(...l)),onMouseleave:n[10]||(n[10]=(...l)=>s.handleButtonMouseLeave&&s.handleButtonMouseLeave(...l))},n[25]||(n[25]=[un('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-e82be516><g id="logo" data-v-e82be516><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-e82be516></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-e82be516></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-e82be516></path></g></svg>',1)]),42,Ki),t("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:s.currentUser&&s.currentUser.allow_comments!==1,onClick:n[11]||(n[11]=(...l)=>s.insertSpoiler&&s.insertSpoiler(...l)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},n[26]||(n[26]=[t("i",{class:"fas fa-eye-slash"},null,-1)]),8,Gi),t("button",{type:"button",class:"emoji-button-inline link-button",onClick:n[12]||(n[12]=(...l)=>s.insertLink&&s.insertLink(...l)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},n[27]||(n[27]=[t("i",{class:"fas fa-link"},null,-1)])),Re(f,{"is-visible":s.showEmojiPicker&&s.canComment,onEmojiSelected:s.insertEmoji,onMouseEnter:s.handleEmojiMouseEnter,onMouseLeave:s.handleEmojiMouseLeave,onClose:s.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),Re(w,{"is-visible":s.showImagePicker&&s.canComment,"current-user":s.currentUser,onImageSelected:s.insertImage,onMouseEnter:s.handleImageMouseEnter,onMouseLeave:s.handleImageMouseLeave,onClose:s.closeImagePicker,onLoginRequired:d.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),Re(g,{"is-visible":s.showLinkModal,"selected-text":s.selectedTextForLink,onClose:s.closeLinkModal,onSubmit:s.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])],32),t("div",Yi,[(i(!0),a(ve,null,Te(s.displayedComments,l=>(i(),_t(E,{key:l.id,comment:l,"current-user":s.currentUser,"reply-to":s.replyTo,"reply-content":s.replyContent,"editing-comment-id":s.editingCommentId,"is-first-comment":!1,onReply:s.handleReply,onStartEdit:s.handleStartEdit,onCancelEdit:s.handleCancelEdit,onEdit:s.handleEdit,onDelete:s.handleDelete,onRate:s.handleRate,onSubmitReply:s.submitReply,onCancelReply:n[14]||(n[14]=S=>s.replyTo=null),onUpdateReplyContent:n[15]||(n[15]=S=>s.replyContent=S),onReplyKeydown:s.handleReplyKeydown},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id","onReply","onStartEdit","onCancelEdit","onEdit","onDelete","onRate","onSubmitReply","onReplyKeydown"]))),128)),s.hasMoreComments?(i(),a("div",Zi,[t("button",{class:"show-more-btn",onClick:n[16]||(n[16]=(...l)=>s.showMoreComments&&s.showMoreComments(...l))}," –ü–æ–∫–∞–∑–∞—Ç—å –µ—â–µ "+m(s.remainingCommentsCount)+" "+m(s.getCommentWordForm(s.remainingCommentsCount)),1)])):h("",!0)])])):(i(),a("div",{key:0,class:"spoiler-warning",onClick:n[0]||(n[0]=l=>s.showComments=!0)},[t("div",Oi,[n[17]||(n[17]=t("i",{class:"fas fa-eye-slash"},null,-1)),n[18]||(n[18]=t("h3",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–∫—Ä—ã—Ç—ã",-1)),n[19]||(n[19]=t("p",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä—ã. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å.",-1)),t("div",{class:M(["comments-count",{"no-comments":s.totalCommentsCount===0}])},[s.totalCommentsCount===0?(i(),a(ve,{key:0},[X(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç ")],64)):(i(),a(ve,{key:1},[X(m(s.totalCommentsCount)+" "+m(s.getCommentWordForm(s.totalCommentsCount)),1)],64))],2)])])),Re(k,{ref:"notificationRef"},null,512)])}const Qi=pt(Pi,[["render",Xi],["__scopeId","data-v-e82be516"]]),Ji={class:"movie-info"},ea={class:"content"},ta={key:0,class:"content-card"},na={class:"movie-skeleton"},oa={class:"movie-skeleton__player"},sa={key:2,class:"content-card"},la={key:3,class:"content-card"},ia={class:"content-header"},aa=["src"],ra={class:"content-title"},ua={key:0,class:"ratings-links"},ca={key:1},da=["href","title"],va={key:2},ma=["href","title"],fa={key:3},pa=["href","title"],ga={key:4},ya=["href","title"],ha={key:5},ba=["href"],ka=["title"],wa={key:0,class:"fa-regular fa-face-grin-wink"},Ca={key:1,class:"fas fa-spinner fa-spin"},_a=["title"],Ea={key:1,class:"mobile-list-dropdown"},Sa={class:"mobile-list-content"},Ma=["content"],Ia=["content"],xa={class:"additional-info"},La={class:"info-content"},Ta={key:0,class:"movie-poster-container desktop-only"},Ra=["href"],Aa=["src"],Ba={class:"details-container"},Pa={class:"info-list"},Na={key:0},Oa={key:1},$a={key:2},Fa={key:3},Ua={key:4},ja={key:5},Da={key:6},Ha={key:7},qa={key:8},Va={key:9,class:"rating-boxes"},za={key:0,class:"rating-box mpaa"},Wa={key:1,class:"rating-box age"},Ka={class:"content-info"},Ga={key:0,class:"content-description-text"},Ya={key:3,class:"comments-section"},Za={key:4,class:"staff-section"},Xa={class:"staff-categories"},Qa={key:0,class:"staff-category"},Ja={class:"staff-list"},er=["href","title"],tr=["src","alt"],nr={class:"staff-name"},or={key:0,class:"staff-role"},sr=["href","title"],lr={key:1,class:"staff-category"},ir={class:"staff-names-container"},ar={class:"staff-names-list"},rr=["href"],ur=["href","title"],cr={key:2,class:"staff-category"},dr={class:"staff-names-container"},vr={class:"staff-names-list"},mr=["href"],fr=["href","title"],pr={key:5,class:"yt-video-container"},gr={key:6,class:"related-movies"},yr=["title"],hr={key:7,class:"related-movies"},br=["title"],kr={key:0,class:"nudity-info-popup"},wr={class:"nudity-info-content"},Cr={key:0,class:"nudity-info-loading"},_r={key:1},Er={class:"nudity-info-actions"},Sr=["href"],Mr={key:1,class:"nudity-info-popup"},Ir={class:"nudity-info-content"},xr={class:"timings-text"},Lr={key:0,class:"timing-entries"},Tr={class:"timing-content"},Rr={class:"timing-header-row",style:{display:"flex","align-items":"center",gap:"8px"}},Ar={key:0,class:"pending-badge"},Br={key:1,class:"clean-text-badge"},Pr={key:0,class:"timing-actions-row",style:{display:"flex","align-items":"center",gap:"8px","margin-top":"8px"}},Nr=["onClick"],Or=["onClick"],$r=["onClick"],Fr=["onClick"],Ur=["onClick"],jr={class:"timing-text"},Dr={class:"timing-author"},Hr={key:1,style:{color:"#fff","font-size":"13px",margin:"4px 0 0 0"}},qr={key:0},Vr={key:1},zr={key:1},Wr={key:0,class:"general-parser-result",style:{"margin-top":"15px",padding:"15px",background:"rgba(255, 255, 255, 0.05)","border-radius":"8px"}},Kr={style:{margin:"0 0 10px 0",color:"#fff"}},Gr={style:{color:"#fff","font-size":"13px"}},Yr={key:0},Zr={key:1},Xr={key:1,class:"overlay-parser-result",style:{"margin-top":"15px",padding:"15px",background:"rgba(255, 255, 255, 0.05)","border-radius":"8px"}},Qr={style:{margin:"0 0 10px 0",color:"#fff"}},Jr={style:{color:"#fff","font-size":"13px"}},eu={key:0},tu={key:1},nu={class:"nudity-info-actions"},ou={key:2,class:"timing-modal"},su={class:"timing-modal-content"},lu={class:"timing-modal-header"},iu={class:"timing-submission-form"},au={key:0,class:"timing-preview"},ru={class:"timing-preview-content"},uu={class:"timing-preview-range"},cu={class:"timing-preview-duration"},du={class:"timing-form-actions"},vu=["disabled"],mu={key:0,class:"fas fa-spinner fa-spin"},fu={key:1},pu={class:"modal-header"},gu={class:"modal-header-controls"},yu={class:"modal-body"},hu=["disabled"],bu={key:0,class:"fas fa-spinner fa-spin"},ku={key:1,class:"fas fa-list"},wu={class:"top-submitters-list"},Cu={class:"submitter-info"},_u={class:"submitter-name"},Eu=["href"],Su={class:"submitter-count"},Mu={class:"submitter-contribution"},Iu={class:"modal-header"},xu={class:"modal-body"},Lu={key:0,class:"timing-filters"},Tu={key:1,class:"loading-spinner"},Ru={key:2,class:"no-timings"},Au={key:3,class:"no-timings"},Bu={key:4,class:"all-timings-list"},Pu={class:"timing-header"},Nu={class:"timing-meta"},Ou={class:"timing-author"},$u={class:"timing-date"},Fu={class:"timing-movie-info"},Uu={key:0,class:"admin-controls"},ju=["onClick","disabled"],Du={key:0,class:"fas fa-spinner fa-spin"},Hu={key:1,class:"fas fa-check"},qu=["onClick","disabled"],Vu={key:0,class:"fas fa-spinner fa-spin"},zu={key:1,class:"fas fa-times"},Wu=["onClick","disabled"],Ku={key:0,class:"fas fa-spinner fa-spin"},Gu={key:1,class:"fas fa-eye-slash"},Yu={class:"timing-content"},Zu={class:"timing-text"},Xu={key:5,class:"timing-modal obs-modal"},Qu={class:"timing-modal-content obs-modal-content"},Ju={class:"timing-modal-header"},ec={class:"obs-settings-form"},tc={class:"obs-setting-group"},nc={class:"obs-checkbox-label"},oc={key:0,class:"obs-connection-settings"},sc={class:"obs-setting-group"},lc={class:"obs-setting-group"},ic={class:"obs-setting-group"},ac={key:0,class:"obs-setting-group"},rc={key:0,class:"obs-warning"},uc={key:1,class:"obs-filter-selection"},cc=["value"],dc={key:0,class:"selected-filter-info"},vc={class:"filter-details"},mc={class:"obs-info"},fc={class:"obs-setting-group"},pc={class:"obs-checkbox-label"},gc={class:"obs-actions"},yc=["disabled"],hc={key:0,class:"fas fa-spinner fa-spin"},bc={key:1,class:"fas fa-plug"},kc=["disabled"],wc=["disabled"],Cc={__name:"MovieInfo",setup(d){const n=v(!0),r=cn(),s=Un(),b=go(),y=lo(),f=Jn(),w=dn(),g=v(f.params.kp_id),E=v(""),k=v(null),l=v(null),S=yo(),A=Ro(),p=v(null),x=N(()=>A.areTrailersActive),O=v(null),B=v(!1),L=v(!1),F=v(10),R=v(null),ne=v(!1),J=v(null),$=v(!1),T=v(void 0),qe=v(null),pe=v(new Set),re=v(new Set),nt=v(!1),H=v(!1),be=N(()=>{var o;return((o=l.value)==null?void 0:o.nudity_timings.length)>0}),ue=N(()=>{var o;return((o=l.value)==null?void 0:o.nudity_timings.length)>0&&r.isStreamerMode&&!r.isMobile}),ae=N(()=>{var o,e,u,C,_,j,P,q,se,ee;return((e=(o=l.value)==null?void 0:o.lists)==null?void 0:e.isFavorite)||((C=(u=l.value)==null?void 0:u.lists)==null?void 0:C.isWatching)||((j=(_=l.value)==null?void 0:_.lists)==null?void 0:j.isLater)||((q=(P=l.value)==null?void 0:P.lists)==null?void 0:q.isCompleted)||((ee=(se=l.value)==null?void 0:se.lists)==null?void 0:ee.isAbandoned)}),Ae=N(()=>r.isCommentsEnabled),gt=()=>{if(l.value){const o=l.value.name_ru||l.value.name_en||l.value.name_original||"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å–º–µ";document.title=o}},ot=o=>o?o.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",we=o=>(o||[]).map(e=>({kp_id:e.film_id,poster:e.poster_url_preview||e.poster_url,title:e.name_ru||e.name_en||e.name_original})),Se=o=>{if(typeof o!="number")return;const e=Math.floor(o/60),u=o%60;return"".concat(e," —á. ").concat(u," –º–∏–Ω.")},Me=v(!1),Xe=v({top:"0px",left:"0px"}),Qe=o=>{Me.value=!0,Xe.value={top:"".concat(o.pageY+10,"px"),left:"".concat(o.pageX-70,"px")}},je=async()=>{try{const o=[l.value.name_ru||l.value.name_en||l.value.name_original,...l.value.year?[l.value.year]:[],...l.value.film_length?[Se(l.value.film_length)]:[]];await navigator.clipboard.writeText(o.join(", ")),p.value.showNotification("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ")}catch(o){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",o)}},Z=async(o=!0)=>{var e,u,C,_,j,P,q,se;try{let ee;if(g.value.startsWith("shiki")?ee=await bo(g.value):ee=await ko(g.value,s.token),Array.isArray(ee)&&ee.length===0)throw new Error("–î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–∏—Å–∫.");l.value=ee,g.value.startsWith("shiki")?l.value={...l.value,title:l.value.name_ru||l.value.name_en,name_original:l.value.name_en,short_description:l.value.slogan}:l.value={...l.value,title:l.value.name_ru||l.value.name_en||l.value.name_original,kinopoisk_id:g.value},S.setHeaderContent({text:l.value.title,imageUrl:l.value.logo_url}),gt();const te={kp_id:g.value,title:((e=l.value)==null?void 0:e.name_ru)||((u=l.value)==null?void 0:u.name_en)||((C=l.value)==null?void 0:C.name_original),poster:((_=l.value)==null?void 0:_.poster_url)||((j=l.value)==null?void 0:j.cover_url)||((P=l.value)==null?void 0:P.screenshots[0]),year:(q=l.value)==null?void 0:q.year,type:(se=l.value)==null?void 0:se.type};if(g.value.startsWith("shiki"))if(l.value.screenshots&&l.value.screenshots.length>0){const de=Math.floor(Math.random()*l.value.screenshots.length),_e=l.value.screenshots[de];b.updateMoviePoster(_e)}else te.poster&&b.updateMoviePoster(te.poster);else te.poster&&b.updateMoviePoster(te.poster);if(N(()=>r.isHistoryAllowed).value&&te.kp_id&&te.title&&o)if(s.token)try{await $n(te.kp_id,W.HISTORY)}catch(de){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é:",de)}else r.addToHistory({...te})}catch(ee){const{message:te,code:K}=Ct(ee);E.value=te,k.value=K,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–ª—å–º–∞—Ö:",ee)}},fe=N(()=>{var o;return(o=l.value)==null?void 0:o.videos}),$e=N(()=>{var o;return we((o=l.value)==null?void 0:o.sequels_and_prequels)}),Je=N(()=>{var o;return we((o=l.value)==null?void 0:o.similars)}),rt=()=>{var C;const o=((C=document.querySelector(".related-movies"))==null?void 0:C.clientWidth)||0,u=Math.floor(o/160)||10;F.value=Math.max(1,u)},V=()=>{rt()},st=o=>{if(o.altKey&&o.keyCode===84&&document.querySelector(".player-container")){const u=document.querySelector(".theater-mode-btn");u&&u.click()}},Ve=o=>{o.button===1&&(o.preventDefault(),ce(o))},ce=async o=>{if(R.value!==null){R.value=null,ne.value=!1;return}T.value=void 0,J.value=o.currentTarget,R.value="",ne.value=!0;try{const e=await wo(l.value.imdb_id);R.value=e.nudity_info}catch(e){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö:",e),R.value="–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ Parents Guide –Ω–∞ IMDb –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏."}finally{ne.value=!1}},Fe=o=>{var e,u;if(R.value=null,T.value!==void 0){T.value=void 0;return}qe.value=o.currentTarget,T.value=((e=l.value)==null?void 0:e.nudity_timings)===null?"":((u=l.value)==null?void 0:u.nudity_timings)||""},Mt=o=>{var u,C,_,j,P,q,se,ee,te,K,de,_e,Y;return(Y={[W.FAVORITE]:((C=(u=l.value)==null?void 0:u.lists)==null?void 0:C.isFavorite)||!1,[W.HISTORY]:((j=(_=l.value)==null?void 0:_.lists)==null?void 0:j.isHistory)||!1,[W.LATER]:((q=(P=l.value)==null?void 0:P.lists)==null?void 0:q.isLater)||!1,[W.COMPLETED]:((ee=(se=l.value)==null?void 0:se.lists)==null?void 0:ee.isCompleted)||!1,[W.ABANDONED]:((K=(te=l.value)==null?void 0:te.lists)==null?void 0:K.isAbandoned)||!1,[W.WATCHING]:((_e=(de=l.value)==null?void 0:de.lists)==null?void 0:_e.isWatching)||!1}[o])!=null?Y:!1},I=async o=>{if(!s.token){p.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:()=>w.push("/login")});return}try{const e={[W.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[W.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[W.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[W.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[W.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[W.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};Mt(o)?(await to(g.value,o),p.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(e[o]))):(await $n(g.value,o),p.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(e[o]))),await Z(!1),$.value=!1}catch(e){const{message:u,code:C}=Ct(e);p.value.showNotification("".concat(u," ").concat(C))}},z=o=>{const e=document.querySelector(".mobile-list-dropdown");e&&!e.contains(o.target)&&($.value=!1)},ze=o=>{const e=document.querySelector(".nudity-info-popup");e&&!e.contains(o.target)&&J.value&&!J.value.contains(o.target)&&(R.value=null)},ke=o=>{const e=document.querySelector(".nudity-info-popup");e&&!e.contains(o.target)&&qe.value&&!qe.value.contains(o.target)&&(T.value=void 0)};Ut(async()=>{await Z(),n.value=!1,document.addEventListener("keydown",st),window.addEventListener("resize",V),setTimeout(rt,100),document.addEventListener("click",z),document.addEventListener("click",ze,!0),document.addEventListener("click",ke,!0),window.selectedNudityTimings=Array.from(pe.value),window.overlayNudityTimings=Array.from(re.value)}),On(async()=>{S.clearHeaderContent(),document.removeEventListener("keydown",st),window.removeEventListener("resize",V),document.removeEventListener("click",z),document.removeEventListener("click",ze,!0),document.removeEventListener("click",ke,!0),delete window.selectedNudityTimings,delete window.overlayNudityTimings}),He(()=>f.params.kp_id,async o=>{o&&o!==g.value&&(S.clearHeaderContent(),g.value=o,O.value=null,await Z(),n.value=!1)},{immediate:!0}),He(l,()=>{gt()},{deep:!0}),He(R,o=>{o?document.addEventListener("click",ze,!0):document.removeEventListener("click",ze,!0)},{deep:!0}),He(T,o=>{o?document.addEventListener("click",ke,!0):document.removeEventListener("click",ke,!0)},{deep:!0}),He(pe,()=>{window.selectedNudityTimings=Array.from(pe.value)},{deep:!0}),He(re,()=>{window.overlayNudityTimings=Array.from(re.value)},{deep:!0}),Ut(()=>{window.selectedNudityTimings=Array.from(pe.value),window.overlayNudityTimings=Array.from(re.value);const o=setInterval(()=>{if(window.obsSources&&Array.isArray(window.obsSources)&&(mn.value=window.obsSources),window.getOBSFiltersInfo){const e=window.getOBSFiltersInfo();e&&Array.isArray(e)&&y.updateObsSettings({filtersFound:e})}},1e3);On(()=>{clearInterval(o)})}),On(()=>{delete window.selectedNudityTimings,delete window.overlayNudityTimings});const Be=o=>{var e,u;return((u=(e=l.value)==null?void 0:e.staff)==null?void 0:u.filter(C=>C.profession_key===o))||[]},jt=async()=>{try{await navigator.clipboard.writeText(R.value),p.value.showNotification("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω")}catch(o){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",o),p.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞")}finally{R.value=null}},Rt=async()=>{if(T.value.length!==0)try{const o=T.value.map(e=>"".concat(e.timing_text," (by @").concat(e.username,")")).join("\n").concat("\nReYohoho\n");await navigator.clipboard.writeText(o),p.value.showNotification("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω")}catch(o){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",o),p.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞")}finally{T.value=void 0}},ut=()=>{const o=encodeURIComponent(R.value);window.open("https://translate.google.com/?sl=en&tl=ru&text=".concat(o),"_blank"),R.value=null},ct=N({get:()=>r.submitterUsername,set:o=>r.setSubmitterUsername(o)}),dt=v(""),U=v(!1),oe=N(()=>{if(!dt.value.trim())return[];try{return Yt(dt.value,!0)||[]}catch(o){return console.error("Error parsing timing text:",o),[]}}),Ie=N(()=>ct.value.trim()&&dt.value.trim()),Pe=async()=>{if(!(!Ie.value||U.value))try{U.value=!0,await _o(g.value,ct.value.trim(),dt.value),p.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é, —Å–ø–∞—Å–∏–±–æ!"),dt.value="",Oe.value=!1}catch(o){const{message:e}=Ct(o);p.value.showNotification(e,5e3)}finally{U.value=!1}},he=async()=>{try{const{submissions:o}=await Co();De.value=o,yt.value=!0}catch(o){const{message:e}=Ct(o);p.value.showNotification(e)}},Oe=v(!1),De=v([]),yt=v(!1),Dt=v(!1),Ge=v([]),It=v(!1),et=v(!1),lt=v(null),ht=v(!1),vt=v(!1),it=v("all"),At=v(!1),Bt=v(!1),Pt=N({get:()=>y.obsSettings.enabled,set:o=>y.updateObsSettings({enabled:o})}),Ht=N({get:()=>y.obsSettings.host,set:o=>y.updateObsSettings({host:o})}),vn=N({get:()=>y.obsSettings.port,set:o=>y.updateObsSettings({port:o})}),bt=N({get:()=>y.obsSettings.password,set:o=>y.updateObsSettings({password:o})}),at=N(()=>y.obsSettings.connected),mn=v([]),qt=N(()=>y.obsSettings.filtersFound),xt=N({get:()=>y.obsSettings.selectedFilterId,set:o=>y.setObsSelectedFilter(o)}),Nt=N(()=>xt.value?qt.value.find(o=>o.id===xt.value):null),Vt=N({get:()=>y.obsSettings.showObsInOverlay,set:o=>y.updateObsSettings({showObsInOverlay:o})}),fn=async o=>{if(!et.value)try{et.value=!0,lt.value=o,ht.value=!0,vt.value=!1,await So(o);const e=Ge.value.find(u=>u.id===o);e&&(e.status="approved"),p.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ–¥–æ–±—Ä–µ–Ω")}catch(e){const{message:u}=Ct(e);p.value.showNotification("–û—à–∏–±–∫–∞: ".concat(u))}finally{et.value=!1,lt.value=null,ht.value=!1,vt.value=!1}},_n=async o=>{if(!et.value)try{et.value=!0,lt.value=o,ht.value=!1,vt.value=!1,await Mo(o);const e=Ge.value.find(u=>u.id===o);e&&(e.status="rejected"),p.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ—Ç–∫–ª–æ–Ω–µ–Ω")}catch(e){const{message:u}=Ct(e);p.value.showNotification("–û—à–∏–±–∫–∞: ".concat(u))}finally{et.value=!1,lt.value=null,ht.value=!1,vt.value=!1}},En=async o=>{if(!et.value)try{et.value=!0,lt.value=o,ht.value=!1,vt.value=!0,await Io(o);const e=Ge.value.find(u=>u.id===o);e&&(e.status="clean_text"),p.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ—Ç–º–µ—á–µ–Ω –∫–∞–∫ clean_text")}catch(e){const{message:u}=Ct(e);p.value.showNotification("–û—à–∏–±–∫–∞: ".concat(u))}finally{et.value=!1,lt.value=null,ht.value=!1,vt.value=!1}},pn=async()=>{if(!It.value)try{It.value=!0,Dt.value=!0;const{timings:o}=await Eo();Ge.value=o}catch(o){const{message:e}=Ct(o);p.value.showNotification(e),Dt.value=!1}finally{It.value=!1}},Sn=o=>({pending:"–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏",approved:"–û–¥–æ–±—Ä–µ–Ω–æ",rejected:"–û—Ç–∫–ª–æ–Ω–µ–Ω–æ",clean_text:"–ù–µ –º–æ–¥–µ—Ä–∏—Ä—É–µ—Ç—Å—è"})[o]||o,Mn=(o,e)=>{const u=[2,0,1,1,1,2];return e[o%100>4&&o%100<20?2:u[Math.min(o%10,5)]]},zt=o=>{if(!De.value.length)return 0;const e=Math.max(...De.value.map(u=>u.approved_submissions_count));return o/e*100},gn=N(()=>it.value==="all"?Ge.value:Ge.value.filter(o=>o.status===it.value)),yn=o=>{pe.value.has(o)?pe.value.delete(o):pe.value.add(o)},Ce=v({});function In(o){if(Ce.value[o.id])Ce.value={...Ce.value,[o.id]:!1};else{const e=Yt(o.timing_text,!0);Ce.value={...Ce.value,[o.id]:e}}}const Lt=N(()=>!!window.electronAPI);function xn(o){if(!Lt.value){p.value?p.value.showNotification("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"):alert("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏");return}yn(o)}function Ln(o){if(!Lt.value){p.value?p.value.showNotification("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"):alert("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏");return}yn(o)}function Tn(o){if(!Lt.value){p.value?p.value.showNotification("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"):alert("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏");return}Wt(o)}function hn(o){if(!Lt.value){p.value?p.value.showNotification("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"):alert("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏");return}Wt(o)}const Wt=o=>{re.value.has(o)?re.value.delete(o):re.value.add(o)};function bn(){nt.value=!nt.value}function Rn(){H.value=!H.value}function Zt(){const o=[];if(T.value&&Array.isArray(T.value)){for(const e of T.value)if(pe.value.has(e.id)){const u=Yt(e.timing_text,!0);u&&u.length>0&&o.push(...u)}}return o}function Xt(){const o=[];if(T.value&&Array.isArray(T.value)&&T.value.length>0){for(const e of T.value)if(re.value.has(e.id)){const u=Yt(e.timing_text,!0);u&&u.length>0&&o.push(...u)}}return o}const An=()=>{Pt.value&&mt()},mt=async()=>{var o,e,u;if(!Bt.value){Bt.value=!0;try{window.connectToOBS?(await window.connectToOBS(),setTimeout(()=>{window.obsSources&&(mn.value=window.obsSources)},1e3),(o=p.value)==null||o.showNotification("–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ OBS...")):(e=p.value)==null||e.showNotification("–ü–ª–µ–µ—Ä –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω")}catch(C){console.error("Error connecting to OBS:",C),(u=p.value)==null||u.showNotification("–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ OBS")}finally{Bt.value=!1}}},kn=()=>{var o,e;if(!xt.value){(o=p.value)==null||o.showNotification("–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∏–ª—å—Ç—Ä –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è");return}window.testOBSBlur?window.testOBSBlur(xt.value):(e=p.value)==null||e.showNotification("OBS —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã")},kt=()=>{var o,e;window.refreshOBSFilters?(window.refreshOBSFilters(),(o=p.value)==null||o.showNotification("–ü–æ–∏—Å–∫ —Ñ–∏–ª—å—Ç—Ä–æ–≤...")):(e=p.value)==null||e.showNotification("OBS —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã")},Bn=()=>{var o,e;xt.value&&((e=p.value)==null||e.showNotification("–í—ã–±—Ä–∞–Ω —Ñ–∏–ª—å—Ç—Ä: ".concat((o=Nt.value)==null?void 0:o.sourceName)))};return(o,e)=>{var C,_,j,P,q,se,ee,te,K,de,_e,Y,ie,xe,Ne,Le,le,ge;const u=Ze("router-link");return i(),a(ve,null,[t("div",Ji,[t("div",ea,[(n.value||!l.value)&&!E.value?(i(),a("div",ta,[t("div",na,[e[35]||(e[35]=un('<div class="movie-skeleton__header" data-v-793cb6b0><div class="movie-skeleton__title" data-v-793cb6b0></div></div><div class="movie-skeleton__ratings" data-v-793cb6b0><div class="movie-skeleton__rating-item" data-v-793cb6b0></div><div class="movie-skeleton__rating-item" data-v-793cb6b0></div><div class="movie-skeleton__rating-item" data-v-793cb6b0></div></div>',2)),t("div",oa,[Re(so)]),e[36]||(e[36]=un('<div class="movie-skeleton__additional-info" data-v-793cb6b0><div class="movie-skeleton__section-title" data-v-793cb6b0></div><div class="movie-skeleton__info-list" data-v-793cb6b0><div class="movie-skeleton__info-item" data-v-793cb6b0></div><div class="movie-skeleton__info-item" data-v-793cb6b0></div><div class="movie-skeleton__info-item" data-v-793cb6b0></div><div class="movie-skeleton__info-item" data-v-793cb6b0></div><div class="movie-skeleton__info-item" data-v-793cb6b0></div></div></div><div class="movie-skeleton__description" data-v-793cb6b0><div class="movie-skeleton__description-line" data-v-793cb6b0></div><div class="movie-skeleton__description-line" data-v-793cb6b0></div><div class="movie-skeleton__description-line" data-v-793cb6b0></div><div class="movie-skeleton__description-line" data-v-793cb6b0></div></div>',2))])])):h("",!0),E.value?(i(),_t(eo,{key:1,message:E.value,code:k.value},null,8,["message","code"])):h("",!0),E.value?(i(),a("div",sa,[(i(),_t(Qn,{key:g.value,"kp-id":g.value,"movie-info":l.value,"onUpdate:movieInfo":Z},null,8,["kp-id","movie-info"]))])):h("",!0),l.value&&!n.value?(i(),a("div",la,[t("div",ia,[l.value.logo_url?(i(),a("div",{key:0,class:"content-logo",onMousemove:Qe,onMouseleave:e[0]||(e[0]=c=>Me.value=!1),onClick:je},[t("img",{src:l.value.logo_url,alt:"–õ–æ–≥–æ—Ç–∏–ø —Ñ–∏–ª—å–º–∞",class:"content-logo"},null,8,aa)],32)):(i(),a("div",{key:1,onMousemove:Qe,onMouseleave:e[1]||(e[1]=c=>Me.value=!1),onClick:je},[t("h1",ra,m(l.value.title),1)],32)),Q(t("div",{class:"title-copy-tooltip",style:rn(Xe.value)}," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ",4),[[Ee,Me.value]])]),l.value.kinopoisk_id||l.value.title||l.value.imdb_id||l.value.rating_imdb||l.value.shikimori_id?(i(),a("div",ua,[l.value.kinopoisk_id?(i(),_t(ll,{key:l.value.kinopoisk_id,"kp-id":l.value.kinopoisk_id,"show-dash":!0},null,8,["kp-id"])):h("",!0),l.value.kinopoisk_id?(i(),a("div",ca,[t("a",{href:"https://www.kinopoisk.ru/film/".concat(l.value.kinopoisk_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:l.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(ot(l.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[e[37]||(e[37]=t("img",{src:Yn,alt:"–ö–ü",class:"rating-logo"},null,-1)),t("span",{class:M(["rating-value",G(an)(l.value.rating_kinopoisk)])},m(l.value.rating_kinopoisk?l.value.rating_kinopoisk:"‚Äî"),3),e[38]||(e[38]=t("img",{src:ln,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,da)])):h("",!0),!l.value.kinopoisk_id&&l.value.title?(i(),a("div",va,[t("a",{href:"https://www.kinopoisk.ru/index.php?kp_query=".concat(encodeURIComponent(l.value.title+(l.value.year?" "+l.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:l.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(ot(l.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[e[39]||(e[39]=t("img",{src:Yn,alt:"–ö–ü",class:"rating-logo"},null,-1)),t("span",{class:M(["rating-value",G(an)(l.value.rating_kinopoisk)])},m(l.value.rating_kinopoisk?l.value.rating_kinopoisk:"‚Äî"),3),e[40]||(e[40]=t("img",{src:ln,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,ma)])):h("",!0),l.value.imdb_id?(i(),a("div",fa,[t("a",{href:"https://www.imdb.com/title/".concat(l.value.imdb_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:l.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(ot(l.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[e[41]||(e[41]=t("img",{src:Zn,alt:"IMDb",class:"rating-logo"},null,-1)),t("span",{class:M(["rating-value",G(an)(l.value.rating_imdb)])},m(l.value.rating_imdb?l.value.rating_imdb:"‚Äî"),3),e[42]||(e[42]=t("img",{src:ln,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,pa)])):h("",!0),!l.value.imdb_id&&l.value.title?(i(),a("div",ga,[t("a",{href:"https://www.imdb.com/find/?q=".concat(encodeURIComponent(l.value.title+(l.value.year?" "+l.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:l.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(ot(l.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[e[43]||(e[43]=t("img",{src:Zn,alt:"IMDb",class:"rating-logo"},null,-1)),t("span",{class:M(["rating-value",G(an)(l.value.rating_imdb)])},m(l.value.rating_imdb?l.value.rating_imdb:"‚Äî"),3),e[44]||(e[44]=t("img",{src:ln,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,ya)])):h("",!0),l.value.shikimori_id?(i(),a("div",ha,[t("a",{href:"https://shikimori.one/animes/".concat(l.value.shikimori_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},e[45]||(e[45]=[t("img",{src:Ao,alt:"Shiki",class:"rating-logo"},null,-1),t("img",{src:ln,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,ba)])):h("",!0),l.value.imdb_id?(i(),a("button",{key:6,class:"nudity-info-btn parents-guide-btn",onClick:e[2]||(e[2]=c=>ce(c)),onMousedown:e[3]||(e[3]=c=>Ve(c)),title:R.value?"–°–∫—Ä—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é":"–ü–æ–∫–∞–∑–∞—Ç—å Parents Guide –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ü–µ–Ω–∞—Ö"},[e[46]||(e[46]=t("span",{class:"desktop-text"},"Parents Guide",-1)),e[47]||(e[47]=t("span",{class:"mobile-text"},"PG",-1)),ne.value?(i(),a("i",Ca)):(i(),a("i",wa))],40,ka)):h("",!0),t("button",{class:"nudity-info-btn",onClick:e[4]||(e[4]=c=>Fe(c)),title:T.value!==void 0?"–°–∫—Ä—ã—Ç—å —Ç–∞–π–º–∏–Ω–≥–∏":"–ü–æ–∫–∞–∑–∞—Ç—å —Ç–∞–π–º–∏–Ω–≥–∏ —Å—Ü–µ–Ω 18+(–¥–ª—è —Ç–≤–∏—á–∞, –º–∏–≥–∞–Ω–∏–µ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö)"},[t("i",{class:M(["fa-regular fa-clock",{"text-red":be.value,"text-red-blink":ue.value}])},null,2)],8,_a)])):h("",!0),(i(),_t(Qn,{key:g.value,"kp-id":g.value,"movie-info":l.value,"onUpdate:movieInfo":Z},null,8,["kp-id","movie-info"])),G(r).isMobile?(i(),a("div",Ea,[t("button",{class:M(["mobile-list-toggle",{}]),onClick:e[5]||(e[5]=c=>$.value=!$.value)},[t("span",{class:M(["material-icons",{active:ae.value}])},m(ae.value?"bookmark_added":"bookmark_border"),3),e[48]||(e[48]=t("span",{class:"button-label"},"–î–æ–±–∞–≤–∏—Ç—å –≤ —Å–ø–∏—Å–æ–∫",-1)),t("span",{class:M(["material-icons dropdown-arrow",{expanded:$.value}])},"expand_more",2)]),Q(t("div",Sa,[t("button",{class:M(["mobile-list-btn",{}]),onClick:e[6]||(e[6]=c=>I(G(W).FAVORITE))},[t("span",{class:M(["material-icons",{active:(_=(C=l.value)==null?void 0:C.lists)==null?void 0:_.isFavorite}])},m((P=(j=l.value)==null?void 0:j.lists)!=null&&P.isFavorite?"favorite":"favorite_border"),3),e[49]||(e[49]=t("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))]),t("button",{class:M(["mobile-list-btn",{}]),onClick:e[7]||(e[7]=c=>I(G(W).WATCHING))},[t("span",{class:M(["material-icons",{active:(se=(q=l.value)==null?void 0:q.lists)==null?void 0:se.isWatching}])},m((te=(ee=l.value)==null?void 0:ee.lists)!=null&&te.isWatching?"visibility":"visibility_off"),3),e[50]||(e[50]=t("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))]),t("button",{class:M(["mobile-list-btn",{}]),onClick:e[8]||(e[8]=c=>I(G(W).LATER))},[t("span",{class:M(["material-icons",{active:(de=(K=l.value)==null?void 0:K.lists)==null?void 0:de.isLater}])},"watch_later",2),e[51]||(e[51]=t("span",{class:"button-label"},"–ü–æ–∑–∂–µ",-1))]),t("button",{class:M(["mobile-list-btn",{}]),onClick:e[9]||(e[9]=c=>I(G(W).COMPLETED))},[t("span",{class:M(["material-icons",{active:(Y=(_e=l.value)==null?void 0:_e.lists)==null?void 0:Y.isCompleted}])},m((xe=(ie=l.value)==null?void 0:ie.lists)!=null&&xe.isCompleted?"check_circle":"check_circle_outline"),3),e[52]||(e[52]=t("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))]),t("button",{class:M(["mobile-list-btn",{}]),onClick:e[10]||(e[10]=c=>I(G(W).ABANDONED))},[t("span",{class:M(["material-icons",{active:(Le=(Ne=l.value)==null?void 0:Ne.lists)==null?void 0:Le.isAbandoned}])},"not_interested",2),e[53]||(e[53]=t("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))])],512),[[Ee,$.value]])])):h("",!0),t("meta",{name:"title-and-year",content:l.value.type==="FILM"&&l.value.year?"".concat(l.value.title," (").concat(l.value.year,")"):l.value.title},null,8,Ma),l.value.name_original?(i(),a("meta",{key:2,name:"original-title",content:l.value.name_original},null,8,Ia)):h("",!0),t("div",xa,[e[64]||(e[64]=t("h2",{class:"additional-info-title"},"–ü–æ–¥—Ä–æ–±–Ω–µ–µ",-1)),t("div",La,[l.value.poster_url?(i(),a("div",Ta,[t("a",{href:l.value.poster_url,target:"_blank",rel:"noopener noreferrer"},[t("img",{src:l.value.poster_url,alt:"–ü–æ—Å—Ç–µ—Ä —Ñ–∏–ª—å–º–∞",class:"movie-poster"},null,8,Aa)],8,Ra)])):h("",!0),t("div",Ba,[t("ul",Pa,[l.value.type&&G(Kn)[l.value.type]?(i(),a("li",Na,[e[54]||(e[54]=t("strong",null,"–¢–∏–ø:",-1)),X(" "+m(G(Kn)[l.value.type]),1)])):h("",!0),l.value.year?(i(),a("li",Oa,[e[55]||(e[55]=t("strong",null,"–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞:",-1)),X(" "+m(l.value.year),1)])):h("",!0),l.value.title?(i(),a("li",$a,[e[56]||(e[56]=t("strong",null,"–ù–∞–∑–≤–∞–Ω–∏–µ:",-1)),X(" "+m(l.value.title),1)])):h("",!0),l.value.name_original?(i(),a("li",Fa,[e[57]||(e[57]=t("strong",null,"–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:",-1)),X(" "+m(l.value.name_original),1)])):h("",!0),l.value.slogan?(i(),a("li",Ua,[e[58]||(e[58]=t("strong",null,"–°–ª–æ–≥–∞–Ω:",-1)),X(" "+m(l.value.slogan),1)])):h("",!0),l.value.production_companies?(i(),a("li",ja,[e[59]||(e[59]=t("strong",null,"–ü—Ä–æ–¥–∞–∫—à–Ω:",-1)),X(" "+m(l.value.production_companies),1)])):h("",!0),(le=l.value.countries)!=null&&le.length?(i(),a("li",Da,[e[60]||(e[60]=t("strong",null,"–°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞:",-1)),X(" "+m(l.value.countries.map(c=>c.country).join(", ")),1)])):h("",!0),(ge=l.value.genres)!=null&&ge.length?(i(),a("li",Ha,[e[61]||(e[61]=t("strong",null,"–ñ–∞–Ω—Ä—ã:",-1)),X(" "+m(l.value.genres.map(c=>c.genre).join(", ")),1)])):h("",!0),l.value.film_length?(i(),a("li",qa,[e[62]||(e[62]=t("strong",null,"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:",-1)),X(" "+m(Se(l.value.film_length)),1)])):h("",!0),l.value.rating_mpaa||l.value.rating_age_limits?(i(),a("li",Va,[l.value.rating_mpaa?(i(),a("div",za,[e[63]||(e[63]=t("strong",null,"MPAA",-1)),t("span",null,m(l.value.rating_mpaa.toUpperCase()),1)])):h("",!0),l.value.rating_age_limits?(i(),a("div",Wa,[t("strong",null,m(l.value.rating_age_limits.replace("age",""))+"+",1)])):h("",!0)])):h("",!0)]),t("div",Ka,[l.value.description?(i(),a("p",Ga,m(l.value.description),1)):h("",!0)])])])]),Ae.value?(i(),a("div",Ya,[(i(),_t(Qi,{"movie-id":g.value,key:g.value},null,8,["movie-id"]))])):h("",!0),l.value.staff?(i(),a("div",Za,[t("div",Xa,[Be("ACTOR").length?(i(),a("div",Qa,[e[65]||(e[65]=t("h3",{class:"additional-info-title"},"–ê–∫—Ç—ë—Ä—ã",-1)),t("div",Ja,[(i(!0),a(ve,null,Te(Be("ACTOR").slice(0,12),c=>(i(),a("div",{key:c.staff_id,class:"staff-item"},[t("a",{href:"https://www.kinopoisk.ru/name/".concat(c.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-link",title:c.description||""},[t("img",{src:c.poster_url,alt:c.name_ru,class:"staff-photo"},null,8,tr),t("span",nr,m(c.name_ru||c.name_en),1),c.description?(i(),a("span",or,m(c.description),1)):h("",!0)],8,er)]))),128)),t("a",{class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(g.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(Be("ACTOR").length," –∞–∫—Ç–µ—Ä–æ–≤")}," +"+m(Be("ACTOR").length-12),9,sr)])])):h("",!0),Be("DIRECTOR").length?(i(),a("div",lr,[e[66]||(e[66]=t("h3",{class:"additional-info-title"},"–†–µ–∂–∏—Å—Å—ë—Ä—ã",-1)),t("div",ir,[t("div",ar,[(i(!0),a(ve,null,Te(Be("DIRECTOR").slice(0,5),c=>(i(),a("a",{key:c.staff_id,href:"https://www.kinopoisk.ru/name/".concat(c.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},m(c.name_ru||c.name_en),9,rr))),128)),Be("DIRECTOR").length>5?(i(),a("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(g.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(Be("DIRECTOR").length," —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–≤")}," +"+m(Be("DIRECTOR").length-5),9,ur)):h("",!0)])])])):h("",!0),Be("PRODUCER").length?(i(),a("div",cr,[e[67]||(e[67]=t("h3",{class:"additional-info-title"},"–ü—Ä–æ–¥—é—Å–µ—Ä—ã",-1)),t("div",dr,[t("div",vr,[(i(!0),a(ve,null,Te(Be("PRODUCER").slice(0,5),c=>(i(),a("a",{key:c.staff_id,href:"https://www.kinopoisk.ru/name/".concat(c.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},m(c.name_ru||c.name_en),9,mr))),128)),Be("PRODUCER").length>5?(i(),a("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(g.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(Be("PRODUCER").length," –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤")}," +"+m(Be("PRODUCER").length-5),9,fr)):h("",!0)])])])):h("",!0)])])):h("",!0),fe.value.length&&x.value?(i(),a("div",pr,[Re(Ys,{videos:fe.value,"active-video-index":O.value,onSelect:o.playTrailer},null,8,["videos","active-video-index","onSelect"])])):h("",!0),$e.value.length?(i(),a("div",gr,[e[68]||(e[68]=t("h2",null,"–°–∏–∫–≤–µ–ª—ã –∏ –ø—Ä–∏–∫–≤–µ–ª—ã",-1)),Re(G(Xn),{"movies-list":B.value?$e.value:$e.value.slice(0,F.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),$e.value.length>F.value?(i(),a("a",{key:0,class:"expand-circle-button",onClick:e[11]||(e[11]=c=>B.value=!B.value),title:"".concat(B.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat($e.value.length,")")},m(B.value?"‚àí":"+".concat($e.value.length-F.value)),9,yr)):h("",!0)])):h("",!0),Je.value.length?(i(),a("div",hr,[e[69]||(e[69]=t("h2",null,"–ü–æ—Ö–æ–∂–∏–µ",-1)),Re(G(Xn),{"movies-list":L.value?Je.value:Je.value.slice(0,F.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),Je.value.length>F.value?(i(),a("a",{key:0,class:"expand-circle-button",onClick:e[12]||(e[12]=c=>L.value=!L.value),title:"".concat(L.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(Je.value.length,")")},m(L.value?"‚àí":"+".concat(Je.value.length-F.value)),9,br)):h("",!0)])):h("",!0)])):h("",!0)])]),Re(Cn,{ref_key:"notificationRef",ref:p},null,512),R.value!==null?(i(),a("div",kr,[t("div",wr,[ne.value?(i(),a("div",Cr,e[70]||(e[70]=[t("i",{class:"fas fa-spinner fa-spin"},null,-1),t("span",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏...",-1)]))):(i(),a("div",_r,m(R.value),1))]),t("div",Er,[t("a",{href:"https://www.imdb.com/title/".concat(l.value.imdb_id,"/parentalguide"),target:"_blank",rel:"noopener noreferrer",class:"nudity-info-button"},e[71]||(e[71]=[t("i",{class:"fas fa-external-link-alt"},null,-1),t("span",null,"Parents Guide",-1)]),8,Sr),t("button",{class:"nudity-info-button",onClick:jt},e[72]||(e[72]=[t("i",{class:"fas fa-copy"},null,-1),t("span",null,"Copy",-1)])),t("button",{class:"nudity-info-button",onClick:ut},e[73]||(e[73]=[t("i",{class:"fas fa-language"},null,-1),t("span",null,"Translate",-1)]))])])):h("",!0),T.value!==void 0?(i(),a("div",Mr,[t("div",Ir,[t("div",{class:"acknowledgment-table"},[e[76]||(e[76]=t("div",{class:"acknowledgment-header"},[t("i",{class:"fa-solid fa-heart"}),t("span",null,"–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏")],-1)),t("div",{class:"acknowledgment-content"},[e[75]||(e[75]=t("div",{class:"acknowledgment-row"},[t("a",{href:"https://www.twitch.tv/tanyabelkova",target:"_blank",rel:"noopener noreferrer",class:"twitch-link"},[t("i",{class:"fa-brands fa-twitch"}),t("span",null,"TanyaBelkova")]),t("span",{class:"acknowledgment-text"},"‚Äî –∑–∞ –æ—Å–Ω–æ–≤—É –±–∞–∑—ã —Ç–∞–π–º–∏–Ω–≥–æ–≤")],-1)),t("div",{class:"acknowledgment-row clickable",onClick:he},e[74]||(e[74]=[t("div",{class:"community-link"},[t("i",{class:"fa-solid fa-users"}),t("span",null,"–°–æ–æ–±—â–µ—Å—Ç–≤–æ")],-1),t("span",{class:"acknowledgment-text"},"‚Äî –∑–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–∏–Ω–≥–æ–≤",-1)]))])]),t("div",{class:M(["timings-content",{"no-border":!T.value}])},[t("div",xr,[T.value.length>0?(i(),a("div",Lr,[(i(!0),a(ve,null,Te(T.value,c=>{var ye;return i(),a("div",{key:c.id,class:M(["timing-entry",{pending:c.status==="pending","clean-text":c.status==="clean_text",selected:pe.value.has(c.id)}])},[t("div",Tr,[t("div",Rr,[c.status==="pending"?(i(),a("div",Ar,"–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏")):h("",!0),c.status==="clean_text"?(i(),a("div",Br," –¢–∞–π–º–∏–Ω–≥–∏ —Ç–∞–∫–æ–≥–æ —Ç–∏–ø–∞ –Ω–µ –º–æ–¥–µ—Ä–∏—Ä—É—é—Ç—Å—è, –¥–ª—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Å–≤–µ—Ä—è–π—Ç–µ—Å—å —Å ParentsGuide ")):h("",!0)]),c.status!=="clean_text"&&((ye=l.value)==null?void 0:ye.type)==="FILM"?(i(),a("div",Pr,[t("button",{class:"nudity-info-button",onClick:We=>In(c)},m(Ce.value[c.id]?"–°–∫—Ä—ã—Ç—å –ø–∞—Ä—Å–µ—Ä":"–ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä—Å–µ—Ä"),9,Nr),pe.value.has(c.id)?(i(),a("button",{key:0,class:"nudity-info-button",onClick:We=>Ln(c.id),title:"–£–¥–∞–ª–∏—Ç—å –∏–∑ –∞–≤—Ç–æ–±–ª—é—Ä–∞"},e[77]||(e[77]=[t("i",{class:"fas fa-minus"},null,-1),t("span",null,"–£–¥–∞–ª–∏—Ç—å –∏–∑ –∞–≤—Ç–æ–±–ª—é—Ä–∞",-1)]),8,Or)):(i(),a("button",{key:1,class:"nudity-info-button",onClick:We=>xn(c.id),title:"–î–æ–±–∞–≤–∏—Ç—å –≤ –∞–≤—Ç–æ–±–ª—é—Ä"},e[78]||(e[78]=[t("i",{class:"fas fa-plus"},null,-1),t("span",null,"–î–æ–±–∞–≤–∏—Ç—å –≤ –∞–≤—Ç–æ–±–ª—é—Ä",-1)]),8,$r)),re.value.has(c.id)?(i(),a("button",{key:2,class:"nudity-info-button overlay-button",onClick:We=>hn(c.id),title:"–£–¥–∞–ª–∏—Ç—å –∏–∑ –æ–≤–µ—Ä–ª–µ—è"},e[79]||(e[79]=[t("i",{class:"fas fa-eye-slash"},null,-1),t("span",null,"–£–¥–∞–ª–∏—Ç—å –∏–∑ –æ–≤–µ—Ä–ª–µ—è",-1)]),8,Fr)):(i(),a("button",{key:3,class:"nudity-info-button overlay-button",onClick:We=>Tn(c.id),title:"–î–æ–±–∞–≤–∏—Ç—å –≤ –æ–≤–µ—Ä–ª–µ–π"},e[80]||(e[80]=[t("i",{class:"fas fa-eye"},null,-1),t("span",null,"–î–æ–±–∞–≤–∏—Ç—å –≤ –æ–≤–µ—Ä–ª–µ–π",-1)]),8,Ur))])):h("",!0),t("div",{class:M(["timing-hover-container",{blurred:c.status==="pending"}])},[t("span",jr,m(c.timing_text),1),e[81]||(e[81]=t("br",null,null,-1)),t("span",Dr,"by "+m(c.username),1)],2),Ce.value[c.id]&&Array.isArray(Ce.value[c.id])?(i(),a("div",Hr,[e[82]||(e[82]=t("b",null,"–ü–∞—Ä—Å–µ—Ä(–∫ —Ç–∞–π–º–∏–Ω–≥–∞–º –¥–æ–±–∞–≤–∏—Ç—Å—è -1 –∏ +1 —Å–µ–∫—É–Ω–¥ –ø–æ –∫—Ä–∞—è–º —Ç–∞–π–º–∏–Ω–≥–∞ –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏, –Ω–æ –≤ –ø—Ä–µ–≤—å—é –ø–∞—Ä—Å–µ—Ä–∞ –∏—Ö –Ω–µ—Ç –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏):",-1)),Ce.value[c.id].length===0?(i(),a("span",qr,"–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å")):(i(),a("span",Vr,[(i(!0),a(ve,null,Te(Ce.value[c.id],(We,Ot)=>(i(),a("span",{key:Ot}," ["+m(G(Ke)(We[0]))+" - "+m(G(Ke)(We[1]))+"]"+m(Ot<Ce.value[c.id].length-1?", ":""),1))),128))]))])):h("",!0)])],2)}),128))])):(i(),a("div",zr,m("–ó–∞–ø–∏—Å–µ–π –æ —Ç–∞–π–º–∏–Ω–≥–∞—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")))]),nt.value&&pe.value.size>0?(i(),a("div",Wr,[t("h4",Kr," –û–±—â–∏–π –ø–∞—Ä—Å–µ—Ä ("+m(pe.value.size)+" —Ç–∞–π–º–∏–Ω–≥–æ–≤): ",1),t("div",Gr,[Zt().length===0?(i(),a("span",Yr,"–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ç–∞–π–º–∏–Ω–≥–∏")):(i(),a("span",Zr,[(i(!0),a(ve,null,Te(Zt(),(c,ye)=>(i(),a("span",{key:ye}," ["+m(G(Ke)(c[0]))+" - "+m(G(Ke)(c[1]))+"]"+m(ye<Zt().length-1?", ":""),1))),128))]))])])):h("",!0),H.value&&re.value.size>0?(i(),a("div",Xr,[t("h4",Qr," –ü–∞—Ä—Å–µ—Ä –æ–≤–µ—Ä–ª–µ—è ("+m(re.value.size)+" —Ç–∞–π–º–∏–Ω–≥–æ–≤): ",1),t("div",Jr,[Xt().length===0?(i(),a("span",eu,"–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ç–∞–π–º–∏–Ω–≥–∏")):(i(),a("span",tu,[(i(!0),a(ve,null,Te(Xt(),(c,ye)=>(i(),a("span",{key:ye}," ["+m(G(Ke)(c[0]))+" - "+m(G(Ke)(c[1]))+"]"+m(ye<Xt().length-1?", ":""),1))),128))]))])])):h("",!0),t("div",nu,[T.value.length>0?(i(),a("button",{key:0,class:"nudity-info-button",onClick:Rt},e[83]||(e[83]=[t("i",{class:"fas fa-copy"},null,-1),t("span",null,"–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å",-1)]))):h("",!0),pe.value.size>0?(i(),a("button",{key:1,class:"nudity-info-button",onClick:bn},[e[84]||(e[84]=t("i",{class:"fas fa-eye"},null,-1)),t("span",null,"–û–±—â–∏–π –ø–∞—Ä—Å–µ—Ä ("+m(pe.value.size)+")",1)])):h("",!0),re.value.size>0?(i(),a("button",{key:2,class:"nudity-info-button overlay-button",onClick:Rn},[e[85]||(e[85]=t("i",{class:"fas fa-layer-group"},null,-1)),t("span",null,"–ü–∞—Ä—Å–µ—Ä –æ–≤–µ—Ä–ª–µ—è ("+m(re.value.size)+")",1)])):h("",!0),t("button",{class:"nudity-info-button",onClick:e[13]||(e[13]=c=>Oe.value=!0)},e[86]||(e[86]=[t("i",{class:"fas fa-plus"},null,-1),t("span",null,"–î–æ–±–∞–≤–∏—Ç—å/–¥–æ–ø–æ–ª–Ω–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥",-1)])),Lt.value?(i(),a("button",{key:3,class:"nudity-info-button obs-button",onClick:e[14]||(e[14]=c=>At.value=!0)},e[87]||(e[87]=[t("i",{class:"fas fa-cog"},null,-1),t("span",null,"–ù–∞—Å—Ç—Ä–æ–π–∫–∏ OBS",-1)]))):h("",!0)])],2)])])):h("",!0),Oe.value?(i(),a("div",ou,[t("div",su,[t("div",lu,[e[89]||(e[89]=t("h3",null,"–î–æ–±–∞–≤–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥",-1)),t("button",{class:"close-modal-btn",onClick:e[15]||(e[15]=c=>Oe.value=!1)},e[88]||(e[88]=[t("i",{class:"fas fa-times"},null,-1)]))]),t("div",iu,[Q(t("input",{"onUpdate:modelValue":e[16]||(e[16]=c=>ct.value=c),placeholder:"–í–∞—à –Ω–∏–∫",class:"timing-input",maxlength:"50"},null,512),[[Et,ct.value]]),Q(t("textarea",{"onUpdate:modelValue":e[17]||(e[17]=c=>dt.value=c),placeholder:"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ñ–∏–ª—å–º–∞(–≤ [] —Å–∫–æ–±–∫–∞—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä [01:36] –∏–ª–∏ [01:36:55]), –∫ –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã –ø—Ä–∏–ª–∞–≥–∞–µ—Ç–µ —Ç–∞–π–º–∏–Ω–≥\n–¢–∫ –∂–µ –¥–ª—è –∞–≤—Ç–æ–±–ª—é—Ä–∞ –ø—Ä–æ—à—É –≤—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏ —É–∫–∞–∑—ã–≤–∞—Ç—å –∫–∞–∫ –¥–∏–∞–ø–æ–∑–æ–Ω, –∞ –Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –≤—Ä–µ–º—è, –Ω–∞–ø—Ä–∏–º–µ—Ä 00:12:31-00:13:04 - —Ç–µ–∫—Å—Ç, –∞ –Ω–µ 00:12:31\n–î–ª—è —Å–µ—Ä–∏–∞–ª–æ–≤ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ —Å–µ–∑–æ–Ω –∏ –Ω–æ–º–µ—Ä —ç–ø–∏–∑–æ–¥–∞\n",class:"timing-textarea"},null,512),[[Et,dt.value]]),oe.value&&oe.value.length>0?(i(),a("div",au,[e[90]||(e[90]=t("div",{class:"timing-preview-header"},[t("i",{class:"fas fa-eye"}),t("span",null,"–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –ø–∞—Ä—Å–µ—Ä–∞")],-1)),t("div",ru,[(i(!0),a(ve,null,Te(oe.value,(c,ye)=>(i(),a("div",{key:ye,class:"timing-preview-item"},[t("span",uu,m(G(Ke)(c[0]))+" - "+m(G(Ke)(c[1])),1),t("span",cu," ("+m(Math.round(c[1]-c[0]))+"—Å) ",1)]))),128))])])):h("",!0),t("div",du,[t("button",{class:"submit-timing-btn",onClick:Pe,disabled:!Ie.value||U.value},[U.value?(i(),a("i",mu)):(i(),a("span",fu,"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é"))],8,vu)])])])])):h("",!0),yt.value?(i(),a("div",{key:3,class:"modal-overlay",onClick:e[20]||(e[20]=c=>yt.value=!1)},[t("div",{class:"modal-content",onClick:e[19]||(e[19]=St(()=>{},["stop"]))},[t("div",pu,[e[92]||(e[92]=t("h3",null,[X(" –¢–æ–ø –∞–≤—Ç–æ—Ä–æ–≤ —Ç–∞–π–º–∏–Ω–≥–æ–≤ "),t("span",{class:"hint-text"},[X("(–•–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —Å–≤–æ–π —Å—Ç—Ä–∏–º/—Å–æ—Ü—Å–µ—Ç–∏? –ù–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º –≤ "),t("a",{href:"https://t.me/reyohoho_sup",target:"_blank",rel:"noopener noreferrer"},"—Ç–µ–ª–µ–≥—Ä–∞–º"),X(")")])],-1)),t("div",gu,[t("button",{class:"close-modal-btn",onClick:e[18]||(e[18]=c=>yt.value=!1)},e[91]||(e[91]=[t("i",{class:"fas fa-times"},null,-1)]))])]),t("div",yu,[t("button",{class:"show-all-timings-btn",onClick:pn,disabled:It.value},[It.value?(i(),a("i",bu)):(i(),a("i",ku)),e[93]||(e[93]=t("span",null,"–í—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏",-1))],8,hu),t("div",wu,[(i(!0),a(ve,null,Te(De.value,(c,ye)=>(i(),a("div",{key:c.username,class:"top-submitter-item"},[t("div",{class:M(["submitter-rank",{gold:ye===0,silver:ye===1,bronze:ye===2}])},m(ye+1),3),t("div",Cu,[t("div",_u,[c.stream_link?(i(),a("a",{key:0,href:c.stream_link,target:"_blank",rel:"noopener noreferrer"},[X(m(c.username)+" ",1),e[94]||(e[94]=t("i",{class:"fa-brands fa-twitch"},null,-1))],8,Eu)):(i(),a(ve,{key:1},[X(m(c.username),1)],64))]),t("div",Su,m(c.approved_submissions_count)+" "+m(Mn(c.approved_submissions_count,["—Ñ–∏–ª—å–º","—Ñ–∏–ª—å–º–∞","—Ñ–∏–ª—å–º–æ–≤"])),1)]),t("div",Mu,[t("div",{class:"contribution-bar",style:rn({width:zt(c.approved_submissions_count)+"%"})},null,4)])]))),128))])])])])):h("",!0),Dt.value?(i(),a("div",{key:4,class:"modal-overlay",onClick:e[27]||(e[27]=c=>Dt.value=!1)},[t("div",{class:"modal-content all-timings-modal",onClick:e[26]||(e[26]=St(()=>{},["stop"]))},[t("div",Iu,[e[96]||(e[96]=t("h3",null,"–í—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏",-1)),t("button",{class:"close-modal-btn",onClick:e[21]||(e[21]=c=>Dt.value=!1)},e[95]||(e[95]=[t("i",{class:"fas fa-times"},null,-1)]))]),t("div",xu,[!It.value&&Ge.value.length>0?(i(),a("div",Lu,[t("button",{class:M(["timing-filter-btn",{active:it.value==="all"}]),onClick:e[22]||(e[22]=c=>it.value="all")}," –í—Å–µ ("+m(Ge.value.length)+") ",3),t("button",{class:M(["timing-filter-btn",{active:it.value==="approved"}]),onClick:e[23]||(e[23]=c=>it.value="approved")}," –û–¥–æ–±—Ä–µ–Ω–Ω—ã–µ ("+m(Ge.value.filter(c=>c.status==="approved").length)+") ",3),t("button",{class:M(["timing-filter-btn",{active:it.value==="pending"}]),onClick:e[24]||(e[24]=c=>it.value="pending")}," –ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ ("+m(Ge.value.filter(c=>c.status==="pending").length)+") ",3),t("button",{class:M(["timing-filter-btn",{active:it.value==="clean_text"}]),onClick:e[25]||(e[25]=c=>it.value="clean_text")}," –ù–µ –º–æ–¥–µ—Ä–∏—Ä—É—é—Ç—Å—è ("+m(Ge.value.filter(c=>c.status==="clean_text").length)+") ",3)])):h("",!0),It.value?(i(),a("div",Tu,e[97]||(e[97]=[t("i",{class:"fas fa-spinner fa-spin"},null,-1),t("span",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö —Ç–∞–π–º–∏–Ω–≥–æ–≤...",-1)]))):Ge.value.length===0?(i(),a("div",Ru,e[98]||(e[98]=[t("p",null,"–¢–∞–π–º–∏–Ω–≥–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",-1)]))):gn.value.length===0?(i(),a("div",Au,e[99]||(e[99]=[t("p",null,"–¢–∞–π–º–∏–Ω–≥–∏ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —Ñ–∏–ª—å—Ç—Ä—É –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",-1)]))):(i(),a("div",Bu,[(i(!0),a(ve,null,Te(gn.value,c=>{var ye;return i(),a("div",{key:c.id,class:M(["timing-item",{pending:c.status==="pending",approved:c.status==="approved",rejected:c.status==="rejected","clean-text":c.status==="clean_text"}])},[t("div",Pu,[t("div",Nu,[t("span",{class:M(["timing-status",c.status])},m(Sn(c.status)),3),t("span",Ou,m(c.username),1),t("span",$u,m(G(oo)(c.submitted_at)),1)]),t("div",Fu,[Re(u,{to:"/movie/".concat(c.kp_id),class:"timing-kp-id clickable",title:"–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ñ–∏–ª—å–º—É ".concat(c.kp_id)},{default:Fn(()=>[X(" KP: "+m(c.kp_id),1)]),_:2},1032,["to","title"]),(ye=G(s).user)!=null&&ye.is_admin&&c.status==="pending"?(i(),a("div",Uu,[c.status==="pending"?(i(),a("button",{key:0,class:"approve-btn",onClick:We=>fn(c.id),disabled:et.value,title:"–û–¥–æ–±—Ä–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥"},[lt.value===c.id&&ht.value?(i(),a("i",Du)):(i(),a("i",Hu))],8,ju)):h("",!0),c.status==="pending"?(i(),a("button",{key:1,class:"reject-btn",onClick:We=>_n(c.id),disabled:et.value,title:"–û—Ç–∫–ª–æ–Ω–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥"},[lt.value===c.id&&!ht.value&&!vt.value?(i(),a("i",Vu)):(i(),a("i",zu))],8,qu)):h("",!0),c.status==="pending"?(i(),a("button",{key:2,class:"clean-text-btn",onClick:We=>En(c.id),disabled:et.value,title:"–û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ clean_text"},[lt.value===c.id&&vt.value?(i(),a("i",Ku)):(i(),a("i",Gu))],8,Wu)):h("",!0)])):h("",!0)])]),t("div",Yu,[t("pre",Zu,m(c.timing_text),1)])],2)}),128))]))])])])):h("",!0),At.value?(i(),a("div",Xu,[t("div",Qu,[t("div",Ju,[e[101]||(e[101]=t("h3",null,"–ù–∞—Å—Ç—Ä–æ–π–∫–∏ OBS WebSocket",-1)),t("button",{class:"close-modal-btn",onClick:e[28]||(e[28]=c=>At.value=!1)},e[100]||(e[100]=[t("i",{class:"fas fa-times"},null,-1)]))]),t("div",ec,[t("div",tc,[t("label",nc,[Q(t("input",{type:"checkbox","onUpdate:modelValue":e[29]||(e[29]=c=>Pt.value=c),onChange:An},null,544),[[Gn,Pt.value]]),e[102]||(e[102]=t("span",null,"–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–±–ª—é—Ä –≤ OBS",-1))]),e[103]||(e[103]=t("div",{class:"obs-setting-description"}," –ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ, –∞–≤—Ç–æ–±–ª—é—Ä –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è —á–µ—Ä–µ–∑ OBS WebSocket –≤–º–µ—Å—Ç–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –±–ª—é—Ä–∞ ",-1))]),Pt.value?(i(),a("div",oc,[t("div",sc,[e[104]||(e[104]=t("label",null,"–•–æ—Å—Ç OBS WebSocket:",-1)),Q(t("input",{type:"text","onUpdate:modelValue":e[30]||(e[30]=c=>Ht.value=c),placeholder:"localhost",class:"obs-input"},null,512),[[Et,Ht.value]])]),t("div",lc,[e[105]||(e[105]=t("label",null,"–ü–æ—Ä—Ç OBS WebSocket:",-1)),Q(t("input",{type:"number","onUpdate:modelValue":e[31]||(e[31]=c=>vn.value=c),placeholder:"4455",class:"obs-input"},null,512),[[Et,vn.value]])]),t("div",ic,[e[106]||(e[106]=t("label",null,"–ü–∞—Ä–æ–ª—å (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω):",-1)),Q(t("input",{type:"password","onUpdate:modelValue":e[32]||(e[32]=c=>bt.value=c),placeholder:"–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –µ—Å–ª–∏ –ø–∞—Ä–æ–ª—å –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω",class:"obs-input"},null,512),[[Et,bt.value]])]),at.value?(i(),a("div",ac,[e[109]||(e[109]=t("label",null,"–í—ã–±–æ—Ä —Ñ–∏–ª—å—Ç—Ä–∞ –¥–ª—è –±–ª—é—Ä–∞:",-1)),qt.value.length===0?(i(),a("div",rc," ‚ö†Ô∏è –§–∏–ª—å—Ç—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤ OBS. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–∞—Ö –µ—Å—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã. ")):(i(),a("div",uc,[Q(t("select",{"onUpdate:modelValue":e[33]||(e[33]=c=>xt.value=c),onChange:Bn,class:"obs-filter-select"},[e[107]||(e[107]=t("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∏–ª—å—Ç—Ä",-1)),(i(!0),a(ve,null,Te(qt.value,c=>(i(),a("option",{key:c.id,value:c.id},m(c.sourceName)+" - "+m(c.filterName)+" ("+m(c.sceneName)+") ",9,cc))),128))],544),[[ho,xt.value]]),Nt.value?(i(),a("div",dc,[t("div",vc,[t("strong",null,m(Nt.value.filterName),1),e[108]||(e[108]=X(" –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ ")),t("strong",null,m(Nt.value.sourceName),1)]),t("span",{class:M(["filter-status",{enabled:Nt.value.enabled}])}," –°—Ç–∞—Ç—É—Å: "+m(Nt.value.enabled?"‚úÖ –í–∫–ª—é—á–µ–Ω":"‚≠ï –û—Ç–∫–ª—é—á–µ–Ω"),3)])):h("",!0),t("div",mc," üí° –ù–∞–π–¥–µ–Ω–æ "+m(qt.value.length)+" —Ñ–∏–ª—å—Ç—Ä–æ–≤. –í—ã–±–µ—Ä–∏—Ç–µ –ª—é–±–æ–π –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ –±–ª—é—Ä–∞. ",1)]))])):h("",!0),t("div",fc,[t("label",pc,[Q(t("input",{type:"checkbox","onUpdate:modelValue":e[34]||(e[34]=c=>Vt.value=c)},null,512),[[Gn,Vt.value]]),e[110]||(e[110]=t("span",null,"–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å OBS –≤ –≤–∏–¥–µ–æ –æ–≤–µ—Ä–ª–µ–µ",-1))]),e[111]||(e[111]=t("div",{class:"obs-setting-description"}," –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —Ñ–∏–ª—å—Ç—Ä–µ OBS –≤ –≤–∏–¥–µ–æ –æ–≤–µ—Ä–ª–µ–µ ",-1))]),t("div",{class:M(["obs-status",{connected:at.value}])},m(at.value?"–ü–æ–¥–∫–ª—é—á–µ–Ω –∫ OBS":"–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ OBS"),3),t("div",gc,[t("button",{class:"obs-action-btn connect-btn",onClick:mt,disabled:Bt.value},[Bt.value?(i(),a("i",hc)):(i(),a("i",bc)),X(" "+m(at.value?"–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è":"–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è"),1)],8,yc),t("button",{class:"obs-action-btn test-btn",onClick:kn,disabled:!at.value||qt.value.length===0},e[112]||(e[112]=[t("i",{class:"fas fa-eye"},null,-1),X(" –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–ª—é—Ä ")]),8,kc),t("button",{class:"obs-action-btn refresh-btn",onClick:kt,disabled:!at.value},e[113]||(e[113]=[t("i",{class:"fas fa-sync"},null,-1),X(" –û–±–Ω–æ–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã ")]),8,wc)])])):h("",!0)])])])):h("",!0)],64)}}},Tc=pt(Cc,[["__scopeId","data-v-793cb6b0"]]);export{Tc as default};
