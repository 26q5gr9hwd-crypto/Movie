import{_ as Be,r as f,c as V,b as c,d as r,e as t,s as oe,t as g,K as ge,g as p,L as Te,n as L,q as We,u as rt,i as kt,O as io,z as ut,l as $e,o as Xe,P as yt,x as De,E as ao,f as ce,Q as st,m as ee,R as ae,y as Q,U as $,S as Lo,D as dt,V as Pe,W as ro,X as gt,Y as lt,Z as Io,$ as Qt,a0 as Ro,k as To,v as it,a1 as Po,a2 as Re,w as Jt,a3 as at,a4 as So,a5 as Ao,a6 as xo,a7 as jo,a8 as eo,a9 as Uo,aa as Bo,a as No,ab as to,ac as Ho,ad as Do,ae as $o}from"./index-MT4IB-o0.js";import{_ as Vo,a as oo,b as no,M as lo}from"./MovieList-4eMlnxyd.js";import{S as uo}from"./SpinnerLoading-fSxIsubj.js";import{N as vt}from"./ToastMessage-BINKP4jE.js";import{u as Oo,S as Fo,a as qo}from"./trailer-CJ1bEmfH.js";import{u as co,f as Ko,a as zo}from"./dateUtils-DnWzVtAB.js";const Ze="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVR4nO2ZQUoDMRSGR7eewHoFsVS0HkUUXNXqASqK2EURBPFIVRe6c+UN1CvUXWvbT4KvMAwzNnnJdCrmg1BKad7/v7y0b5IkiUQiCwGoAx3gQjEugZ0qxTeAIX6MKjMBnBOGS62AVWAPOHVYdlMu9YArYOhphLeBT+ALmOKGEd2QubaAK+B2zngFxt4GgDXgGZjgR8ch5oEkCi8DkvlnRcYLV0Apfqw10M7JvPkV6AN3FmVwK+WyZRnvMEe8ef/ibECyb2o+zRuwnpQAxeLNivQ0BvYyE46qEJ/8fK4ycJKp/X4V4n0MdDNfukkqEO9jwP1LDgD7BeKPgmgp04CL+KUz4Cp+qQxoxC+NAdsNm4c0hWkukkUa8BGfegiadbFDq3/2UAZ8xc+QVvzMtqcKYkBaZ5/MN5xEl2DgLGDZ1KswsC09FPJqXTZoNm5oA6kyMGI2FxqfkluJ0uMTDfhBXAHiHvCCWEL8/RLqlv1MPCf+TSZ+13WC7KnEfWlqcwAeU7GNjnbiQsG5UC1ZAEAt1UMhOpquk6zknMy9l20C2AA+MnEHRo9msuOCs9EH4Fp5TVQ0rqVs0plH4re02Qh1Oq1lCjypsp+5H3gKcD/gykTirqnFZ/ZDy+OGxpapzD+QePrM/2KkKfcGPcv7AdvRkz23G1x4JPIP+AY3r/ywUk/2JAAAAABJRU5ErkJggg==",Wo="/reyohoho/assets/icon-shikimori-DGvXK9Jc.svg",Qe=s=>{const e=document.createElement("div");e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgba(0, 0, 0, 0.8)",e.style.color="white",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e.style.fontSize="2rem",e.style.zIndex="99000",e.textContent=s,document.body.appendChild(e),setTimeout(()=>{document.body.removeChild(e)},2e3)},Go={key:0},Yo={key:1},Xo={class:"players-list"},Zo=["onClick"],Qo={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Jo={key:0},en={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},tn={key:1},on={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},nn=["onClick"],ln={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},sn={__name:"PlayerModal",props:{players:{type:Array,required:!0},selectedPlayer:{type:Object,default:null}},emits:["close","select"],setup(s,{emit:e}){const a=s,o=e,w=f(null),_=V(()=>a.players.filter(k=>!E(k)&&!M(k))),d=V(()=>a.players.some(k=>E(k))),v=V(()=>a.players.some(k=>M(k))),E=k=>k.key.toUpperCase().includes("HDREZKA"),M=k=>k.key.toUpperCase().includes("KODIK"),n=k=>k.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"").replace(/KODIK>/,"").trim(),u=k=>{o("select",k),o("close")},b=k=>a.selectedPlayer&&a.selectedPlayer.key===k.key,C=k=>a.selectedPlayer?k==="hdrezka"&&E(a.selectedPlayer)||k==="kodik"&&M(a.selectedPlayer):!1,j=k=>{w.value=k},T=()=>{w.value=null},P=k=>{let R=a.players.filter(S=>k==="hdrezka"&&E(S)||k==="kodik"&&M(S));return k==="kodik"?R.sort((S,W)=>n(S.translate).localeCompare(n(W.translate))):R},I=k=>P(k).some(R=>R.warning);return(k,R)=>(r(),c("div",{class:"modal",onClick:R[4]||(R[4]=We(S=>k.$emit("close"),["self"]))},[t("div",{class:"modal-content",onClick:R[3]||(R[3]=We(()=>{},["stop"]))},[t("button",{class:"close",onClick:R[0]||(R[0]=S=>k.$emit("close"))},"√ó"),w.value?(r(),c("h2",Yo,[t("button",{class:"back-btn",onClick:T},"‚Üê –ù–∞–∑–∞–¥"),oe(" "+g(w.value==="hdrezka"?"ReYohoho - HDrezka":"Kodik"),1)])):(r(),c("h2",Go,"–í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–µ–µ—Ä")),t("ul",Xo,[w.value?(r(!0),c(ge,{key:1},Te(P(w.value),S=>(r(),c("li",{key:S.key},[t("button",{class:L(["player-item",{active:b(S)}]),onClick:W=>u(S)},[oe(g(n(S.translate))+" ",1),S.warning?(r(),c("span",ln,"warning")):p("",!0)],10,nn)]))),128)):(r(),c(ge,{key:0},[(r(!0),c(ge,null,Te(_.value,S=>(r(),c("li",{key:S.key},[t("button",{class:L(["player-item",{active:b(S)}]),onClick:W=>u(S)},[oe(g(n(S.translate))+" ",1),S.warning?(r(),c("span",Qo,"warning")):p("",!0)],10,Zo)]))),128)),d.value?(r(),c("li",Jo,[t("button",{class:L(["group-item",{active:C("hdrezka")}]),onClick:R[1]||(R[1]=S=>j("hdrezka"))},[R[5]||(R[5]=t("span",{class:"material-icons group-icon"},"folder",-1)),R[6]||(R[6]=oe(" ReYohoho - HDrezka ")),I("hdrezka")?(r(),c("span",en,"warning")):p("",!0)],2)])):p("",!0),v.value?(r(),c("li",tn,[t("button",{class:L(["group-item",{active:C("kodik")}]),onClick:R[2]||(R[2]=S=>j("kodik"))},[R[7]||(R[7]=t("span",{class:"material-icons group-icon"},"folder",-1)),R[8]||(R[8]=oe(" Kodik ")),I("kodik")?(r(),c("span",on,"warning")):p("",!0)],2)])):p("",!0)],64))])])]))}},an=Be(sn,[["__scopeId","data-v-8b8d2b67"]]),rn={class:"players-list"},un=["src"],cn={key:1,class:"controls"},dn={class:"main-controls"},vn={class:"material-icons"},mn={class:"list-button-item"},fn={class:"material-icons"},gn={class:"list-button-item"},kn={class:"material-icons"},yn={class:"list-button-item"},pn={class:"list-button-item"},hn={class:"material-icons"},bn={class:"list-button-item"},wn={class:"material-icons"},Cn={class:"tooltip-container","data-tooltip-container":"dimming"},_n={class:"material-icons"},En={class:"tooltip-container","data-tooltip-container":"blur"},Mn={class:"tooltip-container","data-tooltip-container":"compressor"},Ln={class:"tooltip-container","data-tooltip-container":"mirror"},In={class:"tooltip-container","data-tooltip-container":"theater"},Rn={class:"material-symbols-outlined"},Tn={class:"custom-tooltip","data-tooltip":"theater"},Pn={class:"tooltip-container","data-tooltip-container":"pip"},Sn={class:"tooltip-container","data-tooltip-container":"aspect_ratio"},An={class:"current-ratio"},xn=["onClick"],jn={key:0,class:"tooltip-container","data-tooltip-container":"app_link"},Un={class:"custom-tooltip","data-tooltip":"app_link"},Bn={key:1,class:"tooltip-container","data-tooltip-container":"copy_link"},Nn={class:"custom-tooltip","data-tooltip":"copy_link"},Hn={key:0,class:"desktop-list-buttons"},Dn={class:"tooltip-container"},$n={class:"material-icons"},Vn={class:"custom-tooltip"},On={class:"tooltip-container"},Fn={class:"material-icons"},qn={class:"custom-tooltip"},Kn={class:"tooltip-container"},zn={class:"custom-tooltip"},Wn={class:"tooltip-container"},Gn={class:"material-icons"},Yn={class:"custom-tooltip"},Xn={class:"tooltip-container"},Zn={class:"material-icons"},Qn={class:"custom-tooltip"},Jn={__name:"PlayerComponent",props:{kpId:String,movieInfo:{type:Object,default:()=>({})}},emits:["update:selectedPlayer","update:movieInfo"],setup(s,{emit:e}){const a=rt(),o=Oo(),w=kt(),_=io(),d=ut(),v=f(_.params.kp_id),E=s,M=e,n=f([]),u=f(null),b=f(!0),C=f(!1),j=f(!1),T=f(null),P=f(null),I=f(!1),k=f(""),R=f(null),S=f(window.innerHeight*.9),W=V(()=>"".concat(S.value,"px")),K=V(()=>a.isMobile),D=V(()=>!!window.electronAPI),U=f(null),Me=f(!1);let Le=null;const de=f(null),Ae=f(null),N=f(null),J=f(null),G=f(!1),Y=f(!1),ne=f(null),ve=f(null),ke=f(null),se=f(null),ye=f(null),pe=f(null),Ne=m=>{const l=document.querySelector('[data-tooltip-container="'.concat(m,'"]')),x=document.querySelector('[data-tooltip="'.concat(m,'"]'));if(!l||!x)return;const X=l.getBoundingClientRect(),te=x.getBoundingClientRect(),fe=window.innerHeight;X.bottom+te.height>fe?(x.style.top="auto",x.style.bottom="100%",x.style.marginTop="0",x.style.marginBottom="12px",x.style.transform="translateX(-50%)"):(x.style.top="100%",x.style.bottom="auto",x.style.marginTop="12px",x.style.marginBottom="0",x.style.transform="translateX(-50%)")},le=m=>{U.value=m,Me.value=!1,clearTimeout(Le),Pe(()=>{Ne(m)})},Ve=()=>{Me.value||(Le=setTimeout(()=>{U.value=null},300))},Ie=()=>{Me.value=!0,clearTimeout(Le)},we=()=>{Me.value=!1,U.value=null},Ce=V({get:()=>o.aspectRatio,set:m=>o.updateAspectRatio(m)}),_e=V({get:()=>o.isCentered,set:m=>o.updateCentering(m)}),me=V(()=>{var m,l,x,X,te,fe,Fe,qe,Ke,ze;return((l=(m=E.movieInfo)==null?void 0:m.lists)==null?void 0:l.isFavorite)||((X=(x=E.movieInfo)==null?void 0:x.lists)==null?void 0:X.isWatching)||((fe=(te=E.movieInfo)==null?void 0:te.lists)==null?void 0:fe.isLater)||((qe=(Fe=E.movieInfo)==null?void 0:Fe.lists)==null?void 0:qe.isCompleted)||((ze=(Ke=E.movieInfo)==null?void 0:Ke.lists)==null?void 0:ze.isAbandoned)}),Oe=V(()=>o.preferredPlayer),Ge=f(0),h=m=>m.toUpperCase(),i=()=>{if(C.value||!P.value)return;const[m,l]=Ce.value.split(":").map(Number);S.value=window.innerHeight*.9,Ge.value=Math.min(P.value.clientWidth*(l/m),S.value)},O=V(()=>{if(C.value)return{};const[m,l]=Ce.value.split(":").map(Number),x=S.value*(m/l);return{width:"100%",maxWidth:"".concat(x,"px"),maxHeight:W.value,margin:"0 auto",overflow:"hidden"}}),Z=V(()=>{const[m,l]=Ce.value.split(":").map(Number);return{position:"relative",width:"100%",paddingTop:"".concat(l/m*100,"%")}}),y=()=>{P.value&&setTimeout(()=>{Pe(()=>{P.value.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})},500)},F=async()=>{try{k.value="",R.value=null;const m=await Lo(E.kpId);if(n.value=Object.entries(m).map(([l,x])=>({key:l.toUpperCase(),...x})),n.value.length>0){if(Oe.value){const l=h(Oe.value),x=n.value.find(X=>h(X.key)===l);u.value=x||n.value[0]}else u.value=n.value[0];M("update:selectedPlayer",u.value)}}catch(m){const{message:l,code:x}=dt(m);k.value=l,R.value=x,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–ª–µ–µ—Ä–æ–≤:",m)}},re=()=>{I.value=!0},be=()=>{I.value=!1},Ee=()=>{try{return ne.value||(ne.value=new(window.AudioContext||window.webkitAudioContext)),ve.value||(ve.value=ne.value.createDynamicsCompressor(),ve.value.threshold.value=-50,ve.value.knee.value=40,ve.value.ratio.value=12,ve.value.attack.value=0,ve.value.release.value=.25,se.value=ne.value.createGain(),ye.value=ne.value.createGain(),se.value.gain.value=0,ye.value.gain.value=1,ve.value.connect(se.value),se.value.connect(ne.value.destination),ye.value.connect(ne.value.destination)),!0}catch(m){return console.log("Error initializing audio context:",m),!1}},ue=async m=>{try{if(!ne.value||pe.value===m)return!0;const l=T.value,x=(l==null?void 0:l.src)||"";if(x.includes("videoframe")||x.includes("kinoserial.net")||x.includes("allarknow"))return console.log("Player detected as unsupported for compressor:",x),pe.value=m,ke.value=null,Y.value=!1,D.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –ø–ª–µ–µ—Ä–æ–º"),!1;if(ke.value)try{ke.value.disconnect()}catch(te){}const X=async(te=0)=>{te>0&&await new Promise(fe=>setTimeout(fe,te));try{return ke.value=ne.value.createMediaElementSource(m),pe.value=m,ke.value.connect(ve.value),ke.value.connect(ye.value),console.log("Video audio setup completed (attempt with ".concat(te,"ms delay)")),!0}catch(fe){if(fe.name==="InvalidStateError"&&fe.message.includes("already connected"))return console.log("MediaElementSource already connected (".concat(te,"ms delay attempt)")),!1;throw fe}};return await X(0)||await X(100)||await X(300)||await X(800)?!0:(console.log("Video element has internal audio processing, compressor not available for this player"),pe.value=m,ke.value=null,Y.value=!1,D.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –ø–ª–µ–µ—Ä–æ–º"),!1)}catch(l){return console.log("Error setting up video audio:",l),!1}},ie=async m=>{if(T.value)try{const l=T.value,x=l.contentDocument||l.contentWindow.document;if(!x)return;const X=x.querySelectorAll("video");if(X.length===0)return;const te=X[0];if(!Ee())return;if(!await ue(te)||!ke.value){console.log("Compressor not available for this player");return}m&&!Y.value?(se.value.gain.setValueAtTime(1,ne.value.currentTime),ye.value.gain.setValueAtTime(0,ne.value.currentTime),Y.value=!0,D.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –≤–∫–ª—é—á—ë–Ω"),console.log("Compressor enabled")):!m&&Y.value&&(se.value.gain.setValueAtTime(0,ne.value.currentTime),ye.value.gain.setValueAtTime(1,ne.value.currentTime),Y.value=!1,D.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –æ—Ç–∫–ª—é—á—ë–Ω"),console.log("Compressor disabled"))}catch(l){console.log("Compressor error:",l),D.value&&window.electronAPI.showToast("–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä–∞")}},xe=()=>{D.value?window.electronAPI.sendHotKey("F2"):(Qe("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},A=()=>{D.value?(He.value=!He.value,ie(He.value)):(Qe("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},q=()=>{D.value?(H.value=!H.value,vo(H.value)):(Qe("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},z=()=>{C.value=!C.value,C.value?(window.addEventListener("mousemove",je),document.addEventListener("keydown",mt),document.body.classList.add("no-scroll")):(window.removeEventListener("mousemove",je),document.removeEventListener("keydown",mt),document.body.classList.remove("no-scroll")),j.value=C.value,Pe(()=>y())},he=f(null),je=()=>{he.value=setTimeout(()=>{clearTimeout(he.value),j.value=!1},4e3),j.value=!0},Se=V(()=>a.dimmingEnabled),Ye=()=>{C.value||a.toggleDimming()},He=V({get:()=>o.compressorEnabled,set:m=>o.updateCompressor(m)}),H=V({get:()=>o.mirrorEnabled,set:m=>o.updateMirror(m)}),vo=m=>{if(T.value)try{const l=T.value,x=l.contentDocument||l.contentWindow.document;if(!x)return;const X=x.querySelectorAll("video");if(X.length>0&&(X.forEach(te=>{m?te.style.transform="scaleX(-1)":te.style.transform="scaleX(1)"}),G.value=m,D.value)){const te=m?"–ó–µ—Ä–∫–∞–ª–æ –≤–∫–ª—é—á–µ–Ω–æ":"–ó–µ—Ä–∫–∞–ª–æ –æ—Ç–∫–ª—é—á–µ–Ω–æ";window.electronAPI.showToast(te)}}catch(l){}},mo=()=>{J.value&&clearInterval(J.value),J.value=setInterval(()=>{if(T.value)try{const m=T.value,l=m.contentDocument||m.contentWindow.document;if(!l)return;const x=l.querySelectorAll("video");if(x.length>0){const X=x[0],fe=X.style.transform==="scaleX(-1)";H.value&&!fe?(X.style.transform="scaleX(-1)",G.value=!0):!H.value&&fe&&(X.style.transform="scaleX(1)",G.value=!1),pe.value!==X?(console.log("Video element changed, reinitializing compressor"),pe.value=null,Y.value=!1,He.value&&setTimeout(()=>{ie(!0)},500)):He.value!==Y.value&&ke.value&&(console.log("Compressor state mismatch, reapplying"),ie(He.value))}}catch(m){}},1e3)},fo=()=>{b.value=!1,mo()},mt=m=>{(m.key==="Escape"&&C.value||m.altKey&&m.keyCode===84)&&z()},Ct=m=>{Ce.value=m,setTimeout(()=>{_e.value&&y()},310)},go=()=>{const m="reyohoho://#".concat(v.value);try{window.location.href=m}catch(l){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Å—ã–ª–∫–∏:",l)}},ko=()=>{const m=window.location.href;navigator.clipboard.writeText(m).then(()=>{}),de.value.showNotification("–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∏–ª—å–º —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞")};function yo(m){return m.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"HDRezka - ").replace(/KODIK>/,"Kodik - ").trim()}const po=V(()=>{var m,l;return D.value?!1:!((l=(m=u.value)==null?void 0:m.key)!=null&&l.toUpperCase().includes("TORRENTS"))}),ho=()=>{try{ke.value&&(ke.value.disconnect(),ke.value=null),ne.value&&(ne.value.close(),ne.value=null),ve.value=null,se.value=null,ye.value=null,pe.value=null,Y.value=!1}catch(m){console.log("Error cleaning up audio context:",m)}},bo=m=>{var l;if(((l=u.value)==null?void 0:l.key)===m.key){be();return}u.value=m,b.value=!0,G.value=!1,Y.value=!1,pe.value=null,J.value&&(clearInterval(J.value),J.value=null),o.updatePreferredPlayer(h(m.key)),M("update:selectedPlayer",m)};$e(u,m=>{if(m)if(b.value=!0,G.value=!1,Y.value=!1,pe.value=null,J.value&&(clearInterval(J.value),J.value=null),o.updatePreferredPlayer(h(m.key)),M("update:selectedPlayer",m),m.key.toUpperCase().includes("TORRENTS")){const l=document.querySelector(".rocketme_fon");l&&(l.style.display="none");const x=document.querySelector(".pm_preloader");x&&(x.style.display="none")}else{const l=document.querySelector(".rocketme_fon");l&&(l.style.display="");const x=document.querySelector(".pm_preloader");x&&(x.style.display="")}}),$e(()=>_.params.kp_id,async m=>{m&&m!==v.value&&(v.value=m,G.value=!1,Y.value=!1,pe.value=null,J.value&&(clearInterval(J.value),J.value=null),_e.value&&y())},{immediate:!0});const ct=["16:9","12:5","4:3"],wo=()=>{const l=(ct.indexOf(Ce.value)+1)%ct.length;Ct(ct[l])},Co=m=>{var x,X,te,fe,Fe,qe,Ke,ze,Je,et,tt,ot,nt;return(nt={[$.FAVORITE]:((X=(x=E.movieInfo)==null?void 0:x.lists)==null?void 0:X.isFavorite)||!1,[$.HISTORY]:((fe=(te=E.movieInfo)==null?void 0:te.lists)==null?void 0:fe.isHistory)||!1,[$.LATER]:((qe=(Fe=E.movieInfo)==null?void 0:Fe.lists)==null?void 0:qe.isLater)||!1,[$.COMPLETED]:((ze=(Ke=E.movieInfo)==null?void 0:Ke.lists)==null?void 0:ze.isCompleted)||!1,[$.ABANDONED]:((et=(Je=E.movieInfo)==null?void 0:Je.lists)==null?void 0:et.isAbandoned)||!1,[$.WATCHING]:((ot=(tt=E.movieInfo)==null?void 0:tt.lists)==null?void 0:ot.isWatching)||!1}[m])!=null?nt:!1},Ue=async m=>{if(!w.token){de.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:_o});return}try{const l={[$.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[$.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[$.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[$.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[$.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[$.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};Co(m)?(await ro(v.value,m),de.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(l[m]))):(await gt(v.value,m),de.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(l[m])))}catch(l){const{message:x,code:X}=dt(l);de.value.showNotification("".concat(x," ").concat(X))}M("update:movieInfo")},_o=()=>{d.push("/login")},ft=V(()=>o.showFavoriteTooltip),Eo=()=>{d.push("/settings"),we()},Mo=async()=>{if(!D.value){Qe("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank");return}if(T.value)try{const m=T.value,l=m.contentDocument||m.contentWindow.document;if(!l)return;const x=l.querySelector("video");if(!x)return;document.pictureInPictureElement?await document.exitPictureInPicture():document.pictureInPictureEnabled?await x.requestPictureInPicture():Qe('–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–∂–∏–º "–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ"')}catch(m){console.error("Error toggling PiP:",m),Qe('–ù–µ —É–¥–∞–ª–æ—Å—å –≤–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º "–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ"')}};return Xe(()=>{b.value=!0,F(),K.value&&(Ce.value="4:3"),i(),window.addEventListener("resize",i),window.addEventListener("resize",Ne),_e.value&&y()}),yt(()=>{window.removeEventListener("resize",i),window.removeEventListener("resize",Ne),window.removeEventListener("mousemove",je),document.removeEventListener("keydown",mt),document.body.classList.remove("no-scroll"),J.value&&clearInterval(J.value),ho()}),(m,l)=>{var x,X,te,fe,Fe,qe,Ke,ze,Je,et,tt,ot,nt,_t,Et,Mt,Lt,It,Rt,Tt,Pt,St,At,xt,jt,Ut,Bt,Nt,Ht,Dt,$t,Vt,Ot,Ft,qt,Kt,zt,Wt,Gt,Yt,Xt,Zt;return k.value?(r(),De(ao,{key:0,message:k.value,code:R.value},null,8,["message","code"])):(r(),c(ge,{key:1},[t("div",rn,[l[41]||(l[41]=t("span",null,"–ü–ª–µ–µ—Ä:",-1)),t("button",{class:"player-btn",onClick:re},g(u.value?yo(u.value.translate).toUpperCase():"–ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–µ–µ—Ä–æ–≤..."),1)]),I.value?(r(),De(an,{key:0,players:n.value,"selected-player":u.value,onClose:be,onSelect:bo},null,8,["players","selected-player"])):p("",!0),t("div",{ref_key:"containerRef",ref:P,class:L(["player-container",{"theater-mode":C.value}]),style:st(C.value?{}:O.value)},[t("div",{class:L(["iframe-wrapper",{pm_video:po.value}]),style:st(C.value?{}:Z.value)},[ee(t("iframe",{ref_key:"playerIframe",ref:T,src:(x=u.value)==null?void 0:x.iframe,frameborder:"0",allowfullscreen:"",webkitallowfullscreen:"",class:L(["responsive-iframe",{"theater-mode-unlock":j.value,"theater-mode-lock":C.value,dimmed:Se.value}]),onLoad:fo},null,42,un),[[ae,!b.value&&((X=u.value)==null?void 0:X.iframe)]]),b.value?(r(),De(uo,{key:0})):p("",!0)],6),C.value?(r(),c("button",{key:0,class:L(["close-theater-btn",{visible:j.value}]),onClick:z}," ‚úñ ",2)):p("",!0)],6),C.value?p("",!0):(r(),c("div",cn,[t("div",dn,[K.value?p("",!0):(r(),c("div",{key:0,ref_key:"tooltipContainer",ref:Ae,class:"tooltip-container list-buttons-container","data-tooltip-container":"favorite"},[ft.value?(r(),c("button",{key:0,class:L(["favorite-btn",{active:(fe=(te=s.movieInfo)==null?void 0:te.lists)==null?void 0:fe.isFavorite}]),onMouseenter:l[0]||(l[0]=B=>le("favorite")),onMouseleave:Ve,onClick:l[1]||(l[1]=B=>Ue(Q($).FAVORITE))},[t("span",vn,g((qe=(Fe=s.movieInfo)==null?void 0:Fe.lists)!=null&&qe.isFavorite?"favorite":"favorite_border"),1),t("span",{class:L(["material-icons dropdown-arrow",{highlighted:me.value}])},"expand_more",2)],34)):p("",!0),ee(t("div",{ref_key:"tooltip",ref:N,class:"custom-tooltip advanced-tooltip list-buttons-dropdown","data-tooltip":"favorite",onMouseenter:Ie,onMouseleave:we},[t("div",mn,[t("button",{class:L(["favorite-btn",{active:(ze=(Ke=s.movieInfo)==null?void 0:Ke.lists)==null?void 0:ze.isFavorite}]),onClick:l[2]||(l[2]=B=>Ue(Q($).FAVORITE))},[t("span",fn,g((et=(Je=s.movieInfo)==null?void 0:Je.lists)!=null&&et.isFavorite?"favorite":"favorite_border"),1),l[42]||(l[42]=t("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))],2)]),t("div",gn,[t("button",{class:L(["watching-btn",{active:(ot=(tt=s.movieInfo)==null?void 0:tt.lists)==null?void 0:ot.isWatching}]),onClick:l[3]||(l[3]=B=>Ue(Q($).WATCHING))},[t("span",kn,g((_t=(nt=s.movieInfo)==null?void 0:nt.lists)!=null&&_t.isWatching?"visibility":"visibility_off"),1),l[43]||(l[43]=t("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))],2)]),t("div",yn,[t("button",{class:L(["later-btn",{active:(Mt=(Et=s.movieInfo)==null?void 0:Et.lists)==null?void 0:Mt.isLater}]),onClick:l[4]||(l[4]=B=>Ue(Q($).LATER))},l[44]||(l[44]=[t("span",{class:"material-icons"},"watch_later",-1),t("span",{class:"button-label"},"–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ",-1)]),2)]),t("div",pn,[t("button",{class:L(["completed-btn",{active:(It=(Lt=s.movieInfo)==null?void 0:Lt.lists)==null?void 0:It.isCompleted}]),onClick:l[5]||(l[5]=B=>Ue(Q($).COMPLETED))},[t("span",hn,g((Tt=(Rt=s.movieInfo)==null?void 0:Rt.lists)!=null&&Tt.isCompleted?"check_circle":"check_circle_outline"),1),l[45]||(l[45]=t("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))],2)]),t("div",bn,[t("button",{class:L(["abandoned-btn",{active:(St=(Pt=s.movieInfo)==null?void 0:Pt.lists)==null?void 0:St.isAbandoned}]),onClick:l[6]||(l[6]=B=>Ue(Q($).ABANDONED))},[t("span",wn,g(((xt=(At=s.movieInfo)==null?void 0:At.lists)!=null&&xt.isAbandoned,"not_interested")),1),l[46]||(l[46]=t("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))],2)]),t("div",{class:"tooltip-hint"},[l[48]||(l[48]=t("span",{class:"material-icons"},"settings",-1)),t("span",null,[l[47]||(l[47]=oe("–°—Ç–∏–ª—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ ")),t("a",{class:"settings-link",onClick:Eo},"–Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö")])])],544),[[ae,U.value==="favorite"&&ft.value]])],512)),K.value?p("",!0):(r(),c(ge,{key:1},[t("div",Cn,[t("button",{class:L(["dimming-btn",{active:Se.value}]),onMouseenter:l[7]||(l[7]=B=>le("dimming")),onMouseleave:l[8]||(l[8]=B=>U.value=null),onClick:Ye},[t("span",_n,g(Se.value?"light_mode":"dark_mode"),1)],34),ee(t("div",{class:"custom-tooltip","data-tooltip":"dimming"},g(Se.value?"–û—Ç–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ":"–í–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ"),513),[[ae,U.value==="dimming"]])]),t("div",En,[t("button",{class:L(["blur-btn",{"electron-only":!D.value}]),onMouseenter:l[9]||(l[9]=B=>le("blur")),onMouseleave:l[10]||(l[10]=B=>U.value=null),onClick:xe},l[49]||(l[49]=[t("span",{class:"material-icons"},"blur_on",-1)]),34),ee(t("div",{class:"custom-tooltip","data-tooltip":"blur"},g(D.value?"–ë–ª—é—Ä":"–ë–ª—é—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[ae,U.value==="blur"]])]),t("div",Mn,[t("button",{class:L(["material-symbols-outlined",{active:He.value,"electron-only":!D.value}]),onMouseenter:l[11]||(l[11]=B=>le("compressor")),onMouseleave:l[12]||(l[12]=B=>U.value=null),onClick:A},l[50]||(l[50]=[t("span",{class:"material-icons"},"graphic_eq",-1)]),34),ee(t("div",{class:"custom-tooltip","data-tooltip":"compressor"},g(D.value?"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä":"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[ae,U.value==="compressor"]])]),t("div",Ln,[t("button",{class:L(["mirror-btn",{active:H.value,"electron-only":!D.value}]),onMouseenter:l[13]||(l[13]=B=>le("mirror")),onMouseleave:l[14]||(l[14]=B=>U.value=null),onClick:q},l[51]||(l[51]=[t("span",{class:"material-icons"},"flip",-1)]),34),ee(t("div",{class:"custom-tooltip","data-tooltip":"mirror"},g(D.value?"–ó–µ—Ä–∫–∞–ª–æ":"–ó–µ—Ä–∫–∞–ª–æ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[ae,U.value==="mirror"]])]),t("div",In,[t("button",{class:"theater-mode-btn",onMouseenter:l[15]||(l[15]=B=>le("theater")),onMouseleave:l[16]||(l[16]=B=>U.value=null),onClick:z},[t("span",Rn,g(C.value?"fullscreen_exit":"aspect_ratio"),1)],32),ee(t("div",Tn,[oe(g(C.value?"–í—ã–π—Ç–∏ –∏–∑ —Ç–µ–∞—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞":"–¢–µ–∞—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º")+" ",1),l[52]||(l[52]=t("span",{class:"shortcut-hint"},"Alt+T",-1))],512),[[ae,U.value==="theater"]])]),t("div",Pn,[t("button",{class:L(["pip-btn",{"electron-only":!D.value}]),onMouseenter:l[17]||(l[17]=B=>le("pip")),onMouseleave:l[18]||(l[18]=B=>U.value=null),onClick:Mo},l[53]||(l[53]=[t("span",{class:"material-icons"},"picture_in_picture_alt",-1)]),34),ee(t("div",{class:"custom-tooltip","data-tooltip":"pip"},g(D.value?"–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ":"–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[ae,U.value==="pip"]])]),t("div",Sn,[t("button",{class:"aspect-ratio-dropdown-btn",onMouseenter:l[19]||(l[19]=B=>le("aspect_ratio")),onMouseleave:Ve,onClick:wo},[t("span",An,g(Ce.value),1)],32),ee(t("div",{class:"custom-tooltip advanced-tooltip aspect-ratio-dropdown","data-tooltip":"aspect_ratio",onMouseenter:Ie,onMouseleave:we},[(r(),c(ge,null,Te(ct,B=>t("div",{key:B,class:L(["aspect-ratio-option",{active:Ce.value===B}]),onClick:Ua=>Ct(B)},g(B),11,xn)),64))],544),[[ae,U.value==="aspect_ratio"]])]),t("div",{class:"tooltip-container","data-tooltip-container":"centering",onMouseenter:l[21]||(l[21]=B=>le("centering")),onMouseleave:Ve},[t("button",{class:"center-btn",onClick:y},l[54]||(l[54]=[t("span",{class:"material-icons"},"center_focus_strong",-1)])),ee(t("div",{class:"custom-tooltip advanced-tooltip","data-tooltip":"centering",onMouseenter:Ie,onMouseleave:we},[l[55]||(l[55]=oe(" –û—Ç—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–ª–µ–µ—Ä ")),ce(Fo,{modelValue:_e.value,"onUpdate:modelValue":l[20]||(l[20]=B=>_e.value=B),title:"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞"},null,8,["modelValue"]),l[56]||(l[56]=t("span",{class:"tooltip-title"},"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞",-1))],544),[[ae,U.value==="centering"]])],32),D.value?p("",!0):(r(),c("div",jn,[t("button",{class:"app-link-btn",onMouseenter:l[22]||(l[22]=B=>le("app_link")),onMouseleave:l[23]||(l[23]=B=>U.value=null),onClick:go},l[57]||(l[57]=[t("span",{class:"material-icons"},"open_in_new",-1)]),32),ee(t("div",Un," –û—Ç–∫—Ä—ã—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ",512),[[ae,U.value==="app_link"]])])),D.value?(r(),c("div",Bn,[t("button",{class:"copy-link-btn",onMouseenter:l[24]||(l[24]=B=>le("copy_link")),onMouseleave:l[25]||(l[25]=B=>U.value=null),onClick:ko},l[58]||(l[58]=[t("span",{class:"material-icons"},"content_copy",-1)]),32),ee(t("div",Nn," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É ",512),[[ae,U.value==="copy_link"]])])):p("",!0)],64))]),!K.value&&!ft.value?(r(),c("div",Hn,[t("div",Dn,[t("button",{class:L(["favorite-btn",{active:(Ut=(jt=s.movieInfo)==null?void 0:jt.lists)==null?void 0:Ut.isFavorite}]),onMouseenter:l[26]||(l[26]=B=>le("favorite")),onMouseleave:l[27]||(l[27]=B=>U.value=null),onClick:l[28]||(l[28]=B=>Ue(Q($).FAVORITE))},[t("span",$n,g((Nt=(Bt=s.movieInfo)==null?void 0:Bt.lists)!=null&&Nt.isFavorite?"favorite":"favorite_border"),1)],34),ee(t("div",Vn,g("–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"),512),[[ae,U.value==="favorite"]])]),t("div",On,[t("button",{class:L(["watching-btn",{active:(Dt=(Ht=s.movieInfo)==null?void 0:Ht.lists)==null?void 0:Dt.isWatching}]),onMouseenter:l[29]||(l[29]=B=>le("watching")),onMouseleave:l[30]||(l[30]=B=>U.value=null),onClick:l[31]||(l[31]=B=>Ue(Q($).WATCHING))},[t("span",Fn,g((Vt=($t=s.movieInfo)==null?void 0:$t.lists)!=null&&Vt.isWatching?"visibility":"visibility_off"),1)],34),ee(t("div",qn,g("–°–º–æ—Ç—Ä—é"),512),[[ae,U.value==="watching"]])]),t("div",Kn,[t("button",{class:L(["later-btn",{active:(Ft=(Ot=s.movieInfo)==null?void 0:Ot.lists)==null?void 0:Ft.isLater}]),onMouseenter:l[32]||(l[32]=B=>le("later")),onMouseleave:l[33]||(l[33]=B=>U.value=null),onClick:l[34]||(l[34]=B=>Ue(Q($).LATER))},l[59]||(l[59]=[t("span",{class:"material-icons"},"watch_later",-1)]),34),ee(t("div",zn,g("–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"),512),[[ae,U.value==="later"]])]),t("div",Wn,[t("button",{class:L(["completed-btn",{active:(Kt=(qt=s.movieInfo)==null?void 0:qt.lists)==null?void 0:Kt.isCompleted}]),onMouseenter:l[35]||(l[35]=B=>le("completed")),onMouseleave:l[36]||(l[36]=B=>U.value=null),onClick:l[37]||(l[37]=B=>Ue(Q($).COMPLETED))},[t("span",Gn,g((Wt=(zt=s.movieInfo)==null?void 0:zt.lists)!=null&&Wt.isCompleted?"check_circle":"check_circle_outline"),1)],34),ee(t("div",Yn,g("–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"),512),[[ae,U.value==="completed"]])]),t("div",Xn,[t("button",{class:L(["abandoned-btn",{active:(Yt=(Gt=s.movieInfo)==null?void 0:Gt.lists)==null?void 0:Yt.isAbandoned}]),onMouseenter:l[38]||(l[38]=B=>le("abandoned")),onMouseleave:l[39]||(l[39]=B=>U.value=null),onClick:l[40]||(l[40]=B=>Ue(Q($).ABANDONED))},[t("span",Zn,g(((Zt=(Xt=s.movieInfo)==null?void 0:Xt.lists)!=null&&Zt.isAbandoned,"not_interested")),1)],34),ee(t("div",Qn,g("–ë—Ä–æ—à–µ–Ω–æ"),512),[[ae,U.value==="abandoned"]])])])):p("",!0)])),ce(vt,{ref_key:"notificationRef",ref:de},null,512)],64))}}},so=Be(Jn,[["__scopeId","data-v-0787d568"]]),el={key:0,class:"carousel-container"},tl={class:"carousel-wrapper"},ol=["onClick"],nl=["src","alt"],ll={class:"video-name"},sl={key:0,class:"video-player"},il=["src"],al={__name:"TrailerCarousel",props:{videos:{type:Array,required:!0},activeVideoIndex:{type:Number,default:null}},emits:["select"],setup(s,{emit:e}){const a=rt(),o=V(()=>a.isMobile),w=s,_=e,d=f(w.activeVideoIndex),v=f(null),E=f(!1),M=f(!1),n=()=>{if(!v.value)return;const{scrollLeft:P,scrollWidth:I,clientWidth:k}=v.value;E.value=P>0,M.value=P<I-k-1},u=P=>{if(!v.value)return;const I=v.value.querySelector(".carousel-item");if(!I)return;const k=I.clientWidth+16;v.value.scrollBy({left:k*P,behavior:"smooth"})},b=P=>{d.value=P,_("select",w.videos[P])},C=()=>n(),j=f([]),T=async P=>{try{return(await fetch("https://img.youtube.com/vi/".concat(P,"/0.jpg"))).ok}catch(I){return!1}};return Xe(async()=>{const P=w.videos.map(async k=>await T(k.videoId)?k:null),I=await Promise.all(P);j.value=I.filter(Boolean),n(),window.addEventListener("resize",C)}),$e(()=>w.videos,async P=>{const I=P.map(async R=>await T(R.videoId)?R:null),k=await Promise.all(I);j.value=k.filter(Boolean)}),$e(()=>w.activeVideoIndex,P=>{d.value=P}),yt(()=>{window.removeEventListener("resize",C)}),(P,I)=>j.value.length?(r(),c("div",el,[I[4]||(I[4]=t("h2",null,"–¢—Ä–µ–π–ª–µ—Ä—ã (YouTube)",-1)),t("div",tl,[ee(t("button",{class:"scroll-button left",onClick:I[0]||(I[0]=k=>u(-1))},I[2]||(I[2]=[t("span",{class:"material-symbols-outlined"},"arrow_back_ios",-1)]),512),[[ae,!o.value&&E.value]]),t("div",{ref_key:"carousel",ref:v,class:"carousel",onScroll:n},[(r(!0),c(ge,null,Te(j.value,(k,R)=>(r(),c("div",{key:R,class:"carousel-item",onClick:S=>b(R)},[t("img",{src:"https://img.youtube.com/vi/".concat(k.videoId,"/0.jpg"),alt:k.name},null,8,nl),t("div",ll,g(k.name),1)],8,ol))),128))],544),ee(t("button",{class:"scroll-button right",onClick:I[1]||(I[1]=k=>u(1))},I[3]||(I[3]=[t("span",{class:"material-symbols-outlined"},"arrow_forward_ios",-1)]),512),[[ae,!o.value&&M.value]])]),d.value!==null?(r(),c("div",sl,[t("iframe",{src:s.videos[d.value].iframeUrl,frameborder:"0",allowfullscreen:""},null,8,il)])):p("",!0)])):p("",!0)}},rl=Be(al,[["__scopeId","data-v-4a5806b3"]]),ul={class:"rating-container"},cl={class:"rating-display"},dl={class:"rating-numbers"},vl=["onClick","onMouseenter"],ml={key:0,class:"tooltip-footer"},fl={class:"rating-numbers mobile-rating-numbers"},gl=["onClick"],kl={key:0,class:"mobile-modal-footer"},yl={__name:"MovieRating",props:{kpId:{type:String,required:!0},showDash:{type:Boolean,default:!1}},setup(s){const e=rt(),a=ut(),o=s,w=f(null),_=f(null),d=f(null),v=f(null),E=f(0),M=f(!1),n=f(!1);let u=null;const b=S=>S?S.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",C=()=>{u=setTimeout(()=>{M.value=!1,e.isMobile||(n.value=!1)},100)},j=()=>{u&&(clearTimeout(u),u=null),M.value=!0},T=()=>{e.isMobile&&(n.value=!n.value)},P=()=>{a.push("/login")},I=async()=>{try{const S=await Io(o.kpId);_.value=S.user_rating,d.value=S.average_rating,v.value=b(S.vote_count)}catch(S){console.error("Error loading rating:",S)}},k=async S=>{var W;try{S===_.value?(await Qt(o.kpId,null),_.value=null,w.value.showNotification("–û—Ü–µ–Ω–∫–∞ —É–¥–∞–ª–µ–Ω–∞")):(await Qt(o.kpId,S),_.value=S,w.value.showNotification("–û—Ü–µ–Ω–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞")),e.isMobile&&(n.value=!1),I()}catch(K){console.error("Error setting rating:",K),((W=K.response)==null?void 0:W.status)===401?w.value.showNotification('–î–ª—è –æ—Ü–µ–Ω–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:P}):w.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ü–µ–Ω–∫–∏"),e.isMobile&&(n.value=!1)}},R=()=>{n.value=!1};return Xe(()=>{I()}),(S,W)=>(r(),c("div",ul,[t("div",cl,[t("a",{href:"#",class:L(["rating-link",{"has-rating":_.value}]),onMouseenter:W[0]||(W[0]=K=>M.value=!0),onMouseleave:C,onClick:We(T,["prevent"])},[W[3]||(W[3]=t("img",{src:Vo,alt:"ReYohoho",class:"rating-logo"},null,-1)),t("span",{class:L(["average-rating",Q(lt)(d.value)])},g(d.value?d.value.toFixed(1).replace(/\.0$/,""):"‚Äî"),3)],34),ee(t("div",{class:"rating-tooltip",onMouseenter:j,onMouseleave:C},[t("div",dl,[(r(),c(ge,null,Te(10,K=>t("button",{key:K,class:L(["number-btn",{active:K===_.value,hover:K===E.value,"average-highlight":d.value&&K<=Math.round(d.value)}]),onClick:D=>k(K),onMouseenter:D=>E.value=K,onMouseleave:W[1]||(W[1]=D=>E.value=0)},g(K),43,vl)),64))]),v.value?(r(),c("div",ml,"–û—Ü–µ–Ω–æ–∫: "+g(v.value),1)):p("",!0)],544),[[ae,(M.value||n.value)&&!Q(e).isMobile]])]),ce(vt,{ref_key:"notificationRef",ref:w},null,512),Q(e).isMobile&&n.value?(r(),c("div",{key:0,class:"mobile-modal-overlay",onClick:R},[t("div",{class:"mobile-modal",onClick:W[2]||(W[2]=We(()=>{},["stop"]))},[t("div",{class:"mobile-modal-header"},[W[4]||(W[4]=t("h3",null,"–û—Ü–µ–Ω–∏—Ç—å —Ñ–∏–ª—å–º",-1)),t("button",{class:"close-button",onClick:R},"√ó")]),t("div",fl,[(r(),c(ge,null,Te(10,K=>t("button",{key:K,class:L(["number-btn",{active:K===_.value,"average-highlight":d.value&&K<=Math.round(d.value)}]),onClick:D=>k(K)},g(K),11,gl)),64))]),v.value?(r(),c("div",kl,"–û—Ü–µ–Ω–æ–∫: "+g(v.value),1)):p("",!0)])])):p("",!0)]))}},pl=Be(yl,[["__scopeId","data-v-2df64bd5"]]),hl={name:"EmojiPicker",props:{isVisible:{type:Boolean,default:!1}},emits:["emoji-selected","mouse-enter","mouse-leave","close"],data(){return{activeCategory:"smileys",categories:[{name:"smileys",icon:"üòÄ",emojis:["üòÄ","üòÉ","üòÑ","üòÅ","üòÜ","üòÖ","üòÇ","ü§£","üòä","üòá","üôÇ","üôÉ","üòâ","üòå","üòç","ü•∞","üòò","üòó","üòô","üòö","üòã","üòõ","üòù","üòú","ü§™","ü§®","üßê","ü§ì","üòé","ü§©","ü•≥"]},{name:"emotions",icon:"üò¢",emojis:["üò•","üò¢","üò≠","üò§","üò†","üò°","ü§¨","ü§Ø","üò≥","ü•µ","ü•∂","üò±","üò®","üò∞","üò•","üòì","ü§ó","ü§î","ü§≠","ü§´","ü§•","üò∂","üòê","üòë","üò¨","üôÑ","üòØ","üò¶","üòß","üòÆ","üò≤"]},{name:"gestures",icon:"üëç",emojis:["üëç","üëé","üëå","ü§å","ü§è","‚úåÔ∏è","ü§û","ü§ü","ü§ò","ü§ô","üëà","üëâ","üëÜ","üñï","üëá","‚òùÔ∏è","üëè","üôå","üëê","ü§≤","ü§ù","üôè","‚úçÔ∏è","üí™","ü¶æ","ü¶ø","ü¶µ","ü¶∂","üëÇ","ü¶ª","üëÉ"]},{name:"hearts",icon:"‚ù§Ô∏è",emojis:["‚ù§Ô∏è","üß°","üíõ","üíö","üíô","üíú","ü§é","üñ§","ü§ç","üíî","‚ù£Ô∏è","üíï","üíû","üíì","üíó","üíñ","üíò","üíù","üíü","‚ô•Ô∏è","üíØ","üí¢","üí•","üí´","üí¶","üí®","üï≥Ô∏è","üí£","üí¨","üëÅÔ∏è‚Äçüó®Ô∏è","üó®Ô∏è"]},{name:"objects",icon:"üéâ",emojis:["üéâ","üéä","üéà","üéÅ","üéÄ","üéÇ","üç∞","üßÅ","üç≠","üç¨","üç´","üç©","üç™","üçï","üçî","üçü","üå≠","ü•™","üåÆ","üåØ","ü•ô","ü•ö","üç≥","ü•ò","üç≤","ü•ó","üçø","üßà","üßÄ","ü•®","ü•Ø"]}]}},computed:{currentEmojis(){const s=this.categories.find(e=>e.name===this.activeCategory);return s?s.emojis:[]}},methods:{selectEmoji(s){this.$emit("emoji-selected",s)}}},bl={class:"emoji-categories"},wl=["onClick"],Cl={class:"emoji-grid"},_l=["onClick"];function El(s,e,a,o,w,_){return a.isVisible?(r(),c("div",{key:0,class:"emoji-picker",onMouseenter:e[1]||(e[1]=d=>s.$emit("mouse-enter")),onMouseleave:e[2]||(e[2]=d=>s.$emit("mouse-leave"))},[t("button",{class:"close-btn mobile-only",onClick:e[0]||(e[0]=d=>s.$emit("close"))},e[3]||(e[3]=[t("i",{class:"fas fa-times"},null,-1)])),t("div",bl,[(r(!0),c(ge,null,Te(w.categories,d=>(r(),c("button",{key:d.name,onClick:v=>w.activeCategory=d.name,class:L([{active:w.activeCategory===d.name},"category-btn"]),type:"button"},g(d.icon),11,wl))),128))]),t("div",Cl,[(r(!0),c(ge,null,Te(_.currentEmojis,d=>(r(),c("button",{key:d,onClick:v=>_.selectEmoji(d),class:"emoji-btn",type:"button"},g(d),9,_l))),128))])],32)):p("",!0)}const pt=Be(hl,[["render",El],["__scopeId","data-v-209132f3"]]),Ml=async s=>{const e=await Ro();return await s(e)},Ll=async s=>{const{data:e}=await Ml(a=>a.get("/search_emotes/".concat(s)));return e.emotes||[]},Il={name:"ImagePicker",props:{isVisible:{type:Boolean,required:!0},currentUser:{type:Object,default:null}},emits:["image-selected","mouse-enter","mouse-leave","close","login-required"],setup(s,{emit:e}){const a=f(""),o=f([]),w=f(null),_=f(!1),v=To(async u=>{if(!s.currentUser){console.warn("–ü–æ–ø—ã—Ç–∫–∞ –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏");return}if(!u.trim()){o.value=[],_.value=!1;return}_.value=!0;try{o.value=await Ll(u)}catch(b){console.error("Error searching images:",b),o.value=[]}finally{_.value=!1}},300),E=()=>{if(!s.currentUser){e("login-required");return}a.value.trim()&&(_.value=!0),v(a.value)},M=u=>{if(!s.currentUser){e("login-required");return}e("image-selected",u),e("close")},n=()=>{setTimeout(()=>{s.isVisible&&e("mouse-leave")},100)};return $e(()=>s.isVisible,u=>{u&&(a.value="",o.value=[],_.value=!1)}),{searchQuery:a,images:o,searchInput:w,isLoading:_,handleSearch:E,selectImage:M,handleInputBlur:n}}},Rl={key:0,class:"auth-required"},Tl={class:"auth-message"},Pl={key:1},Sl={class:"image-picker-header"},Al={class:"image-content"},xl={key:0,class:"loading-spinner"},jl={key:1,class:"image-grid"},Ul=["onClick"],Bl=["src","alt"],Nl={key:2,class:"no-images"},Hl={key:3,class:"no-search"};function Dl(s,e,a,o,w,_){return a.isVisible?(r(),c("div",{key:0,class:"image-picker",onMouseenter:e[7]||(e[7]=d=>s.$emit("mouse-enter")),onMouseleave:e[8]||(e[8]=d=>s.$emit("mouse-leave")),onClick:e[9]||(e[9]=We(()=>{},["stop"]))},[t("button",{class:"close-btn mobile-only",onClick:e[0]||(e[0]=d=>s.$emit("close"))},e[10]||(e[10]=[t("i",{class:"fas fa-times"},null,-1)])),a.currentUser?(r(),c("div",Pl,[t("div",Sl,[ee(t("input",{ref:"searchInput",type:"text","onUpdate:modelValue":e[2]||(e[2]=d=>o.searchQuery=d),placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–º–∞–π–ª–∞ 7tv",class:"image-search-input",onInput:e[3]||(e[3]=(...d)=>o.handleSearch&&o.handleSearch(...d)),onClick:e[4]||(e[4]=We(()=>{},["stop"])),onFocus:e[5]||(e[5]=d=>s.$emit("mouse-enter")),onBlur:e[6]||(e[6]=(...d)=>o.handleInputBlur&&o.handleInputBlur(...d))},null,544),[[it,o.searchQuery]])]),t("div",Al,[o.isLoading?(r(),c("div",xl,e[14]||(e[14]=[t("div",{class:"spinner"},null,-1),t("p",null,"–ü–æ–∏—Å–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...",-1)]))):o.images.length>0?(r(),c("div",jl,[(r(!0),c(ge,null,Te(o.images,(d,v)=>(r(),c("div",{key:v,class:"image-item",onClick:E=>o.selectImage(d)},[t("img",{src:d,alt:"Image "+(v+1)},null,8,Bl)],8,Ul))),128))])):o.searchQuery.trim()?(r(),c("div",Nl,e[15]||(e[15]=[t("p",null,"–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤",-1)]))):(r(),c("div",Hl,e[16]||(e[16]=[t("p",null,"–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞",-1)])))])])):(r(),c("div",Rl,[t("div",Tl,[e[11]||(e[11]=t("i",{class:"fas fa-lock"},null,-1)),e[12]||(e[12]=t("h3",null,"–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è",-1)),e[13]||(e[13]=t("p",null,"–î–ª—è –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç",-1)),t("button",{class:"login-button",onClick:e[1]||(e[1]=d=>s.$emit("login-required"))},"–í–æ–π—Ç–∏")])]))],32)):p("",!0)}const ht=Be(Il,[["render",Dl],["__scopeId","data-v-f33eb3f6"]]),$l={name:"LinkModal",props:{isVisible:{type:Boolean,default:!1},selectedText:{type:String,default:""}},emits:["close","submit"],setup(s,{emit:e}){const a=f(""),o=f(""),w=f(null),_=f(null),d=V(()=>/^https?:\/\/.+/.test(a.value.trim())&&o.value.trim()),v=()=>{e("close"),M()},E=()=>{d.value&&(e("submit",{url:a.value.trim(),title:o.value.trim()}),v())},M=()=>{a.value="",o.value=""},n=u=>{var b;u.key==="Enter"?(u.preventDefault(),d.value?E():u.target===w.value&&a.value.trim()&&((b=_.value)==null||b.focus())):u.key==="Escape"&&v()};return $e(()=>s.isVisible,u=>{u&&(s.selectedText.trim()&&(o.value=s.selectedText.trim()),Pe(()=>{var b;(b=w.value)==null||b.focus()}))}),{linkUrl:a,linkTitle:o,urlInput:w,titleInput:_,isValidLink:d,closeModal:v,submitLink:E,handleKeydown:n}}},Vl={class:"link-modal-header"},Ol={class:"link-modal-content"},Fl={class:"form-group"},ql={class:"form-group"},Kl={class:"link-modal-footer"},zl=["disabled"];function Wl(s,e,a,o,w,_){return a.isVisible?(r(),c("div",{key:0,class:"link-modal-overlay",onClick:e[8]||(e[8]=(...d)=>o.closeModal&&o.closeModal(...d))},[t("div",{class:"link-modal",onClick:e[7]||(e[7]=We(()=>{},["stop"]))},[t("div",Vl,[e[10]||(e[10]=t("h3",null,"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É",-1)),t("button",{class:"close-button",onClick:e[0]||(e[0]=(...d)=>o.closeModal&&o.closeModal(...d))},e[9]||(e[9]=[t("i",{class:"fas fa-times"},null,-1)]))]),t("div",Ol,[t("div",Fl,[e[11]||(e[11]=t("label",{for:"link-url"},"URL —Å—Å—ã–ª–∫–∏:",-1)),ee(t("input",{id:"link-url",ref:"urlInput","onUpdate:modelValue":e[1]||(e[1]=d=>o.linkUrl=d),type:"url",placeholder:"https://example.com",class:"link-input",onKeydown:e[2]||(e[2]=(...d)=>o.handleKeydown&&o.handleKeydown(...d))},null,544),[[it,o.linkUrl]])]),t("div",ql,[e[12]||(e[12]=t("label",{for:"link-title"},"–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏:",-1)),ee(t("input",{id:"link-title",ref:"titleInput","onUpdate:modelValue":e[3]||(e[3]=d=>o.linkTitle=d),type:"text",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è",class:"link-input",onKeydown:e[4]||(e[4]=(...d)=>o.handleKeydown&&o.handleKeydown(...d))},null,544),[[it,o.linkTitle]])])]),t("div",Kl,[t("button",{class:"cancel-button",onClick:e[5]||(e[5]=(...d)=>o.closeModal&&o.closeModal(...d))},"–û—Ç–º–µ–Ω–∞"),t("button",{class:"submit-button",disabled:!o.isValidLink,onClick:e[6]||(e[6]=(...d)=>o.submitLink&&o.submitLink(...d))},"–î–æ–±–∞–≤–∏—Ç—å",8,zl)])])])):p("",!0)}const bt=Be($l,[["render",Wl],["__scopeId","data-v-a794d83f"]]);function Gl(){const s=f(!1),e=f(!1),a=f(!1),o=()=>{e.value=!0},w=()=>{e.value=!1,setTimeout(()=>{!e.value&&!a.value&&(s.value=!1)},300)},_=()=>{a.value=!0,s.value=!0},d=()=>{a.value=!1,setTimeout(()=>{!e.value&&!a.value&&(s.value=!1)},300)},v=()=>{s.value=!1};return{showEmojiPicker:s,isEmojiHovered:e,isButtonHovered:a,handleEmojiMouseEnter:o,handleEmojiMouseLeave:w,handleButtonMouseEnter:_,handleButtonMouseLeave:d,closeEmojiPicker:v,insertEmoji:(n,u,b,C)=>{const j=u.value;if(j){const T=j.selectionStart,P=j.selectionEnd,I=b.value.substring(0,T),k=b.value.substring(P),R=I+n+k;C(R),Pe(()=>{j.focus(),j.setSelectionRange(T+n.length,T+n.length),j.style.height&&(j.style.height="auto",j.style.height="".concat(Math.min(j.scrollHeight,200),"px"))})}else C(b.value+n)},handleGlobalClick:n=>{!n.target.closest(".emoji-picker")&&!n.target.closest(".emoji-button-inline")&&v()}}}function Yl(){const s=f(!1),e=f(!1),a=f(!1),o=()=>{e.value=!0},w=()=>{e.value=!1,setTimeout(()=>{!e.value&&!a.value&&(s.value=!1)},300)},_=()=>{a.value=!0,s.value=!0},d=()=>{a.value=!1,setTimeout(()=>{!e.value&&!a.value&&(s.value=!1)},300)},v=()=>{s.value=!1};return{showImagePicker:s,isImageHovered:e,isButtonHovered:a,handleImageMouseEnter:o,handleImageMouseLeave:w,handleImageButtonMouseEnter:_,handleButtonMouseLeave:d,closeImagePicker:v,insertImage:(n,u,b,C)=>{const j=u.value;if(j){const T=j.selectionStart,P=j.selectionEnd,I="[img]".concat(n,"[/img]"),k=b.value.slice(0,T)+I+b.value.slice(P);C(k),Pe(()=>{j.focus(),j.setSelectionRange(T+I.length,T+I.length),j.style.height&&(j.style.height="auto",j.style.height="".concat(Math.min(j.scrollHeight,200),"px"))})}else{const T="[img]".concat(n,"[/img]");C(b.value+T)}},handleGlobalClick:n=>{!n.target.closest(".image-picker")&&!n.target.closest(".emoji-button-inline")&&v()}}}function Xl(){const s=f(!1),e=f("");return{showLinkModal:s,selectedTextForLink:e,insertLink:(d,v)=>{const E=d.value;if(E){const M=E.selectionStart,n=E.selectionEnd,u=v.value.slice(M,n);e.value=u.trim()||""}s.value=!0},insertLinkFromModal:(d,v,E,M)=>{const n=v.value;if(n){const u=n.selectionStart,b=n.selectionEnd,C="[link=".concat(d.url,"]").concat(d.title,"[/link]"),j=E.value.slice(0,u)+C+E.value.slice(b);M(j),Pe(()=>{n.focus(),n.setSelectionRange(u+C.length,u+C.length),n.style.height&&(n.style.height="auto",n.style.height="".concat(Math.min(n.scrollHeight,200),"px"))})}},closeLinkModal:()=>{s.value=!1},insertSpoiler:(d,v,E)=>{const M=d.value;if(M){const n=M.selectionStart,u=M.selectionEnd,b=v.value.slice(n,u);let C;b.trim()?C="[spoiler]".concat(b,"[/spoiler]"):C="[spoiler][/spoiler]";const j=v.value.slice(0,n)+C+v.value.slice(u);E(j),Pe(()=>{if(M.focus(),b.trim())M.setSelectionRange(n+C.length,n+C.length);else{const T=n+9;M.setSelectionRange(T,T)}M.style.height&&(M.style.height="auto",M.style.height="".concat(Math.min(M.scrollHeight,200),"px"))})}}}}function Zl(){return{autoResize:a=>{const o=a==null?void 0:a.target;o&&(o.style.height="auto",o.style.height="".concat(Math.min(o.scrollHeight,200),"px"))},autoResizeElement:a=>{a&&(a.style.height="auto",a.style.height="".concat(Math.min(a.scrollHeight,200),"px"))}}}function wt(){const s=Gl(),e=Yl(),a=Xl(),{autoResize:o,autoResizeElement:w}=Zl(),_=()=>{s.isButtonHovered.value=!0,e.isButtonHovered.value=!0,s.showEmojiPicker.value=!0,e.showImagePicker.value=!1},d=()=>{s.isButtonHovered.value=!0,e.isButtonHovered.value=!0,e.showImagePicker.value=!0,s.showEmojiPicker.value=!1},v=()=>{s.isButtonHovered.value=!1,e.isButtonHovered.value=!1,setTimeout(()=>{!s.isEmojiHovered.value&&!e.isImageHovered.value&&!s.isButtonHovered.value&&!e.isButtonHovered.value&&(s.showEmojiPicker.value=!1,e.showImagePicker.value=!1)},300)},E=()=>{s.showEmojiPicker.value=!1,e.showImagePicker.value=!1},M=T=>{!T.target.closest(".emoji-picker")&&!T.target.closest(".image-picker")&&!T.target.closest(".emoji-button-inline")&&E()},n=(T,P,I,k)=>{s.insertEmoji(T,P,I,k)},u=(T,P,I,k)=>{e.insertImage(T,P,I,k)},b=(T,P,I)=>{a.insertLink(T,P,I)},C=(T,P,I,k)=>{a.insertLinkFromModal(T,P,I,k)},j=(T,P,I)=>{a.insertSpoiler(T,P,I)};return Xe(()=>{document.addEventListener("click",M)}),yt(()=>{document.removeEventListener("click",M)}),{showEmojiPicker:s.showEmojiPicker,handleEmojiMouseEnter:s.handleEmojiMouseEnter,handleEmojiMouseLeave:s.handleEmojiMouseLeave,closeEmojiPicker:s.closeEmojiPicker,showImagePicker:e.showImagePicker,handleImageMouseEnter:e.handleImageMouseEnter,handleImageMouseLeave:e.handleImageMouseLeave,closeImagePicker:e.closeImagePicker,showLinkModal:a.showLinkModal,selectedTextForLink:a.selectedTextForLink,closeLinkModal:a.closeLinkModal,handleButtonMouseEnter:_,handleImageButtonMouseEnter:d,handleButtonMouseLeave:v,closeAllPickers:E,insertEmojiUniversal:n,insertImageUniversal:u,insertLinkUniversal:b,insertLinkFromModalUniversal:C,insertSpoilerUniversal:j,autoResize:o,autoResizeElement:w}}const Ql=s=>s===1?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π":s>=2&&s<=4?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è":"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤",Jl=s=>{if(!s)return"?";const e=s.split(" ");return e.length===1?s.slice(0,2).toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()},es={name:"CommentItem",components:{EmojiPicker:pt,ImagePicker:ht,LinkModal:bt},props:{comment:{type:Object,required:!0,default:()=>({username:"–ê–Ω–æ–Ω–∏–º",user_avatar:null,content:"",created_at:new Date().toISOString(),rating:0,replies:[]})},currentUser:{type:Object,required:!0,default:()=>({})},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate"],setup(s,{emit:e}){var O,Z;const a=ut(),o=V(()=>{var y;return s.editingCommentId===((y=s.comment)==null?void 0:y.id)}),w=f(((O=s.comment)==null?void 0:O.content)||""),_=f(((Z=s.comment)==null?void 0:Z.user_rating)||0),d=f(null),v=f(null),{showEmojiPicker:E,showImagePicker:M,showLinkModal:n,selectedTextForLink:u,handleEmojiMouseEnter:b,handleEmojiMouseLeave:C,handleImageMouseEnter:j,handleImageMouseLeave:T,handleButtonMouseEnter:P,handleImageButtonMouseEnter:I,handleButtonMouseLeave:k,closeEmojiPicker:R,closeImagePicker:S,closeLinkModal:W,insertEmojiUniversal:K,insertImageUniversal:D,insertLinkUniversal:U,insertLinkFromModalUniversal:Me,insertSpoilerUniversal:Le,autoResize:de}=wt(),{formatContentWithTruncation:Ae}=co();Xe(async()=>{var y;if((y=s.comment)!=null&&y.user_avatar){const F=await Po();d.value="".concat(F).concat(s.comment.user_avatar)}});const N=V(()=>{var y;return s.currentUser&&((y=s.comment)==null?void 0:y.user_id)===s.currentUser.id}),J=V(()=>{var y;return s.currentUser&&((y=s.comment)==null?void 0:y.user_id)===s.currentUser.id||s.currentUser&&s.currentUser.is_admin===1}),G=V(()=>{var y,F,re;return((y=s.comment)==null?void 0:y.updated_at)&&((F=s.comment)==null?void 0:F.updated_at)!==((re=s.comment)==null?void 0:re.created_at)}),Y=V(()=>{var y,F;return(y=s.comment)!=null&&y.is_deleted?!1:(((F=s.comment)==null?void 0:F.rating)||0)<=-3}),ne=V(()=>Y.value),ve=f(!1),ke=V(()=>{var y,F;return(y=s.comment)!=null&&y.is_deleted?null:(((F=s.comment)==null?void 0:F.rating)||0)<=-3?"lowRating":null}),se=()=>{var y,F;e("start-edit",(y=s.comment)==null?void 0:y.id),w.value=((F=s.comment)==null?void 0:F.content)||"",Pe(()=>{v.value&&(v.value.focus(),de({target:v.value}))})},ye=()=>{var y;e("cancel-edit"),w.value=((y=s.comment)==null?void 0:y.content)||""},pe=()=>{var y;w.value.trim()&&e("edit",(y=s.comment)==null?void 0:y.id,w.value.trim())},Ne=()=>{var y;confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π?")&&e("delete",(y=s.comment)==null?void 0:y.id)},le=y=>{var F,re;_.value===y?(_.value=0,e("rate",(F=s.comment)==null?void 0:F.id,y)):(_.value=y,e("rate",(re=s.comment)==null?void 0:re.id,y))},Ve=y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),pe())},Ie=V(()=>{var y;return Ae((y=s.comment)==null?void 0:y.content)}),we=()=>{console.log("Avatar load error, falling back to initials"),d.value=null,Pe(()=>{const y=document.querySelector(".avatar-placeholder");y&&(y.style.display="flex")})},Ce=()=>{a.push("/login")},_e=y=>{K(y,v,w,F=>{w.value=F})},me=y=>{D(y,v,w,F=>{w.value=F})},Oe=()=>{Le(v,w,y=>{w.value=y})},Ge=()=>{U(v,w,y=>{w.value=y})},h=y=>{Me(y,v,w,F=>{w.value=F})},i=y=>{de(y)};return $e(w,()=>{o.value&&v.value&&Pe(()=>{i({target:v.value})})}),{isEditing:o,editContent:w,userRating:_,isCommentOwner:N,canDeleteComment:J,isCommentEdited:G,formatDate:zo,formatRelativeTime:Ko,startEdit:se,cancelEdit:ye,saveEdit:pe,confirmDelete:Ne,rateComment:le,avatarUrl:d,getInitials:Jl,handleEditKeydown:Ve,isCommentHidden:ne,showHiddenComment:ve,hiddenCommentReason:ke,formattedContent:Ie,autoResizeEdit:i,editTextarea:v,showEmojiPicker:E,showImagePicker:M,insertEmojiEdit:_e,insertImageEdit:me,insertSpoilerEdit:Oe,insertLinkEdit:Ge,handleEmojiMouseEnter:b,handleEmojiMouseLeave:C,handleImageMouseEnter:j,handleImageMouseLeave:T,closeEmojiPicker:R,closeImagePicker:S,handleButtonMouseEnter:P,handleButtonMouseLeave:k,handleImageButtonMouseEnter:I,handleAvatarError:we,openLogin:Ce,showLinkModal:n,selectedTextForLink:u,insertLinkFromModal:h,closeLinkModal:W}}},ts=["data-comment-id"],os={class:"comment-header"},ns={class:"user-info"},ls={class:"user-avatar"},ss=["src","alt"],is={class:"user-details"},as={class:"username"},rs={key:0,class:"user-rating"},us=["title"],cs=["title"],ds={class:"comment-content"},vs={key:0,class:"hidden-comment-warning"},ms={key:1},fs={key:0,class:"deleted-comment"},gs={key:1},ks={key:0,class:"edit-form"},ys={class:"edit-textarea-container"},ps={class:"edit-footer"},hs={class:"edit-actions"},bs=["disabled"],ws={class:"character-counter-container"},Cs={key:1,class:"comment-text-container"},_s=["innerHTML"],Es={class:"comment-footer"},Ms={class:"comment-actions"},Ls={class:"rating-buttons"},Is={class:"action-buttons"};function Rs(s,e,a,o,w,_){var n,u,b,C,j,T,P,I,k,R,S,W,K,D,U,Me,Le,de,Ae;const d=Re("router-link"),v=Re("EmojiPicker"),E=Re("ImagePicker"),M=Re("LinkModal");return r(),c("div",{class:"comment-item","data-comment-id":(n=a.comment)==null?void 0:n.id},[t("div",os,[t("div",ns,[ce(d,{to:{path:"/lists/".concat((u=a.comment)==null?void 0:u.user_id)},target:"_blank",rel:"noopener noreferrer",class:"user-avatar-link"},{default:Jt(()=>{var N,J;return[t("div",ls,[o.avatarUrl?(r(),c("img",{key:0,src:o.avatarUrl,alt:((N=a.comment)==null?void 0:N.username)||"–ê–Ω–æ–Ω–∏–º",onError:e[0]||(e[0]=(...G)=>o.handleAvatarError&&o.handleAvatarError(...G)),onerror:"this.onerror=null; this.style.display='none'; this.nextElementSibling.style.display='flex';"},null,40,ss)):(r(),c("div",{key:1,class:"avatar-placeholder",style:st({display:o.avatarUrl?"none":"flex"})},g(o.getInitials(((J=a.comment)==null?void 0:J.username)||"–ê–Ω–æ–Ω–∏–º")),5))])]}),_:1},8,["to"]),t("div",is,[ce(d,{to:{path:"/lists/".concat((b=a.comment)==null?void 0:b.user_id)},target:"_blank",rel:"noopener noreferrer",class:"username-link"},{default:Jt(()=>{var N;return[t("span",as,g(((N=a.comment)==null?void 0:N.username)||"–ê–Ω–æ–Ω–∏–º"),1)]}),_:1},8,["to"]),(C=a.comment)!=null&&C.user_movie_rating?(r(),c("span",rs,[e[18]||(e[18]=t("i",{class:"fas fa-star"},null,-1)),oe(" "+g(a.comment.user_movie_rating),1)])):p("",!0),t("span",{class:"date",title:o.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(o.formatDate((j=a.comment)==null?void 0:j.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(o.formatDate((T=a.comment)==null?void 0:T.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(o.formatDate((P=a.comment)==null?void 0:P.created_at))},[oe(g(o.formatRelativeTime((I=a.comment)==null?void 0:I.created_at))+" ",1),o.isCommentEdited?(r(),c("i",{key:0,class:"fas fa-pencil-alt edit-icon",title:o.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(o.formatDate((k=a.comment)==null?void 0:k.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(o.formatDate((R=a.comment)==null?void 0:R.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(o.formatDate((S=a.comment)==null?void 0:S.created_at))},null,8,cs)):p("",!0)],8,us)])])]),t("div",ds,[!((W=a.comment)!=null&&W.is_deleted)&&o.isCommentHidden&&!o.showHiddenComment?(r(),c("div",vs,[o.hiddenCommentReason==="lowRating"?(r(),c("p",{key:0,class:"warning-text",onClick:e[1]||(e[1]=N=>o.showHiddenComment=!0)},e[19]||(e[19]=[t("i",{class:"fas fa-eye-slash"},null,-1),oe(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–∫—Ä—ã—Ç –∏–∑-–∑–∞ –Ω–∏–∑–∫–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å. ")]))):p("",!0)])):(r(),c("div",ms,[(K=a.comment)!=null&&K.is_deleted?(r(),c("div",fs,e[20]||(e[20]=[t("p",{class:"deleted-message"},[t("i",{class:"fas fa-trash"}),oe(" –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —É–¥–∞–ª—ë–Ω ")],-1)]))):(r(),c("div",gs,[o.isEditing?(r(),c("div",ks,[t("div",ys,[ee(t("textarea",{ref:"editTextarea","onUpdate:modelValue":e[2]||(e[2]=N=>o.editContent=N),class:"edit-textarea",rows:"3",maxlength:"1500",onKeydown:e[3]||(e[3]=(...N)=>o.handleEditKeydown&&o.handleEditKeydown(...N)),onInput:e[4]||(e[4]=(...N)=>o.autoResizeEdit&&o.autoResizeEdit(...N))},null,544),[[it,o.editContent]])]),t("div",ps,[t("div",hs,[t("button",{onClick:e[5]||(e[5]=(...N)=>o.cancelEdit&&o.cancelEdit(...N)),class:"cancel-button"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:e[6]||(e[6]=(...N)=>o.saveEdit&&o.saveEdit(...N)),class:"save-button",disabled:!o.editContent.trim()||o.editContent.length>1500}," –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ",8,bs)]),t("div",ws,[t("div",{class:L(["character-counter-inline",{"near-limit":o.editContent.length>1400,"at-limit":o.editContent.length>=1500}])},g(o.editContent.length)+"/1500 ",3),t("button",{type:"button",class:L(["emoji-button-inline",{active:o.showEmojiPicker}]),onMouseenter:e[7]||(e[7]=(...N)=>o.handleButtonMouseEnter&&o.handleButtonMouseEnter(...N)),onMouseleave:e[8]||(e[8]=(...N)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...N))}," üòä ",34),t("button",{type:"button",class:L(["emoji-button-inline",{active:o.showImagePicker}]),onMouseenter:e[9]||(e[9]=(...N)=>o.handleImageButtonMouseEnter&&o.handleImageButtonMouseEnter(...N)),onMouseleave:e[10]||(e[10]=(...N)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...N))},e[21]||(e[21]=[at('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-f1c85dfc><g id="logo" data-v-f1c85dfc><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-f1c85dfc></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-f1c85dfc></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-f1c85dfc></path></g></svg>',1)]),34),t("button",{type:"button",class:"emoji-button-inline spoiler-button",onClick:e[11]||(e[11]=(...N)=>o.insertSpoilerEdit&&o.insertSpoilerEdit(...N)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},e[22]||(e[22]=[t("i",{class:"fas fa-eye-slash"},null,-1)])),t("button",{type:"button",class:"emoji-button-inline link-button",onClick:e[12]||(e[12]=(...N)=>o.insertLinkEdit&&o.insertLinkEdit(...N)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},e[23]||(e[23]=[t("i",{class:"fas fa-link"},null,-1)])),ce(v,{"is-visible":o.showEmojiPicker,onEmojiSelected:o.insertEmojiEdit,onMouseEnter:o.handleEmojiMouseEnter,onMouseLeave:o.handleEmojiMouseLeave,onClose:o.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),ce(E,{"is-visible":o.showImagePicker,"current-user":a.currentUser,onImageSelected:o.insertImageEdit,onMouseEnter:o.handleImageMouseEnter,onMouseLeave:o.handleImageMouseLeave,onClose:o.closeImagePicker,onLoginRequired:o.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),ce(M,{"is-visible":o.showLinkModal,"selected-text":o.selectedTextForLink,onClose:o.closeLinkModal,onSubmit:o.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):(r(),c("div",Cs,[t("p",{class:"comment-text",innerHTML:o.formattedContent},null,8,_s)]))]))]))]),t("div",Es,[t("div",Ms,[t("div",Ls,[!o.isCommentOwner&&!((D=a.comment)!=null&&D.is_deleted)?(r(),c("button",{key:0,onClick:e[13]||(e[13]=N=>o.rateComment(1)),class:L(["rating-button",{"rated-up":o.userRating===1}])},e[24]||(e[24]=[t("i",{class:"fas fa-thumbs-up"},null,-1)]),2)):p("",!0),t("span",{class:L(["rating-count",{"rating-positive":o.userRating===1,"rating-negative":o.userRating===-1}])},g(((U=a.comment)==null?void 0:U.rating)||0),3),!o.isCommentOwner&&!((Me=a.comment)!=null&&Me.is_deleted)?(r(),c("button",{key:1,onClick:e[14]||(e[14]=N=>o.rateComment(-1)),class:L(["rating-button",{"rated-down":o.userRating===-1}])},e[25]||(e[25]=[t("i",{class:"fas fa-thumbs-down"},null,-1)]),2)):p("",!0)]),t("div",Is,[!a.currentUser||a.currentUser.allow_comments===1?(r(),c("button",{key:0,onClick:e[15]||(e[15]=N=>s.$emit("reply",a.comment)),class:"action-button reply-button"},e[26]||(e[26]=[t("i",{class:"fas fa-reply"},null,-1)]))):p("",!0),o.isCommentOwner&&!((Le=a.comment)!=null&&Le.is_deleted)&&!o.isEditing&&((de=a.currentUser)==null?void 0:de.allow_comments)===1?(r(),c("button",{key:1,onClick:e[16]||(e[16]=(...N)=>o.startEdit&&o.startEdit(...N)),class:"action-button edit-button"},e[27]||(e[27]=[t("i",{class:"fas fa-edit"},null,-1)]))):p("",!0),o.canDeleteComment&&!((Ae=a.comment)!=null&&Ae.is_deleted)?(r(),c("button",{key:2,onClick:e[17]||(e[17]=(...N)=>o.confirmDelete&&o.confirmDelete(...N)),class:"action-button delete-button"},e[28]||(e[28]=[t("i",{class:"fas fa-trash"},null,-1)]))):p("",!0)])])])],8,ts)}const Ts=Be(es,[["render",Rs],["__scopeId","data-v-f1c85dfc"]]),Ps={name:"CommentThread",components:{CommentItem:Ts,EmojiPicker:pt,ImagePicker:ht,LinkModal:bt},props:{comment:{type:Object,required:!0},currentUser:{type:Object,required:!0},replyTo:{type:Object,default:null},replyContent:{type:String,default:""},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate","submit-reply","cancel-reply","update-reply-content","reply-keydown"],setup(s,{emit:e}){const a=f(null),o=f(!0),{showEmojiPicker:w,showImagePicker:_,showLinkModal:d,selectedTextForLink:v,handleEmojiMouseEnter:E,handleEmojiMouseLeave:M,handleImageMouseEnter:n,handleImageMouseLeave:u,handleButtonMouseEnter:b,handleImageButtonMouseEnter:C,handleButtonMouseLeave:j,closeEmojiPicker:T,closeImagePicker:P,closeLinkModal:I,insertEmojiUniversal:k,insertImageUniversal:R,insertLinkUniversal:S,insertLinkFromModalUniversal:W,insertSpoilerUniversal:K}=wt(),D=G=>{e("update-reply-content",G.target.value);const Y=G.target;Y&&(Y.style.height="auto",Y.style.height="".concat(Math.min(Y.scrollHeight,200),"px"))},U={get value(){return s.replyContent},set value(G){e("update-reply-content",G)}};return{replyTextarea:a,showEmojiPicker:w,showImagePicker:_,isCollapsed:o,insertEmoji:G=>{k(G,a,U,Y=>{e("update-reply-content",Y)})},insertImage:G=>{R(G,a,U,Y=>{e("update-reply-content",Y)})},insertSpoiler:()=>{K(a,U,G=>{e("update-reply-content",G)})},handleEmojiMouseEnter:E,handleEmojiMouseLeave:M,handleImageMouseEnter:n,handleImageMouseLeave:u,handleButtonMouseEnter:b,handleButtonMouseLeave:j,closeEmojiPicker:T,closeImagePicker:P,handleImageButtonMouseEnter:C,handleReplyInput:D,toggleCollapsed:()=>{o.value=!o.value},showLinkModal:d,selectedTextForLink:v,insertLink:()=>{S(a,U,G=>{e("update-reply-content",G)})},closeLinkModal:I,insertLinkFromModal:G=>{W(G,a,U,Y=>{e("update-reply-content",Y)})}}},computed:{canReply(){return this.currentUser?this.currentUser.allow_comments===1:!0},getReplyPlaceholder(){return this.currentUser?this.currentUser.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç..."},formattedContent(){const{formatContent:s}=co();return s(this.comment.content)}}},Ss={class:"comment-thread"},As={key:0,class:"reply-form"},xs={class:"textarea-container"},js=["value","placeholder","disabled"],Us={class:"reply-footer"},Bs={class:"reply-actions"},Ns=["disabled"],Hs={class:"character-counter-container"},Ds=["disabled"],$s={key:1,class:"replies-container"},Vs=["title"],Os={class:"replies-count"},Fs=["title"],qs={key:0,class:"replies-content"};function Ks(s,e,a,o,w,_){const d=Re("CommentItem"),v=Re("EmojiPicker"),E=Re("ImagePicker"),M=Re("LinkModal"),n=Re("CommentThread",!0);return r(),c("div",Ss,[ce(d,{comment:a.comment,"current-user":a.currentUser,"editing-comment-id":a.editingCommentId,onReply:e[0]||(e[0]=u=>s.$emit("reply",u)),onStartEdit:e[1]||(e[1]=u=>s.$emit("start-edit",u)),onCancelEdit:e[2]||(e[2]=u=>s.$emit("cancel-edit")),onEdit:e[3]||(e[3]=(u,b)=>s.$emit("edit",u,b)),onDelete:e[4]||(e[4]=u=>s.$emit("delete",u)),onRate:e[5]||(e[5]=(u,b)=>s.$emit("rate",u,b))},null,8,["comment","current-user","editing-comment-id"]),a.replyTo&&a.replyTo.id===a.comment.id?(r(),c("div",As,[t("div",xs,[t("textarea",{ref:"replyTextarea",class:"comment-textarea",value:a.replyContent,placeholder:_.getReplyPlaceholder,disabled:a.currentUser&&a.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:e[6]||(e[6]=(...u)=>o.handleReplyInput&&o.handleReplyInput(...u)),onKeydown:e[7]||(e[7]=u=>s.$emit("reply-keydown",u))},null,40,js)]),t("div",Us,[t("div",Bs,[t("button",{class:"cancel-reply",onClick:e[8]||(e[8]=u=>s.$emit("cancel-reply"))},"–û—Ç–º–µ–Ω–∞"),t("button",{class:"submit-button",disabled:!a.replyContent.trim()||a.replyContent.length>1500||a.currentUser&&a.currentUser.allow_comments!==1,onClick:e[9]||(e[9]=u=>s.$emit("submit-reply"))}," –û—Ç–≤–µ—Ç–∏—Ç—å ",8,Ns)]),t("div",Hs,[t("div",{class:L(["character-counter-inline",{"near-limit":a.replyContent.length>1400,"at-limit":a.replyContent.length>=1500}])},g(a.replyContent.length)+"/1500 ",3),t("button",{type:"button",class:L(["emoji-button-inline",{active:o.showEmojiPicker}]),onMouseenter:e[10]||(e[10]=(...u)=>o.handleButtonMouseEnter&&o.handleButtonMouseEnter(...u)),onMouseleave:e[11]||(e[11]=(...u)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...u))}," üòä ",34),t("button",{type:"button",class:L(["emoji-button-inline",{active:o.showImagePicker}]),onMouseenter:e[12]||(e[12]=(...u)=>o.handleImageButtonMouseEnter&&o.handleImageButtonMouseEnter(...u)),onMouseleave:e[13]||(e[13]=(...u)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...u))},e[29]||(e[29]=[at('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-6c0fc347><g id="logo" data-v-6c0fc347><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-6c0fc347></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-6c0fc347></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-6c0fc347></path></g></svg>',1)]),34),t("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:a.currentUser&&a.currentUser.allow_comments!==1,onClick:e[14]||(e[14]=(...u)=>o.insertSpoiler&&o.insertSpoiler(...u)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},e[30]||(e[30]=[t("i",{class:"fas fa-eye-slash"},null,-1)]),8,Ds),t("button",{type:"button",class:"emoji-button-inline link-button",onClick:e[15]||(e[15]=(...u)=>o.insertLink&&o.insertLink(...u)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},e[31]||(e[31]=[t("i",{class:"fas fa-link"},null,-1)])),ce(v,{"is-visible":o.showEmojiPicker,onEmojiSelected:o.insertEmoji,onMouseEnter:o.handleEmojiMouseEnter,onMouseLeave:o.handleEmojiMouseLeave,onClose:o.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),ce(E,{"is-visible":o.showImagePicker,"current-user":a.currentUser,onImageSelected:o.insertImage,onMouseEnter:o.handleImageMouseEnter,onMouseLeave:o.handleImageMouseLeave,onClose:o.closeImagePicker,onLoginRequired:e[16]||(e[16]=()=>s.$router.push("/login"))},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose"]),ce(M,{"is-visible":o.showLinkModal,"selected-text":o.selectedTextForLink,onClose:o.closeLinkModal,onSubmit:o.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):p("",!0),a.comment.replies&&a.comment.replies.length>0?(r(),c("div",$s,[t("button",{class:"collapse-toggle",title:o.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:e[17]||(e[17]=(...u)=>o.toggleCollapsed&&o.toggleCollapsed(...u))},[t("span",{class:L(["collapse-icon",{expanded:!o.isCollapsed}])},e[32]||(e[32]=[t("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},[t("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1)]),2),t("span",Os,g(a.comment.replies.length)+" "+g(a.comment.replies.length===1?"–æ—Ç–≤–µ—Ç":"–æ—Ç–≤–µ—Ç–æ–≤"),1)],8,Vs),t("div",{class:"vertical-line-clickable",title:o.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:e[18]||(e[18]=(...u)=>o.toggleCollapsed&&o.toggleCollapsed(...u))},[t("div",{class:L(["vertical-line-visual",{collapsed:o.isCollapsed}])},null,2)],8,Fs),o.isCollapsed?p("",!0):(r(),c("div",qs,[(r(!0),c(ge,null,Te(a.comment.replies,u=>(r(),De(n,{key:u.id,comment:u,"current-user":a.currentUser,"reply-to":a.replyTo,"reply-content":a.replyContent,"editing-comment-id":a.editingCommentId,onReply:e[19]||(e[19]=b=>s.$emit("reply",b)),onStartEdit:e[20]||(e[20]=b=>s.$emit("start-edit",b)),onCancelEdit:e[21]||(e[21]=b=>s.$emit("cancel-edit")),onEdit:e[22]||(e[22]=(b,C)=>s.$emit("edit",b,C)),onDelete:e[23]||(e[23]=b=>s.$emit("delete",b)),onRate:e[24]||(e[24]=(b,C)=>s.$emit("rate",b,C)),onSubmitReply:e[25]||(e[25]=b=>s.$emit("submit-reply")),onCancelReply:e[26]||(e[26]=b=>s.$emit("cancel-reply")),onUpdateReplyContent:e[27]||(e[27]=b=>s.$emit("update-reply-content",b)),onReplyKeydown:e[28]||(e[28]=b=>s.$emit("reply-keydown",b))},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id"]))),128))]))])):p("",!0)])}const zs=Be(Ps,[["render",Ks],["__scopeId","data-v-6c0fc347"]]),Ws={name:"Comments",components:{CommentThread:zs,Notification:vt,EmojiPicker:pt,ImagePicker:ht,LinkModal:bt},props:{movieId:{type:[String,Number],required:!0}},setup(s){const e=kt(),a=ut(),o=rt(),w=f([]),_=f(""),d=f(null),v=f(""),E=f(null),M=f(e.user),n=f(null),u=f(null),b=f(o.isAutoShowComments),C=f(!1),j=f(3),T=f(3),{showEmojiPicker:P,showImagePicker:I,showLinkModal:k,selectedTextForLink:R,handleEmojiMouseEnter:S,handleEmojiMouseLeave:W,handleImageMouseEnter:K,handleImageMouseLeave:D,handleButtonMouseEnter:U,handleImageButtonMouseEnter:Me,handleButtonMouseLeave:Le,closeEmojiPicker:de,closeImagePicker:Ae,closeLinkModal:N,insertEmojiUniversal:J,insertImageUniversal:G,insertLinkUniversal:Y,insertLinkFromModalUniversal:ne,insertSpoilerUniversal:ve,autoResize:ke}=wt(),se=V(()=>{const A=(q=null)=>w.value.filter(z=>z.parent_id===q).sort((z,he)=>z.id-he.id).map(z=>({...z,replies:A(z.id)})).filter(z=>!z.is_deleted||z.replies&&z.replies.length>0);return A()}),ye=V(()=>{const A=q=>q.reduce((z,he)=>z+1+A(he.replies||[]),0);return A(se.value)}),pe=V(()=>se.value.slice(0,T.value)),Ne=V(()=>se.value.length>T.value),le=V(()=>se.value.length-T.value),Ve=()=>{T.value+=j.value},Ie=async()=>{try{const A=await So(s.movieId);w.value=A}catch(A){console.error("Failed to load comments:",A),n.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.")}},we=async()=>{if(C.value)return;if(!e.token){n.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:O});return}if(M.value&&M.value.allow_comments!==1){n.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!_.value.replace(/\[spoiler\]\s*\[\/spoiler\]/g,"").replace(/\[img\]\s*\[\/img\]/g,"").replace(/\[link=[^\]]+\]\s*\[\/link\]/g,"").trim()){n.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º");return}if(_.value.length>1500){n.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await eo(s.movieId,_.value.trim()),_.value="",await Ie(),b.value=!0,Pe(()=>{u.value&&(u.value.focus(),u.value.style.height="auto"),setTimeout(()=>{const q=document.querySelectorAll(".comment-item[data-comment-id]");if(q.length>0){const z=Array.from(q).map(he=>parseInt(he.getAttribute("data-comment-id"))).filter(he=>!isNaN(he));if(z.length>0){const he=Math.max(...z),je=document.querySelector('[data-comment-id="'.concat(he,'"]'));je&&je.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}},300)})}catch(q){console.error("Failed to create comment:",q),n.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},Ce=A=>{if(!e.token){n.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:O});return}E.value=null,d.value=A,v.value="",Pe(()=>{const q=document.querySelector(".reply-form");q&&q.scrollIntoView({behavior:"smooth",block:"center"})})},_e=async()=>{if(!e.token){n.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:O});return}if(M.value&&M.value.allow_comments!==1){n.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!(!v.value.trim()||!d.value)){if(v.value.length>1500){n.value.showNotification("–û—Ç–≤–µ—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await eo(s.movieId,v.value.trim(),d.value.id);const A=d.value.id;await Ie(),v.value="",d.value=null,Pe(()=>{setTimeout(()=>{const q=document.querySelector('[data-comment-id="'.concat(A,'"]'));if(q){const z=q.querySelector(".replies-content");if(z){const he=z.querySelectorAll(".comment-item[data-comment-id]");if(he.length>0){const je=Array.from(he).map(Se=>parseInt(Se.getAttribute("data-comment-id"))).filter(Se=>!isNaN(Se));if(je.length>0){const Se=Math.max(...je),Ye=document.querySelector('[data-comment-id="'.concat(Se,'"]'));Ye&&Ye.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}}}},300)})}catch(A){console.error("Error submitting reply:",A),n.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}}},me=async(A,q)=>{if(!e.token){n.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:O});return}if(M.value&&M.value.allow_comments!==1){n.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(q.length>1500){n.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await jo(A,q.trim()),await Ie(),E.value=null}catch(z){console.error("Failed to update comment:",z),n.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},Oe=async A=>{if(!e.token){n.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:O});return}try{await xo(A),await Ie()}catch(q){console.error("Failed to delete comment:",q),n.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},Ge=async(A,q)=>{if(!e.token){n.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:O});return}try{await Ao(A,q),await Ie()}catch(z){console.error("Failed to rate comment:",z),n.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ü–µ–Ω–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},h=A=>{C.value||P.value||A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),we())},i=A=>{A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),_e())},O=()=>{a.push("/login")},Z=A=>{C.value=!0,J(A,u,_,q=>{_.value=q}),setTimeout(()=>{C.value=!1},100)},y=A=>{G(A,u,_,q=>{_.value=q})},F=()=>{ve(u,_,A=>{_.value=A})},re=()=>{Y(u,_,A=>{_.value=A})},be=A=>{ne(A,u,_,q=>{_.value=q})},Ee=V(()=>M.value?M.value.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."),ue=V(()=>M.value?M.value.allow_comments===1:!0),ie=A=>{d.value=null,v.value="",E.value=A},xe=()=>{E.value=null};return Xe(()=>{Ie()}),{comments:w,groupedComments:se,displayedComments:pe,hasMoreComments:Ne,remainingCommentsCount:le,showMoreComments:Ve,newComment:_,replyTo:d,replyContent:v,editingCommentId:E,currentUser:M,notificationRef:n,commentTextarea:u,showComments:b,submitComment:we,handleReply:Ce,submitReply:_e,handleEdit:me,handleDelete:Oe,handleRate:Ge,handleCommentKeydown:h,handleReplyKeydown:i,autoResize:ke,totalCommentsCount:ye,getCommentWordForm:Ql,showEmojiPicker:P,showImagePicker:I,showLinkModal:k,selectedTextForLink:R,insertEmoji:Z,insertImage:y,handleEmojiMouseEnter:S,handleEmojiMouseLeave:W,handleImageMouseEnter:K,handleImageMouseLeave:D,closeEmojiPicker:de,closeImagePicker:Ae,handleButtonMouseLeave:Le,handleButtonMouseEnter:U,handleImageButtonMouseEnter:Me,getCommentPlaceholder:Ee,canComment:ue,handleStartEdit:ie,handleCancelEdit:xe,insertSpoiler:F,insertLink:re,insertLinkFromModal:be,closeLinkModal:N}}},Gs={class:"comments-section"},Ys={class:"spoiler-content"},Xs={key:1,class:"comments-container"},Zs={class:"comments-header"},Qs={class:"textarea-container"},Js=["placeholder","disabled"],ei={class:"comment-footer"},ti={class:"comment-actions"},oi=["disabled"],ni={class:"character-counter-container"},li=["disabled"],si=["disabled"],ii=["disabled"],ai={class:"comments-list"},ri={key:0,class:"show-more-comments"};function ui(s,e,a,o,w,_){const d=Re("EmojiPicker"),v=Re("ImagePicker"),E=Re("LinkModal"),M=Re("CommentThread"),n=Re("Notification");return r(),c("div",Gs,[o.showComments?(r(),c("div",Xs,[t("div",Zs,[t("button",{class:"hide-comments-btn",onClick:e[1]||(e[1]=u=>o.showComments=!1)},e[18]||(e[18]=[t("i",{class:"fas fa-eye-slash"},null,-1),oe(" –°–∫—Ä—ã—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ")]))]),t("form",{class:"comment-form",onSubmit:e[11]||(e[11]=We((...u)=>o.submitComment&&o.submitComment(...u),["prevent"]))},[t("div",Qs,[ee(t("textarea",{ref:"commentTextarea","onUpdate:modelValue":e[2]||(e[2]=u=>o.newComment=u),class:"comment-textarea",placeholder:o.getCommentPlaceholder,disabled:o.currentUser&&o.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:e[3]||(e[3]=(...u)=>o.autoResize&&o.autoResize(...u)),onKeydown:e[4]||(e[4]=(...u)=>o.handleCommentKeydown&&o.handleCommentKeydown(...u))},null,40,Js),[[it,o.newComment]])]),t("div",ei,[t("div",ti,[t("button",{class:"submit-button",type:"submit",disabled:!o.newComment.trim()||o.newComment.length>1500||o.currentUser&&o.currentUser.allow_comments!==1}," –û—Ç–ø—Ä–∞–≤–∏—Ç—å ",8,oi)]),t("div",ni,[t("div",{class:L(["character-counter-inline",{"near-limit":o.newComment.length>1400,"at-limit":o.newComment.length>=1500}])},g(o.newComment.length)+"/1500 ",3),t("button",{type:"button",class:L(["emoji-button-inline",{active:o.showEmojiPicker}]),disabled:o.currentUser&&o.currentUser.allow_comments!==1,onMouseenter:e[5]||(e[5]=(...u)=>o.handleButtonMouseEnter&&o.handleButtonMouseEnter(...u)),onMouseleave:e[6]||(e[6]=(...u)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...u))}," üòä ",42,li),t("button",{type:"button",class:L(["emoji-button-inline",{active:o.showImagePicker}]),disabled:o.currentUser&&o.currentUser.allow_comments!==1,onMouseenter:e[7]||(e[7]=(...u)=>o.handleImageButtonMouseEnter&&o.handleImageButtonMouseEnter(...u)),onMouseleave:e[8]||(e[8]=(...u)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...u))},e[19]||(e[19]=[at('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-79080d6f><g id="logo" data-v-79080d6f><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-79080d6f></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-79080d6f></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-79080d6f></path></g></svg>',1)]),42,si),t("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:o.currentUser&&o.currentUser.allow_comments!==1,onClick:e[9]||(e[9]=(...u)=>o.insertSpoiler&&o.insertSpoiler(...u)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},e[20]||(e[20]=[t("i",{class:"fas fa-eye-slash"},null,-1)]),8,ii),t("button",{type:"button",class:"emoji-button-inline link-button",onClick:e[10]||(e[10]=(...u)=>o.insertLink&&o.insertLink(...u)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},e[21]||(e[21]=[t("i",{class:"fas fa-link"},null,-1)])),ce(d,{"is-visible":o.showEmojiPicker&&o.canComment,onEmojiSelected:o.insertEmoji,onMouseEnter:o.handleEmojiMouseEnter,onMouseLeave:o.handleEmojiMouseLeave,onClose:o.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),ce(v,{"is-visible":o.showImagePicker&&o.canComment,"current-user":o.currentUser,onImageSelected:o.insertImage,onMouseEnter:o.handleImageMouseEnter,onMouseLeave:o.handleImageMouseLeave,onClose:o.closeImagePicker,onLoginRequired:s.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),ce(E,{"is-visible":o.showLinkModal,"selected-text":o.selectedTextForLink,onClose:o.closeLinkModal,onSubmit:o.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])],32),t("div",ai,[(r(!0),c(ge,null,Te(o.displayedComments,u=>(r(),De(M,{key:u.id,comment:u,"current-user":o.currentUser,"reply-to":o.replyTo,"reply-content":o.replyContent,"editing-comment-id":o.editingCommentId,"is-first-comment":!1,onReply:o.handleReply,onStartEdit:o.handleStartEdit,onCancelEdit:o.handleCancelEdit,onEdit:o.handleEdit,onDelete:o.handleDelete,onRate:o.handleRate,onSubmitReply:o.submitReply,onCancelReply:e[12]||(e[12]=b=>o.replyTo=null),onUpdateReplyContent:e[13]||(e[13]=b=>o.replyContent=b),onReplyKeydown:o.handleReplyKeydown},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id","onReply","onStartEdit","onCancelEdit","onEdit","onDelete","onRate","onSubmitReply","onReplyKeydown"]))),128)),o.hasMoreComments?(r(),c("div",ri,[t("button",{class:"show-more-btn",onClick:e[14]||(e[14]=(...u)=>o.showMoreComments&&o.showMoreComments(...u))}," –ü–æ–∫–∞–∑–∞—Ç—å –µ—â–µ "+g(o.remainingCommentsCount)+" "+g(o.getCommentWordForm(o.remainingCommentsCount)),1)])):p("",!0)])])):(r(),c("div",{key:0,class:"spoiler-warning",onClick:e[0]||(e[0]=u=>o.showComments=!0)},[t("div",Ys,[e[15]||(e[15]=t("i",{class:"fas fa-eye-slash"},null,-1)),e[16]||(e[16]=t("h3",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–∫—Ä—ã—Ç—ã",-1)),e[17]||(e[17]=t("p",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä—ã. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å.",-1)),t("div",{class:L(["comments-count",{"no-comments":o.totalCommentsCount===0}])},[o.totalCommentsCount===0?(r(),c(ge,{key:0},[oe(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç ")],64)):(r(),c(ge,{key:1},[oe(g(o.totalCommentsCount)+" "+g(o.getCommentWordForm(o.totalCommentsCount)),1)],64))],2)])])),ce(n,{ref:"notificationRef"},null,512)])}const ci=Be(Ws,[["render",ui],["__scopeId","data-v-79080d6f"]]),di={class:"movie-info"},vi={class:"content"},mi={key:0,class:"content-card"},fi={class:"movie-skeleton"},gi={class:"movie-skeleton__player"},ki={key:2,class:"content-card"},yi={key:3,class:"content-card"},pi={class:"content-header"},hi=["src"],bi={class:"content-title"},wi={key:0,class:"ratings-links"},Ci={key:1},_i=["href","title"],Ei={key:2},Mi=["href","title"],Li={key:3},Ii=["href","title"],Ri={key:4},Ti=["href","title"],Pi={key:5},Si=["href"],Ai={key:6,class:"rating-links-group"},xi=["href"],ji=["title"],Ui={key:0,class:"fa-regular fa-face-grin-wink"},Bi={key:1,class:"fas fa-spinner fa-spin"},Ni={key:1,class:"mobile-list-dropdown"},Hi={class:"mobile-list-content"},Di=["content"],$i=["content"],Vi={class:"additional-info"},Oi={class:"info-content"},Fi={key:0,class:"movie-poster-container desktop-only"},qi=["href"],Ki=["src"],zi={class:"details-container"},Wi={class:"info-list"},Gi={key:0},Yi={key:1},Xi={key:2},Zi={key:3},Qi={key:4},Ji={key:5},ea={key:6},ta={key:7},oa={key:8},na={key:9,class:"rating-boxes"},la={key:0,class:"rating-box mpaa"},sa={key:1,class:"rating-box age"},ia={class:"content-info"},aa={key:0,class:"content-description-text"},ra={key:3,class:"comments-section"},ua={key:4,class:"staff-section"},ca={class:"staff-categories"},da={key:0,class:"staff-category"},va={class:"staff-list"},ma=["href","title"],fa=["src","alt"],ga={class:"staff-name"},ka={key:0,class:"staff-role"},ya=["href","title"],pa={key:1,class:"staff-category"},ha={class:"staff-names-container"},ba={class:"staff-names-list"},wa=["href"],Ca=["href","title"],_a={key:2,class:"staff-category"},Ea={class:"staff-names-container"},Ma={class:"staff-names-list"},La=["href"],Ia=["href","title"],Ra={key:5,class:"yt-video-container"},Ta={key:6,class:"related-movies"},Pa=["title"],Sa={key:7,class:"related-movies"},Aa=["title"],xa={class:"nudity-info-content"},ja={__name:"MovieInfo",setup(s){const e=f(!0),a=rt(),o=kt(),w=Uo(),_=io(),d=ut(),v=f(_.params.kp_id),E=f(""),M=f(null),n=f(null),u=Bo(),b=qo(),C=f(null),j=b.areTrailersActive,T=f(null),P=f(!1),I=f(!1),k=f(10),R=f(null),S=f(!1),W=f({}),K=f(null),D=f(!1),U=V(()=>{var h,i,O,Z,y,F,re,be,Ee,ue;return((i=(h=n.value)==null?void 0:h.lists)==null?void 0:i.isFavorite)||((Z=(O=n.value)==null?void 0:O.lists)==null?void 0:Z.isWatching)||((F=(y=n.value)==null?void 0:y.lists)==null?void 0:F.isLater)||((be=(re=n.value)==null?void 0:re.lists)==null?void 0:be.isCompleted)||((ue=(Ee=n.value)==null?void 0:Ee.lists)==null?void 0:ue.isAbandoned)}),Me=V(()=>a.isCommentsEnabled),Le=()=>{if(n.value){const h=n.value.name_ru||n.value.name_en||n.value.name_original||"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å–º–µ";document.title=h}},de=h=>h?h.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",Ae=h=>(h||[]).map(i=>({kp_id:i.film_id,poster:i.poster_url_preview||i.poster_url,title:i.name_ru||i.name_en||i.name_original})),N=h=>{if(typeof h!="number")return;const i=Math.floor(h/60),O=h%60;return"".concat(i," —á. ").concat(O," –º–∏–Ω.")},J=f(!1),G=f({top:"0px",left:"0px"}),Y=h=>{J.value=!0,G.value={top:"".concat(h.pageY+10,"px"),left:"".concat(h.pageX-70,"px")}},ne=async()=>{try{const h=[n.value.name_ru||n.value.name_en||n.value.name_original,...n.value.year?[n.value.year]:[],...n.value.film_length?[N(n.value.film_length)]:[]];await navigator.clipboard.writeText(h.join(", ")),C.value.showNotification("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ")}catch(h){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",h)}},ve=async(h=!0)=>{var i,O,Z,y,F,re,be,Ee;try{let ue;if(v.value.startsWith("shiki")?ue=await Ho(v.value):ue=await Do(v.value,o.token),Array.isArray(ue)&&ue.length===0)throw new Error("–î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–∏—Å–∫.");n.value=ue,v.value.startsWith("shiki")?n.value={...n.value,title:n.value.name_ru||n.value.name_en,name_original:n.value.name_en,short_description:n.value.slogan}:n.value={...n.value,title:n.value.name_ru||n.value.name_en||n.value.name_original,kinopoisk_id:v.value},u.setHeaderContent({text:n.value.title,imageUrl:n.value.logo_url}),Le();const ie={kp_id:v.value,title:((i=n.value)==null?void 0:i.name_ru)||((O=n.value)==null?void 0:O.name_en)||((Z=n.value)==null?void 0:Z.name_original),poster:((y=n.value)==null?void 0:y.poster_url)||((F=n.value)==null?void 0:F.cover_url)||((re=n.value)==null?void 0:re.screenshots[0]),year:(be=n.value)==null?void 0:be.year,type:(Ee=n.value)==null?void 0:Ee.type};if(v.value.startsWith("shiki"))if(n.value.screenshots&&n.value.screenshots.length>0){const A=Math.floor(Math.random()*n.value.screenshots.length),q=n.value.screenshots[A];w.updateMoviePoster(q)}else ie.poster&&w.updateMoviePoster(ie.poster);else ie.poster&&w.updateMoviePoster(ie.poster);if(V(()=>a.isHistoryAllowed).value&&ie.kp_id&&ie.title&&h)if(o.token)try{await gt(ie.kp_id,$.HISTORY)}catch(A){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é:",A)}else a.addToHistory({...ie})}catch(ue){const{message:ie,code:xe}=dt(ue);E.value=ie,M.value=xe,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–ª—å–º–∞—Ö:",ue)}},ke=V(()=>{var h,i;return console.log("–¢—Ä–µ–π–ª–µ—Ä—ã:",(h=n.value)==null?void 0:h.videos),(i=n.value)==null?void 0:i.videos}),se=V(()=>{var h;return Ae((h=n.value)==null?void 0:h.sequels_and_prequels)}),ye=V(()=>{var h;return Ae((h=n.value)==null?void 0:h.similars)}),pe=()=>{var Z;const h=((Z=document.querySelector(".related-movies"))==null?void 0:Z.clientWidth)||0,O=Math.floor(h/160)||10;k.value=Math.max(1,O)},Ne=()=>{pe()},le=h=>{if(h.altKey&&h.keyCode===84&&document.querySelector(".player-container")){const O=document.querySelector(".theater-mode-btn");O&&O.click()}},Ve=async h=>{var O;if(!((O=n.value)!=null&&O.imdb_id))return;if(R.value){R.value=null;return}K.value=h.currentTarget;const i=K.value.getBoundingClientRect();W.value={position:"absolute",top:"".concat(i.bottom+window.scrollY+10,"px"),left:"".concat(i.right+window.scrollX,"px"),transform:"translateX(-100%)"},S.value=!0;try{const Z=await $o(n.value.imdb_id);R.value=Z.nudity_info}catch(Z){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö:",Z),C.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö")}finally{S.value=!1}},Ie=h=>{var O,Z,y,F,re,be,Ee,ue,ie,xe,A,q,z;return(z={[$.FAVORITE]:((Z=(O=n.value)==null?void 0:O.lists)==null?void 0:Z.isFavorite)||!1,[$.HISTORY]:((F=(y=n.value)==null?void 0:y.lists)==null?void 0:F.isHistory)||!1,[$.LATER]:((be=(re=n.value)==null?void 0:re.lists)==null?void 0:be.isLater)||!1,[$.COMPLETED]:((ue=(Ee=n.value)==null?void 0:Ee.lists)==null?void 0:ue.isCompleted)||!1,[$.ABANDONED]:((xe=(ie=n.value)==null?void 0:ie.lists)==null?void 0:xe.isAbandoned)||!1,[$.WATCHING]:((q=(A=n.value)==null?void 0:A.lists)==null?void 0:q.isWatching)||!1}[h])!=null?z:!1},we=async h=>{if(!o.token){C.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:()=>d.push("/login")});return}try{const i={[$.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[$.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[$.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[$.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[$.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[$.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};Ie(h)?(await ro(v.value,h),C.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(i[h]))):(await gt(v.value,h),C.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(i[h]))),await ve(!1),D.value=!1}catch(i){const{message:O,code:Z}=dt(i);C.value.showNotification("".concat(O," ").concat(Z))}},Ce=h=>{const i=document.querySelector(".mobile-list-dropdown");i&&!i.contains(h.target)&&(D.value=!1)},_e=h=>{const i=document.querySelector(".nudity-info-popup");i&&!i.contains(h.target)&&K.value&&!K.value.contains(h.target)&&(R.value=null)};Xe(async()=>{await ve(),e.value=!1,document.addEventListener("keydown",le),window.addEventListener("resize",Ne),setTimeout(pe,100),document.addEventListener("click",Ce),document.addEventListener("click",_e,!0)}),No(async()=>{u.clearHeaderContent(),document.removeEventListener("keydown",le),window.removeEventListener("resize",Ne),document.removeEventListener("click",Ce),document.removeEventListener("click",_e,!0)}),$e(()=>_.params.kp_id,async h=>{h&&h!==v.value&&(u.clearHeaderContent(),v.value=h,T.value=null,await ve(),e.value=!1)},{immediate:!0}),$e(n,()=>{Le()},{deep:!0}),$e(R,h=>{h?document.addEventListener("click",_e,!0):document.removeEventListener("click",_e,!0)},{deep:!0});const me=h=>{var i,O;return((O=(i=n.value)==null?void 0:i.staff)==null?void 0:O.filter(Z=>Z.profession_key===h))||[]},Oe=async()=>{try{await navigator.clipboard.writeText(R.value),C.value.showNotification("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω")}catch(h){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",h),C.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞")}finally{R.value=null}},Ge=()=>{const h=encodeURIComponent(R.value);window.open("https://translate.google.com/?sl=en&tl=ru&text=".concat(h),"_blank"),R.value=null};return(h,i)=>{var O,Z,y,F,re,be,Ee,ue,ie,xe,A,q,z,he,je,Se,Ye,He;return r(),c(ge,null,[t("div",di,[t("div",vi,[(e.value||!n.value)&&!E.value?(r(),c("div",mi,[t("div",fi,[i[11]||(i[11]=at('<div class="movie-skeleton__header" data-v-fc69fc00><div class="movie-skeleton__title" data-v-fc69fc00></div></div><div class="movie-skeleton__ratings" data-v-fc69fc00><div class="movie-skeleton__rating-item" data-v-fc69fc00></div><div class="movie-skeleton__rating-item" data-v-fc69fc00></div><div class="movie-skeleton__rating-item" data-v-fc69fc00></div></div>',2)),t("div",gi,[ce(uo)]),i[12]||(i[12]=at('<div class="movie-skeleton__additional-info" data-v-fc69fc00><div class="movie-skeleton__section-title" data-v-fc69fc00></div><div class="movie-skeleton__info-list" data-v-fc69fc00><div class="movie-skeleton__info-item" data-v-fc69fc00></div><div class="movie-skeleton__info-item" data-v-fc69fc00></div><div class="movie-skeleton__info-item" data-v-fc69fc00></div><div class="movie-skeleton__info-item" data-v-fc69fc00></div><div class="movie-skeleton__info-item" data-v-fc69fc00></div></div></div><div class="movie-skeleton__description" data-v-fc69fc00><div class="movie-skeleton__description-line" data-v-fc69fc00></div><div class="movie-skeleton__description-line" data-v-fc69fc00></div><div class="movie-skeleton__description-line" data-v-fc69fc00></div><div class="movie-skeleton__description-line" data-v-fc69fc00></div></div>',2))])])):p("",!0),E.value?(r(),De(ao,{key:1,message:E.value,code:M.value},null,8,["message","code"])):p("",!0),E.value?(r(),c("div",ki,[(r(),De(so,{key:v.value,"kp-id":v.value,"movie-info":n.value,"onUpdate:movieInfo":ve},null,8,["kp-id","movie-info"]))])):p("",!0),n.value&&!e.value?(r(),c("div",yi,[t("div",pi,[n.value.logo_url?(r(),c("div",{key:0,class:"content-logo",onMousemove:Y,onMouseleave:i[0]||(i[0]=H=>J.value=!1),onClick:ne},[t("img",{src:n.value.logo_url,alt:"–õ–æ–≥–æ—Ç–∏–ø —Ñ–∏–ª—å–º–∞",class:"content-logo"},null,8,hi)],32)):(r(),c("div",{key:1,onMousemove:Y,onMouseleave:i[1]||(i[1]=H=>J.value=!1),onClick:ne},[t("h1",bi,g(n.value.title),1)],32)),ee(t("div",{class:"title-copy-tooltip",style:st(G.value)}," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ",4),[[ae,J.value]])]),n.value.kinopoisk_id||n.value.title||n.value.imdb_id||n.value.rating_imdb||n.value.shikimori_id?(r(),c("div",wi,[n.value.kinopoisk_id?(r(),De(pl,{key:n.value.kinopoisk_id,"kp-id":n.value.kinopoisk_id,"show-dash":!0},null,8,["kp-id"])):p("",!0),n.value.kinopoisk_id?(r(),c("div",Ci,[t("a",{href:"https://www.kinopoisk.ru/film/".concat(n.value.kinopoisk_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:n.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(de(n.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[i[13]||(i[13]=t("img",{src:oo,alt:"–ö–ü",class:"rating-logo"},null,-1)),t("span",{class:L(["rating-value",Q(lt)(n.value.rating_kinopoisk)])},g(n.value.rating_kinopoisk?n.value.rating_kinopoisk:"‚Äî"),3),i[14]||(i[14]=t("img",{src:Ze,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,_i)])):p("",!0),!n.value.kinopoisk_id&&n.value.title?(r(),c("div",Ei,[t("a",{href:"https://www.kinopoisk.ru/index.php?kp_query=".concat(encodeURIComponent(n.value.title+(n.value.year?" "+n.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:n.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(de(n.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[i[15]||(i[15]=t("img",{src:oo,alt:"–ö–ü",class:"rating-logo"},null,-1)),t("span",{class:L(["rating-value",Q(lt)(n.value.rating_kinopoisk)])},g(n.value.rating_kinopoisk?n.value.rating_kinopoisk:"‚Äî"),3),i[16]||(i[16]=t("img",{src:Ze,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Mi)])):p("",!0),n.value.imdb_id?(r(),c("div",Li,[t("a",{href:"https://www.imdb.com/title/".concat(n.value.imdb_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:n.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(de(n.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[i[17]||(i[17]=t("img",{src:no,alt:"IMDb",class:"rating-logo"},null,-1)),t("span",{class:L(["rating-value",Q(lt)(n.value.rating_imdb)])},g(n.value.rating_imdb?n.value.rating_imdb:"‚Äî"),3),i[18]||(i[18]=t("img",{src:Ze,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Ii)])):p("",!0),!n.value.imdb_id&&n.value.title?(r(),c("div",Ri,[t("a",{href:"https://www.imdb.com/find/?q=".concat(encodeURIComponent(n.value.title+(n.value.year?" "+n.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:n.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(de(n.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[i[19]||(i[19]=t("img",{src:no,alt:"IMDb",class:"rating-logo"},null,-1)),t("span",{class:L(["rating-value",Q(lt)(n.value.rating_imdb)])},g(n.value.rating_imdb?n.value.rating_imdb:"‚Äî"),3),i[20]||(i[20]=t("img",{src:Ze,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Ti)])):p("",!0),n.value.shikimori_id?(r(),c("div",Pi,[t("a",{href:"https://shikimori.one/animes/".concat(n.value.shikimori_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},i[21]||(i[21]=[t("img",{src:Wo,alt:"Shiki",class:"rating-logo"},null,-1),t("img",{src:Ze,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,Si)])):p("",!0),n.value.imdb_id?(r(),c("div",Ai,[t("a",{href:"https://www.imdb.com/title/".concat(n.value.imdb_id,"/parentalguide"),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},i[22]||(i[22]=[t("span",{class:"desktop-text"},"Parents Guide",-1),t("span",{class:"mobile-text"},"PG",-1),t("img",{src:Ze,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,xi),t("button",{class:"nudity-info-btn",onClick:i[2]||(i[2]=H=>Ve(H)),title:R.value?"–°–∫—Ä—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é":"–ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ü–µ–Ω–∞—Ö(Sex & Nudity)"},[S.value?(r(),c("i",Bi)):(r(),c("i",Ui))],8,ji)])):p("",!0)])):p("",!0),(r(),De(so,{key:v.value,"kp-id":v.value,"movie-info":n.value,"onUpdate:movieInfo":ve},null,8,["kp-id","movie-info"])),Q(a).isMobile?(r(),c("div",Ni,[t("button",{class:L(["mobile-list-toggle",{}]),onClick:i[3]||(i[3]=H=>D.value=!D.value)},[t("span",{class:L(["material-icons",{active:U.value}])},g(U.value?"bookmark_added":"bookmark_border"),3),i[23]||(i[23]=t("span",{class:"button-label"},"–î–æ–±–∞–≤–∏—Ç—å –≤ —Å–ø–∏—Å–æ–∫",-1)),t("span",{class:L(["material-icons dropdown-arrow",{expanded:D.value}])},"expand_more",2)]),ee(t("div",Hi,[t("button",{class:L(["mobile-list-btn",{}]),onClick:i[4]||(i[4]=H=>we(Q($).FAVORITE))},[t("span",{class:L(["material-icons",{active:(Z=(O=n.value)==null?void 0:O.lists)==null?void 0:Z.isFavorite}])},g((F=(y=n.value)==null?void 0:y.lists)!=null&&F.isFavorite?"favorite":"favorite_border"),3),i[24]||(i[24]=t("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))]),t("button",{class:L(["mobile-list-btn",{}]),onClick:i[5]||(i[5]=H=>we(Q($).WATCHING))},[t("span",{class:L(["material-icons",{active:(be=(re=n.value)==null?void 0:re.lists)==null?void 0:be.isWatching}])},g((ue=(Ee=n.value)==null?void 0:Ee.lists)!=null&&ue.isWatching?"visibility":"visibility_off"),3),i[25]||(i[25]=t("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))]),t("button",{class:L(["mobile-list-btn",{}]),onClick:i[6]||(i[6]=H=>we(Q($).LATER))},[t("span",{class:L(["material-icons",{active:(xe=(ie=n.value)==null?void 0:ie.lists)==null?void 0:xe.isLater}])},"watch_later",2),i[26]||(i[26]=t("span",{class:"button-label"},"–ü–æ–∑–∂–µ",-1))]),t("button",{class:L(["mobile-list-btn",{}]),onClick:i[7]||(i[7]=H=>we(Q($).COMPLETED))},[t("span",{class:L(["material-icons",{active:(q=(A=n.value)==null?void 0:A.lists)==null?void 0:q.isCompleted}])},g((he=(z=n.value)==null?void 0:z.lists)!=null&&he.isCompleted?"check_circle":"check_circle_outline"),3),i[27]||(i[27]=t("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))]),t("button",{class:L(["mobile-list-btn",{}]),onClick:i[8]||(i[8]=H=>we(Q($).ABANDONED))},[t("span",{class:L(["material-icons",{active:(Se=(je=n.value)==null?void 0:je.lists)==null?void 0:Se.isAbandoned}])},"not_interested",2),i[28]||(i[28]=t("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))])],512),[[ae,D.value]])])):p("",!0),t("meta",{name:"title-and-year",content:n.value.type==="FILM"&&n.value.year?"".concat(n.value.title," (").concat(n.value.year,")"):n.value.title},null,8,Di),n.value.name_original?(r(),c("meta",{key:2,name:"original-title",content:n.value.name_original},null,8,$i)):p("",!0),t("div",Vi,[i[39]||(i[39]=t("h2",{class:"additional-info-title"},"–ü–æ–¥—Ä–æ–±–Ω–µ–µ",-1)),t("div",Oi,[n.value.poster_url?(r(),c("div",Fi,[t("a",{href:n.value.poster_url,target:"_blank",rel:"noopener noreferrer"},[t("img",{src:n.value.poster_url,alt:"–ü–æ—Å—Ç–µ—Ä —Ñ–∏–ª—å–º–∞",class:"movie-poster"},null,8,Ki)],8,qi)])):p("",!0),t("div",zi,[t("ul",Wi,[n.value.type&&Q(to)[n.value.type]?(r(),c("li",Gi,[i[29]||(i[29]=t("strong",null,"–¢–∏–ø:",-1)),oe(" "+g(Q(to)[n.value.type]),1)])):p("",!0),n.value.year?(r(),c("li",Yi,[i[30]||(i[30]=t("strong",null,"–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞:",-1)),oe(" "+g(n.value.year),1)])):p("",!0),n.value.title?(r(),c("li",Xi,[i[31]||(i[31]=t("strong",null,"–ù–∞–∑–≤–∞–Ω–∏–µ:",-1)),oe(" "+g(n.value.title),1)])):p("",!0),n.value.name_original?(r(),c("li",Zi,[i[32]||(i[32]=t("strong",null,"–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:",-1)),oe(" "+g(n.value.name_original),1)])):p("",!0),n.value.slogan?(r(),c("li",Qi,[i[33]||(i[33]=t("strong",null,"–°–ª–æ–≥–∞–Ω:",-1)),oe(" "+g(n.value.slogan),1)])):p("",!0),n.value.production_companies?(r(),c("li",Ji,[i[34]||(i[34]=t("strong",null,"–ü—Ä–æ–¥–∞–∫—à–Ω:",-1)),oe(" "+g(n.value.production_companies),1)])):p("",!0),(Ye=n.value.countries)!=null&&Ye.length?(r(),c("li",ea,[i[35]||(i[35]=t("strong",null,"–°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞:",-1)),oe(" "+g(n.value.countries.map(H=>H.country).join(", ")),1)])):p("",!0),(He=n.value.genres)!=null&&He.length?(r(),c("li",ta,[i[36]||(i[36]=t("strong",null,"–ñ–∞–Ω—Ä—ã:",-1)),oe(" "+g(n.value.genres.map(H=>H.genre).join(", ")),1)])):p("",!0),n.value.film_length?(r(),c("li",oa,[i[37]||(i[37]=t("strong",null,"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:",-1)),oe(" "+g(N(n.value.film_length)),1)])):p("",!0),n.value.rating_mpaa||n.value.rating_age_limits?(r(),c("li",na,[n.value.rating_mpaa?(r(),c("div",la,[i[38]||(i[38]=t("strong",null,"MPAA",-1)),t("span",null,g(n.value.rating_mpaa.toUpperCase()),1)])):p("",!0),n.value.rating_age_limits?(r(),c("div",sa,[t("strong",null,g(n.value.rating_age_limits.replace("age",""))+"+",1)])):p("",!0)])):p("",!0)]),t("div",ia,[n.value.description?(r(),c("p",aa,g(n.value.description),1)):p("",!0)])])])]),Me.value?(r(),c("div",ra,[(r(),De(ci,{"movie-id":v.value,key:v.value},null,8,["movie-id"]))])):p("",!0),n.value.staff?(r(),c("div",ua,[t("div",ca,[me("ACTOR").length?(r(),c("div",da,[i[40]||(i[40]=t("h3",{class:"additional-info-title"},"–ê–∫—Ç—ë—Ä—ã",-1)),t("div",va,[(r(!0),c(ge,null,Te(me("ACTOR").slice(0,12),H=>(r(),c("div",{key:H.staff_id,class:"staff-item"},[t("a",{href:"https://www.kinopoisk.ru/name/".concat(H.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-link",title:H.description||""},[t("img",{src:H.poster_url,alt:H.name_ru,class:"staff-photo"},null,8,fa),t("span",ga,g(H.name_ru||H.name_en),1),H.description?(r(),c("span",ka,g(H.description),1)):p("",!0)],8,ma)]))),128)),t("a",{class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(v.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(me("ACTOR").length," –∞–∫—Ç–µ—Ä–æ–≤")}," +"+g(me("ACTOR").length-12),9,ya)])])):p("",!0),me("DIRECTOR").length?(r(),c("div",pa,[i[41]||(i[41]=t("h3",{class:"additional-info-title"},"–†–µ–∂–∏—Å—Å—ë—Ä—ã",-1)),t("div",ha,[t("div",ba,[(r(!0),c(ge,null,Te(me("DIRECTOR").slice(0,5),H=>(r(),c("a",{key:H.staff_id,href:"https://www.kinopoisk.ru/name/".concat(H.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},g(H.name_ru||H.name_en),9,wa))),128)),me("DIRECTOR").length>5?(r(),c("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(v.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(me("DIRECTOR").length," —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–≤")}," +"+g(me("DIRECTOR").length-5),9,Ca)):p("",!0)])])])):p("",!0),me("PRODUCER").length?(r(),c("div",_a,[i[42]||(i[42]=t("h3",{class:"additional-info-title"},"–ü—Ä–æ–¥—é—Å–µ—Ä—ã",-1)),t("div",Ea,[t("div",Ma,[(r(!0),c(ge,null,Te(me("PRODUCER").slice(0,5),H=>(r(),c("a",{key:H.staff_id,href:"https://www.kinopoisk.ru/name/".concat(H.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},g(H.name_ru||H.name_en),9,La))),128)),me("PRODUCER").length>5?(r(),c("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(v.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(me("PRODUCER").length," –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤")}," +"+g(me("PRODUCER").length-5),9,Ia)):p("",!0)])])])):p("",!0)])])):p("",!0),ke.value.length&&Q(j)?(r(),c("div",Ra,[ce(rl,{videos:ke.value,"active-video-index":T.value,onSelect:h.playTrailer},null,8,["videos","active-video-index","onSelect"])])):p("",!0),se.value.length?(r(),c("div",Ta,[i[43]||(i[43]=t("h2",null,"–°–∏–∫–≤–µ–ª—ã –∏ –ø—Ä–∏–∫–≤–µ–ª—ã",-1)),ce(Q(lo),{"movies-list":P.value?se.value:se.value.slice(0,k.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),se.value.length>k.value?(r(),c("a",{key:0,class:"expand-circle-button",onClick:i[9]||(i[9]=H=>P.value=!P.value),title:"".concat(P.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(se.value.length,")")},g(P.value?"‚àí":"+".concat(se.value.length-k.value)),9,Pa)):p("",!0)])):p("",!0),ye.value.length?(r(),c("div",Sa,[i[44]||(i[44]=t("h2",null,"–ü–æ—Ö–æ–∂–∏–µ",-1)),ce(Q(lo),{"movies-list":I.value?ye.value:ye.value.slice(0,k.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),ye.value.length>k.value?(r(),c("a",{key:0,class:"expand-circle-button",onClick:i[10]||(i[10]=H=>I.value=!I.value),title:"".concat(I.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(ye.value.length,")")},g(I.value?"‚àí":"+".concat(ye.value.length-k.value)),9,Aa)):p("",!0)])):p("",!0)])):p("",!0)])]),ce(vt,{ref_key:"notificationRef",ref:C},null,512),R.value?(r(),c("div",{key:0,style:st(W.value),class:"nudity-info-popup"},[t("div",xa,g(R.value),1),t("div",{class:"nudity-info-actions"},[t("button",{class:"nudity-info-button",onClick:Oe},i[45]||(i[45]=[t("i",{class:"fas fa-copy"},null,-1),t("span",null,"Copy",-1)])),t("button",{class:"nudity-info-button",onClick:Ge},i[46]||(i[46]=[t("i",{class:"fas fa-language"},null,-1),t("span",null,"Translate",-1)]))])],4)):p("",!0)],64)}}},Oa=Be(ja,[["__scopeId","data-v-fc69fc00"]]);export{Oa as default};
