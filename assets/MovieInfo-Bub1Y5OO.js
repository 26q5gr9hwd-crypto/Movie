import{_ as je,r as m,c as V,b as d,d as r,e as t,s as le,t as y,K as ge,g as h,L as Ae,n as L,q as Ke,u as st,i as kt,O as io,z as it,l as De,o as We,P as yt,x as Be,E as ao,f as ve,Q as ut,m as ee,R as ce,y as X,U as D,S as Mo,D as dt,V as Se,W as ro,X as gt,Y as ot,Z as Lo,$ as Qt,a0 as Io,k as Ro,v as nt,a1 as To,a2 as Te,w as Jt,a3 as lt,a4 as Ao,a5 as So,a6 as Po,a7 as xo,a8 as eo,a9 as jo,aa as Uo,a as Bo,ab as to,ac as Ho,ad as No,ae as Do}from"./index-bP2FJ4L4.js";import{_ as Vo,a as oo,b as no,M as lo}from"./MovieList-Bz-EfKe4.js";import{S as uo}from"./SpinnerLoading-DeJtVj3k.js";import{N as ct}from"./ToastMessage-0fXVFTfA.js";import{u as $o,S as Oo,a as Fo}from"./trailer-vs2mHpUh.js";import{u as co,f as qo,a as Ko}from"./dateUtils-BJYqnfJ3.js";const Ze="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVR4nO2ZQUoDMRSGR7eewHoFsVS0HkUUXNXqASqK2EURBPFIVRe6c+UN1CvUXWvbT4KvMAwzNnnJdCrmg1BKad7/v7y0b5IkiUQiCwGoAx3gQjEugZ0qxTeAIX6MKjMBnBOGS62AVWAPOHVYdlMu9YArYOhphLeBT+ALmOKGEd2QubaAK+B2zngFxt4GgDXgGZjgR8ch5oEkCi8DkvlnRcYLV0Apfqw10M7JvPkV6AN3FmVwK+WyZRnvMEe8ef/ibECyb2o+zRuwnpQAxeLNivQ0BvYyE46qEJ/8fK4ycJKp/X4V4n0MdDNfukkqEO9jwP1LDgD7BeKPgmgp04CL+KUz4Cp+qQxoxC+NAdsNm4c0hWkukkUa8BGfegiadbFDq3/2UAZ8xc+QVvzMtqcKYkBaZ5/MN5xEl2DgLGDZ1KswsC09FPJqXTZoNm5oA6kyMGI2FxqfkluJ0uMTDfhBXAHiHvCCWEL8/RLqlv1MPCf+TSZ+13WC7KnEfWlqcwAeU7GNjnbiQsG5UC1ZAEAt1UMhOpquk6zknMy9l20C2AA+MnEHRo9msuOCs9EH4Fp5TVQ0rqVs0plH4re02Qh1Oq1lCjypsp+5H3gKcD/gykTirqnFZ/ZDy+OGxpapzD+QePrM/2KkKfcGPcv7AdvRkz23G1x4JPIP+AY3r/ywUk/2JAAAAABJRU5ErkJggg==",zo="/reyohoho/assets/icon-shikimori-DGvXK9Jc.svg",ft=s=>{const e=document.createElement("div");e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgba(0, 0, 0, 0.8)",e.style.color="white",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e.style.fontSize="2rem",e.style.zIndex="99000",e.textContent=s,document.body.appendChild(e),setTimeout(()=>{document.body.removeChild(e)},2e3)},Wo={key:0},Go={key:1},Yo={class:"players-list"},Zo=["onClick"],Xo={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},Qo={key:0},Jo={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},en={key:1},tn={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},on=["onClick"],nn={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},ln={__name:"PlayerModal",props:{players:{type:Array,required:!0},selectedPlayer:{type:Object,default:null}},emits:["close","select"],setup(s,{emit:e}){const i=s,o=e,w=m(null),_=V(()=>i.players.filter(g=>!E(g)&&!M(g))),c=V(()=>i.players.some(g=>E(g))),v=V(()=>i.players.some(g=>M(g))),E=g=>g.key.toUpperCase().includes("HDREZKA"),M=g=>g.key.toUpperCase().includes("KODIK"),n=g=>g.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"").replace(/KODIK>/,"").trim(),a=g=>{o("select",g),o("close")},p=g=>i.selectedPlayer&&i.selectedPlayer.key===g.key,C=g=>i.selectedPlayer?g==="hdrezka"&&E(i.selectedPlayer)||g==="kodik"&&M(i.selectedPlayer):!1,P=g=>{w.value=g},R=()=>{w.value=null},T=g=>{let A=i.players.filter(S=>g==="hdrezka"&&E(S)||g==="kodik"&&M(S));return g==="kodik"?A.sort((S,O)=>n(S.translate).localeCompare(n(O.translate))):A},I=g=>T(g).some(A=>A.warning);return(g,A)=>(r(),d("div",{class:"modal",onClick:A[4]||(A[4]=Ke(S=>g.$emit("close"),["self"]))},[t("div",{class:"modal-content",onClick:A[3]||(A[3]=Ke(()=>{},["stop"]))},[t("button",{class:"close",onClick:A[0]||(A[0]=S=>g.$emit("close"))},"√ó"),w.value?(r(),d("h2",Go,[t("button",{class:"back-btn",onClick:R},"‚Üê –ù–∞–∑–∞–¥"),le(" "+y(w.value==="hdrezka"?"ReYohoho - HDrezka":"Kodik"),1)])):(r(),d("h2",Wo,"–í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–µ–µ—Ä")),t("ul",Yo,[w.value?(r(!0),d(ge,{key:1},Ae(T(w.value),S=>(r(),d("li",{key:S.key},[t("button",{class:L(["player-item",{active:p(S)}]),onClick:O=>a(S)},[le(y(n(S.translate))+" ",1),S.warning?(r(),d("span",nn,"warning")):h("",!0)],10,on)]))),128)):(r(),d(ge,{key:0},[(r(!0),d(ge,null,Ae(_.value,S=>(r(),d("li",{key:S.key},[t("button",{class:L(["player-item",{active:p(S)}]),onClick:O=>a(S)},[le(y(n(S.translate))+" ",1),S.warning?(r(),d("span",Xo,"warning")):h("",!0)],10,Zo)]))),128)),c.value?(r(),d("li",Qo,[t("button",{class:L(["group-item",{active:C("hdrezka")}]),onClick:A[1]||(A[1]=S=>P("hdrezka"))},[A[5]||(A[5]=t("span",{class:"material-icons group-icon"},"folder",-1)),A[6]||(A[6]=le(" ReYohoho - HDrezka ")),I("hdrezka")?(r(),d("span",Jo,"warning")):h("",!0)],2)])):h("",!0),v.value?(r(),d("li",en,[t("button",{class:L(["group-item",{active:C("kodik")}]),onClick:A[2]||(A[2]=S=>P("kodik"))},[A[7]||(A[7]=t("span",{class:"material-icons group-icon"},"folder",-1)),A[8]||(A[8]=le(" Kodik ")),I("kodik")?(r(),d("span",tn,"warning")):h("",!0)],2)])):h("",!0)],64))])])]))}},sn=je(ln,[["__scopeId","data-v-8b8d2b67"]]),an={class:"players-list"},rn=["src"],un={key:1,class:"controls"},dn={class:"main-controls"},cn={class:"material-icons"},vn={class:"list-button-item"},mn={class:"material-icons"},fn={class:"list-button-item"},gn={class:"material-icons"},kn={class:"list-button-item"},yn={class:"list-button-item"},hn={class:"material-icons"},pn={class:"list-button-item"},bn={class:"material-icons"},wn={class:"tooltip-container","data-tooltip-container":"dimming"},Cn={class:"material-icons"},_n={class:"tooltip-container","data-tooltip-container":"blur"},En={class:"tooltip-container","data-tooltip-container":"compressor"},Mn={class:"custom-tooltip","data-tooltip":"compressor"},Ln={class:"tooltip-container","data-tooltip-container":"mirror"},In={class:"custom-tooltip","data-tooltip":"mirror"},Rn={class:"tooltip-container","data-tooltip-container":"theater"},Tn={class:"material-symbols-outlined"},An={class:"custom-tooltip","data-tooltip":"theater"},Sn={class:"tooltip-container","data-tooltip-container":"aspect_ratio"},Pn={class:"current-ratio"},xn=["onClick"],jn={key:0,class:"tooltip-container","data-tooltip-container":"app_link"},Un={class:"custom-tooltip","data-tooltip":"app_link"},Bn={key:1,class:"tooltip-container","data-tooltip-container":"copy_link"},Hn={class:"custom-tooltip","data-tooltip":"copy_link"},Nn={key:0,class:"desktop-list-buttons"},Dn={class:"tooltip-container"},Vn={class:"material-icons"},$n={class:"custom-tooltip"},On={class:"tooltip-container"},Fn={class:"material-icons"},qn={class:"custom-tooltip"},Kn={class:"tooltip-container"},zn={class:"custom-tooltip"},Wn={class:"tooltip-container"},Gn={class:"material-icons"},Yn={class:"custom-tooltip"},Zn={class:"tooltip-container"},Xn={class:"material-icons"},Qn={class:"custom-tooltip"},Jn={__name:"PlayerComponent",props:{kpId:String,movieInfo:{type:Object,default:()=>({})}},emits:["update:selectedPlayer","update:movieInfo"],setup(s,{emit:e}){const i=st(),o=$o(),w=kt(),_=io(),c=it(),v=m(_.params.kp_id),E=s,M=e,n=m([]),a=m(null),p=m(!0),C=m(!1),P=m(!1),R=m(null),T=m(null),I=m(!1),g=m(""),A=m(null),S=m(window.innerHeight*.9),O=V(()=>"".concat(S.value,"px")),F=V(()=>i.isMobile),z=V(()=>!!window.electronAPI),H=m(null),be=m(!1);let Le=null;const ye=m(null),Ie=m(null),U=m(null),te=m(null),W=m(!1),q=m(!1),se=m(null),ue=m(null),ie=m(null),he=m(null),Re=m(null),pe=m(null),He=f=>{const l=document.querySelector('[data-tooltip-container="'.concat(f,'"]')),x=document.querySelector('[data-tooltip="'.concat(f,'"]'));if(!l||!x)return;const Y=l.getBoundingClientRect(),ne=x.getBoundingClientRect(),fe=window.innerHeight;Y.bottom+ne.height>fe?(x.style.top="auto",x.style.bottom="100%",x.style.marginTop="0",x.style.marginBottom="12px",x.style.transform="translateX(-50%)"):(x.style.top="100%",x.style.bottom="auto",x.style.marginTop="12px",x.style.marginBottom="0",x.style.transform="translateX(-50%)")},de=f=>{H.value=f,be.value=!1,clearTimeout(Le),Se(()=>{He(f)})},Pe=()=>{be.value||(Le=setTimeout(()=>{H.value=null},300))},_e=()=>{be.value=!0,clearTimeout(Le)},J=()=>{be.value=!1,H.value=null},b=V({get:()=>o.aspectRatio,set:f=>o.updateAspectRatio(f)}),u=V({get:()=>o.isCentered,set:f=>o.updateCentering(f)}),Z=V(()=>{var f,l,x,Y,ne,fe,$e,Oe,Fe,qe;return((l=(f=E.movieInfo)==null?void 0:f.lists)==null?void 0:l.isFavorite)||((Y=(x=E.movieInfo)==null?void 0:x.lists)==null?void 0:Y.isWatching)||((fe=(ne=E.movieInfo)==null?void 0:ne.lists)==null?void 0:fe.isLater)||((Oe=($e=E.movieInfo)==null?void 0:$e.lists)==null?void 0:Oe.isCompleted)||((qe=(Fe=E.movieInfo)==null?void 0:Fe.lists)==null?void 0:qe.isAbandoned)}),oe=V(()=>o.preferredPlayer),we=m(0),me=f=>f.toUpperCase(),ke=()=>{if(C.value||!T.value)return;const[f,l]=b.value.split(":").map(Number);S.value=window.innerHeight*.9,we.value=Math.min(T.value.clientWidth*(l/f),S.value)},re=V(()=>{if(C.value)return{};const[f,l]=b.value.split(":").map(Number),x=S.value*(f/l);return{width:"100%",maxWidth:"".concat(x,"px"),maxHeight:O.value,margin:"0 auto",overflow:"hidden"}}),Ce=V(()=>{const[f,l]=b.value.split(":").map(Number);return{position:"relative",width:"100%",paddingTop:"".concat(l/f*100,"%")}}),Q=()=>{T.value&&setTimeout(()=>{Se(()=>{T.value.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})},500)},ae=async()=>{try{g.value="",A.value=null;const f=await Mo(E.kpId);if(n.value=Object.entries(f).map(([l,x])=>({key:l.toUpperCase(),...x})),n.value.length>0){if(oe.value){const l=me(oe.value),x=n.value.find(Y=>me(Y.key)===l);a.value=x||n.value[0]}else a.value=n.value[0];M("update:selectedPlayer",a.value)}}catch(f){const{message:l,code:x}=dt(f);g.value=l,A.value=x,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–ª–µ–µ—Ä–æ–≤:",f)}},Ee=()=>{I.value=!0},k=()=>{I.value=!1},$=()=>{try{return se.value||(se.value=new(window.AudioContext||window.webkitAudioContext)),ue.value||(ue.value=se.value.createDynamicsCompressor(),ue.value.threshold.value=-50,ue.value.knee.value=40,ue.value.ratio.value=12,ue.value.attack.value=0,ue.value.release.value=.25,he.value=se.value.createGain(),Re.value=se.value.createGain(),he.value.gain.value=0,Re.value.gain.value=1,ue.value.connect(he.value),he.value.connect(se.value.destination),Re.value.connect(se.value.destination)),!0}catch(f){return console.log("Error initializing audio context:",f),!1}},Me=async f=>{try{if(!se.value||pe.value===f)return!0;const l=R.value,x=(l==null?void 0:l.src)||"";if(x.includes("videoframe")||x.includes("kinoserial.net")||x.includes("allarknow"))return console.log("Player detected as unsupported for compressor:",x),pe.value=f,ie.value=null,q.value=!1,z.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –ø–ª–µ–µ—Ä–æ–º"),!1;if(ie.value)try{ie.value.disconnect()}catch(ne){}const Y=async(ne=0)=>{ne>0&&await new Promise(fe=>setTimeout(fe,ne));try{return ie.value=se.value.createMediaElementSource(f),pe.value=f,ie.value.connect(ue.value),ie.value.connect(Re.value),console.log("Video audio setup completed (attempt with ".concat(ne,"ms delay)")),!0}catch(fe){if(fe.name==="InvalidStateError"&&fe.message.includes("already connected"))return console.log("MediaElementSource already connected (".concat(ne,"ms delay attempt)")),!1;throw fe}};return await Y(0)||await Y(100)||await Y(300)||await Y(800)?!0:(console.log("Video element has internal audio processing, compressor not available for this player"),pe.value=f,ie.value=null,q.value=!1,z.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –ø–ª–µ–µ—Ä–æ–º"),!1)}catch(l){return console.log("Error setting up video audio:",l),!1}},Ve=async f=>{if(R.value)try{const l=R.value,x=l.contentDocument||l.contentWindow.document;if(!x)return;const Y=x.querySelectorAll("video");if(Y.length===0)return;const ne=Y[0];if(!$())return;if(!await Me(ne)||!ie.value){console.log("Compressor not available for this player");return}f&&!q.value?(he.value.gain.setValueAtTime(1,se.value.currentTime),Re.value.gain.setValueAtTime(0,se.value.currentTime),q.value=!0,z.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –≤–∫–ª—é—á—ë–Ω"),console.log("Compressor enabled")):!f&&q.value&&(he.value.gain.setValueAtTime(0,se.value.currentTime),Re.value.gain.setValueAtTime(1,se.value.currentTime),q.value=!1,z.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –æ—Ç–∫–ª—é—á—ë–Ω"),console.log("Compressor disabled"))}catch(l){console.log("Compressor error:",l),z.value&&window.electronAPI.showToast("–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä–∞")}},Ge=()=>{z.value?window.electronAPI.sendHotKey("F2"):(ft("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},B=()=>{z.value?(ze.value=!ze.value,Ve(ze.value)):(ft("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},K=()=>{z.value?(Ye.value=!Ye.value,vo(Ye.value)):(ft("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},G=()=>{C.value=!C.value,C.value?(window.addEventListener("mousemove",Ne),document.addEventListener("keydown",vt),document.body.classList.add("no-scroll")):(window.removeEventListener("mousemove",Ne),document.removeEventListener("keydown",vt),document.body.classList.remove("no-scroll")),P.value=C.value,Se(()=>Q())},j=m(null),Ne=()=>{j.value=setTimeout(()=>{clearTimeout(j.value),P.value=!1},4e3),P.value=!0},Ue=V(()=>i.dimmingEnabled),at=()=>{C.value||i.toggleDimming()},ze=V({get:()=>o.compressorEnabled,set:f=>o.updateCompressor(f)}),Ye=V({get:()=>o.mirrorEnabled,set:f=>o.updateMirror(f)}),vo=f=>{if(R.value)try{const l=R.value,x=l.contentDocument||l.contentWindow.document;if(!x)return;const Y=x.querySelectorAll("video");if(Y.length>0&&(Y.forEach(ne=>{f?ne.style.transform="scaleX(-1)":ne.style.transform="scaleX(1)"}),W.value=f,z.value)){const ne=f?"–ó–µ—Ä–∫–∞–ª–æ –≤–∫–ª—é—á–µ–Ω–æ":"–ó–µ—Ä–∫–∞–ª–æ –æ—Ç–∫–ª—é—á–µ–Ω–æ";window.electronAPI.showToast(ne)}}catch(l){}},mo=()=>{te.value&&clearInterval(te.value),te.value=setInterval(()=>{if(R.value)try{const f=R.value,l=f.contentDocument||f.contentWindow.document;if(!l)return;const x=l.querySelectorAll("video");if(x.length>0){const Y=x[0],fe=Y.style.transform==="scaleX(-1)";Ye.value&&!fe?(Y.style.transform="scaleX(-1)",W.value=!0):!Ye.value&&fe&&(Y.style.transform="scaleX(1)",W.value=!1),pe.value!==Y?(console.log("Video element changed, reinitializing compressor"),pe.value=null,q.value=!1,ze.value&&setTimeout(()=>{Ve(!0)},500)):ze.value!==q.value&&ie.value&&(console.log("Compressor state mismatch, reapplying"),Ve(ze.value))}}catch(f){}},1e3)},fo=()=>{p.value=!1,mo()},vt=f=>{(f.key==="Escape"&&C.value||f.altKey&&f.keyCode===84)&&G()},Ct=f=>{b.value=f,setTimeout(()=>{u.value&&Q()},310)},go=()=>{const f="reyohoho://#".concat(v.value);try{window.location.href=f}catch(l){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Å—ã–ª–∫–∏:",l)}},ko=()=>{const f=window.location.href;navigator.clipboard.writeText(f).then(()=>{}),ye.value.showNotification("–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∏–ª—å–º —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞")};function yo(f){return f.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"HDRezka - ").replace(/KODIK>/,"Kodik - ").trim()}const ho=V(()=>{var f,l;return z.value?!1:!((l=(f=a.value)==null?void 0:f.key)!=null&&l.toUpperCase().includes("TORRENTS"))}),po=()=>{try{ie.value&&(ie.value.disconnect(),ie.value=null),se.value&&(se.value.close(),se.value=null),ue.value=null,he.value=null,Re.value=null,pe.value=null,q.value=!1}catch(f){console.log("Error cleaning up audio context:",f)}},bo=f=>{var l;if(((l=a.value)==null?void 0:l.key)===f.key){k();return}a.value=f,p.value=!0,W.value=!1,q.value=!1,pe.value=null,te.value&&(clearInterval(te.value),te.value=null),o.updatePreferredPlayer(me(f.key)),M("update:selectedPlayer",f)};De(a,f=>{if(f)if(p.value=!0,W.value=!1,q.value=!1,pe.value=null,te.value&&(clearInterval(te.value),te.value=null),o.updatePreferredPlayer(me(f.key)),M("update:selectedPlayer",f),f.key.toUpperCase().includes("TORRENTS")){const l=document.querySelector(".rocketme_fon");l&&(l.style.display="none");const x=document.querySelector(".pm_preloader");x&&(x.style.display="none")}else{const l=document.querySelector(".rocketme_fon");l&&(l.style.display="");const x=document.querySelector(".pm_preloader");x&&(x.style.display="")}}),De(()=>_.params.kp_id,async f=>{f&&f!==v.value&&(v.value=f,W.value=!1,q.value=!1,pe.value=null,te.value&&(clearInterval(te.value),te.value=null),u.value&&Q())},{immediate:!0});const rt=["16:9","12:5","4:3"],wo=()=>{const l=(rt.indexOf(b.value)+1)%rt.length;Ct(rt[l])},Co=f=>{var x,Y,ne,fe,$e,Oe,Fe,qe,Xe,Qe,Je,et,tt;return(tt={[D.FAVORITE]:((Y=(x=E.movieInfo)==null?void 0:x.lists)==null?void 0:Y.isFavorite)||!1,[D.HISTORY]:((fe=(ne=E.movieInfo)==null?void 0:ne.lists)==null?void 0:fe.isHistory)||!1,[D.LATER]:((Oe=($e=E.movieInfo)==null?void 0:$e.lists)==null?void 0:Oe.isLater)||!1,[D.COMPLETED]:((qe=(Fe=E.movieInfo)==null?void 0:Fe.lists)==null?void 0:qe.isCompleted)||!1,[D.ABANDONED]:((Qe=(Xe=E.movieInfo)==null?void 0:Xe.lists)==null?void 0:Qe.isAbandoned)||!1,[D.WATCHING]:((et=(Je=E.movieInfo)==null?void 0:Je.lists)==null?void 0:et.isWatching)||!1}[f])!=null?tt:!1},xe=async f=>{if(!w.token){ye.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:_o});return}try{const l={[D.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[D.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[D.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[D.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[D.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[D.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};Co(f)?(await ro(v.value,f),ye.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(l[f]))):(await gt(v.value,f),ye.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(l[f])))}catch(l){const{message:x,code:Y}=dt(l);ye.value.showNotification("".concat(x," ").concat(Y))}M("update:movieInfo")},_o=()=>{c.push("/login")},mt=V(()=>o.showFavoriteTooltip),Eo=()=>{c.push("/settings"),J()};return We(()=>{p.value=!0,ae(),F.value&&(b.value="4:3"),ke(),window.addEventListener("resize",ke),window.addEventListener("resize",He),u.value&&Q()}),yt(()=>{window.removeEventListener("resize",ke),window.removeEventListener("resize",He),window.removeEventListener("mousemove",Ne),document.removeEventListener("keydown",vt),document.body.classList.remove("no-scroll"),te.value&&clearInterval(te.value),po()}),(f,l)=>{var x,Y,ne,fe,$e,Oe,Fe,qe,Xe,Qe,Je,et,tt,_t,Et,Mt,Lt,It,Rt,Tt,At,St,Pt,xt,jt,Ut,Bt,Ht,Nt,Dt,Vt,$t,Ot,Ft,qt,Kt,zt,Wt,Gt,Yt,Zt,Xt;return g.value?(r(),Be(ao,{key:0,message:g.value,code:A.value},null,8,["message","code"])):(r(),d(ge,{key:1},[t("div",an,[l[39]||(l[39]=t("span",null,"–ü–ª–µ–µ—Ä:",-1)),t("button",{class:"player-btn",onClick:Ee},y(a.value?yo(a.value.translate).toUpperCase():"–ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–µ–µ—Ä–æ–≤..."),1)]),I.value?(r(),Be(sn,{key:0,players:n.value,"selected-player":a.value,onClose:k,onSelect:bo},null,8,["players","selected-player"])):h("",!0),t("div",{ref_key:"containerRef",ref:T,class:L(["player-container",{"theater-mode":C.value}]),style:ut(C.value?{}:re.value)},[t("div",{class:L(["iframe-wrapper",{pm_video:ho.value}]),style:ut(C.value?{}:Ce.value)},[ee(t("iframe",{ref_key:"playerIframe",ref:R,src:(x=a.value)==null?void 0:x.iframe,frameborder:"0",allowfullscreen:"",webkitallowfullscreen:"",class:L(["responsive-iframe",{"theater-mode-unlock":P.value,"theater-mode-lock":C.value,dimmed:Ue.value}]),onLoad:fo},null,42,rn),[[ce,!p.value&&((Y=a.value)==null?void 0:Y.iframe)]]),p.value?(r(),Be(uo,{key:0})):h("",!0)],6),C.value?(r(),d("button",{key:0,class:L(["close-theater-btn",{visible:P.value}]),onClick:G}," ‚úñ ",2)):h("",!0)],6),C.value?h("",!0):(r(),d("div",un,[t("div",dn,[F.value?h("",!0):(r(),d("div",{key:0,ref_key:"tooltipContainer",ref:Ie,class:"tooltip-container list-buttons-container","data-tooltip-container":"favorite"},[mt.value?(r(),d("button",{key:0,class:L(["favorite-btn",{active:(fe=(ne=s.movieInfo)==null?void 0:ne.lists)==null?void 0:fe.isFavorite}]),onMouseenter:l[0]||(l[0]=N=>de("favorite")),onMouseleave:Pe,onClick:l[1]||(l[1]=N=>xe(X(D).FAVORITE))},[t("span",cn,y((Oe=($e=s.movieInfo)==null?void 0:$e.lists)!=null&&Oe.isFavorite?"favorite":"favorite_border"),1),t("span",{class:L(["material-icons dropdown-arrow",{highlighted:Z.value}])},"expand_more",2)],34)):h("",!0),ee(t("div",{ref_key:"tooltip",ref:U,class:"custom-tooltip advanced-tooltip list-buttons-dropdown","data-tooltip":"favorite",onMouseenter:_e,onMouseleave:J},[t("div",vn,[t("button",{class:L(["favorite-btn",{active:(qe=(Fe=s.movieInfo)==null?void 0:Fe.lists)==null?void 0:qe.isFavorite}]),onClick:l[2]||(l[2]=N=>xe(X(D).FAVORITE))},[t("span",mn,y((Qe=(Xe=s.movieInfo)==null?void 0:Xe.lists)!=null&&Qe.isFavorite?"favorite":"favorite_border"),1),l[40]||(l[40]=t("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))],2)]),t("div",fn,[t("button",{class:L(["watching-btn",{active:(et=(Je=s.movieInfo)==null?void 0:Je.lists)==null?void 0:et.isWatching}]),onClick:l[3]||(l[3]=N=>xe(X(D).WATCHING))},[t("span",gn,y((_t=(tt=s.movieInfo)==null?void 0:tt.lists)!=null&&_t.isWatching?"visibility":"visibility_off"),1),l[41]||(l[41]=t("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))],2)]),t("div",kn,[t("button",{class:L(["later-btn",{active:(Mt=(Et=s.movieInfo)==null?void 0:Et.lists)==null?void 0:Mt.isLater}]),onClick:l[4]||(l[4]=N=>xe(X(D).LATER))},l[42]||(l[42]=[t("span",{class:"material-icons"},"watch_later",-1),t("span",{class:"button-label"},"–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ",-1)]),2)]),t("div",yn,[t("button",{class:L(["completed-btn",{active:(It=(Lt=s.movieInfo)==null?void 0:Lt.lists)==null?void 0:It.isCompleted}]),onClick:l[5]||(l[5]=N=>xe(X(D).COMPLETED))},[t("span",hn,y((Tt=(Rt=s.movieInfo)==null?void 0:Rt.lists)!=null&&Tt.isCompleted?"check_circle":"check_circle_outline"),1),l[43]||(l[43]=t("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))],2)]),t("div",pn,[t("button",{class:L(["abandoned-btn",{active:(St=(At=s.movieInfo)==null?void 0:At.lists)==null?void 0:St.isAbandoned}]),onClick:l[6]||(l[6]=N=>xe(X(D).ABANDONED))},[t("span",bn,y(((xt=(Pt=s.movieInfo)==null?void 0:Pt.lists)!=null&&xt.isAbandoned,"not_interested")),1),l[44]||(l[44]=t("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))],2)]),t("div",{class:"tooltip-hint"},[l[46]||(l[46]=t("span",{class:"material-icons"},"settings",-1)),t("span",null,[l[45]||(l[45]=le("–°—Ç–∏–ª—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ ")),t("a",{class:"settings-link",onClick:Eo},"–Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö")])])],544),[[ce,H.value==="favorite"&&mt.value]])],512)),F.value?h("",!0):(r(),d(ge,{key:1},[t("div",wn,[t("button",{class:L(["dimming-btn",{active:Ue.value}]),onMouseenter:l[7]||(l[7]=N=>de("dimming")),onMouseleave:l[8]||(l[8]=N=>H.value=null),onClick:at},[t("span",Cn,y(Ue.value?"light_mode":"dark_mode"),1)],34),ee(t("div",{class:"custom-tooltip","data-tooltip":"dimming"},y(Ue.value?"–û—Ç–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ":"–í–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ"),513),[[ce,H.value==="dimming"]])]),t("div",_n,[t("button",{class:L(["blur-btn",{"electron-only":!z.value}]),onMouseenter:l[9]||(l[9]=N=>de("blur")),onMouseleave:l[10]||(l[10]=N=>H.value=null),onClick:Ge},l[47]||(l[47]=[t("span",{class:"material-icons"},"blur_on",-1)]),34),ee(t("div",{class:"custom-tooltip","data-tooltip":"blur"},y(z.value?"–ë–ª—é—Ä":"–ë–ª—é—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[ce,H.value==="blur"]])]),t("div",En,[t("button",{class:L(["material-symbols-outlined",{active:ze.value,"electron-only":!z.value}]),onMouseenter:l[11]||(l[11]=N=>de("compressor")),onMouseleave:l[12]||(l[12]=N=>H.value=null),onClick:B},l[48]||(l[48]=[t("span",{class:"material-icons"},"graphic_eq",-1)]),34),ee(t("div",Mn," –ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä ",512),[[ce,H.value==="compressor"]])]),t("div",Ln,[t("button",{class:L(["mirror-btn",{active:Ye.value,"electron-only":!z.value}]),onMouseenter:l[13]||(l[13]=N=>de("mirror")),onMouseleave:l[14]||(l[14]=N=>H.value=null),onClick:K},l[49]||(l[49]=[t("span",{class:"material-icons"},"flip",-1)]),34),ee(t("div",In," –ó–µ—Ä–∫–∞–ª–æ ",512),[[ce,H.value==="mirror"]])]),t("div",Rn,[t("button",{class:"theater-mode-btn",onMouseenter:l[15]||(l[15]=N=>de("theater")),onMouseleave:l[16]||(l[16]=N=>H.value=null),onClick:G},[t("span",Tn,y(C.value?"fullscreen_exit":"aspect_ratio"),1)],32),ee(t("div",An,[le(y(C.value?"–í—ã–π—Ç–∏ –∏–∑ —Ç–µ–∞—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞":"–¢–µ–∞—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º")+" ",1),l[50]||(l[50]=t("span",{class:"shortcut-hint"},"Alt+T",-1))],512),[[ce,H.value==="theater"]])]),t("div",Sn,[t("button",{class:"aspect-ratio-dropdown-btn",onMouseenter:l[17]||(l[17]=N=>de("aspect_ratio")),onMouseleave:Pe,onClick:wo},[t("span",Pn,y(b.value),1)],32),ee(t("div",{class:"custom-tooltip advanced-tooltip aspect-ratio-dropdown","data-tooltip":"aspect_ratio",onMouseenter:_e,onMouseleave:J},[(r(),d(ge,null,Ae(rt,N=>t("div",{key:N,class:L(["aspect-ratio-option",{active:b.value===N}]),onClick:xa=>Ct(N)},y(N),11,xn)),64))],544),[[ce,H.value==="aspect_ratio"]])]),t("div",{class:"tooltip-container","data-tooltip-container":"centering",onMouseenter:l[19]||(l[19]=N=>de("centering")),onMouseleave:Pe},[t("button",{class:"center-btn",onClick:Q},l[51]||(l[51]=[t("span",{class:"material-icons"},"center_focus_strong",-1)])),ee(t("div",{class:"custom-tooltip advanced-tooltip","data-tooltip":"centering",onMouseenter:_e,onMouseleave:J},[l[52]||(l[52]=le(" –û—Ç—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–ª–µ–µ—Ä ")),ve(Oo,{modelValue:u.value,"onUpdate:modelValue":l[18]||(l[18]=N=>u.value=N),title:"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞"},null,8,["modelValue"]),l[53]||(l[53]=t("span",{class:"tooltip-title"},"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞",-1))],544),[[ce,H.value==="centering"]])],32),z.value?h("",!0):(r(),d("div",jn,[t("button",{class:"app-link-btn",onMouseenter:l[20]||(l[20]=N=>de("app_link")),onMouseleave:l[21]||(l[21]=N=>H.value=null),onClick:go},l[54]||(l[54]=[t("span",{class:"material-icons"},"open_in_new",-1)]),32),ee(t("div",Un," –û—Ç–∫—Ä—ã—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ",512),[[ce,H.value==="app_link"]])])),z.value?(r(),d("div",Bn,[t("button",{class:"copy-link-btn",onMouseenter:l[22]||(l[22]=N=>de("copy_link")),onMouseleave:l[23]||(l[23]=N=>H.value=null),onClick:ko},l[55]||(l[55]=[t("span",{class:"material-icons"},"content_copy",-1)]),32),ee(t("div",Hn," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É ",512),[[ce,H.value==="copy_link"]])])):h("",!0)],64))]),!F.value&&!mt.value?(r(),d("div",Nn,[t("div",Dn,[t("button",{class:L(["favorite-btn",{active:(Ut=(jt=s.movieInfo)==null?void 0:jt.lists)==null?void 0:Ut.isFavorite}]),onMouseenter:l[24]||(l[24]=N=>de("favorite")),onMouseleave:l[25]||(l[25]=N=>H.value=null),onClick:l[26]||(l[26]=N=>xe(X(D).FAVORITE))},[t("span",Vn,y((Ht=(Bt=s.movieInfo)==null?void 0:Bt.lists)!=null&&Ht.isFavorite?"favorite":"favorite_border"),1)],34),ee(t("div",$n,y("–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"),512),[[ce,H.value==="favorite"]])]),t("div",On,[t("button",{class:L(["watching-btn",{active:(Dt=(Nt=s.movieInfo)==null?void 0:Nt.lists)==null?void 0:Dt.isWatching}]),onMouseenter:l[27]||(l[27]=N=>de("watching")),onMouseleave:l[28]||(l[28]=N=>H.value=null),onClick:l[29]||(l[29]=N=>xe(X(D).WATCHING))},[t("span",Fn,y(($t=(Vt=s.movieInfo)==null?void 0:Vt.lists)!=null&&$t.isWatching?"visibility":"visibility_off"),1)],34),ee(t("div",qn,y("–°–º–æ—Ç—Ä—é"),512),[[ce,H.value==="watching"]])]),t("div",Kn,[t("button",{class:L(["later-btn",{active:(Ft=(Ot=s.movieInfo)==null?void 0:Ot.lists)==null?void 0:Ft.isLater}]),onMouseenter:l[30]||(l[30]=N=>de("later")),onMouseleave:l[31]||(l[31]=N=>H.value=null),onClick:l[32]||(l[32]=N=>xe(X(D).LATER))},l[56]||(l[56]=[t("span",{class:"material-icons"},"watch_later",-1)]),34),ee(t("div",zn,y("–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"),512),[[ce,H.value==="later"]])]),t("div",Wn,[t("button",{class:L(["completed-btn",{active:(Kt=(qt=s.movieInfo)==null?void 0:qt.lists)==null?void 0:Kt.isCompleted}]),onMouseenter:l[33]||(l[33]=N=>de("completed")),onMouseleave:l[34]||(l[34]=N=>H.value=null),onClick:l[35]||(l[35]=N=>xe(X(D).COMPLETED))},[t("span",Gn,y((Wt=(zt=s.movieInfo)==null?void 0:zt.lists)!=null&&Wt.isCompleted?"check_circle":"check_circle_outline"),1)],34),ee(t("div",Yn,y("–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"),512),[[ce,H.value==="completed"]])]),t("div",Zn,[t("button",{class:L(["abandoned-btn",{active:(Yt=(Gt=s.movieInfo)==null?void 0:Gt.lists)==null?void 0:Yt.isAbandoned}]),onMouseenter:l[36]||(l[36]=N=>de("abandoned")),onMouseleave:l[37]||(l[37]=N=>H.value=null),onClick:l[38]||(l[38]=N=>xe(X(D).ABANDONED))},[t("span",Xn,y(((Xt=(Zt=s.movieInfo)==null?void 0:Zt.lists)!=null&&Xt.isAbandoned,"not_interested")),1)],34),ee(t("div",Qn,y("–ë—Ä–æ—à–µ–Ω–æ"),512),[[ce,H.value==="abandoned"]])])])):h("",!0)])),ve(ct,{ref_key:"notificationRef",ref:ye},null,512)],64))}}},so=je(Jn,[["__scopeId","data-v-17def0fa"]]),el={key:0,class:"carousel-container"},tl={class:"carousel-wrapper"},ol=["onClick"],nl=["src","alt"],ll={class:"video-name"},sl={key:0,class:"video-player"},il=["src"],al={__name:"TrailerCarousel",props:{videos:{type:Array,required:!0},activeVideoIndex:{type:Number,default:null}},emits:["select"],setup(s,{emit:e}){const i=st(),o=V(()=>i.isMobile),w=s,_=e,c=m(w.activeVideoIndex),v=m(null),E=m(!1),M=m(!1),n=()=>{if(!v.value)return;const{scrollLeft:T,scrollWidth:I,clientWidth:g}=v.value;E.value=T>0,M.value=T<I-g-1},a=T=>{if(!v.value)return;const I=v.value.querySelector(".carousel-item");if(!I)return;const g=I.clientWidth+16;v.value.scrollBy({left:g*T,behavior:"smooth"})},p=T=>{c.value=T,_("select",w.videos[T])},C=()=>n(),P=m([]),R=async T=>{try{return(await fetch("https://img.youtube.com/vi/".concat(T,"/0.jpg"))).ok}catch(I){return!1}};return We(async()=>{const T=w.videos.map(async g=>await R(g.videoId)?g:null),I=await Promise.all(T);P.value=I.filter(Boolean),n(),window.addEventListener("resize",C)}),De(()=>w.videos,async T=>{const I=T.map(async A=>await R(A.videoId)?A:null),g=await Promise.all(I);P.value=g.filter(Boolean)}),De(()=>w.activeVideoIndex,T=>{c.value=T}),yt(()=>{window.removeEventListener("resize",C)}),(T,I)=>P.value.length?(r(),d("div",el,[I[4]||(I[4]=t("h2",null,"–¢—Ä–µ–π–ª–µ—Ä—ã (YouTube)",-1)),t("div",tl,[ee(t("button",{class:"scroll-button left",onClick:I[0]||(I[0]=g=>a(-1))},I[2]||(I[2]=[t("span",{class:"material-symbols-outlined"},"arrow_back_ios",-1)]),512),[[ce,!o.value&&E.value]]),t("div",{ref_key:"carousel",ref:v,class:"carousel",onScroll:n},[(r(!0),d(ge,null,Ae(P.value,(g,A)=>(r(),d("div",{key:A,class:"carousel-item",onClick:S=>p(A)},[t("img",{src:"https://img.youtube.com/vi/".concat(g.videoId,"/0.jpg"),alt:g.name},null,8,nl),t("div",ll,y(g.name),1)],8,ol))),128))],544),ee(t("button",{class:"scroll-button right",onClick:I[1]||(I[1]=g=>a(1))},I[3]||(I[3]=[t("span",{class:"material-symbols-outlined"},"arrow_forward_ios",-1)]),512),[[ce,!o.value&&M.value]])]),c.value!==null?(r(),d("div",sl,[t("iframe",{src:s.videos[c.value].iframeUrl,frameborder:"0",allowfullscreen:""},null,8,il)])):h("",!0)])):h("",!0)}},rl=je(al,[["__scopeId","data-v-4a5806b3"]]),ul={class:"rating-container"},dl={class:"rating-display"},cl={class:"rating-numbers"},vl=["onClick","onMouseenter"],ml={key:0,class:"tooltip-footer"},fl={class:"rating-numbers mobile-rating-numbers"},gl=["onClick"],kl={key:0,class:"mobile-modal-footer"},yl={__name:"MovieRating",props:{kpId:{type:String,required:!0},showDash:{type:Boolean,default:!1}},setup(s){const e=st(),i=it(),o=s,w=m(null),_=m(null),c=m(null),v=m(null),E=m(0),M=m(!1),n=m(!1);let a=null;const p=S=>S?S.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",C=()=>{a=setTimeout(()=>{M.value=!1,e.isMobile||(n.value=!1)},100)},P=()=>{a&&(clearTimeout(a),a=null),M.value=!0},R=()=>{e.isMobile&&(n.value=!n.value)},T=()=>{i.push("/login")},I=async()=>{try{const S=await Lo(o.kpId);_.value=S.user_rating,c.value=S.average_rating,v.value=p(S.vote_count)}catch(S){console.error("Error loading rating:",S)}},g=async S=>{var O;try{S===_.value?(await Qt(o.kpId,null),_.value=null,w.value.showNotification("–û—Ü–µ–Ω–∫–∞ —É–¥–∞–ª–µ–Ω–∞")):(await Qt(o.kpId,S),_.value=S,w.value.showNotification("–û—Ü–µ–Ω–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞")),e.isMobile&&(n.value=!1),I()}catch(F){console.error("Error setting rating:",F),((O=F.response)==null?void 0:O.status)===401?w.value.showNotification('–î–ª—è –æ—Ü–µ–Ω–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:T}):w.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ü–µ–Ω–∫–∏"),e.isMobile&&(n.value=!1)}},A=()=>{n.value=!1};return We(()=>{I()}),(S,O)=>(r(),d("div",ul,[t("div",dl,[t("a",{href:"#",class:L(["rating-link",{"has-rating":_.value}]),onMouseenter:O[0]||(O[0]=F=>M.value=!0),onMouseleave:C,onClick:Ke(R,["prevent"])},[O[3]||(O[3]=t("img",{src:Vo,alt:"ReYohoho",class:"rating-logo"},null,-1)),t("span",{class:L(["average-rating",X(ot)(c.value)])},y(c.value?c.value.toFixed(1).replace(/\.0$/,""):"‚Äî"),3)],34),ee(t("div",{class:"rating-tooltip",onMouseenter:P,onMouseleave:C},[t("div",cl,[(r(),d(ge,null,Ae(10,F=>t("button",{key:F,class:L(["number-btn",{active:F===_.value,hover:F===E.value,"average-highlight":c.value&&F<=Math.round(c.value)}]),onClick:z=>g(F),onMouseenter:z=>E.value=F,onMouseleave:O[1]||(O[1]=z=>E.value=0)},y(F),43,vl)),64))]),v.value?(r(),d("div",ml,"–û—Ü–µ–Ω–æ–∫: "+y(v.value),1)):h("",!0)],544),[[ce,(M.value||n.value)&&!X(e).isMobile]])]),ve(ct,{ref_key:"notificationRef",ref:w},null,512),X(e).isMobile&&n.value?(r(),d("div",{key:0,class:"mobile-modal-overlay",onClick:A},[t("div",{class:"mobile-modal",onClick:O[2]||(O[2]=Ke(()=>{},["stop"]))},[t("div",{class:"mobile-modal-header"},[O[4]||(O[4]=t("h3",null,"–û—Ü–µ–Ω–∏—Ç—å —Ñ–∏–ª—å–º",-1)),t("button",{class:"close-button",onClick:A},"√ó")]),t("div",fl,[(r(),d(ge,null,Ae(10,F=>t("button",{key:F,class:L(["number-btn",{active:F===_.value,"average-highlight":c.value&&F<=Math.round(c.value)}]),onClick:z=>g(F)},y(F),11,gl)),64))]),v.value?(r(),d("div",kl,"–û—Ü–µ–Ω–æ–∫: "+y(v.value),1)):h("",!0)])])):h("",!0)]))}},hl=je(yl,[["__scopeId","data-v-2df64bd5"]]),pl={name:"EmojiPicker",props:{isVisible:{type:Boolean,default:!1}},emits:["emoji-selected","mouse-enter","mouse-leave","close"],data(){return{activeCategory:"smileys",categories:[{name:"smileys",icon:"üòÄ",emojis:["üòÄ","üòÉ","üòÑ","üòÅ","üòÜ","üòÖ","üòÇ","ü§£","üòä","üòá","üôÇ","üôÉ","üòâ","üòå","üòç","ü•∞","üòò","üòó","üòô","üòö","üòã","üòõ","üòù","üòú","ü§™","ü§®","üßê","ü§ì","üòé","ü§©","ü•≥"]},{name:"emotions",icon:"üò¢",emojis:["üò•","üò¢","üò≠","üò§","üò†","üò°","ü§¨","ü§Ø","üò≥","ü•µ","ü•∂","üò±","üò®","üò∞","üò•","üòì","ü§ó","ü§î","ü§≠","ü§´","ü§•","üò∂","üòê","üòë","üò¨","üôÑ","üòØ","üò¶","üòß","üòÆ","üò≤"]},{name:"gestures",icon:"üëç",emojis:["üëç","üëé","üëå","ü§å","ü§è","‚úåÔ∏è","ü§û","ü§ü","ü§ò","ü§ô","üëà","üëâ","üëÜ","üñï","üëá","‚òùÔ∏è","üëè","üôå","üëê","ü§≤","ü§ù","üôè","‚úçÔ∏è","üí™","ü¶æ","ü¶ø","ü¶µ","ü¶∂","üëÇ","ü¶ª","üëÉ"]},{name:"hearts",icon:"‚ù§Ô∏è",emojis:["‚ù§Ô∏è","üß°","üíõ","üíö","üíô","üíú","ü§é","üñ§","ü§ç","üíî","‚ù£Ô∏è","üíï","üíû","üíì","üíó","üíñ","üíò","üíù","üíü","‚ô•Ô∏è","üíØ","üí¢","üí•","üí´","üí¶","üí®","üï≥Ô∏è","üí£","üí¨","üëÅÔ∏è‚Äçüó®Ô∏è","üó®Ô∏è"]},{name:"objects",icon:"üéâ",emojis:["üéâ","üéä","üéà","üéÅ","üéÄ","üéÇ","üç∞","üßÅ","üç≠","üç¨","üç´","üç©","üç™","üçï","üçî","üçü","üå≠","ü•™","üåÆ","üåØ","ü•ô","ü•ö","üç≥","ü•ò","üç≤","ü•ó","üçø","üßà","üßÄ","ü•®","ü•Ø"]}]}},computed:{currentEmojis(){const s=this.categories.find(e=>e.name===this.activeCategory);return s?s.emojis:[]}},methods:{selectEmoji(s){this.$emit("emoji-selected",s)}}},bl={class:"emoji-categories"},wl=["onClick"],Cl={class:"emoji-grid"},_l=["onClick"];function El(s,e,i,o,w,_){return i.isVisible?(r(),d("div",{key:0,class:"emoji-picker",onMouseenter:e[1]||(e[1]=c=>s.$emit("mouse-enter")),onMouseleave:e[2]||(e[2]=c=>s.$emit("mouse-leave"))},[t("button",{class:"close-btn mobile-only",onClick:e[0]||(e[0]=c=>s.$emit("close"))},e[3]||(e[3]=[t("i",{class:"fas fa-times"},null,-1)])),t("div",bl,[(r(!0),d(ge,null,Ae(w.categories,c=>(r(),d("button",{key:c.name,onClick:v=>w.activeCategory=c.name,class:L([{active:w.activeCategory===c.name},"category-btn"]),type:"button"},y(c.icon),11,wl))),128))]),t("div",Cl,[(r(!0),d(ge,null,Ae(_.currentEmojis,c=>(r(),d("button",{key:c,onClick:v=>_.selectEmoji(c),class:"emoji-btn",type:"button"},y(c),9,_l))),128))])],32)):h("",!0)}const ht=je(pl,[["render",El],["__scopeId","data-v-209132f3"]]),Ml=async s=>{const e=await Io();return await s(e)},Ll=async s=>{const{data:e}=await Ml(i=>i.get("/search_emotes/".concat(s)));return e.emotes||[]},Il={name:"ImagePicker",props:{isVisible:{type:Boolean,required:!0},currentUser:{type:Object,default:null}},emits:["image-selected","mouse-enter","mouse-leave","close","login-required"],setup(s,{emit:e}){const i=m(""),o=m([]),w=m(null),_=m(!1),v=Ro(async a=>{if(!s.currentUser){console.warn("–ü–æ–ø—ã—Ç–∫–∞ –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏");return}if(!a.trim()){o.value=[],_.value=!1;return}_.value=!0;try{o.value=await Ll(a)}catch(p){console.error("Error searching images:",p),o.value=[]}finally{_.value=!1}},300),E=()=>{if(!s.currentUser){e("login-required");return}i.value.trim()&&(_.value=!0),v(i.value)},M=a=>{if(!s.currentUser){e("login-required");return}e("image-selected",a),e("close")},n=()=>{setTimeout(()=>{s.isVisible&&e("mouse-leave")},100)};return De(()=>s.isVisible,a=>{a&&(i.value="",o.value=[],_.value=!1)}),{searchQuery:i,images:o,searchInput:w,isLoading:_,handleSearch:E,selectImage:M,handleInputBlur:n}}},Rl={key:0,class:"auth-required"},Tl={class:"auth-message"},Al={key:1},Sl={class:"image-picker-header"},Pl={class:"image-content"},xl={key:0,class:"loading-spinner"},jl={key:1,class:"image-grid"},Ul=["onClick"],Bl=["src","alt"],Hl={key:2,class:"no-images"},Nl={key:3,class:"no-search"};function Dl(s,e,i,o,w,_){return i.isVisible?(r(),d("div",{key:0,class:"image-picker",onMouseenter:e[7]||(e[7]=c=>s.$emit("mouse-enter")),onMouseleave:e[8]||(e[8]=c=>s.$emit("mouse-leave")),onClick:e[9]||(e[9]=Ke(()=>{},["stop"]))},[t("button",{class:"close-btn mobile-only",onClick:e[0]||(e[0]=c=>s.$emit("close"))},e[10]||(e[10]=[t("i",{class:"fas fa-times"},null,-1)])),i.currentUser?(r(),d("div",Al,[t("div",Sl,[ee(t("input",{ref:"searchInput",type:"text","onUpdate:modelValue":e[2]||(e[2]=c=>o.searchQuery=c),placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–º–∞–π–ª–∞ 7tv",class:"image-search-input",onInput:e[3]||(e[3]=(...c)=>o.handleSearch&&o.handleSearch(...c)),onClick:e[4]||(e[4]=Ke(()=>{},["stop"])),onFocus:e[5]||(e[5]=c=>s.$emit("mouse-enter")),onBlur:e[6]||(e[6]=(...c)=>o.handleInputBlur&&o.handleInputBlur(...c))},null,544),[[nt,o.searchQuery]])]),t("div",Pl,[o.isLoading?(r(),d("div",xl,e[14]||(e[14]=[t("div",{class:"spinner"},null,-1),t("p",null,"–ü–æ–∏—Å–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...",-1)]))):o.images.length>0?(r(),d("div",jl,[(r(!0),d(ge,null,Ae(o.images,(c,v)=>(r(),d("div",{key:v,class:"image-item",onClick:E=>o.selectImage(c)},[t("img",{src:c,alt:"Image "+(v+1)},null,8,Bl)],8,Ul))),128))])):o.searchQuery.trim()?(r(),d("div",Hl,e[15]||(e[15]=[t("p",null,"–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤",-1)]))):(r(),d("div",Nl,e[16]||(e[16]=[t("p",null,"–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞",-1)])))])])):(r(),d("div",Rl,[t("div",Tl,[e[11]||(e[11]=t("i",{class:"fas fa-lock"},null,-1)),e[12]||(e[12]=t("h3",null,"–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è",-1)),e[13]||(e[13]=t("p",null,"–î–ª—è –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç",-1)),t("button",{class:"login-button",onClick:e[1]||(e[1]=c=>s.$emit("login-required"))},"–í–æ–π—Ç–∏")])]))],32)):h("",!0)}const pt=je(Il,[["render",Dl],["__scopeId","data-v-f33eb3f6"]]),Vl={name:"LinkModal",props:{isVisible:{type:Boolean,default:!1},selectedText:{type:String,default:""}},emits:["close","submit"],setup(s,{emit:e}){const i=m(""),o=m(""),w=m(null),_=m(null),c=V(()=>/^https?:\/\/.+/.test(i.value.trim())&&o.value.trim()),v=()=>{e("close"),M()},E=()=>{c.value&&(e("submit",{url:i.value.trim(),title:o.value.trim()}),v())},M=()=>{i.value="",o.value=""},n=a=>{var p;a.key==="Enter"?(a.preventDefault(),c.value?E():a.target===w.value&&i.value.trim()&&((p=_.value)==null||p.focus())):a.key==="Escape"&&v()};return De(()=>s.isVisible,a=>{a&&(s.selectedText.trim()&&(o.value=s.selectedText.trim()),Se(()=>{var p;(p=w.value)==null||p.focus()}))}),{linkUrl:i,linkTitle:o,urlInput:w,titleInput:_,isValidLink:c,closeModal:v,submitLink:E,handleKeydown:n}}},$l={class:"link-modal-header"},Ol={class:"link-modal-content"},Fl={class:"form-group"},ql={class:"form-group"},Kl={class:"link-modal-footer"},zl=["disabled"];function Wl(s,e,i,o,w,_){return i.isVisible?(r(),d("div",{key:0,class:"link-modal-overlay",onClick:e[8]||(e[8]=(...c)=>o.closeModal&&o.closeModal(...c))},[t("div",{class:"link-modal",onClick:e[7]||(e[7]=Ke(()=>{},["stop"]))},[t("div",$l,[e[10]||(e[10]=t("h3",null,"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É",-1)),t("button",{class:"close-button",onClick:e[0]||(e[0]=(...c)=>o.closeModal&&o.closeModal(...c))},e[9]||(e[9]=[t("i",{class:"fas fa-times"},null,-1)]))]),t("div",Ol,[t("div",Fl,[e[11]||(e[11]=t("label",{for:"link-url"},"URL —Å—Å—ã–ª–∫–∏:",-1)),ee(t("input",{id:"link-url",ref:"urlInput","onUpdate:modelValue":e[1]||(e[1]=c=>o.linkUrl=c),type:"url",placeholder:"https://example.com",class:"link-input",onKeydown:e[2]||(e[2]=(...c)=>o.handleKeydown&&o.handleKeydown(...c))},null,544),[[nt,o.linkUrl]])]),t("div",ql,[e[12]||(e[12]=t("label",{for:"link-title"},"–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏:",-1)),ee(t("input",{id:"link-title",ref:"titleInput","onUpdate:modelValue":e[3]||(e[3]=c=>o.linkTitle=c),type:"text",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è",class:"link-input",onKeydown:e[4]||(e[4]=(...c)=>o.handleKeydown&&o.handleKeydown(...c))},null,544),[[nt,o.linkTitle]])])]),t("div",Kl,[t("button",{class:"cancel-button",onClick:e[5]||(e[5]=(...c)=>o.closeModal&&o.closeModal(...c))},"–û—Ç–º–µ–Ω–∞"),t("button",{class:"submit-button",disabled:!o.isValidLink,onClick:e[6]||(e[6]=(...c)=>o.submitLink&&o.submitLink(...c))},"–î–æ–±–∞–≤–∏—Ç—å",8,zl)])])])):h("",!0)}const bt=je(Vl,[["render",Wl],["__scopeId","data-v-a794d83f"]]);function Gl(){const s=m(!1),e=m(!1),i=m(!1),o=()=>{e.value=!0},w=()=>{e.value=!1,setTimeout(()=>{!e.value&&!i.value&&(s.value=!1)},300)},_=()=>{i.value=!0,s.value=!0},c=()=>{i.value=!1,setTimeout(()=>{!e.value&&!i.value&&(s.value=!1)},300)},v=()=>{s.value=!1};return{showEmojiPicker:s,isEmojiHovered:e,isButtonHovered:i,handleEmojiMouseEnter:o,handleEmojiMouseLeave:w,handleButtonMouseEnter:_,handleButtonMouseLeave:c,closeEmojiPicker:v,insertEmoji:(n,a,p,C)=>{const P=a.value;if(P){const R=P.selectionStart,T=P.selectionEnd,I=p.value.substring(0,R),g=p.value.substring(T),A=I+n+g;C(A),Se(()=>{P.focus(),P.setSelectionRange(R+n.length,R+n.length),P.style.height&&(P.style.height="auto",P.style.height="".concat(Math.min(P.scrollHeight,200),"px"))})}else C(p.value+n)},handleGlobalClick:n=>{!n.target.closest(".emoji-picker")&&!n.target.closest(".emoji-button-inline")&&v()}}}function Yl(){const s=m(!1),e=m(!1),i=m(!1),o=()=>{e.value=!0},w=()=>{e.value=!1,setTimeout(()=>{!e.value&&!i.value&&(s.value=!1)},300)},_=()=>{i.value=!0,s.value=!0},c=()=>{i.value=!1,setTimeout(()=>{!e.value&&!i.value&&(s.value=!1)},300)},v=()=>{s.value=!1};return{showImagePicker:s,isImageHovered:e,isButtonHovered:i,handleImageMouseEnter:o,handleImageMouseLeave:w,handleImageButtonMouseEnter:_,handleButtonMouseLeave:c,closeImagePicker:v,insertImage:(n,a,p,C)=>{const P=a.value;if(P){const R=P.selectionStart,T=P.selectionEnd,I="[img]".concat(n,"[/img]"),g=p.value.slice(0,R)+I+p.value.slice(T);C(g),Se(()=>{P.focus(),P.setSelectionRange(R+I.length,R+I.length),P.style.height&&(P.style.height="auto",P.style.height="".concat(Math.min(P.scrollHeight,200),"px"))})}else{const R="[img]".concat(n,"[/img]");C(p.value+R)}},handleGlobalClick:n=>{!n.target.closest(".image-picker")&&!n.target.closest(".emoji-button-inline")&&v()}}}function Zl(){const s=m(!1),e=m("");return{showLinkModal:s,selectedTextForLink:e,insertLink:(c,v)=>{const E=c.value;if(E){const M=E.selectionStart,n=E.selectionEnd,a=v.value.slice(M,n);e.value=a.trim()||""}s.value=!0},insertLinkFromModal:(c,v,E,M)=>{const n=v.value;if(n){const a=n.selectionStart,p=n.selectionEnd,C="[link=".concat(c.url,"]").concat(c.title,"[/link]"),P=E.value.slice(0,a)+C+E.value.slice(p);M(P),Se(()=>{n.focus(),n.setSelectionRange(a+C.length,a+C.length),n.style.height&&(n.style.height="auto",n.style.height="".concat(Math.min(n.scrollHeight,200),"px"))})}},closeLinkModal:()=>{s.value=!1},insertSpoiler:(c,v,E)=>{const M=c.value;if(M){const n=M.selectionStart,a=M.selectionEnd,p=v.value.slice(n,a);let C;p.trim()?C="[spoiler]".concat(p,"[/spoiler]"):C="[spoiler][/spoiler]";const P=v.value.slice(0,n)+C+v.value.slice(a);E(P),Se(()=>{if(M.focus(),p.trim())M.setSelectionRange(n+C.length,n+C.length);else{const R=n+9;M.setSelectionRange(R,R)}M.style.height&&(M.style.height="auto",M.style.height="".concat(Math.min(M.scrollHeight,200),"px"))})}}}}function Xl(){return{autoResize:i=>{const o=i==null?void 0:i.target;o&&(o.style.height="auto",o.style.height="".concat(Math.min(o.scrollHeight,200),"px"))},autoResizeElement:i=>{i&&(i.style.height="auto",i.style.height="".concat(Math.min(i.scrollHeight,200),"px"))}}}function wt(){const s=Gl(),e=Yl(),i=Zl(),{autoResize:o,autoResizeElement:w}=Xl(),_=()=>{s.isButtonHovered.value=!0,e.isButtonHovered.value=!0,s.showEmojiPicker.value=!0,e.showImagePicker.value=!1},c=()=>{s.isButtonHovered.value=!0,e.isButtonHovered.value=!0,e.showImagePicker.value=!0,s.showEmojiPicker.value=!1},v=()=>{s.isButtonHovered.value=!1,e.isButtonHovered.value=!1,setTimeout(()=>{!s.isEmojiHovered.value&&!e.isImageHovered.value&&!s.isButtonHovered.value&&!e.isButtonHovered.value&&(s.showEmojiPicker.value=!1,e.showImagePicker.value=!1)},300)},E=()=>{s.showEmojiPicker.value=!1,e.showImagePicker.value=!1},M=R=>{!R.target.closest(".emoji-picker")&&!R.target.closest(".image-picker")&&!R.target.closest(".emoji-button-inline")&&E()},n=(R,T,I,g)=>{s.insertEmoji(R,T,I,g)},a=(R,T,I,g)=>{e.insertImage(R,T,I,g)},p=(R,T,I)=>{i.insertLink(R,T,I)},C=(R,T,I,g)=>{i.insertLinkFromModal(R,T,I,g)},P=(R,T,I)=>{i.insertSpoiler(R,T,I)};return We(()=>{document.addEventListener("click",M)}),yt(()=>{document.removeEventListener("click",M)}),{showEmojiPicker:s.showEmojiPicker,handleEmojiMouseEnter:s.handleEmojiMouseEnter,handleEmojiMouseLeave:s.handleEmojiMouseLeave,closeEmojiPicker:s.closeEmojiPicker,showImagePicker:e.showImagePicker,handleImageMouseEnter:e.handleImageMouseEnter,handleImageMouseLeave:e.handleImageMouseLeave,closeImagePicker:e.closeImagePicker,showLinkModal:i.showLinkModal,selectedTextForLink:i.selectedTextForLink,closeLinkModal:i.closeLinkModal,handleButtonMouseEnter:_,handleImageButtonMouseEnter:c,handleButtonMouseLeave:v,closeAllPickers:E,insertEmojiUniversal:n,insertImageUniversal:a,insertLinkUniversal:p,insertLinkFromModalUniversal:C,insertSpoilerUniversal:P,autoResize:o,autoResizeElement:w}}const Ql=s=>s===1?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π":s>=2&&s<=4?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è":"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤",Jl=s=>{if(!s)return"?";const e=s.split(" ");return e.length===1?s.slice(0,2).toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()},es={name:"CommentItem",components:{EmojiPicker:ht,ImagePicker:pt,LinkModal:bt},props:{comment:{type:Object,required:!0,default:()=>({username:"–ê–Ω–æ–Ω–∏–º",user_avatar:null,content:"",created_at:new Date().toISOString(),rating:0,replies:[]})},currentUser:{type:Object,required:!0,default:()=>({})},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate"],setup(s,{emit:e}){var ae,Ee;const i=it(),o=V(()=>{var k;return s.editingCommentId===((k=s.comment)==null?void 0:k.id)}),w=m(((ae=s.comment)==null?void 0:ae.content)||""),_=m(((Ee=s.comment)==null?void 0:Ee.user_rating)||0),c=m(null),v=m(null),{showEmojiPicker:E,showImagePicker:M,showLinkModal:n,selectedTextForLink:a,handleEmojiMouseEnter:p,handleEmojiMouseLeave:C,handleImageMouseEnter:P,handleImageMouseLeave:R,handleButtonMouseEnter:T,handleImageButtonMouseEnter:I,handleButtonMouseLeave:g,closeEmojiPicker:A,closeImagePicker:S,closeLinkModal:O,insertEmojiUniversal:F,insertImageUniversal:z,insertLinkUniversal:H,insertLinkFromModalUniversal:be,insertSpoilerUniversal:Le,autoResize:ye}=wt(),{formatContentWithTruncation:Ie}=co();We(async()=>{var k;if((k=s.comment)!=null&&k.user_avatar){const $=await To();c.value="".concat($).concat(s.comment.user_avatar)}});const U=V(()=>{var k;return s.currentUser&&((k=s.comment)==null?void 0:k.user_id)===s.currentUser.id}),te=V(()=>{var k;return s.currentUser&&((k=s.comment)==null?void 0:k.user_id)===s.currentUser.id||s.currentUser&&s.currentUser.is_admin===1}),W=V(()=>{var k,$,Me;return((k=s.comment)==null?void 0:k.updated_at)&&(($=s.comment)==null?void 0:$.updated_at)!==((Me=s.comment)==null?void 0:Me.created_at)}),q=V(()=>{var k,$;return(k=s.comment)!=null&&k.is_deleted?!1:((($=s.comment)==null?void 0:$.rating)||0)<=-3}),se=V(()=>q.value),ue=m(!1),ie=V(()=>{var k,$;return(k=s.comment)!=null&&k.is_deleted?null:((($=s.comment)==null?void 0:$.rating)||0)<=-3?"lowRating":null}),he=()=>{var k,$;e("start-edit",(k=s.comment)==null?void 0:k.id),w.value=(($=s.comment)==null?void 0:$.content)||"",Se(()=>{v.value&&(v.value.focus(),ye({target:v.value}))})},Re=()=>{var k;e("cancel-edit"),w.value=((k=s.comment)==null?void 0:k.content)||""},pe=()=>{var k;w.value.trim()&&e("edit",(k=s.comment)==null?void 0:k.id,w.value.trim())},He=()=>{var k;confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π?")&&e("delete",(k=s.comment)==null?void 0:k.id)},de=k=>{var $,Me;_.value===k?(_.value=0,e("rate",($=s.comment)==null?void 0:$.id,k)):(_.value=k,e("rate",(Me=s.comment)==null?void 0:Me.id,k))},Pe=k=>{k.key==="Enter"&&!k.shiftKey&&(k.preventDefault(),pe())},_e=V(()=>{var k,$;return(($=(k=s.comment)==null?void 0:k.content)==null?void 0:$.length)>500}),J=m(!1),b=V(()=>{var k;return Ie((k=s.comment)==null?void 0:k.content,500,J.value)}),u=()=>{J.value=!J.value},Z=()=>{console.log("Avatar load error, falling back to initials"),c.value=null,Se(()=>{const k=document.querySelector(".avatar-placeholder");k&&(k.style.display="flex")})},oe=()=>{i.push("/login")},we=k=>{F(k,v,w,$=>{w.value=$})},me=k=>{z(k,v,w,$=>{w.value=$})},ke=()=>{Le(v,w,k=>{w.value=k})},re=()=>{H(v,w,k=>{w.value=k})},Ce=k=>{be(k,v,w,$=>{w.value=$})},Q=k=>{ye(k)};return De(w,()=>{o.value&&v.value&&Se(()=>{Q({target:v.value})})}),{isEditing:o,editContent:w,userRating:_,isCommentOwner:U,canDeleteComment:te,isCommentEdited:W,formatDate:Ko,formatRelativeTime:qo,startEdit:he,cancelEdit:Re,saveEdit:pe,confirmDelete:He,rateComment:de,avatarUrl:c,getInitials:Jl,handleEditKeydown:Pe,isCommentHidden:se,showHiddenComment:ue,hiddenCommentReason:ie,isLongComment:_e,isExpanded:J,formattedContent:b,toggleExpanded:u,autoResizeEdit:Q,editTextarea:v,showEmojiPicker:E,showImagePicker:M,insertEmojiEdit:we,insertImageEdit:me,insertSpoilerEdit:ke,insertLinkEdit:re,handleEmojiMouseEnter:p,handleEmojiMouseLeave:C,handleImageMouseEnter:P,handleImageMouseLeave:R,closeEmojiPicker:A,closeImagePicker:S,handleButtonMouseEnter:T,handleButtonMouseLeave:g,handleImageButtonMouseEnter:I,handleAvatarError:Z,openLogin:oe,showLinkModal:n,selectedTextForLink:a,insertLinkFromModal:Ce,closeLinkModal:O}}},ts=["data-comment-id"],os={class:"comment-header"},ns={class:"user-info"},ls={class:"user-avatar"},ss=["src","alt"],is={class:"user-details"},as={class:"username"},rs={key:0,class:"user-rating"},us=["title"],ds=["title"],cs={class:"comment-content"},vs={key:0,class:"hidden-comment-warning"},ms={key:1},fs={key:0,class:"deleted-comment"},gs={key:1},ks={key:0,class:"edit-form"},ys={class:"edit-textarea-container"},hs={class:"edit-footer"},ps={class:"edit-actions"},bs=["disabled"],ws={class:"character-counter-container"},Cs={key:1,class:"comment-text-container"},_s=["innerHTML"],Es={class:"comment-footer"},Ms={class:"comment-actions"},Ls={class:"rating-buttons"},Is={class:"action-buttons"};function Rs(s,e,i,o,w,_){var n,a,p,C,P,R,T,I,g,A,S,O,F,z,H,be,Le,ye,Ie;const c=Te("router-link"),v=Te("EmojiPicker"),E=Te("ImagePicker"),M=Te("LinkModal");return r(),d("div",{class:"comment-item","data-comment-id":(n=i.comment)==null?void 0:n.id},[t("div",os,[t("div",ns,[ve(c,{to:{path:"/lists/".concat((a=i.comment)==null?void 0:a.user_id)},target:"_blank",rel:"noopener noreferrer",class:"user-avatar-link"},{default:Jt(()=>{var U,te;return[t("div",ls,[o.avatarUrl?(r(),d("img",{key:0,src:o.avatarUrl,alt:((U=i.comment)==null?void 0:U.username)||"–ê–Ω–æ–Ω–∏–º",onError:e[0]||(e[0]=(...W)=>o.handleAvatarError&&o.handleAvatarError(...W)),onerror:"this.onerror=null; this.style.display='none'; this.nextElementSibling.style.display='flex';"},null,40,ss)):(r(),d("div",{key:1,class:"avatar-placeholder",style:ut({display:o.avatarUrl?"none":"flex"})},y(o.getInitials(((te=i.comment)==null?void 0:te.username)||"–ê–Ω–æ–Ω–∏–º")),5))])]}),_:1},8,["to"]),t("div",is,[ve(c,{to:{path:"/lists/".concat((p=i.comment)==null?void 0:p.user_id)},target:"_blank",rel:"noopener noreferrer",class:"username-link"},{default:Jt(()=>{var U;return[t("span",as,y(((U=i.comment)==null?void 0:U.username)||"–ê–Ω–æ–Ω–∏–º"),1)]}),_:1},8,["to"]),(C=i.comment)!=null&&C.user_movie_rating?(r(),d("span",rs,[e[19]||(e[19]=t("i",{class:"fas fa-star"},null,-1)),le(" "+y(i.comment.user_movie_rating),1)])):h("",!0),t("span",{class:"date",title:o.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(o.formatDate((P=i.comment)==null?void 0:P.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(o.formatDate((R=i.comment)==null?void 0:R.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(o.formatDate((T=i.comment)==null?void 0:T.created_at))},[le(y(o.formatRelativeTime((I=i.comment)==null?void 0:I.created_at))+" ",1),o.isCommentEdited?(r(),d("i",{key:0,class:"fas fa-pencil-alt edit-icon",title:o.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(o.formatDate((g=i.comment)==null?void 0:g.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(o.formatDate((A=i.comment)==null?void 0:A.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(o.formatDate((S=i.comment)==null?void 0:S.created_at))},null,8,ds)):h("",!0)],8,us)])])]),t("div",cs,[!((O=i.comment)!=null&&O.is_deleted)&&o.isCommentHidden&&!o.showHiddenComment?(r(),d("div",vs,[o.hiddenCommentReason==="lowRating"?(r(),d("p",{key:0,class:"warning-text",onClick:e[1]||(e[1]=U=>o.showHiddenComment=!0)},e[20]||(e[20]=[t("i",{class:"fas fa-eye-slash"},null,-1),le(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–∫—Ä—ã—Ç –∏–∑-–∑–∞ –Ω–∏–∑–∫–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å. ")]))):h("",!0)])):(r(),d("div",ms,[(F=i.comment)!=null&&F.is_deleted?(r(),d("div",fs,e[21]||(e[21]=[t("p",{class:"deleted-message"},[t("i",{class:"fas fa-trash"}),le(" –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —É–¥–∞–ª—ë–Ω ")],-1)]))):(r(),d("div",gs,[o.isEditing?(r(),d("div",ks,[t("div",ys,[ee(t("textarea",{ref:"editTextarea","onUpdate:modelValue":e[2]||(e[2]=U=>o.editContent=U),class:"edit-textarea",rows:"3",maxlength:"1500",onKeydown:e[3]||(e[3]=(...U)=>o.handleEditKeydown&&o.handleEditKeydown(...U)),onInput:e[4]||(e[4]=(...U)=>o.autoResizeEdit&&o.autoResizeEdit(...U))},null,544),[[nt,o.editContent]])]),t("div",hs,[t("div",ps,[t("button",{onClick:e[5]||(e[5]=(...U)=>o.cancelEdit&&o.cancelEdit(...U)),class:"cancel-button"},"–û—Ç–º–µ–Ω–∞"),t("button",{onClick:e[6]||(e[6]=(...U)=>o.saveEdit&&o.saveEdit(...U)),class:"save-button",disabled:!o.editContent.trim()||o.editContent.length>1500}," –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ",8,bs)]),t("div",ws,[t("div",{class:L(["character-counter-inline",{"near-limit":o.editContent.length>1400,"at-limit":o.editContent.length>=1500}])},y(o.editContent.length)+"/1500 ",3),t("button",{type:"button",class:L(["emoji-button-inline",{active:o.showEmojiPicker}]),onMouseenter:e[7]||(e[7]=(...U)=>o.handleButtonMouseEnter&&o.handleButtonMouseEnter(...U)),onMouseleave:e[8]||(e[8]=(...U)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...U))}," üòä ",34),t("button",{type:"button",class:L(["emoji-button-inline",{active:o.showImagePicker}]),onMouseenter:e[9]||(e[9]=(...U)=>o.handleImageButtonMouseEnter&&o.handleImageButtonMouseEnter(...U)),onMouseleave:e[10]||(e[10]=(...U)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...U))},e[22]||(e[22]=[lt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-d19fdc64><g id="logo" data-v-d19fdc64><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-d19fdc64></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-d19fdc64></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-d19fdc64></path></g></svg>',1)]),34),t("button",{type:"button",class:"emoji-button-inline spoiler-button",onClick:e[11]||(e[11]=(...U)=>o.insertSpoilerEdit&&o.insertSpoilerEdit(...U)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},e[23]||(e[23]=[t("i",{class:"fas fa-eye-slash"},null,-1)])),t("button",{type:"button",class:"emoji-button-inline link-button",onClick:e[12]||(e[12]=(...U)=>o.insertLinkEdit&&o.insertLinkEdit(...U)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},e[24]||(e[24]=[t("i",{class:"fas fa-link"},null,-1)])),ve(v,{"is-visible":o.showEmojiPicker,onEmojiSelected:o.insertEmojiEdit,onMouseEnter:o.handleEmojiMouseEnter,onMouseLeave:o.handleEmojiMouseLeave,onClose:o.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),ve(E,{"is-visible":o.showImagePicker,"current-user":i.currentUser,onImageSelected:o.insertImageEdit,onMouseEnter:o.handleImageMouseEnter,onMouseLeave:o.handleImageMouseLeave,onClose:o.closeImagePicker,onLoginRequired:o.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),ve(M,{"is-visible":o.showLinkModal,"selected-text":o.selectedTextForLink,onClose:o.closeLinkModal,onSubmit:o.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):(r(),d("div",Cs,[t("p",{class:L(["comment-text",{truncated:o.isLongComment&&!o.isExpanded}]),innerHTML:o.formattedContent},null,10,_s),o.isLongComment?(r(),d("button",{key:0,onClick:e[13]||(e[13]=(...U)=>o.toggleExpanded&&o.toggleExpanded(...U)),class:"expand-button"},y(o.isExpanded?"–°–≤–µ—Ä–Ω—É—Ç—å":"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å"),1)):h("",!0)]))]))]))]),t("div",Es,[t("div",Ms,[t("div",Ls,[!o.isCommentOwner&&!((z=i.comment)!=null&&z.is_deleted)?(r(),d("button",{key:0,onClick:e[14]||(e[14]=U=>o.rateComment(1)),class:L(["rating-button",{"rated-up":o.userRating===1}])},e[25]||(e[25]=[t("i",{class:"fas fa-thumbs-up"},null,-1)]),2)):h("",!0),t("span",{class:L(["rating-count",{"rating-positive":o.userRating===1,"rating-negative":o.userRating===-1}])},y(((H=i.comment)==null?void 0:H.rating)||0),3),!o.isCommentOwner&&!((be=i.comment)!=null&&be.is_deleted)?(r(),d("button",{key:1,onClick:e[15]||(e[15]=U=>o.rateComment(-1)),class:L(["rating-button",{"rated-down":o.userRating===-1}])},e[26]||(e[26]=[t("i",{class:"fas fa-thumbs-down"},null,-1)]),2)):h("",!0)]),t("div",Is,[!i.currentUser||i.currentUser.allow_comments===1?(r(),d("button",{key:0,onClick:e[16]||(e[16]=U=>s.$emit("reply",i.comment)),class:"action-button reply-button"},e[27]||(e[27]=[t("i",{class:"fas fa-reply"},null,-1)]))):h("",!0),o.isCommentOwner&&!((Le=i.comment)!=null&&Le.is_deleted)&&!o.isEditing&&((ye=i.currentUser)==null?void 0:ye.allow_comments)===1?(r(),d("button",{key:1,onClick:e[17]||(e[17]=(...U)=>o.startEdit&&o.startEdit(...U)),class:"action-button edit-button"},e[28]||(e[28]=[t("i",{class:"fas fa-edit"},null,-1)]))):h("",!0),o.canDeleteComment&&!((Ie=i.comment)!=null&&Ie.is_deleted)?(r(),d("button",{key:2,onClick:e[18]||(e[18]=(...U)=>o.confirmDelete&&o.confirmDelete(...U)),class:"action-button delete-button"},e[29]||(e[29]=[t("i",{class:"fas fa-trash"},null,-1)]))):h("",!0)])])])],8,ts)}const Ts=je(es,[["render",Rs],["__scopeId","data-v-d19fdc64"]]),As={name:"CommentThread",components:{CommentItem:Ts,EmojiPicker:ht,ImagePicker:pt,LinkModal:bt},props:{comment:{type:Object,required:!0},currentUser:{type:Object,required:!0},replyTo:{type:Object,default:null},replyContent:{type:String,default:""},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate","submit-reply","cancel-reply","update-reply-content","reply-keydown"],setup(s,{emit:e}){const i=m(null),o=m(!0),{showEmojiPicker:w,showImagePicker:_,showLinkModal:c,selectedTextForLink:v,handleEmojiMouseEnter:E,handleEmojiMouseLeave:M,handleImageMouseEnter:n,handleImageMouseLeave:a,handleButtonMouseEnter:p,handleImageButtonMouseEnter:C,handleButtonMouseLeave:P,closeEmojiPicker:R,closeImagePicker:T,closeLinkModal:I,insertEmojiUniversal:g,insertImageUniversal:A,insertLinkUniversal:S,insertLinkFromModalUniversal:O,insertSpoilerUniversal:F}=wt(),z=W=>{e("update-reply-content",W.target.value);const q=W.target;q&&(q.style.height="auto",q.style.height="".concat(Math.min(q.scrollHeight,200),"px"))},H={get value(){return s.replyContent},set value(W){e("update-reply-content",W)}};return{replyTextarea:i,showEmojiPicker:w,showImagePicker:_,isCollapsed:o,insertEmoji:W=>{g(W,i,H,q=>{e("update-reply-content",q)})},insertImage:W=>{A(W,i,H,q=>{e("update-reply-content",q)})},insertSpoiler:()=>{F(i,H,W=>{e("update-reply-content",W)})},handleEmojiMouseEnter:E,handleEmojiMouseLeave:M,handleImageMouseEnter:n,handleImageMouseLeave:a,handleButtonMouseEnter:p,handleButtonMouseLeave:P,closeEmojiPicker:R,closeImagePicker:T,handleImageButtonMouseEnter:C,handleReplyInput:z,toggleCollapsed:()=>{o.value=!o.value},showLinkModal:c,selectedTextForLink:v,insertLink:()=>{S(i,H,W=>{e("update-reply-content",W)})},closeLinkModal:I,insertLinkFromModal:W=>{O(W,i,H,q=>{e("update-reply-content",q)})}}},computed:{canReply(){return this.currentUser?this.currentUser.allow_comments===1:!0},getReplyPlaceholder(){return this.currentUser?this.currentUser.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç..."},formattedContent(){const{formatContent:s}=co();return s(this.comment.content)}}},Ss={class:"comment-thread"},Ps={key:0,class:"reply-form"},xs={class:"textarea-container"},js=["value","placeholder","disabled"],Us={class:"reply-footer"},Bs={class:"reply-actions"},Hs=["disabled"],Ns={class:"character-counter-container"},Ds=["disabled"],Vs={key:1,class:"replies-container"},$s=["title"],Os={class:"replies-count"},Fs=["title"],qs={key:0,class:"replies-content"};function Ks(s,e,i,o,w,_){const c=Te("CommentItem"),v=Te("EmojiPicker"),E=Te("ImagePicker"),M=Te("LinkModal"),n=Te("CommentThread",!0);return r(),d("div",Ss,[ve(c,{comment:i.comment,"current-user":i.currentUser,"editing-comment-id":i.editingCommentId,onReply:e[0]||(e[0]=a=>s.$emit("reply",a)),onStartEdit:e[1]||(e[1]=a=>s.$emit("start-edit",a)),onCancelEdit:e[2]||(e[2]=a=>s.$emit("cancel-edit")),onEdit:e[3]||(e[3]=(a,p)=>s.$emit("edit",a,p)),onDelete:e[4]||(e[4]=a=>s.$emit("delete",a)),onRate:e[5]||(e[5]=(a,p)=>s.$emit("rate",a,p))},null,8,["comment","current-user","editing-comment-id"]),i.replyTo&&i.replyTo.id===i.comment.id?(r(),d("div",Ps,[t("div",xs,[t("textarea",{ref:"replyTextarea",class:"comment-textarea",value:i.replyContent,placeholder:_.getReplyPlaceholder,disabled:i.currentUser&&i.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:e[6]||(e[6]=(...a)=>o.handleReplyInput&&o.handleReplyInput(...a)),onKeydown:e[7]||(e[7]=a=>s.$emit("reply-keydown",a))},null,40,js)]),t("div",Us,[t("div",Bs,[t("button",{class:"cancel-reply",onClick:e[8]||(e[8]=a=>s.$emit("cancel-reply"))},"–û—Ç–º–µ–Ω–∞"),t("button",{class:"submit-button",disabled:!i.replyContent.trim()||i.replyContent.length>1500||i.currentUser&&i.currentUser.allow_comments!==1,onClick:e[9]||(e[9]=a=>s.$emit("submit-reply"))}," –û—Ç–≤–µ—Ç–∏—Ç—å ",8,Hs)]),t("div",Ns,[t("div",{class:L(["character-counter-inline",{"near-limit":i.replyContent.length>1400,"at-limit":i.replyContent.length>=1500}])},y(i.replyContent.length)+"/1500 ",3),t("button",{type:"button",class:L(["emoji-button-inline",{active:o.showEmojiPicker}]),onMouseenter:e[10]||(e[10]=(...a)=>o.handleButtonMouseEnter&&o.handleButtonMouseEnter(...a)),onMouseleave:e[11]||(e[11]=(...a)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...a))}," üòä ",34),t("button",{type:"button",class:L(["emoji-button-inline",{active:o.showImagePicker}]),onMouseenter:e[12]||(e[12]=(...a)=>o.handleImageButtonMouseEnter&&o.handleImageButtonMouseEnter(...a)),onMouseleave:e[13]||(e[13]=(...a)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...a))},e[29]||(e[29]=[lt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-6c0fc347><g id="logo" data-v-6c0fc347><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-6c0fc347></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-6c0fc347></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-6c0fc347></path></g></svg>',1)]),34),t("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:i.currentUser&&i.currentUser.allow_comments!==1,onClick:e[14]||(e[14]=(...a)=>o.insertSpoiler&&o.insertSpoiler(...a)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},e[30]||(e[30]=[t("i",{class:"fas fa-eye-slash"},null,-1)]),8,Ds),t("button",{type:"button",class:"emoji-button-inline link-button",onClick:e[15]||(e[15]=(...a)=>o.insertLink&&o.insertLink(...a)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},e[31]||(e[31]=[t("i",{class:"fas fa-link"},null,-1)])),ve(v,{"is-visible":o.showEmojiPicker,onEmojiSelected:o.insertEmoji,onMouseEnter:o.handleEmojiMouseEnter,onMouseLeave:o.handleEmojiMouseLeave,onClose:o.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),ve(E,{"is-visible":o.showImagePicker,"current-user":i.currentUser,onImageSelected:o.insertImage,onMouseEnter:o.handleImageMouseEnter,onMouseLeave:o.handleImageMouseLeave,onClose:o.closeImagePicker,onLoginRequired:e[16]||(e[16]=()=>s.$router.push("/login"))},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose"]),ve(M,{"is-visible":o.showLinkModal,"selected-text":o.selectedTextForLink,onClose:o.closeLinkModal,onSubmit:o.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):h("",!0),i.comment.replies&&i.comment.replies.length>0?(r(),d("div",Vs,[t("button",{class:"collapse-toggle",title:o.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:e[17]||(e[17]=(...a)=>o.toggleCollapsed&&o.toggleCollapsed(...a))},[t("span",{class:L(["collapse-icon",{expanded:!o.isCollapsed}])},e[32]||(e[32]=[t("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},[t("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1)]),2),t("span",Os,y(i.comment.replies.length)+" "+y(i.comment.replies.length===1?"–æ—Ç–≤–µ—Ç":"–æ—Ç–≤–µ—Ç–æ–≤"),1)],8,$s),t("div",{class:"vertical-line-clickable",title:o.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:e[18]||(e[18]=(...a)=>o.toggleCollapsed&&o.toggleCollapsed(...a))},[t("div",{class:L(["vertical-line-visual",{collapsed:o.isCollapsed}])},null,2)],8,Fs),o.isCollapsed?h("",!0):(r(),d("div",qs,[(r(!0),d(ge,null,Ae(i.comment.replies,a=>(r(),Be(n,{key:a.id,comment:a,"current-user":i.currentUser,"reply-to":i.replyTo,"reply-content":i.replyContent,"editing-comment-id":i.editingCommentId,onReply:e[19]||(e[19]=p=>s.$emit("reply",p)),onStartEdit:e[20]||(e[20]=p=>s.$emit("start-edit",p)),onCancelEdit:e[21]||(e[21]=p=>s.$emit("cancel-edit")),onEdit:e[22]||(e[22]=(p,C)=>s.$emit("edit",p,C)),onDelete:e[23]||(e[23]=p=>s.$emit("delete",p)),onRate:e[24]||(e[24]=(p,C)=>s.$emit("rate",p,C)),onSubmitReply:e[25]||(e[25]=p=>s.$emit("submit-reply")),onCancelReply:e[26]||(e[26]=p=>s.$emit("cancel-reply")),onUpdateReplyContent:e[27]||(e[27]=p=>s.$emit("update-reply-content",p)),onReplyKeydown:e[28]||(e[28]=p=>s.$emit("reply-keydown",p))},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id"]))),128))]))])):h("",!0)])}const zs=je(As,[["render",Ks],["__scopeId","data-v-6c0fc347"]]),Ws={name:"Comments",components:{CommentThread:zs,Notification:ct,EmojiPicker:ht,ImagePicker:pt,LinkModal:bt},props:{movieId:{type:[String,Number],required:!0}},setup(s){const e=kt(),i=it(),o=st(),w=m([]),_=m(""),c=m(null),v=m(""),E=m(null),M=m(e.user),n=m(null),a=m(null),p=m(o.isAutoShowComments),C=m(!1),P=m(3),R=m(3),{showEmojiPicker:T,showImagePicker:I,showLinkModal:g,selectedTextForLink:A,handleEmojiMouseEnter:S,handleEmojiMouseLeave:O,handleImageMouseEnter:F,handleImageMouseLeave:z,handleButtonMouseEnter:H,handleImageButtonMouseEnter:be,handleButtonMouseLeave:Le,closeEmojiPicker:ye,closeImagePicker:Ie,closeLinkModal:U,insertEmojiUniversal:te,insertImageUniversal:W,insertLinkUniversal:q,insertLinkFromModalUniversal:se,insertSpoilerUniversal:ue,autoResize:ie}=wt(),he=V(()=>{const B=(K=null)=>w.value.filter(G=>G.parent_id===K).sort((G,j)=>G.id-j.id).map(G=>({...G,replies:B(G.id)})).filter(G=>!G.is_deleted||G.replies&&G.replies.length>0);return B()}),Re=V(()=>{const B=K=>K.reduce((G,j)=>G+1+B(j.replies||[]),0);return B(he.value)}),pe=V(()=>he.value.slice(0,R.value)),He=V(()=>he.value.length>R.value),de=V(()=>he.value.length-R.value),Pe=()=>{R.value+=P.value},_e=async()=>{try{const B=await Ao(s.movieId);w.value=B}catch(B){console.error("Failed to load comments:",B),n.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.")}},J=async()=>{if(C.value)return;if(!e.token){n.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:re});return}if(M.value&&M.value.allow_comments!==1){n.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!_.value.replace(/\[spoiler\]\s*\[\/spoiler\]/g,"").replace(/\[img\]\s*\[\/img\]/g,"").replace(/\[link=[^\]]+\]\s*\[\/link\]/g,"").trim()){n.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º");return}if(_.value.length>1500){n.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await eo(s.movieId,_.value.trim()),_.value="",await _e(),p.value=!0,Se(()=>{a.value&&(a.value.focus(),a.value.style.height="auto"),setTimeout(()=>{const K=document.querySelectorAll(".comment-item[data-comment-id]");if(K.length>0){const G=Array.from(K).map(j=>parseInt(j.getAttribute("data-comment-id"))).filter(j=>!isNaN(j));if(G.length>0){const j=Math.max(...G),Ne=document.querySelector('[data-comment-id="'.concat(j,'"]'));Ne&&Ne.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}},300)})}catch(K){console.error("Failed to create comment:",K),n.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},b=B=>{if(!e.token){n.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:re});return}E.value=null,c.value=B,v.value="",Se(()=>{const K=document.querySelector(".reply-form");K&&K.scrollIntoView({behavior:"smooth",block:"center"})})},u=async()=>{if(!e.token){n.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:re});return}if(M.value&&M.value.allow_comments!==1){n.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!(!v.value.trim()||!c.value)){if(v.value.length>1500){n.value.showNotification("–û—Ç–≤–µ—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await eo(s.movieId,v.value.trim(),c.value.id);const B=c.value.id;await _e(),v.value="",c.value=null,Se(()=>{setTimeout(()=>{const K=document.querySelector('[data-comment-id="'.concat(B,'"]'));if(K){const G=K.querySelector(".replies-content");if(G){const j=G.querySelectorAll(".comment-item[data-comment-id]");if(j.length>0){const Ne=Array.from(j).map(Ue=>parseInt(Ue.getAttribute("data-comment-id"))).filter(Ue=>!isNaN(Ue));if(Ne.length>0){const Ue=Math.max(...Ne),at=document.querySelector('[data-comment-id="'.concat(Ue,'"]'));at&&at.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}}}},300)})}catch(B){console.error("Error submitting reply:",B),n.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}}},Z=async(B,K)=>{if(!e.token){n.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:re});return}if(M.value&&M.value.allow_comments!==1){n.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(K.length>1500){n.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await xo(B,K.trim()),await _e(),E.value=null}catch(G){console.error("Failed to update comment:",G),n.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},oe=async B=>{if(!e.token){n.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:re});return}try{await Po(B),await _e()}catch(K){console.error("Failed to delete comment:",K),n.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},we=async(B,K)=>{if(!e.token){n.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:re});return}try{await So(B,K),await _e()}catch(G){console.error("Failed to rate comment:",G),n.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ü–µ–Ω–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},me=B=>{C.value||T.value||B.key==="Enter"&&!B.shiftKey&&(B.preventDefault(),J())},ke=B=>{B.key==="Enter"&&!B.shiftKey&&(B.preventDefault(),u())},re=()=>{i.push("/login")},Ce=B=>{C.value=!0,te(B,a,_,K=>{_.value=K}),setTimeout(()=>{C.value=!1},100)},Q=B=>{W(B,a,_,K=>{_.value=K})},ae=()=>{ue(a,_,B=>{_.value=B})},Ee=()=>{q(a,_,B=>{_.value=B})},k=B=>{se(B,a,_,K=>{_.value=K})},$=V(()=>M.value?M.value.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."),Me=V(()=>M.value?M.value.allow_comments===1:!0),Ve=B=>{c.value=null,v.value="",E.value=B},Ge=()=>{E.value=null};return We(()=>{_e()}),{comments:w,groupedComments:he,displayedComments:pe,hasMoreComments:He,remainingCommentsCount:de,showMoreComments:Pe,newComment:_,replyTo:c,replyContent:v,editingCommentId:E,currentUser:M,notificationRef:n,commentTextarea:a,showComments:p,submitComment:J,handleReply:b,submitReply:u,handleEdit:Z,handleDelete:oe,handleRate:we,handleCommentKeydown:me,handleReplyKeydown:ke,autoResize:ie,totalCommentsCount:Re,getCommentWordForm:Ql,showEmojiPicker:T,showImagePicker:I,showLinkModal:g,selectedTextForLink:A,insertEmoji:Ce,insertImage:Q,handleEmojiMouseEnter:S,handleEmojiMouseLeave:O,handleImageMouseEnter:F,handleImageMouseLeave:z,closeEmojiPicker:ye,closeImagePicker:Ie,handleButtonMouseLeave:Le,handleButtonMouseEnter:H,handleImageButtonMouseEnter:be,getCommentPlaceholder:$,canComment:Me,handleStartEdit:Ve,handleCancelEdit:Ge,insertSpoiler:ae,insertLink:Ee,insertLinkFromModal:k,closeLinkModal:U}}},Gs={class:"comments-section"},Ys={class:"spoiler-content"},Zs={key:1,class:"comments-container"},Xs={class:"comments-header"},Qs={class:"textarea-container"},Js=["placeholder","disabled"],ei={class:"comment-footer"},ti={class:"comment-actions"},oi=["disabled"],ni={class:"character-counter-container"},li=["disabled"],si=["disabled"],ii=["disabled"],ai={class:"comments-list"},ri={key:0,class:"show-more-comments"};function ui(s,e,i,o,w,_){const c=Te("EmojiPicker"),v=Te("ImagePicker"),E=Te("LinkModal"),M=Te("CommentThread"),n=Te("Notification");return r(),d("div",Gs,[o.showComments?(r(),d("div",Zs,[t("div",Xs,[t("button",{class:"hide-comments-btn",onClick:e[1]||(e[1]=a=>o.showComments=!1)},e[18]||(e[18]=[t("i",{class:"fas fa-eye-slash"},null,-1),le(" –°–∫—Ä—ã—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ")]))]),t("form",{class:"comment-form",onSubmit:e[11]||(e[11]=Ke((...a)=>o.submitComment&&o.submitComment(...a),["prevent"]))},[t("div",Qs,[ee(t("textarea",{ref:"commentTextarea","onUpdate:modelValue":e[2]||(e[2]=a=>o.newComment=a),class:"comment-textarea",placeholder:o.getCommentPlaceholder,disabled:o.currentUser&&o.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:e[3]||(e[3]=(...a)=>o.autoResize&&o.autoResize(...a)),onKeydown:e[4]||(e[4]=(...a)=>o.handleCommentKeydown&&o.handleCommentKeydown(...a))},null,40,Js),[[nt,o.newComment]])]),t("div",ei,[t("div",ti,[t("button",{class:"submit-button",type:"submit",disabled:!o.newComment.trim()||o.newComment.length>1500||o.currentUser&&o.currentUser.allow_comments!==1}," –û—Ç–ø—Ä–∞–≤–∏—Ç—å ",8,oi)]),t("div",ni,[t("div",{class:L(["character-counter-inline",{"near-limit":o.newComment.length>1400,"at-limit":o.newComment.length>=1500}])},y(o.newComment.length)+"/1500 ",3),t("button",{type:"button",class:L(["emoji-button-inline",{active:o.showEmojiPicker}]),disabled:o.currentUser&&o.currentUser.allow_comments!==1,onMouseenter:e[5]||(e[5]=(...a)=>o.handleButtonMouseEnter&&o.handleButtonMouseEnter(...a)),onMouseleave:e[6]||(e[6]=(...a)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...a))}," üòä ",42,li),t("button",{type:"button",class:L(["emoji-button-inline",{active:o.showImagePicker}]),disabled:o.currentUser&&o.currentUser.allow_comments!==1,onMouseenter:e[7]||(e[7]=(...a)=>o.handleImageButtonMouseEnter&&o.handleImageButtonMouseEnter(...a)),onMouseleave:e[8]||(e[8]=(...a)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...a))},e[19]||(e[19]=[lt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-79080d6f><g id="logo" data-v-79080d6f><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-79080d6f></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-79080d6f></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-79080d6f></path></g></svg>',1)]),42,si),t("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:o.currentUser&&o.currentUser.allow_comments!==1,onClick:e[9]||(e[9]=(...a)=>o.insertSpoiler&&o.insertSpoiler(...a)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},e[20]||(e[20]=[t("i",{class:"fas fa-eye-slash"},null,-1)]),8,ii),t("button",{type:"button",class:"emoji-button-inline link-button",onClick:e[10]||(e[10]=(...a)=>o.insertLink&&o.insertLink(...a)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},e[21]||(e[21]=[t("i",{class:"fas fa-link"},null,-1)])),ve(c,{"is-visible":o.showEmojiPicker&&o.canComment,onEmojiSelected:o.insertEmoji,onMouseEnter:o.handleEmojiMouseEnter,onMouseLeave:o.handleEmojiMouseLeave,onClose:o.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),ve(v,{"is-visible":o.showImagePicker&&o.canComment,"current-user":o.currentUser,onImageSelected:o.insertImage,onMouseEnter:o.handleImageMouseEnter,onMouseLeave:o.handleImageMouseLeave,onClose:o.closeImagePicker,onLoginRequired:s.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),ve(E,{"is-visible":o.showLinkModal,"selected-text":o.selectedTextForLink,onClose:o.closeLinkModal,onSubmit:o.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])],32),t("div",ai,[(r(!0),d(ge,null,Ae(o.displayedComments,a=>(r(),Be(M,{key:a.id,comment:a,"current-user":o.currentUser,"reply-to":o.replyTo,"reply-content":o.replyContent,"editing-comment-id":o.editingCommentId,"is-first-comment":!1,onReply:o.handleReply,onStartEdit:o.handleStartEdit,onCancelEdit:o.handleCancelEdit,onEdit:o.handleEdit,onDelete:o.handleDelete,onRate:o.handleRate,onSubmitReply:o.submitReply,onCancelReply:e[12]||(e[12]=p=>o.replyTo=null),onUpdateReplyContent:e[13]||(e[13]=p=>o.replyContent=p),onReplyKeydown:o.handleReplyKeydown},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id","onReply","onStartEdit","onCancelEdit","onEdit","onDelete","onRate","onSubmitReply","onReplyKeydown"]))),128)),o.hasMoreComments?(r(),d("div",ri,[t("button",{class:"show-more-btn",onClick:e[14]||(e[14]=(...a)=>o.showMoreComments&&o.showMoreComments(...a))}," –ü–æ–∫–∞–∑–∞—Ç—å –µ—â–µ "+y(o.remainingCommentsCount)+" "+y(o.getCommentWordForm(o.remainingCommentsCount)),1)])):h("",!0)])])):(r(),d("div",{key:0,class:"spoiler-warning",onClick:e[0]||(e[0]=a=>o.showComments=!0)},[t("div",Ys,[e[15]||(e[15]=t("i",{class:"fas fa-eye-slash"},null,-1)),e[16]||(e[16]=t("h3",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–∫—Ä—ã—Ç—ã",-1)),e[17]||(e[17]=t("p",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä—ã. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å.",-1)),t("div",{class:L(["comments-count",{"no-comments":o.totalCommentsCount===0}])},[o.totalCommentsCount===0?(r(),d(ge,{key:0},[le(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç ")],64)):(r(),d(ge,{key:1},[le(y(o.totalCommentsCount)+" "+y(o.getCommentWordForm(o.totalCommentsCount)),1)],64))],2)])])),ve(n,{ref:"notificationRef"},null,512)])}const di=je(Ws,[["render",ui],["__scopeId","data-v-79080d6f"]]),ci={class:"movie-info"},vi={class:"content"},mi={key:0,class:"content-card"},fi={class:"movie-skeleton"},gi={class:"movie-skeleton__player"},ki={key:2,class:"content-card"},yi={key:3,class:"content-card"},hi={class:"content-header"},pi=["src"],bi={class:"content-title"},wi={key:0,class:"ratings-links"},Ci={key:1},_i=["href","title"],Ei={key:2},Mi=["href","title"],Li={key:3},Ii=["href","title"],Ri={key:4},Ti=["href","title"],Ai={key:5},Si=["href"],Pi={key:6,class:"rating-links-group"},xi=["href"],ji=["title"],Ui={key:0,class:"fa-regular fa-face-grin-wink"},Bi={key:1,class:"fas fa-spinner fa-spin"},Hi={key:2,class:"nudity-info-popup"},Ni={class:"nudity-info-content"},Di={key:1,class:"mobile-list-dropdown"},Vi={class:"mobile-list-content"},$i=["content"],Oi=["content"],Fi={class:"additional-info"},qi={class:"info-content"},Ki={key:0,class:"movie-poster-container desktop-only"},zi=["href"],Wi=["src"],Gi={class:"details-container"},Yi={class:"info-list"},Zi={key:0},Xi={key:1},Qi={key:2},Ji={key:3},ea={key:4},ta={key:5},oa={key:6},na={key:7},la={key:8},sa={class:"content-info"},ia={key:0,class:"content-description-text"},aa={key:3,class:"comments-section"},ra={key:4,class:"staff-section"},ua={class:"staff-categories"},da={key:0,class:"staff-category"},ca={class:"staff-list"},va=["href","title"],ma=["src","alt"],fa={class:"staff-name"},ga={key:0,class:"staff-role"},ka=["href","title"],ya={key:1,class:"staff-category"},ha={class:"staff-names-container"},pa={class:"staff-names-list"},ba=["href"],wa=["href","title"],Ca={key:2,class:"staff-category"},_a={class:"staff-names-container"},Ea={class:"staff-names-list"},Ma=["href"],La=["href","title"],Ia={key:5,class:"yt-video-container"},Ra={key:6,class:"related-movies"},Ta=["title"],Aa={key:7,class:"related-movies"},Sa=["title"],Pa={__name:"MovieInfo",setup(s){const e=m(!0),i=st(),o=kt(),w=jo(),_=io(),c=it(),v=m(_.params.kp_id),E=m(""),M=m(null),n=m(null),a=Uo(),p=Fo(),C=m(null),P=p.areTrailersActive,R=m(null),T=m(!1),I=m(!1),g=m(10),A=m(null),S=m(!1),O=m(!1),F=V(()=>{var b,u,Z,oe,we,me,ke,re,Ce,Q;return((u=(b=n.value)==null?void 0:b.lists)==null?void 0:u.isFavorite)||((oe=(Z=n.value)==null?void 0:Z.lists)==null?void 0:oe.isWatching)||((me=(we=n.value)==null?void 0:we.lists)==null?void 0:me.isLater)||((re=(ke=n.value)==null?void 0:ke.lists)==null?void 0:re.isCompleted)||((Q=(Ce=n.value)==null?void 0:Ce.lists)==null?void 0:Q.isAbandoned)}),z=V(()=>i.isCommentsEnabled),H=()=>{if(n.value){const b=n.value.name_ru||n.value.name_en||n.value.name_original||"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å–º–µ";document.title=b}},be=b=>b?b.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",Le=b=>(b||[]).map(u=>({kp_id:u.film_id,poster:u.poster_url_preview||u.poster_url,title:u.name_ru||u.name_en||u.name_original})),ye=b=>{if(typeof b!="number")return;const u=Math.floor(b/60),Z=b%60;return"".concat(u," —á. ").concat(Z," –º–∏–Ω.")},Ie=m(!1),U=m({top:"0px",left:"0px"}),te=b=>{Ie.value=!0,U.value={top:"".concat(b.pageY+10,"px"),left:"".concat(b.pageX-70,"px")}},W=async()=>{try{const b=[n.value.name_ru||n.value.name_en||n.value.name_original,...n.value.year?[n.value.year]:[],...n.value.film_length?[ye(n.value.film_length)]:[]];await navigator.clipboard.writeText(b.join(", ")),C.value.showNotification("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ")}catch(b){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",b)}},q=async(b=!0)=>{var u,Z,oe,we,me,ke,re,Ce;try{let Q;if(v.value.startsWith("shiki")?Q=await Ho(v.value):Q=await No(v.value,o.token),Array.isArray(Q)&&Q.length===0)throw new Error("–î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–∏—Å–∫.");n.value=Q,v.value.startsWith("shiki")?n.value={...n.value,title:n.value.name_ru||n.value.name_en,name_original:n.value.name_en,short_description:n.value.slogan}:n.value={...n.value,title:n.value.name_ru||n.value.name_en||n.value.name_original,kinopoisk_id:v.value},a.setHeaderContent({text:n.value.title,imageUrl:n.value.logo_url}),H();const ae={kp_id:v.value,title:((u=n.value)==null?void 0:u.name_ru)||((Z=n.value)==null?void 0:Z.name_en)||((oe=n.value)==null?void 0:oe.name_original),poster:((we=n.value)==null?void 0:we.poster_url)||((me=n.value)==null?void 0:me.cover_url)||((ke=n.value)==null?void 0:ke.screenshots[0]),year:(re=n.value)==null?void 0:re.year,type:(Ce=n.value)==null?void 0:Ce.type};if(v.value.startsWith("shiki"))if(n.value.screenshots&&n.value.screenshots.length>0){const k=Math.floor(Math.random()*n.value.screenshots.length),$=n.value.screenshots[k];w.updateMoviePoster($)}else ae.poster&&w.updateMoviePoster(ae.poster);else ae.poster&&w.updateMoviePoster(ae.poster);if(V(()=>i.isHistoryAllowed).value&&ae.kp_id&&ae.title&&b)if(o.token)try{await gt(ae.kp_id,D.HISTORY)}catch(k){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é:",k)}else i.addToHistory({...ae})}catch(Q){const{message:ae,code:Ee}=dt(Q);E.value=ae,M.value=Ee,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–ª—å–º–∞—Ö:",Q)}},se=V(()=>{var b,u;return console.log("–¢—Ä–µ–π–ª–µ—Ä—ã:",(b=n.value)==null?void 0:b.videos),(u=n.value)==null?void 0:u.videos}),ue=V(()=>{var b;return Le((b=n.value)==null?void 0:b.sequels_and_prequels)}),ie=V(()=>{var b;return Le((b=n.value)==null?void 0:b.similars)}),he=()=>{var oe;const b=((oe=document.querySelector(".related-movies"))==null?void 0:oe.clientWidth)||0,Z=Math.floor(b/160)||10;g.value=Math.max(1,Z)},Re=()=>{he()},pe=b=>{if(b.altKey&&b.keyCode===84&&document.querySelector(".player-container")){const Z=document.querySelector(".theater-mode-btn");Z&&Z.click()}},He=async()=>{var b;if(!o.token){C.value.showNotification('–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:()=>a.openLogin()});return}if((b=n.value)!=null&&b.imdb_id){if(A.value){A.value=null;return}S.value=!0;try{const u=await Do(n.value.imdb_id);A.value=u.nudity_info}catch(u){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö:",u),C.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö")}finally{S.value=!1}}},de=b=>{var Z,oe,we,me,ke,re,Ce,Q,ae,Ee,k,$,Me;return(Me={[D.FAVORITE]:((oe=(Z=n.value)==null?void 0:Z.lists)==null?void 0:oe.isFavorite)||!1,[D.HISTORY]:((me=(we=n.value)==null?void 0:we.lists)==null?void 0:me.isHistory)||!1,[D.LATER]:((re=(ke=n.value)==null?void 0:ke.lists)==null?void 0:re.isLater)||!1,[D.COMPLETED]:((Q=(Ce=n.value)==null?void 0:Ce.lists)==null?void 0:Q.isCompleted)||!1,[D.ABANDONED]:((Ee=(ae=n.value)==null?void 0:ae.lists)==null?void 0:Ee.isAbandoned)||!1,[D.WATCHING]:(($=(k=n.value)==null?void 0:k.lists)==null?void 0:$.isWatching)||!1}[b])!=null?Me:!1},Pe=async b=>{if(!o.token){C.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:()=>c.push("/login")});return}try{const u={[D.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[D.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[D.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[D.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[D.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[D.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};de(b)?(await ro(v.value,b),C.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(u[b]))):(await gt(v.value,b),C.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(u[b]))),await q(!1),O.value=!1}catch(u){const{message:Z,code:oe}=dt(u);C.value.showNotification("".concat(Z," ").concat(oe))}},_e=b=>{const u=document.querySelector(".mobile-list-dropdown");u&&!u.contains(b.target)&&(O.value=!1)};We(async()=>{await q(),e.value=!1,document.addEventListener("keydown",pe),window.addEventListener("resize",Re),setTimeout(he,100),document.addEventListener("click",_e)}),Bo(async()=>{a.clearHeaderContent(),document.removeEventListener("keydown",pe),window.removeEventListener("resize",Re),document.removeEventListener("click",_e)}),De(()=>_.params.kp_id,async b=>{b&&b!==v.value&&(a.clearHeaderContent(),v.value=b,R.value=null,await q(),e.value=!1)},{immediate:!0}),De(n,()=>{H()},{deep:!0});const J=b=>{var u,Z;return((Z=(u=n.value)==null?void 0:u.staff)==null?void 0:Z.filter(oe=>oe.profession_key===b))||[]};return(b,u)=>{var Z,oe,we,me,ke,re,Ce,Q,ae,Ee,k,$,Me,Ve,Ge,B,K,G;return r(),d(ge,null,[t("div",ci,[t("div",vi,[(e.value||!n.value)&&!E.value?(r(),d("div",mi,[t("div",fi,[u[10]||(u[10]=lt('<div class="movie-skeleton__header" data-v-7d7dce0e><div class="movie-skeleton__title" data-v-7d7dce0e></div></div><div class="movie-skeleton__ratings" data-v-7d7dce0e><div class="movie-skeleton__rating-item" data-v-7d7dce0e></div><div class="movie-skeleton__rating-item" data-v-7d7dce0e></div><div class="movie-skeleton__rating-item" data-v-7d7dce0e></div></div>',2)),t("div",gi,[ve(uo)]),u[11]||(u[11]=lt('<div class="movie-skeleton__additional-info" data-v-7d7dce0e><div class="movie-skeleton__section-title" data-v-7d7dce0e></div><div class="movie-skeleton__info-list" data-v-7d7dce0e><div class="movie-skeleton__info-item" data-v-7d7dce0e></div><div class="movie-skeleton__info-item" data-v-7d7dce0e></div><div class="movie-skeleton__info-item" data-v-7d7dce0e></div><div class="movie-skeleton__info-item" data-v-7d7dce0e></div><div class="movie-skeleton__info-item" data-v-7d7dce0e></div></div></div><div class="movie-skeleton__description" data-v-7d7dce0e><div class="movie-skeleton__description-line" data-v-7d7dce0e></div><div class="movie-skeleton__description-line" data-v-7d7dce0e></div><div class="movie-skeleton__description-line" data-v-7d7dce0e></div><div class="movie-skeleton__description-line" data-v-7d7dce0e></div></div>',2))])])):h("",!0),E.value?(r(),Be(ao,{key:1,message:E.value,code:M.value},null,8,["message","code"])):h("",!0),E.value?(r(),d("div",ki,[(r(),Be(so,{key:v.value,"kp-id":v.value,"movie-info":n.value,"onUpdate:movieInfo":q},null,8,["kp-id","movie-info"]))])):h("",!0),n.value&&!e.value?(r(),d("div",yi,[t("div",hi,[n.value.logo_url?(r(),d("div",{key:0,class:"content-logo",onMousemove:te,onMouseleave:u[0]||(u[0]=j=>Ie.value=!1),onClick:W},[t("img",{src:n.value.logo_url,alt:"–õ–æ–≥–æ—Ç–∏–ø —Ñ–∏–ª—å–º–∞",class:"content-logo"},null,8,pi)],32)):(r(),d("div",{key:1,onMousemove:te,onMouseleave:u[1]||(u[1]=j=>Ie.value=!1),onClick:W},[t("h1",bi,y(n.value.title),1)],32)),ee(t("div",{class:"title-copy-tooltip",style:ut(U.value)}," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ",4),[[ce,Ie.value]])]),n.value.kinopoisk_id||n.value.title||n.value.imdb_id||n.value.rating_imdb||n.value.shikimori_id?(r(),d("div",wi,[n.value.kinopoisk_id?(r(),Be(hl,{key:n.value.kinopoisk_id,"kp-id":n.value.kinopoisk_id,"show-dash":!0},null,8,["kp-id"])):h("",!0),n.value.kinopoisk_id?(r(),d("div",Ci,[t("a",{href:"https://www.kinopoisk.ru/film/".concat(n.value.kinopoisk_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:n.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(be(n.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[u[12]||(u[12]=t("img",{src:oo,alt:"–ö–ü",class:"rating-logo"},null,-1)),t("span",{class:L(["rating-value",X(ot)(n.value.rating_kinopoisk)])},y(n.value.rating_kinopoisk?n.value.rating_kinopoisk:"‚Äî"),3),u[13]||(u[13]=t("img",{src:Ze,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,_i)])):h("",!0),!n.value.kinopoisk_id&&n.value.title?(r(),d("div",Ei,[t("a",{href:"https://www.kinopoisk.ru/index.php?kp_query=".concat(encodeURIComponent(n.value.title+(n.value.year?" "+n.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:n.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(be(n.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[u[14]||(u[14]=t("img",{src:oo,alt:"–ö–ü",class:"rating-logo"},null,-1)),t("span",{class:L(["rating-value",X(ot)(n.value.rating_kinopoisk)])},y(n.value.rating_kinopoisk?n.value.rating_kinopoisk:"‚Äî"),3),u[15]||(u[15]=t("img",{src:Ze,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Mi)])):h("",!0),n.value.imdb_id?(r(),d("div",Li,[t("a",{href:"https://www.imdb.com/title/".concat(n.value.imdb_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:n.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(be(n.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[u[16]||(u[16]=t("img",{src:no,alt:"IMDb",class:"rating-logo"},null,-1)),t("span",{class:L(["rating-value",X(ot)(n.value.rating_imdb)])},y(n.value.rating_imdb?n.value.rating_imdb:"‚Äî"),3),u[17]||(u[17]=t("img",{src:Ze,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Ii)])):h("",!0),!n.value.imdb_id&&n.value.title?(r(),d("div",Ri,[t("a",{href:"https://www.imdb.com/find/?q=".concat(encodeURIComponent(n.value.title+(n.value.year?" "+n.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:n.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(be(n.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[u[18]||(u[18]=t("img",{src:no,alt:"IMDb",class:"rating-logo"},null,-1)),t("span",{class:L(["rating-value",X(ot)(n.value.rating_imdb)])},y(n.value.rating_imdb?n.value.rating_imdb:"‚Äî"),3),u[19]||(u[19]=t("img",{src:Ze,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Ti)])):h("",!0),n.value.shikimori_id?(r(),d("div",Ai,[t("a",{href:"https://shikimori.one/animes/".concat(n.value.shikimori_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},u[20]||(u[20]=[t("img",{src:zo,alt:"Shiki",class:"rating-logo"},null,-1),t("img",{src:Ze,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,Si)])):h("",!0),n.value.imdb_id?(r(),d("div",Pi,[t("a",{href:"https://www.imdb.com/title/".concat(n.value.imdb_id,"/parentalguide"),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},u[21]||(u[21]=[t("span",{class:"desktop-text"},"Parents Guide",-1),t("span",{class:"mobile-text"},"PG",-1),t("img",{src:Ze,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,xi),t("button",{class:"rating-link nudity-info-btn",onClick:He,title:A.value?"–°–∫—Ä—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é":"–ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ü–µ–Ω–∞—Ö(Sex & Nudity)"},[S.value?(r(),d("i",Bi)):(r(),d("i",Ui)),A.value?(r(),d("div",Hi,[t("div",Ni,y(A.value),1)])):h("",!0)],8,ji)])):h("",!0)])):h("",!0),(r(),Be(so,{key:v.value,"kp-id":v.value,"movie-info":n.value,"onUpdate:movieInfo":q},null,8,["kp-id","movie-info"])),X(i).isMobile?(r(),d("div",Di,[t("button",{class:L(["mobile-list-toggle",{}]),onClick:u[2]||(u[2]=j=>O.value=!O.value)},[t("span",{class:L(["material-icons",{active:F.value}])},y(F.value?"bookmark_added":"bookmark_border"),3),u[22]||(u[22]=t("span",{class:"button-label"},"–î–æ–±–∞–≤–∏—Ç—å –≤ —Å–ø–∏—Å–æ–∫",-1)),t("span",{class:L(["material-icons dropdown-arrow",{expanded:O.value}])},"expand_more",2)]),ee(t("div",Vi,[t("button",{class:L(["mobile-list-btn",{}]),onClick:u[3]||(u[3]=j=>Pe(X(D).FAVORITE))},[t("span",{class:L(["material-icons",{active:(oe=(Z=n.value)==null?void 0:Z.lists)==null?void 0:oe.isFavorite}])},y((me=(we=n.value)==null?void 0:we.lists)!=null&&me.isFavorite?"favorite":"favorite_border"),3),u[23]||(u[23]=t("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))]),t("button",{class:L(["mobile-list-btn",{}]),onClick:u[4]||(u[4]=j=>Pe(X(D).WATCHING))},[t("span",{class:L(["material-icons",{active:(re=(ke=n.value)==null?void 0:ke.lists)==null?void 0:re.isWatching}])},y((Q=(Ce=n.value)==null?void 0:Ce.lists)!=null&&Q.isWatching?"visibility":"visibility_off"),3),u[24]||(u[24]=t("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))]),t("button",{class:L(["mobile-list-btn",{}]),onClick:u[5]||(u[5]=j=>Pe(X(D).LATER))},[t("span",{class:L(["material-icons",{active:(Ee=(ae=n.value)==null?void 0:ae.lists)==null?void 0:Ee.isLater}])},"watch_later",2),u[25]||(u[25]=t("span",{class:"button-label"},"–ü–æ–∑–∂–µ",-1))]),t("button",{class:L(["mobile-list-btn",{}]),onClick:u[6]||(u[6]=j=>Pe(X(D).COMPLETED))},[t("span",{class:L(["material-icons",{active:($=(k=n.value)==null?void 0:k.lists)==null?void 0:$.isCompleted}])},y((Ve=(Me=n.value)==null?void 0:Me.lists)!=null&&Ve.isCompleted?"check_circle":"check_circle_outline"),3),u[26]||(u[26]=t("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))]),t("button",{class:L(["mobile-list-btn",{}]),onClick:u[7]||(u[7]=j=>Pe(X(D).ABANDONED))},[t("span",{class:L(["material-icons",{active:(B=(Ge=n.value)==null?void 0:Ge.lists)==null?void 0:B.isAbandoned}])},"not_interested",2),u[27]||(u[27]=t("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))])],512),[[ce,O.value]])])):h("",!0),t("meta",{name:"title-and-year",content:n.value.type==="FILM"&&n.value.year?"".concat(n.value.title," (").concat(n.value.year,")"):n.value.title},null,8,$i),n.value.name_original?(r(),d("meta",{key:2,name:"original-title",content:n.value.name_original},null,8,Oi)):h("",!0),t("div",Fi,[u[37]||(u[37]=t("h2",{class:"additional-info-title"},"–ü–æ–¥—Ä–æ–±–Ω–µ–µ",-1)),t("div",qi,[n.value.poster_url?(r(),d("div",Ki,[t("a",{href:n.value.poster_url,target:"_blank",rel:"noopener noreferrer"},[t("img",{src:n.value.poster_url,alt:"–ü–æ—Å—Ç–µ—Ä —Ñ–∏–ª—å–º–∞",class:"movie-poster"},null,8,Wi)],8,zi)])):h("",!0),t("div",Gi,[t("ul",Yi,[n.value.type&&X(to)[n.value.type]?(r(),d("li",Zi,[u[28]||(u[28]=t("strong",null,"–¢–∏–ø:",-1)),le(" "+y(X(to)[n.value.type]),1)])):h("",!0),n.value.year?(r(),d("li",Xi,[u[29]||(u[29]=t("strong",null,"–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞:",-1)),le(" "+y(n.value.year),1)])):h("",!0),n.value.title?(r(),d("li",Qi,[u[30]||(u[30]=t("strong",null,"–ù–∞–∑–≤–∞–Ω–∏–µ:",-1)),le(" "+y(n.value.title),1)])):h("",!0),n.value.name_original?(r(),d("li",Ji,[u[31]||(u[31]=t("strong",null,"–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:",-1)),le(" "+y(n.value.name_original),1)])):h("",!0),n.value.slogan?(r(),d("li",ea,[u[32]||(u[32]=t("strong",null,"–°–ª–æ–≥–∞–Ω:",-1)),le(" "+y(n.value.slogan),1)])):h("",!0),n.value.production_companies?(r(),d("li",ta,[u[33]||(u[33]=t("strong",null,"–ü—Ä–æ–¥–∞–∫—à–Ω:",-1)),le(" "+y(n.value.production_companies),1)])):h("",!0),(K=n.value.countries)!=null&&K.length?(r(),d("li",oa,[u[34]||(u[34]=t("strong",null,"–°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞:",-1)),le(" "+y(n.value.countries.map(j=>j.country).join(", ")),1)])):h("",!0),(G=n.value.genres)!=null&&G.length?(r(),d("li",na,[u[35]||(u[35]=t("strong",null,"–ñ–∞–Ω—Ä—ã:",-1)),le(" "+y(n.value.genres.map(j=>j.genre).join(", ")),1)])):h("",!0),n.value.film_length?(r(),d("li",la,[u[36]||(u[36]=t("strong",null,"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:",-1)),le(" "+y(ye(n.value.film_length)),1)])):h("",!0)]),t("div",sa,[n.value.description?(r(),d("p",ia,y(n.value.description),1)):h("",!0)])])])]),z.value?(r(),d("div",aa,[(r(),Be(di,{"movie-id":v.value,key:v.value},null,8,["movie-id"]))])):h("",!0),n.value.staff?(r(),d("div",ra,[t("div",ua,[J("ACTOR").length?(r(),d("div",da,[u[38]||(u[38]=t("h3",{class:"additional-info-title"},"–ê–∫—Ç—ë—Ä—ã",-1)),t("div",ca,[(r(!0),d(ge,null,Ae(J("ACTOR").slice(0,12),j=>(r(),d("div",{key:j.staff_id,class:"staff-item"},[t("a",{href:"https://www.kinopoisk.ru/name/".concat(j.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-link",title:j.description||""},[t("img",{src:j.poster_url,alt:j.name_ru,class:"staff-photo"},null,8,ma),t("span",fa,y(j.name_ru||j.name_en),1),j.description?(r(),d("span",ga,y(j.description),1)):h("",!0)],8,va)]))),128)),t("a",{class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(v.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(J("ACTOR").length," –∞–∫—Ç–µ—Ä–æ–≤")}," +"+y(J("ACTOR").length-12),9,ka)])])):h("",!0),J("DIRECTOR").length?(r(),d("div",ya,[u[39]||(u[39]=t("h3",{class:"additional-info-title"},"–†–µ–∂–∏—Å—Å—ë—Ä—ã",-1)),t("div",ha,[t("div",pa,[(r(!0),d(ge,null,Ae(J("DIRECTOR").slice(0,5),j=>(r(),d("a",{key:j.staff_id,href:"https://www.kinopoisk.ru/name/".concat(j.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},y(j.name_ru||j.name_en),9,ba))),128)),J("DIRECTOR").length>5?(r(),d("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(v.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(J("DIRECTOR").length," —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–≤")}," +"+y(J("DIRECTOR").length-5),9,wa)):h("",!0)])])])):h("",!0),J("PRODUCER").length?(r(),d("div",Ca,[u[40]||(u[40]=t("h3",{class:"additional-info-title"},"–ü—Ä–æ–¥—é—Å–µ—Ä—ã",-1)),t("div",_a,[t("div",Ea,[(r(!0),d(ge,null,Ae(J("PRODUCER").slice(0,5),j=>(r(),d("a",{key:j.staff_id,href:"https://www.kinopoisk.ru/name/".concat(j.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},y(j.name_ru||j.name_en),9,Ma))),128)),J("PRODUCER").length>5?(r(),d("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(v.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(J("PRODUCER").length," –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤")}," +"+y(J("PRODUCER").length-5),9,La)):h("",!0)])])])):h("",!0)])])):h("",!0),se.value.length&&X(P)?(r(),d("div",Ia,[ve(rl,{videos:se.value,"active-video-index":R.value,onSelect:b.playTrailer},null,8,["videos","active-video-index","onSelect"])])):h("",!0),ue.value.length?(r(),d("div",Ra,[u[41]||(u[41]=t("h2",null,"–°–∏–∫–≤–µ–ª—ã –∏ –ø—Ä–∏–∫–≤–µ–ª—ã",-1)),ve(X(lo),{"movies-list":T.value?ue.value:ue.value.slice(0,g.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),ue.value.length>g.value?(r(),d("a",{key:0,class:"expand-circle-button",onClick:u[8]||(u[8]=j=>T.value=!T.value),title:"".concat(T.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(ue.value.length,")")},y(T.value?"‚àí":"+".concat(ue.value.length-g.value)),9,Ta)):h("",!0)])):h("",!0),ie.value.length?(r(),d("div",Aa,[u[42]||(u[42]=t("h2",null,"–ü–æ—Ö–æ–∂–∏–µ",-1)),ve(X(lo),{"movies-list":I.value?ie.value:ie.value.slice(0,g.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),ie.value.length>g.value?(r(),d("a",{key:0,class:"expand-circle-button",onClick:u[9]||(u[9]=j=>I.value=!I.value),title:"".concat(I.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(ie.value.length,")")},y(I.value?"‚àí":"+".concat(ie.value.length-g.value)),9,Sa)):h("",!0)])):h("",!0)])):h("",!0)])]),ve(ct,{ref_key:"notificationRef",ref:C},null,512)],64)}}},Va=je(Pa,[["__scopeId","data-v-7d7dce0e"]]);export{Va as default};
