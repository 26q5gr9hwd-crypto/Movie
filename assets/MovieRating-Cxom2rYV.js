import{_ as Rt,r as v,c as ne,b as R,d as T,e as n,m as Ne,t as C,O as Le,g as J,P as rt,n as L,l as yt,u as Jt,q as Lo,N as Do,B as Qt,x as je,o as eo,S as _o,k as Bt,E as qo,f as Pt,Z as Yt,p as te,V as oe,A as he,U as Y,ap as Ho,aq as Wo,G as Xt,X as Ft,af as zo,ad as Vo,a7 as Uo,ar as Go,as as Zt}from"./index-rX41k649.js";import{S as Ko}from"./SpinnerLoading-DdT4h7d3.js";import{N as to}from"./ToastMessage-CO_eekV9.js";import{u as Yo,S as Xo}from"./player-DN4yuM_h.js";import{p as jt,b as Je}from"./dateUtils-BWepax9P.js";import{_ as Zo}from"./icon-imdb-logo-5qtstUwS.js";const xs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVR4nO2ZQUoDMRSGR7eewHoFsVS0HkUUXNXqASqK2EURBPFIVRe6c+UN1CvUXWvbT4KvMAwzNnnJdCrmg1BKad7/v7y0b5IkiUQiCwGoAx3gQjEugZ0qxTeAIX6MKjMBnBOGS62AVWAPOHVYdlMu9YArYOhphLeBT+ALmOKGEd2QubaAK+B2zngFxt4GgDXgGZjgR8ch5oEkCi8DkvlnRcYLV0Apfqw10M7JvPkV6AN3FmVwK+WyZRnvMEe8ef/ibECyb2o+zRuwnpQAxeLNivQ0BvYyE46qEJ/8fK4ycJKp/X4V4n0MdDNfukkqEO9jwP1LDgD7BeKPgmgp04CL+KUz4Cp+qQxoxC+NAdsNm4c0hWkukkUa8BGfegiadbFDq3/2UAZ8xc+QVvzMtqcKYkBaZ5/MN5xEl2DgLGDZ1KswsC09FPJqXTZoNm5oA6kyMGI2FxqfkluJ0uMTDfhBXAHiHvCCWEL8/RLqlv1MPCf+TSZ+13WC7KnEfWlqcwAeU7GNjnbiQsG5UC1ZAEAt1UMhOpquk6zknMy9l20C2AA+MnEHRo9msuOCs9EH4Fp5TVQ0rqVs0plH4re02Qh1Oq1lCjypsp+5H3gKcD/gykTirqnFZ/ZDy+OGxpapzD+QePrM/2KkKfcGPcv7AdvRkz23G1x4JPIP+AY3r/ywUk/2JAAAAABJRU5ErkJggg==",Ss="/reyohoho/assets/icon-shikimori-DGvXK9Jc.svg",Qe=D=>{const s=document.createElement("div");s.style.position="fixed",s.style.top="0",s.style.left="0",s.style.width="100%",s.style.height="100%",s.style.backgroundColor="rgba(0, 0, 0, 0.8)",s.style.color="white",s.style.display="flex",s.style.justifyContent="center",s.style.alignItems="center",s.style.fontSize="2rem",s.style.zIndex="99000",s.textContent=D,document.body.appendChild(s),setTimeout(()=>{document.body.removeChild(s)},2e3)},jo={key:0},Jo={key:1},Qo={class:"players-list"},en=["onClick"],tn={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},on={key:0},nn={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},sn={key:1},ln={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},an=["onClick"],rn={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},cn={__name:"PlayerModal",props:{players:{type:Array,required:!0},selectedPlayer:{type:Object,default:null}},emits:["close","select"],setup(D,{emit:s}){const a=D,r=s,m=v(null),w=ne(()=>a.players.filter(k=>!f(k)&&!_(k))),q=ne(()=>a.players.some(k=>f(k))),A=ne(()=>a.players.some(k=>_(k))),f=k=>k.key.toUpperCase().includes("HDREZKA"),_=k=>k.key.toUpperCase().includes("KODIK"),K=k=>k.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"").replace(/KODIK>/,"").trim(),B=k=>{r("select",k),r("close")},se=k=>a.selectedPlayer&&a.selectedPlayer.key===k.key,W=k=>a.selectedPlayer?k==="hdrezka"&&f(a.selectedPlayer)||k==="kodik"&&_(a.selectedPlayer):!1,$=k=>{m.value=k},h=()=>{m.value=null},Se=k=>{let O=a.players.filter(b=>k==="hdrezka"&&f(b)||k==="kodik"&&_(b));return k==="kodik"?O.sort((b,Q)=>K(b.translate).localeCompare(K(Q.translate))):O},$e=k=>Se(k).some(O=>O.warning);return(k,O)=>(T(),R("div",{class:"modal",onClick:O[4]||(O[4]=yt(b=>k.$emit("close"),["self"]))},[n("div",{class:"modal-content",onClick:O[3]||(O[3]=yt(()=>{},["stop"]))},[n("button",{class:"close",onClick:O[0]||(O[0]=b=>k.$emit("close"))},"√ó"),m.value?(T(),R("h2",Jo,[n("button",{class:"back-btn",onClick:h},"‚Üê –ù–∞–∑–∞–¥"),Ne(" "+C(m.value==="hdrezka"?"ReYohoho - HDrezka":"Kodik"),1)])):(T(),R("h2",jo,"–í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–µ–µ—Ä")),n("ul",Qo,[m.value?(T(!0),R(Le,{key:1},rt(Se(m.value),b=>(T(),R("li",{key:b.key},[n("button",{class:L(["player-item",{active:se(b)}]),onClick:Q=>B(b)},[Ne(C(K(b.translate))+" ",1),b.warning?(T(),R("span",rn,"warning")):J("",!0)],10,an)]))),128)):(T(),R(Le,{key:0},[(T(!0),R(Le,null,rt(w.value,b=>(T(),R("li",{key:b.key},[n("button",{class:L(["player-item",{active:se(b)}]),onClick:Q=>B(b)},[Ne(C(K(b.translate))+" ",1),b.warning?(T(),R("span",tn,"warning")):J("",!0)],10,en)]))),128)),q.value?(T(),R("li",on,[n("button",{class:L(["group-item",{active:W("hdrezka")}]),onClick:O[1]||(O[1]=b=>$("hdrezka"))},[O[5]||(O[5]=n("span",{class:"material-icons group-icon"},"folder",-1)),O[6]||(O[6]=Ne(" ReYohoho - HDrezka ")),$e("hdrezka")?(T(),R("span",nn,"warning")):J("",!0)],2)])):J("",!0),A.value?(T(),R("li",sn,[n("button",{class:L(["group-item",{active:W("kodik")}]),onClick:O[2]||(O[2]=b=>$("kodik"))},[O[7]||(O[7]=n("span",{class:"material-icons group-icon"},"folder",-1)),O[8]||(O[8]=Ne(" Kodik ")),$e("kodik")?(T(),R("span",ln,"warning")):J("",!0)],2)])):J("",!0)],64))])])]))}},un=Rt(cn,[["__scopeId","data-v-8b8d2b67"]]);class dn{constructor(){this.ws=null,this.isConnected=!1,this.isAuthenticated=!1,this.messageId=0,this.sources=new Map,this.filtersFound=new Map,this.pendingRequests=new Map,this.callbacks={onConnect:null,onDisconnect:null,onSourcesUpdated:null,onFiltersFound:null,onError:null},this.BLUR_FILTER_NAME="reyohoho"}generateMessageId(){return++this.messageId}setCallbacks(s){this.callbacks=s}async connect(s="localhost",a=4455,r=""){return new Promise((m,w)=>{const q="ws://".concat(s,":").concat(a);console.log("Connecting to OBS WebSocket at ".concat(q)),this.ws=new WebSocket(q),this.ws.onopen=async()=>{var A,f;console.log("WebSocket connection opened");try{const _=await this.authenticate(r);console.log("Authentication response:",_),_.success?(console.log("Successfully authenticated to OBS"),(f=(A=this.callbacks).onConnect)==null||f.call(A),this.loadSourcesAndSearchFilters(),m()):(console.error("Authentication failed"),w(new Error("Authentication failed")))}catch(_){console.error("Error during authentication:",_),w(_)}},this.ws.onmessage=A=>{this.handleMessage(JSON.parse(A.data))},this.ws.onclose=()=>{var A,f;console.log("WebSocket connection closed"),(f=(A=this.callbacks).onDisconnect)==null||f.call(A)},this.ws.onerror=A=>{var f,_;console.error("WebSocket error:",A),(_=(f=this.callbacks).onError)==null||_.call(f,A.message||"Connection error"),w(A)}})}disconnect(){if(this.ws&&(this.ws.close(),this.ws=null),this.pendingRequests){for(const[,{reject:s}]of this.pendingRequests.entries())s(new Error("Connection closed"));this.pendingRequests.clear()}this.sources.clear(),this.filtersFound.clear()}sendRequest(s,a={}){return new Promise((r,m)=>{if(!this.isConnected||!this.ws){console.warn("No connection to OBS"),m(new Error("No connection to OBS"));return}const w=this.generateMessageId().toString(),q={op:6,d:{requestType:s,requestId:w,requestData:a}};console.log("Sending OBS request: ".concat(s),a),this.pendingRequests.set(w,{resolve:r,reject:m}),this.ws.send(JSON.stringify(q)),setTimeout(()=>{this.pendingRequests&&this.pendingRequests.has(w)&&(this.pendingRequests.delete(w),m(new Error("Request ".concat(s," timed out"))))},1e4)})}handleMessage(s){switch(s.op){case 0:this.handleHello(s.d);break;case 2:this.handleIdentified();break;case 7:this.handleRequestResponse(s.d);break;case 5:this.handleEvent(s.d);break;default:console.log("Unknown OBS message: op=".concat(s.op))}}authenticate(s=""){return new Promise(a=>{this.password=s,this.authResolve=a})}async handleHello(s){console.log("Received OBS hello"),this.isConnected=!0;const a={op:1,d:{rpcVersion:1}};if(s.authentication&&this.password)try{const r=new TextEncoder,m=await crypto.subtle.digest("SHA-256",r.encode(this.password+s.authentication.salt)),w=Array.from(new Uint8Array(m)),q=btoa(String.fromCharCode(...w)),A=await crypto.subtle.digest("SHA-256",r.encode(q+s.authentication.challenge)),f=Array.from(new Uint8Array(A)),_=btoa(String.fromCharCode(...f));a.d.authentication=_}catch(r){console.error("Authentication error:",r)}this.ws.send(JSON.stringify(a))}handleIdentified(){console.log("OBS authentication successful"),this.isAuthenticated=!0,this.authResolve&&(this.authResolve({success:!0}),this.authResolve=null)}handleRequestResponse(s){const{requestId:a,requestType:r,requestStatus:m,responseData:w}=s;if(console.log("Received response for ".concat(r,":"),{success:m.result,code:m.code,comment:m.comment}),!this.pendingRequests){console.warn("No pending requests map");return}const q=this.pendingRequests.get(a);if(!q){console.warn("No pending request found for ID: ".concat(a));return}this.pendingRequests.delete(a),m.result?(console.log("Request ".concat(r," successful"),w),q.resolve(w)):(console.error("Request ".concat(r," failed:"),m.comment),q.reject(new Error("".concat(r," failed: ").concat(m.comment))))}handleFilterListResponse(s){const a=s.sourceName,m=(s.filters||[]).find(w=>w.filterName.toLowerCase()===this.BLUR_FILTER_NAME.toLowerCase());m&&(this.foundFilters.set(a,{sourceName:a,filterName:m.filterName,enabled:m.filterEnabled}),console.log("Found reyohoho filter in source: ".concat(a))),this.checkSearchComplete()}checkSearchComplete(){setTimeout(()=>{var s,a;console.log("Search complete. Found ".concat(this.foundFilters.size," reyohoho filters")),(a=(s=this.callbacks).onFiltersFound)==null||a.call(s,Array.from(this.foundFilters.values()))},500)}handleEvent(s){console.log("OBS event: ".concat(s.eventType))}async testConnection(){try{console.log("Testing OBS connection...");const s=await this.sendRequest("GetVersion");return console.log("OBS connection test successful:",s),{success:!0,version:s}}catch(s){return console.error("OBS connection test failed:",s),{success:!1,error:s.message}}}async loadSourcesAndSearchFilters(){var s,a,r,m,w,q,A,f,_,K;try{console.log("Loading sources and searching for filters...");try{const $=await this.sendRequest("GetVersion");console.log("OBS version info:",$)}catch($){console.warn("Could not get OBS version:",$)}console.log("Requesting scene list...");const B=await this.sendRequest("GetSceneList");if(console.log("Raw scenes response:",B),!B||!B.scenes){console.error("Invalid scenes response structure:",B),(a=(s=this.callbacks).onError)==null||a.call(s,"Invalid response from OBS - no scenes data");return}console.log("Found scenes:",B.scenes.length),console.log("Requesting input list...");const se=await this.sendRequest("GetInputList");if(console.log("Raw inputs response:",se),!se||!se.inputs){console.error("Invalid inputs response structure:",se),(m=(r=this.callbacks).onError)==null||m.call(r,"Invalid response from OBS - no inputs data");return}console.log("Found inputs:",se.inputs.length),this.sources.clear(),this.filtersFound.clear();for(const $ of B.scenes)if(console.log("Checking scene: ".concat($.sceneName," with ").concat($.sceneItems?$.sceneItems.length:0," items")),$.sceneItems&&Array.isArray($.sceneItems))for(const h of $.sceneItems)h.sourceName&&(this.sources.set(h.sourceName,{sceneName:$.sceneName,sourceId:h.sceneItemId,sourceName:h.sourceName}),await this.searchFiltersInSource(h.sourceName,$.sceneName));for(const $ of se.inputs)console.log("Checking input: ".concat($.inputName)),this.sources.has($.inputName)||this.sources.set($.inputName,{sceneName:"Direct Input",sourceId:null,sourceName:$.inputName}),await this.searchFiltersInSource($.inputName,"Direct Input");const W=Array.from(this.filtersFound.values());console.log("Total filters found:",W.length),W.forEach($=>{console.log("- ".concat($.sourceName,": ").concat($.filterName," (").concat($.enabled?"enabled":"disabled",")"))}),(q=(w=this.callbacks).onFiltersFound)==null||q.call(w,W),(f=(A=this.callbacks).onSourcesUpdated)==null||f.call(A,Array.from(this.sources.values()))}catch(B){console.error("Error loading sources:",B),console.error("Error stack:",B.stack),(K=(_=this.callbacks).onError)==null||K.call(_,"Error loading sources: ".concat(B.message))}}async searchFiltersInSource(s,a){try{console.log("Searching filters in source: ".concat(s));const r=await this.sendRequest("GetSourceFilterList",{sourceName:s});console.log("Source ".concat(s," has ").concat(r.filters.length," filters"));for(const m of r.filters){console.log("  Filter: ".concat(m.filterName," (").concat(m.filterEnabled?"enabled":"disabled",")"));const w="".concat(s,"::").concat(m.filterName);this.filtersFound.set(w,{id:w,sourceName:s,sceneName:a,filterName:m.filterName,enabled:m.filterEnabled})}}catch(r){console.warn("Could not get filters for source ".concat(s,":"),r)}}async enableBlur(s){var r,m;if(!s){console.warn("No filter selected for blur");return}const a=this.filtersFound.get(s);if(!a){console.warn("Selected filter not found:",s);return}try{await this.sendRequest("SetSourceFilterEnabled",{sourceName:a.sourceName,filterName:a.filterName,filterEnabled:!0}),a.enabled=!0,console.log("Enabled blur filter: ".concat(a.sourceName,"::").concat(a.filterName))}catch(w){(m=(r=this.callbacks).onError)==null||m.call(r,"Error enabling filter: ".concat(w.message))}}async disableBlur(s){var r,m;if(!s){console.warn("No filter selected for blur");return}const a=this.filtersFound.get(s);if(!a){console.warn("Selected filter not found:",s);return}try{await this.sendRequest("SetSourceFilterEnabled",{sourceName:a.sourceName,filterName:a.filterName,filterEnabled:!1}),a.enabled=!1,console.log("Disabled blur filter: ".concat(a.sourceName,"::").concat(a.filterName))}catch(w){(m=(r=this.callbacks).onError)==null||m.call(r,"Error disabling filter: ".concat(w.message))}}async testBlur(s,a=2e3){if(!s){console.warn("No filter selected for test");return}await this.enableBlur(s),setTimeout(()=>{this.disableBlur(s)},a)}getFilterById(s){return this.filtersFound.get(s)}getAllFilters(){return Array.from(this.filtersFound.values())}}const vn={class:"players-list"},pn=["src"],mn={key:1,class:"controls"},fn={class:"main-controls"},gn={class:"material-icons"},yn={class:"list-button-item"},hn={class:"material-icons"},bn={class:"list-button-item"},wn={class:"material-icons"},kn={class:"list-button-item"},xn={class:"list-button-item"},Sn={class:"material-icons"},Cn={class:"list-button-item"},En={class:"material-icons"},In={class:"tooltip-container","data-tooltip-container":"dimming"},Tn={class:"material-icons"},An={class:"tooltip-container","data-tooltip-container":"blur"},$n={class:"tooltip-container","data-tooltip-container":"compressor"},Mn={class:"tooltip-container","data-tooltip-container":"mirror"},Bn={class:"tooltip-container","data-tooltip-container":"theater"},Fn={class:"material-symbols-outlined"},Pn={class:"custom-tooltip","data-tooltip":"theater"},Rn={class:"tooltip-container","data-tooltip-container":"pip"},On={class:"tooltip-container","data-tooltip-container":"aspect_ratio"},Nn={class:"current-ratio"},Ln=["onClick"],Dn={key:0,class:"tooltip-container","data-tooltip-container":"app_link"},_n={class:"custom-tooltip","data-tooltip":"app_link"},qn={key:1,class:"tooltip-container","data-tooltip-container":"copy_link"},Hn={class:"custom-tooltip","data-tooltip":"copy_link"},Wn={key:2,class:"tooltip-container","data-tooltip-container":"overlay"},zn={class:"material-icons"},Vn={key:0,class:"desktop-list-buttons"},Un={class:"tooltip-container"},Gn={class:"material-icons"},Kn={class:"custom-tooltip"},Yn={class:"tooltip-container"},Xn={class:"material-icons"},Zn={class:"custom-tooltip"},jn={class:"tooltip-container"},Jn={class:"custom-tooltip"},Qn={class:"tooltip-container"},es={class:"material-icons"},ts={class:"custom-tooltip"},os={class:"tooltip-container"},ns={class:"material-icons"},ss={class:"custom-tooltip"},is={__name:"PlayerComponent",props:{kpId:String,movieInfo:{type:Object,default:()=>({})}},emits:["update:selectedPlayer","update:movieInfo"],setup(D,{emit:s}){const a=Jt(),r=Yo(),m=Lo(),w=Do(),q=Qt(),A=v(w.params.kp_id),f=D,_=s,K=v([]),B=v(null),se=v(!0),W=v(!1),$=v(!1),h=v(null),Se=v(null),$e=v(!1),k=v(""),O=v(null),b=v(window.innerHeight*.9),Q=ne(()=>"".concat(b.value,"px")),X=ne(()=>a.isMobile),g=ne(()=>!!window.electronAPI),E=v(null),ct=v(!1);let ht=null;const Ve=v(null),oo=v(null),no=v(null),me=v(null),Ue=v(!1),we=v(!1),fe=v(null),bt=v(null),ut=v(0),ce=v(null),Ce=v(null),ke=v(null),De=v(null),_e=v(null),Ee=v(null),H=ne({get:()=>r.videoOverlayEnabled2,set:t=>r.updateVideoOverlay(t)}),G=ne({get:()=>r.overlaySettings,set:t=>r.updateOverlaySettings(t)}),Ot=v(0),Nt=v(0),qe=v([]),et=v(!1);let Me=null;const p=v(null),Ge=v(null),Ie=v(!1),Z=v(null),Te=v(!1),Lt=v([]),Ke=v([]),de=ne({get:()=>r.obsSettings,set:t=>r.updateObsSettings(t)}),wt=t=>{const e=document.querySelector('[data-tooltip-container="'.concat(t,'"]')),o=document.querySelector('[data-tooltip="'.concat(t,'"]'));if(!e||!o)return;const l=e.getBoundingClientRect(),i=o.getBoundingClientRect(),x=window.innerHeight;l.bottom+i.height>x?(o.style.top="auto",o.style.bottom="100%",o.style.marginTop="0",o.style.marginBottom="12px",o.style.transform="translateX(-50%)"):(o.style.top="100%",o.style.bottom="auto",o.style.marginTop="12px",o.style.marginBottom="0",o.style.transform="translateX(-50%)")},le=t=>{E.value=t,ct.value=!1,clearTimeout(ht),Ft(()=>{wt(t)})},kt=()=>{ct.value||(ht=setTimeout(()=>{E.value=null},300))},xt=()=>{ct.value=!0,clearTimeout(ht)},dt=()=>{ct.value=!1,E.value=null},Be=ne({get:()=>r.aspectRatio,set:t=>r.updateAspectRatio(t)}),tt=ne({get:()=>r.isCentered,set:t=>r.updateCentering(t)}),so=ne(()=>{var t,e,o,l,i,x,F,M,c,y;return((e=(t=f.movieInfo)==null?void 0:t.lists)==null?void 0:e.isFavorite)||((l=(o=f.movieInfo)==null?void 0:o.lists)==null?void 0:l.isWatching)||((x=(i=f.movieInfo)==null?void 0:i.lists)==null?void 0:x.isLater)||((M=(F=f.movieInfo)==null?void 0:F.lists)==null?void 0:M.isCompleted)||((y=(c=f.movieInfo)==null?void 0:c.lists)==null?void 0:y.isAbandoned)}),Dt=ne(()=>r.preferredPlayer),io=v(0),vt=t=>t.toUpperCase(),St=()=>{if(W.value||!Se.value)return;const[t,e]=Be.value.split(":").map(Number);b.value=window.innerHeight*.9,io.value=Math.min(Se.value.clientWidth*(e/t),b.value)},lo=ne(()=>{if(W.value)return{};const[t,e]=Be.value.split(":").map(Number),o=b.value*(t/e);return{width:"100%",maxWidth:"".concat(o,"px"),maxHeight:Q.value,margin:"0 auto",overflow:"hidden"}}),ao=ne(()=>{const[t,e]=Be.value.split(":").map(Number);return{position:"relative",width:"100%",paddingTop:"".concat(e/t*100,"%")}}),ot=()=>{Se.value&&setTimeout(()=>{Ft(()=>{Se.value.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})},500)},ro=async()=>{try{k.value="",O.value=null;let t;if(f.kpId.startsWith("shiki")){const e=f.kpId.replace("shiki","");t=await Ho(e)}else t=await Wo(f.kpId);if(K.value=Object.entries(t).map(([e,o])=>({key:e.toUpperCase(),...o})),K.value.length>0){if(Dt.value){const e=vt(Dt.value),o=K.value.find(l=>vt(l.key)===e);B.value=o||K.value[0]}else B.value=K.value[0];_("update:selectedPlayer",B.value)}}catch(t){const{message:e,code:o}=Xt(t);k.value=e,O.value=o,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–ª–µ–µ—Ä–æ–≤:",t)}},co=()=>{$e.value=!0},_t=()=>{$e.value=!1},uo=()=>{try{return ce.value||(ce.value=new(window.AudioContext||window.webkitAudioContext)),Ce.value||(Ce.value=ce.value.createDynamicsCompressor(),Ce.value.threshold.value=-50,Ce.value.knee.value=40,Ce.value.ratio.value=12,Ce.value.attack.value=0,Ce.value.release.value=.25,De.value=ce.value.createGain(),_e.value=ce.value.createGain(),De.value.gain.value=0,_e.value.gain.value=1,Ce.value.connect(De.value),De.value.connect(ce.value.destination),_e.value.connect(ce.value.destination)),!0}catch(t){return console.log("Error initializing audio context:",t),!1}},vo=async t=>{try{if(!ce.value||Ee.value===t)return!0;const e=h.value,o=(e==null?void 0:e.src)||"";if(o.includes("videoframe")||o.includes("kinoserial.net")||o.includes("allarknow"))return console.log("Player detected as unsupported for compressor:",o),Ee.value=t,ke.value=null,we.value=!1,g.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –ø–ª–µ–µ—Ä–æ–º"),!1;if(ke.value)try{ke.value.disconnect()}catch(i){}const l=async(i=0)=>{i>0&&await new Promise(x=>setTimeout(x,i));try{return ke.value=ce.value.createMediaElementSource(t),Ee.value=t,ke.value.connect(Ce.value),ke.value.connect(_e.value),console.log("Video audio setup completed (attempt with ".concat(i,"ms delay)")),!0}catch(x){if(x.name==="InvalidStateError"&&x.message.includes("already connected"))return console.log("MediaElementSource already connected (".concat(i,"ms delay attempt)")),!1;throw x}};return await l(0)||await l(100)||await l(300)||await l(800)?!0:(console.log("Video element has internal audio processing, compressor not available for this player"),Ee.value=t,ke.value=null,we.value=!1,g.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –ø–ª–µ–µ—Ä–æ–º"),!1)}catch(e){return console.log("Error setting up video audio:",e),!1}},Ct=async t=>{if(h.value)try{const e=h.value,o=e.contentDocument||e.contentWindow.document;if(!o)return;const l=o.querySelectorAll("video");if(l.length===0)return;const i=l[0];if(!uo())return;if(!await vo(i)||!ke.value){console.log("Compressor not available for this player");return}t&&!we.value?(De.value.gain.setValueAtTime(1,ce.value.currentTime),_e.value.gain.setValueAtTime(0,ce.value.currentTime),we.value=!0,g.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –≤–∫–ª—é—á—ë–Ω"),console.log("Compressor enabled")):!t&&we.value&&(De.value.gain.setValueAtTime(0,ce.value.currentTime),_e.value.gain.setValueAtTime(1,ce.value.currentTime),we.value=!1,g.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –æ—Ç–∫–ª—é—á—ë–Ω"),console.log("Compressor disabled"))}catch(e){console.log("Compressor error:",e),g.value&&window.electronAPI.showToast("–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä–∞")}},po=()=>{if(h.value)try{const t=h.value,e=t.contentDocument||t.contentWindow.document;if(!e)return;const o=e.querySelectorAll("video");if(o.length>0){const l=o[0];l.style.filter.includes("blur")||(l.style.filter="blur(50px)")}else t.style.filter.includes("blur")||(t.style.filter="blur(50px)")}catch(t){console.log("Error enabling blur:",t)}},mo=()=>{if(h.value)try{const t=h.value,e=t.contentDocument||t.contentWindow.document;if(!e)return;const o=e.querySelectorAll("video");if(o.length>0){const l=o[0];l.style.filter.includes("blur")&&(l.style.filter="")}else t.style.filter.includes("blur")&&(t.style.filter="")}catch(t){console.log("Error disabling blur:",t)}},fo=()=>{if(g.value)try{const t=h.value,e=t.contentDocument||t.contentWindow.document;if(!e)return;const o=e.querySelectorAll("video");if(o.length>0){const l=o[0];l.style.filter.includes("blur")?l.style.filter="":l.style.filter="blur(50px)"}else t.style.filter.includes("blur")?t.style.filter="":t.style.filter="blur(50px)"}catch(t){console.log("Error toggling blur:",t)}else Qe("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank")},qt=()=>{g.value?(He.value=!He.value,Ct(He.value)):(Qe("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},Ht=()=>{g.value?(Ye.value=!Ye.value,yo(Ye.value)):(Qe("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},pt=()=>{W.value=!W.value,W.value?(window.addEventListener("mousemove",Et),document.addEventListener("keydown",It),document.body.classList.add("no-scroll")):(window.removeEventListener("mousemove",Et),document.removeEventListener("keydown",It),document.body.classList.remove("no-scroll")),$.value=W.value,Ft(()=>ot())},Wt=v(null),Et=()=>{Wt.value=setTimeout(()=>{clearTimeout(Wt.value),$.value=!1},4e3),$.value=!0},mt=ne(()=>a.dimmingEnabled),go=()=>{W.value||a.toggleDimming()},He=ne({get:()=>r.compressorEnabled,set:t=>r.updateCompressor(t)}),Ye=ne({get:()=>r.mirrorEnabled,set:t=>r.updateMirror(t)}),yo=t=>{if(h.value)try{const e=h.value,o=e.contentDocument||e.contentWindow.document;if(!o)return;const l=o.querySelectorAll("video");if(l.length>0&&(l.forEach(i=>{t?i.style.transform="scaleX(-1)":i.style.transform="scaleX(1)"}),Ue.value=t,g.value)){const i=t?"–ó–µ—Ä–∫–∞–ª–æ –≤–∫–ª—é—á–µ–Ω–æ":"–ó–µ—Ä–∫–∞–ª–æ –æ—Ç–∫–ª—é—á–µ–Ω–æ";window.electronAPI.showToast(i)}}catch(e){}},ho=()=>{me.value&&clearInterval(me.value),me.value=setInterval(()=>{if(h.value)try{const t=h.value,e=t.contentDocument||t.contentWindow.document;if(!e)return;const o=e.querySelectorAll("video");if(o.length>0){const l=o[0],x=l.style.transform==="scaleX(-1)";Ye.value&&!x?(l.style.transform="scaleX(-1)",Ue.value=!0):!Ye.value&&x&&(l.style.transform="scaleX(1)",Ue.value=!1),Ee.value!==l?(Ee.value=null,we.value=!1,He.value&&setTimeout(()=>{Ct(!0)},500)):He.value!==we.value&&ke.value&&(console.log("Compressor state mismatch, reapplying"),Ct(He.value))}}catch(t){}},1e3)},bo=(t=!1)=>{if(!g.value)return;fe.value&&clearInterval(fe.value);let e=!1,o=[];function l(){var i;if(o=[],window.selectedNudityTimings&&Array.isArray(window.selectedNudityTimings)&&((i=f.movieInfo)!=null&&i.nudity_timings)){for(const x of f.movieInfo.nudity_timings)if(window.selectedNudityTimings.includes(x.id)){const F=jt(x.timing_text);F&&F.length>0&&o.push(...F)}}}l(),fe.value=setInterval(()=>{var i,x,F;if(h.value){l();try{const M=h.value,c=M.contentDocument||M.contentWindow.document;if(!c)return;const y=c.querySelectorAll("video");if(y.length>0){const I=y[0];if(Ot.value=I.currentTime||0,Nt.value=I.duration||0,g.value&&H.value&&!p.value&&!Ie.value&&Date.now()-(window.iframeLoadTime||0)>=100)try{Xe(c,I)}catch(j){console.log("Error creating overlay:",j),Ie.value=!1}if(g.value&&!H.value&&p.value&&setTimeout(()=>{!H.value&&p.value&&Fe()},100),g.value&&((i=f.movieInfo)!=null&&i.nudity_timings)){const V=I.currentTime,j=[],ve=[];if(window.overlayNudityTimings&&Array.isArray(window.overlayNudityTimings)&&window.overlayNudityTimings.length>0){for(const S of f.movieInfo.nudity_timings)if(window.overlayNudityTimings.includes(S.id)){const N=jt(S.timing_text);if(N&&N.length>0){const ue=[];for(const[ae,ie]of N){let U="normal";V>=ae&&V<=ie?(U="active",ve.push(S.id)):ae>V&&ae-V<=5&&(U="upcoming"),ue.push({text:"[".concat(Je(ae),"-").concat(Je(ie),"]"),status:U})}j.push({id:S.id,intervals:ue})}}}qe.value=j,et.value=ve.length>0||j.some(S=>S.intervals.some(N=>N.status==="upcoming"))}if(g.value&&p.value&&H.value&&Kt(),!I.paused){const V=I.currentTime,j=I.duration,ve=j>0?V/j*100:0;if(t&&(console.log("Video position: ".concat(V.toFixed(2),"s / ").concat(j.toFixed(2),"s (").concat(ve.toFixed(1),"%)")),o.length>0)){const N=o.map(([ue,ae])=>"".concat(Je(ue)," - ").concat(Je(ae))).join(", ");console.log("Active blur intervals: [".concat(N,"]"))}let S=!1;for(const[N,ue]of o)if(V>=N&&V<=ue){S=!0;break}de.value.enabled&&Te.value&&de.value.selectedFilterId?S&&!e?((x=Z.value)==null||x.enableBlur(de.value.selectedFilterId),e=!0,console.log("OBS Blur applied at",V.toFixed(2),"seconds")):!S&&e&&((F=Z.value)==null||F.disableBlur(de.value.selectedFilterId),e=!1,console.log("OBS Blur removed at",V.toFixed(2),"seconds")):S&&!e&&g.value?(po(),e=!0,console.log("Blur applied at",V.toFixed(2),"seconds")):!S&&e&&!de.value.enabled&&(mo(),e=!1,console.log("Blur removed at",V.toFixed(2),"seconds"))}}}catch(M){console.log("Error monitoring video position:",M)}}},100)},wo=()=>{se.value=!1,window.iframeLoadTime=Date.now(),ho(),bo(),g.value&&H.value&&!p.value&&setTimeout(()=>{try{const t=h.value,e=t.contentDocument||t.contentWindow.document;if(e){const o=e.querySelector("video");o&&Xe(e,o)}}catch(t){console.log("Error creating overlay on iframe load:",t),Ie.value=!1}},100)},It=t=>{(t.key==="Escape"&&W.value||t.altKey&&t.keyCode===84)&&pt()},zt=t=>{Be.value=t,setTimeout(()=>{tt.value&&ot()},310)},ko=()=>{const t="reyohoho://#".concat(A.value);try{window.location.href=t}catch(e){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Å—ã–ª–∫–∏:",e)}},xo=()=>{const t=window.location.href;navigator.clipboard.writeText(t).then(()=>{}),Ve.value.showNotification("–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∏–ª—å–º —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞")};function Vt(t){return t.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"HDRezka - ").replace(/KODIK>/,"Kodik - ").trim()}const So=()=>{try{ke.value&&(ke.value.disconnect(),ke.value=null),ce.value&&(ce.value.close(),ce.value=null),Ce.value=null,De.value=null,_e.value=null,Ee.value=null,we.value=!1}catch(t){console.log("Error cleaning up audio context:",t)}},Co=t=>{var e;if(((e=B.value)==null?void 0:e.key)===t.key){_t();return}B.value=t,se.value=!0,Ue.value=!1,we.value=!1,Ee.value=null,p.value&&Fe(),me.value&&(clearInterval(me.value),me.value=null),fe.value&&(clearInterval(fe.value),fe.value=null),t.key.toLowerCase().includes("torrents")||r.updatePreferredPlayer(vt(t.key)),_("update:selectedPlayer",t)};je(B,t=>{t&&(se.value=!0,Ue.value=!1,we.value=!1,Ee.value=null,p.value&&Fe(),me.value&&(clearInterval(me.value),me.value=null),fe.value&&(clearInterval(fe.value),fe.value=null),t.key.toLowerCase().includes("torrents")||r.updatePreferredPlayer(vt(t.key)),_("update:selectedPlayer",t))}),je(()=>w.params.kp_id,async t=>{t&&t!==A.value&&(A.value=t,Ue.value=!1,we.value=!1,Ee.value=null,p.value&&Fe(),me.value&&(clearInterval(me.value),me.value=null),fe.value&&(clearInterval(fe.value),fe.value=null),ut.value=0,tt.value&&ot())},{immediate:!0}),je(H,t=>{if(g.value)if(t&&!p.value){const e=()=>{if(h.value)try{const o=h.value,l=o.contentDocument||o.contentWindow.document;if(l){const i=l.querySelector("video");if(i){const x=Date.now()-(window.iframeLoadTime||0);x>=100?Xe(l,i):setTimeout(e,100-x)}}}catch(o){console.log("Error creating overlay via watcher:",o),Ie.value=!1}};e()}else!t&&p.value&&Fe()}),je(qe,(t,e)=>{if(!g.value)return;const o=e&&e.length>0,l=t&&t.length>0;!o&&l&&(H.value||(H.value=!0,window.electronAPI&&window.electronAPI.showToast("–û–≤–µ—Ä–ª–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á—ë–Ω - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ç–∞–π–º–∏–Ω–≥–∏")))},{deep:!0}),je(()=>de.value.enabled,t=>{t&&!Te.value?At():!t&&Te.value&&Gt()}),je(G,(t,e)=>{!g.value||!H.value||(e&&t.showBackground!==e.showBackground?p.value&&(Fe(),setTimeout(()=>{if(h.value&&H.value)try{const o=h.value,l=o.contentDocument||o.contentWindow.document;if(l){const i=l.querySelector("video");i&&Xe(l,i)}}catch(o){console.log("Error recreating overlay:",o)}},100)):p.value&&Kt())},{deep:!0});const ft=["16:9","12:5","4:3"],Eo=()=>{const e=(ft.indexOf(Be.value)+1)%ft.length;zt(ft[e])},Io=t=>{var o,l,i,x,F,M,c,y,I,V,j,ve,S;return(S={[Y.FAVORITE]:((l=(o=f.movieInfo)==null?void 0:o.lists)==null?void 0:l.isFavorite)||!1,[Y.HISTORY]:((x=(i=f.movieInfo)==null?void 0:i.lists)==null?void 0:x.isHistory)||!1,[Y.LATER]:((M=(F=f.movieInfo)==null?void 0:F.lists)==null?void 0:M.isLater)||!1,[Y.COMPLETED]:((y=(c=f.movieInfo)==null?void 0:c.lists)==null?void 0:y.isCompleted)||!1,[Y.ABANDONED]:((V=(I=f.movieInfo)==null?void 0:I.lists)==null?void 0:V.isAbandoned)||!1,[Y.WATCHING]:((ve=(j=f.movieInfo)==null?void 0:j.lists)==null?void 0:ve.isWatching)||!1}[t])!=null?S:!1},xe=async t=>{if(!m.token){Ve.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:To});return}try{const e={[Y.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[Y.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[Y.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[Y.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[Y.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[Y.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};Io(t)?(await zo(A.value,t),Ve.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(e[t]))):(await Vo(A.value,t),Ve.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(e[t])))}catch(e){const{message:o,code:l}=Xt(e);Ve.value.showNotification("".concat(o," ").concat(l))}_("update:movieInfo")},To=()=>{q.push("/login")},Tt=ne(()=>r.showFavoriteTooltip),Ao=()=>{q.push("/settings"),dt()},$o=async()=>{if(!g.value){Qe("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank");return}if(h.value)try{const t=h.value,e=t.contentDocument||t.contentWindow.document;if(!e)return;const o=e.querySelector("video");if(!o)return;document.pictureInPictureElement?await document.exitPictureInPicture():document.pictureInPictureEnabled?await o.requestPictureInPicture():Qe('–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–∂–∏–º "–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ"')}catch(t){console.error("Error toggling PiP:",t),Qe('–ù–µ —É–¥–∞–ª–æ—Å—å –≤–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º "–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ"')}},Mo=()=>{if(H.value=!H.value,!H.value)Fe();else{const t=()=>{if(!p.value&&h.value)try{const e=h.value,o=e.contentDocument||e.contentWindow.document;if(o){const l=o.querySelector("video");if(l){const i=Date.now()-(window.iframeLoadTime||0);i>=100?Xe(o,l):setTimeout(t,100-i)}}}catch(e){console.log("Error creating overlay:",e),Ie.value=!1}};t()}},Ut=()=>{Z.value&&Z.value.disconnect(),Z.value=new dn,Z.value.setCallbacks({onConnect:()=>{Te.value=!0,r.setObsConnected(!0),g.value&&window.electronAPI&&window.electronAPI.showToast("–ü–æ–¥–∫–ª—é—á–µ–Ω –∫ OBS WebSocket")},onDisconnect:()=>{Te.value=!1,r.setObsConnected(!1),Lt.value=[],Ke.value=[]},onSourcesUpdated:t=>{Lt.value=t,window.obsSources=t},onFiltersFound:t=>{Ke.value=t,window.obsFiltersFound=t,r.updateObsSettings({filtersFound:t})},onError:t=>{console.error("OBS WebSocket error:",t),g.value&&window.electronAPI&&window.electronAPI.showToast("–û—à–∏–±–∫–∞ OBS: ".concat(t))}})},At=async()=>{Z.value||Ut(),await Z.value.connect(de.value.host,de.value.port,de.value.password)},Gt=()=>{Z.value&&Z.value.disconnect()},Bo=t=>{Z.value&&Te.value&&t?Z.value.testBlur(t):g.value&&window.electronAPI&&window.electronAPI.showToast("–§–∏–ª—å—Ç—Ä –Ω–µ –≤—ã–±—Ä–∞–Ω –∏–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ OBS")},Fo=()=>{Z.value&&Te.value&&Z.value.loadSourcesAndSearchFilters()},Po=()=>Ke.value,Ro=()=>{try{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen();const t=h.value;if(t){const e=t.contentDocument||t.contentWindow.document;if(e){e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen();const o=e.querySelector("video");o&&(o.webkitExitFullscreen?o.webkitExitFullscreen():o.exitFullscreen&&o.exitFullscreen())}}}catch(t){console.log("Error exiting fullscreen:",t)}},Oo=()=>{if(!g.value)return;const t=h.value,e=t.contentDocument||t.contentWindow.document;if(!e||e.getElementById("overlay-settings-modal"))return;const o=G.value,l=e.createElement("div");l.id="overlay-settings-modal",l.style.cssText="\n    position: fixed !important;\n    top: 0 !important;\n    left: 0 !important;\n    width: 100% !important;\n    height: 100% !important;\n    background: rgba(0, 0, 0, 0.8) !important;\n    display: flex !important;\n    align-items: center !important;\n    justify-content: center !important;\n    z-index: 9999 !important;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n  ";const i=e.createElement("div");i.style.cssText="\n    background: rgba(30, 30, 30, 0.95) !important;\n    backdrop-filter: blur(20px) !important;\n    border-radius: 16px !important;\n    padding: 32px !important;\n    max-width: 400px !important;\n    width: 90% !important;\n    border: 1px solid rgba(255, 255, 255, 0.1) !important;\n    box-shadow: 0 8px 40px rgba(0, 0, 0, 0.5) !important;\n  ",i.innerHTML='\n    <h3 style="color: #ff6b35; margin: 0 0 24px 0; font-size: 20px; font-weight: 600; text-align: center;">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–≤–µ—Ä–ª–µ—è</h3>\n    \n    <div style="display: flex; flex-direction: column; gap: 16px;">\n      <label style="display: flex; align-items: center; gap: 12px; color: white; cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(255, 255, 255, 0.05);">\n        <input type="checkbox" id="showTitle" '.concat(o.showTitle?"checked":"",' style="width: 18px; height: 18px; accent-color: #ff6b35;">\n        <span style="font-size: 16px;">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞</span>\n      </label>\n      \n      <label style="display: flex; align-items: center; gap: 12px; color: white; cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(255, 255, 255, 0.05);">\n        <input type="checkbox" id="showDuration" ').concat(o.showDuration2?"checked":"",' style="width: 18px; height: 18px; accent-color: #ff6b35;">\n        <span style="font-size: 16px;">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</span>\n      </label>\n      \n      <label style="display: flex; align-items: center; gap: 12px; color: white; cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(255, 255, 255, 0.05);">\n        <input type="checkbox" id="showBackground" ').concat(o.showBackground?"checked":"",' style="width: 18px; height: 18px; accent-color: #ff6b35;">\n        <span style="font-size: 16px;">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–Ω—ã–π —Ñ–æ–Ω</span>\n      </label>\n      \n      <label style="display: flex; align-items: center; gap: 12px; color: white; cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(255, 255, 255, 0.05);">\n        <input type="checkbox" id="showTimingsOnMouseMove" ').concat(o.showTimingsOnMouseMove?"checked":"",' style="width: 18px; height: 18px; accent-color: #ff6b35;">\n        <span style="font-size: 16px;">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–∞–π–º–∏–Ω–≥–∏ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –º—ã—à–∫–∏</span>\n      </label>\n      \n      <label style="display: flex; align-items: center; gap: 12px; color: white; cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(255, 255, 255, 0.05);">\n        <input type="checkbox" id="highlightTimings" ').concat(o.highlightTimings?"checked":"",' style="width: 18px; height: 18px; accent-color: #ff6b35;">\n        <span style="font-size: 16px;">–ü–æ–¥—Å–≤–µ—á–∏–≤–∞—Ç—å –±–ª–∏–∑–∫–∏–µ –∏ —Ç–µ–∫—É—â–∏–µ —Ç–∞–π–º–∏–Ω–≥–∏</span>\n      </label>\n\n    </div>\n    \n    <div style="display: flex; gap: 12px; margin-top: 24px; justify-content: center;">\n      <button id="saveSettings" style="background: #ff6b35; color: white; border: none; border-radius: 8px; padding: 10px 20px; cursor: pointer; font-size: 16px; font-weight: 500; transition: all 0.3s ease;">\n        –°–æ—Ö—Ä–∞–Ω–∏—Ç—å\n      </button>\n      <button id="cancelSettings" style="background: rgba(255, 255, 255, 0.1); color: rgba(255, 255, 255, 0.8); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; padding: 10px 16px; cursor: pointer; font-size: 14px; transition: all 0.3s ease;">\n        –û—Ç–º–µ–Ω–∞\n      </button>\n    </div>\n  '),["click","mousedown","mouseup","mousemove","wheel","contextmenu"].forEach(c=>{i.addEventListener(c,y=>{y.stopPropagation(),y.stopImmediatePropagation()})}),l.appendChild(i),l.addEventListener("click",c=>{c.preventDefault(),c.stopPropagation(),c.stopImmediatePropagation(),c.target===l&&l.remove()}),["mousedown","mouseup","mousemove","wheel","contextmenu"].forEach(c=>{l.addEventListener(c,y=>{y.preventDefault(),y.stopPropagation(),y.stopImmediatePropagation()})}),i.querySelector("#saveSettings").addEventListener("click",c=>{var I;c.preventDefault(),c.stopPropagation(),c.stopImmediatePropagation();const y={showTitle:i.querySelector("#showTitle").checked,showDuration2:i.querySelector("#showDuration").checked,showBackground:i.querySelector("#showBackground").checked,showTimingsOnMouseMove:i.querySelector("#showTimingsOnMouseMove").checked,highlightTimings:i.querySelector("#highlightTimings").checked};G.value=y,(I=window.electronAPI)==null||I.showToast("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–≤–µ—Ä–ª–µ—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã"),l.remove()}),i.querySelector("#cancelSettings").addEventListener("click",c=>{c.preventDefault(),c.stopPropagation(),c.stopImmediatePropagation(),l.remove()}),i.querySelectorAll("button").forEach(c=>{c.addEventListener("mouseenter",y=>{y.preventDefault(),y.stopPropagation(),y.stopImmediatePropagation(),c.id==="saveSettings"?(c.style.background="#e55a2b",c.style.transform="translateY(-1px)"):c.style.background="rgba(255, 255, 255, 0.15)"}),c.addEventListener("mouseleave",y=>{y.preventDefault(),y.stopPropagation(),y.stopImmediatePropagation(),c.id==="saveSettings"?(c.style.background="#ff6b35",c.style.transform="translateY(0)"):c.style.background="rgba(255, 255, 255, 0.1)"}),["mousedown","mouseup","mousemove","wheel","contextmenu"].forEach(y=>{c.addEventListener(y,I=>{I.preventDefault(),I.stopPropagation(),I.stopImmediatePropagation()})})});const F=i.querySelectorAll('input[type="checkbox"]'),M=i.querySelectorAll("label");F.forEach(c=>{["click","mousedown","mouseup","mousemove","wheel","contextmenu"].forEach(y=>{c.addEventListener(y,I=>{y!=="click"?(I.preventDefault(),I.stopPropagation(),I.stopImmediatePropagation()):I.stopPropagation()})})}),M.forEach(c=>{["mousedown","mouseup","mousemove","wheel","contextmenu"].forEach(y=>{c.addEventListener(y,I=>{I.preventDefault(),I.stopPropagation(),I.stopImmediatePropagation()})})}),e.body.appendChild(l)},Xe=(t,e)=>{if(!H.value||p.value||Ie.value)return;Ie.value=!0;const o=t.createElement("div");o.id="reyohoho-video-overlay";let l=()=>{o.style.cssText="\n      position: absolute !important;\n      top: 0 !important;\n      left: 0 !important;\n      width: 100% !important;\n      height: 100% !important;\n      pointer-events: none !important;\n      z-index: 999999999 !important;\n      display: flex !important;\n      flex-direction: column !important;\n      justify-content: space-between !important;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n      visibility: visible !important;\n      opacity: 1 !important;\n    "};const i=t.createElement("div");i.style.cssText="\n    color: white !important;\n    padding: 20px !important;\n    text-align: left !important;\n    pointer-events: none !important;\n  ";const x=t.createElement("div"),F=G.value.showBackground?"rgba(0, 0, 0, 0.7)":"transparent",M=G.value.showBackground?"blur(10px)":"none",c=G.value.showBackground?"fit-content":"auto";x.style.cssText="\n    font-size: 20px !important;\n    font-weight: 600 !important;\n    margin-bottom: 8px !important;\n    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8) !important;\n    line-height: 1.2 !important;\n    padding: 8px 12px !important;\n    border-radius: 6px !important;\n    display: inline-block !important;\n    color: rgba(255, 255, 255, 0.6) !important;\n    background: ".concat(F," !important;\n    backdrop-filter: ").concat(M," !important;\n    width: ").concat(c," !important;\n  ");const y=t.createElement("div"),I=G.value.showBackground?"rgba(0, 0, 0, 0.7)":"transparent",V=G.value.showBackground?"blur(10px)":"none",j=G.value.showBackground?"6px":"0",ve=G.value.showBackground?"inline-flex":"flex",S=G.value.showBackground?"fit-content":"auto";y.style.cssText="\n    font-size: 18px !important;\n    font-weight: 500 !important;\n    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8) !important;\n    display: ".concat(ve," !important;\n    align-items: center !important;\n    gap: 8px !important;\n    flex-wrap: wrap !important;\n    color: rgba(255, 255, 255, 0.6) !important;\n    margin-left: 12px !important;\n    background: ").concat(I," !important;\n    backdrop-filter: ").concat(V," !important;\n    border-radius: ").concat(j," !important;\n    width: ").concat(S," !important;\n  ");const N=t.createElement("div"),ue=G.value.showBackground?"rgba(0, 0, 0, 0.7)":"transparent",ae=G.value.showBackground?"blur(10px)":"none";N.style.cssText="\n    position: absolute !important;\n    top: 20px !important;\n    right: 110px !important;\n    background: ".concat(ue," !important;\n    backdrop-filter: ").concat(ae," !important;\n    border-radius: 12px !important;\n    padding: 16px !important;\n    width: fit-content !important;\n    max-width: 800px !important;\n    pointer-events: none !important;\n    display: none !important;\n    transition: opacity 0.3s ease, visibility 0.3s ease !important;\n    opacity: 0 !important;\n    visibility: hidden !important;\n  ");const ie=t.createElement("div");ie.style.cssText="\n    font-size: 14px !important;\n    color: rgba(255, 255, 255, 0.6) !important;\n    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8) !important;\n    line-height: 1.4 !important;\n    word-wrap: break-word !important;\n  ";const U=t.createElement("div");U.style.cssText="\n    position: absolute !important;\n    top: 20px !important;\n    right: 20px !important;\n    display: flex !important;\n    gap: 8px !important;\n    pointer-events: all !important;\n  ";const re=t.createElement("button");re.style.cssText="\n    background: rgba(0, 0, 0, 0.8) !important;\n    backdrop-filter: blur(10px) !important;\n    color: white !important;\n    border: 1px solid rgba(255, 255, 255, 0.2) !important;\n    border-radius: 50% !important;\n    width: 40px !important;\n    height: 40px !important;\n    display: flex !important;\n    align-items: center !important;\n    justify-content: center !important;\n    cursor: pointer !important;\n    transition: all 0.3s ease !important;\n    font-size: 18px !important;\n  ",re.innerHTML="‚öôÔ∏è",re.title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–≤–µ—Ä–ª–µ—è";const be=t.createElement("button");be.style.cssText="\n    background: rgba(0, 0, 0, 0.8) !important;\n    backdrop-filter: blur(10px) !important;\n    color: white !important;\n    border: 1px solid rgba(255, 255, 255, 0.2) !important;\n    border-radius: 50% !important;\n    width: 40px !important;\n    height: 40px !important;\n    display: flex !important;\n    align-items: center !important;\n    justify-content: center !important;\n    cursor: pointer !important;\n    transition: all 0.3s ease !important;\n    font-size: 18px !important;\n  ",be.innerHTML="üëÅÔ∏è",be.title="–û—Ç–∫–ª—é—á–∏—Ç—å –æ–≤–µ—Ä–ª–µ–π",be.addEventListener("click",u=>{u.preventDefault(),u.stopPropagation(),u.stopImmediatePropagation(),H.value=!1}),re.addEventListener("click",u=>{u.preventDefault(),u.stopPropagation(),u.stopImmediatePropagation(),Ro(),setTimeout(()=>{Oo()},100)}),[re,be].forEach(u=>{u.addEventListener("mouseenter",z=>{z.preventDefault(),z.stopPropagation(),z.stopImmediatePropagation(),u.style.background="#ff6b35",u.style.borderColor="#ff6b35",u.style.transform="scale(1.1)"}),u.addEventListener("mouseleave",z=>{z.preventDefault(),z.stopPropagation(),z.stopImmediatePropagation(),u.style.background="rgba(0, 0, 0, 0.8)",u.style.borderColor="rgba(255, 255, 255, 0.2)",u.style.transform="scale(1)"}),["mousedown","mouseup","mousemove","wheel","contextmenu"].forEach(z=>{u.addEventListener(z,P=>{P.preventDefault(),P.stopPropagation(),P.stopImmediatePropagation()})})}),["click","mousedown","mouseup","mousemove","wheel","contextmenu"].forEach(u=>{U.addEventListener(u,z=>{z.preventDefault(),z.stopPropagation(),z.stopImmediatePropagation()})}),U.appendChild(re),U.appendChild(be),N.appendChild(ie),i.appendChild(x),i.appendChild(y),o.appendChild(i),o.appendChild(N),o.appendChild(U),U.style.transition="opacity 0.3s ease, visibility 0.3s ease",U.style.opacity="0",U.style.visibility="hidden",i.style.transition="opacity 0.3s ease";let We=null;const nt=()=>{U.style.opacity="1",U.style.visibility="visible",i.style.opacity="0",G.value.showTimingsOnMouseMove&&qe.value.length>0&&(N.style.opacity="1",N.style.visibility="visible",clearTimeout(Me),Me=null,et.value||(Me=setTimeout(()=>{N.style.opacity="0",N.style.visibility="hidden",Me=null},3e3))),clearTimeout(Ge.value),clearTimeout(We),Ge.value=setTimeout(()=>{U.style.opacity="0",U.style.visibility="hidden"},3e3),We=setTimeout(()=>{i.style.opacity="1"},2e3)};t.addEventListener("mousemove",nt),o.addEventListener("mouseenter",()=>{U.style.opacity="1",U.style.visibility="visible",i.style.opacity="0",clearTimeout(We)}),o.addEventListener("mouseleave",()=>{clearTimeout(Ge.value),clearTimeout(We),U.style.opacity="0",U.style.visibility="hidden",i.style.opacity="1"}),o._mouseHandler=nt;const Pe=(u=>{if(document.fullscreenElement===u||document.webkitFullscreenElement===u||u.webkitDisplayingFullscreen||u.offsetWidth===window.screen.width&&u.offsetHeight===window.screen.height)return t.body||t.documentElement;let P=u.parentNode,ge=0;const Ae=5;for(;P&&ge<Ae;){const pe=t.defaultView.getComputedStyle(P),ee=P.getBoundingClientRect();if(ee.width>0&&ee.height>0&&(pe.position==="relative"||pe.position==="absolute"||pe.position==="fixed"||P.tagName==="BODY"))return P;P=P.parentNode,ge++}return u.parentNode})(e);o._targetContainer=Pe,o._videoElement=e,l=()=>{const u=o._videoElement,z=o._targetContainer;if(document.fullscreenElement===u||document.webkitFullscreenElement===u||u.webkitDisplayingFullscreen||u.offsetWidth===window.screen.width&&u.offsetHeight===window.screen.height)o.style.cssText="\n        position: fixed !important;\n        top: 0 !important;\n        left: 0 !important;\n        width: 100vw !important;\n        height: 100vh !important;\n        pointer-events: none !important;\n        z-index: 999999999 !important;\n        display: flex !important;\n        flex-direction: column !important;\n        justify-content: space-between !important;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n        visibility: visible !important;\n        opacity: 1 !important;\n        box-sizing: border-box !important;\n      ";else{const ge=t.defaultView.getComputedStyle(u),Ae=z.getBoundingClientRect(),pe=u.offsetWidth||u.clientWidth||parseFloat(ge.width)||0,ee=u.offsetHeight||u.clientHeight||parseFloat(ge.height)||0,Oe=u.getBoundingClientRect(),ye=Oe.top-Ae.top+z.scrollTop,ze=Oe.left-Ae.left+z.scrollLeft;o.style.cssText="\n        position: absolute !important;\n        top: ".concat(ye,"px !important;\n        left: ").concat(ze,"px !important;\n        width: ").concat(pe,"px !important;\n        height: ").concat(ee,"px !important;\n        pointer-events: none !important;\n        z-index: 999999999 !important;\n        display: flex !important;\n        flex-direction: column !important;\n        justify-content: space-between !important;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n        visibility: visible !important;\n        opacity: 1 !important;\n        box-sizing: border-box !important;\n      ")}},e.style.position="relative",(Pe.style.position===""||Pe.style.position==="static")&&(Pe.style.position="relative"),Pe.appendChild(o),l(),p.value=o,Ie.value=!1;const st=setInterval(()=>{if(!p.value||!H.value){clearInterval(st);return}if(!t.body.contains(o))try{const P=t.querySelectorAll("video");if(P.length>0){const ge=P[0];o._videoElement=ge;const pe=(ee=>{if(document.fullscreenElement===ee||document.webkitFullscreenElement===ee||ee.webkitDisplayingFullscreen||ee.offsetWidth===window.screen.width&&ee.offsetHeight===window.screen.height)return t.body||t.documentElement;let ye=ee.parentNode,ze=0;const gt=5;for(;ye&&ze<gt;){const Ze=t.defaultView.getComputedStyle(ye),d=ye.getBoundingClientRect();if(d.width>0&&d.height>0&&(Ze.position==="relative"||Ze.position==="absolute"||Ze.position==="fixed"||ye.tagName==="BODY"))return ye;ye=ye.parentNode,ze++}return ee.parentNode})(ge);o._targetContainer=pe,pe.appendChild(o),l(),o._mouseHandler&&(t.removeEventListener("mousemove",o._mouseHandler),t.addEventListener("mousemove",o._mouseHandler))}}catch(P){console.log("Error re-adding overlay to DOM:",P)}const u=t.defaultView.getComputedStyle(o);if((u.visibility==="hidden"||u.display==="none"||u.opacity==="0")&&l(),(parseInt(u.zIndex)||0)<999999999&&l(),o._videoElement&&o._targetContainer){const P=o._videoElement,ge=t.defaultView.getComputedStyle(P),Ae=document.fullscreenElement===P||document.webkitFullscreenElement===P||P.webkitDisplayingFullscreen||P.offsetWidth===window.screen.width&&P.offsetHeight===window.screen.height;let pe,ee;Ae?(pe=window.innerWidth,ee=window.innerHeight):(pe=P.offsetWidth||P.clientWidth||parseFloat(ge.width)||0,ee=P.offsetHeight||P.clientHeight||parseFloat(ge.height)||0);const Oe=parseInt(u.width)||0,ye=parseInt(u.height)||0;(Math.abs(Oe-pe)>5||Math.abs(ye-ee)>5)&&l()}},1e3),it=new window.MutationObserver(u=>{u.forEach(z=>{z.type==="attributes"&&z.target===o&&z.attributeName==="style"&&setTimeout(()=>{p.value&&H.value&&l()},100)})});it.observe(o,{attributes:!0,attributeFilter:["style","class"]});const lt=()=>{p.value&&H.value&&l()},Re=()=>{p.value&&H.value&&setTimeout(()=>{l()},100)};t.defaultView.addEventListener("resize",lt),t.addEventListener("fullscreenchange",Re),t.addEventListener("webkitfullscreenchange",Re),e.addEventListener("webkitbeginfullscreen",Re),e.addEventListener("webkitendfullscreen",Re),o._monitorInterval=st,o._mutationObserver=it,o._resizeHandler=lt,o._fullscreenHandler=Re,o._iframeDoc=t;const at=setInterval(()=>{if(!p.value||!H.value){clearInterval(at);return}l()},500);setTimeout(()=>{clearInterval(at)},1e4)},Kt=()=>{var y,I,V,j,ve;if(!p.value||!H.value)return;const t=h.value;if(!t)return;const e=t.contentDocument||t.contentWindow.document;if(!e)return;const o=p.value,l=o.children[0],i=o.children[1],x=e.defaultView.getComputedStyle(o);(x.display==="none"||x.visibility==="hidden")&&(o.style.display="flex !important",o.style.visibility="visible !important");const F=l.children[0];if(G.value.showTitle){F.style.display="block";const S=((y=f.movieInfo)==null?void 0:y.title)||((I=f.movieInfo)==null?void 0:I.name_ru)||((V=f.movieInfo)==null?void 0:V.name_en)||((j=f.movieInfo)==null?void 0:j.name_original)||"–ó–∞–≥—Ä—É–∑–∫–∞...",N=(ve=f.movieInfo)!=null&&ve.year?" (".concat(f.movieInfo.year,")"):"";F.textContent=S+N,G.value.showBackground?(F.style.background="rgba(0, 0, 0, 0.7) !important",F.style.backdropFilter="blur(10px) !important",F.style.width="fit-content !important",F.style.display="inline-block !important"):(F.style.background="transparent !important",F.style.backdropFilter="none !important",F.style.width="auto !important",F.style.display="inline-block !important")}else F.style.display="none";const M=l.children[1];let c="";if(G.value.showDuration2){const S=Je(Ot.value),N=Je(Nt.value);c="\n      <span style=\"font-family: 'Courier New', monospace; color: rgba(255, 255, 255, 0.6);\">".concat(S,'</span>\n      <span style="opacity: 0.6;">/</span>\n      <span style="font-family: \'Courier New\', monospace; color: rgba(255, 255, 255, 0.6);">').concat(N,"</span>\n    ")}if(de.value.enabled&&de.value.showObsInOverlay){let S="–û—Ç–∫–ª—é—á–µ–Ω";const N="#999999";if(Te.value)if(de.value.selectedFilterId){const ae=Ke.value.find(ie=>ie.id===de.value.selectedFilterId);ae?S="".concat(ae.filterName," (").concat(ae.sceneName,")"):S="–§–∏–ª—å—Ç—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω"}else Ke.value.length>0?S="–§–∏–ª—å—Ç—Ä –Ω–µ –≤—ã–±—Ä–∞–Ω":S="–§–∏–ª—å—Ç—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã";const ue='\n      <span style="color: '.concat(N,';">\n        OBS: ').concat(S,"\n      </span>\n    ");c=c?"".concat(c," ").concat(ue):ue}if(c?(M.style.display="flex",M.innerHTML=c,G.value.showBackground?(M.style.background="rgba(0, 0, 0, 0.7) !important",M.style.backdropFilter="blur(10px) !important",M.style.borderRadius="6px !important",M.style.padding="8px 12px !important",M.style.width="fit-content !important",M.style.display="inline-flex !important"):(M.style.background="transparent !important",M.style.backdropFilter="none !important",M.style.borderRadius="0 !important",M.style.padding="0 !important",M.style.width="auto !important",M.style.display="flex !important")):M.style.display="none",qe.value.length>0){const S=i.children[0];S.innerHTML="";const N=e.createElement("span");N.textContent="–¢–∞–π–º–∏–Ω–≥–∏: ",N.style.color="rgba(255, 255, 255, 0.6)",S.appendChild(N),qe.value.forEach((ue,ae)=>{if(ae>0){const ie=e.createElement("span");ie.textContent=", ",ie.style.color="rgba(255, 255, 255, 0.6)",S.appendChild(ie)}ue.intervals.forEach((ie,U)=>{if(U>0){const be=e.createElement("span");be.textContent=", ",be.style.color="rgba(255, 255, 255, 0.6)",S.appendChild(be)}const re=e.createElement("span");re.textContent=ie.text,ie.status==="active"&&G.value.highlightTimings?(re.style.color="#ff4444",re.style.fontWeight="bold"):ie.status==="upcoming"&&G.value.highlightTimings?(re.style.color="#ff6b35",re.style.fontWeight="500"):re.style.color="rgba(255, 255, 255, 0.6)",S.appendChild(re)})}),i.style.display="block",(!G.value.showTimingsOnMouseMove||et.value)&&(i.style.opacity="1",i.style.visibility="visible"),G.value.showBackground?(i.style.background="rgba(0, 0, 0, 0.7) !important",i.style.backdropFilter="blur(10px) !important",i.style.width="fit-content !important",i.style.minWidth="auto !important"):(i.style.background="transparent !important",i.style.backdropFilter="none !important",i.style.width="fit-content !important",i.style.minWidth="auto !important")}else i.style.display="none";G.value.showTimingsOnMouseMove&&et.value&&qe.value.length>0?(i.style.opacity="1",i.style.visibility="visible",clearTimeout(Me)):G.value.showTimingsOnMouseMove&&!et.value&&qe.value.length>0&&i.style.opacity==="1"&&!Me&&(Me=setTimeout(()=>{i.style.opacity="0",i.style.visibility="hidden",Me=null},3e3))},Fe=()=>{if(p.value){try{p.value._monitorInterval&&clearInterval(p.value._monitorInterval),p.value._mutationObserver&&p.value._mutationObserver.disconnect(),p.value._resizeHandler&&p.value._iframeDoc&&p.value._iframeDoc.defaultView.removeEventListener("resize",p.value._resizeHandler),p.value._fullscreenHandler&&p.value._iframeDoc&&(p.value._iframeDoc.removeEventListener("fullscreenchange",p.value._fullscreenHandler),p.value._iframeDoc.removeEventListener("webkitfullscreenchange",p.value._fullscreenHandler),p.value._videoElement&&(p.value._videoElement.removeEventListener("webkitbeginfullscreen",p.value._fullscreenHandler),p.value._videoElement.removeEventListener("webkitendfullscreen",p.value._fullscreenHandler))),p.value._mouseHandler&&p.value._iframeDoc&&p.value._iframeDoc.removeEventListener("mousemove",p.value._mouseHandler),p.value.remove()}catch(t){console.log("Error removing overlay:",t)}p.value=null}Ie.value=!1,Ge.value&&(clearTimeout(Ge.value),Ge.value=null)};eo(()=>{if(se.value=!0,ro(),X.value&&(Be.value="4:3"),St(),window.addEventListener("resize",St),window.addEventListener("resize",wt),tt.value&&ot(),window.toggleCompressor=qt,window.toggleMirror=Ht,Ut(),window.connectToOBS=At,window.testOBSBlur=Bo,window.refreshOBSFilters=Fo,window.getOBSFiltersInfo=Po,window.testOBSConnection=No,window.debugOBS=()=>{var t;console.log("=== OBS Debug Info ==="),console.log("OBS Settings:",de.value),console.log("OBS Connected:",Te.value),console.log("OBS Filters Found:",Ke.value),console.log("OBS WebSocket instance:",Z.value),Z.value&&(console.log("WebSocket state:",(t=Z.value.ws)==null?void 0:t.readyState),console.log("Is Connected:",Z.value.isConnected),console.log("Is Authenticated:",Z.value.isAuthenticated))},de.value.enabled&&At(),g.value&&(bt.value=setInterval(()=>{const t=window.overlayNudityTimings?window.overlayNudityTimings.length:0;t>ut.value?(ut.value=t,H.value||(H.value=!0,window.electronAPI&&window.electronAPI.showToast("–û–≤–µ—Ä–ª–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á—ë–Ω - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ç–∞–π–º–∏–Ω–≥–∏"))):ut.value=t},1e3)),g.value&&H.value){const t=()=>{if(h.value&&!p.value)try{const e=h.value,o=e.contentDocument||e.contentWindow.document;if(o){const l=o.querySelector("video");if(l){const i=Date.now()-(window.iframeLoadTime||0);i>=100?Xe(o,l):setTimeout(t,100-i)}}}catch(e){console.log("Error initializing overlay on mount:",e),Ie.value=!1}};setTimeout(t,1e3)}}),_o(()=>{window.removeEventListener("resize",St),window.removeEventListener("resize",wt),window.removeEventListener("mousemove",Et),document.removeEventListener("keydown",It),document.body.classList.remove("no-scroll"),me.value&&clearInterval(me.value),fe.value&&clearInterval(fe.value),bt.value&&clearInterval(bt.value),Fe(),So(),Gt(),delete window.toggleCompressor,delete window.toggleMirror,delete window.connectToOBS,delete window.testOBSBlur,delete window.refreshOBSFilters,delete window.getOBSFiltersInfo,delete window.testOBSConnection,delete window.debugOBS,delete window.obsSources,delete window.obsFiltersFound});const No=async()=>Z.value&&Te.value?await Z.value.testConnection():{success:!1,error:"Not connected"};return(t,e)=>{var o,l,i,x,F,M,c,y,I,V,j,ve,S,N,ue,ae,ie,U,re,be,We,nt,$t,Pe,Mt,st,it,lt,Re,at,u,z,P,ge,Ae,pe,ee,Oe,ye,ze,gt,Ze;return k.value?(T(),Bt(qo,{key:0,message:k.value,code:O.value},null,8,["message","code"])):(T(),R(Le,{key:1},[n("div",vn,[e[43]||(e[43]=n("span",null,"–ü–ª–µ–µ—Ä:",-1)),n("button",{class:"player-btn",onClick:co},C(B.value?Vt(B.value.translate).toUpperCase():"–ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–µ–µ—Ä–æ–≤..."),1)]),$e.value?(T(),Bt(un,{key:0,players:K.value,"selected-player":B.value,onClose:_t,onSelect:Co},null,8,["players","selected-player"])):J("",!0),n("div",{ref_key:"containerRef",ref:Se,class:L(["player-container",{"theater-mode":W.value}]),style:Yt(W.value?{}:lo.value)},[n("div",{class:"iframe-wrapper",style:Yt(W.value?{}:ao.value)},[te(n("iframe",{ref_key:"playerIframe",ref:h,src:(o=B.value)==null?void 0:o.iframe,frameborder:"0",allowfullscreen:"",webkitallowfullscreen:"",class:L(["responsive-iframe",{"theater-mode-unlock":$.value,"theater-mode-lock":W.value,dimmed:mt.value}]),onLoad:wo},null,42,pn),[[oe,!se.value&&((l=B.value)==null?void 0:l.iframe)]]),se.value?(T(),Bt(Ko,{key:0,text:"–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–ª–µ–µ—Ä: ".concat(B.value?Vt(B.value.translate):"–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ –ø–ª–µ–µ—Ä–æ–≤","\n–ï—Å–ª–∏ –ø–ª–µ–µ—Ä –Ω–µ –≥—Ä—É–∑–∏—Ç—Å—è, —Ç–æ —Å–º–µ–Ω–∏—Ç–µ –ø–ª–µ–µ—Ä –≤—ã—à–µ –∏–ª–∏ –≤–∫–ª—é—á–∏—Ç–µ VPN"),style:{"white-space":"pre-line"}},null,8,["text"])):J("",!0)],4),W.value?(T(),R("button",{key:0,class:L(["close-theater-btn",{visible:$.value}]),onClick:pt}," ‚úñ ",2)):J("",!0)],6),W.value?J("",!0):(T(),R("div",mn,[n("div",fn,[!X.value&&A.value?(T(),R("div",{key:0,ref_key:"tooltipContainer",ref:oo,class:"tooltip-container list-buttons-container","data-tooltip-container":"favorite"},[Tt.value?(T(),R("button",{key:0,class:L(["favorite-btn",{active:(x=(i=D.movieInfo)==null?void 0:i.lists)==null?void 0:x.isFavorite}]),onMouseenter:e[0]||(e[0]=d=>le("favorite")),onMouseleave:kt,onClick:e[1]||(e[1]=d=>xe(he(Y).FAVORITE))},[n("span",gn,C((M=(F=D.movieInfo)==null?void 0:F.lists)!=null&&M.isFavorite?"favorite":"favorite_border"),1),n("span",{class:L(["material-icons dropdown-arrow",{highlighted:so.value}])},"expand_more",2)],34)):J("",!0),te(n("div",{ref_key:"tooltip",ref:no,class:"custom-tooltip advanced-tooltip list-buttons-dropdown","data-tooltip":"favorite",onMouseenter:xt,onMouseleave:dt},[n("div",yn,[n("button",{class:L(["favorite-btn",{active:(y=(c=D.movieInfo)==null?void 0:c.lists)==null?void 0:y.isFavorite}]),onClick:e[2]||(e[2]=d=>xe(he(Y).FAVORITE))},[n("span",hn,C((V=(I=D.movieInfo)==null?void 0:I.lists)!=null&&V.isFavorite?"favorite":"favorite_border"),1),e[44]||(e[44]=n("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))],2)]),n("div",bn,[n("button",{class:L(["watching-btn",{active:(ve=(j=D.movieInfo)==null?void 0:j.lists)==null?void 0:ve.isWatching}]),onClick:e[3]||(e[3]=d=>xe(he(Y).WATCHING))},[n("span",wn,C((N=(S=D.movieInfo)==null?void 0:S.lists)!=null&&N.isWatching?"visibility":"visibility_off"),1),e[45]||(e[45]=n("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))],2)]),n("div",kn,[n("button",{class:L(["later-btn",{active:(ae=(ue=D.movieInfo)==null?void 0:ue.lists)==null?void 0:ae.isLater}]),onClick:e[4]||(e[4]=d=>xe(he(Y).LATER))},e[46]||(e[46]=[n("span",{class:"material-icons"},"watch_later",-1),n("span",{class:"button-label"},"–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ",-1)]),2)]),n("div",xn,[n("button",{class:L(["completed-btn",{active:(U=(ie=D.movieInfo)==null?void 0:ie.lists)==null?void 0:U.isCompleted}]),onClick:e[5]||(e[5]=d=>xe(he(Y).COMPLETED))},[n("span",Sn,C((be=(re=D.movieInfo)==null?void 0:re.lists)!=null&&be.isCompleted?"check_circle":"check_circle_outline"),1),e[47]||(e[47]=n("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))],2)]),n("div",Cn,[n("button",{class:L(["abandoned-btn",{active:(nt=(We=D.movieInfo)==null?void 0:We.lists)==null?void 0:nt.isAbandoned}]),onClick:e[6]||(e[6]=d=>xe(he(Y).ABANDONED))},[n("span",En,C(((Pe=($t=D.movieInfo)==null?void 0:$t.lists)!=null&&Pe.isAbandoned,"not_interested")),1),e[48]||(e[48]=n("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))],2)]),n("div",{class:"tooltip-hint"},[e[50]||(e[50]=n("span",{class:"material-icons"},"settings",-1)),n("span",null,[e[49]||(e[49]=Ne("–°—Ç–∏–ª—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ ")),n("a",{class:"settings-link",onClick:Ao},"–Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö")])])],544),[[oe,E.value==="favorite"&&Tt.value]])],512)):J("",!0),X.value?J("",!0):(T(),R(Le,{key:1},[n("div",In,[n("button",{class:L(["dimming-btn",{active:mt.value}]),onMouseenter:e[7]||(e[7]=d=>le("dimming")),onMouseleave:e[8]||(e[8]=d=>E.value=null),onClick:go},[n("span",Tn,C(mt.value?"light_mode":"dark_mode"),1)],34),te(n("div",{class:"custom-tooltip","data-tooltip":"dimming"},C(mt.value?"–û—Ç–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ":"–í–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ"),513),[[oe,E.value==="dimming"]])]),n("div",An,[n("button",{class:L(["blur-btn",{"electron-only":!g.value}]),onMouseenter:e[9]||(e[9]=d=>le("blur")),onMouseleave:e[10]||(e[10]=d=>E.value=null),onClick:fo},e[51]||(e[51]=[n("span",{class:"material-icons"},"blur_on",-1)]),34),te(n("div",{class:"custom-tooltip","data-tooltip":"blur"},C(g.value?"–ë–ª—é—Ä":"–ë–ª—é—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[oe,E.value==="blur"]])]),n("div",$n,[n("button",{class:L(["material-symbols-outlined",{active:He.value,"electron-only":!g.value}]),onMouseenter:e[11]||(e[11]=d=>le("compressor")),onMouseleave:e[12]||(e[12]=d=>E.value=null),onClick:qt},e[52]||(e[52]=[n("span",{class:"material-icons"},"graphic_eq",-1)]),34),te(n("div",{class:"custom-tooltip","data-tooltip":"compressor"},C(g.value?"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä":"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[oe,E.value==="compressor"]])]),n("div",Mn,[n("button",{class:L(["mirror-btn",{active:Ye.value,"electron-only":!g.value}]),onMouseenter:e[13]||(e[13]=d=>le("mirror")),onMouseleave:e[14]||(e[14]=d=>E.value=null),onClick:Ht},e[53]||(e[53]=[n("span",{class:"material-icons"},"flip",-1)]),34),te(n("div",{class:"custom-tooltip","data-tooltip":"mirror"},C(g.value?"–ó–µ—Ä–∫–∞–ª–æ":"–ó–µ—Ä–∫–∞–ª–æ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[oe,E.value==="mirror"]])]),n("div",Bn,[n("button",{class:"theater-mode-btn",onMouseenter:e[15]||(e[15]=d=>le("theater")),onMouseleave:e[16]||(e[16]=d=>E.value=null),onClick:pt},[n("span",Fn,C(W.value?"fullscreen_exit":"aspect_ratio"),1)],32),te(n("div",Pn,[Ne(C(W.value?"–í—ã–π—Ç–∏ –∏–∑ —Ç–µ–∞—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞":"–¢–µ–∞—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º")+" ",1),e[54]||(e[54]=n("span",{class:"shortcut-hint"},"Alt+T",-1))],512),[[oe,E.value==="theater"]])]),n("div",Rn,[n("button",{class:L(["pip-btn",{"electron-only":!g.value}]),onMouseenter:e[17]||(e[17]=d=>le("pip")),onMouseleave:e[18]||(e[18]=d=>E.value=null),onClick:$o},e[55]||(e[55]=[n("span",{class:"material-icons"},"picture_in_picture_alt",-1)]),34),te(n("div",{class:"custom-tooltip","data-tooltip":"pip"},C(g.value?"–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ":"–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[oe,E.value==="pip"]])]),n("div",On,[n("button",{class:"aspect-ratio-dropdown-btn",onMouseenter:e[19]||(e[19]=d=>le("aspect_ratio")),onMouseleave:kt,onClick:Eo},[n("span",Nn,C(Be.value),1)],32),te(n("div",{class:"custom-tooltip advanced-tooltip aspect-ratio-dropdown","data-tooltip":"aspect_ratio",onMouseenter:xt,onMouseleave:dt},[(T(),R(Le,null,rt(ft,d=>n("div",{key:d,class:L(["aspect-ratio-option",{active:Be.value===d}]),onClick:fs=>zt(d)},C(d),11,Ln)),64))],544),[[oe,E.value==="aspect_ratio"]])]),n("div",{class:"tooltip-container","data-tooltip-container":"centering",onMouseenter:e[21]||(e[21]=d=>le("centering")),onMouseleave:kt},[n("button",{class:"center-btn",onClick:ot},e[56]||(e[56]=[n("span",{class:"material-icons"},"center_focus_strong",-1)])),te(n("div",{class:"custom-tooltip advanced-tooltip","data-tooltip":"centering",onMouseenter:xt,onMouseleave:dt},[e[57]||(e[57]=Ne(" –û—Ç—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–ª–µ–µ—Ä ")),Pt(Xo,{modelValue:tt.value,"onUpdate:modelValue":e[20]||(e[20]=d=>tt.value=d),title:"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞"},null,8,["modelValue"]),e[58]||(e[58]=n("span",{class:"tooltip-title"},"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞",-1))],544),[[oe,E.value==="centering"]])],32),!g.value&&A.value?(T(),R("div",Dn,[n("button",{class:"app-link-btn",onMouseenter:e[22]||(e[22]=d=>le("app_link")),onMouseleave:e[23]||(e[23]=d=>E.value=null),onClick:ko},e[59]||(e[59]=[n("span",{class:"material-icons"},"open_in_new",-1)]),32),te(n("div",_n," –û—Ç–∫—Ä—ã—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ",512),[[oe,E.value==="app_link"]])])):J("",!0),g.value?(T(),R("div",qn,[n("button",{class:"copy-link-btn",onMouseenter:e[24]||(e[24]=d=>le("copy_link")),onMouseleave:e[25]||(e[25]=d=>E.value=null),onClick:xo},e[60]||(e[60]=[n("span",{class:"material-icons"},"content_copy",-1)]),32),te(n("div",Hn," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É ",512),[[oe,E.value==="copy_link"]])])):J("",!0),g.value?(T(),R("div",Wn,[n("button",{class:L(["overlay-btn",{active:H.value}]),onMouseenter:e[26]||(e[26]=d=>le("overlay")),onMouseleave:e[27]||(e[27]=d=>E.value=null),onClick:Mo},[n("span",zn,C(H.value?"layers":"layers_clear"),1)],34),te(n("div",{class:"custom-tooltip","data-tooltip":"overlay"},C(H.value?"–°–∫—Ä—ã—Ç—å –æ–≤–µ—Ä–ª–µ–π –≤–∏–¥–µ–æ":"–ü–æ–∫–∞–∑–∞—Ç—å –æ–≤–µ—Ä–ª–µ–π –≤–∏–¥–µ–æ"),513),[[oe,E.value==="overlay"]])])):J("",!0)],64))]),!X.value&&!Tt.value&&A.value?(T(),R("div",Vn,[n("div",Un,[n("button",{class:L(["favorite-btn",{active:(st=(Mt=D.movieInfo)==null?void 0:Mt.lists)==null?void 0:st.isFavorite}]),onMouseenter:e[28]||(e[28]=d=>le("favorite")),onMouseleave:e[29]||(e[29]=d=>E.value=null),onClick:e[30]||(e[30]=d=>xe(he(Y).FAVORITE))},[n("span",Gn,C((lt=(it=D.movieInfo)==null?void 0:it.lists)!=null&&lt.isFavorite?"favorite":"favorite_border"),1)],34),te(n("div",Kn,C("–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"),512),[[oe,E.value==="favorite"]])]),n("div",Yn,[n("button",{class:L(["watching-btn",{active:(at=(Re=D.movieInfo)==null?void 0:Re.lists)==null?void 0:at.isWatching}]),onMouseenter:e[31]||(e[31]=d=>le("watching")),onMouseleave:e[32]||(e[32]=d=>E.value=null),onClick:e[33]||(e[33]=d=>xe(he(Y).WATCHING))},[n("span",Xn,C((z=(u=D.movieInfo)==null?void 0:u.lists)!=null&&z.isWatching?"visibility":"visibility_off"),1)],34),te(n("div",Zn,C("–°–º–æ—Ç—Ä—é"),512),[[oe,E.value==="watching"]])]),n("div",jn,[n("button",{class:L(["later-btn",{active:(ge=(P=D.movieInfo)==null?void 0:P.lists)==null?void 0:ge.isLater}]),onMouseenter:e[34]||(e[34]=d=>le("later")),onMouseleave:e[35]||(e[35]=d=>E.value=null),onClick:e[36]||(e[36]=d=>xe(he(Y).LATER))},e[61]||(e[61]=[n("span",{class:"material-icons"},"watch_later",-1)]),34),te(n("div",Jn,C("–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"),512),[[oe,E.value==="later"]])]),n("div",Qn,[n("button",{class:L(["completed-btn",{active:(pe=(Ae=D.movieInfo)==null?void 0:Ae.lists)==null?void 0:pe.isCompleted}]),onMouseenter:e[37]||(e[37]=d=>le("completed")),onMouseleave:e[38]||(e[38]=d=>E.value=null),onClick:e[39]||(e[39]=d=>xe(he(Y).COMPLETED))},[n("span",es,C((Oe=(ee=D.movieInfo)==null?void 0:ee.lists)!=null&&Oe.isCompleted?"check_circle":"check_circle_outline"),1)],34),te(n("div",ts,C("–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"),512),[[oe,E.value==="completed"]])]),n("div",os,[n("button",{class:L(["abandoned-btn",{active:(ze=(ye=D.movieInfo)==null?void 0:ye.lists)==null?void 0:ze.isAbandoned}]),onMouseenter:e[40]||(e[40]=d=>le("abandoned")),onMouseleave:e[41]||(e[41]=d=>E.value=null),onClick:e[42]||(e[42]=d=>xe(he(Y).ABANDONED))},[n("span",ns,C(((Ze=(gt=D.movieInfo)==null?void 0:gt.lists)!=null&&Ze.isAbandoned,"not_interested")),1)],34),te(n("div",ss,C("–ë—Ä–æ—à–µ–Ω–æ"),512),[[oe,E.value==="abandoned"]])])])):J("",!0)])),Pt(to,{ref_key:"notificationRef",ref:Ve},null,512)],64))}}},Cs=Rt(is,[["__scopeId","data-v-6d54e7ef"]]),ls={class:"rating-container"},as={class:"rating-display"},rs={class:"rating-numbers"},cs=["onClick","onMouseenter"],us={key:0,class:"tooltip-footer"},ds={class:"rating-numbers mobile-rating-numbers"},vs=["onClick"],ps={key:0,class:"mobile-modal-footer"},ms={__name:"MovieRating",props:{kpId:{type:String,required:!0},showDash:{type:Boolean,default:!1}},setup(D){const s=Jt(),a=Qt(),r=D,m=v(null),w=v(null),q=v(null),A=v(null),f=v(0),_=v(!1),K=v(!1);let B=null;const se=b=>b?b.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",W=()=>{B=setTimeout(()=>{_.value=!1,s.isMobile||(K.value=!1)},100)},$=()=>{B&&(clearTimeout(B),B=null),_.value=!0},h=()=>{s.isMobile&&(K.value=!K.value)},Se=()=>{a.push("/login")},$e=async()=>{try{const b=await Go(r.kpId);w.value=b.user_rating,q.value=b.average_rating,A.value=se(b.vote_count)}catch(b){console.error("Error loading rating:",b)}},k=async b=>{var Q;try{b===w.value?(await Zt(r.kpId,null),w.value=null,m.value.showNotification("–û—Ü–µ–Ω–∫–∞ —É–¥–∞–ª–µ–Ω–∞")):(await Zt(r.kpId,b),w.value=b,m.value.showNotification("–û—Ü–µ–Ω–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞")),s.isMobile&&(K.value=!1),$e()}catch(X){console.error("Error setting rating:",X),((Q=X.response)==null?void 0:Q.status)===401?m.value.showNotification('–î–ª—è –æ—Ü–µ–Ω–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Se}):m.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ü–µ–Ω–∫–∏"),s.isMobile&&(K.value=!1)}},O=()=>{K.value=!1};return eo(()=>{$e()}),(b,Q)=>(T(),R("div",ls,[n("div",as,[n("a",{href:"#",class:L(["rating-link",{"has-rating":w.value}]),onMouseenter:Q[0]||(Q[0]=X=>_.value=!0),onMouseleave:W,onClick:yt(h,["prevent"])},[Q[3]||(Q[3]=n("img",{src:Zo,alt:"ReYohoho",class:"rating-logo"},null,-1)),n("span",{class:L(["average-rating",he(Uo)(q.value)])},C(q.value?q.value.toFixed(1).replace(/\.0$/,""):"‚Äî"),3)],34),te(n("div",{class:"rating-tooltip",onMouseenter:$,onMouseleave:W},[n("div",rs,[(T(),R(Le,null,rt(10,X=>n("button",{key:X,class:L(["number-btn",{active:X===w.value,hover:X===f.value,"average-highlight":q.value&&X<=Math.round(q.value)}]),onClick:g=>k(X),onMouseenter:g=>f.value=X,onMouseleave:Q[1]||(Q[1]=g=>f.value=0)},C(X),43,cs)),64))]),A.value?(T(),R("div",us,"–û—Ü–µ–Ω–æ–∫: "+C(A.value),1)):J("",!0)],544),[[oe,(_.value||K.value)&&!he(s).isMobile]])]),Pt(to,{ref_key:"notificationRef",ref:m},null,512),he(s).isMobile&&K.value?(T(),R("div",{key:0,class:"mobile-modal-overlay",onClick:O},[n("div",{class:"mobile-modal",onClick:Q[2]||(Q[2]=yt(()=>{},["stop"]))},[n("div",{class:"mobile-modal-header"},[Q[4]||(Q[4]=n("h3",null,"–û—Ü–µ–Ω–∏—Ç—å —Ñ–∏–ª—å–º",-1)),n("button",{class:"close-button",onClick:O},"√ó")]),n("div",ds,[(T(),R(Le,null,rt(10,X=>n("button",{key:X,class:L(["number-btn",{active:X===w.value,"average-highlight":q.value&&X<=Math.round(q.value)}]),onClick:g=>k(X)},C(X),11,vs)),64))]),A.value?(T(),R("div",ps,"–û—Ü–µ–Ω–æ–∫: "+C(A.value),1)):J("",!0)])])):J("",!0)]))}},Es=Rt(ms,[["__scopeId","data-v-2df64bd5"]]);export{Es as M,Cs as P,xs as _,Ss as a};
