import{_ as ze,r as v,c as H,b as a,d as i,e,s as X,t as k,L as se,g as p,M as be,n as w,q as Qe,u as _t,i as Ut,K as bn,z as Mt,l as Ke,o as mt,P as Nt,x as Ze,E as wn,f as ce,Q as ct,m as te,R as de,y as Q,U as q,S as Ln,D as Xe,V as Ue,W as Cn,X as xt,Y as wt,Z as In,$ as mn,a0 as Tn,k as Rn,v as vt,a1 as Pn,a2 as Ie,w as jt,a3 as Ct,a4 as Sn,a5 as An,a6 as xn,a7 as jn,a8 as fn,a9 as Un,aa as Nn,a as Bn,ab as gn,ac as $n,ad as Dn,ae as Hn,af as Vn,ag as On,ah as Fn,ai as qn,aj as Kn,ak as zn}from"./index-DnKcxoJx.js";import{_ as Wn,a as kn,b as yn,M as pn}from"./MovieList-qQem9oOT.js";import{u as _n,f as Gn,a as Mn}from"./useCommentFormatting-C9wYBztg.js";import{S as En}from"./SpinnerLoading-Bo9JcEfY.js";import{N as It}from"./ToastMessage-BRfkFNko.js";import{u as Yn,S as Xn,a as Zn}from"./trailer-DIH8X2l1.js";const bt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVR4nO2ZQUoDMRSGR7eewHoFsVS0HkUUXNXqASqK2EURBPFIVRe6c+UN1CvUXWvbT4KvMAwzNnnJdCrmg1BKad7/v7y0b5IkiUQiCwGoAx3gQjEugZ0qxTeAIX6MKjMBnBOGS62AVWAPOHVYdlMu9YArYOhphLeBT+ALmOKGEd2QubaAK+B2zngFxt4GgDXgGZjgR8ch5oEkCi8DkvlnRcYLV0Apfqw10M7JvPkV6AN3FmVwK+WyZRnvMEe8ef/ibECyb2o+zRuwnpQAxeLNivQ0BvYyE46qEJ/8fK4ycJKp/X4V4n0MdDNfukkqEO9jwP1LDgD7BeKPgmgp04CL+KUz4Cp+qQxoxC+NAdsNm4c0hWkukkUa8BGfegiadbFDq3/2UAZ8xc+QVvzMtqcKYkBaZ5/MN5xEl2DgLGDZ1KswsC09FPJqXTZoNm5oA6kyMGI2FxqfkluJ0uMTDfhBXAHiHvCCWEL8/RLqlv1MPCf+TSZ+13WC7KnEfWlqcwAeU7GNjnbiQsG5UC1ZAEAt1UMhOpquk6zknMy9l20C2AA+MnEHRo9msuOCs9EH4Fp5TVQ0rqVs0plH4re02Qh1Oq1lCjypsp+5H3gKcD/gykTirqnFZ/ZDy+OGxpapzD+QePrM/2KkKfcGPcv7AdvRkz23G1x4JPIP+AY3r/ywUk/2JAAAAABJRU5ErkJggg==",Qn="/reyohoho/assets/icon-shikimori-DGvXK9Jc.svg",kt=r=>{const t=document.createElement("div");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.backgroundColor="rgba(0, 0, 0, 0.8)",t.style.color="white",t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",t.style.fontSize="2rem",t.style.zIndex="99000",t.textContent=r,document.body.appendChild(t),setTimeout(()=>{document.body.removeChild(t)},2e3)},Jn={key:0},eo={key:1},to={class:"players-list"},no=["onClick"],oo={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},so={key:0},lo={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},io={key:1},ao={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},ro=["onClick"],uo={key:0,class:"warning-icon material-icons",title:"–í–Ω–∏–º–∞–Ω–∏–µ!"},co={__name:"PlayerModal",props:{players:{type:Array,required:!0},selectedPlayer:{type:Object,default:null}},emits:["close","select"],setup(r,{emit:t}){const u=r,n=t,M=v(null),E=H(()=>u.players.filter(b=>!L(b)&&!I(b))),g=H(()=>u.players.some(b=>L(b))),y=H(()=>u.players.some(b=>I(b))),L=b=>b.key.toUpperCase().includes("HDREZKA"),I=b=>b.key.toUpperCase().includes("KODIK"),o=b=>b.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"").replace(/KODIK>/,"").trim(),d=b=>{n("select",b),n("close")},C=b=>u.selectedPlayer&&u.selectedPlayer.key===b.key,h=b=>u.selectedPlayer?b==="hdrezka"&&L(u.selectedPlayer)||b==="kodik"&&I(u.selectedPlayer):!1,U=b=>{M.value=b},A=()=>{M.value=null},x=b=>{let T=u.players.filter(j=>b==="hdrezka"&&L(j)||b==="kodik"&&I(j));return b==="kodik"?T.sort((j,Z)=>o(j.translate).localeCompare(o(Z.translate))):T},R=b=>x(b).some(T=>T.warning);return(b,T)=>(i(),a("div",{class:"modal",onClick:T[4]||(T[4]=Qe(j=>b.$emit("close"),["self"]))},[e("div",{class:"modal-content",onClick:T[3]||(T[3]=Qe(()=>{},["stop"]))},[e("button",{class:"close",onClick:T[0]||(T[0]=j=>b.$emit("close"))},"√ó"),M.value?(i(),a("h2",eo,[e("button",{class:"back-btn",onClick:A},"‚Üê –ù–∞–∑–∞–¥"),X(" "+k(M.value==="hdrezka"?"ReYohoho - HDrezka":"Kodik"),1)])):(i(),a("h2",Jn,"–í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–µ–µ—Ä")),e("ul",to,[M.value?(i(!0),a(se,{key:1},be(x(M.value),j=>(i(),a("li",{key:j.key},[e("button",{class:w(["player-item",{active:C(j)}]),onClick:Z=>d(j)},[X(k(o(j.translate))+" ",1),j.warning?(i(),a("span",uo,"warning")):p("",!0)],10,ro)]))),128)):(i(),a(se,{key:0},[(i(!0),a(se,null,be(E.value,j=>(i(),a("li",{key:j.key},[e("button",{class:w(["player-item",{active:C(j)}]),onClick:Z=>d(j)},[X(k(o(j.translate))+" ",1),j.warning?(i(),a("span",oo,"warning")):p("",!0)],10,no)]))),128)),g.value?(i(),a("li",so,[e("button",{class:w(["group-item",{active:h("hdrezka")}]),onClick:T[1]||(T[1]=j=>U("hdrezka"))},[T[5]||(T[5]=e("span",{class:"material-icons group-icon"},"folder",-1)),T[6]||(T[6]=X(" ReYohoho - HDrezka ")),R("hdrezka")?(i(),a("span",lo,"warning")):p("",!0)],2)])):p("",!0),y.value?(i(),a("li",io,[e("button",{class:w(["group-item",{active:h("kodik")}]),onClick:T[2]||(T[2]=j=>U("kodik"))},[T[7]||(T[7]=e("span",{class:"material-icons group-icon"},"folder",-1)),T[8]||(T[8]=X(" Kodik ")),R("kodik")?(i(),a("span",ao,"warning")):p("",!0)],2)])):p("",!0)],64))])])]))}},vo=ze(co,[["__scopeId","data-v-8b8d2b67"]]),mo={class:"players-list"},fo=["src"],go={key:1,class:"controls"},ko={class:"main-controls"},yo={class:"material-icons"},po={class:"list-button-item"},ho={class:"material-icons"},bo={class:"list-button-item"},wo={class:"material-icons"},Co={class:"list-button-item"},_o={class:"list-button-item"},Mo={class:"material-icons"},Eo={class:"list-button-item"},Lo={class:"material-icons"},Io={class:"tooltip-container","data-tooltip-container":"dimming"},To={class:"material-icons"},Ro={class:"tooltip-container","data-tooltip-container":"blur"},Po={class:"tooltip-container","data-tooltip-container":"compressor"},So={class:"tooltip-container","data-tooltip-container":"mirror"},Ao={class:"tooltip-container","data-tooltip-container":"theater"},xo={class:"material-symbols-outlined"},jo={class:"custom-tooltip","data-tooltip":"theater"},Uo={class:"tooltip-container","data-tooltip-container":"pip"},No={class:"tooltip-container","data-tooltip-container":"aspect_ratio"},Bo={class:"current-ratio"},$o=["onClick"],Do={key:0,class:"tooltip-container","data-tooltip-container":"app_link"},Ho={class:"custom-tooltip","data-tooltip":"app_link"},Vo={key:1,class:"tooltip-container","data-tooltip-container":"copy_link"},Oo={class:"custom-tooltip","data-tooltip":"copy_link"},Fo={key:0,class:"desktop-list-buttons"},qo={class:"tooltip-container"},Ko={class:"material-icons"},zo={class:"custom-tooltip"},Wo={class:"tooltip-container"},Go={class:"material-icons"},Yo={class:"custom-tooltip"},Xo={class:"tooltip-container"},Zo={class:"custom-tooltip"},Qo={class:"tooltip-container"},Jo={class:"material-icons"},es={class:"custom-tooltip"},ts={class:"tooltip-container"},ns={class:"material-icons"},os={class:"custom-tooltip"},ss={__name:"PlayerComponent",props:{kpId:String,movieInfo:{type:Object,default:()=>({})}},emits:["update:selectedPlayer","update:movieInfo"],setup(r,{emit:t}){const u=_t(),n=Yn(),M=Ut(),E=bn(),g=Mt(),y=v(E.params.kp_id),L=r,I=t,o=v([]),d=v(null),C=v(!0),h=v(!1),U=v(!1),A=v(null),x=v(null),R=v(!1),b=v(""),T=v(null),j=v(window.innerHeight*.9),Z=H(()=>"".concat(j.value,"px")),W=H(()=>u.isMobile),K=H(()=>!!window.electronAPI),P=v(null),Le=v(!1);let we=null;const ye=v(null),Ve=v(null),D=v(null),oe=v(null),J=v(!1),Y=v(!1),le=v(null),pe=v(null),ve=v(null),me=v(null),Te=v(null),ge=v(null),Ne=m=>{const l=document.querySelector('[data-tooltip-container="'.concat(m,'"]')),S=document.querySelector('[data-tooltip="'.concat(m,'"]'));if(!l||!S)return;const V=l.getBoundingClientRect(),O=S.getBoundingClientRect(),z=window.innerHeight;V.bottom+O.height>z?(S.style.top="auto",S.style.bottom="100%",S.style.marginTop="0",S.style.marginBottom="12px",S.style.transform="translateX(-50%)"):(S.style.top="100%",S.style.bottom="auto",S.style.marginTop="12px",S.style.marginBottom="0",S.style.transform="translateX(-50%)")},ie=m=>{P.value=m,Le.value=!1,clearTimeout(we),Ue(()=>{Ne(m)})},Re=()=>{Le.value||(we=setTimeout(()=>{P.value=null},300))},Pe=()=>{Le.value=!0,clearTimeout(we)},Ce=()=>{Le.value=!1,P.value=null},_e=H({get:()=>n.aspectRatio,set:m=>n.updateAspectRatio(m)}),De=H({get:()=>n.isCentered,set:m=>n.updateCentering(m)}),nt=H(()=>{var m,l,S,V,O,z,he,ke,Ee,je;return((l=(m=L.movieInfo)==null?void 0:m.lists)==null?void 0:l.isFavorite)||((V=(S=L.movieInfo)==null?void 0:S.lists)==null?void 0:V.isWatching)||((z=(O=L.movieInfo)==null?void 0:O.lists)==null?void 0:z.isLater)||((ke=(he=L.movieInfo)==null?void 0:he.lists)==null?void 0:ke.isCompleted)||((je=(Ee=L.movieInfo)==null?void 0:Ee.lists)==null?void 0:je.isAbandoned)}),Je=H(()=>n.preferredPlayer),ut=v(0),We=m=>m.toUpperCase(),Se=()=>{if(h.value||!x.value)return;const[m,l]=_e.value.split(":").map(Number);j.value=window.innerHeight*.9,ut.value=Math.min(x.value.clientWidth*(l/m),j.value)},et=H(()=>{if(h.value)return{};const[m,l]=_e.value.split(":").map(Number),S=j.value*(m/l);return{width:"100%",maxWidth:"".concat(S,"px"),maxHeight:Z.value,margin:"0 auto",overflow:"hidden"}}),Me=H(()=>{const[m,l]=_e.value.split(":").map(Number);return{position:"relative",width:"100%",paddingTop:"".concat(l/m*100,"%")}}),_=()=>{x.value&&setTimeout(()=>{Ue(()=>{x.value.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})},500)},F=async()=>{try{b.value="",T.value=null;const m=await Ln(L.kpId);if(o.value=Object.entries(m).map(([l,S])=>({key:l.toUpperCase(),...S})),o.value.length>0){if(Je.value){const l=We(Je.value),S=o.value.find(V=>We(V.key)===l);d.value=S||o.value[0]}else d.value=o.value[0];I("update:selectedPlayer",d.value)}}catch(m){const{message:l,code:S}=Xe(m);b.value=l,T.value=S,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–ª–µ–µ—Ä–æ–≤:",m)}},Oe=()=>{R.value=!0},ft=()=>{R.value=!1},yt=()=>{try{return le.value||(le.value=new(window.AudioContext||window.webkitAudioContext)),pe.value||(pe.value=le.value.createDynamicsCompressor(),pe.value.threshold.value=-50,pe.value.knee.value=40,pe.value.ratio.value=12,pe.value.attack.value=0,pe.value.release.value=.25,me.value=le.value.createGain(),Te.value=le.value.createGain(),me.value.gain.value=0,Te.value.gain.value=1,pe.value.connect(me.value),me.value.connect(le.value.destination),Te.value.connect(le.value.destination)),!0}catch(m){return console.log("Error initializing audio context:",m),!1}},ot=async m=>{try{if(!le.value||ge.value===m)return!0;const l=A.value,S=(l==null?void 0:l.src)||"";if(S.includes("videoframe")||S.includes("kinoserial.net")||S.includes("allarknow"))return console.log("Player detected as unsupported for compressor:",S),ge.value=m,ve.value=null,Y.value=!1,K.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –ø–ª–µ–µ—Ä–æ–º"),!1;if(ve.value)try{ve.value.disconnect()}catch(O){}const V=async(O=0)=>{O>0&&await new Promise(z=>setTimeout(z,O));try{return ve.value=le.value.createMediaElementSource(m),ge.value=m,ve.value.connect(pe.value),ve.value.connect(Te.value),console.log("Video audio setup completed (attempt with ".concat(O,"ms delay)")),!0}catch(z){if(z.name==="InvalidStateError"&&z.message.includes("already connected"))return console.log("MediaElementSource already connected (".concat(O,"ms delay attempt)")),!1;throw z}};return await V(0)||await V(100)||await V(300)||await V(800)?!0:(console.log("Video element has internal audio processing, compressor not available for this player"),ge.value=m,ve.value=null,Y.value=!1,K.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —ç—Ç–∏–º –ø–ª–µ–µ—Ä–æ–º"),!1)}catch(l){return console.log("Error setting up video audio:",l),!1}},Fe=async m=>{if(A.value)try{const l=A.value,S=l.contentDocument||l.contentWindow.document;if(!S)return;const V=S.querySelectorAll("video");if(V.length===0)return;const O=V[0];if(!yt())return;if(!await ot(O)||!ve.value){console.log("Compressor not available for this player");return}m&&!Y.value?(me.value.gain.setValueAtTime(1,le.value.currentTime),Te.value.gain.setValueAtTime(0,le.value.currentTime),Y.value=!0,K.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –≤–∫–ª—é—á—ë–Ω"),console.log("Compressor enabled")):!m&&Y.value&&(me.value.gain.setValueAtTime(0,le.value.currentTime),Te.value.gain.setValueAtTime(1,le.value.currentTime),Y.value=!1,K.value&&window.electronAPI.showToast("–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –æ—Ç–∫–ª—é—á—ë–Ω"),console.log("Compressor disabled"))}catch(l){console.log("Compressor error:",l),K.value&&window.electronAPI.showToast("–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä–∞")}},tt=()=>{K.value?window.electronAPI.sendHotKey("F2"):(kt("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},dt=()=>{K.value?(ne.value=!ne.value,Fe(ne.value)):(kt("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},N=()=>{K.value?(Ae.value=!Ae.value,xe(Ae.value)):(kt("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank"))},G=()=>{h.value=!h.value,h.value?(window.addEventListener("mousemove",ae),document.addEventListener("keydown",He),document.body.classList.add("no-scroll")):(window.removeEventListener("mousemove",ae),document.removeEventListener("keydown",He),document.body.classList.remove("no-scroll")),U.value=h.value,Ue(()=>_())},ue=v(null),ae=()=>{ue.value=setTimeout(()=>{clearTimeout(ue.value),U.value=!1},4e3),U.value=!0},ee=H(()=>u.dimmingEnabled),fe=()=>{h.value||u.toggleDimming()},ne=H({get:()=>n.compressorEnabled,set:m=>n.updateCompressor(m)}),Ae=H({get:()=>n.mirrorEnabled,set:m=>n.updateMirror(m)}),xe=m=>{if(A.value)try{const l=A.value,S=l.contentDocument||l.contentWindow.document;if(!S)return;const V=S.querySelectorAll("video");if(V.length>0&&(V.forEach(O=>{m?O.style.transform="scaleX(-1)":O.style.transform="scaleX(1)"}),J.value=m,K.value)){const O=m?"–ó–µ—Ä–∫–∞–ª–æ –≤–∫–ª—é—á–µ–Ω–æ":"–ó–µ—Ä–∫–∞–ª–æ –æ—Ç–∫–ª—é—á–µ–Ω–æ";window.electronAPI.showToast(O)}}catch(l){}},qe=()=>{oe.value&&clearInterval(oe.value),oe.value=setInterval(()=>{if(A.value)try{const m=A.value,l=m.contentDocument||m.contentWindow.document;if(!l)return;const S=l.querySelectorAll("video");if(S.length>0){const V=S[0],z=V.style.transform==="scaleX(-1)";Ae.value&&!z?(V.style.transform="scaleX(-1)",J.value=!0):!Ae.value&&z&&(V.style.transform="scaleX(1)",J.value=!1),ge.value!==V?(console.log("Video element changed, reinitializing compressor"),ge.value=null,Y.value=!1,ne.value&&setTimeout(()=>{Fe(!0)},500)):ne.value!==Y.value&&ve.value&&(console.log("Compressor state mismatch, reapplying"),Fe(ne.value))}}catch(m){}},1e3)},Ge=()=>{C.value=!1,qe()},He=m=>{(m.key==="Escape"&&h.value||m.altKey&&m.keyCode===84)&&G()},Be=m=>{_e.value=m,setTimeout(()=>{De.value&&_()},310)},Tt=()=>{const m="reyohoho://#".concat(y.value);try{window.location.href=m}catch(l){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Å—ã–ª–∫–∏:",l)}},Rt=()=>{const m=window.location.href;navigator.clipboard.writeText(m).then(()=>{}),ye.value.showNotification("–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∏–ª—å–º —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞")};function Et(m){return m.replace(/^REYOHOHO_PLAYER>HDREZKA>/,"HDRezka - ").replace(/KODIK>/,"Kodik - ").trim()}const Pt=()=>{try{ve.value&&(ve.value.disconnect(),ve.value=null),le.value&&(le.value.close(),le.value=null),pe.value=null,me.value=null,Te.value=null,ge.value=null,Y.value=!1}catch(m){console.log("Error cleaning up audio context:",m)}},St=m=>{var l;if(((l=d.value)==null?void 0:l.key)===m.key){ft();return}d.value=m,C.value=!0,J.value=!1,Y.value=!1,ge.value=null,oe.value&&(clearInterval(oe.value),oe.value=null),m.key.toLowerCase().includes("torrents")||n.updatePreferredPlayer(We(m.key)),I("update:selectedPlayer",m)};Ke(d,m=>{m&&(C.value=!0,J.value=!1,Y.value=!1,ge.value=null,oe.value&&(clearInterval(oe.value),oe.value=null),m.key.toLowerCase().includes("torrents")||n.updatePreferredPlayer(We(m.key)),I("update:selectedPlayer",m))}),Ke(()=>E.params.kp_id,async m=>{m&&m!==y.value&&(y.value=m,J.value=!1,Y.value=!1,ge.value=null,oe.value&&(clearInterval(oe.value),oe.value=null),De.value&&_())},{immediate:!0});const gt=["16:9","12:5","4:3"],At=()=>{const l=(gt.indexOf(_e.value)+1)%gt.length;Be(gt[l])},Lt=m=>{var S,V,O,z,he,ke,Ee,je,st,lt,it,at,rt;return(rt={[q.FAVORITE]:((V=(S=L.movieInfo)==null?void 0:S.lists)==null?void 0:V.isFavorite)||!1,[q.HISTORY]:((z=(O=L.movieInfo)==null?void 0:O.lists)==null?void 0:z.isHistory)||!1,[q.LATER]:((ke=(he=L.movieInfo)==null?void 0:he.lists)==null?void 0:ke.isLater)||!1,[q.COMPLETED]:((je=(Ee=L.movieInfo)==null?void 0:Ee.lists)==null?void 0:je.isCompleted)||!1,[q.ABANDONED]:((lt=(st=L.movieInfo)==null?void 0:st.lists)==null?void 0:lt.isAbandoned)||!1,[q.WATCHING]:((at=(it=L.movieInfo)==null?void 0:it.lists)==null?void 0:at.isWatching)||!1}[m])!=null?rt:!1},c=async m=>{if(!M.token){ye.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:s});return}try{const l={[q.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[q.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[q.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[q.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[q.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[q.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};Lt(m)?(await Cn(y.value,m),ye.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(l[m]))):(await xt(y.value,m),ye.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(l[m])))}catch(l){const{message:S,code:V}=Xe(l);ye.value.showNotification("".concat(S," ").concat(V))}I("update:movieInfo")},s=()=>{g.push("/login")},B=H(()=>n.showFavoriteTooltip),re=()=>{g.push("/settings"),Ce()},$e=async()=>{if(!K.value){kt("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ReYohoho Desktop"),window.open("https://t.me/ReYohoho/126","_blank");return}if(A.value)try{const m=A.value,l=m.contentDocument||m.contentWindow.document;if(!l)return;const S=l.querySelector("video");if(!S)return;document.pictureInPictureElement?await document.exitPictureInPicture():document.pictureInPictureEnabled?await S.requestPictureInPicture():kt('–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–∂–∏–º "–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ"')}catch(m){console.error("Error toggling PiP:",m),kt('–ù–µ —É–¥–∞–ª–æ—Å—å –≤–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º "–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ"')}};return mt(()=>{C.value=!0,F(),W.value&&(_e.value="4:3"),Se(),window.addEventListener("resize",Se),window.addEventListener("resize",Ne),De.value&&_(),window.toggleCompressor=dt,window.toggleMirror=N}),Nt(()=>{window.removeEventListener("resize",Se),window.removeEventListener("resize",Ne),window.removeEventListener("mousemove",ae),document.removeEventListener("keydown",He),document.body.classList.remove("no-scroll"),oe.value&&clearInterval(oe.value),Pt(),delete window.toggleCompressor,delete window.toggleMirror}),(m,l)=>{var S,V,O,z,he,ke,Ee,je,st,lt,it,at,rt,pt,f,Ye,ht,Vt,Ot,Ft,qt,Kt,zt,Wt,Gt,Yt,Xt,Zt,Qt,Jt,en,tn,nn,on,sn,ln,an,rn,un,dn,cn,vn;return b.value?(i(),Ze(wn,{key:0,message:b.value,code:T.value},null,8,["message","code"])):(i(),a(se,{key:1},[e("div",mo,[l[41]||(l[41]=e("span",null,"–ü–ª–µ–µ—Ä:",-1)),e("button",{class:"player-btn",onClick:Oe},k(d.value?Et(d.value.translate).toUpperCase():"–ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–µ–µ—Ä–æ–≤..."),1)]),R.value?(i(),Ze(vo,{key:0,players:o.value,"selected-player":d.value,onClose:ft,onSelect:St},null,8,["players","selected-player"])):p("",!0),e("div",{ref_key:"containerRef",ref:x,class:w(["player-container",{"theater-mode":h.value}]),style:ct(h.value?{}:et.value)},[e("div",{class:"iframe-wrapper",style:ct(h.value?{}:Me.value)},[te(e("iframe",{ref_key:"playerIframe",ref:A,src:(S=d.value)==null?void 0:S.iframe,frameborder:"0",allowfullscreen:"",webkitallowfullscreen:"",class:w(["responsive-iframe",{"theater-mode-unlock":U.value,"theater-mode-lock":h.value,dimmed:ee.value}]),onLoad:Ge},null,42,fo),[[de,!C.value&&((V=d.value)==null?void 0:V.iframe)]]),C.value?(i(),Ze(En,{key:0,text:"–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–ª–µ–µ—Ä: ".concat(d.value?Et(d.value.translate):"–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ –ø–ª–µ–µ—Ä–æ–≤","\n–ï—Å–ª–∏ –ø–ª–µ–µ—Ä –Ω–µ –≥—Ä—É–∑–∏—Ç—Å—è, —Ç–æ —Å–º–µ–Ω–∏—Ç–µ –ø–ª–µ–µ—Ä –≤—ã—à–µ –∏–ª–∏ –≤–∫–ª—é—á–∏—Ç–µ VPN"),style:{"white-space":"pre-line"}},null,8,["text"])):p("",!0)],4),h.value?(i(),a("button",{key:0,class:w(["close-theater-btn",{visible:U.value}]),onClick:G}," ‚úñ ",2)):p("",!0)],6),h.value?p("",!0):(i(),a("div",go,[e("div",ko,[W.value?p("",!0):(i(),a("div",{key:0,ref_key:"tooltipContainer",ref:Ve,class:"tooltip-container list-buttons-container","data-tooltip-container":"favorite"},[B.value?(i(),a("button",{key:0,class:w(["favorite-btn",{active:(z=(O=r.movieInfo)==null?void 0:O.lists)==null?void 0:z.isFavorite}]),onMouseenter:l[0]||(l[0]=$=>ie("favorite")),onMouseleave:Re,onClick:l[1]||(l[1]=$=>c(Q(q).FAVORITE))},[e("span",yo,k((ke=(he=r.movieInfo)==null?void 0:he.lists)!=null&&ke.isFavorite?"favorite":"favorite_border"),1),e("span",{class:w(["material-icons dropdown-arrow",{highlighted:nt.value}])},"expand_more",2)],34)):p("",!0),te(e("div",{ref_key:"tooltip",ref:D,class:"custom-tooltip advanced-tooltip list-buttons-dropdown","data-tooltip":"favorite",onMouseenter:Pe,onMouseleave:Ce},[e("div",po,[e("button",{class:w(["favorite-btn",{active:(je=(Ee=r.movieInfo)==null?void 0:Ee.lists)==null?void 0:je.isFavorite}]),onClick:l[2]||(l[2]=$=>c(Q(q).FAVORITE))},[e("span",ho,k((lt=(st=r.movieInfo)==null?void 0:st.lists)!=null&&lt.isFavorite?"favorite":"favorite_border"),1),l[42]||(l[42]=e("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))],2)]),e("div",bo,[e("button",{class:w(["watching-btn",{active:(at=(it=r.movieInfo)==null?void 0:it.lists)==null?void 0:at.isWatching}]),onClick:l[3]||(l[3]=$=>c(Q(q).WATCHING))},[e("span",wo,k((pt=(rt=r.movieInfo)==null?void 0:rt.lists)!=null&&pt.isWatching?"visibility":"visibility_off"),1),l[43]||(l[43]=e("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))],2)]),e("div",Co,[e("button",{class:w(["later-btn",{active:(Ye=(f=r.movieInfo)==null?void 0:f.lists)==null?void 0:Ye.isLater}]),onClick:l[4]||(l[4]=$=>c(Q(q).LATER))},l[44]||(l[44]=[e("span",{class:"material-icons"},"watch_later",-1),e("span",{class:"button-label"},"–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ",-1)]),2)]),e("div",_o,[e("button",{class:w(["completed-btn",{active:(Vt=(ht=r.movieInfo)==null?void 0:ht.lists)==null?void 0:Vt.isCompleted}]),onClick:l[5]||(l[5]=$=>c(Q(q).COMPLETED))},[e("span",Mo,k((Ft=(Ot=r.movieInfo)==null?void 0:Ot.lists)!=null&&Ft.isCompleted?"check_circle":"check_circle_outline"),1),l[45]||(l[45]=e("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))],2)]),e("div",Eo,[e("button",{class:w(["abandoned-btn",{active:(Kt=(qt=r.movieInfo)==null?void 0:qt.lists)==null?void 0:Kt.isAbandoned}]),onClick:l[6]||(l[6]=$=>c(Q(q).ABANDONED))},[e("span",Lo,k(((Wt=(zt=r.movieInfo)==null?void 0:zt.lists)!=null&&Wt.isAbandoned,"not_interested")),1),l[46]||(l[46]=e("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))],2)]),e("div",{class:"tooltip-hint"},[l[48]||(l[48]=e("span",{class:"material-icons"},"settings",-1)),e("span",null,[l[47]||(l[47]=X("–°—Ç–∏–ª—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ ")),e("a",{class:"settings-link",onClick:re},"–Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö")])])],544),[[de,P.value==="favorite"&&B.value]])],512)),W.value?p("",!0):(i(),a(se,{key:1},[e("div",Io,[e("button",{class:w(["dimming-btn",{active:ee.value}]),onMouseenter:l[7]||(l[7]=$=>ie("dimming")),onMouseleave:l[8]||(l[8]=$=>P.value=null),onClick:fe},[e("span",To,k(ee.value?"light_mode":"dark_mode"),1)],34),te(e("div",{class:"custom-tooltip","data-tooltip":"dimming"},k(ee.value?"–û—Ç–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ":"–í–∫–ª—é—á–∏—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ"),513),[[de,P.value==="dimming"]])]),e("div",Ro,[e("button",{class:w(["blur-btn",{"electron-only":!K.value}]),onMouseenter:l[9]||(l[9]=$=>ie("blur")),onMouseleave:l[10]||(l[10]=$=>P.value=null),onClick:tt},l[49]||(l[49]=[e("span",{class:"material-icons"},"blur_on",-1)]),34),te(e("div",{class:"custom-tooltip","data-tooltip":"blur"},k(K.value?"–ë–ª—é—Ä":"–ë–ª—é—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[de,P.value==="blur"]])]),e("div",Po,[e("button",{class:w(["material-symbols-outlined",{active:ne.value,"electron-only":!K.value}]),onMouseenter:l[11]||(l[11]=$=>ie("compressor")),onMouseleave:l[12]||(l[12]=$=>P.value=null),onClick:dt},l[50]||(l[50]=[e("span",{class:"material-icons"},"graphic_eq",-1)]),34),te(e("div",{class:"custom-tooltip","data-tooltip":"compressor"},k(K.value?"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä":"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[de,P.value==="compressor"]])]),e("div",So,[e("button",{class:w(["mirror-btn",{active:Ae.value,"electron-only":!K.value}]),onMouseenter:l[13]||(l[13]=$=>ie("mirror")),onMouseleave:l[14]||(l[14]=$=>P.value=null),onClick:N},l[51]||(l[51]=[e("span",{class:"material-icons"},"flip",-1)]),34),te(e("div",{class:"custom-tooltip","data-tooltip":"mirror"},k(K.value?"–ó–µ—Ä–∫–∞–ª–æ":"–ó–µ—Ä–∫–∞–ª–æ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[de,P.value==="mirror"]])]),e("div",Ao,[e("button",{class:"theater-mode-btn",onMouseenter:l[15]||(l[15]=$=>ie("theater")),onMouseleave:l[16]||(l[16]=$=>P.value=null),onClick:G},[e("span",xo,k(h.value?"fullscreen_exit":"aspect_ratio"),1)],32),te(e("div",jo,[X(k(h.value?"–í—ã–π—Ç–∏ –∏–∑ —Ç–µ–∞—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞":"–¢–µ–∞—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º")+" ",1),l[52]||(l[52]=e("span",{class:"shortcut-hint"},"Alt+T",-1))],512),[[de,P.value==="theater"]])]),e("div",Uo,[e("button",{class:w(["pip-btn",{"electron-only":!K.value}]),onMouseenter:l[17]||(l[17]=$=>ie("pip")),onMouseleave:l[18]||(l[18]=$=>P.value=null),onClick:$e},l[53]||(l[53]=[e("span",{class:"material-icons"},"picture_in_picture_alt",-1)]),34),te(e("div",{class:"custom-tooltip","data-tooltip":"pip"},k(K.value?"–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ":"–ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"),513),[[de,P.value==="pip"]])]),e("div",No,[e("button",{class:"aspect-ratio-dropdown-btn",onMouseenter:l[19]||(l[19]=$=>ie("aspect_ratio")),onMouseleave:Re,onClick:At},[e("span",Bo,k(_e.value),1)],32),te(e("div",{class:"custom-tooltip advanced-tooltip aspect-ratio-dropdown","data-tooltip":"aspect_ratio",onMouseenter:Pe,onMouseleave:Ce},[(i(),a(se,null,be(gt,$=>e("div",{key:$,class:w(["aspect-ratio-option",{active:_e.value===$}]),onClick:qr=>Be($)},k($),11,$o)),64))],544),[[de,P.value==="aspect_ratio"]])]),e("div",{class:"tooltip-container","data-tooltip-container":"centering",onMouseenter:l[21]||(l[21]=$=>ie("centering")),onMouseleave:Re},[e("button",{class:"center-btn",onClick:_},l[54]||(l[54]=[e("span",{class:"material-icons"},"center_focus_strong",-1)])),te(e("div",{class:"custom-tooltip advanced-tooltip","data-tooltip":"centering",onMouseenter:Pe,onMouseleave:Ce},[l[55]||(l[55]=X(" –û—Ç—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–ª–µ–µ—Ä ")),ce(Xn,{modelValue:De.value,"onUpdate:modelValue":l[20]||(l[20]=$=>De.value=$),title:"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞"},null,8,["modelValue"]),l[56]||(l[56]=e("span",{class:"tooltip-title"},"–ê–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞",-1))],544),[[de,P.value==="centering"]])],32),K.value?p("",!0):(i(),a("div",Do,[e("button",{class:"app-link-btn",onMouseenter:l[22]||(l[22]=$=>ie("app_link")),onMouseleave:l[23]||(l[23]=$=>P.value=null),onClick:Tt},l[57]||(l[57]=[e("span",{class:"material-icons"},"open_in_new",-1)]),32),te(e("div",Ho," –û—Ç–∫—Ä—ã—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ",512),[[de,P.value==="app_link"]])])),K.value?(i(),a("div",Vo,[e("button",{class:"copy-link-btn",onMouseenter:l[24]||(l[24]=$=>ie("copy_link")),onMouseleave:l[25]||(l[25]=$=>P.value=null),onClick:Rt},l[58]||(l[58]=[e("span",{class:"material-icons"},"content_copy",-1)]),32),te(e("div",Oo," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É ",512),[[de,P.value==="copy_link"]])])):p("",!0)],64))]),!W.value&&!B.value?(i(),a("div",Fo,[e("div",qo,[e("button",{class:w(["favorite-btn",{active:(Yt=(Gt=r.movieInfo)==null?void 0:Gt.lists)==null?void 0:Yt.isFavorite}]),onMouseenter:l[26]||(l[26]=$=>ie("favorite")),onMouseleave:l[27]||(l[27]=$=>P.value=null),onClick:l[28]||(l[28]=$=>c(Q(q).FAVORITE))},[e("span",Ko,k((Zt=(Xt=r.movieInfo)==null?void 0:Xt.lists)!=null&&Zt.isFavorite?"favorite":"favorite_border"),1)],34),te(e("div",zo,k("–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"),512),[[de,P.value==="favorite"]])]),e("div",Wo,[e("button",{class:w(["watching-btn",{active:(Jt=(Qt=r.movieInfo)==null?void 0:Qt.lists)==null?void 0:Jt.isWatching}]),onMouseenter:l[29]||(l[29]=$=>ie("watching")),onMouseleave:l[30]||(l[30]=$=>P.value=null),onClick:l[31]||(l[31]=$=>c(Q(q).WATCHING))},[e("span",Go,k((tn=(en=r.movieInfo)==null?void 0:en.lists)!=null&&tn.isWatching?"visibility":"visibility_off"),1)],34),te(e("div",Yo,k("–°–º–æ—Ç—Ä—é"),512),[[de,P.value==="watching"]])]),e("div",Xo,[e("button",{class:w(["later-btn",{active:(on=(nn=r.movieInfo)==null?void 0:nn.lists)==null?void 0:on.isLater}]),onMouseenter:l[32]||(l[32]=$=>ie("later")),onMouseleave:l[33]||(l[33]=$=>P.value=null),onClick:l[34]||(l[34]=$=>c(Q(q).LATER))},l[59]||(l[59]=[e("span",{class:"material-icons"},"watch_later",-1)]),34),te(e("div",Zo,k("–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"),512),[[de,P.value==="later"]])]),e("div",Qo,[e("button",{class:w(["completed-btn",{active:(ln=(sn=r.movieInfo)==null?void 0:sn.lists)==null?void 0:ln.isCompleted}]),onMouseenter:l[35]||(l[35]=$=>ie("completed")),onMouseleave:l[36]||(l[36]=$=>P.value=null),onClick:l[37]||(l[37]=$=>c(Q(q).COMPLETED))},[e("span",Jo,k((rn=(an=r.movieInfo)==null?void 0:an.lists)!=null&&rn.isCompleted?"check_circle":"check_circle_outline"),1)],34),te(e("div",es,k("–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"),512),[[de,P.value==="completed"]])]),e("div",ts,[e("button",{class:w(["abandoned-btn",{active:(dn=(un=r.movieInfo)==null?void 0:un.lists)==null?void 0:dn.isAbandoned}]),onMouseenter:l[38]||(l[38]=$=>ie("abandoned")),onMouseleave:l[39]||(l[39]=$=>P.value=null),onClick:l[40]||(l[40]=$=>c(Q(q).ABANDONED))},[e("span",ns,k(((vn=(cn=r.movieInfo)==null?void 0:cn.lists)!=null&&vn.isAbandoned,"not_interested")),1)],34),te(e("div",os,k("–ë—Ä–æ—à–µ–Ω–æ"),512),[[de,P.value==="abandoned"]])])])):p("",!0)])),ce(It,{ref_key:"notificationRef",ref:ye},null,512)],64))}}},hn=ze(ss,[["__scopeId","data-v-94b90eda"]]),ls={key:0,class:"carousel-container"},is={class:"carousel-wrapper"},as=["onClick"],rs=["src","alt"],us={class:"video-name"},ds={key:0,class:"video-player"},cs=["src"],vs={__name:"TrailerCarousel",props:{videos:{type:Array,required:!0},activeVideoIndex:{type:Number,default:null}},emits:["select"],setup(r,{emit:t}){const u=_t(),n=H(()=>u.isMobile),M=r,E=t,g=v(M.activeVideoIndex),y=v(null),L=v(!1),I=v(!1),o=()=>{if(!y.value)return;const{scrollLeft:x,scrollWidth:R,clientWidth:b}=y.value;L.value=x>0,I.value=x<R-b-1},d=x=>{if(!y.value)return;const R=y.value.querySelector(".carousel-item");if(!R)return;const b=R.clientWidth+16;y.value.scrollBy({left:b*x,behavior:"smooth"})},C=x=>{g.value=x,E("select",M.videos[x])},h=()=>o(),U=v([]),A=async x=>{try{return(await fetch("https://img.youtube.com/vi/".concat(x,"/0.jpg"))).ok}catch(R){return!1}};return mt(async()=>{const x=M.videos.map(async b=>await A(b.videoId)?b:null),R=await Promise.all(x);U.value=R.filter(Boolean),o(),window.addEventListener("resize",h)}),Ke(()=>M.videos,async x=>{const R=x.map(async T=>await A(T.videoId)?T:null),b=await Promise.all(R);U.value=b.filter(Boolean)}),Ke(()=>M.activeVideoIndex,x=>{g.value=x}),Nt(()=>{window.removeEventListener("resize",h)}),(x,R)=>U.value.length?(i(),a("div",ls,[R[4]||(R[4]=e("h2",null,"–¢—Ä–µ–π–ª–µ—Ä—ã (YouTube)",-1)),e("div",is,[te(e("button",{class:"scroll-button left",onClick:R[0]||(R[0]=b=>d(-1))},R[2]||(R[2]=[e("span",{class:"material-symbols-outlined"},"arrow_back_ios",-1)]),512),[[de,!n.value&&L.value]]),e("div",{ref_key:"carousel",ref:y,class:"carousel",onScroll:o},[(i(!0),a(se,null,be(U.value,(b,T)=>(i(),a("div",{key:T,class:"carousel-item",onClick:j=>C(T)},[e("img",{src:"https://img.youtube.com/vi/".concat(b.videoId,"/0.jpg"),alt:b.name},null,8,rs),e("div",us,k(b.name),1)],8,as))),128))],544),te(e("button",{class:"scroll-button right",onClick:R[1]||(R[1]=b=>d(1))},R[3]||(R[3]=[e("span",{class:"material-symbols-outlined"},"arrow_forward_ios",-1)]),512),[[de,!n.value&&I.value]])]),g.value!==null?(i(),a("div",ds,[e("iframe",{src:r.videos[g.value].iframeUrl,frameborder:"0",allowfullscreen:""},null,8,cs)])):p("",!0)])):p("",!0)}},ms=ze(vs,[["__scopeId","data-v-4a5806b3"]]),fs={class:"rating-container"},gs={class:"rating-display"},ks={class:"rating-numbers"},ys=["onClick","onMouseenter"],ps={key:0,class:"tooltip-footer"},hs={class:"rating-numbers mobile-rating-numbers"},bs=["onClick"],ws={key:0,class:"mobile-modal-footer"},Cs={__name:"MovieRating",props:{kpId:{type:String,required:!0},showDash:{type:Boolean,default:!1}},setup(r){const t=_t(),u=Mt(),n=r,M=v(null),E=v(null),g=v(null),y=v(null),L=v(0),I=v(!1),o=v(!1);let d=null;const C=j=>j?j.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",h=()=>{d=setTimeout(()=>{I.value=!1,t.isMobile||(o.value=!1)},100)},U=()=>{d&&(clearTimeout(d),d=null),I.value=!0},A=()=>{t.isMobile&&(o.value=!o.value)},x=()=>{u.push("/login")},R=async()=>{try{const j=await In(n.kpId);E.value=j.user_rating,g.value=j.average_rating,y.value=C(j.vote_count)}catch(j){console.error("Error loading rating:",j)}},b=async j=>{var Z;try{j===E.value?(await mn(n.kpId,null),E.value=null,M.value.showNotification("–û—Ü–µ–Ω–∫–∞ —É–¥–∞–ª–µ–Ω–∞")):(await mn(n.kpId,j),E.value=j,M.value.showNotification("–û—Ü–µ–Ω–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞")),t.isMobile&&(o.value=!1),R()}catch(W){console.error("Error setting rating:",W),((Z=W.response)==null?void 0:Z.status)===401?M.value.showNotification('–î–ª—è –æ—Ü–µ–Ω–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:x}):M.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ü–µ–Ω–∫–∏"),t.isMobile&&(o.value=!1)}},T=()=>{o.value=!1};return mt(()=>{R()}),(j,Z)=>(i(),a("div",fs,[e("div",gs,[e("a",{href:"#",class:w(["rating-link",{"has-rating":E.value}]),onMouseenter:Z[0]||(Z[0]=W=>I.value=!0),onMouseleave:h,onClick:Qe(A,["prevent"])},[Z[3]||(Z[3]=e("img",{src:Wn,alt:"ReYohoho",class:"rating-logo"},null,-1)),e("span",{class:w(["average-rating",Q(wt)(g.value)])},k(g.value?g.value.toFixed(1).replace(/\.0$/,""):"‚Äî"),3)],34),te(e("div",{class:"rating-tooltip",onMouseenter:U,onMouseleave:h},[e("div",ks,[(i(),a(se,null,be(10,W=>e("button",{key:W,class:w(["number-btn",{active:W===E.value,hover:W===L.value,"average-highlight":g.value&&W<=Math.round(g.value)}]),onClick:K=>b(W),onMouseenter:K=>L.value=W,onMouseleave:Z[1]||(Z[1]=K=>L.value=0)},k(W),43,ys)),64))]),y.value?(i(),a("div",ps,"–û—Ü–µ–Ω–æ–∫: "+k(y.value),1)):p("",!0)],544),[[de,(I.value||o.value)&&!Q(t).isMobile]])]),ce(It,{ref_key:"notificationRef",ref:M},null,512),Q(t).isMobile&&o.value?(i(),a("div",{key:0,class:"mobile-modal-overlay",onClick:T},[e("div",{class:"mobile-modal",onClick:Z[2]||(Z[2]=Qe(()=>{},["stop"]))},[e("div",{class:"mobile-modal-header"},[Z[4]||(Z[4]=e("h3",null,"–û—Ü–µ–Ω–∏—Ç—å —Ñ–∏–ª—å–º",-1)),e("button",{class:"close-button",onClick:T},"√ó")]),e("div",hs,[(i(),a(se,null,be(10,W=>e("button",{key:W,class:w(["number-btn",{active:W===E.value,"average-highlight":g.value&&W<=Math.round(g.value)}]),onClick:K=>b(W)},k(W),11,bs)),64))]),y.value?(i(),a("div",ws,"–û—Ü–µ–Ω–æ–∫: "+k(y.value),1)):p("",!0)])])):p("",!0)]))}},_s=ze(Cs,[["__scopeId","data-v-2df64bd5"]]),Ms={name:"EmojiPicker",props:{isVisible:{type:Boolean,default:!1}},emits:["emoji-selected","mouse-enter","mouse-leave","close"],data(){return{activeCategory:"smileys",categories:[{name:"smileys",icon:"üòÄ",emojis:["üòÄ","üòÉ","üòÑ","üòÅ","üòÜ","üòÖ","üòÇ","ü§£","üòä","üòá","üôÇ","üôÉ","üòâ","üòå","üòç","ü•∞","üòò","üòó","üòô","üòö","üòã","üòõ","üòù","üòú","ü§™","ü§®","üßê","ü§ì","üòé","ü§©","ü•≥"]},{name:"emotions",icon:"üò¢",emojis:["üò•","üò¢","üò≠","üò§","üò†","üò°","ü§¨","ü§Ø","üò≥","ü•µ","ü•∂","üò±","üò®","üò∞","üò•","üòì","ü§ó","ü§î","ü§≠","ü§´","ü§•","üò∂","üòê","üòë","üò¨","üôÑ","üòØ","üò¶","üòß","üòÆ","üò≤"]},{name:"gestures",icon:"üëç",emojis:["üëç","üëé","üëå","ü§å","ü§è","‚úåÔ∏è","ü§û","ü§ü","ü§ò","ü§ô","üëà","üëâ","üëÜ","üñï","üëá","‚òùÔ∏è","üëè","üôå","üëê","ü§≤","ü§ù","üôè","‚úçÔ∏è","üí™","ü¶æ","ü¶ø","ü¶µ","ü¶∂","üëÇ","ü¶ª","üëÉ"]},{name:"hearts",icon:"‚ù§Ô∏è",emojis:["‚ù§Ô∏è","üß°","üíõ","üíö","üíô","üíú","ü§é","üñ§","ü§ç","üíî","‚ù£Ô∏è","üíï","üíû","üíì","üíó","üíñ","üíò","üíù","üíü","‚ô•Ô∏è","üíØ","üí¢","üí•","üí´","üí¶","üí®","üï≥Ô∏è","üí£","üí¨","üëÅÔ∏è‚Äçüó®Ô∏è","üó®Ô∏è"]},{name:"objects",icon:"üéâ",emojis:["üéâ","üéä","üéà","üéÅ","üéÄ","üéÇ","üç∞","üßÅ","üç≠","üç¨","üç´","üç©","üç™","üçï","üçî","üçü","üå≠","ü•™","üåÆ","üåØ","ü•ô","ü•ö","üç≥","ü•ò","üç≤","ü•ó","üçø","üßà","üßÄ","ü•®","ü•Ø"]}]}},computed:{currentEmojis(){const r=this.categories.find(t=>t.name===this.activeCategory);return r?r.emojis:[]}},methods:{selectEmoji(r){this.$emit("emoji-selected",r)}}},Es={class:"emoji-categories"},Ls=["onClick"],Is={class:"emoji-grid"},Ts=["onClick"];function Rs(r,t,u,n,M,E){return u.isVisible?(i(),a("div",{key:0,class:"emoji-picker",onMouseenter:t[1]||(t[1]=g=>r.$emit("mouse-enter")),onMouseleave:t[2]||(t[2]=g=>r.$emit("mouse-leave"))},[e("button",{class:"close-btn mobile-only",onClick:t[0]||(t[0]=g=>r.$emit("close"))},t[3]||(t[3]=[e("i",{class:"fas fa-times"},null,-1)])),e("div",Es,[(i(!0),a(se,null,be(M.categories,g=>(i(),a("button",{key:g.name,onClick:y=>M.activeCategory=g.name,class:w([{active:M.activeCategory===g.name},"category-btn"]),type:"button"},k(g.icon),11,Ls))),128))]),e("div",Is,[(i(!0),a(se,null,be(E.currentEmojis,g=>(i(),a("button",{key:g,onClick:y=>E.selectEmoji(g),class:"emoji-btn",type:"button"},k(g),9,Ts))),128))])],32)):p("",!0)}const Bt=ze(Ms,[["render",Rs],["__scopeId","data-v-209132f3"]]),Ps=async r=>{const t=await Tn();return await r(t)},Ss=async r=>{const{data:t}=await Ps(u=>u.get("/search_emotes/".concat(r)));return t.emotes||[]},As={name:"ImagePicker",props:{isVisible:{type:Boolean,required:!0},currentUser:{type:Object,default:null}},emits:["image-selected","mouse-enter","mouse-leave","close","login-required"],setup(r,{emit:t}){const u=v(""),n=v([]),M=v(null),E=v(!1),y=Rn(async d=>{if(!r.currentUser){console.warn("–ü–æ–ø—ã—Ç–∫–∞ –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏");return}if(!d.trim()){n.value=[],E.value=!1;return}E.value=!0;try{n.value=await Ss(d)}catch(C){console.error("Error searching images:",C),n.value=[]}finally{E.value=!1}},300),L=()=>{if(!r.currentUser){t("login-required");return}u.value.trim()&&(E.value=!0),y(u.value)},I=d=>{if(!r.currentUser){t("login-required");return}t("image-selected",d),t("close")},o=()=>{setTimeout(()=>{r.isVisible&&t("mouse-leave")},100)};return Ke(()=>r.isVisible,d=>{d&&(u.value="",n.value=[],E.value=!1)}),{searchQuery:u,images:n,searchInput:M,isLoading:E,handleSearch:L,selectImage:I,handleInputBlur:o}}},xs={key:0,class:"auth-required"},js={class:"auth-message"},Us={key:1},Ns={class:"image-picker-header"},Bs={class:"image-content"},$s={key:0,class:"loading-spinner"},Ds={key:1,class:"image-grid"},Hs=["onClick"],Vs=["src","alt"],Os={key:2,class:"no-images"},Fs={key:3,class:"no-search"};function qs(r,t,u,n,M,E){return u.isVisible?(i(),a("div",{key:0,class:"image-picker",onMouseenter:t[7]||(t[7]=g=>r.$emit("mouse-enter")),onMouseleave:t[8]||(t[8]=g=>r.$emit("mouse-leave")),onClick:t[9]||(t[9]=Qe(()=>{},["stop"]))},[e("button",{class:"close-btn mobile-only",onClick:t[0]||(t[0]=g=>r.$emit("close"))},t[10]||(t[10]=[e("i",{class:"fas fa-times"},null,-1)])),u.currentUser?(i(),a("div",Us,[e("div",Ns,[te(e("input",{ref:"searchInput",type:"text","onUpdate:modelValue":t[2]||(t[2]=g=>n.searchQuery=g),placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–º–∞–π–ª–∞ 7tv",class:"image-search-input",onInput:t[3]||(t[3]=(...g)=>n.handleSearch&&n.handleSearch(...g)),onClick:t[4]||(t[4]=Qe(()=>{},["stop"])),onFocus:t[5]||(t[5]=g=>r.$emit("mouse-enter")),onBlur:t[6]||(t[6]=(...g)=>n.handleInputBlur&&n.handleInputBlur(...g))},null,544),[[vt,n.searchQuery]])]),e("div",Bs,[n.isLoading?(i(),a("div",$s,t[14]||(t[14]=[e("div",{class:"spinner"},null,-1),e("p",null,"–ü–æ–∏—Å–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...",-1)]))):n.images.length>0?(i(),a("div",Ds,[(i(!0),a(se,null,be(n.images,(g,y)=>(i(),a("div",{key:y,class:"image-item",onClick:L=>n.selectImage(g)},[e("img",{src:g,alt:"Image "+(y+1)},null,8,Vs)],8,Hs))),128))])):n.searchQuery.trim()?(i(),a("div",Os,t[15]||(t[15]=[e("p",null,"–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤",-1)]))):(i(),a("div",Fs,t[16]||(t[16]=[e("p",null,"–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞",-1)])))])])):(i(),a("div",xs,[e("div",js,[t[11]||(t[11]=e("i",{class:"fas fa-lock"},null,-1)),t[12]||(t[12]=e("h3",null,"–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è",-1)),t[13]||(t[13]=e("p",null,"–î–ª—è –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç",-1)),e("button",{class:"login-button",onClick:t[1]||(t[1]=g=>r.$emit("login-required"))},"–í–æ–π—Ç–∏")])]))],32)):p("",!0)}const $t=ze(As,[["render",qs],["__scopeId","data-v-f33eb3f6"]]),Ks={name:"LinkModal",props:{isVisible:{type:Boolean,default:!1},selectedText:{type:String,default:""}},emits:["close","submit"],setup(r,{emit:t}){const u=v(""),n=v(""),M=v(null),E=v(null),g=H(()=>/^https?:\/\/.+/.test(u.value.trim())&&n.value.trim()),y=()=>{t("close"),I()},L=()=>{g.value&&(t("submit",{url:u.value.trim(),title:n.value.trim()}),y())},I=()=>{u.value="",n.value=""},o=d=>{var C;d.key==="Enter"?(d.preventDefault(),g.value?L():d.target===M.value&&u.value.trim()&&((C=E.value)==null||C.focus())):d.key==="Escape"&&y()};return Ke(()=>r.isVisible,d=>{d&&(r.selectedText.trim()&&(n.value=r.selectedText.trim()),Ue(()=>{var C;(C=M.value)==null||C.focus()}))}),{linkUrl:u,linkTitle:n,urlInput:M,titleInput:E,isValidLink:g,closeModal:y,submitLink:L,handleKeydown:o}}},zs={class:"link-modal-header"},Ws={class:"link-modal-content"},Gs={class:"form-group"},Ys={class:"form-group"},Xs={class:"link-modal-footer"},Zs=["disabled"];function Qs(r,t,u,n,M,E){return u.isVisible?(i(),a("div",{key:0,class:"link-modal-overlay",onClick:t[8]||(t[8]=(...g)=>n.closeModal&&n.closeModal(...g))},[e("div",{class:"link-modal",onClick:t[7]||(t[7]=Qe(()=>{},["stop"]))},[e("div",zs,[t[10]||(t[10]=e("h3",null,"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É",-1)),e("button",{class:"close-button",onClick:t[0]||(t[0]=(...g)=>n.closeModal&&n.closeModal(...g))},t[9]||(t[9]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",Ws,[e("div",Gs,[t[11]||(t[11]=e("label",{for:"link-url"},"URL —Å—Å—ã–ª–∫–∏:",-1)),te(e("input",{id:"link-url",ref:"urlInput","onUpdate:modelValue":t[1]||(t[1]=g=>n.linkUrl=g),type:"url",placeholder:"https://example.com",class:"link-input",onKeydown:t[2]||(t[2]=(...g)=>n.handleKeydown&&n.handleKeydown(...g))},null,544),[[vt,n.linkUrl]])]),e("div",Ys,[t[12]||(t[12]=e("label",{for:"link-title"},"–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏:",-1)),te(e("input",{id:"link-title",ref:"titleInput","onUpdate:modelValue":t[3]||(t[3]=g=>n.linkTitle=g),type:"text",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è",class:"link-input",onKeydown:t[4]||(t[4]=(...g)=>n.handleKeydown&&n.handleKeydown(...g))},null,544),[[vt,n.linkTitle]])])]),e("div",Xs,[e("button",{class:"cancel-button",onClick:t[5]||(t[5]=(...g)=>n.closeModal&&n.closeModal(...g))},"–û—Ç–º–µ–Ω–∞"),e("button",{class:"submit-button",disabled:!n.isValidLink,onClick:t[6]||(t[6]=(...g)=>n.submitLink&&n.submitLink(...g))},"–î–æ–±–∞–≤–∏—Ç—å",8,Zs)])])])):p("",!0)}const Dt=ze(Ks,[["render",Qs],["__scopeId","data-v-a794d83f"]]);function Js(){const r=v(!1),t=v(!1),u=v(!1),n=()=>{t.value=!0},M=()=>{t.value=!1,setTimeout(()=>{!t.value&&!u.value&&(r.value=!1)},300)},E=()=>{u.value=!0,r.value=!0},g=()=>{u.value=!1,setTimeout(()=>{!t.value&&!u.value&&(r.value=!1)},300)},y=()=>{r.value=!1};return{showEmojiPicker:r,isEmojiHovered:t,isButtonHovered:u,handleEmojiMouseEnter:n,handleEmojiMouseLeave:M,handleButtonMouseEnter:E,handleButtonMouseLeave:g,closeEmojiPicker:y,insertEmoji:(o,d,C,h)=>{const U=d.value;if(U){const A=U.selectionStart,x=U.selectionEnd,R=C.value.substring(0,A),b=C.value.substring(x),T=R+o+b;h(T),Ue(()=>{U.focus(),U.setSelectionRange(A+o.length,A+o.length),U.style.height&&(U.style.height="auto",U.style.height="".concat(Math.min(U.scrollHeight,200),"px"))})}else h(C.value+o)},handleGlobalClick:o=>{!o.target.closest(".emoji-picker")&&!o.target.closest(".emoji-button-inline")&&y()}}}function el(){const r=v(!1),t=v(!1),u=v(!1),n=()=>{t.value=!0},M=()=>{t.value=!1,setTimeout(()=>{!t.value&&!u.value&&(r.value=!1)},300)},E=()=>{u.value=!0,r.value=!0},g=()=>{u.value=!1,setTimeout(()=>{!t.value&&!u.value&&(r.value=!1)},300)},y=()=>{r.value=!1};return{showImagePicker:r,isImageHovered:t,isButtonHovered:u,handleImageMouseEnter:n,handleImageMouseLeave:M,handleImageButtonMouseEnter:E,handleButtonMouseLeave:g,closeImagePicker:y,insertImage:(o,d,C,h)=>{const U=d.value;if(U){const A=U.selectionStart,x=U.selectionEnd,R="[img]".concat(o,"[/img]"),b=C.value.slice(0,A)+R+C.value.slice(x);h(b),Ue(()=>{U.focus(),U.setSelectionRange(A+R.length,A+R.length),U.style.height&&(U.style.height="auto",U.style.height="".concat(Math.min(U.scrollHeight,200),"px"))})}else{const A="[img]".concat(o,"[/img]");h(C.value+A)}},handleGlobalClick:o=>{!o.target.closest(".image-picker")&&!o.target.closest(".emoji-button-inline")&&y()}}}function tl(){const r=v(!1),t=v("");return{showLinkModal:r,selectedTextForLink:t,insertLink:(g,y)=>{const L=g.value;if(L){const I=L.selectionStart,o=L.selectionEnd,d=y.value.slice(I,o);t.value=d.trim()||""}r.value=!0},insertLinkFromModal:(g,y,L,I)=>{const o=y.value;if(o){const d=o.selectionStart,C=o.selectionEnd,h="[link=".concat(g.url,"]").concat(g.title,"[/link]"),U=L.value.slice(0,d)+h+L.value.slice(C);I(U),Ue(()=>{o.focus(),o.setSelectionRange(d+h.length,d+h.length),o.style.height&&(o.style.height="auto",o.style.height="".concat(Math.min(o.scrollHeight,200),"px"))})}},closeLinkModal:()=>{r.value=!1},insertSpoiler:(g,y,L)=>{const I=g.value;if(I){const o=I.selectionStart,d=I.selectionEnd,C=y.value.slice(o,d);let h;C.trim()?h="[spoiler]".concat(C,"[/spoiler]"):h="[spoiler][/spoiler]";const U=y.value.slice(0,o)+h+y.value.slice(d);L(U),Ue(()=>{if(I.focus(),C.trim())I.setSelectionRange(o+h.length,o+h.length);else{const A=o+9;I.setSelectionRange(A,A)}I.style.height&&(I.style.height="auto",I.style.height="".concat(Math.min(I.scrollHeight,200),"px"))})}}}}function nl(){return{autoResize:u=>{const n=u==null?void 0:u.target;n&&(n.style.height="auto",n.style.height="".concat(Math.min(n.scrollHeight,200),"px"))},autoResizeElement:u=>{u&&(u.style.height="auto",u.style.height="".concat(Math.min(u.scrollHeight,200),"px"))}}}function Ht(){const r=Js(),t=el(),u=tl(),{autoResize:n,autoResizeElement:M}=nl(),E=()=>{r.isButtonHovered.value=!0,t.isButtonHovered.value=!0,r.showEmojiPicker.value=!0,t.showImagePicker.value=!1},g=()=>{r.isButtonHovered.value=!0,t.isButtonHovered.value=!0,t.showImagePicker.value=!0,r.showEmojiPicker.value=!1},y=()=>{r.isButtonHovered.value=!1,t.isButtonHovered.value=!1,setTimeout(()=>{!r.isEmojiHovered.value&&!t.isImageHovered.value&&!r.isButtonHovered.value&&!t.isButtonHovered.value&&(r.showEmojiPicker.value=!1,t.showImagePicker.value=!1)},300)},L=()=>{r.showEmojiPicker.value=!1,t.showImagePicker.value=!1},I=A=>{!A.target.closest(".emoji-picker")&&!A.target.closest(".image-picker")&&!A.target.closest(".emoji-button-inline")&&L()},o=(A,x,R,b)=>{r.insertEmoji(A,x,R,b)},d=(A,x,R,b)=>{t.insertImage(A,x,R,b)},C=(A,x,R)=>{u.insertLink(A,x,R)},h=(A,x,R,b)=>{u.insertLinkFromModal(A,x,R,b)},U=(A,x,R)=>{u.insertSpoiler(A,x,R)};return mt(()=>{document.addEventListener("click",I)}),Nt(()=>{document.removeEventListener("click",I)}),{showEmojiPicker:r.showEmojiPicker,handleEmojiMouseEnter:r.handleEmojiMouseEnter,handleEmojiMouseLeave:r.handleEmojiMouseLeave,closeEmojiPicker:r.closeEmojiPicker,showImagePicker:t.showImagePicker,handleImageMouseEnter:t.handleImageMouseEnter,handleImageMouseLeave:t.handleImageMouseLeave,closeImagePicker:t.closeImagePicker,showLinkModal:u.showLinkModal,selectedTextForLink:u.selectedTextForLink,closeLinkModal:u.closeLinkModal,handleButtonMouseEnter:E,handleImageButtonMouseEnter:g,handleButtonMouseLeave:y,closeAllPickers:L,insertEmojiUniversal:o,insertImageUniversal:d,insertLinkUniversal:C,insertLinkFromModalUniversal:h,insertSpoilerUniversal:U,autoResize:n,autoResizeElement:M}}const ol=r=>r===1?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π":r>=2&&r<=4?"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è":"–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤",sl=r=>{if(!r)return"?";const t=r.split(" ");return t.length===1?r.slice(0,2).toUpperCase():(t[0][0]+t[t.length-1][0]).toUpperCase()},ll={name:"CommentItem",components:{EmojiPicker:Bt,ImagePicker:$t,LinkModal:Dt},props:{comment:{type:Object,required:!0,default:()=>({username:"–ê–Ω–æ–Ω–∏–º",user_avatar:null,content:"",created_at:new Date().toISOString(),rating:0,replies:[]})},currentUser:{type:Object,required:!0,default:()=>({})},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate"],setup(r,{emit:t}){var et,Me;const u=Mt(),n=H(()=>{var _;return r.editingCommentId===((_=r.comment)==null?void 0:_.id)}),M=v(((et=r.comment)==null?void 0:et.content)||""),E=v(((Me=r.comment)==null?void 0:Me.user_rating)||0),g=v(null),y=v(null),{showEmojiPicker:L,showImagePicker:I,showLinkModal:o,selectedTextForLink:d,handleEmojiMouseEnter:C,handleEmojiMouseLeave:h,handleImageMouseEnter:U,handleImageMouseLeave:A,handleButtonMouseEnter:x,handleImageButtonMouseEnter:R,handleButtonMouseLeave:b,closeEmojiPicker:T,closeImagePicker:j,closeLinkModal:Z,insertEmojiUniversal:W,insertImageUniversal:K,insertLinkUniversal:P,insertLinkFromModalUniversal:Le,insertSpoilerUniversal:we,autoResize:ye}=Ht(),{formatContentWithTruncation:Ve}=_n();mt(async()=>{var _;if((_=r.comment)!=null&&_.user_avatar){const F=await Pn();g.value="".concat(F).concat(r.comment.user_avatar)}});const D=H(()=>{var _;return r.currentUser&&((_=r.comment)==null?void 0:_.user_id)===r.currentUser.id}),oe=H(()=>{var _;return r.currentUser&&((_=r.comment)==null?void 0:_.user_id)===r.currentUser.id||r.currentUser&&r.currentUser.is_admin===1}),J=H(()=>{var _,F,Oe;return((_=r.comment)==null?void 0:_.updated_at)&&((F=r.comment)==null?void 0:F.updated_at)!==((Oe=r.comment)==null?void 0:Oe.created_at)}),Y=H(()=>{var _,F;return(_=r.comment)!=null&&_.is_deleted?!1:(((F=r.comment)==null?void 0:F.rating)||0)<=-3}),le=H(()=>Y.value),pe=v(!1),ve=H(()=>{var _,F;return(_=r.comment)!=null&&_.is_deleted?null:(((F=r.comment)==null?void 0:F.rating)||0)<=-3?"lowRating":null}),me=()=>{var _,F;t("start-edit",(_=r.comment)==null?void 0:_.id),M.value=((F=r.comment)==null?void 0:F.content)||"",Ue(()=>{y.value&&(y.value.focus(),ye({target:y.value}))})},Te=()=>{var _;t("cancel-edit"),M.value=((_=r.comment)==null?void 0:_.content)||""},ge=()=>{var _;M.value.trim()&&t("edit",(_=r.comment)==null?void 0:_.id,M.value.trim())},Ne=()=>{var _;confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π?")&&t("delete",(_=r.comment)==null?void 0:_.id)},ie=_=>{var F,Oe;E.value===_?(E.value=0,t("rate",(F=r.comment)==null?void 0:F.id,_)):(E.value=_,t("rate",(Oe=r.comment)==null?void 0:Oe.id,_))},Re=_=>{_.key==="Enter"&&!_.shiftKey&&(_.preventDefault(),ge())},Pe=H(()=>{var _;return Ve((_=r.comment)==null?void 0:_.content)}),Ce=()=>{console.log("Avatar load error, falling back to initials"),g.value=null,Ue(()=>{const _=document.querySelector(".avatar-placeholder");_&&(_.style.display="flex")})},_e=()=>{u.push("/login")},De=_=>{W(_,y,M,F=>{M.value=F})},nt=_=>{K(_,y,M,F=>{M.value=F})},Je=()=>{we(y,M,_=>{M.value=_})},ut=()=>{P(y,M,_=>{M.value=_})},We=_=>{Le(_,y,M,F=>{M.value=F})},Se=_=>{ye(_)};return Ke(M,()=>{n.value&&y.value&&Ue(()=>{Se({target:y.value})})}),{isEditing:n,editContent:M,userRating:E,isCommentOwner:D,canDeleteComment:oe,isCommentEdited:J,formatDate:Mn,formatRelativeTime:Gn,startEdit:me,cancelEdit:Te,saveEdit:ge,confirmDelete:Ne,rateComment:ie,avatarUrl:g,getInitials:sl,handleEditKeydown:Re,isCommentHidden:le,showHiddenComment:pe,hiddenCommentReason:ve,formattedContent:Pe,autoResizeEdit:Se,editTextarea:y,showEmojiPicker:L,showImagePicker:I,insertEmojiEdit:De,insertImageEdit:nt,insertSpoilerEdit:Je,insertLinkEdit:ut,handleEmojiMouseEnter:C,handleEmojiMouseLeave:h,handleImageMouseEnter:U,handleImageMouseLeave:A,closeEmojiPicker:T,closeImagePicker:j,handleButtonMouseEnter:x,handleButtonMouseLeave:b,handleImageButtonMouseEnter:R,handleAvatarError:Ce,openLogin:_e,showLinkModal:o,selectedTextForLink:d,insertLinkFromModal:We,closeLinkModal:Z}}},il=["data-comment-id"],al={class:"comment-header"},rl={class:"user-info"},ul={class:"user-avatar"},dl=["src","alt"],cl={class:"user-details"},vl={class:"username"},ml={key:0,class:"user-rating"},fl=["title"],gl=["title"],kl={class:"comment-content"},yl={key:0,class:"hidden-comment-warning"},pl={key:1},hl={key:0,class:"deleted-comment"},bl={key:1},wl={key:0,class:"edit-form"},Cl={class:"edit-textarea-container"},_l={class:"edit-footer"},Ml={class:"edit-actions"},El=["disabled"],Ll={class:"character-counter-container"},Il={key:1,class:"comment-text-container"},Tl=["innerHTML"],Rl={class:"comment-footer"},Pl={class:"comment-actions"},Sl={class:"rating-buttons"},Al={class:"action-buttons"};function xl(r,t,u,n,M,E){var o,d,C,h,U,A,x,R,b,T,j,Z,W,K,P,Le,we,ye,Ve;const g=Ie("router-link"),y=Ie("EmojiPicker"),L=Ie("ImagePicker"),I=Ie("LinkModal");return i(),a("div",{class:"comment-item","data-comment-id":(o=u.comment)==null?void 0:o.id},[e("div",al,[e("div",rl,[ce(g,{to:{path:"/lists/".concat((d=u.comment)==null?void 0:d.user_id)},target:"_blank",rel:"noopener noreferrer",class:"user-avatar-link"},{default:jt(()=>{var D,oe;return[e("div",ul,[n.avatarUrl?(i(),a("img",{key:0,src:n.avatarUrl,alt:((D=u.comment)==null?void 0:D.username)||"–ê–Ω–æ–Ω–∏–º",onError:t[0]||(t[0]=(...J)=>n.handleAvatarError&&n.handleAvatarError(...J)),onerror:"this.onerror=null; this.style.display='none'; this.nextElementSibling.style.display='flex';"},null,40,dl)):(i(),a("div",{key:1,class:"avatar-placeholder",style:ct({display:n.avatarUrl?"none":"flex"})},k(n.getInitials(((oe=u.comment)==null?void 0:oe.username)||"–ê–Ω–æ–Ω–∏–º")),5))])]}),_:1},8,["to"]),e("div",cl,[ce(g,{to:{path:"/lists/".concat((C=u.comment)==null?void 0:C.user_id)},target:"_blank",rel:"noopener noreferrer",class:"username-link"},{default:jt(()=>{var D;return[e("span",vl,k(((D=u.comment)==null?void 0:D.username)||"–ê–Ω–æ–Ω–∏–º"),1)]}),_:1},8,["to"]),(h=u.comment)!=null&&h.user_movie_rating?(i(),a("span",ml,[t[18]||(t[18]=e("i",{class:"fas fa-star"},null,-1)),X(" "+k(u.comment.user_movie_rating),1)])):p("",!0),e("span",{class:"date",title:n.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((U=u.comment)==null?void 0:U.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(n.formatDate((A=u.comment)==null?void 0:A.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((x=u.comment)==null?void 0:x.created_at))},[X(k(n.formatRelativeTime((R=u.comment)==null?void 0:R.created_at))+" ",1),n.isCommentEdited?(i(),a("i",{key:0,class:"fas fa-pencil-alt edit-icon",title:n.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((b=u.comment)==null?void 0:b.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(n.formatDate((T=u.comment)==null?void 0:T.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(n.formatDate((j=u.comment)==null?void 0:j.created_at))},null,8,gl)):p("",!0)],8,fl)])])]),e("div",kl,[!((Z=u.comment)!=null&&Z.is_deleted)&&n.isCommentHidden&&!n.showHiddenComment?(i(),a("div",yl,[n.hiddenCommentReason==="lowRating"?(i(),a("p",{key:0,class:"warning-text",onClick:t[1]||(t[1]=D=>n.showHiddenComment=!0)},t[19]||(t[19]=[e("i",{class:"fas fa-eye-slash"},null,-1),X(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–∫—Ä—ã—Ç –∏–∑-–∑–∞ –Ω–∏–∑–∫–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å. ")]))):p("",!0)])):(i(),a("div",pl,[(W=u.comment)!=null&&W.is_deleted?(i(),a("div",hl,t[20]||(t[20]=[e("p",{class:"deleted-message"},[e("i",{class:"fas fa-trash"}),X(" –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —É–¥–∞–ª—ë–Ω ")],-1)]))):(i(),a("div",bl,[n.isEditing?(i(),a("div",wl,[e("div",Cl,[te(e("textarea",{ref:"editTextarea","onUpdate:modelValue":t[2]||(t[2]=D=>n.editContent=D),class:"edit-textarea",rows:"3",maxlength:"1500",onKeydown:t[3]||(t[3]=(...D)=>n.handleEditKeydown&&n.handleEditKeydown(...D)),onInput:t[4]||(t[4]=(...D)=>n.autoResizeEdit&&n.autoResizeEdit(...D))},null,544),[[vt,n.editContent]])]),e("div",_l,[e("div",Ml,[e("button",{onClick:t[5]||(t[5]=(...D)=>n.cancelEdit&&n.cancelEdit(...D)),class:"cancel-button"},"–û—Ç–º–µ–Ω–∞"),e("button",{onClick:t[6]||(t[6]=(...D)=>n.saveEdit&&n.saveEdit(...D)),class:"save-button",disabled:!n.editContent.trim()||n.editContent.length>1500}," –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ",8,El)]),e("div",Ll,[e("div",{class:w(["character-counter-inline",{"near-limit":n.editContent.length>1400,"at-limit":n.editContent.length>=1500}])},k(n.editContent.length)+"/1500 ",3),e("button",{type:"button",class:w(["emoji-button-inline",{active:n.showEmojiPicker}]),onMouseenter:t[7]||(t[7]=(...D)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...D)),onMouseleave:t[8]||(t[8]=(...D)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...D))}," üòä ",34),e("button",{type:"button",class:w(["emoji-button-inline",{active:n.showImagePicker}]),onMouseenter:t[9]||(t[9]=(...D)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...D)),onMouseleave:t[10]||(t[10]=(...D)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...D))},t[21]||(t[21]=[Ct('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-f1c85dfc><g id="logo" data-v-f1c85dfc><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-f1c85dfc></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-f1c85dfc></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-f1c85dfc></path></g></svg>',1)]),34),e("button",{type:"button",class:"emoji-button-inline spoiler-button",onClick:t[11]||(t[11]=(...D)=>n.insertSpoilerEdit&&n.insertSpoilerEdit(...D)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},t[22]||(t[22]=[e("i",{class:"fas fa-eye-slash"},null,-1)])),e("button",{type:"button",class:"emoji-button-inline link-button",onClick:t[12]||(t[12]=(...D)=>n.insertLinkEdit&&n.insertLinkEdit(...D)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},t[23]||(t[23]=[e("i",{class:"fas fa-link"},null,-1)])),ce(y,{"is-visible":n.showEmojiPicker,onEmojiSelected:n.insertEmojiEdit,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),ce(L,{"is-visible":n.showImagePicker,"current-user":u.currentUser,onImageSelected:n.insertImageEdit,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:n.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),ce(I,{"is-visible":n.showLinkModal,"selected-text":n.selectedTextForLink,onClose:n.closeLinkModal,onSubmit:n.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):(i(),a("div",Il,[e("p",{class:"comment-text",innerHTML:n.formattedContent},null,8,Tl)]))]))]))]),e("div",Rl,[e("div",Pl,[e("div",Sl,[!n.isCommentOwner&&!((K=u.comment)!=null&&K.is_deleted)?(i(),a("button",{key:0,onClick:t[13]||(t[13]=D=>n.rateComment(1)),class:w(["rating-button",{"rated-up":n.userRating===1}])},t[24]||(t[24]=[e("i",{class:"fas fa-thumbs-up"},null,-1)]),2)):p("",!0),e("span",{class:w(["rating-count",{"rating-positive":n.userRating===1,"rating-negative":n.userRating===-1}])},k(((P=u.comment)==null?void 0:P.rating)||0),3),!n.isCommentOwner&&!((Le=u.comment)!=null&&Le.is_deleted)?(i(),a("button",{key:1,onClick:t[14]||(t[14]=D=>n.rateComment(-1)),class:w(["rating-button",{"rated-down":n.userRating===-1}])},t[25]||(t[25]=[e("i",{class:"fas fa-thumbs-down"},null,-1)]),2)):p("",!0)]),e("div",Al,[!u.currentUser||u.currentUser.allow_comments===1?(i(),a("button",{key:0,onClick:t[15]||(t[15]=D=>r.$emit("reply",u.comment)),class:"action-button reply-button"},t[26]||(t[26]=[e("i",{class:"fas fa-reply"},null,-1)]))):p("",!0),n.isCommentOwner&&!((we=u.comment)!=null&&we.is_deleted)&&!n.isEditing&&((ye=u.currentUser)==null?void 0:ye.allow_comments)===1?(i(),a("button",{key:1,onClick:t[16]||(t[16]=(...D)=>n.startEdit&&n.startEdit(...D)),class:"action-button edit-button"},t[27]||(t[27]=[e("i",{class:"fas fa-edit"},null,-1)]))):p("",!0),n.canDeleteComment&&!((Ve=u.comment)!=null&&Ve.is_deleted)?(i(),a("button",{key:2,onClick:t[17]||(t[17]=(...D)=>n.confirmDelete&&n.confirmDelete(...D)),class:"action-button delete-button"},t[28]||(t[28]=[e("i",{class:"fas fa-trash"},null,-1)]))):p("",!0)])])])],8,il)}const jl=ze(ll,[["render",xl],["__scopeId","data-v-f1c85dfc"]]),Ul={name:"CommentThread",components:{CommentItem:jl,EmojiPicker:Bt,ImagePicker:$t,LinkModal:Dt},props:{comment:{type:Object,required:!0},currentUser:{type:Object,required:!0},replyTo:{type:Object,default:null},replyContent:{type:String,default:""},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate","submit-reply","cancel-reply","update-reply-content","reply-keydown"],setup(r,{emit:t}){const u=v(null),n=v(!0),{showEmojiPicker:M,showImagePicker:E,showLinkModal:g,selectedTextForLink:y,handleEmojiMouseEnter:L,handleEmojiMouseLeave:I,handleImageMouseEnter:o,handleImageMouseLeave:d,handleButtonMouseEnter:C,handleImageButtonMouseEnter:h,handleButtonMouseLeave:U,closeEmojiPicker:A,closeImagePicker:x,closeLinkModal:R,insertEmojiUniversal:b,insertImageUniversal:T,insertLinkUniversal:j,insertLinkFromModalUniversal:Z,insertSpoilerUniversal:W}=Ht(),K=J=>{t("update-reply-content",J.target.value);const Y=J.target;Y&&(Y.style.height="auto",Y.style.height="".concat(Math.min(Y.scrollHeight,200),"px"))},P={get value(){return r.replyContent},set value(J){t("update-reply-content",J)}};return{replyTextarea:u,showEmojiPicker:M,showImagePicker:E,isCollapsed:n,insertEmoji:J=>{b(J,u,P,Y=>{t("update-reply-content",Y)})},insertImage:J=>{T(J,u,P,Y=>{t("update-reply-content",Y)})},insertSpoiler:()=>{W(u,P,J=>{t("update-reply-content",J)})},handleEmojiMouseEnter:L,handleEmojiMouseLeave:I,handleImageMouseEnter:o,handleImageMouseLeave:d,handleButtonMouseEnter:C,handleButtonMouseLeave:U,closeEmojiPicker:A,closeImagePicker:x,handleImageButtonMouseEnter:h,handleReplyInput:K,toggleCollapsed:()=>{n.value=!n.value},showLinkModal:g,selectedTextForLink:y,insertLink:()=>{j(u,P,J=>{t("update-reply-content",J)})},closeLinkModal:R,insertLinkFromModal:J=>{Z(J,u,P,Y=>{t("update-reply-content",Y)})}}},computed:{canReply(){return this.currentUser?this.currentUser.allow_comments===1:!0},getReplyPlaceholder(){return this.currentUser?this.currentUser.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç..."},formattedContent(){const{formatContent:r}=_n();return r(this.comment.content)}}},Nl={class:"comment-thread"},Bl={key:0,class:"reply-form"},$l={class:"textarea-container"},Dl=["value","placeholder","disabled"],Hl={class:"reply-footer"},Vl={class:"reply-actions"},Ol=["disabled"],Fl={class:"character-counter-container"},ql=["disabled"],Kl={key:1,class:"replies-container"},zl=["title"],Wl={class:"replies-count"},Gl=["title"],Yl={key:0,class:"replies-content"};function Xl(r,t,u,n,M,E){const g=Ie("CommentItem"),y=Ie("EmojiPicker"),L=Ie("ImagePicker"),I=Ie("LinkModal"),o=Ie("CommentThread",!0);return i(),a("div",Nl,[ce(g,{comment:u.comment,"current-user":u.currentUser,"editing-comment-id":u.editingCommentId,onReply:t[0]||(t[0]=d=>r.$emit("reply",d)),onStartEdit:t[1]||(t[1]=d=>r.$emit("start-edit",d)),onCancelEdit:t[2]||(t[2]=d=>r.$emit("cancel-edit")),onEdit:t[3]||(t[3]=(d,C)=>r.$emit("edit",d,C)),onDelete:t[4]||(t[4]=d=>r.$emit("delete",d)),onRate:t[5]||(t[5]=(d,C)=>r.$emit("rate",d,C))},null,8,["comment","current-user","editing-comment-id"]),u.replyTo&&u.replyTo.id===u.comment.id?(i(),a("div",Bl,[e("div",$l,[e("textarea",{ref:"replyTextarea",class:"comment-textarea",value:u.replyContent,placeholder:E.getReplyPlaceholder,disabled:u.currentUser&&u.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:t[6]||(t[6]=(...d)=>n.handleReplyInput&&n.handleReplyInput(...d)),onKeydown:t[7]||(t[7]=d=>r.$emit("reply-keydown",d))},null,40,Dl)]),e("div",Hl,[e("div",Vl,[e("button",{class:"cancel-reply",onClick:t[8]||(t[8]=d=>r.$emit("cancel-reply"))},"–û—Ç–º–µ–Ω–∞"),e("button",{class:"submit-button",disabled:!u.replyContent.trim()||u.replyContent.length>1500||u.currentUser&&u.currentUser.allow_comments!==1,onClick:t[9]||(t[9]=d=>r.$emit("submit-reply"))}," –û—Ç–≤–µ—Ç–∏—Ç—å ",8,Ol)]),e("div",Fl,[e("div",{class:w(["character-counter-inline",{"near-limit":u.replyContent.length>1400,"at-limit":u.replyContent.length>=1500}])},k(u.replyContent.length)+"/1500 ",3),e("button",{type:"button",class:w(["emoji-button-inline",{active:n.showEmojiPicker}]),onMouseenter:t[10]||(t[10]=(...d)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...d)),onMouseleave:t[11]||(t[11]=(...d)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...d))}," üòä ",34),e("button",{type:"button",class:w(["emoji-button-inline",{active:n.showImagePicker}]),onMouseenter:t[12]||(t[12]=(...d)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...d)),onMouseleave:t[13]||(t[13]=(...d)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...d))},t[29]||(t[29]=[Ct('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-6c0fc347><g id="logo" data-v-6c0fc347><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-6c0fc347></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-6c0fc347></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-6c0fc347></path></g></svg>',1)]),34),e("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:u.currentUser&&u.currentUser.allow_comments!==1,onClick:t[14]||(t[14]=(...d)=>n.insertSpoiler&&n.insertSpoiler(...d)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},t[30]||(t[30]=[e("i",{class:"fas fa-eye-slash"},null,-1)]),8,ql),e("button",{type:"button",class:"emoji-button-inline link-button",onClick:t[15]||(t[15]=(...d)=>n.insertLink&&n.insertLink(...d)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},t[31]||(t[31]=[e("i",{class:"fas fa-link"},null,-1)])),ce(y,{"is-visible":n.showEmojiPicker,onEmojiSelected:n.insertEmoji,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),ce(L,{"is-visible":n.showImagePicker,"current-user":u.currentUser,onImageSelected:n.insertImage,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:t[16]||(t[16]=()=>r.$router.push("/login"))},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose"]),ce(I,{"is-visible":n.showLinkModal,"selected-text":n.selectedTextForLink,onClose:n.closeLinkModal,onSubmit:n.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):p("",!0),u.comment.replies&&u.comment.replies.length>0?(i(),a("div",Kl,[e("button",{class:"collapse-toggle",title:n.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:t[17]||(t[17]=(...d)=>n.toggleCollapsed&&n.toggleCollapsed(...d))},[e("span",{class:w(["collapse-icon",{expanded:!n.isCollapsed}])},t[32]||(t[32]=[e("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},[e("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1)]),2),e("span",Wl,k(u.comment.replies.length)+" "+k(u.comment.replies.length===1?"–æ—Ç–≤–µ—Ç":"–æ—Ç–≤–µ—Ç–æ–≤"),1)],8,zl),e("div",{class:"vertical-line-clickable",title:n.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:t[18]||(t[18]=(...d)=>n.toggleCollapsed&&n.toggleCollapsed(...d))},[e("div",{class:w(["vertical-line-visual",{collapsed:n.isCollapsed}])},null,2)],8,Gl),n.isCollapsed?p("",!0):(i(),a("div",Yl,[(i(!0),a(se,null,be(u.comment.replies,d=>(i(),Ze(o,{key:d.id,comment:d,"current-user":u.currentUser,"reply-to":u.replyTo,"reply-content":u.replyContent,"editing-comment-id":u.editingCommentId,onReply:t[19]||(t[19]=C=>r.$emit("reply",C)),onStartEdit:t[20]||(t[20]=C=>r.$emit("start-edit",C)),onCancelEdit:t[21]||(t[21]=C=>r.$emit("cancel-edit")),onEdit:t[22]||(t[22]=(C,h)=>r.$emit("edit",C,h)),onDelete:t[23]||(t[23]=C=>r.$emit("delete",C)),onRate:t[24]||(t[24]=(C,h)=>r.$emit("rate",C,h)),onSubmitReply:t[25]||(t[25]=C=>r.$emit("submit-reply")),onCancelReply:t[26]||(t[26]=C=>r.$emit("cancel-reply")),onUpdateReplyContent:t[27]||(t[27]=C=>r.$emit("update-reply-content",C)),onReplyKeydown:t[28]||(t[28]=C=>r.$emit("reply-keydown",C))},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id"]))),128))]))])):p("",!0)])}const Zl=ze(Ul,[["render",Xl],["__scopeId","data-v-6c0fc347"]]),Ql={name:"Comments",components:{CommentThread:Zl,Notification:It,EmojiPicker:Bt,ImagePicker:$t,LinkModal:Dt},props:{movieId:{type:[String,Number],required:!0}},setup(r){const t=Ut(),u=Mt(),n=_t(),M=v([]),E=v(""),g=v(null),y=v(""),L=v(null),I=v(t.user),o=v(null),d=v(null),C=v(n.isAutoShowComments),h=v(!1),U=v(3),A=v(n.commentsSortBy),{showEmojiPicker:x,showImagePicker:R,showLinkModal:b,selectedTextForLink:T,handleEmojiMouseEnter:j,handleEmojiMouseLeave:Z,handleImageMouseEnter:W,handleImageMouseLeave:K,handleButtonMouseEnter:P,handleImageButtonMouseEnter:Le,handleButtonMouseLeave:we,closeEmojiPicker:ye,closeImagePicker:Ve,closeLinkModal:D,insertEmojiUniversal:oe,insertImageUniversal:J,insertLinkUniversal:Y,insertLinkFromModalUniversal:le,insertSpoilerUniversal:pe,autoResize:ve}=Ht(),me=H(()=>{const N=(G=null)=>{const ue=M.value.filter(ee=>ee.parent_id===G).filter(ee=>!ee.is_deleted||ee.replies&&ee.replies.length>0);let ae;return G===null?ae=ue.sort((ee,fe)=>{if(A.value==="rating"){const ne=(fe.rating||0)-(ee.rating||0);return ne!==0?ne:ee.id-fe.id}return ee.id-fe.id}):ae=ue.sort((ee,fe)=>ee.id-fe.id),ae.map(ee=>({...ee,replies:N(ee.id)}))};return N()}),Te=H(()=>{const N=G=>G.reduce((ue,ae)=>ue+1+N(ae.replies||[]),0);return N(me.value)}),ge=H(()=>me.value.slice(0,U.value)),Ne=H(()=>me.value.length>U.value),ie=H(()=>me.value.length-U.value),Re=()=>{U.value=me.value.length},Pe=N=>{A.value!==N&&(A.value=N,n.setCommentsSortBy(N))},Ce=async()=>{try{const N=await Sn(r.movieId);M.value=N}catch(N){console.error("Failed to load comments:",N),o.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.")}},_e=async()=>{if(h.value)return;if(!t.token){o.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Me});return}if(I.value&&I.value.allow_comments!==1){o.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!E.value.replace(/\[spoiler\]\s*\[\/spoiler\]/g,"").replace(/\[img\]\s*\[\/img\]/g,"").replace(/\[link=[^\]]+\]\s*\[\/link\]/g,"").trim()){o.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º");return}if(E.value.length>1500){o.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await fn(r.movieId,E.value.trim()),E.value="",await Ce(),C.value=!0,Ue(()=>{d.value&&(d.value.focus(),d.value.style.height="auto"),setTimeout(()=>{const G=document.querySelectorAll(".comment-item[data-comment-id]");if(G.length>0){const ue=Array.from(G).map(ae=>parseInt(ae.getAttribute("data-comment-id"))).filter(ae=>!isNaN(ae));if(ue.length>0){const ae=Math.max(...ue),ee=document.querySelector('[data-comment-id="'.concat(ae,'"]'));ee&&ee.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}},300)})}catch(G){console.error("Failed to create comment:",G),o.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},De=N=>{if(!t.token){o.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Me});return}L.value=null,g.value=N,y.value="",Ue(()=>{const G=document.querySelector(".reply-form");G&&G.scrollIntoView({behavior:"smooth",block:"center"})})},nt=async()=>{if(!t.token){o.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Me});return}if(I.value&&I.value.allow_comments!==1){o.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!(!y.value.trim()||!g.value)){if(y.value.length>1500){o.value.showNotification("–û—Ç–≤–µ—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await fn(r.movieId,y.value.trim(),g.value.id);const N=g.value.id;await Ce(),y.value="",g.value=null,Ue(()=>{setTimeout(()=>{const G=document.querySelector('[data-comment-id="'.concat(N,'"]'));if(G){const ue=G.querySelector(".replies-content");if(ue){const ae=ue.querySelectorAll(".comment-item[data-comment-id]");if(ae.length>0){const ee=Array.from(ae).map(fe=>parseInt(fe.getAttribute("data-comment-id"))).filter(fe=>!isNaN(fe));if(ee.length>0){const fe=Math.max(...ee),ne=document.querySelector('[data-comment-id="'.concat(fe,'"]'));ne&&ne.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}}}},300)})}catch(N){console.error("Error submitting reply:",N),o.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}}},Je=async(N,G)=>{if(!t.token){o.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Me});return}if(I.value&&I.value.allow_comments!==1){o.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(G.length>1500){o.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await jn(N,G.trim()),await Ce(),L.value=null}catch(ue){console.error("Failed to update comment:",ue),o.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},ut=async N=>{if(!t.token){o.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Me});return}try{await xn(N),await Ce()}catch(G){console.error("Failed to delete comment:",G),o.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},We=async(N,G)=>{if(!t.token){o.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:Me});return}try{await An(N,G),await Ce()}catch(ue){console.error("Failed to rate comment:",ue),o.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ü–µ–Ω–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},Se=N=>{h.value||x.value||N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),_e())},et=N=>{N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),nt())},Me=()=>{u.push("/login")},_=N=>{h.value=!0,oe(N,d,E,G=>{E.value=G}),setTimeout(()=>{h.value=!1},100)},F=N=>{J(N,d,E,G=>{E.value=G})},Oe=()=>{pe(d,E,N=>{E.value=N})},ft=()=>{Y(d,E,N=>{E.value=N})},yt=N=>{le(N,d,E,G=>{E.value=G})},ot=H(()=>I.value?I.value.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."),Fe=H(()=>I.value?I.value.allow_comments===1:!0),tt=N=>{g.value=null,y.value="",L.value=N},dt=()=>{L.value=null};return mt(()=>{Ce()}),{comments:M,groupedComments:me,displayedComments:ge,hasMoreComments:Ne,remainingCommentsCount:ie,showMoreComments:Re,sortBy:A,setSortBy:Pe,newComment:E,replyTo:g,replyContent:y,editingCommentId:L,currentUser:I,notificationRef:o,commentTextarea:d,showComments:C,submitComment:_e,handleReply:De,submitReply:nt,handleEdit:Je,handleDelete:ut,handleRate:We,handleCommentKeydown:Se,handleReplyKeydown:et,autoResize:ve,totalCommentsCount:Te,getCommentWordForm:ol,showEmojiPicker:x,showImagePicker:R,showLinkModal:b,selectedTextForLink:T,insertEmoji:_,insertImage:F,handleEmojiMouseEnter:j,handleEmojiMouseLeave:Z,handleImageMouseEnter:W,handleImageMouseLeave:K,closeEmojiPicker:ye,closeImagePicker:Ve,handleButtonMouseLeave:we,handleButtonMouseEnter:P,handleImageButtonMouseEnter:Le,getCommentPlaceholder:ot,canComment:Fe,handleStartEdit:tt,handleCancelEdit:dt,insertSpoiler:Oe,insertLink:ft,insertLinkFromModal:yt,closeLinkModal:D}}},Jl={class:"comments-section"},ei={class:"spoiler-content"},ti={key:1,class:"comments-container"},ni={class:"comments-header"},oi={class:"comments-controls"},si={class:"textarea-container"},li=["placeholder","disabled"],ii={class:"comment-footer"},ai={class:"comment-actions"},ri=["disabled"],ui={class:"character-counter-container"},di=["disabled"],ci=["disabled"],vi=["disabled"],mi={class:"comments-list"},fi={key:0,class:"show-more-comments"};function gi(r,t,u,n,M,E){const g=Ie("EmojiPicker"),y=Ie("ImagePicker"),L=Ie("LinkModal"),I=Ie("CommentThread"),o=Ie("Notification");return i(),a("div",Jl,[n.showComments?(i(),a("div",ti,[e("div",ni,[e("div",oi,[e("button",{class:w(["sort-button",{active:n.sortBy==="date"}]),onClick:t[1]||(t[1]=d=>n.setSortBy("date")),title:"–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –¥–∞—Ç–µ"},t[20]||(t[20]=[e("i",{class:"fas fa-clock"},null,-1),X(" –ü–æ –¥–∞—Ç–µ ")]),2),e("button",{class:w(["sort-button",{active:n.sortBy==="rating"}]),onClick:t[2]||(t[2]=d=>n.setSortBy("rating")),title:"–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É"},t[21]||(t[21]=[e("i",{class:"fas fa-thumbs-up"},null,-1),X(" –ü–æ —Ä–µ–π—Ç–∏–Ω–≥—É ")]),2)]),e("button",{class:"hide-comments-btn",onClick:t[3]||(t[3]=d=>n.showComments=!1)},t[22]||(t[22]=[e("i",{class:"fas fa-eye-slash"},null,-1),X(" –°–∫—Ä—ã—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ")]))]),e("form",{class:"comment-form",onSubmit:t[13]||(t[13]=Qe((...d)=>n.submitComment&&n.submitComment(...d),["prevent"]))},[e("div",si,[te(e("textarea",{ref:"commentTextarea","onUpdate:modelValue":t[4]||(t[4]=d=>n.newComment=d),class:"comment-textarea",placeholder:n.getCommentPlaceholder,disabled:n.currentUser&&n.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:t[5]||(t[5]=(...d)=>n.autoResize&&n.autoResize(...d)),onKeydown:t[6]||(t[6]=(...d)=>n.handleCommentKeydown&&n.handleCommentKeydown(...d))},null,40,li),[[vt,n.newComment]])]),e("div",ii,[e("div",ai,[e("button",{class:"submit-button",type:"submit",disabled:!n.newComment.trim()||n.newComment.length>1500||n.currentUser&&n.currentUser.allow_comments!==1}," –û—Ç–ø—Ä–∞–≤–∏—Ç—å ",8,ri)]),e("div",ui,[e("div",{class:w(["character-counter-inline",{"near-limit":n.newComment.length>1400,"at-limit":n.newComment.length>=1500}])},k(n.newComment.length)+"/1500 ",3),e("button",{type:"button",class:w(["emoji-button-inline",{active:n.showEmojiPicker}]),disabled:n.currentUser&&n.currentUser.allow_comments!==1,onMouseenter:t[7]||(t[7]=(...d)=>n.handleButtonMouseEnter&&n.handleButtonMouseEnter(...d)),onMouseleave:t[8]||(t[8]=(...d)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...d))}," üòä ",42,di),e("button",{type:"button",class:w(["emoji-button-inline",{active:n.showImagePicker}]),disabled:n.currentUser&&n.currentUser.allow_comments!==1,onMouseenter:t[9]||(t[9]=(...d)=>n.handleImageButtonMouseEnter&&n.handleImageButtonMouseEnter(...d)),onMouseleave:t[10]||(t[10]=(...d)=>n.handleButtonMouseLeave&&n.handleButtonMouseLeave(...d))},t[23]||(t[23]=[Ct('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-9b0321d8><g id="logo" data-v-9b0321d8><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-9b0321d8></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-9b0321d8></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-9b0321d8></path></g></svg>',1)]),42,ci),e("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:n.currentUser&&n.currentUser.allow_comments!==1,onClick:t[11]||(t[11]=(...d)=>n.insertSpoiler&&n.insertSpoiler(...d)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä"},t[24]||(t[24]=[e("i",{class:"fas fa-eye-slash"},null,-1)]),8,vi),e("button",{type:"button",class:"emoji-button-inline link-button",onClick:t[12]||(t[12]=(...d)=>n.insertLink&&n.insertLink(...d)),title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"},t[25]||(t[25]=[e("i",{class:"fas fa-link"},null,-1)])),ce(g,{"is-visible":n.showEmojiPicker&&n.canComment,onEmojiSelected:n.insertEmoji,onMouseEnter:n.handleEmojiMouseEnter,onMouseLeave:n.handleEmojiMouseLeave,onClose:n.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),ce(y,{"is-visible":n.showImagePicker&&n.canComment,"current-user":n.currentUser,onImageSelected:n.insertImage,onMouseEnter:n.handleImageMouseEnter,onMouseLeave:n.handleImageMouseLeave,onClose:n.closeImagePicker,onLoginRequired:r.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),ce(L,{"is-visible":n.showLinkModal,"selected-text":n.selectedTextForLink,onClose:n.closeLinkModal,onSubmit:n.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])],32),e("div",mi,[(i(!0),a(se,null,be(n.displayedComments,d=>(i(),Ze(I,{key:d.id,comment:d,"current-user":n.currentUser,"reply-to":n.replyTo,"reply-content":n.replyContent,"editing-comment-id":n.editingCommentId,"is-first-comment":!1,onReply:n.handleReply,onStartEdit:n.handleStartEdit,onCancelEdit:n.handleCancelEdit,onEdit:n.handleEdit,onDelete:n.handleDelete,onRate:n.handleRate,onSubmitReply:n.submitReply,onCancelReply:t[14]||(t[14]=C=>n.replyTo=null),onUpdateReplyContent:t[15]||(t[15]=C=>n.replyContent=C),onReplyKeydown:n.handleReplyKeydown},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id","onReply","onStartEdit","onCancelEdit","onEdit","onDelete","onRate","onSubmitReply","onReplyKeydown"]))),128)),n.hasMoreComments?(i(),a("div",fi,[e("button",{class:"show-more-btn",onClick:t[16]||(t[16]=(...d)=>n.showMoreComments&&n.showMoreComments(...d))}," –ü–æ–∫–∞–∑–∞—Ç—å –µ—â–µ "+k(n.remainingCommentsCount)+" "+k(n.getCommentWordForm(n.remainingCommentsCount)),1)])):p("",!0)])])):(i(),a("div",{key:0,class:"spoiler-warning",onClick:t[0]||(t[0]=d=>n.showComments=!0)},[e("div",ei,[t[17]||(t[17]=e("i",{class:"fas fa-eye-slash"},null,-1)),t[18]||(t[18]=e("h3",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–∫—Ä—ã—Ç—ã",-1)),t[19]||(t[19]=e("p",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä—ã. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å.",-1)),e("div",{class:w(["comments-count",{"no-comments":n.totalCommentsCount===0}])},[n.totalCommentsCount===0?(i(),a(se,{key:0},[X(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç ")],64)):(i(),a(se,{key:1},[X(k(n.totalCommentsCount)+" "+k(n.getCommentWordForm(n.totalCommentsCount)),1)],64))],2)])])),ce(o,{ref:"notificationRef"},null,512)])}const ki=ze(Ql,[["render",gi],["__scopeId","data-v-9b0321d8"]]),yi={class:"movie-info"},pi={class:"content"},hi={key:0,class:"content-card"},bi={class:"movie-skeleton"},wi={class:"movie-skeleton__player"},Ci={key:2,class:"content-card"},_i={key:3,class:"content-card"},Mi={class:"content-header"},Ei=["src"],Li={class:"content-title"},Ii={key:0,class:"ratings-links"},Ti={key:1},Ri=["href","title"],Pi={key:2},Si=["href","title"],Ai={key:3},xi=["href","title"],ji={key:4},Ui=["href","title"],Ni={key:5},Bi=["href"],$i=["title"],Di={key:0,class:"fa-regular fa-face-grin-wink"},Hi={key:1,class:"fas fa-spinner fa-spin"},Vi=["title"],Oi={key:1,class:"mobile-list-dropdown"},Fi={class:"mobile-list-content"},qi=["content"],Ki=["content"],zi={class:"additional-info"},Wi={class:"info-content"},Gi={key:0,class:"movie-poster-container desktop-only"},Yi=["href"],Xi=["src"],Zi={class:"details-container"},Qi={class:"info-list"},Ji={key:0},ea={key:1},ta={key:2},na={key:3},oa={key:4},sa={key:5},la={key:6},ia={key:7},aa={key:8},ra={key:9,class:"rating-boxes"},ua={key:0,class:"rating-box mpaa"},da={key:1,class:"rating-box age"},ca={class:"content-info"},va={key:0,class:"content-description-text"},ma={key:3,class:"comments-section"},fa={key:4,class:"staff-section"},ga={class:"staff-categories"},ka={key:0,class:"staff-category"},ya={class:"staff-list"},pa=["href","title"],ha=["src","alt"],ba={class:"staff-name"},wa={key:0,class:"staff-role"},Ca=["href","title"],_a={key:1,class:"staff-category"},Ma={class:"staff-names-container"},Ea={class:"staff-names-list"},La=["href"],Ia=["href","title"],Ta={key:2,class:"staff-category"},Ra={class:"staff-names-container"},Pa={class:"staff-names-list"},Sa=["href"],Aa=["href","title"],xa={key:5,class:"yt-video-container"},ja={key:6,class:"related-movies"},Ua=["title"],Na={key:7,class:"related-movies"},Ba=["title"],$a={class:"nudity-info-content"},Da={key:0,class:"nudity-info-loading"},Ha={key:1},Va={class:"nudity-info-actions"},Oa=["href"],Fa={class:"nudity-info-content"},qa={class:"timings-text"},Ka={key:0,class:"timing-entries"},za={class:"timing-content"},Wa={key:0,class:"pending-badge"},Ga={key:1,class:"clean-text-badge"},Ya={class:"timing-text"},Xa={class:"timing-author"},Za={key:1},Qa={class:"nudity-info-actions"},Ja={key:2,class:"timing-modal"},er={class:"timing-modal-content"},tr={class:"timing-modal-header"},nr={class:"timing-submission-form"},or={class:"timing-form-actions"},sr=["disabled"],lr={key:0,class:"fas fa-spinner fa-spin"},ir={key:1},ar={class:"modal-header"},rr={class:"modal-header-controls"},ur={class:"modal-body"},dr=["disabled"],cr={key:0,class:"fas fa-spinner fa-spin"},vr={key:1,class:"fas fa-list"},mr={class:"top-submitters-list"},fr={class:"submitter-info"},gr={class:"submitter-name"},kr=["href"],yr={class:"submitter-count"},pr={class:"submitter-contribution"},hr={class:"modal-header"},br={class:"modal-body"},wr={key:0,class:"timing-filters"},Cr={key:1,class:"loading-spinner"},_r={key:2,class:"no-timings"},Mr={key:3,class:"no-timings"},Er={key:4,class:"all-timings-list"},Lr={class:"timing-header"},Ir={class:"timing-meta"},Tr={class:"timing-author"},Rr={class:"timing-date"},Pr={class:"timing-movie-info"},Sr={key:0,class:"admin-controls"},Ar=["onClick","disabled"],xr={key:0,class:"fas fa-spinner fa-spin"},jr={key:1,class:"fas fa-check"},Ur=["onClick","disabled"],Nr={key:0,class:"fas fa-spinner fa-spin"},Br={key:1,class:"fas fa-times"},$r=["onClick","disabled"],Dr={key:0,class:"fas fa-spinner fa-spin"},Hr={key:1,class:"fas fa-eye-slash"},Vr={class:"timing-content"},Or={class:"timing-text"},Fr={__name:"MovieInfo",setup(r){const t=v(!0),u=_t(),n=Ut(),M=Un(),E=bn(),g=Mt(),y=v(E.params.kp_id),L=v(""),I=v(null),o=v(null),d=Nn(),C=Zn(),h=v(null),U=C.areTrailersActive,A=v(null),x=v(!1),R=v(!1),b=v(10),T=v(null),j=v(!1),Z=v({}),W=v(null),K=v(!1),P=v(void 0),Le=v({}),we=v(null),ye=H(()=>{var c;return((c=o.value)==null?void 0:c.nudity_timings.length)>0}),Ve=H(()=>{var c;return((c=o.value)==null?void 0:c.nudity_timings.length)>0&&u.isStreamerMode&&!u.isMobile}),D=H(()=>{var c,s,B,re,$e,m,l,S,V,O;return((s=(c=o.value)==null?void 0:c.lists)==null?void 0:s.isFavorite)||((re=(B=o.value)==null?void 0:B.lists)==null?void 0:re.isWatching)||((m=($e=o.value)==null?void 0:$e.lists)==null?void 0:m.isLater)||((S=(l=o.value)==null?void 0:l.lists)==null?void 0:S.isCompleted)||((O=(V=o.value)==null?void 0:V.lists)==null?void 0:O.isAbandoned)}),oe=H(()=>u.isCommentsEnabled),J=()=>{if(o.value){const c=o.value.name_ru||o.value.name_en||o.value.name_original||"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å–º–µ";document.title=c}},Y=c=>c?c.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",le=c=>(c||[]).map(s=>({kp_id:s.film_id,poster:s.poster_url_preview||s.poster_url,title:s.name_ru||s.name_en||s.name_original})),pe=c=>{if(typeof c!="number")return;const s=Math.floor(c/60),B=c%60;return"".concat(s," —á. ").concat(B," –º–∏–Ω.")},ve=v(!1),me=v({top:"0px",left:"0px"}),Te=c=>{ve.value=!0,me.value={top:"".concat(c.pageY+10,"px"),left:"".concat(c.pageX-70,"px")}},ge=async()=>{try{const c=[o.value.name_ru||o.value.name_en||o.value.name_original,...o.value.year?[o.value.year]:[],...o.value.film_length?[pe(o.value.film_length)]:[]];await navigator.clipboard.writeText(c.join(", ")),h.value.showNotification("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ")}catch(c){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",c)}},Ne=async(c=!0)=>{var s,B,re,$e,m,l,S,V;try{let O;if(y.value.startsWith("shiki")?O=await $n(y.value):O=await Dn(y.value,n.token),Array.isArray(O)&&O.length===0)throw new Error("–î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–∏—Å–∫.");o.value=O,y.value.startsWith("shiki")?o.value={...o.value,title:o.value.name_ru||o.value.name_en,name_original:o.value.name_en,short_description:o.value.slogan}:o.value={...o.value,title:o.value.name_ru||o.value.name_en||o.value.name_original,kinopoisk_id:y.value},d.setHeaderContent({text:o.value.title,imageUrl:o.value.logo_url}),J();const z={kp_id:y.value,title:((s=o.value)==null?void 0:s.name_ru)||((B=o.value)==null?void 0:B.name_en)||((re=o.value)==null?void 0:re.name_original),poster:(($e=o.value)==null?void 0:$e.poster_url)||((m=o.value)==null?void 0:m.cover_url)||((l=o.value)==null?void 0:l.screenshots[0]),year:(S=o.value)==null?void 0:S.year,type:(V=o.value)==null?void 0:V.type};if(y.value.startsWith("shiki"))if(o.value.screenshots&&o.value.screenshots.length>0){const ke=Math.floor(Math.random()*o.value.screenshots.length),Ee=o.value.screenshots[ke];M.updateMoviePoster(Ee)}else z.poster&&M.updateMoviePoster(z.poster);else z.poster&&M.updateMoviePoster(z.poster);if(H(()=>u.isHistoryAllowed).value&&z.kp_id&&z.title&&c)if(n.token)try{await xt(z.kp_id,q.HISTORY)}catch(ke){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é:",ke)}else u.addToHistory({...z})}catch(O){const{message:z,code:he}=Xe(O);L.value=z,I.value=he,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–ª—å–º–∞—Ö:",O)}},ie=H(()=>{var c,s;return console.log("–¢—Ä–µ–π–ª–µ—Ä—ã:",(c=o.value)==null?void 0:c.videos),(s=o.value)==null?void 0:s.videos}),Re=H(()=>{var c;return le((c=o.value)==null?void 0:c.sequels_and_prequels)}),Pe=H(()=>{var c;return le((c=o.value)==null?void 0:c.similars)}),Ce=()=>{var re;const c=((re=document.querySelector(".related-movies"))==null?void 0:re.clientWidth)||0,B=Math.floor(c/160)||10;b.value=Math.max(1,B)},_e=()=>{Ce()},De=c=>{if(c.altKey&&c.keyCode===84&&document.querySelector(".player-container")){const B=document.querySelector(".theater-mode-btn");B&&B.click()}},nt=c=>{c.button===1&&(c.preventDefault(),Je(c))},Je=async c=>{if(T.value!==null){T.value=null,j.value=!1;return}P.value=void 0,W.value=c.currentTarget;const s=W.value.getBoundingClientRect();Z.value={position:"absolute",top:"".concat(s.bottom+window.scrollY+10,"px"),left:"".concat(s.right+window.scrollX,"px"),transform:"translateX(-100%)"},T.value="",j.value=!0;try{const B=await Hn(o.value.imdb_id);T.value=B.nudity_info}catch(B){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö:",B),T.value="–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ Parents Guide –Ω–∞ IMDb –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏."}finally{j.value=!1}},ut=c=>{var B,re;if(T.value=null,P.value!==void 0){P.value=void 0;return}we.value=c.currentTarget;const s=we.value.getBoundingClientRect();Le.value={position:"absolute",top:"".concat(s.bottom+window.scrollY+10,"px"),left:"".concat(s.right+window.scrollX,"px"),transform:"translateX(-100%)"},P.value=((B=o.value)==null?void 0:B.nudity_timings)===null?"":((re=o.value)==null?void 0:re.nudity_timings)||""},We=c=>{var B,re,$e,m,l,S,V,O,z,he,ke,Ee,je;return(je={[q.FAVORITE]:((re=(B=o.value)==null?void 0:B.lists)==null?void 0:re.isFavorite)||!1,[q.HISTORY]:((m=($e=o.value)==null?void 0:$e.lists)==null?void 0:m.isHistory)||!1,[q.LATER]:((S=(l=o.value)==null?void 0:l.lists)==null?void 0:S.isLater)||!1,[q.COMPLETED]:((O=(V=o.value)==null?void 0:V.lists)==null?void 0:O.isCompleted)||!1,[q.ABANDONED]:((he=(z=o.value)==null?void 0:z.lists)==null?void 0:he.isAbandoned)||!1,[q.WATCHING]:((Ee=(ke=o.value)==null?void 0:ke.lists)==null?void 0:Ee.isWatching)||!1}[c])!=null?je:!1},Se=async c=>{if(!n.token){h.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:()=>g.push("/login")});return}try{const s={[q.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[q.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[q.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[q.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[q.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[q.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};We(c)?(await Cn(y.value,c),h.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(s[c]))):(await xt(y.value,c),h.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(s[c]))),await Ne(!1),K.value=!1}catch(s){const{message:B,code:re}=Xe(s);h.value.showNotification("".concat(B," ").concat(re))}},et=c=>{const s=document.querySelector(".mobile-list-dropdown");s&&!s.contains(c.target)&&(K.value=!1)},Me=c=>{const s=document.querySelector(".nudity-info-popup");s&&!s.contains(c.target)&&W.value&&!W.value.contains(c.target)&&(T.value=null)},_=c=>{const s=document.querySelector(".nudity-info-popup");s&&!s.contains(c.target)&&we.value&&!we.value.contains(c.target)&&(P.value=void 0)};mt(async()=>{await Ne(),t.value=!1,document.addEventListener("keydown",De),window.addEventListener("resize",_e),setTimeout(Ce,100),document.addEventListener("click",et),document.addEventListener("click",Me,!0),document.addEventListener("click",_,!0)}),Bn(async()=>{d.clearHeaderContent(),document.removeEventListener("keydown",De),window.removeEventListener("resize",_e),document.removeEventListener("click",et),document.removeEventListener("click",Me,!0),document.removeEventListener("click",_,!0)}),Ke(()=>E.params.kp_id,async c=>{c&&c!==y.value&&(d.clearHeaderContent(),y.value=c,A.value=null,await Ne(),t.value=!1)},{immediate:!0}),Ke(o,()=>{J()},{deep:!0}),Ke(T,c=>{c?document.addEventListener("click",Me,!0):document.removeEventListener("click",Me,!0)},{deep:!0}),Ke(P,c=>{c?document.addEventListener("click",_,!0):document.removeEventListener("click",_,!0)},{deep:!0});const F=c=>{var s,B;return((B=(s=o.value)==null?void 0:s.staff)==null?void 0:B.filter(re=>re.profession_key===c))||[]},Oe=async()=>{try{await navigator.clipboard.writeText(T.value),h.value.showNotification("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω")}catch(c){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",c),h.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞")}finally{T.value=null}},ft=async()=>{if(P.value.length!==0)try{const c=P.value.map(s=>"".concat(s.timing_text," (by @").concat(s.username,")")).join("\n").concat("\nReYohoho\n");await navigator.clipboard.writeText(c),h.value.showNotification("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω")}catch(c){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",c),h.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞")}finally{P.value=void 0}},yt=()=>{const c=encodeURIComponent(T.value);window.open("https://translate.google.com/?sl=en&tl=ru&text=".concat(c),"_blank"),T.value=null},ot=H({get:()=>u.submitterUsername,set:c=>u.setSubmitterUsername(c)}),Fe=v(""),tt=v(!1),dt=H(()=>ot.value.trim()&&Fe.value.trim()),N=async()=>{if(!(!dt.value||tt.value))try{tt.value=!0,await On(y.value,ot.value.trim(),Fe.value),h.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é, —Å–ø–∞—Å–∏–±–æ!"),Fe.value="",ue.value=!1}catch(c){const{message:s}=Xe(c);h.value.showNotification(s,5e3)}finally{tt.value=!1}},G=async()=>{try{const{submissions:c}=await Vn();ae.value=c,ee.value=!0}catch(c){const{message:s}=Xe(c);h.value.showNotification(s)}},ue=v(!1),ae=v([]),ee=v(!1),fe=v(!1),ne=v([]),Ae=v(!1),xe=v(!1),qe=v(null),Ge=v(!1),He=v(!1),Be=v("all"),Tt=async c=>{if(!xe.value)try{xe.value=!0,qe.value=c,Ge.value=!0,He.value=!1,await qn(c);const s=ne.value.find(B=>B.id===c);s&&(s.status="approved"),h.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ–¥–æ–±—Ä–µ–Ω")}catch(s){const{message:B}=Xe(s);h.value.showNotification("–û—à–∏–±–∫–∞: ".concat(B))}finally{xe.value=!1,qe.value=null,Ge.value=!1,He.value=!1}},Rt=async c=>{if(!xe.value)try{xe.value=!0,qe.value=c,Ge.value=!1,He.value=!1,await Kn(c);const s=ne.value.find(B=>B.id===c);s&&(s.status="rejected"),h.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ—Ç–∫–ª–æ–Ω–µ–Ω")}catch(s){const{message:B}=Xe(s);h.value.showNotification("–û—à–∏–±–∫–∞: ".concat(B))}finally{xe.value=!1,qe.value=null,Ge.value=!1,He.value=!1}},Et=async c=>{if(!xe.value)try{xe.value=!0,qe.value=c,Ge.value=!1,He.value=!0,await zn(c);const s=ne.value.find(B=>B.id===c);s&&(s.status="clean_text"),h.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ—Ç–º–µ—á–µ–Ω –∫–∞–∫ clean_text")}catch(s){const{message:B}=Xe(s);h.value.showNotification("–û—à–∏–±–∫–∞: ".concat(B))}finally{xe.value=!1,qe.value=null,Ge.value=!1,He.value=!1}},Pt=async()=>{if(!Ae.value)try{Ae.value=!0,fe.value=!0;const{timings:c}=await Fn();ne.value=c}catch(c){const{message:s}=Xe(c);h.value.showNotification(s),fe.value=!1}finally{Ae.value=!1}},St=c=>({pending:"–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏",approved:"–û–¥–æ–±—Ä–µ–Ω–æ",rejected:"–û—Ç–∫–ª–æ–Ω–µ–Ω–æ",clean_text:"–ù–µ –º–æ–¥–µ—Ä–∏—Ä—É–µ—Ç—Å—è"})[c]||c,gt=(c,s)=>{const B=[2,0,1,1,1,2];return s[c%100>4&&c%100<20?2:B[Math.min(c%10,5)]]},At=c=>{if(!ae.value.length)return 0;const s=Math.max(...ae.value.map(B=>B.approved_submissions_count));return c/s*100},Lt=H(()=>Be.value==="all"?ne.value:ne.value.filter(c=>c.status===Be.value));return(c,s)=>{var re,$e,m,l,S,V,O,z,he,ke,Ee,je,st,lt,it,at,rt,pt;const B=Ie("router-link");return i(),a(se,null,[e("div",yi,[e("div",pi,[(t.value||!o.value)&&!L.value?(i(),a("div",hi,[e("div",bi,[s[27]||(s[27]=Ct('<div class="movie-skeleton__header" data-v-7914a165><div class="movie-skeleton__title" data-v-7914a165></div></div><div class="movie-skeleton__ratings" data-v-7914a165><div class="movie-skeleton__rating-item" data-v-7914a165></div><div class="movie-skeleton__rating-item" data-v-7914a165></div><div class="movie-skeleton__rating-item" data-v-7914a165></div></div>',2)),e("div",wi,[ce(En)]),s[28]||(s[28]=Ct('<div class="movie-skeleton__additional-info" data-v-7914a165><div class="movie-skeleton__section-title" data-v-7914a165></div><div class="movie-skeleton__info-list" data-v-7914a165><div class="movie-skeleton__info-item" data-v-7914a165></div><div class="movie-skeleton__info-item" data-v-7914a165></div><div class="movie-skeleton__info-item" data-v-7914a165></div><div class="movie-skeleton__info-item" data-v-7914a165></div><div class="movie-skeleton__info-item" data-v-7914a165></div></div></div><div class="movie-skeleton__description" data-v-7914a165><div class="movie-skeleton__description-line" data-v-7914a165></div><div class="movie-skeleton__description-line" data-v-7914a165></div><div class="movie-skeleton__description-line" data-v-7914a165></div><div class="movie-skeleton__description-line" data-v-7914a165></div></div>',2))])])):p("",!0),L.value?(i(),Ze(wn,{key:1,message:L.value,code:I.value},null,8,["message","code"])):p("",!0),L.value?(i(),a("div",Ci,[(i(),Ze(hn,{key:y.value,"kp-id":y.value,"movie-info":o.value,"onUpdate:movieInfo":Ne},null,8,["kp-id","movie-info"]))])):p("",!0),o.value&&!t.value?(i(),a("div",_i,[e("div",Mi,[o.value.logo_url?(i(),a("div",{key:0,class:"content-logo",onMousemove:Te,onMouseleave:s[0]||(s[0]=f=>ve.value=!1),onClick:ge},[e("img",{src:o.value.logo_url,alt:"–õ–æ–≥–æ—Ç–∏–ø —Ñ–∏–ª—å–º–∞",class:"content-logo"},null,8,Ei)],32)):(i(),a("div",{key:1,onMousemove:Te,onMouseleave:s[1]||(s[1]=f=>ve.value=!1),onClick:ge},[e("h1",Li,k(o.value.title),1)],32)),te(e("div",{class:"title-copy-tooltip",style:ct(me.value)}," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ",4),[[de,ve.value]])]),o.value.kinopoisk_id||o.value.title||o.value.imdb_id||o.value.rating_imdb||o.value.shikimori_id?(i(),a("div",Ii,[o.value.kinopoisk_id?(i(),Ze(_s,{key:o.value.kinopoisk_id,"kp-id":o.value.kinopoisk_id,"show-dash":!0},null,8,["kp-id"])):p("",!0),o.value.kinopoisk_id?(i(),a("div",Ti,[e("a",{href:"https://www.kinopoisk.ru/film/".concat(o.value.kinopoisk_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:o.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(Y(o.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[s[29]||(s[29]=e("img",{src:kn,alt:"–ö–ü",class:"rating-logo"},null,-1)),e("span",{class:w(["rating-value",Q(wt)(o.value.rating_kinopoisk)])},k(o.value.rating_kinopoisk?o.value.rating_kinopoisk:"‚Äî"),3),s[30]||(s[30]=e("img",{src:bt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Ri)])):p("",!0),!o.value.kinopoisk_id&&o.value.title?(i(),a("div",Pi,[e("a",{href:"https://www.kinopoisk.ru/index.php?kp_query=".concat(encodeURIComponent(o.value.title+(o.value.year?" "+o.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:o.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(Y(o.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[s[31]||(s[31]=e("img",{src:kn,alt:"–ö–ü",class:"rating-logo"},null,-1)),e("span",{class:w(["rating-value",Q(wt)(o.value.rating_kinopoisk)])},k(o.value.rating_kinopoisk?o.value.rating_kinopoisk:"‚Äî"),3),s[32]||(s[32]=e("img",{src:bt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Si)])):p("",!0),o.value.imdb_id?(i(),a("div",Ai,[e("a",{href:"https://www.imdb.com/title/".concat(o.value.imdb_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:o.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(Y(o.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[s[33]||(s[33]=e("img",{src:yn,alt:"IMDb",class:"rating-logo"},null,-1)),e("span",{class:w(["rating-value",Q(wt)(o.value.rating_imdb)])},k(o.value.rating_imdb?o.value.rating_imdb:"‚Äî"),3),s[34]||(s[34]=e("img",{src:bt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,xi)])):p("",!0),!o.value.imdb_id&&o.value.title?(i(),a("div",ji,[e("a",{href:"https://www.imdb.com/find/?q=".concat(encodeURIComponent(o.value.title+(o.value.year?" "+o.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:o.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(Y(o.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[s[35]||(s[35]=e("img",{src:yn,alt:"IMDb",class:"rating-logo"},null,-1)),e("span",{class:w(["rating-value",Q(wt)(o.value.rating_imdb)])},k(o.value.rating_imdb?o.value.rating_imdb:"‚Äî"),3),s[36]||(s[36]=e("img",{src:bt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,Ui)])):p("",!0),o.value.shikimori_id?(i(),a("div",Ni,[e("a",{href:"https://shikimori.one/animes/".concat(o.value.shikimori_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},s[37]||(s[37]=[e("img",{src:Qn,alt:"Shiki",class:"rating-logo"},null,-1),e("img",{src:bt,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,Bi)])):p("",!0),o.value.imdb_id?(i(),a("button",{key:6,class:"nudity-info-btn parents-guide-btn",onClick:s[2]||(s[2]=f=>Je(f)),onMousedown:s[3]||(s[3]=f=>nt(f)),title:T.value?"–°–∫—Ä—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é":"–ü–æ–∫–∞–∑–∞—Ç—å Parents Guide –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ü–µ–Ω–∞—Ö"},[s[38]||(s[38]=e("span",{class:"desktop-text"},"Parents Guide",-1)),s[39]||(s[39]=e("span",{class:"mobile-text"},"PG",-1)),j.value?(i(),a("i",Hi)):(i(),a("i",Di))],40,$i)):p("",!0),e("button",{class:"nudity-info-btn",onClick:s[4]||(s[4]=f=>ut(f)),title:P.value!==void 0?"–°–∫—Ä—ã—Ç—å —Ç–∞–π–º–∏–Ω–≥–∏":"–ü–æ–∫–∞–∑–∞—Ç—å —Ç–∞–π–º–∏–Ω–≥–∏ —Å—Ü–µ–Ω 18+(–¥–ª—è —Ç–≤–∏—á–∞, –º–∏–≥–∞–Ω–∏–µ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö)"},[e("i",{class:w(["fa-regular fa-clock",{"text-red":ye.value,"text-red-blink":Ve.value}])},null,2)],8,Vi)])):p("",!0),(i(),Ze(hn,{key:y.value,"kp-id":y.value,"movie-info":o.value,"onUpdate:movieInfo":Ne},null,8,["kp-id","movie-info"])),Q(u).isMobile?(i(),a("div",Oi,[e("button",{class:w(["mobile-list-toggle",{}]),onClick:s[5]||(s[5]=f=>K.value=!K.value)},[e("span",{class:w(["material-icons",{active:D.value}])},k(D.value?"bookmark_added":"bookmark_border"),3),s[40]||(s[40]=e("span",{class:"button-label"},"–î–æ–±–∞–≤–∏—Ç—å –≤ —Å–ø–∏—Å–æ–∫",-1)),e("span",{class:w(["material-icons dropdown-arrow",{expanded:K.value}])},"expand_more",2)]),te(e("div",Fi,[e("button",{class:w(["mobile-list-btn",{}]),onClick:s[6]||(s[6]=f=>Se(Q(q).FAVORITE))},[e("span",{class:w(["material-icons",{active:($e=(re=o.value)==null?void 0:re.lists)==null?void 0:$e.isFavorite}])},k((l=(m=o.value)==null?void 0:m.lists)!=null&&l.isFavorite?"favorite":"favorite_border"),3),s[41]||(s[41]=e("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))]),e("button",{class:w(["mobile-list-btn",{}]),onClick:s[7]||(s[7]=f=>Se(Q(q).WATCHING))},[e("span",{class:w(["material-icons",{active:(V=(S=o.value)==null?void 0:S.lists)==null?void 0:V.isWatching}])},k((z=(O=o.value)==null?void 0:O.lists)!=null&&z.isWatching?"visibility":"visibility_off"),3),s[42]||(s[42]=e("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))]),e("button",{class:w(["mobile-list-btn",{}]),onClick:s[8]||(s[8]=f=>Se(Q(q).LATER))},[e("span",{class:w(["material-icons",{active:(ke=(he=o.value)==null?void 0:he.lists)==null?void 0:ke.isLater}])},"watch_later",2),s[43]||(s[43]=e("span",{class:"button-label"},"–ü–æ–∑–∂–µ",-1))]),e("button",{class:w(["mobile-list-btn",{}]),onClick:s[9]||(s[9]=f=>Se(Q(q).COMPLETED))},[e("span",{class:w(["material-icons",{active:(je=(Ee=o.value)==null?void 0:Ee.lists)==null?void 0:je.isCompleted}])},k((lt=(st=o.value)==null?void 0:st.lists)!=null&&lt.isCompleted?"check_circle":"check_circle_outline"),3),s[44]||(s[44]=e("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))]),e("button",{class:w(["mobile-list-btn",{}]),onClick:s[10]||(s[10]=f=>Se(Q(q).ABANDONED))},[e("span",{class:w(["material-icons",{active:(at=(it=o.value)==null?void 0:it.lists)==null?void 0:at.isAbandoned}])},"not_interested",2),s[45]||(s[45]=e("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))])],512),[[de,K.value]])])):p("",!0),e("meta",{name:"title-and-year",content:o.value.type==="FILM"&&o.value.year?"".concat(o.value.title," (").concat(o.value.year,")"):o.value.title},null,8,qi),o.value.name_original?(i(),a("meta",{key:2,name:"original-title",content:o.value.name_original},null,8,Ki)):p("",!0),e("div",zi,[s[56]||(s[56]=e("h2",{class:"additional-info-title"},"–ü–æ–¥—Ä–æ–±–Ω–µ–µ",-1)),e("div",Wi,[o.value.poster_url?(i(),a("div",Gi,[e("a",{href:o.value.poster_url,target:"_blank",rel:"noopener noreferrer"},[e("img",{src:o.value.poster_url,alt:"–ü–æ—Å—Ç–µ—Ä —Ñ–∏–ª—å–º–∞",class:"movie-poster"},null,8,Xi)],8,Yi)])):p("",!0),e("div",Zi,[e("ul",Qi,[o.value.type&&Q(gn)[o.value.type]?(i(),a("li",Ji,[s[46]||(s[46]=e("strong",null,"–¢–∏–ø:",-1)),X(" "+k(Q(gn)[o.value.type]),1)])):p("",!0),o.value.year?(i(),a("li",ea,[s[47]||(s[47]=e("strong",null,"–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞:",-1)),X(" "+k(o.value.year),1)])):p("",!0),o.value.title?(i(),a("li",ta,[s[48]||(s[48]=e("strong",null,"–ù–∞–∑–≤–∞–Ω–∏–µ:",-1)),X(" "+k(o.value.title),1)])):p("",!0),o.value.name_original?(i(),a("li",na,[s[49]||(s[49]=e("strong",null,"–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:",-1)),X(" "+k(o.value.name_original),1)])):p("",!0),o.value.slogan?(i(),a("li",oa,[s[50]||(s[50]=e("strong",null,"–°–ª–æ–≥–∞–Ω:",-1)),X(" "+k(o.value.slogan),1)])):p("",!0),o.value.production_companies?(i(),a("li",sa,[s[51]||(s[51]=e("strong",null,"–ü—Ä–æ–¥–∞–∫—à–Ω:",-1)),X(" "+k(o.value.production_companies),1)])):p("",!0),(rt=o.value.countries)!=null&&rt.length?(i(),a("li",la,[s[52]||(s[52]=e("strong",null,"–°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞:",-1)),X(" "+k(o.value.countries.map(f=>f.country).join(", ")),1)])):p("",!0),(pt=o.value.genres)!=null&&pt.length?(i(),a("li",ia,[s[53]||(s[53]=e("strong",null,"–ñ–∞–Ω—Ä—ã:",-1)),X(" "+k(o.value.genres.map(f=>f.genre).join(", ")),1)])):p("",!0),o.value.film_length?(i(),a("li",aa,[s[54]||(s[54]=e("strong",null,"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:",-1)),X(" "+k(pe(o.value.film_length)),1)])):p("",!0),o.value.rating_mpaa||o.value.rating_age_limits?(i(),a("li",ra,[o.value.rating_mpaa?(i(),a("div",ua,[s[55]||(s[55]=e("strong",null,"MPAA",-1)),e("span",null,k(o.value.rating_mpaa.toUpperCase()),1)])):p("",!0),o.value.rating_age_limits?(i(),a("div",da,[e("strong",null,k(o.value.rating_age_limits.replace("age",""))+"+",1)])):p("",!0)])):p("",!0)]),e("div",ca,[o.value.description?(i(),a("p",va,k(o.value.description),1)):p("",!0)])])])]),oe.value?(i(),a("div",ma,[(i(),Ze(ki,{"movie-id":y.value,key:y.value},null,8,["movie-id"]))])):p("",!0),o.value.staff?(i(),a("div",fa,[e("div",ga,[F("ACTOR").length?(i(),a("div",ka,[s[57]||(s[57]=e("h3",{class:"additional-info-title"},"–ê–∫—Ç—ë—Ä—ã",-1)),e("div",ya,[(i(!0),a(se,null,be(F("ACTOR").slice(0,12),f=>(i(),a("div",{key:f.staff_id,class:"staff-item"},[e("a",{href:"https://www.kinopoisk.ru/name/".concat(f.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-link",title:f.description||""},[e("img",{src:f.poster_url,alt:f.name_ru,class:"staff-photo"},null,8,ha),e("span",ba,k(f.name_ru||f.name_en),1),f.description?(i(),a("span",wa,k(f.description),1)):p("",!0)],8,pa)]))),128)),e("a",{class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(y.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(F("ACTOR").length," –∞–∫—Ç–µ—Ä–æ–≤")}," +"+k(F("ACTOR").length-12),9,Ca)])])):p("",!0),F("DIRECTOR").length?(i(),a("div",_a,[s[58]||(s[58]=e("h3",{class:"additional-info-title"},"–†–µ–∂–∏—Å—Å—ë—Ä—ã",-1)),e("div",Ma,[e("div",Ea,[(i(!0),a(se,null,be(F("DIRECTOR").slice(0,5),f=>(i(),a("a",{key:f.staff_id,href:"https://www.kinopoisk.ru/name/".concat(f.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},k(f.name_ru||f.name_en),9,La))),128)),F("DIRECTOR").length>5?(i(),a("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(y.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(F("DIRECTOR").length," —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–≤")}," +"+k(F("DIRECTOR").length-5),9,Ia)):p("",!0)])])])):p("",!0),F("PRODUCER").length?(i(),a("div",Ta,[s[59]||(s[59]=e("h3",{class:"additional-info-title"},"–ü—Ä–æ–¥—é—Å–µ—Ä—ã",-1)),e("div",Ra,[e("div",Pa,[(i(!0),a(se,null,be(F("PRODUCER").slice(0,5),f=>(i(),a("a",{key:f.staff_id,href:"https://www.kinopoisk.ru/name/".concat(f.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},k(f.name_ru||f.name_en),9,Sa))),128)),F("PRODUCER").length>5?(i(),a("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(y.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(F("PRODUCER").length," –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤")}," +"+k(F("PRODUCER").length-5),9,Aa)):p("",!0)])])])):p("",!0)])])):p("",!0),ie.value.length&&Q(U)?(i(),a("div",xa,[ce(ms,{videos:ie.value,"active-video-index":A.value,onSelect:c.playTrailer},null,8,["videos","active-video-index","onSelect"])])):p("",!0),Re.value.length?(i(),a("div",ja,[s[60]||(s[60]=e("h2",null,"–°–∏–∫–≤–µ–ª—ã –∏ –ø—Ä–∏–∫–≤–µ–ª—ã",-1)),ce(Q(pn),{"movies-list":x.value?Re.value:Re.value.slice(0,b.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),Re.value.length>b.value?(i(),a("a",{key:0,class:"expand-circle-button",onClick:s[11]||(s[11]=f=>x.value=!x.value),title:"".concat(x.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(Re.value.length,")")},k(x.value?"‚àí":"+".concat(Re.value.length-b.value)),9,Ua)):p("",!0)])):p("",!0),Pe.value.length?(i(),a("div",Na,[s[61]||(s[61]=e("h2",null,"–ü–æ—Ö–æ–∂–∏–µ",-1)),ce(Q(pn),{"movies-list":R.value?Pe.value:Pe.value.slice(0,b.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),Pe.value.length>b.value?(i(),a("a",{key:0,class:"expand-circle-button",onClick:s[12]||(s[12]=f=>R.value=!R.value),title:"".concat(R.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(Pe.value.length,")")},k(R.value?"‚àí":"+".concat(Pe.value.length-b.value)),9,Ba)):p("",!0)])):p("",!0)])):p("",!0)])]),ce(It,{ref_key:"notificationRef",ref:h},null,512),T.value!==null?(i(),a("div",{key:0,style:ct(Z.value),class:"nudity-info-popup"},[e("div",$a,[j.value?(i(),a("div",Da,s[62]||(s[62]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),e("span",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏...",-1)]))):(i(),a("div",Ha,k(T.value),1))]),e("div",Va,[e("a",{href:"https://www.imdb.com/title/".concat(o.value.imdb_id,"/parentalguide"),target:"_blank",rel:"noopener noreferrer",class:"nudity-info-button"},s[63]||(s[63]=[e("i",{class:"fas fa-external-link-alt"},null,-1),e("span",null,"Parents Guide",-1)]),8,Oa),e("button",{class:"nudity-info-button",onClick:Oe},s[64]||(s[64]=[e("i",{class:"fas fa-copy"},null,-1),e("span",null,"Copy",-1)])),e("button",{class:"nudity-info-button",onClick:yt},s[65]||(s[65]=[e("i",{class:"fas fa-language"},null,-1),e("span",null,"Translate",-1)]))])],4)):p("",!0),P.value!==void 0?(i(),a("div",{key:1,style:ct(Le.value),class:"nudity-info-popup"},[e("div",Fa,[e("div",{class:"acknowledgment-table"},[s[68]||(s[68]=e("div",{class:"acknowledgment-header"},[e("i",{class:"fa-solid fa-heart"}),e("span",null,"–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏")],-1)),e("div",{class:"acknowledgment-content"},[s[67]||(s[67]=e("div",{class:"acknowledgment-row"},[e("a",{href:"https://www.twitch.tv/tanyabelkova",target:"_blank",rel:"noopener noreferrer",class:"twitch-link"},[e("i",{class:"fa-brands fa-twitch"}),e("span",null,"TanyaBelkova")]),e("span",{class:"acknowledgment-text"},"‚Äî –∑–∞ –æ—Å–Ω–æ–≤—É –±–∞–∑—ã —Ç–∞–π–º–∏–Ω–≥–æ–≤")],-1)),e("div",{class:"acknowledgment-row clickable",onClick:G},s[66]||(s[66]=[e("div",{class:"community-link"},[e("i",{class:"fa-solid fa-users"}),e("span",null,"–°–æ–æ–±—â–µ—Å—Ç–≤–æ")],-1),e("span",{class:"acknowledgment-text"},"‚Äî –∑–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–∏–Ω–≥–æ–≤",-1)]))])]),e("div",{class:w(["timings-content",{"no-border":!P.value}])},[e("div",qa,[P.value.length>0?(i(),a("div",Ka,[(i(!0),a(se,null,be(P.value,f=>(i(),a("div",{key:f.id,class:w(["timing-entry",{pending:f.status==="pending","clean-text":f.status==="clean_text"}])},[e("div",za,[f.status==="pending"?(i(),a("div",Wa,"–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏")):p("",!0),f.status==="clean_text"?(i(),a("div",Ga," –¢–∞–π–º–∏–Ω–≥–∏ —Ç–∞–∫–æ–≥–æ —Ç–∏–ø–∞ –Ω–µ –º–æ–¥–µ—Ä–∏—Ä—É—é—Ç—Å—è, –¥–ª—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Å–≤–µ—Ä—è–π—Ç–µ—Å—å —Å ParentsGuide ")):p("",!0),e("div",{class:w(["timing-hover-container",{blurred:f.status==="pending"}])},[e("span",Ya,k(f.timing_text),1),s[69]||(s[69]=e("br",null,null,-1)),e("span",Xa,"by "+k(f.username),1)],2)])],2))),128))])):(i(),a("div",Za,k("–ó–∞–ø–∏—Å–µ–π –æ —Ç–∞–π–º–∏–Ω–≥–∞—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")))]),e("div",Qa,[P.value.length>0?(i(),a("button",{key:0,class:"nudity-info-button",onClick:ft},s[70]||(s[70]=[e("i",{class:"fas fa-copy"},null,-1),e("span",null,"–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å",-1)]))):p("",!0),e("button",{class:"nudity-info-button",onClick:s[13]||(s[13]=f=>ue.value=!0)},s[71]||(s[71]=[e("i",{class:"fas fa-plus"},null,-1),e("span",null,"–î–æ–±–∞–≤–∏—Ç—å/–¥–æ–ø–æ–ª–Ω–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥",-1)]))])],2)])],4)):p("",!0),ue.value?(i(),a("div",Ja,[e("div",er,[e("div",tr,[s[73]||(s[73]=e("h3",null,"–î–æ–±–∞–≤–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥",-1)),e("button",{class:"close-modal-btn",onClick:s[14]||(s[14]=f=>ue.value=!1)},s[72]||(s[72]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",nr,[te(e("input",{"onUpdate:modelValue":s[15]||(s[15]=f=>ot.value=f),placeholder:"–í–∞—à –Ω–∏–∫",class:"timing-input",maxlength:"50"},null,512),[[vt,ot.value]]),te(e("textarea",{"onUpdate:modelValue":s[16]||(s[16]=f=>Fe.value=f),placeholder:"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ñ–∏–ª—å–º–∞, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã –ø—Ä–∏–ª–∞–≥–∞–µ—Ç–µ —Ç–∞–π–º–∏–Ω–≥\n\n–î–ª—è —Å–µ—Ä–∏–∞–ª–æ–≤ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ —Å–µ–∑–æ–Ω –∏ –Ω–æ–º–µ—Ä —ç–ø–∏–∑–æ–¥–∞\n",class:"timing-textarea"},null,512),[[vt,Fe.value]]),e("div",or,[e("button",{class:"submit-timing-btn",onClick:N,disabled:!dt.value||tt.value},[tt.value?(i(),a("i",lr)):(i(),a("span",ir,"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é"))],8,sr)])])])])):p("",!0),ee.value?(i(),a("div",{key:3,class:"modal-overlay",onClick:s[19]||(s[19]=f=>ee.value=!1)},[e("div",{class:"modal-content",onClick:s[18]||(s[18]=Qe(()=>{},["stop"]))},[e("div",ar,[s[75]||(s[75]=e("h3",null,[X(" –¢–æ–ø –∞–≤—Ç–æ—Ä–æ–≤ —Ç–∞–π–º–∏–Ω–≥–æ–≤ "),e("span",{class:"hint-text"},[X("(–•–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —Å–≤–æ–π —Å—Ç—Ä–∏–º/—Å–æ—Ü—Å–µ—Ç–∏? –ù–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º –≤ "),e("a",{href:"https://t.me/reyohoho_sup",target:"_blank",rel:"noopener noreferrer"},"—Ç–µ–ª–µ–≥—Ä–∞–º"),X(")")])],-1)),e("div",rr,[e("button",{class:"close-modal-btn",onClick:s[17]||(s[17]=f=>ee.value=!1)},s[74]||(s[74]=[e("i",{class:"fas fa-times"},null,-1)]))])]),e("div",ur,[e("button",{class:"show-all-timings-btn",onClick:Pt,disabled:Ae.value},[Ae.value?(i(),a("i",cr)):(i(),a("i",vr)),s[76]||(s[76]=e("span",null,"–í—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏",-1))],8,dr),e("div",mr,[(i(!0),a(se,null,be(ae.value,(f,Ye)=>(i(),a("div",{key:f.username,class:"top-submitter-item"},[e("div",{class:w(["submitter-rank",{gold:Ye===0,silver:Ye===1,bronze:Ye===2}])},k(Ye+1),3),e("div",fr,[e("div",gr,[f.stream_link?(i(),a("a",{key:0,href:f.stream_link,target:"_blank",rel:"noopener noreferrer"},[X(k(f.username)+" ",1),s[77]||(s[77]=e("i",{class:"fa-brands fa-twitch"},null,-1))],8,kr)):(i(),a(se,{key:1},[X(k(f.username),1)],64))]),e("div",yr,k(f.approved_submissions_count)+" "+k(gt(f.approved_submissions_count,["—Ñ–∏–ª—å–º","—Ñ–∏–ª—å–º–∞","—Ñ–∏–ª—å–º–æ–≤"])),1)]),e("div",pr,[e("div",{class:"contribution-bar",style:ct({width:At(f.approved_submissions_count)+"%"})},null,4)])]))),128))])])])])):p("",!0),fe.value?(i(),a("div",{key:4,class:"modal-overlay",onClick:s[26]||(s[26]=f=>fe.value=!1)},[e("div",{class:"modal-content all-timings-modal",onClick:s[25]||(s[25]=Qe(()=>{},["stop"]))},[e("div",hr,[s[79]||(s[79]=e("h3",null,"–í—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏",-1)),e("button",{class:"close-modal-btn",onClick:s[20]||(s[20]=f=>fe.value=!1)},s[78]||(s[78]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",br,[!Ae.value&&ne.value.length>0?(i(),a("div",wr,[e("button",{class:w(["timing-filter-btn",{active:Be.value==="all"}]),onClick:s[21]||(s[21]=f=>Be.value="all")}," –í—Å–µ ("+k(ne.value.length)+") ",3),e("button",{class:w(["timing-filter-btn",{active:Be.value==="approved"}]),onClick:s[22]||(s[22]=f=>Be.value="approved")}," –û–¥–æ–±—Ä–µ–Ω–Ω—ã–µ ("+k(ne.value.filter(f=>f.status==="approved").length)+") ",3),e("button",{class:w(["timing-filter-btn",{active:Be.value==="pending"}]),onClick:s[23]||(s[23]=f=>Be.value="pending")}," –ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ ("+k(ne.value.filter(f=>f.status==="pending").length)+") ",3),e("button",{class:w(["timing-filter-btn",{active:Be.value==="clean_text"}]),onClick:s[24]||(s[24]=f=>Be.value="clean_text")}," –ù–µ –º–æ–¥–µ—Ä–∏—Ä—É—é—Ç—Å—è ("+k(ne.value.filter(f=>f.status==="clean_text").length)+") ",3)])):p("",!0),Ae.value?(i(),a("div",Cr,s[80]||(s[80]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),e("span",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö —Ç–∞–π–º–∏–Ω–≥–æ–≤...",-1)]))):ne.value.length===0?(i(),a("div",_r,s[81]||(s[81]=[e("p",null,"–¢–∞–π–º–∏–Ω–≥–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",-1)]))):Lt.value.length===0?(i(),a("div",Mr,s[82]||(s[82]=[e("p",null,"–¢–∞–π–º–∏–Ω–≥–∏ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —Ñ–∏–ª—å—Ç—Ä—É –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",-1)]))):(i(),a("div",Er,[(i(!0),a(se,null,be(Lt.value,f=>{var Ye;return i(),a("div",{key:f.id,class:w(["timing-item",{pending:f.status==="pending",approved:f.status==="approved",rejected:f.status==="rejected","clean-text":f.status==="clean_text"}])},[e("div",Lr,[e("div",Ir,[e("span",{class:w(["timing-status",f.status])},k(St(f.status)),3),e("span",Tr,k(f.username),1),e("span",Rr,k(Q(Mn)(f.submitted_at)),1)]),e("div",Pr,[ce(B,{to:"/movie/".concat(f.kp_id),class:"timing-kp-id clickable",title:"–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ñ–∏–ª—å–º—É ".concat(f.kp_id)},{default:jt(()=>[X(" KP: "+k(f.kp_id),1)]),_:2},1032,["to","title"]),(Ye=Q(n).user)!=null&&Ye.is_admin&&f.status==="pending"?(i(),a("div",Sr,[f.status==="pending"?(i(),a("button",{key:0,class:"approve-btn",onClick:ht=>Tt(f.id),disabled:xe.value,title:"–û–¥–æ–±—Ä–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥"},[qe.value===f.id&&Ge.value?(i(),a("i",xr)):(i(),a("i",jr))],8,Ar)):p("",!0),f.status==="pending"?(i(),a("button",{key:1,class:"reject-btn",onClick:ht=>Rt(f.id),disabled:xe.value,title:"–û—Ç–∫–ª–æ–Ω–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥"},[qe.value===f.id&&!Ge.value&&!He.value?(i(),a("i",Nr)):(i(),a("i",Br))],8,Ur)):p("",!0),f.status==="pending"?(i(),a("button",{key:2,class:"clean-text-btn",onClick:ht=>Et(f.id),disabled:xe.value,title:"–û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ clean_text"},[qe.value===f.id&&He.value?(i(),a("i",Dr)):(i(),a("i",Hr))],8,$r)):p("",!0)])):p("",!0)])]),e("div",Vr,[e("pre",Or,k(f.timing_text),1)])],2)}),128))]))])])])):p("",!0)],64)}}},Zr=ze(Fr,[["__scopeId","data-v-7914a165"]]);export{Zr as default};
