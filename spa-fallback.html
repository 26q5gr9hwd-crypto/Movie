<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ReYohoho - Redirecting...</title>
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
      }
      .loader {
        text-align: center;
      }
      .spinner {
        border: 3px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top: 3px solid white;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
        margin: 0 auto 20px;
      }
      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
    </style>
    <script>
      ;(function () {
        try {
          const fullPath = window.location.pathname
          const search = window.location.search
          const hash = window.location.hash
          const hostname = window.location.hostname

          console.log('SPA Fallback - Original URL:', window.location.href)

          let basePath = ''

          if (hostname !== 'localhost' && hostname !== '127.0.0.1') {
            if (fullPath.startsWith('/reyohoho')) {
              basePath = '/reyohoho'
            } else if (fullPath.startsWith('/repo')) {
              basePath = '/repo'
            }
          }

          let appRoute = fullPath
          if (basePath && fullPath.startsWith(basePath)) {
            appRoute = fullPath.substring(basePath.length)
          }

          if (!appRoute || appRoute === '/') {
            appRoute = ''
          }

          if (appRoute.startsWith('/')) {
            appRoute = appRoute.substring(1)
          }

          const newUrl = `${basePath}/#/${appRoute}${search}${hash}`

          console.log('SPA Fallback - Redirecting to:', newUrl)

          window.location.replace(newUrl)
        } catch (error) {
          console.error('SPA Fallback Error:', error)
          window.location.replace('/')
        }
      })()
    </script>
  </head>
  <body>
    <div class="loader">
      <div class="spinner"></div>
      <p>Загрузка приложения...</p>
      <small
        >Если редирект не произошел автоматически,
        <a href="/" style="color: white">нажмите здесь</a></small
      >
    </div>
  </body>
</html>
